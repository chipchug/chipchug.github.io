var __webpack_modules__={92:e=>{var t=(()=>{var e=Object.defineProperty,t=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,i=Math.pow,s=(t,r,n)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,p=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},l=(e,t,r)=>(p(e,t,"read from private field"),r?r.call(e):t.get(e)),u=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},d=(e,t,r,n)=>(p(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),c=(e,t,r)=>(p(e,t,"access private method"),r),g={};((t,r)=>{for(var n in r)e(t,n,{get:r[n],enumerable:!0})})(g,{ArrayBufferTarget:()=>oe,FileSystemWritableFileStreamTarget:()=>ie,Muxer:()=>rt,StreamTarget:()=>ae});var h,f,m,y,b,_,v,w=new Uint8Array(8),k=new DataView(w.buffer),T=e=>[(e%256+256)%256],O=e=>(k.setUint16(0,e,!1),[w[0],w[1]]),x=e=>(k.setUint32(0,e,!1),[w[1],w[2],w[3]]),S=e=>(k.setUint32(0,e,!1),[w[0],w[1],w[2],w[3]]),E=e=>(k.setUint8(0,e),k.setUint8(1,e<<8),[w[0],w[1]]),F=e=>(k.setUint16(0,e,!1),k.setUint16(2,e<<16,!1),[w[0],w[1],w[2],w[3]]),M=(e,t=!1)=>{let r=Array(e.length).fill(null).map(((t,r)=>e.charCodeAt(r)));return t&&r.push(0),r},R=e=>e&&e[e.length-1],C=(e,t,r=!0)=>{let n=e*t;return r?Math.round(n):n},I=[65536,0,0,0,65536,0,0,0,1073741824].map(S),A=(e,t,r)=>({type:e,contents:t&&new Uint8Array(t.flat(10)),children:r}),B=(e,t,r,n,o)=>A(e,[T(t),x(r),null!=n?n:[]],o),D=(e,t)=>{let r=C(Math.max(0,...t.filter((e=>e.samples.length>0)).map((e=>R(e.samples).timestamp+R(e.samples).duration))),Qe),n=Math.max(...t.map((e=>e.id)))+1;return B("mvhd",0,0,[S(e),S(e),S(Qe),S(r),F(1),E(1),Array(10).fill(0),I,Array(24).fill(0),S(n)])},L=(e,t)=>{let r=R(e.samples),n=C(r?r.timestamp+r.duration:0,Qe);return B("tkhd",0,3,[S(t),S(t),S(e.id),S(0),S(n),Array(8).fill(0),O(0),O(0),E("audio"===e.info.type?1:0),O(0),I,F("video"===e.info.type?e.info.width:0),F("video"===e.info.type?e.info.height:0)])},N=(e,t)=>A("mdia",null,[P(e,t),j("video"===e.info.type?"vide":"soun"),G(e)]),P=(e,t)=>{let r=R(e.samples),n=C(r?r.timestamp+r.duration:0,e.timescale);return B("mdhd",0,0,[S(t),S(t),S(e.timescale),S(n),O(21956),O(0)])},j=e=>B("hdlr",0,0,[M("mhlr"),M(e),S(0),S(0),S(0),M("mp4-muxer-hdlr")]),G=e=>A("minf",null,["video"===e.info.type?W():z(),U(),V(e)]),W=()=>B("vmhd",0,1,[O(0),O(0),O(0),O(0)]),z=()=>B("smhd",0,0,[O(0),O(0)]),U=()=>A("dinf",null,[$()]),$=()=>B("dref",0,0,[S(1)],[H()]),H=()=>B("url ",0,1),V=e=>A("stbl",null,[K(e),Z(e),ee(e),te(e),re(e),ne(e)]),K=e=>B("stsd",0,0,[S(1)],["video"===e.info.type?Y("avc"===e.info.codec?"avc1":"hvc1",e,"avc"===e.info.codec?X(e):q(e)):J("mp4a",e,Q(e))]),Y=(e,t,r)=>A(e,[Array(6).fill(0),O(1),O(0),O(0),Array(12).fill(0),O(t.info.width),O(t.info.height),S(4718592),S(4718592),S(0),O(1),Array(32).fill(0),O(24),(65535,k.setInt16(0,65535,!1),[w[0],w[1]])],[r]),X=e=>e.codecPrivate&&A("avcC",[...e.codecPrivate]),q=e=>e.codecPrivate&&A("hvcC",[...e.codecPrivate]),J=(e,t,r)=>A(e,[Array(6).fill(0),O(1),O(0),O(0),S(0),O(t.info.numberOfChannels),O(16),O(0),O(0),F(t.info.sampleRate)],[r]),Q=e=>B("esds",0,0,[S(58753152),T(32+e.codecPrivate.byteLength),O(1),T(0),S(75530368),T(18+e.codecPrivate.byteLength),T(64),T(21),x(0),S(130071),S(130071),S(92307584),T(e.codecPrivate.byteLength),...e.codecPrivate,S(109084800),T(1),T(2)]),Z=e=>B("stts",0,0,[S(e.timeToSampleTable.length),e.timeToSampleTable.map((e=>[S(e.sampleCount),S(e.sampleDelta)]))]),ee=e=>{if(e.samples.every((e=>"key"===e.type)))return null;let t=[...e.samples.entries()].filter((([,e])=>"key"===e.type));return B("stss",0,0,[S(t.length),t.map((([e])=>S(e+1)))])},te=e=>B("stsc",0,0,[S(e.compactlyCodedChunkTable.length),e.compactlyCodedChunkTable.map((e=>[S(e.firstChunk),S(e.samplesPerChunk),S(1)]))]),re=e=>B("stsz",0,0,[S(0),S(e.samples.length),e.samples.map((e=>S(e.size)))]),ne=e=>e.writtenChunks.length>0&&R(e.writtenChunks).offset>=i(2,32)?B("co64",0,0,[S(e.writtenChunks.length),e.writtenChunks.map((e=>{return t=e.offset,k.setUint32(0,Math.floor(t/i(2,32)),!1),k.setUint32(4,t,!1),[w[0],w[1],w[2],w[3],w[4],w[5],w[6],w[7]];var t}))]):B("stco",0,0,[S(e.writtenChunks.length),e.writtenChunks.map((e=>S(e.offset)))]),oe=class{constructor(){this.buffer=null}},ae=class{constructor(e,t,r){this.onData=e,this.onDone=t,this.options=r}},ie=class{constructor(e,t){this.stream=e,this.options=t}},se=class{constructor(){this.pos=0,u(this,h,new Uint8Array(8)),u(this,f,new DataView(l(this,h).buffer)),this.offsets=new WeakMap}seek(e){this.pos=e}writeU32(e){l(this,f).setUint32(0,e,!1),this.write(l(this,h).subarray(0,4))}writeU64(e){l(this,f).setUint32(0,Math.floor(e/i(2,32)),!1),l(this,f).setUint32(4,e,!1),this.write(l(this,h).subarray(0,8))}writeAscii(e){for(let t=0;t<e.length;t++)l(this,f).setUint8(t%8,e.charCodeAt(t)),t%8==7&&this.write(l(this,h));e.length%8!=0&&this.write(l(this,h).subarray(0,e.length%8))}writeBox(e){var t,r;if(this.offsets.set(e,this.pos),e.contents&&!e.children)this.writeBoxHeader(e,null!=(t=e.size)?t:e.contents.byteLength+8),this.write(e.contents);else{let t=this.pos;if(this.writeBoxHeader(e,0),e.contents&&this.write(e.contents),e.children)for(let t of e.children)t&&this.writeBox(t);let n=this.pos,o=null!=(r=e.size)?r:n-t;this.seek(t),this.writeBoxHeader(e,o),this.seek(n)}}writeBoxHeader(e,t){this.writeU32(e.largeSize?1:t),this.writeAscii(e.type),e.largeSize&&this.writeU64(t)}patchBox(e){let t=this.pos;this.seek(this.offsets.get(e)),this.writeBox(e),this.seek(t)}};h=new WeakMap,f=new WeakMap;var pe,le,ue=class extends se{constructor(e){super(),u(this,_),u(this,m,void 0),u(this,y,new ArrayBuffer(i(2,16))),u(this,b,new Uint8Array(l(this,y))),d(this,m,e)}write(e){c(this,_,v).call(this,this.pos+e.byteLength),l(this,b).set(e,this.pos),this.pos+=e.byteLength}finalize(){c(this,_,v).call(this,this.pos),l(this,m).buffer=l(this,y).slice(0,this.pos)}};m=new WeakMap,y=new WeakMap,b=new WeakMap,_=new WeakSet,v=function(e){let t=l(this,y).byteLength;for(;t<e;)t*=2;if(t===l(this,y).byteLength)return;let r=new ArrayBuffer(t),n=new Uint8Array(r);n.set(l(this,b),0),d(this,y,r),d(this,b,n)};var de=class extends se{constructor(e){super(),u(this,pe,void 0),u(this,le,[]),d(this,pe,e)}write(e){l(this,le).push({data:e.slice(),start:this.pos}),this.pos+=e.byteLength}flush(){if(0===l(this,le).length)return;let e=[],t=[...l(this,le)].sort(((e,t)=>e.start-t.start));e.push({start:t[0].start,size:t[0].data.byteLength});for(let r=1;r<t.length;r++){let n=e[e.length-1],o=t[r];o.start<=n.start+n.size?n.size=Math.max(n.size,o.start+o.data.byteLength-n.start):e.push({start:o.start,size:o.data.byteLength})}for(let t of e){t.data=new Uint8Array(t.size);for(let e of l(this,le))t.start<=e.start&&e.start<t.start+t.size&&t.data.set(e.data,e.start-t.start);l(this,pe).onData(t.data,t.start)}l(this,le).length=0}finalize(){var e,t;null==(t=(e=l(this,pe)).onDone)||t.call(e)}};pe=new WeakMap,le=new WeakMap;var ce,ge,he,fe,me,ye,be,_e,ve,we,ke,Te=i(2,24),Oe=class extends se{constructor(e){var t,r;if(super(),u(this,fe),u(this,ye),u(this,_e),u(this,we),u(this,ce,void 0),u(this,ge,void 0),u(this,he,[]),d(this,ce,e),d(this,ge,null!=(r=null==(t=e.options)?void 0:t.chunkSize)?r:Te),!Number.isInteger(l(this,ge))||l(this,ge)<i(2,10))throw new Error("Invalid StreamTarget options: chunkSize must be an integer not smaller than 1024.")}write(e){c(this,fe,me).call(this,e,this.pos),c(this,we,ke).call(this),this.pos+=e.byteLength}finalize(){var e,t;c(this,we,ke).call(this,!0),null==(t=(e=l(this,ce)).onDone)||t.call(e)}};ce=new WeakMap,ge=new WeakMap,he=new WeakMap,fe=new WeakSet,me=function(e,t){let r=l(this,he).findIndex((e=>e.start<=t&&t<e.start+l(this,ge)));-1===r&&(r=c(this,_e,ve).call(this,t));let n=l(this,he)[r],o=t-n.start,a=e.subarray(0,Math.min(l(this,ge)-o,e.byteLength));n.data.set(a,o);let i={start:o,end:o+a.byteLength};if(c(this,ye,be).call(this,n,i),0===n.written[0].start&&n.written[0].end===l(this,ge)&&(n.shouldFlush=!0),l(this,he).length>2){for(let e=0;e<l(this,he).length-1;e++)l(this,he)[e].shouldFlush=!0;c(this,we,ke).call(this)}a.byteLength<e.byteLength&&c(this,fe,me).call(this,e.subarray(a.byteLength),t+a.byteLength)},ye=new WeakSet,be=function(e,t){let r=0,n=e.written.length-1,o=-1;for(;r<=n;){let a=Math.floor(r+(n-r+1)/2);e.written[a].start<=t.start?(r=a+1,o=a):n=a-1}for(e.written.splice(o+1,0,t),(-1===o||e.written[o].end<t.start)&&o++;o<e.written.length-1&&e.written[o].end>=e.written[o+1].start;)e.written[o].end=Math.max(e.written[o].end,e.written[o+1].end),e.written.splice(o+1,1)},_e=new WeakSet,ve=function(e){let t={start:Math.floor(e/l(this,ge))*l(this,ge),data:new Uint8Array(l(this,ge)),written:[],shouldFlush:!1};return l(this,he).push(t),l(this,he).sort(((e,t)=>e.start-t.start)),l(this,he).indexOf(t)},we=new WeakSet,ke=function(e=!1){for(let t=0;t<l(this,he).length;t++){let r=l(this,he)[t];if(r.shouldFlush||e){for(let e of r.written)l(this,ce).onData(r.data.subarray(e.start,e.end),r.start+e.start);l(this,he).splice(t--,1)}}};var xe,Se,Ee,Fe,Me,Re,Ce,Ie,Ae,Be,De,Le,Ne,Pe,je,Ge,We,ze,Ue,$e,He,Ve,Ke,Ye,Xe,qe,Je=class extends Oe{constructor(e){var t;super(new ae(((t,r)=>e.stream.write({type:"write",data:t,position:r})),void 0,{chunkSize:null==(t=e.options)?void 0:t.chunkSize}))}},Qe=1e3,Ze=["avc","hevc"],et=["aac"],tt=["strict","offset"],rt=class{constructor(e){var t;if(u(this,Ie),u(this,Be),u(this,Le),u(this,Pe),u(this,Ge),u(this,ze),u(this,$e),u(this,Ve),u(this,Ye),u(this,xe,void 0),u(this,Se,void 0),u(this,Ee,void 0),u(this,Fe,null),u(this,Me,null),u(this,Re,Math.floor(Date.now()/1e3)+2082844800),u(this,Ce,!1),c(this,Ie,Ae).call(this,e),this.target=e.target,d(this,xe,((e,t)=>{for(var r in t||={})o.call(t,r)&&s(e,r,t[r]);if(n)for(var r of n(t))a.call(t,r)&&s(e,r,t[r]);return e})({firstTimestampBehavior:"strict"},e)),e.target instanceof oe)d(this,Se,new ue(e.target));else if(e.target instanceof ae)d(this,Se,(null==(t=e.target.options)?void 0:t.chunked)?new Oe(e.target):new de(e.target));else{if(!(e.target instanceof ie))throw new Error(`Invalid target: ${e.target}`);d(this,Se,new Je(e.target))}c(this,Be,De).call(this),c(this,Le,Ne).call(this)}addVideoChunk(e,t,r){let n=new Uint8Array(e.byteLength);e.copyTo(n),this.addVideoChunkRaw(n,e.type,null!=r?r:e.timestamp,e.duration,t)}addVideoChunkRaw(e,t,r,n,o){if(c(this,Ye,Xe).call(this),!l(this,xe).video)throw new Error("No video track declared.");c(this,Ge,We).call(this,l(this,Fe),e,t,r,n,o)}addAudioChunk(e,t,r){let n=new Uint8Array(e.byteLength);e.copyTo(n),this.addAudioChunkRaw(n,e.type,null!=r?r:e.timestamp,e.duration,t)}addAudioChunkRaw(e,t,r,n,o){if(c(this,Ye,Xe).call(this),!l(this,xe).audio)throw new Error("No audio track declared.");c(this,Ge,We).call(this,l(this,Me),e,t,r,n,o)}finalize(){l(this,Fe)&&c(this,$e,He).call(this,l(this,Fe)),l(this,Me)&&c(this,$e,He).call(this,l(this,Me));let e=l(this,Se).offsets.get(l(this,Ee)),t=l(this,Se).pos-e;l(this,Ee).size=t,l(this,Se).patchBox(l(this,Ee));let r=(n=[l(this,Fe),l(this,Me)].filter(Boolean),o=l(this,Re),A("moov",null,[D(o,n),...n.map((e=>((e,t)=>A("trak",null,[L(e,t),N(e,t)]))(e,o)))]));var n,o;l(this,Se).writeBox(r),c(this,Ve,Ke).call(this),l(this,Se).finalize(),d(this,Ce,!0)}};return xe=new WeakMap,Se=new WeakMap,Ee=new WeakMap,Fe=new WeakMap,Me=new WeakMap,Re=new WeakMap,Ce=new WeakMap,Ie=new WeakSet,Ae=function(e){if(e.video&&!Ze.includes(e.video.codec))throw new Error(`Unsupported video codec: ${e.video.codec}`);if(e.audio&&!et.includes(e.audio.codec))throw new Error(`Unsupported audio codec: ${e.audio.codec}`);if(e.firstTimestampBehavior&&!tt.includes(e.firstTimestampBehavior))throw new Error(`Invalid first timestamp behavior: ${e.firstTimestampBehavior}`)},Be=new WeakSet,De=function(){var e;let t="hevc"===(null==(e=l(this,xe).video)?void 0:e.codec);l(this,Se).writeBox((e=>A("ftyp",e?[M("isom"),S(0),M("iso4"),M("hvc1")]:[M("isom"),S(0),M("isom"),M("avc1"),M("mp41")]))(t)),d(this,Ee,{type:"mdat",largeSize:!0}),l(this,Se).writeBox(l(this,Ee)),c(this,Ve,Ke).call(this)},Le=new WeakSet,Ne=function(){if(l(this,xe).video&&d(this,Fe,{id:1,info:{type:"video",codec:l(this,xe).video.codec,width:l(this,xe).video.width,height:l(this,xe).video.height},timescale:720,codecPrivate:new Uint8Array(0),samples:[],writtenChunks:[],currentChunk:null,firstTimestamp:void 0,lastTimestamp:-1,timeToSampleTable:[],lastTimescaleUnits:null,compactlyCodedChunkTable:[]}),l(this,xe).audio){let e=c(this,Pe,je).call(this,2,l(this,xe).audio.sampleRate,l(this,xe).audio.numberOfChannels);d(this,Me,{id:l(this,xe).video?2:1,info:{type:"audio",codec:l(this,xe).audio.codec,numberOfChannels:l(this,xe).audio.numberOfChannels,sampleRate:l(this,xe).audio.sampleRate},timescale:l(this,xe).audio.sampleRate,codecPrivate:e,samples:[],writtenChunks:[],currentChunk:null,firstTimestamp:void 0,lastTimestamp:-1,timeToSampleTable:[],lastTimescaleUnits:null,compactlyCodedChunkTable:[]})}},Pe=new WeakSet,je=function(e,t,r){let n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350].indexOf(t),o=r,a="";a+=e.toString(2).padStart(5,"0"),a+=n.toString(2).padStart(4,"0"),15===n&&(a+=t.toString(2).padStart(24,"0")),a+=o.toString(2).padStart(4,"0");let i=8*Math.ceil(a.length/8);a=a.padEnd(i,"0");let s=new Uint8Array(a.length/8);for(let e=0;e<a.length;e+=8)s[e/8]=parseInt(a.slice(e,e+8),2);return s},Ge=new WeakSet,We=function(e,t,r,n,o,a){var i;let s=n/1e6,p=o/1e6;if(void 0===e.firstTimestamp&&(e.firstTimestamp=s),s=c(this,ze,Ue).call(this,s,e),e.lastTimestamp=s,(!e.currentChunk||s-e.currentChunk.startTimestamp>=.5)&&(e.currentChunk&&c(this,$e,He).call(this,e),e.currentChunk={startTimestamp:s,sampleData:[],sampleCount:0}),e.currentChunk.sampleData.push(t),e.currentChunk.sampleCount++,(null==(i=null==a?void 0:a.decoderConfig)?void 0:i.description)&&(e.codecPrivate=new Uint8Array(a.decoderConfig.description)),e.samples.push({timestamp:s,duration:p,size:t.byteLength,type:r}),null!==e.lastTimescaleUnits){let t=C(s,e.timescale,!1),r=Math.round(t-e.lastTimescaleUnits);e.lastTimescaleUnits+=r;let n=R(e.timeToSampleTable);1===n.sampleCount?(n.sampleDelta=r,n.sampleCount++):n.sampleDelta===r?n.sampleCount++:(n.sampleCount--,e.timeToSampleTable.push({sampleCount:2,sampleDelta:r}))}else e.lastTimescaleUnits=0,e.timeToSampleTable.push({sampleCount:1,sampleDelta:C(p,e.timescale)})},ze=new WeakSet,Ue=function(e,t){if("strict"===l(this,xe).firstTimestampBehavior&&-1===t.lastTimestamp&&0!==e)throw new Error(`The first chunk for your media track must have a timestamp of 0 (received ${e}). Non-zero first timestamps are often caused by directly piping frames or audio data from a MediaStreamTrack into the encoder. Their timestamps are typically relative to the age of the document, which is probably what you want.\n\nIf you want to offset all timestamps of a track such that the first one is zero, set firstTimestampBehavior: 'offset' in the options.\n`);if("offset"===l(this,xe).firstTimestampBehavior&&(e-=t.firstTimestamp),e<t.lastTimestamp)throw new Error(`Timestamps must be monotonically increasing (went from ${1e6*t.lastTimestamp} to ${1e6*e}).`);return e},$e=new WeakSet,He=function(e){if(e.currentChunk){e.currentChunk.offset=l(this,Se).pos;for(let t of e.currentChunk.sampleData)l(this,Se).write(t);e.currentChunk.sampleData=null,0!==e.compactlyCodedChunkTable.length&&R(e.compactlyCodedChunkTable).samplesPerChunk===e.currentChunk.sampleCount||e.compactlyCodedChunkTable.push({firstChunk:e.writtenChunks.length+1,samplesPerChunk:e.currentChunk.sampleCount}),e.writtenChunks.push(e.currentChunk),c(this,Ve,Ke).call(this)}},Ve=new WeakSet,Ke=function(){l(this,Se)instanceof de&&l(this,Se).flush()},Ye=new WeakSet,Xe=function(){if(l(this,Ce))throw new Error("Cannot add new video or audio chunks after the file has been finalized.")},qe=g,((n,a,i,s)=>{if(a&&"object"==typeof a||"function"==typeof a)for(let i of r(a))o.call(n,i)||undefined===i||e(n,i,{get:()=>a[i],enumerable:!(s=t(a,i))||s.enumerable});return n})(e({},"__esModule",{value:!0}),qe)})();"object"==typeof e.exports&&(e.exports.Muxer=t.Muxer,e.exports.ArrayBufferTarget=t.ArrayBufferTarget,e.exports.StreamTarget=t.StreamTarget,e.exports.FileSystemWritableFileStreamTarget=t.FileSystemWritableFileStreamTarget)},795:function(e,t,r){var n;e=r.nmd(e),function(){var o={function:!0,object:!0},a=o[typeof window]&&window||this,i=o[typeof t]&&t,s=o.object&&e&&!e.nodeType&&e,p=i&&s&&"object"==typeof r.g&&r.g;!p||p.global!==p&&p.window!==p&&p.self!==p||(a=p);var l=Math.pow(2,53)-1,u=/\bOpera/,d=Object.prototype,c=d.hasOwnProperty,g=d.toString;function h(e){return(e=String(e)).charAt(0).toUpperCase()+e.slice(1)}function f(e){return e=v(e),/^(?:webOS|i(?:OS|P))/.test(e)?e:h(e)}function m(e,t){for(var r in e)c.call(e,r)&&t(e[r],r,e)}function y(e){return null==e?h(e):g.call(e).slice(8,-1)}function b(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function _(e,t){var r=null;return function(e,t){var r=-1,n=e?e.length:0;if("number"==typeof n&&n>-1&&n<=l)for(;++r<n;)t(e[r],r);else m(e,t)}(e,(function(n,o){r=t(r,n,o,e)})),r}function v(e){return String(e).replace(/^ +| +$/g,"")}var w=function e(t){var r=a,n=t&&"object"==typeof t&&"String"!=y(t);n&&(r=t,t=null);var o=r.navigator||{},i=o.userAgent||"";t||(t=i);var s,p,l,d,c,h=n?!!o.likeChrome:/\bChrome\b/.test(t)&&!/internal|\n/i.test(g.toString()),w="Object",k=n?w:"ScriptBridgingProxyObject",T=n?w:"Environment",O=n&&r.java?"JavaPackage":y(r.java),x=n?w:"RuntimeObject",S=/\bJava/.test(O)&&r.java,E=S&&y(r.environment)==T,F=S?"a":"α",M=S?"b":"β",R=r.document||{},C=r.operamini||r.opera,I=u.test(I=n&&C?C["[[Class]]"]:y(C))?I:C=null,A=t,B=[],D=null,L=t==i,N=L&&C&&"function"==typeof C.version&&C.version(),P=_([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],(function(e,r){return e||RegExp("\\b"+(r.pattern||b(r))+"\\b","i").exec(t)&&(r.label||r)})),j=_(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{label:"Yandex Browser",pattern:"YaBrowser"},{label:"UC Browser",pattern:"UCBrowser"},"Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chromium","Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"],(function(e,r){return e||RegExp("\\b"+(r.pattern||b(r))+"\\b","i").exec(t)&&(r.label||r)})),G=U([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),W=_({Apple:{iPad:1,iPhone:1,iPod:1},Alcatel:{},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},Huawei:{},Lenovo:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Oppo:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1},Xiaomi:{Mi:1,Redmi:1}},(function(e,r,n){return e||(r[G]||r[/^[a-z]+(?: +[a-z]+\b)*/i.exec(G)]||RegExp("\\b"+b(n)+"(?:\\b|\\w*\\d)","i").exec(t))&&n})),z=_(["Windows Phone","KaiOS","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian",{label:"DragonFly BSD",pattern:"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "],(function(e,r){var n=r.pattern||b(r);return!e&&(e=RegExp("\\b"+n+"(?:/[\\d.]+|[ \\w.]*)","i").exec(t))&&(e=function(e,t,r){var n={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return t&&r&&/^Win/i.test(e)&&!/^Windows Phone /i.test(e)&&(n=n[/[\d.]+$/.exec(e)])&&(e="Windows "+n),e=String(e),t&&r&&(e=e.replace(RegExp(t,"i"),r)),f(e.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(e,n,r.label||r)),e}));function U(e){return _(e,(function(e,r){var n=r.pattern||b(r);return!e&&(e=RegExp("\\b"+n+" *\\d+[.\\w_]*","i").exec(t)||RegExp("\\b"+n+" *\\w+-[\\w]*","i").exec(t)||RegExp("\\b"+n+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(t))&&((e=String(r.label&&!RegExp(n,"i").test(r.label)?r.label:e).split("/"))[1]&&!/[\d.]+/.test(e[0])&&(e[0]+=" "+e[1]),r=r.label||r,e=f(e[0].replace(RegExp(n,"i"),r).replace(RegExp("; *(?:"+r+"[_-])?","i")," ").replace(RegExp("("+r+")[-_.]?(\\w)","i"),"$1 $2"))),e}))}function $(e){return _(e,(function(e,r){return e||(RegExp(r+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(t)||0)[1]||null}))}if(P&&(P=[P]),/\bAndroid\b/.test(z)&&!G&&(s=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(t))&&(G=v(s[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),W&&!G?G=U([W]):W&&G&&(G=G.replace(RegExp("^("+b(W)+")[-_.\\s]","i"),W+" ").replace(RegExp("^("+b(W)+")[-_.]?(\\w)","i"),W+" $2")),(s=/\bGoogle TV\b/.exec(G))&&(G=s[0]),/\bSimulator\b/i.test(t)&&(G=(G?G+" ":"")+"Simulator"),"Opera Mini"==j&&/\bOPiOS\b/.test(t)&&B.push("running in Turbo/Uncompressed mode"),"IE"==j&&/\blike iPhone OS\b/.test(t)?(W=(s=e(t.replace(/like iPhone OS/,""))).manufacturer,G=s.product):/^iP/.test(G)?(j||(j="Safari"),z="iOS"+((s=/ OS ([\d_]+)/i.exec(t))?" "+s[1].replace(/_/g,"."):"")):"Konqueror"==j&&/^Linux\b/i.test(z)?z="Kubuntu":W&&"Google"!=W&&(/Chrome/.test(j)&&!/\bMobile Safari\b/i.test(t)||/\bVita\b/.test(G))||/\bAndroid\b/.test(z)&&/^Chrome/.test(j)&&/\bVersion\//i.test(t)?(j="Android Browser",z=/\bAndroid\b/.test(z)?z:"Android"):"Silk"==j?(/\bMobi/i.test(t)||(z="Android",B.unshift("desktop mode")),/Accelerated *= *true/i.test(t)&&B.unshift("accelerated")):"UC Browser"==j&&/\bUCWEB\b/.test(t)?B.push("speed mode"):"PaleMoon"==j&&(s=/\bFirefox\/([\d.]+)\b/.exec(t))?B.push("identifying as Firefox "+s[1]):"Firefox"==j&&(s=/\b(Mobile|Tablet|TV)\b/i.exec(t))?(z||(z="Firefox OS"),G||(G=s[1])):!j||(s=!/\bMinefield\b/i.test(t)&&/\b(?:Firefox|Safari)\b/.exec(j))?(j&&!G&&/[\/,]|^[^(]+?\)/.test(t.slice(t.indexOf(s+"/")+8))&&(j=null),(s=G||W||z)&&(G||W||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(z))&&(j=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(z)?z:s)+" Browser")):"Electron"==j&&(s=(/\bChrome\/([\d.]+)\b/.exec(t)||0)[1])&&B.push("Chromium "+s),N||(N=$(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",b(j),"(?:Firefox|Minefield|NetFront)"])),(s=("iCab"==P&&parseFloat(N)>3?"WebKit":/\bOpera\b/.test(j)&&(/\bOPR\b/.test(t)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(t)&&!/^(?:Trident|EdgeHTML)$/.test(P)&&"WebKit"||!P&&/\bMSIE\b/i.test(t)&&("Mac OS"==z?"Tasman":"Trident")||"WebKit"==P&&/\bPlayStation\b(?! Vita\b)/i.test(j)&&"NetFront")&&(P=[s]),"IE"==j&&(s=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(t)||0)[1])?(j+=" Mobile",z="Windows Phone "+(/\+$/.test(s)?s:s+".x"),B.unshift("desktop mode")):/\bWPDesktop\b/i.test(t)?(j="IE Mobile",z="Windows Phone 8.x",B.unshift("desktop mode"),N||(N=(/\brv:([\d.]+)/.exec(t)||0)[1])):"IE"!=j&&"Trident"==P&&(s=/\brv:([\d.]+)/.exec(t))&&(j&&B.push("identifying as "+j+(N?" "+N:"")),j="IE",N=s[1]),L){if(d="global",c=null!=(l=r)?typeof l[d]:"number",/^(?:boolean|number|string|undefined)$/.test(c)||"object"==c&&!l[d])y(s=r.runtime)==k?(j="Adobe AIR",z=s.flash.system.Capabilities.os):y(s=r.phantom)==x?(j="PhantomJS",N=(s=s.version||null)&&s.major+"."+s.minor+"."+s.patch):"number"==typeof R.documentMode&&(s=/\bTrident\/(\d+)/i.exec(t))?(N=[N,R.documentMode],(s=+s[1]+4)!=N[1]&&(B.push("IE "+N[1]+" mode"),P&&(P[1]=""),N[1]=s),N="IE"==j?String(N[1].toFixed(1)):N[0]):"number"==typeof R.documentMode&&/^(?:Chrome|Firefox)\b/.test(j)&&(B.push("masking as "+j+" "+N),j="IE",N="11.0",P=["Trident"],z="Windows");else if(S&&(A=(s=S.lang.System).getProperty("os.arch"),z=z||s.getProperty("os.name")+" "+s.getProperty("os.version")),E){try{N=r.require("ringo/engine").version.join("."),j="RingoJS"}catch(e){(s=r.system)&&s.global.system==r.system&&(j="Narwhal",z||(z=s[0].os||null))}j||(j="Rhino")}else"object"==typeof r.process&&!r.process.browser&&(s=r.process)&&("object"==typeof s.versions&&("string"==typeof s.versions.electron?(B.push("Node "+s.versions.node),j="Electron",N=s.versions.electron):"string"==typeof s.versions.nw&&(B.push("Chromium "+N,"Node "+s.versions.node),j="NW.js",N=s.versions.nw)),j||(j="Node.js",A=s.arch,z=s.platform,N=(N=/[\d.]+/.exec(s.version))?N[0]:null));z=z&&f(z)}if(N&&(s=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(N)||/(?:alpha|beta)(?: ?\d)?/i.exec(t+";"+(L&&o.appMinorVersion))||/\bMinefield\b/i.test(t)&&"a")&&(D=/b/i.test(s)?"beta":"alpha",N=N.replace(RegExp(s+"\\+?$"),"")+("beta"==D?M:F)+(/\d+\+?/.exec(s)||"")),"Fennec"==j||"Firefox"==j&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(z))j="Firefox Mobile";else if("Maxthon"==j&&N)N=N.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(G))"Xbox 360"==G&&(z=null),"Xbox 360"==G&&/\bIEMobile\b/.test(t)&&B.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(j)&&(!j||G||/Browser|Mobi/.test(j))||"Windows CE"!=z&&!/Mobi/i.test(t))if("IE"==j&&L)try{null===r.external&&B.unshift("platform preview")}catch(e){B.unshift("embedded")}else(/\bBlackBerry\b/.test(G)||/\bBB10\b/.test(t))&&(s=(RegExp(G.replace(/ +/g," *")+"/([.\\d]+)","i").exec(t)||0)[1]||N)?(z=((s=[s,/BB10/.test(t)])[1]?(G=null,W="BlackBerry"):"Device Software")+" "+s[0],N=null):this!=m&&"Wii"!=G&&(L&&C||/Opera/.test(j)&&/\b(?:MSIE|Firefox)\b/i.test(t)||"Firefox"==j&&/\bOS X (?:\d+\.){2,}/.test(z)||"IE"==j&&(z&&!/^Win/.test(z)&&N>5.5||/\bWindows XP\b/.test(z)&&N>8||8==N&&!/\bTrident\b/.test(t)))&&!u.test(s=e.call(m,t.replace(u,"")+";"))&&s.name&&(s="ing as "+s.name+((s=s.version)?" "+s:""),u.test(j)?(/\bIE\b/.test(s)&&"Mac OS"==z&&(z=null),s="identify"+s):(s="mask"+s,j=I?f(I.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(s)&&(z=null),L||(N=null)),P=["Presto"],B.push(s));else j+=" Mobile";(s=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(t)||0)[1])&&(s=[parseFloat(s.replace(/\.(\d)$/,".0$1")),s],"Safari"==j&&"+"==s[1].slice(-1)?(j="WebKit Nightly",D="alpha",N=s[1].slice(0,-1)):N!=s[1]&&N!=(s[2]=(/\bSafari\/([\d.]+\+?)/i.exec(t)||0)[1])||(N=null),s[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(t)||0)[1],537.36==s[0]&&537.36==s[2]&&parseFloat(s[1])>=28&&"WebKit"==P&&(P=["Blink"]),L&&(h||s[1])?(P&&(P[1]="like Chrome"),s=s[1]||((s=s[0])<530?1:s<532?2:s<532.05?3:s<533?4:s<534.03?5:s<534.07?6:s<534.1?7:s<534.13?8:s<534.16?9:s<534.24?10:s<534.3?11:s<535.01?12:s<535.02?"13+":s<535.07?15:s<535.11?16:s<535.19?17:s<536.05?18:s<536.1?19:s<537.01?20:s<537.11?"21+":s<537.13?23:s<537.18?24:s<537.24?25:s<537.36?26:"Blink"!=P?"27":"28")):(P&&(P[1]="like Safari"),s=(s=s[0])<400?1:s<500?2:s<526?3:s<533?4:s<534?"4+":s<535?5:s<537?6:s<538?7:s<601?8:s<602?9:s<604?10:s<606?11:s<608?12:"12"),P&&(P[1]+=" "+(s+="number"==typeof s?".x":/[.+]/.test(s)?"":"+")),"Safari"==j&&(!N||parseInt(N)>45)?N=s:"Chrome"==j&&/\bHeadlessChrome/i.test(t)&&B.unshift("headless")),"Opera"==j&&(s=/\bzbov|zvav$/.exec(z))?(j+=" ",B.unshift("desktop mode"),"zvav"==s?(j+="Mini",N=null):j+="Mobile",z=z.replace(RegExp(" *"+s+"$"),"")):"Safari"==j&&/\bChrome\b/.exec(P&&P[1])?(B.unshift("desktop mode"),j="Chrome Mobile",N=null,/\bOS X\b/.test(z)?(W="Apple",z="iOS 4.3+"):z=null):/\bSRWare Iron\b/.test(j)&&!N&&(N=$("Chrome")),N&&0==N.indexOf(s=/[\d.]+$/.exec(z))&&t.indexOf("/"+s+"-")>-1&&(z=v(z.replace(s,""))),z&&-1!=z.indexOf(j)&&!RegExp(j+" OS").test(z)&&(z=z.replace(RegExp(" *"+b(j)+" *"),"")),P&&!/\b(?:Avant|Nook)\b/.test(j)&&(/Browser|Lunascape|Maxthon/.test(j)||"Safari"!=j&&/^iOS/.test(z)&&/\bSafari\b/.test(P[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(j)&&P[1])&&(s=P[P.length-1])&&B.push(s),B.length&&(B=["("+B.join("; ")+")"]),W&&G&&G.indexOf(W)<0&&B.push("on "+W),G&&B.push((/^on /.test(B[B.length-1])?"":"on ")+G),z&&(s=/ ([\d.+]+)$/.exec(z),p=s&&"/"==z.charAt(z.length-s[0].length-1),z={architecture:32,family:s&&!p?z.replace(s[0],""):z,version:s?s[1]:null,toString:function(){var e=this.version;return this.family+(e&&!p?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(s=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(A))&&!/\bi686\b/i.test(A)?(z&&(z.architecture=64,z.family=z.family.replace(RegExp(" *"+s),"")),j&&(/\bWOW64\b/i.test(t)||L&&/\w(?:86|32)$/.test(o.cpuClass||o.platform)&&!/\bWin64; x64\b/i.test(t))&&B.unshift("32-bit")):z&&/^OS X/.test(z.family)&&"Chrome"==j&&parseFloat(N)>=39&&(z.architecture=64),t||(t=null);var H={};return H.description=t,H.layout=P&&P[0],H.manufacturer=W,H.name=j,H.prerelease=D,H.product=G,H.ua=t,H.version=j&&N,H.os=z||{architecture:null,family:null,version:null,toString:function(){return"null"}},H.parse=e,H.toString=function(){return this.description||""},H.version&&B.unshift(N),H.name&&B.unshift(j),z&&j&&(z!=String(z).split(" ")[0]||z!=j.split(" ")[0]&&!G)&&B.push(G?"("+z+")":"on "+z),B.length&&(H.description=B.join(" ")),H}();a.platform=w,void 0===(n=function(){return w}.call(t,r,t,e))||(e.exports=n)}.call(this)},683:()=>{},345:()=>{},203:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{cW:()=>ImageSegmenter_1,n:()=>FilesetResolver_1});var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},vision={},fileset_resolver={};let supportsSimd;Object.defineProperty(fileset_resolver,"__esModule",{value:!0}),fileset_resolver.FilesetResolver=void 0;const WASM_SIMD_CHECK=new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]);async function isSimdSupported(){if(void 0===supportsSimd)try{await WebAssembly.instantiate(WASM_SIMD_CHECK),supportsSimd=!0}catch(e){supportsSimd=!1}return supportsSimd}async function createFileset(e,t=""){const r=await isSimdSupported()?"wasm_internal":"wasm_nosimd_internal";return{wasmLoaderPath:`${t}/${e}_${r}.js`,wasmBinaryPath:`${t}/${e}_${r}.wasm`}}class FilesetResolver$1{static isSimdSupported(){return isSimdSupported()}static forAudioTasks(e){return createFileset("audio",e)}static forTextTasks(e){return createFileset("text",e)}static forVisionTasks(e){return createFileset("vision",e)}}fileset_resolver.FilesetResolver=FilesetResolver$1;var drawing_utils={};Object.defineProperty(drawing_utils,"__esModule",{value:!0}),drawing_utils.DrawingUtils=void 0;const DEFAULT_OPTIONS={color:"white",lineWidth:4,radius:6};function addDefaultOptions(e){return e=e||{},Object.assign(Object.assign(Object.assign({},DEFAULT_OPTIONS),{fillColor:e.color}),e)}function resolve(e,t){return e instanceof Function?e(t):e}class DrawingUtils$1{constructor(e){this.ctx=e}static clamp(e,t,r){const n=Math.min(t,r),o=Math.max(t,r);return Math.max(n,Math.min(o,e))}static lerp(e,t,r,n,o){const a=n*(1-(e-t)/(r-t))+o*(1-(r-e)/(r-t));return DrawingUtils$1.clamp(a,n,o)}drawLandmarks(e,t){if(!e)return;const r=this.ctx,n=addDefaultOptions(t);r.save();const o=r.canvas;let a=0;for(const t of e){r.fillStyle=resolve(n.fillColor,{index:a,from:t}),r.strokeStyle=resolve(n.color,{index:a,from:t}),r.lineWidth=resolve(n.lineWidth,{index:a,from:t});const e=new Path2D;e.arc(t.x*o.width,t.y*o.height,resolve(n.radius,{index:a,from:t}),0,2*Math.PI),r.fill(e),r.stroke(e),++a}r.restore()}drawConnectors(e,t,r){if(!e||!t)return;const n=this.ctx,o=addDefaultOptions(r);n.save();const a=n.canvas;let i=0;for(const r of t){n.beginPath();const t=e[r.start],s=e[r.end];t&&s&&(n.strokeStyle=resolve(o.color,{index:i,from:t,to:s}),n.lineWidth=resolve(o.lineWidth,{index:i,from:t,to:s}),n.moveTo(t.x*a.width,t.y*a.height),n.lineTo(s.x*a.width,s.y*a.height)),++i,n.stroke()}n.restore()}drawBoundingBox(e,t){const r=this.ctx,n=addDefaultOptions(t);r.save(),r.beginPath(),r.lineWidth=resolve(n.lineWidth,{}),r.strokeStyle=resolve(n.color,{}),r.fillStyle=resolve(n.fillColor,{}),r.moveTo(e.originX,e.originY),r.lineTo(e.originX+e.width,e.originY),r.lineTo(e.originX+e.width,e.originY+e.height),r.lineTo(e.originX,e.originY+e.height),r.lineTo(e.originX,e.originY),r.stroke(),r.fill(),r.restore()}}drawing_utils.DrawingUtils=DrawingUtils$1;var image={},image_shader_context={};Object.defineProperty(image_shader_context,"__esModule",{value:!0}),image_shader_context.MPImageShaderContext=image_shader_context.assertNotNull=void 0;const VERTEX_SHADER="\n  attribute vec2 aVertex;\n  attribute vec2 aTex;\n  varying vec2 vTex;\n  void main(void) {\n    gl_Position = vec4(aVertex, 0.0, 1.0);\n    vTex = aTex;\n  }",FRAGMENT_SHADER="\n  precision mediump float;\n  varying vec2 vTex;\n  uniform sampler2D inputTexture;\n   void main() {\n     gl_FragColor = texture2D(inputTexture, vTex);\n   }\n ";function assertNotNull(e,t){if(null===e)throw new Error(`Unable to obtain required WebGL resource: ${t}`);return e}image_shader_context.assertNotNull=assertNotNull;class MPImageShaderBuffers{constructor(e,t,r,n){this.gl=e,this.vertexArrayObject=t,this.vertexBuffer=r,this.textureBuffer=n}bind(){this.gl.bindVertexArray(this.vertexArrayObject)}unbind(){this.gl.bindVertexArray(null)}close(){this.gl.deleteVertexArray(this.vertexArrayObject),this.gl.deleteBuffer(this.vertexBuffer),this.gl.deleteBuffer(this.textureBuffer)}}class MPImageShaderContext{compileShader(e,t){const r=this.gl,n=assertNotNull(r.createShader(t),"Failed to create WebGL shader");if(r.shaderSource(n,e),r.compileShader(n),!r.getShaderParameter(n,r.COMPILE_STATUS)){const e=r.getShaderInfoLog(n);throw new Error(`Could not compile WebGL shader: ${e}`)}return r.attachShader(this.program,n),n}setupShaders(){const e=this.gl;if(this.program=assertNotNull(e.createProgram(),"Failed to create WebGL program"),this.vertexShader=this.compileShader(VERTEX_SHADER,e.VERTEX_SHADER),this.fragmentShader=this.compileShader(FRAGMENT_SHADER,e.FRAGMENT_SHADER),e.linkProgram(this.program),!e.getProgramParameter(this.program,e.LINK_STATUS)){const t=e.getProgramInfoLog(this.program);throw new Error(`Error during program linking: ${t}`)}this.aVertex=e.getAttribLocation(this.program,"aVertex"),this.aTex=e.getAttribLocation(this.program,"aTex")}createBuffers(e){const t=this.gl,r=assertNotNull(t.createVertexArray(),"Failed to create vertex array");t.bindVertexArray(r);const n=assertNotNull(t.createBuffer(),"Failed to create buffer");t.bindBuffer(t.ARRAY_BUFFER,n),t.enableVertexAttribArray(this.aVertex),t.vertexAttribPointer(this.aVertex,2,t.FLOAT,!1,0,0),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),t.STATIC_DRAW);const o=assertNotNull(t.createBuffer(),"Failed to create buffer");t.bindBuffer(t.ARRAY_BUFFER,o),t.enableVertexAttribArray(this.aTex),t.vertexAttribPointer(this.aTex,2,t.FLOAT,!1,0,0);const a=e?[0,1,0,0,1,0,1,1]:[0,0,0,1,1,1,1,0];return t.bufferData(t.ARRAY_BUFFER,new Float32Array(a),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),t.bindVertexArray(null),new MPImageShaderBuffers(t,r,n,o)}getShaderBuffers(e){return e?(this.shaderBuffersFlipVertically||(this.shaderBuffersFlipVertically=this.createBuffers(!0)),this.shaderBuffersFlipVertically):(this.shaderBuffersPassthrough||(this.shaderBuffersPassthrough=this.createBuffers(!1)),this.shaderBuffersPassthrough)}maybeInitGL(e){if(this.gl){if(e!==this.gl)throw new Error("Cannot change GL context once initialized")}else this.gl=e}run(e,t,r){this.maybeInitGL(e),this.program||this.setupShaders();const n=this.getShaderBuffers(t);e.useProgram(this.program),n.bind();const o=r();return n.unbind(),o}bindFramebuffer(e,t){this.maybeInitGL(e),this.framebuffer||(this.framebuffer=assertNotNull(e.createFramebuffer(),"Failed to create framebuffe.")),e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}unbindFramebuffer(){var e;null===(e=this.gl)||void 0===e||e.bindFramebuffer(this.gl.FRAMEBUFFER,null)}close(){if(this.program){const e=this.gl;e.deleteProgram(this.program),e.deleteShader(this.vertexShader),e.deleteShader(this.fragmentShader)}this.framebuffer&&this.gl.deleteFramebuffer(this.framebuffer),this.shaderBuffersPassthrough&&this.shaderBuffersPassthrough.close(),this.shaderBuffersFlipVertically&&this.shaderBuffersFlipVertically.close()}}image_shader_context.MPImageShaderContext=MPImageShaderContext,Object.defineProperty(image,"__esModule",{value:!0}),image.MPImage=void 0;const image_shader_context_1$2=image_shader_context,INSTANCE_COUNT_WARNING_THRESHOLD$1=250;var MPImageType,e;e=MPImageType||(MPImageType={}),e[e.IMAGE_DATA=0]="IMAGE_DATA",e[e.IMAGE_BITMAP=1]="IMAGE_BITMAP",e[e.WEBGL_TEXTURE=2]="WEBGL_TEXTURE";class MPImage$1{constructor(e,t,r,n,o,a,i){this.containers=e,this.ownsImageBitmap=t,this.ownsWebGLTexture=r,this.canvas=n,this.shaderContext=o,this.width=a,this.height=i,(this.ownsImageBitmap||this.ownsWebGLTexture)&&(--MPImage$1.instancesBeforeWarning,0===MPImage$1.instancesBeforeWarning&&console.error("You seem to be creating MPImage instances without invoking .close(). This leaks resources."))}hasImageData(){return!!this.getContainer(MPImageType.IMAGE_DATA)}hasImageBitmap(){return!!this.getContainer(MPImageType.IMAGE_BITMAP)}hasWebGLTexture(){return!!this.getContainer(MPImageType.WEBGL_TEXTURE)}getAsImageData(){return this.convertToImageData()}getAsImageBitmap(){return this.convertToImageBitmap()}getAsWebGLTexture(){return this.convertToWebGLTexture()}getContainer(e){switch(e){case MPImageType.IMAGE_DATA:return this.containers.find((e=>e instanceof ImageData));case MPImageType.IMAGE_BITMAP:return this.containers.find((e=>"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap));case MPImageType.WEBGL_TEXTURE:return this.containers.find((e=>"undefined"!=typeof WebGLTexture&&e instanceof WebGLTexture));default:throw new Error(`Type is not supported: ${e}`)}}clone(){const e=[];for(const t of this.containers){let r;if(t instanceof ImageData)r=new ImageData(t.data,this.width,this.height);else if(t instanceof WebGLTexture){const e=this.getGL(),t=this.getShaderContext();e.activeTexture(e.TEXTURE1),r=(0,image_shader_context_1$2.assertNotNull)(e.createTexture(),"Failed to create texture"),e.bindTexture(e.TEXTURE_2D,r),this.configureTextureParams(),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.width,this.height,0,e.RGBA,e.UNSIGNED_BYTE,null),e.bindTexture(e.TEXTURE_2D,null),t.bindFramebuffer(e,r),t.run(e,!1,(()=>{this.bindTexture(),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.drawArrays(e.TRIANGLE_FAN,0,4),this.unbindTexture()})),t.unbindFramebuffer(),this.unbindTexture()}else{if(!(t instanceof ImageBitmap))throw new Error(`Type is not supported: ${t}`);this.convertToWebGLTexture(),this.bindTexture(),r=this.copyTextureToBitmap(),this.unbindTexture()}e.push(r)}return new MPImage$1(e,this.hasImageBitmap(),this.hasWebGLTexture(),this.canvas,this.shaderContext,this.width,this.height)}getOffscreenCanvas(){if(!(this.canvas instanceof OffscreenCanvas))throw new Error("Conversion to ImageBitmap requires that the MediaPipe Tasks is initialized with an OffscreenCanvas");return this.canvas}getGL(){if(!this.canvas)throw new Error("Conversion to different image formats require that a canvas is passed when iniitializing the image.");return this.gl||(this.gl=(0,image_shader_context_1$2.assertNotNull)(this.canvas.getContext("webgl2"),"You cannot use a canvas that is already bound to a different type of rendering context.")),this.gl}getShaderContext(){return this.shaderContext||(this.shaderContext=new image_shader_context_1$2.MPImageShaderContext),this.shaderContext}convertToImageBitmap(){let e=this.getContainer(MPImageType.IMAGE_BITMAP);return e||(this.convertToWebGLTexture(),e=this.convertWebGLTextureToImageBitmap(),this.containers.push(e),this.ownsImageBitmap=!0),e}convertToImageData(){let e=this.getContainer(MPImageType.IMAGE_DATA);if(!e){const t=this.getGL(),r=this.getShaderContext(),n=new Uint8Array(this.width*this.height*4),o=this.convertToWebGLTexture();r.bindFramebuffer(t,o),t.readPixels(0,0,this.width,this.height,t.RGBA,t.UNSIGNED_BYTE,n),r.unbindFramebuffer(),e=new ImageData(new Uint8ClampedArray(n.buffer),this.width,this.height),this.containers.push(e)}return e}convertToWebGLTexture(){let e=this.getContainer(MPImageType.WEBGL_TEXTURE);if(!e){const t=this.getGL();e=this.bindTexture();const r=this.getContainer(MPImageType.IMAGE_BITMAP)||this.convertToImageData();t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r),this.unbindTexture()}return e}configureTextureParams(){const e=this.getGL();e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR)}bindTexture(){const e=this.getGL();e.viewport(0,0,this.width,this.height),e.activeTexture(e.TEXTURE0);let t=this.getContainer(MPImageType.WEBGL_TEXTURE);return t?e.bindTexture(e.TEXTURE_2D,t):(t=(0,image_shader_context_1$2.assertNotNull)(e.createTexture(),"Failed to create texture"),this.containers.push(t),this.ownsWebGLTexture=!0,e.bindTexture(e.TEXTURE_2D,t),this.configureTextureParams()),t}unbindTexture(){this.gl.bindTexture(this.gl.TEXTURE_2D,null)}copyTextureToBitmap(){const e=this.getGL();return this.getShaderContext().run(e,!0,(()=>this.runWithResizedCanvas((()=>(e.bindFramebuffer(e.FRAMEBUFFER,null),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.drawArrays(e.TRIANGLE_FAN,0,4),this.getOffscreenCanvas().transferToImageBitmap())))))}convertWebGLTextureToImageBitmap(){this.bindTexture();const e=this.copyTextureToBitmap();return this.unbindTexture(),e}runWithResizedCanvas(e){const t=this.canvas;if(t.width===this.width&&t.height===this.height)return e();const r=t.width,n=t.height;t.width=this.width,t.height=this.height;const o=e();return t.width=r,t.height=n,o}close(){this.ownsImageBitmap&&this.getContainer(MPImageType.IMAGE_BITMAP).close(),this.ownsWebGLTexture&&this.getGL().deleteTexture(this.getContainer(MPImageType.WEBGL_TEXTURE)),MPImage$1.instancesBeforeWarning=-1}}image.MPImage=MPImage$1,MPImage$1.instancesBeforeWarning=INSTANCE_COUNT_WARNING_THRESHOLD$1;var mask={},platform_utils={};function isWebKit(e=navigator){const t=e.userAgent;return t.includes("Safari")&&!t.includes("Chrome")}function isIOS(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}Object.defineProperty(platform_utils,"__esModule",{value:!0}),platform_utils.isIOS=platform_utils.isWebKit=void 0,platform_utils.isWebKit=isWebKit,platform_utils.isIOS=isIOS,Object.defineProperty(mask,"__esModule",{value:!0}),mask.MPMask=void 0;const image_shader_context_1$1=image_shader_context,platform_utils_1$1=platform_utils,INSTANCE_COUNT_WARNING_THRESHOLD=250;var MPMaskType;!function(e){e[e.UINT8_ARRAY=0]="UINT8_ARRAY",e[e.FLOAT32_ARRAY=1]="FLOAT32_ARRAY",e[e.WEBGL_TEXTURE=2]="WEBGL_TEXTURE"}(MPMaskType||(MPMaskType={}));class MPMask$1{constructor(e,t,r,n,o,a){this.containers=e,this.ownsWebGLTexture=t,this.canvas=r,this.shaderContext=n,this.width=o,this.height=a,this.ownsWebGLTexture&&(--MPMask$1.instancesBeforeWarning,0===MPMask$1.instancesBeforeWarning&&console.error("You seem to be creating MPMask instances without invoking .close(). This leaks resources."))}hasUint8Array(){return!!this.getContainer(MPMaskType.UINT8_ARRAY)}hasFloat32Array(){return!!this.getContainer(MPMaskType.FLOAT32_ARRAY)}hasWebGLTexture(){return!!this.getContainer(MPMaskType.WEBGL_TEXTURE)}getAsUint8Array(){return this.convertToUint8Array()}getAsFloat32Array(){return this.convertToFloat32Array()}getAsWebGLTexture(){return this.convertToWebGLTexture()}getTexImage2DFormat(){const e=this.getGL();if(!MPMask$1.texImage2DFormat)if(e.getExtension("EXT_color_buffer_float")&&e.getExtension("OES_texture_float_linear")&&e.getExtension("EXT_float_blend"))MPMask$1.texImage2DFormat=e.R32F;else{if(!e.getExtension("EXT_color_buffer_half_float"))throw new Error("GPU does not fully support 4-channel float32 or float16 formats");MPMask$1.texImage2DFormat=e.R16F}return MPMask$1.texImage2DFormat}getContainer(e){switch(e){case MPMaskType.UINT8_ARRAY:return this.containers.find((e=>e instanceof Uint8Array));case MPMaskType.FLOAT32_ARRAY:return this.containers.find((e=>e instanceof Float32Array));case MPMaskType.WEBGL_TEXTURE:return this.containers.find((e=>"undefined"!=typeof WebGLTexture&&e instanceof WebGLTexture));default:throw new Error(`Type is not supported: ${e}`)}}clone(){const e=[];for(const t of this.containers){let r;if(t instanceof Uint8Array)r=new Uint8Array(t);else if(t instanceof Float32Array)r=new Float32Array(t);else{if(!(t instanceof WebGLTexture))throw new Error(`Type is not supported: ${t}`);{const e=this.getGL(),t=this.getShaderContext();e.activeTexture(e.TEXTURE1),r=(0,image_shader_context_1$1.assertNotNull)(e.createTexture(),"Failed to create texture"),e.bindTexture(e.TEXTURE_2D,r),this.configureTextureParams();const n=this.getTexImage2DFormat();e.texImage2D(e.TEXTURE_2D,0,n,this.width,this.height,0,e.RED,e.FLOAT,null),e.bindTexture(e.TEXTURE_2D,null),t.bindFramebuffer(e,r),t.run(e,!1,(()=>{this.bindTexture(),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.drawArrays(e.TRIANGLE_FAN,0,4),this.unbindTexture()})),t.unbindFramebuffer(),this.unbindTexture()}}e.push(r)}return new MPMask$1(e,this.hasWebGLTexture(),this.canvas,this.shaderContext,this.width,this.height)}getGL(){if(!this.canvas)throw new Error("Conversion to different image formats require that a canvas is passed when initializing the image.");return this.gl||(this.gl=(0,image_shader_context_1$1.assertNotNull)(this.canvas.getContext("webgl2"),"You cannot use a canvas that is already bound to a different type of rendering context.")),this.gl}getShaderContext(){return this.shaderContext||(this.shaderContext=new image_shader_context_1$1.MPImageShaderContext),this.shaderContext}convertToFloat32Array(){let e=this.getContainer(MPMaskType.FLOAT32_ARRAY);if(!e){const t=this.getContainer(MPMaskType.UINT8_ARRAY);if(t)e=new Float32Array(t).map((e=>e/255));else{e=new Float32Array(this.width*this.height);const t=this.getGL(),r=this.getShaderContext(),n=this.convertToWebGLTexture();if(r.bindFramebuffer(t,n),(0,platform_utils_1$1.isIOS)()){const r=new Float32Array(this.width*this.height*4);t.readPixels(0,0,this.width,this.height,t.RGBA,t.FLOAT,r);for(let t=0,n=0;t<e.length;++t,n+=4)e[t]=r[n]}else t.readPixels(0,0,this.width,this.height,t.RED,t.FLOAT,e)}this.containers.push(e)}return e}convertToUint8Array(){let e=this.getContainer(MPMaskType.UINT8_ARRAY);if(!e){const t=this.convertToFloat32Array();e=new Uint8Array(t.map((e=>255*e))),this.containers.push(e)}return e}convertToWebGLTexture(){let e=this.getContainer(MPMaskType.WEBGL_TEXTURE);if(!e){const t=this.getGL();e=this.bindTexture();const r=this.convertToFloat32Array(),n=this.getTexImage2DFormat();t.texImage2D(t.TEXTURE_2D,0,n,this.width,this.height,0,t.RED,t.FLOAT,r),this.unbindTexture()}return e}configureTextureParams(){const e=this.getGL();e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST)}bindTexture(){const e=this.getGL();e.viewport(0,0,this.width,this.height),e.activeTexture(e.TEXTURE0);let t=this.getContainer(MPMaskType.WEBGL_TEXTURE);return t?e.bindTexture(e.TEXTURE_2D,t):(t=(0,image_shader_context_1$1.assertNotNull)(e.createTexture(),"Failed to create texture"),this.containers.push(t),this.ownsWebGLTexture=!0,e.bindTexture(e.TEXTURE_2D,t),this.configureTextureParams()),t}unbindTexture(){this.gl.bindTexture(this.gl.TEXTURE_2D,null)}close(){this.ownsWebGLTexture&&this.getGL().deleteTexture(this.getContainer(MPMaskType.WEBGL_TEXTURE)),MPMask$1.instancesBeforeWarning=-1}}mask.MPMask=MPMask$1,MPMask$1.instancesBeforeWarning=INSTANCE_COUNT_WARNING_THRESHOLD;var face_detector={},calculator_pb={},googleProtobuf={};(function(exports){var $jscomp=$jscomp||{};$jscomp.scope={},$jscomp.findInternal=function(e,t,r){e instanceof String&&(e=String(e));for(var n=e.length,o=0;o<n;o++){var a=e[o];if(t.call(r,a,o,e))return{i:o,v:a}}return{i:-1,v:void 0}},$jscomp.ASSUME_ES5=!1,$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.SIMPLE_FROUND_POLYFILL=!1,$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,r){e!=Array.prototype&&e!=Object.prototype&&(e[t]=r.value)},$jscomp.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:void 0!==commonjsGlobal&&null!=commonjsGlobal?commonjsGlobal:e},$jscomp.global=$jscomp.getGlobal(commonjsGlobal),$jscomp.polyfill=function(e,t,r,n){if(t){for(r=$jscomp.global,e=e.split("."),n=0;n<e.length-1;n++){var o=e[n];o in r||(r[o]={}),r=r[o]}(t=t(n=r[e=e[e.length-1]]))!=n&&null!=t&&$jscomp.defineProperty(r,e,{configurable:!0,writable:!0,value:t})}},$jscomp.polyfill("Array.prototype.findIndex",(function(e){return e||function(e,t){return $jscomp.findInternal(this,e,t).i}}),"es6","es3"),$jscomp.checkStringArgs=function(e,t,r){if(null==e)throw new TypeError("The 'this' value for String.prototype."+r+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+r+" must not be a regular expression");return e+""},$jscomp.polyfill("String.prototype.endsWith",(function(e){return e||function(e,t){var r=$jscomp.checkStringArgs(this,e,"endsWith");e+="",void 0===t&&(t=r.length),t=Math.max(0,Math.min(0|t,r.length));for(var n=e.length;0<n&&0<t;)if(r[--t]!=e[--n])return!1;return 0>=n}}),"es6","es3"),$jscomp.polyfill("Array.prototype.find",(function(e){return e||function(e,t){return $jscomp.findInternal(this,e,t).v}}),"es6","es3"),$jscomp.polyfill("String.prototype.startsWith",(function(e){return e||function(e,t){var r=$jscomp.checkStringArgs(this,e,"startsWith");e+="";var n=r.length,o=e.length;t=Math.max(0,Math.min(0|t,r.length));for(var a=0;a<o&&t<n;)if(r[t++]!=e[a++])return!1;return a>=o}}),"es6","es3"),$jscomp.polyfill("String.prototype.repeat",(function(e){return e||function(e){var t=$jscomp.checkStringArgs(this,null,"repeat");if(0>e||1342177279<e)throw new RangeError("Invalid count value");e|=0;for(var r="";e;)1&e&&(r+=t),(e>>>=1)&&(t+=t);return r}}),"es6","es3");var COMPILED=!0,goog=goog||{};goog.global=commonjsGlobal||self,goog.exportPath_=function(e,t,r){e=e.split("."),r=r||goog.global,e[0]in r||void 0===r.execScript||r.execScript("var "+e[0]);for(var n;e.length&&(n=e.shift());)e.length||void 0===t?r=r[n]&&r[n]!==Object.prototype[n]?r[n]:r[n]={}:r[n]=t},goog.define=function(e,t){return t},goog.FEATURESET_YEAR=2012,goog.DEBUG=!0,goog.LOCALE="en",goog.TRUSTED_SITE=!0,goog.STRICT_MODE_COMPATIBLE=!1,goog.DISALLOW_TEST_ONLY_CODE=!goog.DEBUG,goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1,goog.provide=function(e){if(goog.isInModuleLoader_())throw Error("goog.provide cannot be used within a module.");goog.constructNamespace_(e)},goog.constructNamespace_=function(e,t){goog.exportPath_(e,t)},goog.getScriptNonce=function(e){return e&&e!=goog.global?goog.getScriptNonce_(e.document):(null===goog.cspNonce_&&(goog.cspNonce_=goog.getScriptNonce_(goog.global.document)),goog.cspNonce_)},goog.NONCE_PATTERN_=/^[\w+/_-]+[=]{0,2}$/,goog.cspNonce_=null,goog.getScriptNonce_=function(e){return(e=e.querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&goog.NONCE_PATTERN_.test(e)?e:""},goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/,goog.module=function(e){if("string"!=typeof e||!e||-1==e.search(goog.VALID_MODULE_RE_))throw Error("Invalid module identifier");if(!goog.isInGoogModuleLoader_())throw Error("Module "+e+" has been loaded incorrectly. Note, modules cannot be loaded as normal scripts. They require some kind of pre-processing step. You're likely trying to load a module via a script tag or as a part of a concatenated bundle without rewriting the module. For more info see: https://github.com/google/closure-library/wiki/goog.module:-an-ES6-module-like-alternative-to-goog.provide.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");goog.moduleLoaderState_.moduleName=e},goog.module.get=function(e){return goog.module.getInternal_(e)},goog.module.getInternal_=function(e){return null},goog.ModuleType={ES6:"es6",GOOG:"goog"},goog.moduleLoaderState_=null,goog.isInModuleLoader_=function(){return goog.isInGoogModuleLoader_()||goog.isInEs6ModuleLoader_()},goog.isInGoogModuleLoader_=function(){return!!goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.GOOG},goog.isInEs6ModuleLoader_=function(){if(goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.ES6)return!0;var e=goog.global.$jscomp;return!!e&&"function"==typeof e.getCurrentModulePath&&!!e.getCurrentModulePath()},goog.module.declareLegacyNamespace=function(){goog.moduleLoaderState_.declareLegacyNamespace=!0},goog.declareModuleId=function(e){if(goog.moduleLoaderState_)goog.moduleLoaderState_.moduleName=e;else{var t=goog.global.$jscomp;if(!t||"function"!=typeof t.getCurrentModulePath)throw Error('Module with namespace "'+e+'" has been loaded incorrectly.');t=t.require(t.getCurrentModulePath()),goog.loadedModules_[e]={exports:t,type:goog.ModuleType.ES6,moduleId:e}}},goog.setTestOnly=function(e){if(goog.DISALLOW_TEST_ONLY_CODE)throw e=e||"",Error("Importing test-only code into non-debug environment"+(e?": "+e:"."))},goog.forwardDeclare=function(e){},goog.getObjectByName=function(e,t){e=e.split("."),t=t||goog.global;for(var r=0;r<e.length;r++)if(null==(t=t[e[r]]))return null;return t},goog.globalize=function(e,t){for(var r in t=t||goog.global,e)t[r]=e[r]},goog.addDependency=function(e,t,r,n){},goog.ENABLE_DEBUG_LOADER=!0,goog.logToConsole_=function(e){goog.global.console&&goog.global.console.error(e)},goog.require=function(e){},goog.requireType=function(e){return{}},goog.basePath="",goog.nullFunction=function(){},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(e){e.instance_=void 0,e.getInstance=function(){return e.instance_?e.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=e),e.instance_=new e)}},goog.instantiatedSingletons_=[],goog.LOAD_MODULE_USING_EVAL=!0,goog.SEAL_MODULE_EXPORTS=goog.DEBUG,goog.loadedModules_={},goog.DEPENDENCIES_ENABLED=!COMPILED,goog.TRANSPILE="detect",goog.ASSUME_ES_MODULES_TRANSPILED=!1,goog.TRANSPILE_TO_LANGUAGE="",goog.TRANSPILER="transpile.js",goog.hasBadLetScoping=null,goog.useSafari10Workaround=function(){if(null==goog.hasBadLetScoping){try{var a=!eval('"use strict";let x = 1; function f() { return typeof x; };f() == "number";')}catch(e){a=!1}goog.hasBadLetScoping=a}return goog.hasBadLetScoping},goog.workaroundSafari10EvalBug=function(e){return"(function(){"+e+"\n;})();\n"},goog.loadModule=function(e){var t=goog.moduleLoaderState_;try{if(goog.moduleLoaderState_={moduleName:"",declareLegacyNamespace:!1,type:goog.ModuleType.GOOG},goog.isFunction(e))var r=e.call(void 0,{});else{if("string"!=typeof e)throw Error("Invalid module definition");goog.useSafari10Workaround()&&(e=goog.workaroundSafari10EvalBug(e)),r=goog.loadModuleFromSource_.call(void 0,e)}var n=goog.moduleLoaderState_.moduleName;if("string"!=typeof n||!n)throw Error('Invalid module name "'+n+'"');goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(n,r):goog.SEAL_MODULE_EXPORTS&&Object.seal&&"object"==typeof r&&null!=r&&Object.seal(r),goog.loadedModules_[n]={exports:r,type:goog.ModuleType.GOOG,moduleId:goog.moduleLoaderState_.moduleName}}finally{goog.moduleLoaderState_=t}},goog.loadModuleFromSource_=function(a){return eval(a),{}},goog.normalizePath_=function(e){e=e.split("/");for(var t=0;t<e.length;)"."==e[t]?e.splice(t,1):t&&".."==e[t]&&e[t-1]&&".."!=e[t-1]?e.splice(--t,2):t++;return e.join("/")},goog.loadFileSync_=function(e){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(e);try{var t=new goog.global.XMLHttpRequest;return t.open("get",e,!1),t.send(),0==t.status||200==t.status?t.responseText:null}catch(e){return null}},goog.transpile_=function(e,t,r){var n=goog.global.$jscomp;n||(goog.global.$jscomp=n={});var o=n.transpile;if(!o){var a=goog.basePath+goog.TRANSPILER,i=goog.loadFileSync_(a);if(i){if(function(){(0,eval)(i+"\n//# sourceURL="+a)}.call(goog.global),goog.global.$gwtExport&&goog.global.$gwtExport.$jscomp&&!goog.global.$gwtExport.$jscomp.transpile)throw Error('The transpiler did not properly export the "transpile" method. $gwtExport: '+JSON.stringify(goog.global.$gwtExport));goog.global.$jscomp.transpile=goog.global.$gwtExport.$jscomp.transpile,o=(n=goog.global.$jscomp).transpile}}return o||(o=n.transpile=function(e,t){return goog.logToConsole_(t+" requires transpilation but no transpiler was found."),e}),o(e,t,r)},goog.typeOf=function(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var r=Object.prototype.toString.call(e);if("[object Window]"==r)return"object";if("[object Array]"==r||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==r||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t},goog.isArray=function(e){return"array"==goog.typeOf(e)},goog.isArrayLike=function(e){var t=goog.typeOf(e);return"array"==t||"object"==t&&"number"==typeof e.length},goog.isDateLike=function(e){return goog.isObject(e)&&"function"==typeof e.getFullYear},goog.isFunction=function(e){return"function"==goog.typeOf(e)},goog.isObject=function(e){var t=typeof e;return"object"==t&&null!=e||"function"==t},goog.getUid=function(e){return Object.prototype.hasOwnProperty.call(e,goog.UID_PROPERTY_)&&e[goog.UID_PROPERTY_]||(e[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.hasUid=function(e){return!!e[goog.UID_PROPERTY_]},goog.removeUid=function(e){null!==e&&"removeAttribute"in e&&e.removeAttribute(goog.UID_PROPERTY_);try{delete e[goog.UID_PROPERTY_]}catch(e){}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.getHashCode=goog.getUid,goog.removeHashCode=goog.removeUid,goog.cloneObject=function(e){var t=goog.typeOf(e);if("object"==t||"array"==t){if("function"==typeof e.clone)return e.clone();for(var r in t="array"==t?[]:{},e)t[r]=goog.cloneObject(e[r]);return t}return e},goog.bindNative_=function(e,t,r){return e.call.apply(e.bind,arguments)},goog.bindJs_=function(e,t,r){if(!e)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,n),e.apply(t,r)}}return function(){return e.apply(t,arguments)}},goog.bind=function(e,t,r){return Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(e,t){var r=Array.prototype.slice.call(arguments,1);return function(){var t=r.slice();return t.push.apply(t,arguments),e.apply(this,t)}},goog.mixin=function(e,t){for(var r in t)e[r]=t[r]},goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date},goog.globalEval=function(e){if(goog.global.execScript)goog.global.execScript(e,"JavaScript");else{if(!goog.global.eval)throw Error("goog.globalEval not available");if(null==goog.evalWorksForGlobals_){try{goog.global.eval("var _evalTest_ = 1;")}catch(e){}if(void 0!==goog.global._evalTest_){try{delete goog.global._evalTest_}catch(e){}goog.evalWorksForGlobals_=!0}else goog.evalWorksForGlobals_=!1}if(goog.evalWorksForGlobals_)goog.global.eval(e);else{var t=goog.global.document,r=t.createElement("script");r.type="text/javascript",r.defer=!1,r.appendChild(t.createTextNode(e)),t.head.appendChild(r),t.head.removeChild(r)}}},goog.evalWorksForGlobals_=null,goog.getCssName=function(e,t){if("."==String(e).charAt(0))throw Error('className passed in goog.getCssName must not start with ".". You passed: '+e);var r=function(e){return goog.cssNameMapping_[e]||e},n=function(e){e=e.split("-");for(var t=[],n=0;n<e.length;n++)t.push(r(e[n]));return t.join("-")};return n=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?r:n:function(e){return e},e=t?e+"-"+n(t):n(e),goog.global.CLOSURE_CSS_NAME_MAP_FN?goog.global.CLOSURE_CSS_NAME_MAP_FN(e):e},goog.setCssNameMapping=function(e,t){goog.cssNameMapping_=e,goog.cssNameMappingStyle_=t},goog.getMsg=function(e,t,r){return r&&r.html&&(e=e.replace(/</g,"&lt;")),t&&(e=e.replace(/\{\$([^}]+)}/g,(function(e,r){return null!=t&&r in t?t[r]:e}))),e},goog.getMsgWithFallback=function(e,t){return e},goog.exportSymbol=function(e,t,r){goog.exportPath_(e,t,r)},goog.exportProperty=function(e,t,r){e[t]=r},goog.inherits=function(e,t){function r(){}r.prototype=t.prototype,e.superClass_=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.base=function(e,r,n){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return t.prototype[r].apply(e,o)}},goog.scope=function(e){if(goog.isInModuleLoader_())throw Error("goog.scope is not supported within a module.");e.call(goog.global)},goog.defineClass=function(e,t){var r=t.constructor,n=t.statics;return r&&r!=Object.prototype.constructor||(r=function(){throw Error("cannot instantiate an interface (no constructor defined).")}),r=goog.defineClass.createSealingConstructor_(r,e),e&&goog.inherits(r,e),delete t.constructor,delete t.statics,goog.defineClass.applyProperties_(r.prototype,t),null!=n&&(n instanceof Function?n(r):goog.defineClass.applyProperties_(r,n)),r},goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG,goog.defineClass.createSealingConstructor_=function(e,t){if(!goog.defineClass.SEAL_CLASS_INSTANCES)return e;var r=!goog.defineClass.isUnsealable_(t),n=function(){var t=e.apply(this,arguments)||this;return t[goog.UID_PROPERTY_]=t[goog.UID_PROPERTY_],this.constructor===n&&r&&Object.seal instanceof Function&&Object.seal(t),t};return n},goog.defineClass.isUnsealable_=function(e){return e&&e.prototype&&e.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]},goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.defineClass.applyProperties_=function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);for(var n=0;n<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;n++)r=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[n],Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},goog.tagUnsealableClass=function(e){},goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable",goog.TRUSTED_TYPES_POLICY_NAME="",goog.identity_=function(e){return e},goog.createTrustedTypesPolicy=function(e){var t=null,r=goog.global.trustedTypes||goog.global.TrustedTypes;if(!r||!r.createPolicy)return t;try{t=r.createPolicy(e,{createHTML:goog.identity_,createScript:goog.identity_,createScriptURL:goog.identity_,createURL:goog.identity_})}catch(e){goog.logToConsole_(e.message)}return t},goog.TRUSTED_TYPES_POLICY_=goog.TRUSTED_TYPES_POLICY_NAME?goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME+"#base"):null,goog.object={},goog.object.is=function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t},goog.object.forEach=function(e,t,r){for(var n in e)t.call(r,e[n],n,e)},goog.object.filter=function(e,t,r){var n,o={};for(n in e)t.call(r,e[n],n,e)&&(o[n]=e[n]);return o},goog.object.map=function(e,t,r){var n,o={};for(n in e)o[n]=t.call(r,e[n],n,e);return o},goog.object.some=function(e,t,r){for(var n in e)if(t.call(r,e[n],n,e))return!0;return!1},goog.object.every=function(e,t,r){for(var n in e)if(!t.call(r,e[n],n,e))return!1;return!0},goog.object.getCount=function(e){var t,r=0;for(t in e)r++;return r},goog.object.getAnyKey=function(e){for(var t in e)return t},goog.object.getAnyValue=function(e){for(var t in e)return e[t]},goog.object.contains=function(e,t){return goog.object.containsValue(e,t)},goog.object.getValues=function(e){var t,r=[],n=0;for(t in e)r[n++]=e[t];return r},goog.object.getKeys=function(e){var t,r=[],n=0;for(t in e)r[n++]=t;return r},goog.object.getValueByKeys=function(e,t){var r=goog.isArrayLike(t),n=r?t:arguments;for(r=r?0:1;r<n.length;r++){if(null==e)return;e=e[n[r]]}return e},goog.object.containsKey=function(e,t){return null!==e&&t in e},goog.object.containsValue=function(e,t){for(var r in e)if(e[r]==t)return!0;return!1},goog.object.findKey=function(e,t,r){for(var n in e)if(t.call(r,e[n],n,e))return n},goog.object.findValue=function(e,t,r){return(t=goog.object.findKey(e,t,r))&&e[t]},goog.object.isEmpty=function(e){for(var t in e)return!1;return!0},goog.object.clear=function(e){for(var t in e)delete e[t]},goog.object.remove=function(e,t){var r;return(r=t in e)&&delete e[t],r},goog.object.add=function(e,t,r){if(null!==e&&t in e)throw Error('The object already contains the key "'+t+'"');goog.object.set(e,t,r)},goog.object.get=function(e,t,r){return null!==e&&t in e?e[t]:r},goog.object.set=function(e,t,r){e[t]=r},goog.object.setIfUndefined=function(e,t,r){return t in e?e[t]:e[t]=r},goog.object.setWithReturnValueIfNotSet=function(e,t,r){return t in e?e[t]:(r=r(),e[t]=r)},goog.object.equals=function(e,t){for(var r in e)if(!(r in t)||e[r]!==t[r])return!1;for(var n in t)if(!(n in e))return!1;return!0},goog.object.clone=function(e){var t,r={};for(t in e)r[t]=e[t];return r},goog.object.unsafeClone=function(e){var t=goog.typeOf(e);if("object"==t||"array"==t){if(goog.isFunction(e.clone))return e.clone();for(var r in t="array"==t?[]:{},e)t[r]=goog.object.unsafeClone(e[r]);return t}return e},goog.object.transpose=function(e){var t,r={};for(t in e)r[e[t]]=t;return r},goog.object.PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.object.extend=function(e,t){for(var r,n,o=1;o<arguments.length;o++){for(r in n=arguments[o])e[r]=n[r];for(var a=0;a<goog.object.PROTOTYPE_FIELDS_.length;a++)r=goog.object.PROTOTYPE_FIELDS_[a],Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}},goog.object.create=function(e){var t=arguments.length;if(1==t&&Array.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(t%2)throw Error("Uneven number of arguments");for(var r={},n=0;n<t;n+=2)r[arguments[n]]=arguments[n+1];return r},goog.object.createSet=function(e){var t=arguments.length;if(1==t&&Array.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);for(var r={},n=0;n<t;n++)r[arguments[n]]=!0;return r},goog.object.createImmutableView=function(e){var t=e;return Object.isFrozen&&!Object.isFrozen(e)&&(t=Object.create(e),Object.freeze(t)),t},goog.object.isImmutableView=function(e){return!!Object.isFrozen&&Object.isFrozen(e)},goog.object.getAllPropertyNames=function(e,t,r){if(!e)return[];if(!Object.getOwnPropertyNames||!Object.getPrototypeOf)return goog.object.getKeys(e);for(var n={};e&&(e!==Object.prototype||t)&&(e!==Function.prototype||r);){for(var o=Object.getOwnPropertyNames(e),a=0;a<o.length;a++)n[o[a]]=!0;e=Object.getPrototypeOf(e)}return goog.object.getKeys(n)},goog.object.getSuperClass=function(e){return(e=Object.getPrototypeOf(e.prototype))&&e.constructor};var jspb={asserts:{}};jspb.asserts.doAssertFailure=function(e,t,r,n){var o="Assertion failed";if(r){o+=": "+r;var a=n}else e&&(o+=": "+e,a=t);throw Error(""+o,a||[])},jspb.asserts.assert=function(e,t,r){for(var n=[],o=2;o<arguments.length;++o)n[o-2]=arguments[o];return e||jspb.asserts.doAssertFailure("",null,t,n),e},jspb.asserts.assertString=function(e,t,r){for(var n=[],o=2;o<arguments.length;++o)n[o-2]=arguments[o];return"string"!=typeof e&&jspb.asserts.doAssertFailure("Expected string but got %s: %s.",[goog.typeOf(e),e],t,n),e},jspb.asserts.assertArray=function(e,t,r){for(var n=[],o=2;o<arguments.length;++o)n[o-2]=arguments[o];return Array.isArray(e)||jspb.asserts.doAssertFailure("Expected array but got %s: %s.",[goog.typeOf(e),e],t,n),e},jspb.asserts.fail=function(e,t){for(var r=[],n=1;n<arguments.length;++n)r[n-1]=arguments[n];throw Error("Failure"+(e?": "+e:""),r)},jspb.asserts.assertInstanceof=function(e,t,r,n){for(var o=[],a=3;a<arguments.length;++a)o[a-3]=arguments[a];return e instanceof t||jspb.asserts.doAssertFailure("Expected instanceof %s but got %s.",[jspb.asserts.getType(t),jspb.asserts.getType(e)],r,o),e},jspb.asserts.getType=function(e){return e instanceof Function?e.displayName||e.name||"unknown type name":e instanceof Object?e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e):null===e?"null":typeof e},jspb.BinaryConstants={},jspb.ConstBinaryMessage=function(){},jspb.BinaryMessage=function(){},jspb.BinaryConstants.FieldType={INVALID:-1,DOUBLE:1,FLOAT:2,INT64:3,UINT64:4,INT32:5,FIXED64:6,FIXED32:7,BOOL:8,STRING:9,GROUP:10,MESSAGE:11,BYTES:12,UINT32:13,ENUM:14,SFIXED32:15,SFIXED64:16,SINT32:17,SINT64:18,FHASH64:30,VHASH64:31},jspb.BinaryConstants.WireType={INVALID:-1,VARINT:0,FIXED64:1,DELIMITED:2,START_GROUP:3,END_GROUP:4,FIXED32:5},jspb.BinaryConstants.FieldTypeToWireType=function(e){var t=jspb.BinaryConstants.FieldType,r=jspb.BinaryConstants.WireType;switch(e){case t.INT32:case t.INT64:case t.UINT32:case t.UINT64:case t.SINT32:case t.SINT64:case t.BOOL:case t.ENUM:case t.VHASH64:return r.VARINT;case t.DOUBLE:case t.FIXED64:case t.SFIXED64:case t.FHASH64:return r.FIXED64;case t.STRING:case t.MESSAGE:case t.BYTES:return r.DELIMITED;case t.FLOAT:case t.FIXED32:case t.SFIXED32:return r.FIXED32;default:return r.INVALID}},jspb.BinaryConstants.INVALID_FIELD_NUMBER=-1,jspb.BinaryConstants.FLOAT32_EPS=1401298464324817e-60,jspb.BinaryConstants.FLOAT32_MIN=11754943508222875e-54,jspb.BinaryConstants.FLOAT32_MAX=34028234663852886e22,jspb.BinaryConstants.FLOAT64_EPS=5e-324,jspb.BinaryConstants.FLOAT64_MIN=22250738585072014e-324,jspb.BinaryConstants.FLOAT64_MAX=17976931348623157e292,jspb.BinaryConstants.TWO_TO_20=1048576,jspb.BinaryConstants.TWO_TO_23=8388608,jspb.BinaryConstants.TWO_TO_31=2147483648,jspb.BinaryConstants.TWO_TO_32=4294967296,jspb.BinaryConstants.TWO_TO_52=4503599627370496,jspb.BinaryConstants.TWO_TO_63=0x8000000000000000,jspb.BinaryConstants.TWO_TO_64=0x10000000000000000,jspb.BinaryConstants.ZERO_HASH="\0\0\0\0\0\0\0\0",goog.debug={},goog.debug.Error=function(e){if(Error.captureStackTrace)Error.captureStackTrace(this,goog.debug.Error);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e)),this.reportErrorToServer=!0},goog.inherits(goog.debug.Error,Error),goog.debug.Error.prototype.name="CustomError",goog.dom={},goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},goog.asserts={},goog.asserts.ENABLE_ASSERTS=goog.DEBUG,goog.asserts.AssertionError=function(e,t){goog.debug.Error.call(this,goog.asserts.subs_(e,t)),this.messagePattern=e},goog.inherits(goog.asserts.AssertionError,goog.debug.Error),goog.asserts.AssertionError.prototype.name="AssertionError",goog.asserts.DEFAULT_ERROR_HANDLER=function(e){throw e},goog.asserts.errorHandler_=goog.asserts.DEFAULT_ERROR_HANDLER,goog.asserts.subs_=function(e,t){for(var r="",n=(e=e.split("%s")).length-1,o=0;o<n;o++)r+=e[o]+(o<t.length?t[o]:"%s");return r+e[n]},goog.asserts.doAssertFailure_=function(e,t,r,n){var o="Assertion failed";if(r){o+=": "+r;var a=n}else e&&(o+=": "+e,a=t);e=new goog.asserts.AssertionError(""+o,a||[]),goog.asserts.errorHandler_(e)},goog.asserts.setErrorHandler=function(e){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.errorHandler_=e)},goog.asserts.assert=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&!e&&goog.asserts.doAssertFailure_("",null,t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertExists=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&null==e&&goog.asserts.doAssertFailure_("Expected to exist: %s.",[e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.fail=function(e,t){goog.asserts.ENABLE_ASSERTS&&goog.asserts.errorHandler_(new goog.asserts.AssertionError("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1)))},goog.asserts.assertNumber=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&"number"!=typeof e&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertString=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&"string"!=typeof e&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertFunction=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(e)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertObject=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&!goog.isObject(e)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertArray=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&!Array.isArray(e)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertBoolean=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&"boolean"!=typeof e&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertElement=function(e,t,r){return!goog.asserts.ENABLE_ASSERTS||goog.isObject(e)&&e.nodeType==goog.dom.NodeType.ELEMENT||goog.asserts.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertInstanceof=function(e,t,r,n){return!goog.asserts.ENABLE_ASSERTS||e instanceof t||goog.asserts.doAssertFailure_("Expected instanceof %s but got %s.",[goog.asserts.getType_(t),goog.asserts.getType_(e)],r,Array.prototype.slice.call(arguments,3)),e},goog.asserts.assertFinite=function(e,t,r){return!goog.asserts.ENABLE_ASSERTS||"number"==typeof e&&isFinite(e)||goog.asserts.doAssertFailure_("Expected %s to be a finite number but it is not.",[e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertObjectPrototypeIsIntact=function(){for(var e in Object.prototype)goog.asserts.fail(e+" should not be enumerable in Object.prototype.")},goog.asserts.getType_=function(e){return e instanceof Function?e.displayName||e.name||"unknown type name":e instanceof Object?e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e):null===e?"null":typeof e},goog.array={},goog.NATIVE_ARRAY_PROTOTYPES=goog.TRUSTED_SITE,goog.array.ASSUME_NATIVE_FUNCTIONS=2012<goog.FEATURESET_YEAR,goog.array.peek=function(e){return e[e.length-1]},goog.array.last=goog.array.peek,goog.array.indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.indexOf)?function(e,t,r){return goog.asserts.assert(null!=e.length),Array.prototype.indexOf.call(e,t,r)}:function(e,t,r){if(r=null==r?0:0>r?Math.max(0,e.length+r):r,"string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,r);for(;r<e.length;r++)if(r in e&&e[r]===t)return r;return-1},goog.array.lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.lastIndexOf)?function(e,t,r){return goog.asserts.assert(null!=e.length),Array.prototype.lastIndexOf.call(e,t,null==r?e.length-1:r)}:function(e,t,r){if(0>(r=null==r?e.length-1:r)&&(r=Math.max(0,e.length+r)),"string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.lastIndexOf(t,r);for(;0<=r;r--)if(r in e&&e[r]===t)return r;return-1},goog.array.forEach=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.forEach)?function(e,t,r){goog.asserts.assert(null!=e.length),Array.prototype.forEach.call(e,t,r)}:function(e,t,r){for(var n=e.length,o="string"==typeof e?e.split(""):e,a=0;a<n;a++)a in o&&t.call(r,o[a],a,e)},goog.array.forEachRight=function(e,t,r){var n=e.length,o="string"==typeof e?e.split(""):e;for(--n;0<=n;--n)n in o&&t.call(r,o[n],n,e)},goog.array.filter=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.filter)?function(e,t,r){return goog.asserts.assert(null!=e.length),Array.prototype.filter.call(e,t,r)}:function(e,t,r){for(var n=e.length,o=[],a=0,i="string"==typeof e?e.split(""):e,s=0;s<n;s++)if(s in i){var p=i[s];t.call(r,p,s,e)&&(o[a++]=p)}return o},goog.array.map=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.map)?function(e,t,r){return goog.asserts.assert(null!=e.length),Array.prototype.map.call(e,t,r)}:function(e,t,r){for(var n=e.length,o=Array(n),a="string"==typeof e?e.split(""):e,i=0;i<n;i++)i in a&&(o[i]=t.call(r,a[i],i,e));return o},goog.array.reduce=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduce)?function(e,t,r,n){return goog.asserts.assert(null!=e.length),n&&(t=goog.bind(t,n)),Array.prototype.reduce.call(e,t,r)}:function(e,t,r,n){var o=r;return goog.array.forEach(e,(function(r,a){o=t.call(n,o,r,a,e)})),o},goog.array.reduceRight=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduceRight)?function(e,t,r,n){return goog.asserts.assert(null!=e.length),goog.asserts.assert(null!=t),n&&(t=goog.bind(t,n)),Array.prototype.reduceRight.call(e,t,r)}:function(e,t,r,n){var o=r;return goog.array.forEachRight(e,(function(r,a){o=t.call(n,o,r,a,e)})),o},goog.array.some=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.some)?function(e,t,r){return goog.asserts.assert(null!=e.length),Array.prototype.some.call(e,t,r)}:function(e,t,r){for(var n=e.length,o="string"==typeof e?e.split(""):e,a=0;a<n;a++)if(a in o&&t.call(r,o[a],a,e))return!0;return!1},goog.array.every=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.every)?function(e,t,r){return goog.asserts.assert(null!=e.length),Array.prototype.every.call(e,t,r)}:function(e,t,r){for(var n=e.length,o="string"==typeof e?e.split(""):e,a=0;a<n;a++)if(a in o&&!t.call(r,o[a],a,e))return!1;return!0},goog.array.count=function(e,t,r){var n=0;return goog.array.forEach(e,(function(e,o,a){t.call(r,e,o,a)&&++n}),r),n},goog.array.find=function(e,t,r){return 0>(t=goog.array.findIndex(e,t,r))?null:"string"==typeof e?e.charAt(t):e[t]},goog.array.findIndex=function(e,t,r){for(var n=e.length,o="string"==typeof e?e.split(""):e,a=0;a<n;a++)if(a in o&&t.call(r,o[a],a,e))return a;return-1},goog.array.findRight=function(e,t,r){return 0>(t=goog.array.findIndexRight(e,t,r))?null:"string"==typeof e?e.charAt(t):e[t]},goog.array.findIndexRight=function(e,t,r){var n=e.length,o="string"==typeof e?e.split(""):e;for(--n;0<=n;n--)if(n in o&&t.call(r,o[n],n,e))return n;return-1},goog.array.contains=function(e,t){return 0<=goog.array.indexOf(e,t)},goog.array.isEmpty=function(e){return 0==e.length},goog.array.clear=function(e){if(!Array.isArray(e))for(var t=e.length-1;0<=t;t--)delete e[t];e.length=0},goog.array.insert=function(e,t){goog.array.contains(e,t)||e.push(t)},goog.array.insertAt=function(e,t,r){goog.array.splice(e,r,0,t)},goog.array.insertArrayAt=function(e,t,r){goog.partial(goog.array.splice,e,r,0).apply(null,t)},goog.array.insertBefore=function(e,t,r){var n;2==arguments.length||0>(n=goog.array.indexOf(e,r))?e.push(t):goog.array.insertAt(e,t,n)},goog.array.remove=function(e,t){var r;return(r=0<=(t=goog.array.indexOf(e,t)))&&goog.array.removeAt(e,t),r},goog.array.removeLast=function(e,t){return 0<=(t=goog.array.lastIndexOf(e,t))&&(goog.array.removeAt(e,t),!0)},goog.array.removeAt=function(e,t){return goog.asserts.assert(null!=e.length),1==Array.prototype.splice.call(e,t,1).length},goog.array.removeIf=function(e,t,r){return 0<=(t=goog.array.findIndex(e,t,r))&&(goog.array.removeAt(e,t),!0)},goog.array.removeAllIf=function(e,t,r){var n=0;return goog.array.forEachRight(e,(function(o,a){t.call(r,o,a,e)&&goog.array.removeAt(e,a)&&n++})),n},goog.array.concat=function(e){return Array.prototype.concat.apply([],arguments)},goog.array.join=function(e){return Array.prototype.concat.apply([],arguments)},goog.array.toArray=function(e){var t=e.length;if(0<t){for(var r=Array(t),n=0;n<t;n++)r[n]=e[n];return r}return[]},goog.array.clone=goog.array.toArray,goog.array.extend=function(e,t){for(var r=1;r<arguments.length;r++){var n=arguments[r];if(goog.isArrayLike(n)){var o=e.length||0,a=n.length||0;e.length=o+a;for(var i=0;i<a;i++)e[o+i]=n[i]}else e.push(n)}},goog.array.splice=function(e,t,r,n){return goog.asserts.assert(null!=e.length),Array.prototype.splice.apply(e,goog.array.slice(arguments,1))},goog.array.slice=function(e,t,r){return goog.asserts.assert(null!=e.length),2>=arguments.length?Array.prototype.slice.call(e,t):Array.prototype.slice.call(e,t,r)},goog.array.removeDuplicates=function(e,t,r){t=t||e;var n=function(e){return goog.isObject(e)?"o"+goog.getUid(e):(typeof e).charAt(0)+e};r=r||n,n={};for(var o=0,a=0;a<e.length;){var i=e[a++],s=r(i);Object.prototype.hasOwnProperty.call(n,s)||(n[s]=!0,t[o++]=i)}t.length=o},goog.array.binarySearch=function(e,t,r){return goog.array.binarySearch_(e,r||goog.array.defaultCompare,!1,t)},goog.array.binarySelect=function(e,t,r){return goog.array.binarySearch_(e,t,!0,void 0,r)},goog.array.binarySearch_=function(e,t,r,n,o){for(var a,i=0,s=e.length;i<s;){var p=i+(s-i>>>1),l=r?t.call(o,e[p],p,e):t(n,e[p]);0<l?i=p+1:(s=p,a=!l)}return a?i:-i-1},goog.array.sort=function(e,t){e.sort(t||goog.array.defaultCompare)},goog.array.stableSort=function(e,t){for(var r=Array(e.length),n=0;n<e.length;n++)r[n]={index:n,value:e[n]};var o=t||goog.array.defaultCompare;for(goog.array.sort(r,(function(e,t){return o(e.value,t.value)||e.index-t.index})),n=0;n<e.length;n++)e[n]=r[n].value},goog.array.sortByKey=function(e,t,r){var n=r||goog.array.defaultCompare;goog.array.sort(e,(function(e,r){return n(t(e),t(r))}))},goog.array.sortObjectsByKey=function(e,t,r){goog.array.sortByKey(e,(function(e){return e[t]}),r)},goog.array.isSorted=function(e,t,r){t=t||goog.array.defaultCompare;for(var n=1;n<e.length;n++){var o=t(e[n-1],e[n]);if(0<o||0==o&&r)return!1}return!0},goog.array.equals=function(e,t,r){if(!goog.isArrayLike(e)||!goog.isArrayLike(t)||e.length!=t.length)return!1;var n=e.length;r=r||goog.array.defaultCompareEquality;for(var o=0;o<n;o++)if(!r(e[o],t[o]))return!1;return!0},goog.array.compare3=function(e,t,r){r=r||goog.array.defaultCompare;for(var n=Math.min(e.length,t.length),o=0;o<n;o++){var a=r(e[o],t[o]);if(0!=a)return a}return goog.array.defaultCompare(e.length,t.length)},goog.array.defaultCompare=function(e,t){return e>t?1:e<t?-1:0},goog.array.inverseDefaultCompare=function(e,t){return-goog.array.defaultCompare(e,t)},goog.array.defaultCompareEquality=function(e,t){return e===t},goog.array.binaryInsert=function(e,t,r){return 0>(r=goog.array.binarySearch(e,t,r))&&(goog.array.insertAt(e,t,-(r+1)),!0)},goog.array.binaryRemove=function(e,t,r){return 0<=(t=goog.array.binarySearch(e,t,r))&&goog.array.removeAt(e,t)},goog.array.bucket=function(e,t,r){for(var n={},o=0;o<e.length;o++){var a=e[o],i=t.call(r,a,o,e);void 0!==i&&(n[i]||(n[i]=[])).push(a)}return n},goog.array.toObject=function(e,t,r){var n={};return goog.array.forEach(e,(function(o,a){n[t.call(r,o,a,e)]=o})),n},goog.array.range=function(e,t,r){var n=[],o=0,a=e;if(void 0!==t&&(o=e,a=t),0>(r=r||1)*(a-o))return[];if(0<r)for(e=o;e<a;e+=r)n.push(e);else for(e=o;e>a;e+=r)n.push(e);return n},goog.array.repeat=function(e,t){for(var r=[],n=0;n<t;n++)r[n]=e;return r},goog.array.flatten=function(e){for(var t=[],r=0;r<arguments.length;r++){var n=arguments[r];if(Array.isArray(n))for(var o=0;o<n.length;o+=8192){var a=goog.array.slice(n,o,o+8192);a=goog.array.flatten.apply(null,a);for(var i=0;i<a.length;i++)t.push(a[i])}else t.push(n)}return t},goog.array.rotate=function(e,t){return goog.asserts.assert(null!=e.length),e.length&&(0<(t%=e.length)?Array.prototype.unshift.apply(e,e.splice(-t,t)):0>t&&Array.prototype.push.apply(e,e.splice(0,-t))),e},goog.array.moveItem=function(e,t,r){goog.asserts.assert(0<=t&&t<e.length),goog.asserts.assert(0<=r&&r<e.length),t=Array.prototype.splice.call(e,t,1),Array.prototype.splice.call(e,r,0,t[0])},goog.array.zip=function(e){if(!arguments.length)return[];for(var t=[],r=arguments[0].length,n=1;n<arguments.length;n++)arguments[n].length<r&&(r=arguments[n].length);for(n=0;n<r;n++){for(var o=[],a=0;a<arguments.length;a++)o.push(arguments[a][n]);t.push(o)}return t},goog.array.shuffle=function(e,t){t=t||Math.random;for(var r=e.length-1;0<r;r--){var n=Math.floor(t()*(r+1)),o=e[r];e[r]=e[n],e[n]=o}},goog.array.copyByIndex=function(e,t){var r=[];return goog.array.forEach(t,(function(t){r.push(e[t])})),r},goog.array.concatMap=function(e,t,r){return goog.array.concat.apply([],goog.array.map(e,t,r))},goog.crypt={},goog.crypt.stringToByteArray=function(e){for(var t=[],r=0,n=0;n<e.length;n++){var o=e.charCodeAt(n);255<o&&(t[r++]=255&o,o>>=8),t[r++]=o}return t},goog.crypt.byteArrayToString=function(e){if(8192>=e.length)return String.fromCharCode.apply(null,e);for(var t="",r=0;r<e.length;r+=8192){var n=goog.array.slice(e,r,r+8192);t+=String.fromCharCode.apply(null,n)}return t},goog.crypt.byteArrayToHex=function(e,t){return goog.array.map(e,(function(e){return 1<(e=e.toString(16)).length?e:"0"+e})).join(t||"")},goog.crypt.hexToByteArray=function(e){goog.asserts.assert(0==e.length%2,"Key string length must be multiple of 2");for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substring(r,r+2),16));return t},goog.crypt.stringToUtf8ByteArray=function(e){for(var t=[],r=0,n=0;n<e.length;n++){var o=e.charCodeAt(n);128>o?t[r++]=o:(2048>o?t[r++]=o>>6|192:(55296==(64512&o)&&n+1<e.length&&56320==(64512&e.charCodeAt(n+1))?(o=65536+((1023&o)<<10)+(1023&e.charCodeAt(++n)),t[r++]=o>>18|240,t[r++]=o>>12&63|128):t[r++]=o>>12|224,t[r++]=o>>6&63|128),t[r++]=63&o|128)}return t},goog.crypt.utf8ByteArrayToString=function(e){for(var t=[],r=0,n=0;r<e.length;){var o=e[r++];if(128>o)t[n++]=String.fromCharCode(o);else if(191<o&&224>o){var a=e[r++];t[n++]=String.fromCharCode((31&o)<<6|63&a)}else if(239<o&&365>o){a=e[r++];var i=e[r++];o=((7&o)<<18|(63&a)<<12|(63&i)<<6|63&e[r++])-65536,t[n++]=String.fromCharCode(55296+(o>>10)),t[n++]=String.fromCharCode(56320+(1023&o))}else a=e[r++],i=e[r++],t[n++]=String.fromCharCode((15&o)<<12|(63&a)<<6|63&i)}return t.join("")},goog.crypt.xorByteArray=function(e,t){goog.asserts.assert(e.length==t.length,"XOR array lengths must match");for(var r=[],n=0;n<e.length;n++)r.push(e[n]^t[n]);return r},goog.dom.asserts={},goog.dom.asserts.assertIsLocation=function(e){if(goog.asserts.ENABLE_ASSERTS){var t=goog.dom.asserts.getWindow_(e);t&&(!e||!(e instanceof t.Location)&&e instanceof t.Element)&&goog.asserts.fail("Argument is not a Location (or a non-Element mock); got: %s",goog.dom.asserts.debugStringForType_(e))}return e},goog.dom.asserts.assertIsElementType_=function(e,t){if(goog.asserts.ENABLE_ASSERTS){var r=goog.dom.asserts.getWindow_(e);r&&void 0!==r[t]&&(e&&(e instanceof r[t]||!(e instanceof r.Location||e instanceof r.Element))||goog.asserts.fail("Argument is not a %s (or a non-Element, non-Location mock); got: %s",t,goog.dom.asserts.debugStringForType_(e)))}return e},goog.dom.asserts.assertIsHTMLAnchorElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLAnchorElement")},goog.dom.asserts.assertIsHTMLButtonElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLButtonElement")},goog.dom.asserts.assertIsHTMLLinkElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLLinkElement")},goog.dom.asserts.assertIsHTMLImageElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLImageElement")},goog.dom.asserts.assertIsHTMLAudioElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLAudioElement")},goog.dom.asserts.assertIsHTMLVideoElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLVideoElement")},goog.dom.asserts.assertIsHTMLInputElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLInputElement")},goog.dom.asserts.assertIsHTMLTextAreaElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLTextAreaElement")},goog.dom.asserts.assertIsHTMLCanvasElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLCanvasElement")},goog.dom.asserts.assertIsHTMLEmbedElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLEmbedElement")},goog.dom.asserts.assertIsHTMLFormElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLFormElement")},goog.dom.asserts.assertIsHTMLFrameElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLFrameElement")},goog.dom.asserts.assertIsHTMLIFrameElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLIFrameElement")},goog.dom.asserts.assertIsHTMLObjectElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLObjectElement")},goog.dom.asserts.assertIsHTMLScriptElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLScriptElement")},goog.dom.asserts.debugStringForType_=function(e){if(!goog.isObject(e))return void 0===e?"undefined":null===e?"null":typeof e;try{return e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e)}catch(e){return"<object could not be stringified>"}},goog.dom.asserts.getWindow_=function(e){try{var t=e&&e.ownerDocument,r=t&&(t.defaultView||t.parentWindow);if((r=r||goog.global).Element&&r.Location)return r}catch(e){}return null},goog.functions={},goog.functions.constant=function(e){return function(){return e}},goog.functions.FALSE=function(){return!1},goog.functions.TRUE=function(){return!0},goog.functions.NULL=function(){return null},goog.functions.identity=function(e,t){return e},goog.functions.error=function(e){return function(){throw Error(e)}},goog.functions.fail=function(e){return function(){throw e}},goog.functions.lock=function(e,t){return t=t||0,function(){return e.apply(this,Array.prototype.slice.call(arguments,0,t))}},goog.functions.nth=function(e){return function(){return arguments[e]}},goog.functions.partialRight=function(e,t){var r=Array.prototype.slice.call(arguments,1);return function(){var t=Array.prototype.slice.call(arguments);return t.push.apply(t,r),e.apply(this,t)}},goog.functions.withReturnValue=function(e,t){return goog.functions.sequence(e,goog.functions.constant(t))},goog.functions.equalTo=function(e,t){return function(r){return t?e==r:e===r}},goog.functions.compose=function(e,t){var r=arguments,n=r.length;return function(){var e;n&&(e=r[n-1].apply(this,arguments));for(var t=n-2;0<=t;t--)e=r[t].call(this,e);return e}},goog.functions.sequence=function(e){var t=arguments,r=t.length;return function(){for(var e,n=0;n<r;n++)e=t[n].apply(this,arguments);return e}},goog.functions.and=function(e){var t=arguments,r=t.length;return function(){for(var e=0;e<r;e++)if(!t[e].apply(this,arguments))return!1;return!0}},goog.functions.or=function(e){var t=arguments,r=t.length;return function(){for(var e=0;e<r;e++)if(t[e].apply(this,arguments))return!0;return!1}},goog.functions.not=function(e){return function(){return!e.apply(this,arguments)}},goog.functions.create=function(e,t){var r=function(){};return r.prototype=e.prototype,r=new r,e.apply(r,Array.prototype.slice.call(arguments,1)),r},goog.functions.CACHE_RETURN_VALUE=!0,goog.functions.cacheReturnValue=function(e){var t,r=!1;return function(){return goog.functions.CACHE_RETURN_VALUE?(r||(t=e(),r=!0),t):e()}},goog.functions.once=function(e){var t=e;return function(){if(t){var e=t;t=null,e()}}},goog.functions.debounce=function(e,t,r){var n=0;return function(o){goog.global.clearTimeout(n);var a=arguments;n=goog.global.setTimeout((function(){e.apply(r,a)}),t)}},goog.functions.throttle=function(e,t,r){var n=0,o=!1,a=[],i=function(){n=0,o&&(o=!1,s())},s=function(){n=goog.global.setTimeout(i,t),e.apply(r,a)};return function(e){a=arguments,n?o=!0:s()}},goog.functions.rateLimit=function(e,t,r){var n=0,o=function(){n=0};return function(a){n||(n=goog.global.setTimeout(o,t),e.apply(r,arguments))}},goog.dom.HtmlElement=function(){},goog.dom.TagName=function(e){this.tagName_=e},goog.dom.TagName.prototype.toString=function(){return this.tagName_},goog.dom.TagName.A=new goog.dom.TagName("A"),goog.dom.TagName.ABBR=new goog.dom.TagName("ABBR"),goog.dom.TagName.ACRONYM=new goog.dom.TagName("ACRONYM"),goog.dom.TagName.ADDRESS=new goog.dom.TagName("ADDRESS"),goog.dom.TagName.APPLET=new goog.dom.TagName("APPLET"),goog.dom.TagName.AREA=new goog.dom.TagName("AREA"),goog.dom.TagName.ARTICLE=new goog.dom.TagName("ARTICLE"),goog.dom.TagName.ASIDE=new goog.dom.TagName("ASIDE"),goog.dom.TagName.AUDIO=new goog.dom.TagName("AUDIO"),goog.dom.TagName.B=new goog.dom.TagName("B"),goog.dom.TagName.BASE=new goog.dom.TagName("BASE"),goog.dom.TagName.BASEFONT=new goog.dom.TagName("BASEFONT"),goog.dom.TagName.BDI=new goog.dom.TagName("BDI"),goog.dom.TagName.BDO=new goog.dom.TagName("BDO"),goog.dom.TagName.BIG=new goog.dom.TagName("BIG"),goog.dom.TagName.BLOCKQUOTE=new goog.dom.TagName("BLOCKQUOTE"),goog.dom.TagName.BODY=new goog.dom.TagName("BODY"),goog.dom.TagName.BR=new goog.dom.TagName("BR"),goog.dom.TagName.BUTTON=new goog.dom.TagName("BUTTON"),goog.dom.TagName.CANVAS=new goog.dom.TagName("CANVAS"),goog.dom.TagName.CAPTION=new goog.dom.TagName("CAPTION"),goog.dom.TagName.CENTER=new goog.dom.TagName("CENTER"),goog.dom.TagName.CITE=new goog.dom.TagName("CITE"),goog.dom.TagName.CODE=new goog.dom.TagName("CODE"),goog.dom.TagName.COL=new goog.dom.TagName("COL"),goog.dom.TagName.COLGROUP=new goog.dom.TagName("COLGROUP"),goog.dom.TagName.COMMAND=new goog.dom.TagName("COMMAND"),goog.dom.TagName.DATA=new goog.dom.TagName("DATA"),goog.dom.TagName.DATALIST=new goog.dom.TagName("DATALIST"),goog.dom.TagName.DD=new goog.dom.TagName("DD"),goog.dom.TagName.DEL=new goog.dom.TagName("DEL"),goog.dom.TagName.DETAILS=new goog.dom.TagName("DETAILS"),goog.dom.TagName.DFN=new goog.dom.TagName("DFN"),goog.dom.TagName.DIALOG=new goog.dom.TagName("DIALOG"),goog.dom.TagName.DIR=new goog.dom.TagName("DIR"),goog.dom.TagName.DIV=new goog.dom.TagName("DIV"),goog.dom.TagName.DL=new goog.dom.TagName("DL"),goog.dom.TagName.DT=new goog.dom.TagName("DT"),goog.dom.TagName.EM=new goog.dom.TagName("EM"),goog.dom.TagName.EMBED=new goog.dom.TagName("EMBED"),goog.dom.TagName.FIELDSET=new goog.dom.TagName("FIELDSET"),goog.dom.TagName.FIGCAPTION=new goog.dom.TagName("FIGCAPTION"),goog.dom.TagName.FIGURE=new goog.dom.TagName("FIGURE"),goog.dom.TagName.FONT=new goog.dom.TagName("FONT"),goog.dom.TagName.FOOTER=new goog.dom.TagName("FOOTER"),goog.dom.TagName.FORM=new goog.dom.TagName("FORM"),goog.dom.TagName.FRAME=new goog.dom.TagName("FRAME"),goog.dom.TagName.FRAMESET=new goog.dom.TagName("FRAMESET"),goog.dom.TagName.H1=new goog.dom.TagName("H1"),goog.dom.TagName.H2=new goog.dom.TagName("H2"),goog.dom.TagName.H3=new goog.dom.TagName("H3"),goog.dom.TagName.H4=new goog.dom.TagName("H4"),goog.dom.TagName.H5=new goog.dom.TagName("H5"),goog.dom.TagName.H6=new goog.dom.TagName("H6"),goog.dom.TagName.HEAD=new goog.dom.TagName("HEAD"),goog.dom.TagName.HEADER=new goog.dom.TagName("HEADER"),goog.dom.TagName.HGROUP=new goog.dom.TagName("HGROUP"),goog.dom.TagName.HR=new goog.dom.TagName("HR"),goog.dom.TagName.HTML=new goog.dom.TagName("HTML"),goog.dom.TagName.I=new goog.dom.TagName("I"),goog.dom.TagName.IFRAME=new goog.dom.TagName("IFRAME"),goog.dom.TagName.IMG=new goog.dom.TagName("IMG"),goog.dom.TagName.INPUT=new goog.dom.TagName("INPUT"),goog.dom.TagName.INS=new goog.dom.TagName("INS"),goog.dom.TagName.ISINDEX=new goog.dom.TagName("ISINDEX"),goog.dom.TagName.KBD=new goog.dom.TagName("KBD"),goog.dom.TagName.KEYGEN=new goog.dom.TagName("KEYGEN"),goog.dom.TagName.LABEL=new goog.dom.TagName("LABEL"),goog.dom.TagName.LEGEND=new goog.dom.TagName("LEGEND"),goog.dom.TagName.LI=new goog.dom.TagName("LI"),goog.dom.TagName.LINK=new goog.dom.TagName("LINK"),goog.dom.TagName.MAIN=new goog.dom.TagName("MAIN"),goog.dom.TagName.MAP=new goog.dom.TagName("MAP"),goog.dom.TagName.MARK=new goog.dom.TagName("MARK"),goog.dom.TagName.MATH=new goog.dom.TagName("MATH"),goog.dom.TagName.MENU=new goog.dom.TagName("MENU"),goog.dom.TagName.MENUITEM=new goog.dom.TagName("MENUITEM"),goog.dom.TagName.META=new goog.dom.TagName("META"),goog.dom.TagName.METER=new goog.dom.TagName("METER"),goog.dom.TagName.NAV=new goog.dom.TagName("NAV"),goog.dom.TagName.NOFRAMES=new goog.dom.TagName("NOFRAMES"),goog.dom.TagName.NOSCRIPT=new goog.dom.TagName("NOSCRIPT"),goog.dom.TagName.OBJECT=new goog.dom.TagName("OBJECT"),goog.dom.TagName.OL=new goog.dom.TagName("OL"),goog.dom.TagName.OPTGROUP=new goog.dom.TagName("OPTGROUP"),goog.dom.TagName.OPTION=new goog.dom.TagName("OPTION"),goog.dom.TagName.OUTPUT=new goog.dom.TagName("OUTPUT"),goog.dom.TagName.P=new goog.dom.TagName("P"),goog.dom.TagName.PARAM=new goog.dom.TagName("PARAM"),goog.dom.TagName.PICTURE=new goog.dom.TagName("PICTURE"),goog.dom.TagName.PRE=new goog.dom.TagName("PRE"),goog.dom.TagName.PROGRESS=new goog.dom.TagName("PROGRESS"),goog.dom.TagName.Q=new goog.dom.TagName("Q"),goog.dom.TagName.RP=new goog.dom.TagName("RP"),goog.dom.TagName.RT=new goog.dom.TagName("RT"),goog.dom.TagName.RTC=new goog.dom.TagName("RTC"),goog.dom.TagName.RUBY=new goog.dom.TagName("RUBY"),goog.dom.TagName.S=new goog.dom.TagName("S"),goog.dom.TagName.SAMP=new goog.dom.TagName("SAMP"),goog.dom.TagName.SCRIPT=new goog.dom.TagName("SCRIPT"),goog.dom.TagName.SECTION=new goog.dom.TagName("SECTION"),goog.dom.TagName.SELECT=new goog.dom.TagName("SELECT"),goog.dom.TagName.SMALL=new goog.dom.TagName("SMALL"),goog.dom.TagName.SOURCE=new goog.dom.TagName("SOURCE"),goog.dom.TagName.SPAN=new goog.dom.TagName("SPAN"),goog.dom.TagName.STRIKE=new goog.dom.TagName("STRIKE"),goog.dom.TagName.STRONG=new goog.dom.TagName("STRONG"),goog.dom.TagName.STYLE=new goog.dom.TagName("STYLE"),goog.dom.TagName.SUB=new goog.dom.TagName("SUB"),goog.dom.TagName.SUMMARY=new goog.dom.TagName("SUMMARY"),goog.dom.TagName.SUP=new goog.dom.TagName("SUP"),goog.dom.TagName.SVG=new goog.dom.TagName("SVG"),goog.dom.TagName.TABLE=new goog.dom.TagName("TABLE"),goog.dom.TagName.TBODY=new goog.dom.TagName("TBODY"),goog.dom.TagName.TD=new goog.dom.TagName("TD"),goog.dom.TagName.TEMPLATE=new goog.dom.TagName("TEMPLATE"),goog.dom.TagName.TEXTAREA=new goog.dom.TagName("TEXTAREA"),goog.dom.TagName.TFOOT=new goog.dom.TagName("TFOOT"),goog.dom.TagName.TH=new goog.dom.TagName("TH"),goog.dom.TagName.THEAD=new goog.dom.TagName("THEAD"),goog.dom.TagName.TIME=new goog.dom.TagName("TIME"),goog.dom.TagName.TITLE=new goog.dom.TagName("TITLE"),goog.dom.TagName.TR=new goog.dom.TagName("TR"),goog.dom.TagName.TRACK=new goog.dom.TagName("TRACK"),goog.dom.TagName.TT=new goog.dom.TagName("TT"),goog.dom.TagName.U=new goog.dom.TagName("U"),goog.dom.TagName.UL=new goog.dom.TagName("UL"),goog.dom.TagName.VAR=new goog.dom.TagName("VAR"),goog.dom.TagName.VIDEO=new goog.dom.TagName("VIDEO"),goog.dom.TagName.WBR=new goog.dom.TagName("WBR"),goog.dom.tags={},goog.dom.tags.VOID_TAGS_={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},goog.dom.tags.isVoidTag=function(e){return!0===goog.dom.tags.VOID_TAGS_[e]},goog.html={},goog.html.trustedtypes={},goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY=goog.TRUSTED_TYPES_POLICY_NAME?goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME+"#html"):null,goog.string={},goog.string.TypedString=function(){},goog.string.Const=function(e,t){this.stringConstValueWithSecurityContract__googStringSecurityPrivate_=e===goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_&&t||"",this.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_=goog.string.Const.TYPE_MARKER_},goog.string.Const.prototype.implementsGoogStringTypedString=!0,goog.string.Const.prototype.getTypedStringValue=function(){return this.stringConstValueWithSecurityContract__googStringSecurityPrivate_},goog.DEBUG&&(goog.string.Const.prototype.toString=function(){return"Const{"+this.stringConstValueWithSecurityContract__googStringSecurityPrivate_+"}"}),goog.string.Const.unwrap=function(e){return e instanceof goog.string.Const&&e.constructor===goog.string.Const&&e.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_===goog.string.Const.TYPE_MARKER_?e.stringConstValueWithSecurityContract__googStringSecurityPrivate_:(goog.asserts.fail("expected object of type Const, got '"+e+"'"),"type_error:Const")},goog.string.Const.from=function(e){return new goog.string.Const(goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_,e)},goog.string.Const.TYPE_MARKER_={},goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_={},goog.string.Const.EMPTY=goog.string.Const.from(""),goog.html.SafeScript=function(){this.privateDoNotAccessOrElseSafeScriptWrappedValue_="",this.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeScript.prototype.implementsGoogStringTypedString=!0,goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeScript.fromConstant=function(e){return 0===(e=goog.string.Const.unwrap(e)).length?goog.html.SafeScript.EMPTY:goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeScript.fromConstantAndArgs=function(e,t){for(var r=[],n=1;n<arguments.length;n++)r.push(goog.html.SafeScript.stringify_(arguments[n]));return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse("("+goog.string.Const.unwrap(e)+")("+r.join(", ")+");")},goog.html.SafeScript.fromJson=function(e){return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(goog.html.SafeScript.stringify_(e))},goog.html.SafeScript.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeScriptWrappedValue_.toString()},goog.DEBUG&&(goog.html.SafeScript.prototype.toString=function(){return"SafeScript{"+this.privateDoNotAccessOrElseSafeScriptWrappedValue_+"}"}),goog.html.SafeScript.unwrap=function(e){return goog.html.SafeScript.unwrapTrustedScript(e).toString()},goog.html.SafeScript.unwrapTrustedScript=function(e){return e instanceof goog.html.SafeScript&&e.constructor===goog.html.SafeScript&&e.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeScriptWrappedValue_:(goog.asserts.fail("expected object of type SafeScript, got '"+e+"' of type "+goog.typeOf(e)),"type_error:SafeScript")},goog.html.SafeScript.stringify_=function(e){return JSON.stringify(e).replace(/</g,"\\x3c")},goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse=function(e){return(new goog.html.SafeScript).initSecurityPrivateDoNotAccessOrElse_(e)},goog.html.SafeScript.prototype.initSecurityPrivateDoNotAccessOrElse_=function(e){return this.privateDoNotAccessOrElseSafeScriptWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createScript(e):e,this},goog.html.SafeScript.EMPTY=goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(""),goog.fs={},goog.fs.url={},goog.fs.url.createObjectUrl=function(e){return goog.fs.url.getUrlObject_().createObjectURL(e)},goog.fs.url.revokeObjectUrl=function(e){goog.fs.url.getUrlObject_().revokeObjectURL(e)},goog.fs.url.UrlObject_=function(){},goog.fs.url.UrlObject_.prototype.createObjectURL=function(e){},goog.fs.url.UrlObject_.prototype.revokeObjectURL=function(e){},goog.fs.url.getUrlObject_=function(){var e=goog.fs.url.findUrlObject_();if(null!=e)return e;throw Error("This browser doesn't seem to support blob URLs")},goog.fs.url.findUrlObject_=function(){return void 0!==goog.global.URL&&void 0!==goog.global.URL.createObjectURL?goog.global.URL:void 0!==goog.global.webkitURL&&void 0!==goog.global.webkitURL.createObjectURL?goog.global.webkitURL:void 0!==goog.global.createObjectURL?goog.global:null},goog.fs.url.browserSupportsObjectUrls=function(){return null!=goog.fs.url.findUrlObject_()},goog.fs.blob={},goog.fs.blob.getBlob=function(e){var t=goog.global.BlobBuilder||goog.global.WebKitBlobBuilder;if(void 0!==t){t=new t;for(var r=0;r<arguments.length;r++)t.append(arguments[r]);return t.getBlob()}return goog.fs.blob.getBlobWithProperties(goog.array.toArray(arguments))},goog.fs.blob.getBlobWithProperties=function(e,t,r){var n=goog.global.BlobBuilder||goog.global.WebKitBlobBuilder;if(void 0!==n){n=new n;for(var o=0;o<e.length;o++)n.append(e[o],r);return n.getBlob(t)}if(void 0!==goog.global.Blob)return n={},t&&(n.type=t),r&&(n.endings=r),new Blob(e,n);throw Error("This browser doesn't seem to support creating Blobs")},goog.i18n={},goog.i18n.bidi={},goog.i18n.bidi.FORCE_RTL=!1,goog.i18n.bidi.IS_RTL=goog.i18n.bidi.FORCE_RTL||("ar"==goog.LOCALE.substring(0,2).toLowerCase()||"fa"==goog.LOCALE.substring(0,2).toLowerCase()||"he"==goog.LOCALE.substring(0,2).toLowerCase()||"iw"==goog.LOCALE.substring(0,2).toLowerCase()||"ps"==goog.LOCALE.substring(0,2).toLowerCase()||"sd"==goog.LOCALE.substring(0,2).toLowerCase()||"ug"==goog.LOCALE.substring(0,2).toLowerCase()||"ur"==goog.LOCALE.substring(0,2).toLowerCase()||"yi"==goog.LOCALE.substring(0,2).toLowerCase())&&(2==goog.LOCALE.length||"-"==goog.LOCALE.substring(2,3)||"_"==goog.LOCALE.substring(2,3))||3<=goog.LOCALE.length&&"ckb"==goog.LOCALE.substring(0,3).toLowerCase()&&(3==goog.LOCALE.length||"-"==goog.LOCALE.substring(3,4)||"_"==goog.LOCALE.substring(3,4))||7<=goog.LOCALE.length&&("-"==goog.LOCALE.substring(2,3)||"_"==goog.LOCALE.substring(2,3))&&("adlm"==goog.LOCALE.substring(3,7).toLowerCase()||"arab"==goog.LOCALE.substring(3,7).toLowerCase()||"hebr"==goog.LOCALE.substring(3,7).toLowerCase()||"nkoo"==goog.LOCALE.substring(3,7).toLowerCase()||"rohg"==goog.LOCALE.substring(3,7).toLowerCase()||"thaa"==goog.LOCALE.substring(3,7).toLowerCase())||8<=goog.LOCALE.length&&("-"==goog.LOCALE.substring(3,4)||"_"==goog.LOCALE.substring(3,4))&&("adlm"==goog.LOCALE.substring(4,8).toLowerCase()||"arab"==goog.LOCALE.substring(4,8).toLowerCase()||"hebr"==goog.LOCALE.substring(4,8).toLowerCase()||"nkoo"==goog.LOCALE.substring(4,8).toLowerCase()||"rohg"==goog.LOCALE.substring(4,8).toLowerCase()||"thaa"==goog.LOCALE.substring(4,8).toLowerCase()),goog.i18n.bidi.Format={LRE:"‪",RLE:"‫",PDF:"‬",LRM:"‎",RLM:"‏"},goog.i18n.bidi.Dir={LTR:1,RTL:-1,NEUTRAL:0},goog.i18n.bidi.RIGHT="right",goog.i18n.bidi.LEFT="left",goog.i18n.bidi.I18N_RIGHT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.LEFT:goog.i18n.bidi.RIGHT,goog.i18n.bidi.I18N_LEFT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,goog.i18n.bidi.toDir=function(e,t){return"number"==typeof e?0<e?goog.i18n.bidi.Dir.LTR:0>e?goog.i18n.bidi.Dir.RTL:t?null:goog.i18n.bidi.Dir.NEUTRAL:null==e?null:e?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.ltrChars_="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ऀ-῿‎Ⰰ-\ud801\ud804-\ud839\ud83c-\udbff豈-﬜︀-﹯﻽-￿",goog.i18n.bidi.rtlChars_="֑-ۯۺ-ࣿ‏\ud802-\ud803\ud83a-\ud83bיִ-﷿ﹰ-ﻼ",goog.i18n.bidi.htmlSkipReg_=/<[^>]*>|&[^;]+;/g,goog.i18n.bidi.stripHtmlIfNeeded_=function(e,t){return t?e.replace(goog.i18n.bidi.htmlSkipReg_,""):e},goog.i18n.bidi.rtlCharReg_=new RegExp("["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.ltrCharReg_=new RegExp("["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.hasAnyRtl=function(e,t){return goog.i18n.bidi.rtlCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.hasRtlChar=goog.i18n.bidi.hasAnyRtl,goog.i18n.bidi.hasAnyLtr=function(e,t){return goog.i18n.bidi.ltrCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.ltrRe_=new RegExp("^["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlRe_=new RegExp("^["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.isRtlChar=function(e){return goog.i18n.bidi.rtlRe_.test(e)},goog.i18n.bidi.isLtrChar=function(e){return goog.i18n.bidi.ltrRe_.test(e)},goog.i18n.bidi.isNeutralChar=function(e){return!goog.i18n.bidi.isLtrChar(e)&&!goog.i18n.bidi.isRtlChar(e)},goog.i18n.bidi.ltrDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.rtlChars_+"]*["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.ltrChars_+"]*["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.startsWithRtl=function(e,t){return goog.i18n.bidi.rtlDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isRtlText=goog.i18n.bidi.startsWithRtl,goog.i18n.bidi.startsWithLtr=function(e,t){return goog.i18n.bidi.ltrDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isLtrText=goog.i18n.bidi.startsWithLtr,goog.i18n.bidi.isRequiredLtrRe_=/^http:\/\/.*/,goog.i18n.bidi.isNeutralText=function(e,t){return e=goog.i18n.bidi.stripHtmlIfNeeded_(e,t),goog.i18n.bidi.isRequiredLtrRe_.test(e)||!goog.i18n.bidi.hasAnyLtr(e)&&!goog.i18n.bidi.hasAnyRtl(e)},goog.i18n.bidi.ltrExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.ltrChars_+"][^"+goog.i18n.bidi.rtlChars_+"]*$"),goog.i18n.bidi.rtlExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.rtlChars_+"][^"+goog.i18n.bidi.ltrChars_+"]*$"),goog.i18n.bidi.endsWithLtr=function(e,t){return goog.i18n.bidi.ltrExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isLtrExitText=goog.i18n.bidi.endsWithLtr,goog.i18n.bidi.endsWithRtl=function(e,t){return goog.i18n.bidi.rtlExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isRtlExitText=goog.i18n.bidi.endsWithRtl,goog.i18n.bidi.rtlLocalesRe_=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i,goog.i18n.bidi.isRtlLanguage=function(e){return goog.i18n.bidi.rtlLocalesRe_.test(e)},goog.i18n.bidi.bracketGuardTextRe_=/(\(.*?\)+)|(\[.*?\]+)|(\{.*?\}+)|(<.*?>+)/g,goog.i18n.bidi.guardBracketInText=function(e,t){return t=(void 0===t?goog.i18n.bidi.hasAnyRtl(e):t)?goog.i18n.bidi.Format.RLM:goog.i18n.bidi.Format.LRM,e.replace(goog.i18n.bidi.bracketGuardTextRe_,t+"$&"+t)},goog.i18n.bidi.enforceRtlInHtml=function(e){return"<"==e.charAt(0)?e.replace(/<\w+/,"$& dir=rtl"):"\n<span dir=rtl>"+e+"</span>"},goog.i18n.bidi.enforceRtlInText=function(e){return goog.i18n.bidi.Format.RLE+e+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.enforceLtrInHtml=function(e){return"<"==e.charAt(0)?e.replace(/<\w+/,"$& dir=ltr"):"\n<span dir=ltr>"+e+"</span>"},goog.i18n.bidi.enforceLtrInText=function(e){return goog.i18n.bidi.Format.LRE+e+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.dimensionsRe_=/:\s*([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)/g,goog.i18n.bidi.leftRe_=/left/gi,goog.i18n.bidi.rightRe_=/right/gi,goog.i18n.bidi.tempRe_=/%%%%/g,goog.i18n.bidi.mirrorCSS=function(e){return e.replace(goog.i18n.bidi.dimensionsRe_,":$1 $4 $3 $2").replace(goog.i18n.bidi.leftRe_,"%%%%").replace(goog.i18n.bidi.rightRe_,goog.i18n.bidi.LEFT).replace(goog.i18n.bidi.tempRe_,goog.i18n.bidi.RIGHT)},goog.i18n.bidi.doubleQuoteSubstituteRe_=/([\u0591-\u05f2])"/g,goog.i18n.bidi.singleQuoteSubstituteRe_=/([\u0591-\u05f2])'/g,goog.i18n.bidi.normalizeHebrewQuote=function(e){return e.replace(goog.i18n.bidi.doubleQuoteSubstituteRe_,"$1״").replace(goog.i18n.bidi.singleQuoteSubstituteRe_,"$1׳")},goog.i18n.bidi.wordSeparatorRe_=/\s+/,goog.i18n.bidi.hasNumeralsRe_=/[\d\u06f0-\u06f9]/,goog.i18n.bidi.rtlDetectionThreshold_=.4,goog.i18n.bidi.estimateDirection=function(e,t){var r=0,n=0,o=!1;for(e=goog.i18n.bidi.stripHtmlIfNeeded_(e,t).split(goog.i18n.bidi.wordSeparatorRe_),t=0;t<e.length;t++){var a=e[t];goog.i18n.bidi.startsWithRtl(a)?(r++,n++):goog.i18n.bidi.isRequiredLtrRe_.test(a)?o=!0:goog.i18n.bidi.hasAnyLtr(a)?n++:goog.i18n.bidi.hasNumeralsRe_.test(a)&&(o=!0)}return 0==n?o?goog.i18n.bidi.Dir.LTR:goog.i18n.bidi.Dir.NEUTRAL:r/n>goog.i18n.bidi.rtlDetectionThreshold_?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.detectRtlDirectionality=function(e,t){return goog.i18n.bidi.estimateDirection(e,t)==goog.i18n.bidi.Dir.RTL},goog.i18n.bidi.setElementDirAndAlign=function(e,t){e&&(t=goog.i18n.bidi.toDir(t))&&(e.style.textAlign=t==goog.i18n.bidi.Dir.RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,e.dir=t==goog.i18n.bidi.Dir.RTL?"rtl":"ltr")},goog.i18n.bidi.setElementDirByTextDirectionality=function(e,t){switch(goog.i18n.bidi.estimateDirection(t)){case goog.i18n.bidi.Dir.LTR:e.dir="ltr";break;case goog.i18n.bidi.Dir.RTL:e.dir="rtl";break;default:e.removeAttribute("dir")}},goog.i18n.bidi.DirectionalString=function(){},goog.html.TrustedResourceUrl=function(e,t){this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_=e===goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_&&t||"",this.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.TrustedResourceUrl.prototype.implementsGoogStringTypedString=!0,goog.html.TrustedResourceUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_.toString()},goog.html.TrustedResourceUrl.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.TrustedResourceUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR},goog.html.TrustedResourceUrl.prototype.cloneWithParams=function(e,t){var r=goog.html.TrustedResourceUrl.unwrap(this),n=(r=goog.html.TrustedResourceUrl.URL_PARAM_PARSER_.exec(r))[3]||"";return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(r[1]+goog.html.TrustedResourceUrl.stringifyParams_("?",r[2]||"",e)+goog.html.TrustedResourceUrl.stringifyParams_("#",n,t))},goog.DEBUG&&(goog.html.TrustedResourceUrl.prototype.toString=function(){return"TrustedResourceUrl{"+this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_+"}"}),goog.html.TrustedResourceUrl.unwrap=function(e){return goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(e).toString()},goog.html.TrustedResourceUrl.unwrapTrustedScriptURL=function(e){return e instanceof goog.html.TrustedResourceUrl&&e.constructor===goog.html.TrustedResourceUrl&&e.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_:(goog.asserts.fail("expected object of type TrustedResourceUrl, got '"+e+"' of type "+goog.typeOf(e)),"type_error:TrustedResourceUrl")},goog.html.TrustedResourceUrl.format=function(e,t){var r=goog.string.Const.unwrap(e);if(!goog.html.TrustedResourceUrl.BASE_URL_.test(r))throw Error("Invalid TrustedResourceUrl format: "+r);return e=r.replace(goog.html.TrustedResourceUrl.FORMAT_MARKER_,(function(e,n){if(!Object.prototype.hasOwnProperty.call(t,n))throw Error('Found marker, "'+n+'", in format string, "'+r+'", but no valid label mapping found in args: '+JSON.stringify(t));return(e=t[n])instanceof goog.string.Const?goog.string.Const.unwrap(e):encodeURIComponent(String(e))})),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.TrustedResourceUrl.FORMAT_MARKER_=/%{(\w+)}/g,goog.html.TrustedResourceUrl.BASE_URL_=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,goog.html.TrustedResourceUrl.URL_PARAM_PARSER_=/^([^?#]*)(\?[^#]*)?(#[\s\S]*)?/,goog.html.TrustedResourceUrl.formatWithParams=function(e,t,r,n){return goog.html.TrustedResourceUrl.format(e,t).cloneWithParams(r,n)},goog.html.TrustedResourceUrl.fromConstant=function(e){return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(e))},goog.html.TrustedResourceUrl.fromConstants=function(e){for(var t="",r=0;r<e.length;r++)t+=goog.string.Const.unwrap(e[r]);return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.TrustedResourceUrl.fromSafeScript=function(e){return e=goog.fs.blob.getBlobWithProperties([goog.html.SafeScript.unwrap(e)],"text/javascript"),e=goog.fs.url.createObjectUrl(e),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse=function(e){return e=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createScriptURL(e):e,new goog.html.TrustedResourceUrl(goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_,e)},goog.html.TrustedResourceUrl.stringifyParams_=function(e,t,r){if(null==r)return t;if("string"==typeof r)return r?e+encodeURIComponent(r):"";for(var n in r){var o=r[n];o=Array.isArray(o)?o:[o];for(var a=0;a<o.length;a++){var i=o[a];null!=i&&(t||(t=e),t+=(t.length>e.length?"&":"")+encodeURIComponent(n)+"="+encodeURIComponent(String(i)))}}return t},goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_={},goog.string.internal={},goog.string.internal.startsWith=function(e,t){return 0==e.lastIndexOf(t,0)},goog.string.internal.endsWith=function(e,t){var r=e.length-t.length;return 0<=r&&e.indexOf(t,r)==r},goog.string.internal.caseInsensitiveStartsWith=function(e,t){return 0==goog.string.internal.caseInsensitiveCompare(t,e.substr(0,t.length))},goog.string.internal.caseInsensitiveEndsWith=function(e,t){return 0==goog.string.internal.caseInsensitiveCompare(t,e.substr(e.length-t.length,t.length))},goog.string.internal.caseInsensitiveEquals=function(e,t){return e.toLowerCase()==t.toLowerCase()},goog.string.internal.isEmptyOrWhitespace=function(e){return/^[\s\xa0]*$/.test(e)},goog.string.internal.trim=goog.TRUSTED_SITE&&String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},goog.string.internal.caseInsensitiveCompare=function(e,t){return(e=String(e).toLowerCase())<(t=String(t).toLowerCase())?-1:e==t?0:1},goog.string.internal.newLineToBr=function(e,t){return e.replace(/(\r\n|\r|\n)/g,t?"<br />":"<br>")},goog.string.internal.htmlEscape=function(e,t){if(t)e=e.replace(goog.string.internal.AMP_RE_,"&amp;").replace(goog.string.internal.LT_RE_,"&lt;").replace(goog.string.internal.GT_RE_,"&gt;").replace(goog.string.internal.QUOT_RE_,"&quot;").replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;").replace(goog.string.internal.NULL_RE_,"&#0;");else{if(!goog.string.internal.ALL_RE_.test(e))return e;-1!=e.indexOf("&")&&(e=e.replace(goog.string.internal.AMP_RE_,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(goog.string.internal.LT_RE_,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(goog.string.internal.GT_RE_,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(goog.string.internal.QUOT_RE_,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(goog.string.internal.NULL_RE_,"&#0;"))}return e},goog.string.internal.AMP_RE_=/&/g,goog.string.internal.LT_RE_=/</g,goog.string.internal.GT_RE_=/>/g,goog.string.internal.QUOT_RE_=/"/g,goog.string.internal.SINGLE_QUOTE_RE_=/'/g,goog.string.internal.NULL_RE_=/\x00/g,goog.string.internal.ALL_RE_=/[\x00&<>"']/,goog.string.internal.whitespaceEscape=function(e,t){return goog.string.internal.newLineToBr(e.replace(/  /g," &#160;"),t)},goog.string.internal.contains=function(e,t){return-1!=e.indexOf(t)},goog.string.internal.caseInsensitiveContains=function(e,t){return goog.string.internal.contains(e.toLowerCase(),t.toLowerCase())},goog.string.internal.compareVersions=function(e,t){var r=0;e=goog.string.internal.trim(String(e)).split("."),t=goog.string.internal.trim(String(t)).split(".");for(var n=Math.max(e.length,t.length),o=0;0==r&&o<n;o++){var a=e[o]||"",i=t[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],0==a[0].length&&0==i[0].length)break;r=0==a[1].length?0:parseInt(a[1],10);var s=0==i[1].length?0:parseInt(i[1],10);r=goog.string.internal.compareElements_(r,s)||goog.string.internal.compareElements_(0==a[2].length,0==i[2].length)||goog.string.internal.compareElements_(a[2],i[2]),a=a[3],i=i[3]}while(0==r)}return r},goog.string.internal.compareElements_=function(e,t){return e<t?-1:e>t?1:0},goog.html.SafeUrl=function(e,t){this.privateDoNotAccessOrElseSafeUrlWrappedValue_=e===goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_&&t||"",this.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeUrl.INNOCUOUS_STRING="about:invalid#zClosurez",goog.html.SafeUrl.prototype.implementsGoogStringTypedString=!0,goog.html.SafeUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeUrlWrappedValue_.toString()},goog.html.SafeUrl.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.SafeUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR},goog.DEBUG&&(goog.html.SafeUrl.prototype.toString=function(){return"SafeUrl{"+this.privateDoNotAccessOrElseSafeUrlWrappedValue_+"}"}),goog.html.SafeUrl.unwrap=function(e){return e instanceof goog.html.SafeUrl&&e.constructor===goog.html.SafeUrl&&e.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeUrlWrappedValue_:(goog.asserts.fail("expected object of type SafeUrl, got '"+e+"' of type "+goog.typeOf(e)),"type_error:SafeUrl")},goog.html.SafeUrl.fromConstant=function(e){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(e))},goog.html.SAFE_MIME_TYPE_PATTERN_=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,goog.html.SafeUrl.isSafeMimeType=function(e){return goog.html.SAFE_MIME_TYPE_PATTERN_.test(e)},goog.html.SafeUrl.fromBlob=function(e){return e=goog.html.SafeUrl.isSafeMimeType(e.type)?goog.fs.url.createObjectUrl(e):goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.fromMediaSource=function(e){return goog.asserts.assert("MediaSource"in goog.global,"No support for MediaSource"),e=e instanceof MediaSource?goog.fs.url.createObjectUrl(e):goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.DATA_URL_PATTERN_=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,goog.html.SafeUrl.fromDataUrl=function(e){var t=(e=e.replace(/(%0A|%0D)/g,"")).match(goog.html.DATA_URL_PATTERN_);return t=t&&goog.html.SafeUrl.isSafeMimeType(t[1]),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t?e:goog.html.SafeUrl.INNOCUOUS_STRING)},goog.html.SafeUrl.fromTelUrl=function(e){return goog.string.internal.caseInsensitiveStartsWith(e,"tel:")||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SIP_URL_PATTERN_=/^sip[s]?:[+a-z0-9_.!$%&'*\/=^`{|}~-]+@([a-z0-9-]+\.)+[a-z0-9]{2,63}$/i,goog.html.SafeUrl.fromSipUrl=function(e){return goog.html.SIP_URL_PATTERN_.test(decodeURIComponent(e))||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.fromFacebookMessengerUrl=function(e){return goog.string.internal.caseInsensitiveStartsWith(e,"fb-messenger://share")||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.fromWhatsAppUrl=function(e){return goog.string.internal.caseInsensitiveStartsWith(e,"whatsapp://send")||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.fromSmsUrl=function(e){return goog.string.internal.caseInsensitiveStartsWith(e,"sms:")&&goog.html.SafeUrl.isSmsUrlBodyValid_(e)||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.isSmsUrlBodyValid_=function(e){var t=e.indexOf("#");if(0<t&&(e=e.substring(0,t)),!(t=e.match(/[?&]body=/gi)))return!0;if(1<t.length)return!1;if(!(e=e.match(/[?&]body=([^&]*)/)[1]))return!0;try{decodeURIComponent(e)}catch(e){return!1}return/^(?:[a-z0-9\-_.~]|%[0-9a-f]{2})+$/i.test(e)},goog.html.SafeUrl.fromSshUrl=function(e){return goog.string.internal.caseInsensitiveStartsWith(e,"ssh://")||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.sanitizeChromeExtensionUrl=function(e,t){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^chrome-extension:\/\/([^\/]+)\//,e,t)},goog.html.SafeUrl.sanitizeFirefoxExtensionUrl=function(e,t){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^moz-extension:\/\/([^\/]+)\//,e,t)},goog.html.SafeUrl.sanitizeEdgeExtensionUrl=function(e,t){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^ms-browser-extension:\/\/([^\/]+)\//,e,t)},goog.html.SafeUrl.sanitizeExtensionUrl_=function(e,t,r){return(e=e.exec(t))?(e=e[1],-1==(r instanceof goog.string.Const?[goog.string.Const.unwrap(r)]:r.map((function(e){return goog.string.Const.unwrap(e)}))).indexOf(e)&&(t=goog.html.SafeUrl.INNOCUOUS_STRING)):t=goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.SafeUrl.fromTrustedResourceUrl=function(e){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.html.TrustedResourceUrl.unwrap(e))},goog.html.SAFE_URL_PATTERN_=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i,goog.html.SafeUrl.SAFE_URL_PATTERN=goog.html.SAFE_URL_PATTERN_,goog.html.SafeUrl.sanitize=function(e){return e instanceof goog.html.SafeUrl?e:(e="object"==typeof e&&e.implementsGoogStringTypedString?e.getTypedStringValue():String(e),goog.html.SAFE_URL_PATTERN_.test(e)||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e))},goog.html.SafeUrl.sanitizeAssertUnchanged=function(e,t){return e instanceof goog.html.SafeUrl?e:(e="object"==typeof e&&e.implementsGoogStringTypedString?e.getTypedStringValue():String(e),t&&/^data:/i.test(e)&&(t=goog.html.SafeUrl.fromDataUrl(e)).getTypedStringValue()==e?t:(goog.asserts.assert(goog.html.SAFE_URL_PATTERN_.test(e),"%s does not match the safe URL pattern",e)||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)))},goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse=function(e){return new goog.html.SafeUrl(goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_,e)},goog.html.SafeUrl.ABOUT_BLANK=goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse("about:blank"),goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_={},goog.html.SafeStyle=function(){this.privateDoNotAccessOrElseSafeStyleWrappedValue_="",this.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeStyle.prototype.implementsGoogStringTypedString=!0,goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeStyle.fromConstant=function(e){return 0===(e=goog.string.Const.unwrap(e)).length?goog.html.SafeStyle.EMPTY:(goog.asserts.assert(goog.string.internal.endsWith(e,";"),"Last character of style string is not ';': "+e),goog.asserts.assert(goog.string.internal.contains(e,":"),"Style string must contain at least one ':', to specify a \"name: value\" pair: "+e),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(e))},goog.html.SafeStyle.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_},goog.DEBUG&&(goog.html.SafeStyle.prototype.toString=function(){return"SafeStyle{"+this.privateDoNotAccessOrElseSafeStyleWrappedValue_+"}"}),goog.html.SafeStyle.unwrap=function(e){return e instanceof goog.html.SafeStyle&&e.constructor===goog.html.SafeStyle&&e.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeStyleWrappedValue_:(goog.asserts.fail("expected object of type SafeStyle, got '"+e+"' of type "+goog.typeOf(e)),"type_error:SafeStyle")},goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse=function(e){return(new goog.html.SafeStyle).initSecurityPrivateDoNotAccessOrElse_(e)},goog.html.SafeStyle.prototype.initSecurityPrivateDoNotAccessOrElse_=function(e){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_=e,this},goog.html.SafeStyle.EMPTY=goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(""),goog.html.SafeStyle.INNOCUOUS_STRING="zClosurez",goog.html.SafeStyle.create=function(e){var t,r="";for(t in e){if(!/^[-_a-zA-Z0-9]+$/.test(t))throw Error("Name allows only [-_a-zA-Z0-9], got: "+t);var n=e[t];null!=n&&(r+=t+":"+(n=Array.isArray(n)?goog.array.map(n,goog.html.SafeStyle.sanitizePropertyValue_).join(" "):goog.html.SafeStyle.sanitizePropertyValue_(n))+";")}return r?goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(r):goog.html.SafeStyle.EMPTY},goog.html.SafeStyle.sanitizePropertyValue_=function(e){if(e instanceof goog.html.SafeUrl)return'url("'+goog.html.SafeUrl.unwrap(e).replace(/</g,"%3c").replace(/[\\"]/g,"\\$&")+'")';if(e=e instanceof goog.string.Const?goog.string.Const.unwrap(e):goog.html.SafeStyle.sanitizePropertyValueString_(String(e)),/[{;}]/.test(e))throw new goog.asserts.AssertionError("Value does not allow [{;}], got: %s.",[e]);return e},goog.html.SafeStyle.sanitizePropertyValueString_=function(e){var t=e.replace(goog.html.SafeStyle.FUNCTIONS_RE_,"$1").replace(goog.html.SafeStyle.FUNCTIONS_RE_,"$1").replace(goog.html.SafeStyle.URL_RE_,"url");return goog.html.SafeStyle.VALUE_RE_.test(t)?goog.html.SafeStyle.COMMENT_RE_.test(e)?(goog.asserts.fail("String value disallows comments, got: "+e),goog.html.SafeStyle.INNOCUOUS_STRING):goog.html.SafeStyle.hasBalancedQuotes_(e)?goog.html.SafeStyle.hasBalancedSquareBrackets_(e)?goog.html.SafeStyle.sanitizeUrl_(e):(goog.asserts.fail("String value requires balanced square brackets and one identifier per pair of brackets, got: "+e),goog.html.SafeStyle.INNOCUOUS_STRING):(goog.asserts.fail("String value requires balanced quotes, got: "+e),goog.html.SafeStyle.INNOCUOUS_STRING):(goog.asserts.fail("String value allows only "+goog.html.SafeStyle.VALUE_ALLOWED_CHARS_+" and simple functions, got: "+e),goog.html.SafeStyle.INNOCUOUS_STRING)},goog.html.SafeStyle.hasBalancedQuotes_=function(e){for(var t=!0,r=!0,n=0;n<e.length;n++){var o=e.charAt(n);"'"==o&&r?t=!t:'"'==o&&t&&(r=!r)}return t&&r},goog.html.SafeStyle.hasBalancedSquareBrackets_=function(e){for(var t=!0,r=/^[-_a-zA-Z0-9]$/,n=0;n<e.length;n++){var o=e.charAt(n);if("]"==o){if(t)return!1;t=!0}else if("["==o){if(!t)return!1;t=!1}else if(!t&&!r.test(o))return!1}return t},goog.html.SafeStyle.VALUE_ALLOWED_CHARS_="[-,.\"'%_!# a-zA-Z0-9\\[\\]]",goog.html.SafeStyle.VALUE_RE_=new RegExp("^"+goog.html.SafeStyle.VALUE_ALLOWED_CHARS_+"+$"),goog.html.SafeStyle.URL_RE_=/\b(url\([ \t\n]*)('[ -&(-\[\]-~]*'|"[ !#-\[\]-~]*"|[!#-&*-\[\]-~]*)([ \t\n]*\))/g,goog.html.SafeStyle.ALLOWED_FUNCTIONS_="calc cubic-bezier fit-content hsl hsla linear-gradient matrix minmax repeat rgb rgba (rotate|scale|translate)(X|Y|Z|3d)?".split(" "),goog.html.SafeStyle.FUNCTIONS_RE_=new RegExp("\\b("+goog.html.SafeStyle.ALLOWED_FUNCTIONS_.join("|")+")\\([-+*/0-9a-z.%\\[\\], ]+\\)","g"),goog.html.SafeStyle.COMMENT_RE_=/\/\*/,goog.html.SafeStyle.sanitizeUrl_=function(e){return e.replace(goog.html.SafeStyle.URL_RE_,(function(e,t,r,n){var o="";return r=r.replace(/^(['"])(.*)\1$/,(function(e,t,r){return o=t,r})),e=goog.html.SafeUrl.sanitize(r).getTypedStringValue(),t+o+e+o+n}))},goog.html.SafeStyle.concat=function(e){var t="",r=function(e){Array.isArray(e)?goog.array.forEach(e,r):t+=goog.html.SafeStyle.unwrap(e)};return goog.array.forEach(arguments,r),t?goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(t):goog.html.SafeStyle.EMPTY},goog.html.SafeStyleSheet=function(){this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_="",this.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeStyleSheet.prototype.implementsGoogStringTypedString=!0,goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeStyleSheet.createRule=function(e,t){if(goog.string.internal.contains(e,"<"))throw Error("Selector does not allow '<', got: "+e);var r=e.replace(/('|")((?!\1)[^\r\n\f\\]|\\[\s\S])*\1/g,"");if(!/^[-_a-zA-Z0-9#.:* ,>+~[\]()=^$|]+$/.test(r))throw Error("Selector allows only [-_a-zA-Z0-9#.:* ,>+~[\\]()=^$|] and strings, got: "+e);if(!goog.html.SafeStyleSheet.hasBalancedBrackets_(r))throw Error("() and [] in selector must be balanced, got: "+e);return t instanceof goog.html.SafeStyle||(t=goog.html.SafeStyle.create(t)),e=e+"{"+goog.html.SafeStyle.unwrap(t).replace(/</g,"\\3C ")+"}",goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeStyleSheet.hasBalancedBrackets_=function(e){for(var t={"(":")","[":"]"},r=[],n=0;n<e.length;n++){var o=e[n];if(t[o])r.push(t[o]);else if(goog.object.contains(t,o)&&r.pop()!=o)return!1}return 0==r.length},goog.html.SafeStyleSheet.concat=function(e){var t="",r=function(e){Array.isArray(e)?goog.array.forEach(e,r):t+=goog.html.SafeStyleSheet.unwrap(e)};return goog.array.forEach(arguments,r),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(t)},goog.html.SafeStyleSheet.fromConstant=function(e){return 0===(e=goog.string.Const.unwrap(e)).length?goog.html.SafeStyleSheet.EMPTY:(goog.asserts.assert(!goog.string.internal.contains(e,"<"),"Forbidden '<' character in style sheet string: "+e),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(e))},goog.html.SafeStyleSheet.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_},goog.DEBUG&&(goog.html.SafeStyleSheet.prototype.toString=function(){return"SafeStyleSheet{"+this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_+"}"}),goog.html.SafeStyleSheet.unwrap=function(e){return e instanceof goog.html.SafeStyleSheet&&e.constructor===goog.html.SafeStyleSheet&&e.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_:(goog.asserts.fail("expected object of type SafeStyleSheet, got '"+e+"' of type "+goog.typeOf(e)),"type_error:SafeStyleSheet")},goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse=function(e){return(new goog.html.SafeStyleSheet).initSecurityPrivateDoNotAccessOrElse_(e)},goog.html.SafeStyleSheet.prototype.initSecurityPrivateDoNotAccessOrElse_=function(e){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_=e,this},goog.html.SafeStyleSheet.EMPTY=goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(""),goog.labs={},goog.labs.userAgent={},goog.labs.userAgent.util={},goog.labs.userAgent.util.getNativeUserAgentString_=function(){var e=goog.labs.userAgent.util.getNavigator_();return e&&(e=e.userAgent)?e:""},goog.labs.userAgent.util.getNavigator_=function(){return goog.global.navigator},goog.labs.userAgent.util.userAgent_=goog.labs.userAgent.util.getNativeUserAgentString_(),goog.labs.userAgent.util.setUserAgent=function(e){goog.labs.userAgent.util.userAgent_=e||goog.labs.userAgent.util.getNativeUserAgentString_()},goog.labs.userAgent.util.getUserAgent=function(){return goog.labs.userAgent.util.userAgent_},goog.labs.userAgent.util.matchUserAgent=function(e){var t=goog.labs.userAgent.util.getUserAgent();return goog.string.internal.contains(t,e)},goog.labs.userAgent.util.matchUserAgentIgnoreCase=function(e){var t=goog.labs.userAgent.util.getUserAgent();return goog.string.internal.caseInsensitiveContains(t,e)},goog.labs.userAgent.util.extractVersionTuples=function(e){for(var t,r=/(\w[\w ]+)\/([^\s]+)\s*(?:\((.*?)\))?/g,n=[];t=r.exec(e);)n.push([t[1],t[2],t[3]||void 0]);return n},goog.labs.userAgent.browser={},goog.labs.userAgent.browser.matchOpera_=function(){return goog.labs.userAgent.util.matchUserAgent("Opera")},goog.labs.userAgent.browser.matchIE_=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.browser.matchEdgeHtml_=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.browser.matchEdgeChromium_=function(){return goog.labs.userAgent.util.matchUserAgent("Edg/")},goog.labs.userAgent.browser.matchOperaChromium_=function(){return goog.labs.userAgent.util.matchUserAgent("OPR")},goog.labs.userAgent.browser.matchFirefox_=function(){return goog.labs.userAgent.util.matchUserAgent("Firefox")||goog.labs.userAgent.util.matchUserAgent("FxiOS")},goog.labs.userAgent.browser.matchSafari_=function(){return goog.labs.userAgent.util.matchUserAgent("Safari")&&!(goog.labs.userAgent.browser.matchChrome_()||goog.labs.userAgent.browser.matchCoast_()||goog.labs.userAgent.browser.matchOpera_()||goog.labs.userAgent.browser.matchEdgeHtml_()||goog.labs.userAgent.browser.matchEdgeChromium_()||goog.labs.userAgent.browser.matchOperaChromium_()||goog.labs.userAgent.browser.matchFirefox_()||goog.labs.userAgent.browser.isSilk()||goog.labs.userAgent.util.matchUserAgent("Android"))},goog.labs.userAgent.browser.matchCoast_=function(){return goog.labs.userAgent.util.matchUserAgent("Coast")},goog.labs.userAgent.browser.matchIosWebview_=function(){return(goog.labs.userAgent.util.matchUserAgent("iPad")||goog.labs.userAgent.util.matchUserAgent("iPhone"))&&!goog.labs.userAgent.browser.matchSafari_()&&!goog.labs.userAgent.browser.matchChrome_()&&!goog.labs.userAgent.browser.matchCoast_()&&!goog.labs.userAgent.browser.matchFirefox_()&&goog.labs.userAgent.util.matchUserAgent("AppleWebKit")},goog.labs.userAgent.browser.matchChrome_=function(){return(goog.labs.userAgent.util.matchUserAgent("Chrome")||goog.labs.userAgent.util.matchUserAgent("CriOS"))&&!goog.labs.userAgent.browser.matchEdgeHtml_()},goog.labs.userAgent.browser.matchAndroidBrowser_=function(){return goog.labs.userAgent.util.matchUserAgent("Android")&&!(goog.labs.userAgent.browser.isChrome()||goog.labs.userAgent.browser.isFirefox()||goog.labs.userAgent.browser.isOpera()||goog.labs.userAgent.browser.isSilk())},goog.labs.userAgent.browser.isOpera=goog.labs.userAgent.browser.matchOpera_,goog.labs.userAgent.browser.isIE=goog.labs.userAgent.browser.matchIE_,goog.labs.userAgent.browser.isEdge=goog.labs.userAgent.browser.matchEdgeHtml_,goog.labs.userAgent.browser.isEdgeChromium=goog.labs.userAgent.browser.matchEdgeChromium_,goog.labs.userAgent.browser.isOperaChromium=goog.labs.userAgent.browser.matchOperaChromium_,goog.labs.userAgent.browser.isFirefox=goog.labs.userAgent.browser.matchFirefox_,goog.labs.userAgent.browser.isSafari=goog.labs.userAgent.browser.matchSafari_,goog.labs.userAgent.browser.isCoast=goog.labs.userAgent.browser.matchCoast_,goog.labs.userAgent.browser.isIosWebview=goog.labs.userAgent.browser.matchIosWebview_,goog.labs.userAgent.browser.isChrome=goog.labs.userAgent.browser.matchChrome_,goog.labs.userAgent.browser.isAndroidBrowser=goog.labs.userAgent.browser.matchAndroidBrowser_,goog.labs.userAgent.browser.isSilk=function(){return goog.labs.userAgent.util.matchUserAgent("Silk")},goog.labs.userAgent.browser.getVersion=function(){function e(e){return e=goog.array.find(e,n),r[e]||""}var t=goog.labs.userAgent.util.getUserAgent();if(goog.labs.userAgent.browser.isIE())return goog.labs.userAgent.browser.getIEVersion_(t);t=goog.labs.userAgent.util.extractVersionTuples(t);var r={};goog.array.forEach(t,(function(e){r[e[0]]=e[1]}));var n=goog.partial(goog.object.containsKey,r);return goog.labs.userAgent.browser.isOpera()?e(["Version","Opera"]):goog.labs.userAgent.browser.isEdge()?e(["Edge"]):goog.labs.userAgent.browser.isEdgeChromium()?e(["Edg"]):goog.labs.userAgent.browser.isChrome()?e(["Chrome","CriOS","HeadlessChrome"]):(t=t[2])&&t[1]||""},goog.labs.userAgent.browser.isVersionOrHigher=function(e){return 0<=goog.string.internal.compareVersions(goog.labs.userAgent.browser.getVersion(),e)},goog.labs.userAgent.browser.getIEVersion_=function(e){var t=/rv: *([\d\.]*)/.exec(e);if(t&&t[1])return t[1];t="";var r=/MSIE +([\d\.]+)/.exec(e);if(r&&r[1])if(e=/Trident\/(\d.\d)/.exec(e),"7.0"==r[1])if(e&&e[1])switch(e[1]){case"4.0":t="8.0";break;case"5.0":t="9.0";break;case"6.0":t="10.0";break;case"7.0":t="11.0"}else t="7.0";else t=r[1];return t},goog.html.SafeHtml=function(){this.privateDoNotAccessOrElseSafeHtmlWrappedValue_="",this.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_,this.dir_=null},goog.html.SafeHtml.ENABLE_ERROR_MESSAGES=goog.DEBUG,goog.html.SafeHtml.SUPPORT_STYLE_ATTRIBUTE=!0,goog.html.SafeHtml.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.SafeHtml.prototype.getDirection=function(){return this.dir_},goog.html.SafeHtml.prototype.implementsGoogStringTypedString=!0,goog.html.SafeHtml.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_.toString()},goog.DEBUG&&(goog.html.SafeHtml.prototype.toString=function(){return"SafeHtml{"+this.privateDoNotAccessOrElseSafeHtmlWrappedValue_+"}"}),goog.html.SafeHtml.unwrap=function(e){return goog.html.SafeHtml.unwrapTrustedHTML(e).toString()},goog.html.SafeHtml.unwrapTrustedHTML=function(e){return e instanceof goog.html.SafeHtml&&e.constructor===goog.html.SafeHtml&&e.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeHtmlWrappedValue_:(goog.asserts.fail("expected object of type SafeHtml, got '"+e+"' of type "+goog.typeOf(e)),"type_error:SafeHtml")},goog.html.SafeHtml.htmlEscape=function(e){if(e instanceof goog.html.SafeHtml)return e;var t="object"==typeof e,r=null;return t&&e.implementsGoogI18nBidiDirectionalString&&(r=e.getDirection()),e=t&&e.implementsGoogStringTypedString?e.getTypedStringValue():String(e),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.htmlEscape(e),r)},goog.html.SafeHtml.htmlEscapePreservingNewlines=function(e){return e instanceof goog.html.SafeHtml?e:(e=goog.html.SafeHtml.htmlEscape(e),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.newLineToBr(goog.html.SafeHtml.unwrap(e)),e.getDirection()))},goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces=function(e){return e instanceof goog.html.SafeHtml?e:(e=goog.html.SafeHtml.htmlEscape(e),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.whitespaceEscape(goog.html.SafeHtml.unwrap(e)),e.getDirection()))},goog.html.SafeHtml.from=goog.html.SafeHtml.htmlEscape,goog.html.SafeHtml.comment=function(e){return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("\x3c!--"+goog.string.internal.htmlEscape(e)+"--\x3e",null)},goog.html.SafeHtml.VALID_NAMES_IN_TAG_=/^[a-zA-Z0-9-]+$/,goog.html.SafeHtml.URL_ATTRIBUTES_={action:!0,cite:!0,data:!0,formaction:!0,href:!0,manifest:!0,poster:!0,src:!0},goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_={APPLET:!0,BASE:!0,EMBED:!0,IFRAME:!0,LINK:!0,MATH:!0,META:!0,OBJECT:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0},goog.html.SafeHtml.create=function(e,t,r){return goog.html.SafeHtml.verifyTagName(String(e)),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse(String(e),t,r)},goog.html.SafeHtml.verifyTagName=function(e){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(e))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?"Invalid tag name <"+e+">.":"");if(e.toUpperCase()in goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?"Tag name <"+e+"> is not allowed for SafeHtml.":"")},goog.html.SafeHtml.createIframe=function(e,t,r,n){e&&goog.html.TrustedResourceUrl.unwrap(e);var o={};return o.src=e||null,o.srcdoc=t&&goog.html.SafeHtml.unwrap(t),e=goog.html.SafeHtml.combineAttributes(o,{sandbox:""},r),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",e,n)},goog.html.SafeHtml.createSandboxIframe=function(e,t,r,n){if(!goog.html.SafeHtml.canUseSandboxIframe())throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?"The browser does not support sandboxed iframes.":"");var o={};return o.src=e?goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(e)):null,o.srcdoc=t||null,o.sandbox="",e=goog.html.SafeHtml.combineAttributes(o,{},r),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",e,n)},goog.html.SafeHtml.canUseSandboxIframe=function(){return goog.global.HTMLIFrameElement&&"sandbox"in goog.global.HTMLIFrameElement.prototype},goog.html.SafeHtml.createScriptSrc=function(e,t){return goog.html.TrustedResourceUrl.unwrap(e),e=goog.html.SafeHtml.combineAttributes({src:e},{},t),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script",e)},goog.html.SafeHtml.createScript=function(e,t){for(var r in t){var n=r.toLowerCase();if("language"==n||"src"==n||"text"==n||"type"==n)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Cannot set "'+n+'" attribute':"")}for(r="",e=goog.array.concat(e),n=0;n<e.length;n++)r+=goog.html.SafeScript.unwrap(e[n]);return e=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(r,goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script",t,e)},goog.html.SafeHtml.createStyle=function(e,t){t=goog.html.SafeHtml.combineAttributes({type:"text/css"},{},t);var r="";e=goog.array.concat(e);for(var n=0;n<e.length;n++)r+=goog.html.SafeStyleSheet.unwrap(e[n]);return e=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(r,goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("style",t,e)},goog.html.SafeHtml.createMetaRefresh=function(e,t){return e=goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(e)),(goog.labs.userAgent.browser.isIE()||goog.labs.userAgent.browser.isEdge())&&goog.string.internal.contains(e,";")&&(e="'"+e.replace(/'/g,"%27")+"'"),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("meta",{"http-equiv":"refresh",content:(t||0)+"; url="+e})},goog.html.SafeHtml.getAttrNameAndValue_=function(e,t,r){if(r instanceof goog.string.Const)r=goog.string.Const.unwrap(r);else if("style"==t.toLowerCase()){if(!goog.html.SafeHtml.SUPPORT_STYLE_ATTRIBUTE)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "style" not supported.':"");r=goog.html.SafeHtml.getStyleValue_(r)}else{if(/^on/i.test(t))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "'+t+'" requires goog.string.Const value, "'+r+'" given.':"");if(t.toLowerCase()in goog.html.SafeHtml.URL_ATTRIBUTES_)if(r instanceof goog.html.TrustedResourceUrl)r=goog.html.TrustedResourceUrl.unwrap(r);else if(r instanceof goog.html.SafeUrl)r=goog.html.SafeUrl.unwrap(r);else{if("string"!=typeof r)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "'+t+'" on tag "'+e+'" requires goog.html.SafeUrl, goog.string.Const, or string, value "'+r+'" given.':"");r=goog.html.SafeUrl.sanitize(r).getTypedStringValue()}}return r.implementsGoogStringTypedString&&(r=r.getTypedStringValue()),goog.asserts.assert("string"==typeof r||"number"==typeof r,"String or number value expected, got "+typeof r+" with value: "+r),t+'="'+goog.string.internal.htmlEscape(String(r))+'"'},goog.html.SafeHtml.getStyleValue_=function(e){if(!goog.isObject(e))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'The "style" attribute requires goog.html.SafeStyle or map of style properties, '+typeof e+" given: "+e:"");return e instanceof goog.html.SafeStyle||(e=goog.html.SafeStyle.create(e)),goog.html.SafeStyle.unwrap(e)},goog.html.SafeHtml.createWithDir=function(e,t,r,n){return(t=goog.html.SafeHtml.create(t,r,n)).dir_=e,t},goog.html.SafeHtml.join=function(e,t){var r=(e=goog.html.SafeHtml.htmlEscape(e)).getDirection(),n=[],o=function(e){Array.isArray(e)?goog.array.forEach(e,o):(e=goog.html.SafeHtml.htmlEscape(e),n.push(goog.html.SafeHtml.unwrap(e)),e=e.getDirection(),r==goog.i18n.bidi.Dir.NEUTRAL?r=e:e!=goog.i18n.bidi.Dir.NEUTRAL&&r!=e&&(r=null))};return goog.array.forEach(t,o),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(n.join(goog.html.SafeHtml.unwrap(e)),r)},goog.html.SafeHtml.concat=function(e){return goog.html.SafeHtml.join(goog.html.SafeHtml.EMPTY,Array.prototype.slice.call(arguments))},goog.html.SafeHtml.concatWithDir=function(e,t){var r=goog.html.SafeHtml.concat(goog.array.slice(arguments,1));return r.dir_=e,r},goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse=function(e,t){return(new goog.html.SafeHtml).initSecurityPrivateDoNotAccessOrElse_(e,t)},goog.html.SafeHtml.prototype.initSecurityPrivateDoNotAccessOrElse_=function(e,t){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createHTML(e):e,this.dir_=t,this},goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse=function(e,t,r){var n=null,o="<"+e+goog.html.SafeHtml.stringifyAttributes(e,t);return null==r?r=[]:Array.isArray(r)||(r=[r]),goog.dom.tags.isVoidTag(e.toLowerCase())?(goog.asserts.assert(!r.length,"Void tag <"+e+"> does not allow content."),o+=">"):(n=goog.html.SafeHtml.concat(r),o+=">"+goog.html.SafeHtml.unwrap(n)+"</"+e+">",n=n.getDirection()),(e=t&&t.dir)&&(n=/^(ltr|rtl|auto)$/i.test(e)?goog.i18n.bidi.Dir.NEUTRAL:null),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(o,n)},goog.html.SafeHtml.stringifyAttributes=function(e,t){var r="";if(t)for(var n in t){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(n))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Invalid attribute name "'+n+'".':"");var o=t[n];null!=o&&(r+=" "+goog.html.SafeHtml.getAttrNameAndValue_(e,n,o))}return r},goog.html.SafeHtml.combineAttributes=function(e,t,r){var n,o={};for(n in e)goog.asserts.assert(n.toLowerCase()==n,"Must be lower case"),o[n]=e[n];for(n in t)goog.asserts.assert(n.toLowerCase()==n,"Must be lower case"),o[n]=t[n];if(r)for(n in r){var a=n.toLowerCase();if(a in e)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Cannot override "'+a+'" attribute, got "'+n+'" with value "'+r[n]+'"':"");a in t&&delete o[a],o[n]=r[n]}return o},goog.html.SafeHtml.DOCTYPE_HTML=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<!DOCTYPE html>",goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.EMPTY=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("",goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.BR=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<br>",goog.i18n.bidi.Dir.NEUTRAL),goog.html.uncheckedconversions={},goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract=function(e,t,r){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(t,r||null)},goog.html.uncheckedconversions.safeScriptFromStringKnownToSatisfyTypeContract=function(e,t){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(t)},goog.html.uncheckedconversions.safeStyleFromStringKnownToSatisfyTypeContract=function(e,t){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(t)},goog.html.uncheckedconversions.safeStyleSheetFromStringKnownToSatisfyTypeContract=function(e,t){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(t)},goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract=function(e,t){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.uncheckedconversions.trustedResourceUrlFromStringKnownToSatisfyTypeContract=function(e,t){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(t)},goog.dom.safe={},goog.dom.safe.InsertAdjacentHtmlPosition={AFTERBEGIN:"afterbegin",AFTEREND:"afterend",BEFOREBEGIN:"beforebegin",BEFOREEND:"beforeend"},goog.dom.safe.insertAdjacentHtml=function(e,t,r){e.insertAdjacentHTML(t,goog.html.SafeHtml.unwrapTrustedHTML(r))},goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_={MATH:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0},goog.dom.safe.isInnerHtmlCleanupRecursive_=goog.functions.cacheReturnValue((function(){if(goog.DEBUG&&"undefined"==typeof document)return!1;var e=document.createElement("div"),t=document.createElement("div");return t.appendChild(document.createElement("div")),e.appendChild(t),!(goog.DEBUG&&!e.firstChild||(t=e.firstChild.firstChild,e.innerHTML=goog.html.SafeHtml.unwrapTrustedHTML(goog.html.SafeHtml.EMPTY),t.parentElement))})),goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse=function(e,t){if(goog.dom.safe.isInnerHtmlCleanupRecursive_())for(;e.lastChild;)e.removeChild(e.lastChild);e.innerHTML=goog.html.SafeHtml.unwrapTrustedHTML(t)},goog.dom.safe.setInnerHtml=function(e,t){if(goog.asserts.ENABLE_ASSERTS){var r=e.tagName.toUpperCase();if(goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_[r])throw Error("goog.dom.safe.setInnerHtml cannot be used to set content of "+e.tagName+".")}goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse(e,t)},goog.dom.safe.setOuterHtml=function(e,t){e.outerHTML=goog.html.SafeHtml.unwrapTrustedHTML(t)},goog.dom.safe.setFormElementAction=function(e,t){t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),goog.dom.asserts.assertIsHTMLFormElement(e).action=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setButtonFormAction=function(e,t){t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),goog.dom.asserts.assertIsHTMLButtonElement(e).formAction=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setInputFormAction=function(e,t){t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),goog.dom.asserts.assertIsHTMLInputElement(e).formAction=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setStyle=function(e,t){e.style.cssText=goog.html.SafeStyle.unwrap(t)},goog.dom.safe.documentWrite=function(e,t){e.write(goog.html.SafeHtml.unwrapTrustedHTML(t))},goog.dom.safe.setAnchorHref=function(e,t){goog.dom.asserts.assertIsHTMLAnchorElement(e),t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),e.href=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setImageSrc=function(e,t){if(goog.dom.asserts.assertIsHTMLImageElement(e),!(t instanceof goog.html.SafeUrl)){var r=/^data:image\//i.test(t);t=goog.html.SafeUrl.sanitizeAssertUnchanged(t,r)}e.src=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setAudioSrc=function(e,t){if(goog.dom.asserts.assertIsHTMLAudioElement(e),!(t instanceof goog.html.SafeUrl)){var r=/^data:audio\//i.test(t);t=goog.html.SafeUrl.sanitizeAssertUnchanged(t,r)}e.src=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setVideoSrc=function(e,t){if(goog.dom.asserts.assertIsHTMLVideoElement(e),!(t instanceof goog.html.SafeUrl)){var r=/^data:video\//i.test(t);t=goog.html.SafeUrl.sanitizeAssertUnchanged(t,r)}e.src=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setEmbedSrc=function(e,t){goog.dom.asserts.assertIsHTMLEmbedElement(e),e.src=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(t)},goog.dom.safe.setFrameSrc=function(e,t){goog.dom.asserts.assertIsHTMLFrameElement(e),e.src=goog.html.TrustedResourceUrl.unwrap(t)},goog.dom.safe.setIframeSrc=function(e,t){goog.dom.asserts.assertIsHTMLIFrameElement(e),e.src=goog.html.TrustedResourceUrl.unwrap(t)},goog.dom.safe.setIframeSrcdoc=function(e,t){goog.dom.asserts.assertIsHTMLIFrameElement(e),e.srcdoc=goog.html.SafeHtml.unwrapTrustedHTML(t)},goog.dom.safe.setLinkHrefAndRel=function(e,t,r){goog.dom.asserts.assertIsHTMLLinkElement(e),e.rel=r,goog.string.internal.caseInsensitiveContains(r,"stylesheet")?(goog.asserts.assert(t instanceof goog.html.TrustedResourceUrl,'URL must be TrustedResourceUrl because "rel" contains "stylesheet"'),e.href=goog.html.TrustedResourceUrl.unwrap(t)):e.href=t instanceof goog.html.TrustedResourceUrl?goog.html.TrustedResourceUrl.unwrap(t):t instanceof goog.html.SafeUrl?goog.html.SafeUrl.unwrap(t):goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitizeAssertUnchanged(t))},goog.dom.safe.setObjectData=function(e,t){goog.dom.asserts.assertIsHTMLObjectElement(e),e.data=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(t)},goog.dom.safe.setScriptSrc=function(e,t){goog.dom.asserts.assertIsHTMLScriptElement(e),e.src=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(t),(t=goog.getScriptNonce())&&e.setAttribute("nonce",t)},goog.dom.safe.setScriptContent=function(e,t){goog.dom.asserts.assertIsHTMLScriptElement(e),e.text=goog.html.SafeScript.unwrapTrustedScript(t),(t=goog.getScriptNonce())&&e.setAttribute("nonce",t)},goog.dom.safe.setLocationHref=function(e,t){goog.dom.asserts.assertIsLocation(e),t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),e.href=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.assignLocation=function(e,t){goog.dom.asserts.assertIsLocation(e),t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),e.assign(goog.html.SafeUrl.unwrap(t))},goog.dom.safe.replaceLocation=function(e,t){t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),e.replace(goog.html.SafeUrl.unwrap(t))},goog.dom.safe.openInWindow=function(e,t,r,n,o){return e=e instanceof goog.html.SafeUrl?e:goog.html.SafeUrl.sanitizeAssertUnchanged(e),t=t||goog.global,r=r instanceof goog.string.Const?goog.string.Const.unwrap(r):r||"",t.open(goog.html.SafeUrl.unwrap(e),r,n,o)},goog.dom.safe.parseFromStringHtml=function(e,t){return goog.dom.safe.parseFromString(e,t,"text/html")},goog.dom.safe.parseFromString=function(e,t,r){return e.parseFromString(goog.html.SafeHtml.unwrapTrustedHTML(t),r)},goog.dom.safe.createImageFromBlob=function(e){if(!/^image\/.*/g.test(e.type))throw Error("goog.dom.safe.createImageFromBlob only accepts MIME type image/.*.");var t=goog.global.URL.createObjectURL(e);return(e=new goog.global.Image).onload=function(){goog.global.URL.revokeObjectURL(t)},goog.dom.safe.setImageSrc(e,goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Image blob URL."),t)),e},goog.string.DETECT_DOUBLE_ESCAPING=!1,goog.string.FORCE_NON_DOM_HTML_UNESCAPING=!1,goog.string.Unicode={NBSP:" "},goog.string.startsWith=goog.string.internal.startsWith,goog.string.endsWith=goog.string.internal.endsWith,goog.string.caseInsensitiveStartsWith=goog.string.internal.caseInsensitiveStartsWith,goog.string.caseInsensitiveEndsWith=goog.string.internal.caseInsensitiveEndsWith,goog.string.caseInsensitiveEquals=goog.string.internal.caseInsensitiveEquals,goog.string.subs=function(e,t){for(var r=e.split("%s"),n="",o=Array.prototype.slice.call(arguments,1);o.length&&1<r.length;)n+=r.shift()+o.shift();return n+r.join("%s")},goog.string.collapseWhitespace=function(e){return e.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")},goog.string.isEmptyOrWhitespace=goog.string.internal.isEmptyOrWhitespace,goog.string.isEmptyString=function(e){return 0==e.length},goog.string.isEmpty=goog.string.isEmptyOrWhitespace,goog.string.isEmptyOrWhitespaceSafe=function(e){return goog.string.isEmptyOrWhitespace(goog.string.makeSafe(e))},goog.string.isEmptySafe=goog.string.isEmptyOrWhitespaceSafe,goog.string.isBreakingWhitespace=function(e){return!/[^\t\n\r ]/.test(e)},goog.string.isAlpha=function(e){return!/[^a-zA-Z]/.test(e)},goog.string.isNumeric=function(e){return!/[^0-9]/.test(e)},goog.string.isAlphaNumeric=function(e){return!/[^a-zA-Z0-9]/.test(e)},goog.string.isSpace=function(e){return" "==e},goog.string.isUnicodeChar=function(e){return 1==e.length&&" "<=e&&"~">=e||""<=e&&"�">=e},goog.string.stripNewlines=function(e){return e.replace(/(\r\n|\r|\n)+/g," ")},goog.string.canonicalizeNewlines=function(e){return e.replace(/(\r\n|\r|\n)/g,"\n")},goog.string.normalizeWhitespace=function(e){return e.replace(/\xa0|\s/g," ")},goog.string.normalizeSpaces=function(e){return e.replace(/\xa0|[ \t]+/g," ")},goog.string.collapseBreakingSpaces=function(e){return e.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")},goog.string.trim=goog.string.internal.trim,goog.string.trimLeft=function(e){return e.replace(/^[\s\xa0]+/,"")},goog.string.trimRight=function(e){return e.replace(/[\s\xa0]+$/,"")},goog.string.caseInsensitiveCompare=goog.string.internal.caseInsensitiveCompare,goog.string.numberAwareCompare_=function(e,t,r){if(e==t)return 0;if(!e)return-1;if(!t)return 1;for(var n=e.toLowerCase().match(r),o=t.toLowerCase().match(r),a=Math.min(n.length,o.length),i=0;i<a;i++){r=n[i];var s=o[i];if(r!=s)return e=parseInt(r,10),!isNaN(e)&&(t=parseInt(s,10),!isNaN(t)&&e-t)?e-t:r<s?-1:1}return n.length!=o.length?n.length-o.length:e<t?-1:1},goog.string.intAwareCompare=function(e,t){return goog.string.numberAwareCompare_(e,t,/\d+|\D+/g)},goog.string.floatAwareCompare=function(e,t){return goog.string.numberAwareCompare_(e,t,/\d+|\.\d+|\D+/g)},goog.string.numerateCompare=goog.string.floatAwareCompare,goog.string.urlEncode=function(e){return encodeURIComponent(String(e))},goog.string.urlDecode=function(e){return decodeURIComponent(e.replace(/\+/g," "))},goog.string.newLineToBr=goog.string.internal.newLineToBr,goog.string.htmlEscape=function(e,t){return e=goog.string.internal.htmlEscape(e,t),goog.string.DETECT_DOUBLE_ESCAPING&&(e=e.replace(goog.string.E_RE_,"&#101;")),e},goog.string.E_RE_=/e/g,goog.string.unescapeEntities=function(e){return goog.string.contains(e,"&")?!goog.string.FORCE_NON_DOM_HTML_UNESCAPING&&"document"in goog.global?goog.string.unescapeEntitiesUsingDom_(e):goog.string.unescapePureXmlEntities_(e):e},goog.string.unescapeEntitiesWithDocument=function(e,t){return goog.string.contains(e,"&")?goog.string.unescapeEntitiesUsingDom_(e,t):e},goog.string.unescapeEntitiesUsingDom_=function(e,t){var r={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},n=t?t.createElement("div"):goog.global.document.createElement("div");return e.replace(goog.string.HTML_ENTITY_PATTERN_,(function(e,t){var o=r[e];return o||("#"==t.charAt(0)&&(t=Number("0"+t.substr(1)),isNaN(t)||(o=String.fromCharCode(t))),o||(goog.dom.safe.setInnerHtml(n,goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Single HTML entity."),e+" ")),o=n.firstChild.nodeValue.slice(0,-1)),r[e]=o)}))},goog.string.unescapePureXmlEntities_=function(e){return e.replace(/&([^;]+);/g,(function(e,t){switch(t){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:return"#"!=t.charAt(0)||(t=Number("0"+t.substr(1)),isNaN(t))?e:String.fromCharCode(t)}}))},goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g,goog.string.whitespaceEscape=function(e,t){return goog.string.newLineToBr(e.replace(/  /g," &#160;"),t)},goog.string.preserveSpaces=function(e){return e.replace(/(^|[\n ]) /g,"$1"+goog.string.Unicode.NBSP)},goog.string.stripQuotes=function(e,t){for(var r=t.length,n=0;n<r;n++){var o=1==r?t:t.charAt(n);if(e.charAt(0)==o&&e.charAt(e.length-1)==o)return e.substring(1,e.length-1)}return e},goog.string.truncate=function(e,t,r){return r&&(e=goog.string.unescapeEntities(e)),e.length>t&&(e=e.substring(0,t-3)+"..."),r&&(e=goog.string.htmlEscape(e)),e},goog.string.truncateMiddle=function(e,t,r,n){if(r&&(e=goog.string.unescapeEntities(e)),n&&e.length>t){n>t&&(n=t);var o=e.length-n;e=e.substring(0,t-n)+"..."+e.substring(o)}else e.length>t&&(n=Math.floor(t/2),o=e.length-n,e=e.substring(0,n+t%2)+"..."+e.substring(o));return r&&(e=goog.string.htmlEscape(e)),e},goog.string.specialEscapeChars_={"\0":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\x0B",'"':'\\"',"\\":"\\\\","<":"\\u003C"},goog.string.jsEscapeCache_={"'":"\\'"},goog.string.quote=function(e){e=String(e);for(var t=['"'],r=0;r<e.length;r++){var n=e.charAt(r),o=n.charCodeAt(0);t[r+1]=goog.string.specialEscapeChars_[n]||(31<o&&127>o?n:goog.string.escapeChar(n))}return t.push('"'),t.join("")},goog.string.escapeString=function(e){for(var t=[],r=0;r<e.length;r++)t[r]=goog.string.escapeChar(e.charAt(r));return t.join("")},goog.string.escapeChar=function(e){if(e in goog.string.jsEscapeCache_)return goog.string.jsEscapeCache_[e];if(e in goog.string.specialEscapeChars_)return goog.string.jsEscapeCache_[e]=goog.string.specialEscapeChars_[e];var t=e.charCodeAt(0);if(31<t&&127>t)var r=e;else 256>t?(r="\\x",(16>t||256<t)&&(r+="0")):(r="\\u",4096>t&&(r+="0")),r+=t.toString(16).toUpperCase();return goog.string.jsEscapeCache_[e]=r},goog.string.contains=goog.string.internal.contains,goog.string.caseInsensitiveContains=goog.string.internal.caseInsensitiveContains,goog.string.countOf=function(e,t){return e&&t?e.split(t).length-1:0},goog.string.removeAt=function(e,t,r){var n=e;return 0<=t&&t<e.length&&0<r&&(n=e.substr(0,t)+e.substr(t+r,e.length-t-r)),n},goog.string.remove=function(e,t){return e.replace(t,"")},goog.string.removeAll=function(e,t){return t=new RegExp(goog.string.regExpEscape(t),"g"),e.replace(t,"")},goog.string.replaceAll=function(e,t,r){return t=new RegExp(goog.string.regExpEscape(t),"g"),e.replace(t,r.replace(/\$/g,"$$$$"))},goog.string.regExpEscape=function(e){return String(e).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},goog.string.repeat=String.prototype.repeat?function(e,t){return e.repeat(t)}:function(e,t){return Array(t+1).join(e)},goog.string.padNumber=function(e,t,r){return-1==(r=(e=void 0!==r?e.toFixed(r):String(e)).indexOf("."))&&(r=e.length),goog.string.repeat("0",Math.max(0,t-r))+e},goog.string.makeSafe=function(e){return null==e?"":String(e)},goog.string.buildString=function(e){return Array.prototype.join.call(arguments,"")},goog.string.getRandomString=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^goog.now()).toString(36)},goog.string.compareVersions=goog.string.internal.compareVersions,goog.string.hashCode=function(e){for(var t=0,r=0;r<e.length;++r)t=31*t+e.charCodeAt(r)>>>0;return t},goog.string.uniqueStringCounter_=2147483648*Math.random()|0,goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++},goog.string.toNumber=function(e){var t=Number(e);return 0==t&&goog.string.isEmptyOrWhitespace(e)?NaN:t},goog.string.isLowerCamelCase=function(e){return/^[a-z]+([A-Z][a-z]*)*$/.test(e)},goog.string.isUpperCamelCase=function(e){return/^([A-Z][a-z]*)+$/.test(e)},goog.string.toCamelCase=function(e){return String(e).replace(/\-([a-z])/g,(function(e,t){return t.toUpperCase()}))},goog.string.toSelectorCase=function(e){return String(e).replace(/([A-Z])/g,"-$1").toLowerCase()},goog.string.toTitleCase=function(e,t){return t="string"==typeof t?goog.string.regExpEscape(t):"\\s",e.replace(new RegExp("(^"+(t?"|["+t+"]+":"")+")([a-z])","g"),(function(e,t,r){return t+r.toUpperCase()}))},goog.string.capitalize=function(e){return String(e.charAt(0)).toUpperCase()+String(e.substr(1)).toLowerCase()},goog.string.parseInt=function(e){return isFinite(e)&&(e=String(e)),"string"==typeof e?/^\s*-?0x/i.test(e)?parseInt(e,16):parseInt(e,10):NaN},goog.string.splitLimit=function(e,t,r){e=e.split(t);for(var n=[];0<r&&e.length;)n.push(e.shift()),r--;return e.length&&n.push(e.join(t)),n},goog.string.lastComponent=function(e,t){if(!t)return e;"string"==typeof t&&(t=[t]);for(var r=-1,n=0;n<t.length;n++)if(""!=t[n]){var o=e.lastIndexOf(t[n]);o>r&&(r=o)}return-1==r?e:e.slice(r+1)},goog.string.editDistance=function(e,t){var r=[],n=[];if(e==t)return 0;if(!e.length||!t.length)return Math.max(e.length,t.length);for(var o=0;o<t.length+1;o++)r[o]=o;for(o=0;o<e.length;o++){n[0]=o+1;for(var a=0;a<t.length;a++)n[a+1]=Math.min(n[a]+1,r[a+1]+1,r[a]+Number(e[o]!=t[a]));for(a=0;a<r.length;a++)r[a]=n[a]}return n[t.length]},goog.labs.userAgent.engine={},goog.labs.userAgent.engine.isPresto=function(){return goog.labs.userAgent.util.matchUserAgent("Presto")},goog.labs.userAgent.engine.isTrident=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.engine.isEdge=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.engine.isWebKit=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("WebKit")&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.isGecko=function(){return goog.labs.userAgent.util.matchUserAgent("Gecko")&&!goog.labs.userAgent.engine.isWebKit()&&!goog.labs.userAgent.engine.isTrident()&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.getVersion=function(){var e=goog.labs.userAgent.util.getUserAgent();if(e){e=goog.labs.userAgent.util.extractVersionTuples(e);var t,r=goog.labs.userAgent.engine.getEngineTuple_(e);if(r)return"Gecko"==r[0]?goog.labs.userAgent.engine.getVersionForKey_(e,"Firefox"):r[1];if((e=e[0])&&(t=e[2])&&(t=/Trident\/([^\s;]+)/.exec(t)))return t[1]}return""},goog.labs.userAgent.engine.getEngineTuple_=function(e){if(!goog.labs.userAgent.engine.isEdge())return e[1];for(var t=0;t<e.length;t++){var r=e[t];if("Edge"==r[0])return r}},goog.labs.userAgent.engine.isVersionOrHigher=function(e){return 0<=goog.string.compareVersions(goog.labs.userAgent.engine.getVersion(),e)},goog.labs.userAgent.engine.getVersionForKey_=function(e,t){return(e=goog.array.find(e,(function(e){return t==e[0]})))&&e[1]||""},goog.labs.userAgent.platform={},goog.labs.userAgent.platform.isAndroid=function(){return goog.labs.userAgent.util.matchUserAgent("Android")},goog.labs.userAgent.platform.isIpod=function(){return goog.labs.userAgent.util.matchUserAgent("iPod")},goog.labs.userAgent.platform.isIphone=function(){return goog.labs.userAgent.util.matchUserAgent("iPhone")&&!goog.labs.userAgent.util.matchUserAgent("iPod")&&!goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIpad=function(){return goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIos=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpad()||goog.labs.userAgent.platform.isIpod()},goog.labs.userAgent.platform.isMacintosh=function(){return goog.labs.userAgent.util.matchUserAgent("Macintosh")},goog.labs.userAgent.platform.isLinux=function(){return goog.labs.userAgent.util.matchUserAgent("Linux")},goog.labs.userAgent.platform.isWindows=function(){return goog.labs.userAgent.util.matchUserAgent("Windows")},goog.labs.userAgent.platform.isChromeOS=function(){return goog.labs.userAgent.util.matchUserAgent("CrOS")},goog.labs.userAgent.platform.isChromecast=function(){return goog.labs.userAgent.util.matchUserAgent("CrKey")},goog.labs.userAgent.platform.isKaiOS=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("KaiOS")},goog.labs.userAgent.platform.getVersion=function(){var e=goog.labs.userAgent.util.getUserAgent(),t="";return goog.labs.userAgent.platform.isWindows()?t=(e=(t=/Windows (?:NT|Phone) ([0-9.]+)/).exec(e))?e[1]:"0.0":goog.labs.userAgent.platform.isIos()?t=(e=(t=/(?:iPhone|iPod|iPad|CPU)\s+OS\s+(\S+)/).exec(e))&&e[1].replace(/_/g,"."):goog.labs.userAgent.platform.isMacintosh()?t=(e=(t=/Mac OS X ([0-9_.]+)/).exec(e))?e[1].replace(/_/g,"."):"10":goog.labs.userAgent.platform.isKaiOS()?t=(e=(t=/(?:KaiOS)\/(\S+)/i).exec(e))&&e[1]:goog.labs.userAgent.platform.isAndroid()?t=(e=(t=/Android\s+([^\);]+)(\)|;)/).exec(e))&&e[1]:goog.labs.userAgent.platform.isChromeOS()&&(t=(e=(t=/(?:CrOS\s+(?:i686|x86_64)\s+([0-9.]+))/).exec(e))&&e[1]),t||""},goog.labs.userAgent.platform.isVersionOrHigher=function(e){return 0<=goog.string.compareVersions(goog.labs.userAgent.platform.getVersion(),e)},goog.reflect={},goog.reflect.object=function(e,t){return t},goog.reflect.objectProperty=function(e,t){return e},goog.reflect.sinkValue=function(e){return goog.reflect.sinkValue[" "](e),e},goog.reflect.sinkValue[" "]=goog.nullFunction,goog.reflect.canAccessProperty=function(e,t){try{return goog.reflect.sinkValue(e[t]),!0}catch(e){}return!1},goog.reflect.cache=function(e,t,r,n){return n=n?n(t):t,Object.prototype.hasOwnProperty.call(e,n)?e[n]:e[n]=r(t)},goog.userAgent={},goog.userAgent.ASSUME_IE=!1,goog.userAgent.ASSUME_EDGE=!1,goog.userAgent.ASSUME_GECKO=!1,goog.userAgent.ASSUME_WEBKIT=!1,goog.userAgent.ASSUME_MOBILE_WEBKIT=!1,goog.userAgent.ASSUME_OPERA=!1,goog.userAgent.ASSUME_ANY_VERSION=!1,goog.userAgent.BROWSER_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_GECKO||goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_OPERA,goog.userAgent.getUserAgentString=function(){return goog.labs.userAgent.util.getUserAgent()},goog.userAgent.getNavigatorTyped=function(){return goog.global.navigator||null},goog.userAgent.getNavigator=function(){return goog.userAgent.getNavigatorTyped()},goog.userAgent.OPERA=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_OPERA:goog.labs.userAgent.browser.isOpera(),goog.userAgent.IE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_IE:goog.labs.userAgent.browser.isIE(),goog.userAgent.EDGE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_EDGE:goog.labs.userAgent.engine.isEdge(),goog.userAgent.EDGE_OR_IE=goog.userAgent.EDGE||goog.userAgent.IE,goog.userAgent.GECKO=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_GECKO:goog.labs.userAgent.engine.isGecko(),goog.userAgent.WEBKIT=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_MOBILE_WEBKIT:goog.labs.userAgent.engine.isWebKit(),goog.userAgent.isMobile_=function(){return goog.userAgent.WEBKIT&&goog.labs.userAgent.util.matchUserAgent("Mobile")},goog.userAgent.MOBILE=goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.isMobile_(),goog.userAgent.SAFARI=goog.userAgent.WEBKIT,goog.userAgent.determinePlatform_=function(){var e=goog.userAgent.getNavigatorTyped();return e&&e.platform||""},goog.userAgent.PLATFORM=goog.userAgent.determinePlatform_(),goog.userAgent.ASSUME_MAC=!1,goog.userAgent.ASSUME_WINDOWS=!1,goog.userAgent.ASSUME_LINUX=!1,goog.userAgent.ASSUME_X11=!1,goog.userAgent.ASSUME_ANDROID=!1,goog.userAgent.ASSUME_IPHONE=!1,goog.userAgent.ASSUME_IPAD=!1,goog.userAgent.ASSUME_IPOD=!1,goog.userAgent.ASSUME_KAIOS=!1,goog.userAgent.PLATFORM_KNOWN_=goog.userAgent.ASSUME_MAC||goog.userAgent.ASSUME_WINDOWS||goog.userAgent.ASSUME_LINUX||goog.userAgent.ASSUME_X11||goog.userAgent.ASSUME_ANDROID||goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD,goog.userAgent.MAC=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_MAC:goog.labs.userAgent.platform.isMacintosh();goog.userAgent.WINDOWS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_WINDOWS:goog.labs.userAgent.platform.isWindows(),goog.userAgent.isLegacyLinux_=function(){return goog.labs.userAgent.platform.isLinux()||goog.labs.userAgent.platform.isChromeOS()},goog.userAgent.LINUX=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_LINUX:goog.userAgent.isLegacyLinux_(),goog.userAgent.isX11_=function(){var e=goog.userAgent.getNavigatorTyped();return!!e&&goog.string.contains(e.appVersion||"","X11")},goog.userAgent.X11=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_X11:goog.userAgent.isX11_(),goog.userAgent.ANDROID=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_ANDROID:goog.labs.userAgent.platform.isAndroid(),goog.userAgent.IPHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE:goog.labs.userAgent.platform.isIphone(),goog.userAgent.IPAD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.IPOD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIpod(),goog.userAgent.IOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIos(),goog.userAgent.KAIOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_KAIOS:goog.labs.userAgent.platform.isKaiOS(),goog.userAgent.determineVersion_=function(){var e="",t=goog.userAgent.getVersionRegexResult_();return t&&(e=t?t[1]:""),goog.userAgent.IE&&null!=(t=goog.userAgent.getDocumentMode_())&&t>parseFloat(e)?String(t):e},goog.userAgent.getVersionRegexResult_=function(){var e=goog.userAgent.getUserAgentString();return goog.userAgent.GECKO?/rv:([^\);]+)(\)|;)/.exec(e):goog.userAgent.EDGE?/Edge\/([\d\.]+)/.exec(e):goog.userAgent.IE?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):goog.userAgent.WEBKIT?/WebKit\/(\S+)/.exec(e):goog.userAgent.OPERA?/(?:Version)[ \/]?(\S+)/.exec(e):void 0},goog.userAgent.getDocumentMode_=function(){var e=goog.global.document;return e?e.documentMode:void 0},goog.userAgent.VERSION=goog.userAgent.determineVersion_(),goog.userAgent.compare=function(e,t){return goog.string.compareVersions(e,t)},goog.userAgent.isVersionOrHigherCache_={},goog.userAgent.isVersionOrHigher=function(e){return goog.userAgent.ASSUME_ANY_VERSION||goog.reflect.cache(goog.userAgent.isVersionOrHigherCache_,e,(function(){return 0<=goog.string.compareVersions(goog.userAgent.VERSION,e)}))},goog.userAgent.isVersion=goog.userAgent.isVersionOrHigher,goog.userAgent.isDocumentModeOrHigher=function(e){return Number(goog.userAgent.DOCUMENT_MODE)>=e},goog.userAgent.isDocumentMode=goog.userAgent.isDocumentModeOrHigher,goog.userAgent.DOCUMENT_MODE=function(){if(goog.global.document&&goog.userAgent.IE)return goog.userAgent.getDocumentMode_()||parseInt(goog.userAgent.VERSION,10)||void 0}(),goog.userAgent.product={},goog.userAgent.product.ASSUME_FIREFOX=!1,goog.userAgent.product.ASSUME_IPHONE=!1,goog.userAgent.product.ASSUME_IPAD=!1,goog.userAgent.product.ASSUME_ANDROID=!1,goog.userAgent.product.ASSUME_CHROME=!1,goog.userAgent.product.ASSUME_SAFARI=!1,goog.userAgent.product.PRODUCT_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_OPERA||goog.userAgent.product.ASSUME_FIREFOX||goog.userAgent.product.ASSUME_IPHONE||goog.userAgent.product.ASSUME_IPAD||goog.userAgent.product.ASSUME_ANDROID||goog.userAgent.product.ASSUME_CHROME||goog.userAgent.product.ASSUME_SAFARI,goog.userAgent.product.OPERA=goog.userAgent.OPERA,goog.userAgent.product.IE=goog.userAgent.IE,goog.userAgent.product.EDGE=goog.userAgent.EDGE,goog.userAgent.product.FIREFOX=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_FIREFOX:goog.labs.userAgent.browser.isFirefox(),goog.userAgent.product.isIphoneOrIpod_=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpod()},goog.userAgent.product.IPHONE=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPHONE:goog.userAgent.product.isIphoneOrIpod_(),goog.userAgent.product.IPAD=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.product.ANDROID=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_ANDROID:goog.labs.userAgent.browser.isAndroidBrowser(),goog.userAgent.product.CHROME=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_CHROME:goog.labs.userAgent.browser.isChrome(),goog.userAgent.product.isSafariDesktop_=function(){return goog.labs.userAgent.browser.isSafari()&&!goog.labs.userAgent.platform.isIos()},goog.userAgent.product.SAFARI=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_SAFARI:goog.userAgent.product.isSafariDesktop_(),goog.crypt.base64={},goog.crypt.base64.DEFAULT_ALPHABET_COMMON_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",goog.crypt.base64.ENCODED_VALS=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_+"+/=",goog.crypt.base64.ENCODED_VALS_WEBSAFE=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_+"-_.",goog.crypt.base64.Alphabet={DEFAULT:0,NO_PADDING:1,WEBSAFE:2,WEBSAFE_DOT_PADDING:3,WEBSAFE_NO_PADDING:4},goog.crypt.base64.paddingChars_="=.",goog.crypt.base64.isPadding_=function(e){return goog.string.contains(goog.crypt.base64.paddingChars_,e)},goog.crypt.base64.byteToCharMaps_={},goog.crypt.base64.charToByteMap_=null,goog.crypt.base64.ASSUME_NATIVE_SUPPORT_=goog.userAgent.GECKO||goog.userAgent.WEBKIT&&!goog.userAgent.product.SAFARI||goog.userAgent.OPERA,goog.crypt.base64.HAS_NATIVE_ENCODE_=goog.crypt.base64.ASSUME_NATIVE_SUPPORT_||"function"==typeof goog.global.btoa,goog.crypt.base64.HAS_NATIVE_DECODE_=goog.crypt.base64.ASSUME_NATIVE_SUPPORT_||!goog.userAgent.product.SAFARI&&!goog.userAgent.IE&&"function"==typeof goog.global.atob,goog.crypt.base64.encodeByteArray=function(e,t){goog.asserts.assert(goog.isArrayLike(e),"encodeByteArray takes an array as a parameter"),void 0===t&&(t=goog.crypt.base64.Alphabet.DEFAULT),goog.crypt.base64.init_(),t=goog.crypt.base64.byteToCharMaps_[t];for(var r=[],n=0;n<e.length;n+=3){var o=e[n],a=n+1<e.length,i=a?e[n+1]:0,s=n+2<e.length,p=s?e[n+2]:0,l=o>>2;o=(3&o)<<4|i>>4,i=(15&i)<<2|p>>6,p&=63,s||(p=64,a||(i=64)),r.push(t[l],t[o],t[i]||"",t[p]||"")}return r.join("")},goog.crypt.base64.encodeString=function(e,t){return goog.crypt.base64.HAS_NATIVE_ENCODE_&&!t?goog.global.btoa(e):goog.crypt.base64.encodeByteArray(goog.crypt.stringToByteArray(e),t)},goog.crypt.base64.decodeString=function(e,t){if(goog.crypt.base64.HAS_NATIVE_DECODE_&&!t)return goog.global.atob(e);var r="";return goog.crypt.base64.decodeStringInternal_(e,(function(e){r+=String.fromCharCode(e)})),r},goog.crypt.base64.decodeStringToByteArray=function(e,t){var r=[];return goog.crypt.base64.decodeStringInternal_(e,(function(e){r.push(e)})),r},goog.crypt.base64.decodeStringToUint8Array=function(e){goog.asserts.assert(!goog.userAgent.IE||goog.userAgent.isVersionOrHigher("10"),"Browser does not support typed arrays");var t=e.length,r=3*t/4;r%3?r=Math.floor(r):goog.crypt.base64.isPadding_(e[t-1])&&(r=goog.crypt.base64.isPadding_(e[t-2])?r-2:r-1);var n=new Uint8Array(r),o=0;return goog.crypt.base64.decodeStringInternal_(e,(function(e){n[o++]=e})),n.subarray(0,o)},goog.crypt.base64.decodeStringInternal_=function(e,t){function r(t){for(;n<e.length;){var r=e.charAt(n++),o=goog.crypt.base64.charToByteMap_[r];if(null!=o)return o;if(!goog.string.isEmptyOrWhitespace(r))throw Error("Unknown base64 encoding at char: "+r)}return t}goog.crypt.base64.init_();for(var n=0;;){var o=r(-1),a=r(0),i=r(64),s=r(64);if(64===s&&-1===o)break;t(o<<2|a>>4),64!=i&&(t(a<<4&240|i>>2),64!=s&&t(i<<6&192|s))}},goog.crypt.base64.init_=function(){if(!goog.crypt.base64.charToByteMap_){goog.crypt.base64.charToByteMap_={};for(var e=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_.split(""),t=["+/=","+/","-_=","-_.","-_"],r=0;5>r;r++){var n=e.concat(t[r].split(""));goog.crypt.base64.byteToCharMaps_[r]=n;for(var o=0;o<n.length;o++){var a=n[o],i=goog.crypt.base64.charToByteMap_[a];void 0===i?goog.crypt.base64.charToByteMap_[a]=o:goog.asserts.assert(i===o)}}}},jspb.utils={},jspb.utils.split64Low=0,jspb.utils.split64High=0,jspb.utils.splitUint64=function(e){var t=e>>>0;e=Math.floor((e-t)/jspb.BinaryConstants.TWO_TO_32)>>>0,jspb.utils.split64Low=t,jspb.utils.split64High=e},jspb.utils.splitInt64=function(e){var t=0>e,r=(e=Math.abs(e))>>>0;e=Math.floor((e-r)/jspb.BinaryConstants.TWO_TO_32),e>>>=0,t&&(e=~e>>>0,4294967295<(r=1+(~r>>>0))&&(r=0,4294967295<++e&&(e=0))),jspb.utils.split64Low=r,jspb.utils.split64High=e},jspb.utils.splitZigzag64=function(e){var t=0>e;e=2*Math.abs(e),jspb.utils.splitUint64(e),e=jspb.utils.split64Low;var r=jspb.utils.split64High;t&&(0==e?0==r?r=e=4294967295:(r--,e=4294967295):e--),jspb.utils.split64Low=e,jspb.utils.split64High=r},jspb.utils.splitFloat32=function(e){var t=0>e?1:0;if(0===(e=t?-e:e))0<1/e?(jspb.utils.split64High=0,jspb.utils.split64Low=0):(jspb.utils.split64High=0,jspb.utils.split64Low=2147483648);else if(isNaN(e))jspb.utils.split64High=0,jspb.utils.split64Low=2147483647;else if(e>jspb.BinaryConstants.FLOAT32_MAX)jspb.utils.split64High=0,jspb.utils.split64Low=(t<<31|2139095040)>>>0;else if(e<jspb.BinaryConstants.FLOAT32_MIN)e=Math.round(e/Math.pow(2,-149)),jspb.utils.split64High=0,jspb.utils.split64Low=(t<<31|e)>>>0;else{var r=Math.floor(Math.log(e)/Math.LN2);e*=Math.pow(2,-r),16777216<=(e=Math.round(e*jspb.BinaryConstants.TWO_TO_23))&&++r,jspb.utils.split64High=0,jspb.utils.split64Low=(t<<31|r+127<<23|8388607&e)>>>0}},jspb.utils.splitFloat64=function(e){var t=0>e?1:0;if(0===(e=t?-e:e))jspb.utils.split64High=0<1/e?0:2147483648,jspb.utils.split64Low=0;else if(isNaN(e))jspb.utils.split64High=2147483647,jspb.utils.split64Low=4294967295;else if(e>jspb.BinaryConstants.FLOAT64_MAX)jspb.utils.split64High=(t<<31|2146435072)>>>0,jspb.utils.split64Low=0;else if(e<jspb.BinaryConstants.FLOAT64_MIN){var r=e/Math.pow(2,-1074);e=r/jspb.BinaryConstants.TWO_TO_32,jspb.utils.split64High=(t<<31|e)>>>0,jspb.utils.split64Low=r>>>0}else{var n=0;if(2<=(r=e))for(;2<=r&&1023>n;)n++,r/=2;else for(;1>r&&-1022<n;)r*=2,n--;e=(r=e*Math.pow(2,-n))*jspb.BinaryConstants.TWO_TO_20&1048575,r=r*jspb.BinaryConstants.TWO_TO_52>>>0,jspb.utils.split64High=(t<<31|n+1023<<20|e)>>>0,jspb.utils.split64Low=r}},jspb.utils.splitHash64=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1),n=e.charCodeAt(2),o=e.charCodeAt(3),a=e.charCodeAt(4),i=e.charCodeAt(5),s=e.charCodeAt(6);e=e.charCodeAt(7),jspb.utils.split64Low=t+(r<<8)+(n<<16)+(o<<24)>>>0,jspb.utils.split64High=a+(i<<8)+(s<<16)+(e<<24)>>>0},jspb.utils.joinUint64=function(e,t){return t*jspb.BinaryConstants.TWO_TO_32+(e>>>0)},jspb.utils.joinInt64=function(e,t){var r=2147483648&t;return r&&(t=~t>>>0,0==(e=1+~e>>>0)&&(t=t+1>>>0)),e=jspb.utils.joinUint64(e,t),r?-e:e},jspb.utils.toZigzag64=function(e,t,r){var n=t>>31;return r(e<<1^n,(t<<1|e>>>31)^n)},jspb.utils.joinZigzag64=function(e,t){return jspb.utils.fromZigzag64(e,t,jspb.utils.joinInt64)},jspb.utils.fromZigzag64=function(e,t,r){var n=-(1&e);return r((e>>>1|t<<31)^n,t>>>1^n)},jspb.utils.joinFloat32=function(e,t){t=2*(e>>31)+1;var r=e>>>23&255;return e&=8388607,255==r?e?NaN:1/0*t:0==r?t*Math.pow(2,-149)*e:t*Math.pow(2,r-150)*(e+Math.pow(2,23))},jspb.utils.joinFloat64=function(e,t){var r=2*(t>>31)+1,n=t>>>20&2047;return e=jspb.BinaryConstants.TWO_TO_32*(1048575&t)+e,2047==n?e?NaN:1/0*r:0==n?r*Math.pow(2,-1074)*e:r*Math.pow(2,n-1075)*(e+jspb.BinaryConstants.TWO_TO_52)},jspb.utils.joinHash64=function(e,t){return String.fromCharCode(e>>>0&255,e>>>8&255,e>>>16&255,e>>>24&255,t>>>0&255,t>>>8&255,t>>>16&255,t>>>24&255)},jspb.utils.DIGITS="0123456789abcdef".split(""),jspb.utils.ZERO_CHAR_CODE_=48,jspb.utils.A_CHAR_CODE_=97,jspb.utils.joinUnsignedDecimalString=function(e,t){function r(e,t){return e=e?String(e):"",t?"0000000".slice(e.length)+e:e}if(2097151>=t)return""+jspb.utils.joinUint64(e,t);var n=(e>>>24|t<<8)>>>0&16777215;return e=(16777215&e)+6777216*n+6710656*(t=t>>16&65535),n+=8147497*t,t*=2,1e7<=e&&(n+=Math.floor(e/1e7),e%=1e7),1e7<=n&&(t+=Math.floor(n/1e7),n%=1e7),r(t,0)+r(n,t)+r(e,1)},jspb.utils.joinSignedDecimalString=function(e,t){var r=2147483648&t;return r&&(t=~t+(0==(e=1+~e>>>0)?1:0)>>>0),e=jspb.utils.joinUnsignedDecimalString(e,t),r?"-"+e:e},jspb.utils.hash64ToDecimalString=function(e,t){jspb.utils.splitHash64(e),e=jspb.utils.split64Low;var r=jspb.utils.split64High;return t?jspb.utils.joinSignedDecimalString(e,r):jspb.utils.joinUnsignedDecimalString(e,r)},jspb.utils.hash64ArrayToDecimalStrings=function(e,t){for(var r=Array(e.length),n=0;n<e.length;n++)r[n]=jspb.utils.hash64ToDecimalString(e[n],t);return r},jspb.utils.decimalStringToHash64=function(e){function t(e,t){for(var r=0;8>r&&(1!==e||0<t);r++)t=e*n[r]+t,n[r]=255&t,t>>>=8}jspb.asserts.assert(0<e.length);var r=!1;"-"===e[0]&&(r=!0,e=e.slice(1));for(var n=[0,0,0,0,0,0,0,0],o=0;o<e.length;o++)t(10,e.charCodeAt(o)-jspb.utils.ZERO_CHAR_CODE_);return r&&(function(){for(var e=0;8>e;e++)n[e]=255&~n[e]}(),t(1,1)),goog.crypt.byteArrayToString(n)},jspb.utils.splitDecimalString=function(e){jspb.utils.splitHash64(jspb.utils.decimalStringToHash64(e))},jspb.utils.toHexDigit_=function(e){return String.fromCharCode(10>e?jspb.utils.ZERO_CHAR_CODE_+e:jspb.utils.A_CHAR_CODE_-10+e)},jspb.utils.fromHexCharCode_=function(e){return e>=jspb.utils.A_CHAR_CODE_?e-jspb.utils.A_CHAR_CODE_+10:e-jspb.utils.ZERO_CHAR_CODE_},jspb.utils.hash64ToHexString=function(e){var t=Array(18);t[0]="0",t[1]="x";for(var r=0;8>r;r++){var n=e.charCodeAt(7-r);t[2*r+2]=jspb.utils.toHexDigit_(n>>4),t[2*r+3]=jspb.utils.toHexDigit_(15&n)}return t.join("")},jspb.utils.hexStringToHash64=function(e){e=e.toLowerCase(),jspb.asserts.assert(18==e.length),jspb.asserts.assert("0"==e[0]),jspb.asserts.assert("x"==e[1]);for(var t="",r=0;8>r;r++){var n=jspb.utils.fromHexCharCode_(e.charCodeAt(2*r+2)),o=jspb.utils.fromHexCharCode_(e.charCodeAt(2*r+3));t=String.fromCharCode(16*n+o)+t}return t},jspb.utils.hash64ToNumber=function(e,t){jspb.utils.splitHash64(e),e=jspb.utils.split64Low;var r=jspb.utils.split64High;return t?jspb.utils.joinInt64(e,r):jspb.utils.joinUint64(e,r)},jspb.utils.numberToHash64=function(e){return jspb.utils.splitInt64(e),jspb.utils.joinHash64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.utils.countVarints=function(e,t,r){for(var n=0,o=t;o<r;o++)n+=e[o]>>7;return r-t-n},jspb.utils.countVarintFields=function(e,t,r,n){var o=0;if(128>(n=8*n+jspb.BinaryConstants.WireType.VARINT))for(;t<r&&e[t++]==n;)for(o++;;){var a=e[t++];if(0==(128&a))break}else for(;t<r;){for(a=n;128<a;){if(e[t]!=(127&a|128))return o;t++,a>>=7}if(e[t++]!=a)break;for(o++;0!=(128&(a=e[t++])););}return o},jspb.utils.countFixedFields_=function(e,t,r,n,o){var a=0;if(128>n)for(;t<r&&e[t++]==n;)a++,t+=o;else for(;t<r;){for(var i=n;128<i;){if(e[t++]!=(127&i|128))return a;i>>=7}if(e[t++]!=i)break;a++,t+=o}return a},jspb.utils.countFixed32Fields=function(e,t,r,n){return jspb.utils.countFixedFields_(e,t,r,8*n+jspb.BinaryConstants.WireType.FIXED32,4)},jspb.utils.countFixed64Fields=function(e,t,r,n){return jspb.utils.countFixedFields_(e,t,r,8*n+jspb.BinaryConstants.WireType.FIXED64,8)},jspb.utils.countDelimitedFields=function(e,t,r,n){var o=0;for(n=8*n+jspb.BinaryConstants.WireType.DELIMITED;t<r;){for(var a=n;128<a;){if(e[t++]!=(127&a|128))return o;a>>=7}if(e[t++]!=a)break;o++;for(var i=0,s=1;i+=(127&(a=e[t++]))*s,s*=128,0!=(128&a););t+=i}return o},jspb.utils.debugBytesToTextFormat=function(e){var t='"';if(e){e=jspb.utils.byteSourceToUint8Array(e);for(var r=0;r<e.length;r++)t+="\\x",16>e[r]&&(t+="0"),t+=e[r].toString(16)}return t+'"'},jspb.utils.debugScalarToTextFormat=function(e){return"string"==typeof e?goog.string.quote(e):e.toString()},jspb.utils.stringToByteArray=function(e){for(var t=new Uint8Array(e.length),r=0;r<e.length;r++){var n=e.charCodeAt(r);if(255<n)throw Error("Conversion error: string contains codepoint outside of byte range");t[r]=n}return t},jspb.utils.byteSourceToUint8Array=function(e){return e.constructor===Uint8Array?e:e.constructor===ArrayBuffer||e.constructor===Array?new Uint8Array(e):e.constructor===String?goog.crypt.base64.decodeStringToUint8Array(e):e instanceof Uint8Array?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):(jspb.asserts.fail("Type not convertible to Uint8Array."),new Uint8Array(0))},jspb.BinaryDecoder=function(e,t,r){this.bytes_=null,this.cursor_=this.end_=this.start_=0,this.error_=!1,e&&this.setBlock(e,t,r)},jspb.BinaryDecoder.instanceCache_=[],jspb.BinaryDecoder.alloc=function(e,t,r){if(jspb.BinaryDecoder.instanceCache_.length){var n=jspb.BinaryDecoder.instanceCache_.pop();return e&&n.setBlock(e,t,r),n}return new jspb.BinaryDecoder(e,t,r)},jspb.BinaryDecoder.prototype.free=function(){this.clear(),100>jspb.BinaryDecoder.instanceCache_.length&&jspb.BinaryDecoder.instanceCache_.push(this)},jspb.BinaryDecoder.prototype.clone=function(){return jspb.BinaryDecoder.alloc(this.bytes_,this.start_,this.end_-this.start_)},jspb.BinaryDecoder.prototype.clear=function(){this.bytes_=null,this.cursor_=this.end_=this.start_=0,this.error_=!1},jspb.BinaryDecoder.prototype.getBuffer=function(){return this.bytes_},jspb.BinaryDecoder.prototype.setBlock=function(e,t,r){this.bytes_=jspb.utils.byteSourceToUint8Array(e),this.start_=void 0!==t?t:0,this.end_=void 0!==r?this.start_+r:this.bytes_.length,this.cursor_=this.start_},jspb.BinaryDecoder.prototype.getEnd=function(){return this.end_},jspb.BinaryDecoder.prototype.setEnd=function(e){this.end_=e},jspb.BinaryDecoder.prototype.reset=function(){this.cursor_=this.start_},jspb.BinaryDecoder.prototype.getCursor=function(){return this.cursor_},jspb.BinaryDecoder.prototype.setCursor=function(e){this.cursor_=e},jspb.BinaryDecoder.prototype.advance=function(e){this.cursor_+=e,jspb.asserts.assert(this.cursor_<=this.end_)},jspb.BinaryDecoder.prototype.atEnd=function(){return this.cursor_==this.end_},jspb.BinaryDecoder.prototype.pastEnd=function(){return this.cursor_>this.end_},jspb.BinaryDecoder.prototype.getError=function(){return this.error_||0>this.cursor_||this.cursor_>this.end_},jspb.BinaryDecoder.prototype.readSplitVarint64=function(e){for(var t=128,r=0,n=0,o=0;4>o&&128<=t;o++)r|=(127&(t=this.bytes_[this.cursor_++]))<<7*o;if(128<=t&&(r|=(127&(t=this.bytes_[this.cursor_++]))<<28,n|=(127&t)>>4),128<=t)for(o=0;5>o&&128<=t;o++)n|=(127&(t=this.bytes_[this.cursor_++]))<<7*o+3;if(128>t)return e(r>>>0,n>>>0);jspb.asserts.fail("Failed to read varint, encoding is invalid."),this.error_=!0},jspb.BinaryDecoder.prototype.readSplitZigzagVarint64=function(e){return this.readSplitVarint64((function(t,r){return jspb.utils.fromZigzag64(t,r,e)}))},jspb.BinaryDecoder.prototype.readSplitFixed64=function(e){var t=this.bytes_,r=this.cursor_;this.cursor_+=8;for(var n=0,o=0,a=r+7;a>=r;a--)n=n<<8|t[a],o=o<<8|t[a+4];return e(n,o)},jspb.BinaryDecoder.prototype.skipVarint=function(){for(;128&this.bytes_[this.cursor_];)this.cursor_++;this.cursor_++},jspb.BinaryDecoder.prototype.unskipVarint=function(e){for(;128<e;)this.cursor_--,e>>>=7;this.cursor_--},jspb.BinaryDecoder.prototype.readUnsignedVarint32=function(){var e=this.bytes_,t=e[this.cursor_+0],r=127&t;return 128>t?(this.cursor_+=1,jspb.asserts.assert(this.cursor_<=this.end_),r):(r|=(127&(t=e[this.cursor_+1]))<<7,128>t?(this.cursor_+=2,jspb.asserts.assert(this.cursor_<=this.end_),r):(r|=(127&(t=e[this.cursor_+2]))<<14,128>t?(this.cursor_+=3,jspb.asserts.assert(this.cursor_<=this.end_),r):(r|=(127&(t=e[this.cursor_+3]))<<21,128>t?(this.cursor_+=4,jspb.asserts.assert(this.cursor_<=this.end_),r):(r|=(15&(t=e[this.cursor_+4]))<<28,128>t?(this.cursor_+=5,jspb.asserts.assert(this.cursor_<=this.end_),r>>>0):(this.cursor_+=5,128<=e[this.cursor_++]&&128<=e[this.cursor_++]&&128<=e[this.cursor_++]&&128<=e[this.cursor_++]&&128<=e[this.cursor_++]&&jspb.asserts.assert(!1),jspb.asserts.assert(this.cursor_<=this.end_),r)))))},jspb.BinaryDecoder.prototype.readSignedVarint32=function(){return~~this.readUnsignedVarint32()},jspb.BinaryDecoder.prototype.readUnsignedVarint32String=function(){return this.readUnsignedVarint32().toString()},jspb.BinaryDecoder.prototype.readSignedVarint32String=function(){return this.readSignedVarint32().toString()},jspb.BinaryDecoder.prototype.readZigzagVarint32=function(){var e=this.readUnsignedVarint32();return e>>>1^-(1&e)},jspb.BinaryDecoder.prototype.readUnsignedVarint64=function(){return this.readSplitVarint64(jspb.utils.joinUint64)},jspb.BinaryDecoder.prototype.readUnsignedVarint64String=function(){return this.readSplitVarint64(jspb.utils.joinUnsignedDecimalString)},jspb.BinaryDecoder.prototype.readSignedVarint64=function(){return this.readSplitVarint64(jspb.utils.joinInt64)},jspb.BinaryDecoder.prototype.readSignedVarint64String=function(){return this.readSplitVarint64(jspb.utils.joinSignedDecimalString)},jspb.BinaryDecoder.prototype.readZigzagVarint64=function(){return this.readSplitVarint64(jspb.utils.joinZigzag64)},jspb.BinaryDecoder.prototype.readZigzagVarintHash64=function(){return this.readSplitZigzagVarint64(jspb.utils.joinHash64)},jspb.BinaryDecoder.prototype.readZigzagVarint64String=function(){return this.readSplitZigzagVarint64(jspb.utils.joinSignedDecimalString)},jspb.BinaryDecoder.prototype.readUint8=function(){var e=this.bytes_[this.cursor_+0];return this.cursor_+=1,jspb.asserts.assert(this.cursor_<=this.end_),e},jspb.BinaryDecoder.prototype.readUint16=function(){var e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1];return this.cursor_+=2,jspb.asserts.assert(this.cursor_<=this.end_),e<<0|t<<8},jspb.BinaryDecoder.prototype.readUint32=function(){var e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1],r=this.bytes_[this.cursor_+2],n=this.bytes_[this.cursor_+3];return this.cursor_+=4,jspb.asserts.assert(this.cursor_<=this.end_),(e<<0|t<<8|r<<16|n<<24)>>>0},jspb.BinaryDecoder.prototype.readUint64=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinUint64(e,t)},jspb.BinaryDecoder.prototype.readUint64String=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinUnsignedDecimalString(e,t)},jspb.BinaryDecoder.prototype.readInt8=function(){var e=this.bytes_[this.cursor_+0];return this.cursor_+=1,jspb.asserts.assert(this.cursor_<=this.end_),e<<24>>24},jspb.BinaryDecoder.prototype.readInt16=function(){var e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1];return this.cursor_+=2,jspb.asserts.assert(this.cursor_<=this.end_),(e<<0|t<<8)<<16>>16},jspb.BinaryDecoder.prototype.readInt32=function(){var e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1],r=this.bytes_[this.cursor_+2],n=this.bytes_[this.cursor_+3];return this.cursor_+=4,jspb.asserts.assert(this.cursor_<=this.end_),e<<0|t<<8|r<<16|n<<24},jspb.BinaryDecoder.prototype.readInt64=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinInt64(e,t)},jspb.BinaryDecoder.prototype.readInt64String=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinSignedDecimalString(e,t)},jspb.BinaryDecoder.prototype.readFloat=function(){var e=this.readUint32();return jspb.utils.joinFloat32(e,0)},jspb.BinaryDecoder.prototype.readDouble=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinFloat64(e,t)},jspb.BinaryDecoder.prototype.readBool=function(){return!!this.bytes_[this.cursor_++]},jspb.BinaryDecoder.prototype.readEnum=function(){return this.readSignedVarint32()},jspb.BinaryDecoder.prototype.readString=function(e){var t=this.bytes_,r=this.cursor_;e=r+e;for(var n=[],o="";r<e;){var a=t[r++];if(128>a)n.push(a);else{if(192>a)continue;if(224>a){var i=t[r++];n.push((31&a)<<6|63&i)}else if(240>a){i=t[r++];var s=t[r++];n.push((15&a)<<12|(63&i)<<6|63&s)}else 248>a&&(a=(7&a)<<18|(63&(i=t[r++]))<<12|(63&(s=t[r++]))<<6|63&t[r++],a-=65536,n.push(55296+(a>>10&1023),56320+(1023&a)))}8192<=n.length&&(o+=String.fromCharCode.apply(null,n),n.length=0)}return o+=goog.crypt.byteArrayToString(n),this.cursor_=r,o},jspb.BinaryDecoder.prototype.readStringWithLength=function(){var e=this.readUnsignedVarint32();return this.readString(e)},jspb.BinaryDecoder.prototype.readBytes=function(e){if(0>e||this.cursor_+e>this.bytes_.length)return this.error_=!0,jspb.asserts.fail("Invalid byte length!"),new Uint8Array(0);var t=this.bytes_.subarray(this.cursor_,this.cursor_+e);return this.cursor_+=e,jspb.asserts.assert(this.cursor_<=this.end_),t},jspb.BinaryDecoder.prototype.readVarintHash64=function(){return this.readSplitVarint64(jspb.utils.joinHash64)},jspb.BinaryDecoder.prototype.readFixedHash64=function(){var e=this.bytes_,t=this.cursor_,r=e[t+0],n=e[t+1],o=e[t+2],a=e[t+3],i=e[t+4],s=e[t+5],p=e[t+6];return e=e[t+7],this.cursor_+=8,String.fromCharCode(r,n,o,a,i,s,p,e)},jspb.BinaryReader=function(e,t,r){this.decoder_=jspb.BinaryDecoder.alloc(e,t,r),this.fieldCursor_=this.decoder_.getCursor(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID,this.error_=!1,this.readCallbacks_=null},jspb.BinaryReader.instanceCache_=[],jspb.BinaryReader.alloc=function(e,t,r){if(jspb.BinaryReader.instanceCache_.length){var n=jspb.BinaryReader.instanceCache_.pop();return e&&n.decoder_.setBlock(e,t,r),n}return new jspb.BinaryReader(e,t,r)},jspb.BinaryReader.prototype.alloc=jspb.BinaryReader.alloc,jspb.BinaryReader.prototype.free=function(){this.decoder_.clear(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID,this.error_=!1,this.readCallbacks_=null,100>jspb.BinaryReader.instanceCache_.length&&jspb.BinaryReader.instanceCache_.push(this)},jspb.BinaryReader.prototype.getFieldCursor=function(){return this.fieldCursor_},jspb.BinaryReader.prototype.getCursor=function(){return this.decoder_.getCursor()},jspb.BinaryReader.prototype.getBuffer=function(){return this.decoder_.getBuffer()},jspb.BinaryReader.prototype.getFieldNumber=function(){return this.nextField_},goog.exportProperty(jspb.BinaryReader.prototype,"getFieldNumber",jspb.BinaryReader.prototype.getFieldNumber),jspb.BinaryReader.prototype.getWireType=function(){return this.nextWireType_},jspb.BinaryReader.prototype.isDelimited=function(){return this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED},goog.exportProperty(jspb.BinaryReader.prototype,"isDelimited",jspb.BinaryReader.prototype.isDelimited),jspb.BinaryReader.prototype.isEndGroup=function(){return this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP},goog.exportProperty(jspb.BinaryReader.prototype,"isEndGroup",jspb.BinaryReader.prototype.isEndGroup),jspb.BinaryReader.prototype.getError=function(){return this.error_||this.decoder_.getError()},jspb.BinaryReader.prototype.setBlock=function(e,t,r){this.decoder_.setBlock(e,t,r),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID},jspb.BinaryReader.prototype.reset=function(){this.decoder_.reset(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID},jspb.BinaryReader.prototype.advance=function(e){this.decoder_.advance(e)},jspb.BinaryReader.prototype.nextField=function(){if(this.decoder_.atEnd())return!1;if(this.getError())return jspb.asserts.fail("Decoder hit an error"),!1;this.fieldCursor_=this.decoder_.getCursor();var e=this.decoder_.readUnsignedVarint32(),t=e>>>3;return(e&=7)!=jspb.BinaryConstants.WireType.VARINT&&e!=jspb.BinaryConstants.WireType.FIXED32&&e!=jspb.BinaryConstants.WireType.FIXED64&&e!=jspb.BinaryConstants.WireType.DELIMITED&&e!=jspb.BinaryConstants.WireType.START_GROUP&&e!=jspb.BinaryConstants.WireType.END_GROUP?(jspb.asserts.fail("Invalid wire type: %s (at position %s)",e,this.fieldCursor_),this.error_=!0,!1):(this.nextField_=t,this.nextWireType_=e,!0)},goog.exportProperty(jspb.BinaryReader.prototype,"nextField",jspb.BinaryReader.prototype.nextField),jspb.BinaryReader.prototype.unskipHeader=function(){this.decoder_.unskipVarint(this.nextField_<<3|this.nextWireType_)},jspb.BinaryReader.prototype.skipMatchingFields=function(){var e=this.nextField_;for(this.unskipHeader();this.nextField()&&this.getFieldNumber()==e;)this.skipField();this.decoder_.atEnd()||this.unskipHeader()},jspb.BinaryReader.prototype.skipVarintField=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.VARINT?(jspb.asserts.fail("Invalid wire type for skipVarintField"),this.skipField()):this.decoder_.skipVarint()},jspb.BinaryReader.prototype.skipDelimitedField=function(){if(this.nextWireType_!=jspb.BinaryConstants.WireType.DELIMITED)jspb.asserts.fail("Invalid wire type for skipDelimitedField"),this.skipField();else{var e=this.decoder_.readUnsignedVarint32();this.decoder_.advance(e)}},jspb.BinaryReader.prototype.skipFixed32Field=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.FIXED32?(jspb.asserts.fail("Invalid wire type for skipFixed32Field"),this.skipField()):this.decoder_.advance(4)},jspb.BinaryReader.prototype.skipFixed64Field=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.FIXED64?(jspb.asserts.fail("Invalid wire type for skipFixed64Field"),this.skipField()):this.decoder_.advance(8)},jspb.BinaryReader.prototype.skipGroup=function(){for(var e=this.nextField_;;){if(!this.nextField()){jspb.asserts.fail("Unmatched start-group tag: stream EOF"),this.error_=!0;break}if(this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP){this.nextField_!=e&&(jspb.asserts.fail("Unmatched end-group tag"),this.error_=!0);break}this.skipField()}},jspb.BinaryReader.prototype.skipField=function(){switch(this.nextWireType_){case jspb.BinaryConstants.WireType.VARINT:this.skipVarintField();break;case jspb.BinaryConstants.WireType.FIXED64:this.skipFixed64Field();break;case jspb.BinaryConstants.WireType.DELIMITED:this.skipDelimitedField();break;case jspb.BinaryConstants.WireType.FIXED32:this.skipFixed32Field();break;case jspb.BinaryConstants.WireType.START_GROUP:this.skipGroup();break;default:jspb.asserts.fail("Invalid wire encoding for field.")}},jspb.BinaryReader.prototype.registerReadCallback=function(e,t){null===this.readCallbacks_&&(this.readCallbacks_={}),jspb.asserts.assert(!this.readCallbacks_[e]),this.readCallbacks_[e]=t},jspb.BinaryReader.prototype.runReadCallback=function(e){return jspb.asserts.assert(null!==this.readCallbacks_),e=this.readCallbacks_[e],jspb.asserts.assert(e),e(this)},jspb.BinaryReader.prototype.readAny=function(e){this.nextWireType_=jspb.BinaryConstants.FieldTypeToWireType(e);var t=jspb.BinaryConstants.FieldType;switch(e){case t.DOUBLE:return this.readDouble();case t.FLOAT:return this.readFloat();case t.INT64:return this.readInt64();case t.UINT64:return this.readUint64();case t.INT32:return this.readInt32();case t.FIXED64:return this.readFixed64();case t.FIXED32:return this.readFixed32();case t.BOOL:return this.readBool();case t.STRING:return this.readString();case t.GROUP:jspb.asserts.fail("Group field type not supported in readAny()");case t.MESSAGE:jspb.asserts.fail("Message field type not supported in readAny()");case t.BYTES:return this.readBytes();case t.UINT32:return this.readUint32();case t.ENUM:return this.readEnum();case t.SFIXED32:return this.readSfixed32();case t.SFIXED64:return this.readSfixed64();case t.SINT32:return this.readSint32();case t.SINT64:return this.readSint64();case t.FHASH64:return this.readFixedHash64();case t.VHASH64:return this.readVarintHash64();default:jspb.asserts.fail("Invalid field type in readAny()")}return 0},jspb.BinaryReader.prototype.readMessage=function(e,t){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var r=this.decoder_.getEnd(),n=this.decoder_.readUnsignedVarint32();n=this.decoder_.getCursor()+n,this.decoder_.setEnd(n),t(e,this),this.decoder_.setCursor(n),this.decoder_.setEnd(r)},goog.exportProperty(jspb.BinaryReader.prototype,"readMessage",jspb.BinaryReader.prototype.readMessage),jspb.BinaryReader.prototype.readGroup=function(e,t,r){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.START_GROUP),jspb.asserts.assert(this.nextField_==e),r(t,this),this.error_||this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP||(jspb.asserts.fail("Group submessage did not end with an END_GROUP tag"),this.error_=!0)},goog.exportProperty(jspb.BinaryReader.prototype,"readGroup",jspb.BinaryReader.prototype.readGroup),jspb.BinaryReader.prototype.getFieldDecoder=function(){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var e=this.decoder_.readUnsignedVarint32(),t=this.decoder_.getCursor(),r=t+e;return e=jspb.BinaryDecoder.alloc(this.decoder_.getBuffer(),t,e),this.decoder_.setCursor(r),e},jspb.BinaryReader.prototype.readInt32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readInt32",jspb.BinaryReader.prototype.readInt32),jspb.BinaryReader.prototype.readInt32String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint32String()},jspb.BinaryReader.prototype.readInt64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readInt64",jspb.BinaryReader.prototype.readInt64),jspb.BinaryReader.prototype.readInt64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64String()},jspb.BinaryReader.prototype.readUint32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readUint32",jspb.BinaryReader.prototype.readUint32),jspb.BinaryReader.prototype.readUint32String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint32String()},jspb.BinaryReader.prototype.readUint64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readUint64",jspb.BinaryReader.prototype.readUint64),jspb.BinaryReader.prototype.readUint64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint64String()},jspb.BinaryReader.prototype.readSint32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readSint32",jspb.BinaryReader.prototype.readSint32),jspb.BinaryReader.prototype.readSint64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readSint64",jspb.BinaryReader.prototype.readSint64),jspb.BinaryReader.prototype.readSint64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint64String()},jspb.BinaryReader.prototype.readFixed32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readUint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readFixed32",jspb.BinaryReader.prototype.readFixed32),jspb.BinaryReader.prototype.readFixed64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readUint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readFixed64",jspb.BinaryReader.prototype.readFixed64),jspb.BinaryReader.prototype.readFixed64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readUint64String()},jspb.BinaryReader.prototype.readSfixed32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readInt32()},goog.exportProperty(jspb.BinaryReader.prototype,"readSfixed32",jspb.BinaryReader.prototype.readSfixed32),jspb.BinaryReader.prototype.readSfixed32String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readInt32().toString()},jspb.BinaryReader.prototype.readSfixed64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readInt64()},goog.exportProperty(jspb.BinaryReader.prototype,"readSfixed64",jspb.BinaryReader.prototype.readSfixed64),jspb.BinaryReader.prototype.readSfixed64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readInt64String()},jspb.BinaryReader.prototype.readFloat=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readFloat()},goog.exportProperty(jspb.BinaryReader.prototype,"readFloat",jspb.BinaryReader.prototype.readFloat),jspb.BinaryReader.prototype.readDouble=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readDouble()},goog.exportProperty(jspb.BinaryReader.prototype,"readDouble",jspb.BinaryReader.prototype.readDouble),jspb.BinaryReader.prototype.readBool=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),!!this.decoder_.readUnsignedVarint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readBool",jspb.BinaryReader.prototype.readBool),jspb.BinaryReader.prototype.readEnum=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readEnum",jspb.BinaryReader.prototype.readEnum),jspb.BinaryReader.prototype.readString=function(){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var e=this.decoder_.readUnsignedVarint32();return this.decoder_.readString(e)},goog.exportProperty(jspb.BinaryReader.prototype,"readString",jspb.BinaryReader.prototype.readString),jspb.BinaryReader.prototype.readBytes=function(){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var e=this.decoder_.readUnsignedVarint32();return this.decoder_.readBytes(e)},goog.exportProperty(jspb.BinaryReader.prototype,"readBytes",jspb.BinaryReader.prototype.readBytes),jspb.BinaryReader.prototype.readVarintHash64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readVarintHash64()},jspb.BinaryReader.prototype.readSintHash64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarintHash64()},jspb.BinaryReader.prototype.readSplitVarint64=function(e){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSplitVarint64(e)},jspb.BinaryReader.prototype.readSplitZigzagVarint64=function(e){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSplitVarint64((function(t,r){return jspb.utils.fromZigzag64(t,r,e)}))},jspb.BinaryReader.prototype.readFixedHash64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readFixedHash64()},jspb.BinaryReader.prototype.readSplitFixed64=function(e){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readSplitFixed64(e)},jspb.BinaryReader.prototype.readPackedField_=function(e){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var t=this.decoder_.readUnsignedVarint32();t=this.decoder_.getCursor()+t;for(var r=[];this.decoder_.getCursor()<t;)r.push(e.call(this.decoder_));return r},jspb.BinaryReader.prototype.readPackedInt32=function(){return this.readPackedField_(this.decoder_.readSignedVarint32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedInt32",jspb.BinaryReader.prototype.readPackedInt32),jspb.BinaryReader.prototype.readPackedInt32String=function(){return this.readPackedField_(this.decoder_.readSignedVarint32String)},jspb.BinaryReader.prototype.readPackedInt64=function(){return this.readPackedField_(this.decoder_.readSignedVarint64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedInt64",jspb.BinaryReader.prototype.readPackedInt64),jspb.BinaryReader.prototype.readPackedInt64String=function(){return this.readPackedField_(this.decoder_.readSignedVarint64String)},jspb.BinaryReader.prototype.readPackedUint32=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedUint32",jspb.BinaryReader.prototype.readPackedUint32),jspb.BinaryReader.prototype.readPackedUint32String=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint32String)},jspb.BinaryReader.prototype.readPackedUint64=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedUint64",jspb.BinaryReader.prototype.readPackedUint64),jspb.BinaryReader.prototype.readPackedUint64String=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint64String)},jspb.BinaryReader.prototype.readPackedSint32=function(){return this.readPackedField_(this.decoder_.readZigzagVarint32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedSint32",jspb.BinaryReader.prototype.readPackedSint32),jspb.BinaryReader.prototype.readPackedSint64=function(){return this.readPackedField_(this.decoder_.readZigzagVarint64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedSint64",jspb.BinaryReader.prototype.readPackedSint64),jspb.BinaryReader.prototype.readPackedSint64String=function(){return this.readPackedField_(this.decoder_.readZigzagVarint64String)},jspb.BinaryReader.prototype.readPackedFixed32=function(){return this.readPackedField_(this.decoder_.readUint32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedFixed32",jspb.BinaryReader.prototype.readPackedFixed32),jspb.BinaryReader.prototype.readPackedFixed64=function(){return this.readPackedField_(this.decoder_.readUint64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedFixed64",jspb.BinaryReader.prototype.readPackedFixed64),jspb.BinaryReader.prototype.readPackedFixed64String=function(){return this.readPackedField_(this.decoder_.readUint64String)},jspb.BinaryReader.prototype.readPackedSfixed32=function(){return this.readPackedField_(this.decoder_.readInt32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedSfixed32",jspb.BinaryReader.prototype.readPackedSfixed32),jspb.BinaryReader.prototype.readPackedSfixed64=function(){return this.readPackedField_(this.decoder_.readInt64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedSfixed64",jspb.BinaryReader.prototype.readPackedSfixed64),jspb.BinaryReader.prototype.readPackedSfixed64String=function(){return this.readPackedField_(this.decoder_.readInt64String)},jspb.BinaryReader.prototype.readPackedFloat=function(){return this.readPackedField_(this.decoder_.readFloat)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedFloat",jspb.BinaryReader.prototype.readPackedFloat),jspb.BinaryReader.prototype.readPackedDouble=function(){return this.readPackedField_(this.decoder_.readDouble)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedDouble",jspb.BinaryReader.prototype.readPackedDouble),jspb.BinaryReader.prototype.readPackedBool=function(){return this.readPackedField_(this.decoder_.readBool)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedBool",jspb.BinaryReader.prototype.readPackedBool),jspb.BinaryReader.prototype.readPackedEnum=function(){return this.readPackedField_(this.decoder_.readEnum)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedEnum",jspb.BinaryReader.prototype.readPackedEnum),jspb.BinaryReader.prototype.readPackedVarintHash64=function(){return this.readPackedField_(this.decoder_.readVarintHash64)},jspb.BinaryReader.prototype.readPackedFixedHash64=function(){return this.readPackedField_(this.decoder_.readFixedHash64)},jspb.BinaryEncoder=function(){this.buffer_=[]},jspb.BinaryEncoder.prototype.length=function(){return this.buffer_.length},jspb.BinaryEncoder.prototype.end=function(){var e=this.buffer_;return this.buffer_=[],e},jspb.BinaryEncoder.prototype.writeSplitVarint64=function(e,t){for(jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(t==Math.floor(t)),jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32),jspb.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32);0<t||127<e;)this.buffer_.push(127&e|128),e=(e>>>7|t<<25)>>>0,t>>>=7;this.buffer_.push(e)},jspb.BinaryEncoder.prototype.writeSplitFixed64=function(e,t){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(t==Math.floor(t)),jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32),jspb.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32),this.writeUint32(e),this.writeUint32(t)},jspb.BinaryEncoder.prototype.writeUnsignedVarint32=function(e){for(jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32);127<e;)this.buffer_.push(127&e|128),e>>>=7;this.buffer_.push(e)},jspb.BinaryEncoder.prototype.writeSignedVarint32=function(e){if(jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),0<=e)this.writeUnsignedVarint32(e);else{for(var t=0;9>t;t++)this.buffer_.push(127&e|128),e>>=7;this.buffer_.push(1)}},jspb.BinaryEncoder.prototype.writeUnsignedVarint64=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_64),jspb.utils.splitInt64(e),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeSignedVarint64=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_63&&e<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitInt64(e),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeZigzagVarint32=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),this.writeUnsignedVarint32((e<<1^e>>31)>>>0)},jspb.BinaryEncoder.prototype.writeZigzagVarint64=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_63&&e<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitZigzag64(e),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeZigzagVarint64String=function(e){this.writeZigzagVarintHash64(jspb.utils.decimalStringToHash64(e))},jspb.BinaryEncoder.prototype.writeZigzagVarintHash64=function(e){var t=this;jspb.utils.splitHash64(e),jspb.utils.toZigzag64(jspb.utils.split64Low,jspb.utils.split64High,(function(e,r){t.writeSplitVarint64(e>>>0,r>>>0)}))},jspb.BinaryEncoder.prototype.writeUint8=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(0<=e&&256>e),this.buffer_.push(e>>>0&255)},jspb.BinaryEncoder.prototype.writeUint16=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(0<=e&&65536>e),this.buffer_.push(e>>>0&255),this.buffer_.push(e>>>8&255)},jspb.BinaryEncoder.prototype.writeUint32=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32),this.buffer_.push(e>>>0&255),this.buffer_.push(e>>>8&255),this.buffer_.push(e>>>16&255),this.buffer_.push(e>>>24&255)},jspb.BinaryEncoder.prototype.writeUint64=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_64),jspb.utils.splitUint64(e),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeInt8=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(-128<=e&&128>e),this.buffer_.push(e>>>0&255)},jspb.BinaryEncoder.prototype.writeInt16=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(-32768<=e&&32768>e),this.buffer_.push(e>>>0&255),this.buffer_.push(e>>>8&255)},jspb.BinaryEncoder.prototype.writeInt32=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),this.buffer_.push(e>>>0&255),this.buffer_.push(e>>>8&255),this.buffer_.push(e>>>16&255),this.buffer_.push(e>>>24&255)},jspb.BinaryEncoder.prototype.writeInt64=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_63&&e<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitInt64(e),this.writeSplitFixed64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeInt64String=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(+e>=-jspb.BinaryConstants.TWO_TO_63&&+e<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitHash64(jspb.utils.decimalStringToHash64(e)),this.writeSplitFixed64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeFloat=function(e){jspb.asserts.assert(1/0===e||-1/0===e||isNaN(e)||e>=-jspb.BinaryConstants.FLOAT32_MAX&&e<=jspb.BinaryConstants.FLOAT32_MAX),jspb.utils.splitFloat32(e),this.writeUint32(jspb.utils.split64Low)},jspb.BinaryEncoder.prototype.writeDouble=function(e){jspb.asserts.assert(1/0===e||-1/0===e||isNaN(e)||e>=-jspb.BinaryConstants.FLOAT64_MAX&&e<=jspb.BinaryConstants.FLOAT64_MAX),jspb.utils.splitFloat64(e),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeBool=function(e){jspb.asserts.assert("boolean"==typeof e||"number"==typeof e),this.buffer_.push(e?1:0)},jspb.BinaryEncoder.prototype.writeEnum=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32(e)},jspb.BinaryEncoder.prototype.writeBytes=function(e){this.buffer_.push.apply(this.buffer_,e)},jspb.BinaryEncoder.prototype.writeVarintHash64=function(e){jspb.utils.splitHash64(e),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeFixedHash64=function(e){jspb.utils.splitHash64(e),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeString=function(e){var t=this.buffer_.length;jspb.asserts.assertString(e);for(var r=0;r<e.length;r++){var n=e.charCodeAt(r);if(128>n)this.buffer_.push(n);else if(2048>n)this.buffer_.push(n>>6|192),this.buffer_.push(63&n|128);else if(65536>n)if(55296<=n&&56319>=n&&r+1<e.length){var o=e.charCodeAt(r+1);56320<=o&&57343>=o&&(n=1024*(n-55296)+o-56320+65536,this.buffer_.push(n>>18|240),this.buffer_.push(n>>12&63|128),this.buffer_.push(n>>6&63|128),this.buffer_.push(63&n|128),r++)}else this.buffer_.push(n>>12|224),this.buffer_.push(n>>6&63|128),this.buffer_.push(63&n|128)}return this.buffer_.length-t},jspb.arith={},jspb.arith.UInt64=function(e,t){this.lo=e,this.hi=t},jspb.arith.UInt64.prototype.cmp=function(e){return this.hi<e.hi||this.hi==e.hi&&this.lo<e.lo?-1:this.hi==e.hi&&this.lo==e.lo?0:1},jspb.arith.UInt64.prototype.rightShift=function(){return new jspb.arith.UInt64((this.lo>>>1|(1&this.hi)<<31)>>>0,this.hi>>>1>>>0)},jspb.arith.UInt64.prototype.leftShift=function(){return new jspb.arith.UInt64(this.lo<<1>>>0,(this.hi<<1|this.lo>>>31)>>>0)},jspb.arith.UInt64.prototype.msb=function(){return!!(2147483648&this.hi)},jspb.arith.UInt64.prototype.lsb=function(){return!!(1&this.lo)},jspb.arith.UInt64.prototype.zero=function(){return 0==this.lo&&0==this.hi},jspb.arith.UInt64.prototype.add=function(e){return new jspb.arith.UInt64((this.lo+e.lo&4294967295)>>>0>>>0,((this.hi+e.hi&4294967295)>>>0)+(4294967296<=this.lo+e.lo?1:0)>>>0)},jspb.arith.UInt64.prototype.sub=function(e){return new jspb.arith.UInt64((this.lo-e.lo&4294967295)>>>0>>>0,((this.hi-e.hi&4294967295)>>>0)-(0>this.lo-e.lo?1:0)>>>0)},jspb.arith.UInt64.mul32x32=function(e,t){var r=65535&e,n=65535&t,o=t>>>16;for(t=r*n+65536*(r*o&65535)+65536*((e>>>=16)*n&65535),r=e*o+(r*o>>>16)+(e*n>>>16);4294967296<=t;)t-=4294967296,r+=1;return new jspb.arith.UInt64(t>>>0,r>>>0)},jspb.arith.UInt64.prototype.mul=function(e){var t=jspb.arith.UInt64.mul32x32(this.lo,e);return(e=jspb.arith.UInt64.mul32x32(this.hi,e)).hi=e.lo,e.lo=0,t.add(e)},jspb.arith.UInt64.prototype.div=function(e){if(0==e)return[];var t=new jspb.arith.UInt64(0,0),r=new jspb.arith.UInt64(this.lo,this.hi);e=new jspb.arith.UInt64(e,0);for(var n=new jspb.arith.UInt64(1,0);!e.msb();)e=e.leftShift(),n=n.leftShift();for(;!n.zero();)0>=e.cmp(r)&&(t=t.add(n),r=r.sub(e)),e=e.rightShift(),n=n.rightShift();return[t,r]},jspb.arith.UInt64.prototype.toString=function(){for(var e="",t=this;!t.zero();){var r=(t=t.div(10))[0];e=t[1].lo+e,t=r}return""==e&&(e="0"),e},jspb.arith.UInt64.fromString=function(e){for(var t=new jspb.arith.UInt64(0,0),r=new jspb.arith.UInt64(0,0),n=0;n<e.length;n++){if("0">e[n]||"9"<e[n])return null;var o=parseInt(e[n],10);r.lo=o,t=t.mul(10).add(r)}return t},jspb.arith.UInt64.prototype.clone=function(){return new jspb.arith.UInt64(this.lo,this.hi)},jspb.arith.Int64=function(e,t){this.lo=e,this.hi=t},jspb.arith.Int64.prototype.add=function(e){return new jspb.arith.Int64((this.lo+e.lo&4294967295)>>>0>>>0,((this.hi+e.hi&4294967295)>>>0)+(4294967296<=this.lo+e.lo?1:0)>>>0)},jspb.arith.Int64.prototype.sub=function(e){return new jspb.arith.Int64((this.lo-e.lo&4294967295)>>>0>>>0,((this.hi-e.hi&4294967295)>>>0)-(0>this.lo-e.lo?1:0)>>>0)},jspb.arith.Int64.prototype.clone=function(){return new jspb.arith.Int64(this.lo,this.hi)},jspb.arith.Int64.prototype.toString=function(){var e=0!=(2147483648&this.hi),t=new jspb.arith.UInt64(this.lo,this.hi);return e&&(t=new jspb.arith.UInt64(0,0).sub(t)),(e?"-":"")+t.toString()},jspb.arith.Int64.fromString=function(e){var t=0<e.length&&"-"==e[0];return t&&(e=e.substring(1)),null===(e=jspb.arith.UInt64.fromString(e))?null:(t&&(e=new jspb.arith.UInt64(0,0).sub(e)),new jspb.arith.Int64(e.lo,e.hi))},jspb.BinaryWriter=function(){this.blocks_=[],this.totalLength_=0,this.encoder_=new jspb.BinaryEncoder,this.bookmarks_=[]},jspb.BinaryWriter.prototype.appendUint8Array_=function(e){var t=this.encoder_.end();this.blocks_.push(t),this.blocks_.push(e),this.totalLength_+=t.length+e.length},jspb.BinaryWriter.prototype.beginDelimited_=function(e){return this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),e=this.encoder_.end(),this.blocks_.push(e),this.totalLength_+=e.length,e.push(this.totalLength_),e},jspb.BinaryWriter.prototype.endDelimited_=function(e){var t=e.pop();for(t=this.totalLength_+this.encoder_.length()-t,jspb.asserts.assert(0<=t);127<t;)e.push(127&t|128),t>>>=7,this.totalLength_++;e.push(t),this.totalLength_++},jspb.BinaryWriter.prototype.writeSerializedMessage=function(e,t,r){this.appendUint8Array_(e.subarray(t,r))},jspb.BinaryWriter.prototype.maybeWriteSerializedMessage=function(e,t,r){null!=e&&null!=t&&null!=r&&this.writeSerializedMessage(e,t,r)},jspb.BinaryWriter.prototype.reset=function(){this.blocks_=[],this.encoder_.end(),this.totalLength_=0,this.bookmarks_=[]},jspb.BinaryWriter.prototype.getResultBuffer=function(){jspb.asserts.assert(0==this.bookmarks_.length);for(var e=new Uint8Array(this.totalLength_+this.encoder_.length()),t=this.blocks_,r=t.length,n=0,o=0;o<r;o++){var a=t[o];e.set(a,n),n+=a.length}return t=this.encoder_.end(),e.set(t,n),n+=t.length,jspb.asserts.assert(n==e.length),this.blocks_=[e],e},goog.exportProperty(jspb.BinaryWriter.prototype,"getResultBuffer",jspb.BinaryWriter.prototype.getResultBuffer),jspb.BinaryWriter.prototype.getResultBase64String=function(e){return goog.crypt.base64.encodeByteArray(this.getResultBuffer(),e)},jspb.BinaryWriter.prototype.beginSubMessage=function(e){this.bookmarks_.push(this.beginDelimited_(e))},jspb.BinaryWriter.prototype.endSubMessage=function(){jspb.asserts.assert(0<=this.bookmarks_.length),this.endDelimited_(this.bookmarks_.pop())},jspb.BinaryWriter.prototype.writeFieldHeader_=function(e,t){jspb.asserts.assert(1<=e&&e==Math.floor(e)),this.encoder_.writeUnsignedVarint32(8*e+t)},jspb.BinaryWriter.prototype.writeAny=function(e,t,r){var n=jspb.BinaryConstants.FieldType;switch(e){case n.DOUBLE:this.writeDouble(t,r);break;case n.FLOAT:this.writeFloat(t,r);break;case n.INT64:this.writeInt64(t,r);break;case n.UINT64:this.writeUint64(t,r);break;case n.INT32:this.writeInt32(t,r);break;case n.FIXED64:this.writeFixed64(t,r);break;case n.FIXED32:this.writeFixed32(t,r);break;case n.BOOL:this.writeBool(t,r);break;case n.STRING:this.writeString(t,r);break;case n.GROUP:jspb.asserts.fail("Group field type not supported in writeAny()");break;case n.MESSAGE:jspb.asserts.fail("Message field type not supported in writeAny()");break;case n.BYTES:this.writeBytes(t,r);break;case n.UINT32:this.writeUint32(t,r);break;case n.ENUM:this.writeEnum(t,r);break;case n.SFIXED32:this.writeSfixed32(t,r);break;case n.SFIXED64:this.writeSfixed64(t,r);break;case n.SINT32:this.writeSint32(t,r);break;case n.SINT64:this.writeSint64(t,r);break;case n.FHASH64:this.writeFixedHash64(t,r);break;case n.VHASH64:this.writeVarintHash64(t,r);break;default:jspb.asserts.fail("Invalid field type in writeAny()")}},jspb.BinaryWriter.prototype.writeUnsignedVarint32_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeUnsignedVarint32(t))},jspb.BinaryWriter.prototype.writeSignedVarint32_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(t))},jspb.BinaryWriter.prototype.writeUnsignedVarint64_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeUnsignedVarint64(t))},jspb.BinaryWriter.prototype.writeSignedVarint64_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint64(t))},jspb.BinaryWriter.prototype.writeZigzagVarint32_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint32(t))},jspb.BinaryWriter.prototype.writeZigzagVarint64_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint64(t))},jspb.BinaryWriter.prototype.writeZigzagVarint64String_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint64String(t))},jspb.BinaryWriter.prototype.writeZigzagVarintHash64_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarintHash64(t))},jspb.BinaryWriter.prototype.writeInt32=function(e,t){null!=t&&(jspb.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32_(e,t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeInt32",jspb.BinaryWriter.prototype.writeInt32),jspb.BinaryWriter.prototype.writeInt32String=function(e,t){null!=t&&(t=parseInt(t,10),jspb.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32_(e,t))},jspb.BinaryWriter.prototype.writeInt64=function(e,t){null!=t&&(jspb.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_63&&t<jspb.BinaryConstants.TWO_TO_63),this.writeSignedVarint64_(e,t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeInt64",jspb.BinaryWriter.prototype.writeInt64),jspb.BinaryWriter.prototype.writeInt64String=function(e,t){null!=t&&(t=jspb.arith.Int64.fromString(t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(t.lo,t.hi))},jspb.BinaryWriter.prototype.writeUint32=function(e,t){null!=t&&(jspb.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32),this.writeUnsignedVarint32_(e,t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeUint32",jspb.BinaryWriter.prototype.writeUint32),jspb.BinaryWriter.prototype.writeUint32String=function(e,t){null!=t&&(t=parseInt(t,10),jspb.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32),this.writeUnsignedVarint32_(e,t))},jspb.BinaryWriter.prototype.writeUint64=function(e,t){null!=t&&(jspb.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_64),this.writeUnsignedVarint64_(e,t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeUint64",jspb.BinaryWriter.prototype.writeUint64),jspb.BinaryWriter.prototype.writeUint64String=function(e,t){null!=t&&(t=jspb.arith.UInt64.fromString(t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(t.lo,t.hi))},jspb.BinaryWriter.prototype.writeSint32=function(e,t){null!=t&&(jspb.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeZigzagVarint32_(e,t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeSint32",jspb.BinaryWriter.prototype.writeSint32),jspb.BinaryWriter.prototype.writeSint64=function(e,t){null!=t&&(jspb.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_63&&t<jspb.BinaryConstants.TWO_TO_63),this.writeZigzagVarint64_(e,t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeSint64",jspb.BinaryWriter.prototype.writeSint64),jspb.BinaryWriter.prototype.writeSintHash64=function(e,t){null!=t&&this.writeZigzagVarintHash64_(e,t)},jspb.BinaryWriter.prototype.writeSint64String=function(e,t){null!=t&&this.writeZigzagVarint64String_(e,t)},jspb.BinaryWriter.prototype.writeFixed32=function(e,t){null!=t&&(jspb.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeUint32(t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeFixed32",jspb.BinaryWriter.prototype.writeFixed32),jspb.BinaryWriter.prototype.writeFixed64=function(e,t){null!=t&&(jspb.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_64),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeUint64(t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeFixed64",jspb.BinaryWriter.prototype.writeFixed64),jspb.BinaryWriter.prototype.writeFixed64String=function(e,t){null!=t&&(t=jspb.arith.UInt64.fromString(t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(t.lo,t.hi))},jspb.BinaryWriter.prototype.writeSfixed32=function(e,t){null!=t&&(jspb.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeInt32(t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeSfixed32",jspb.BinaryWriter.prototype.writeSfixed32),jspb.BinaryWriter.prototype.writeSfixed64=function(e,t){null!=t&&(jspb.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_63&&t<jspb.BinaryConstants.TWO_TO_63),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeInt64(t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeSfixed64",jspb.BinaryWriter.prototype.writeSfixed64),jspb.BinaryWriter.prototype.writeSfixed64String=function(e,t){null!=t&&(t=jspb.arith.Int64.fromString(t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(t.lo,t.hi))},jspb.BinaryWriter.prototype.writeFloat=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeFloat(t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeFloat",jspb.BinaryWriter.prototype.writeFloat),jspb.BinaryWriter.prototype.writeDouble=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeDouble(t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeDouble",jspb.BinaryWriter.prototype.writeDouble),jspb.BinaryWriter.prototype.writeBool=function(e,t){null!=t&&(jspb.asserts.assert("boolean"==typeof t||"number"==typeof t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeBool(t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeBool",jspb.BinaryWriter.prototype.writeBool),jspb.BinaryWriter.prototype.writeEnum=function(e,t){null!=t&&(jspb.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeEnum",jspb.BinaryWriter.prototype.writeEnum),jspb.BinaryWriter.prototype.writeString=function(e,t){null!=t&&(e=this.beginDelimited_(e),this.encoder_.writeString(t),this.endDelimited_(e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeString",jspb.BinaryWriter.prototype.writeString),jspb.BinaryWriter.prototype.writeBytes=function(e,t){null!=t&&(t=jspb.utils.byteSourceToUint8Array(t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(t.length),this.appendUint8Array_(t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeBytes",jspb.BinaryWriter.prototype.writeBytes),jspb.BinaryWriter.prototype.writeMessage=function(e,t,r){null!=t&&(e=this.beginDelimited_(e),r(t,this),this.endDelimited_(e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeMessage",jspb.BinaryWriter.prototype.writeMessage),jspb.BinaryWriter.prototype.writeMessageSet=function(e,t,r){null!=t&&(this.writeFieldHeader_(1,jspb.BinaryConstants.WireType.START_GROUP),this.writeFieldHeader_(2,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(e),e=this.beginDelimited_(3),r(t,this),this.endDelimited_(e),this.writeFieldHeader_(1,jspb.BinaryConstants.WireType.END_GROUP))},jspb.BinaryWriter.prototype.writeGroup=function(e,t,r){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.START_GROUP),r(t,this),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.END_GROUP))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeGroup",jspb.BinaryWriter.prototype.writeGroup),jspb.BinaryWriter.prototype.writeFixedHash64=function(e,t){null!=t&&(jspb.asserts.assert(8==t.length),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeFixedHash64(t))},jspb.BinaryWriter.prototype.writeVarintHash64=function(e,t){null!=t&&(jspb.asserts.assert(8==t.length),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeVarintHash64(t))},jspb.BinaryWriter.prototype.writeSplitFixed64=function(e,t,r){this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(t,r)},jspb.BinaryWriter.prototype.writeSplitVarint64=function(e,t,r){this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(t,r)},jspb.BinaryWriter.prototype.writeSplitZigzagVarint64=function(e,t,r){this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT);var n=this.encoder_;jspb.utils.toZigzag64(t,r,(function(e,t){n.writeSplitVarint64(e>>>0,t>>>0)}))},jspb.BinaryWriter.prototype.writeRepeatedInt32=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeSignedVarint32_(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedInt32",jspb.BinaryWriter.prototype.writeRepeatedInt32),jspb.BinaryWriter.prototype.writeRepeatedInt32String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeInt32String(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedInt64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeSignedVarint64_(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedInt64",jspb.BinaryWriter.prototype.writeRepeatedInt64),jspb.BinaryWriter.prototype.writeRepeatedSplitFixed64=function(e,t,r,n){if(null!=t)for(var o=0;o<t.length;o++)this.writeSplitFixed64(e,r(t[o]),n(t[o]))},jspb.BinaryWriter.prototype.writeRepeatedSplitVarint64=function(e,t,r,n){if(null!=t)for(var o=0;o<t.length;o++)this.writeSplitVarint64(e,r(t[o]),n(t[o]))},jspb.BinaryWriter.prototype.writeRepeatedSplitZigzagVarint64=function(e,t,r,n){if(null!=t)for(var o=0;o<t.length;o++)this.writeSplitZigzagVarint64(e,r(t[o]),n(t[o]))},jspb.BinaryWriter.prototype.writeRepeatedInt64String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeInt64String(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedUint32=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeUnsignedVarint32_(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedUint32",jspb.BinaryWriter.prototype.writeRepeatedUint32),jspb.BinaryWriter.prototype.writeRepeatedUint32String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeUint32String(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedUint64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeUnsignedVarint64_(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedUint64",jspb.BinaryWriter.prototype.writeRepeatedUint64),jspb.BinaryWriter.prototype.writeRepeatedUint64String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeUint64String(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedSint32=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeZigzagVarint32_(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedSint32",jspb.BinaryWriter.prototype.writeRepeatedSint32),jspb.BinaryWriter.prototype.writeRepeatedSint64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeZigzagVarint64_(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedSint64",jspb.BinaryWriter.prototype.writeRepeatedSint64),jspb.BinaryWriter.prototype.writeRepeatedSint64String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeZigzagVarint64String_(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedSintHash64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeZigzagVarintHash64_(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedFixed32=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeFixed32(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedFixed32",jspb.BinaryWriter.prototype.writeRepeatedFixed32),jspb.BinaryWriter.prototype.writeRepeatedFixed64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeFixed64(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedFixed64",jspb.BinaryWriter.prototype.writeRepeatedFixed64),jspb.BinaryWriter.prototype.writeRepeatedFixed64String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeFixed64String(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedFixed64String",jspb.BinaryWriter.prototype.writeRepeatedFixed64String),jspb.BinaryWriter.prototype.writeRepeatedSfixed32=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeSfixed32(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedSfixed32",jspb.BinaryWriter.prototype.writeRepeatedSfixed32),jspb.BinaryWriter.prototype.writeRepeatedSfixed64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeSfixed64(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedSfixed64",jspb.BinaryWriter.prototype.writeRepeatedSfixed64),jspb.BinaryWriter.prototype.writeRepeatedSfixed64String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeSfixed64String(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedFloat=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeFloat(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedFloat",jspb.BinaryWriter.prototype.writeRepeatedFloat),jspb.BinaryWriter.prototype.writeRepeatedDouble=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeDouble(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedDouble",jspb.BinaryWriter.prototype.writeRepeatedDouble),jspb.BinaryWriter.prototype.writeRepeatedBool=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeBool(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedBool",jspb.BinaryWriter.prototype.writeRepeatedBool),jspb.BinaryWriter.prototype.writeRepeatedEnum=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeEnum(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedEnum",jspb.BinaryWriter.prototype.writeRepeatedEnum),jspb.BinaryWriter.prototype.writeRepeatedString=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeString(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedString",jspb.BinaryWriter.prototype.writeRepeatedString),jspb.BinaryWriter.prototype.writeRepeatedBytes=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeBytes(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedBytes",jspb.BinaryWriter.prototype.writeRepeatedBytes),jspb.BinaryWriter.prototype.writeRepeatedMessage=function(e,t,r){if(null!=t)for(var n=0;n<t.length;n++){var o=this.beginDelimited_(e);r(t[n],this),this.endDelimited_(o)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedMessage",jspb.BinaryWriter.prototype.writeRepeatedMessage),jspb.BinaryWriter.prototype.writeRepeatedGroup=function(e,t,r){if(null!=t)for(var n=0;n<t.length;n++)this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.START_GROUP),r(t[n],this),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.END_GROUP)},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedGroup",jspb.BinaryWriter.prototype.writeRepeatedGroup),jspb.BinaryWriter.prototype.writeRepeatedFixedHash64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeFixedHash64(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedVarintHash64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeVarintHash64(e,t[r])},jspb.BinaryWriter.prototype.writePackedInt32=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeSignedVarint32(t[r]);this.endDelimited_(e)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedInt32",jspb.BinaryWriter.prototype.writePackedInt32),jspb.BinaryWriter.prototype.writePackedInt32String=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeSignedVarint32(parseInt(t[r],10));this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedInt64=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeSignedVarint64(t[r]);this.endDelimited_(e)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedInt64",jspb.BinaryWriter.prototype.writePackedInt64),jspb.BinaryWriter.prototype.writePackedSplitFixed64=function(e,t,r,n){if(null!=t){e=this.beginDelimited_(e);for(var o=0;o<t.length;o++)this.encoder_.writeSplitFixed64(r(t[o]),n(t[o]));this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedSplitVarint64=function(e,t,r,n){if(null!=t){e=this.beginDelimited_(e);for(var o=0;o<t.length;o++)this.encoder_.writeSplitVarint64(r(t[o]),n(t[o]));this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedSplitZigzagVarint64=function(e,t,r,n){if(null!=t){e=this.beginDelimited_(e);for(var o=this.encoder_,a=0;a<t.length;a++)jspb.utils.toZigzag64(r(t[a]),n(t[a]),(function(e,t){o.writeSplitVarint64(e>>>0,t>>>0)}));this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedInt64String=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++){var n=jspb.arith.Int64.fromString(t[r]);this.encoder_.writeSplitVarint64(n.lo,n.hi)}this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedUint32=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeUnsignedVarint32(t[r]);this.endDelimited_(e)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedUint32",jspb.BinaryWriter.prototype.writePackedUint32),jspb.BinaryWriter.prototype.writePackedUint32String=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeUnsignedVarint32(parseInt(t[r],10));this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedUint64=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeUnsignedVarint64(t[r]);this.endDelimited_(e)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedUint64",jspb.BinaryWriter.prototype.writePackedUint64),jspb.BinaryWriter.prototype.writePackedUint64String=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++){var n=jspb.arith.UInt64.fromString(t[r]);this.encoder_.writeSplitVarint64(n.lo,n.hi)}this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedSint32=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeZigzagVarint32(t[r]);this.endDelimited_(e)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedSint32",jspb.BinaryWriter.prototype.writePackedSint32),jspb.BinaryWriter.prototype.writePackedSint64=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeZigzagVarint64(t[r]);this.endDelimited_(e)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedSint64",jspb.BinaryWriter.prototype.writePackedSint64),jspb.BinaryWriter.prototype.writePackedSint64String=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeZigzagVarintHash64(jspb.utils.decimalStringToHash64(t[r]));this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedSintHash64=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeZigzagVarintHash64(t[r]);this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedFixed32=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*t.length),e=0;e<t.length;e++)this.encoder_.writeUint32(t[e])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedFixed32",jspb.BinaryWriter.prototype.writePackedFixed32),jspb.BinaryWriter.prototype.writePackedFixed64=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++)this.encoder_.writeUint64(t[e])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedFixed64",jspb.BinaryWriter.prototype.writePackedFixed64),jspb.BinaryWriter.prototype.writePackedFixed64String=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++){var r=jspb.arith.UInt64.fromString(t[e]);this.encoder_.writeSplitFixed64(r.lo,r.hi)}},jspb.BinaryWriter.prototype.writePackedSfixed32=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*t.length),e=0;e<t.length;e++)this.encoder_.writeInt32(t[e])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedSfixed32",jspb.BinaryWriter.prototype.writePackedSfixed32),jspb.BinaryWriter.prototype.writePackedSfixed64=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++)this.encoder_.writeInt64(t[e])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedSfixed64",jspb.BinaryWriter.prototype.writePackedSfixed64),jspb.BinaryWriter.prototype.writePackedSfixed64String=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++)this.encoder_.writeInt64String(t[e])},jspb.BinaryWriter.prototype.writePackedFloat=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*t.length),e=0;e<t.length;e++)this.encoder_.writeFloat(t[e])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedFloat",jspb.BinaryWriter.prototype.writePackedFloat),jspb.BinaryWriter.prototype.writePackedDouble=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++)this.encoder_.writeDouble(t[e])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedDouble",jspb.BinaryWriter.prototype.writePackedDouble),jspb.BinaryWriter.prototype.writePackedBool=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(t.length),e=0;e<t.length;e++)this.encoder_.writeBool(t[e])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedBool",jspb.BinaryWriter.prototype.writePackedBool),jspb.BinaryWriter.prototype.writePackedEnum=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeEnum(t[r]);this.endDelimited_(e)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedEnum",jspb.BinaryWriter.prototype.writePackedEnum),jspb.BinaryWriter.prototype.writePackedFixedHash64=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++)this.encoder_.writeFixedHash64(t[e])},jspb.BinaryWriter.prototype.writePackedVarintHash64=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeVarintHash64(t[r]);this.endDelimited_(e)}},jspb.Map=function(e,t){this.arr_=e,this.valueCtor_=t,this.map_={},this.arrClean=!0,0<this.arr_.length&&this.loadFromArray_()},goog.exportSymbol("jspb.Map",jspb.Map),jspb.Map.prototype.loadFromArray_=function(){for(var e=0;e<this.arr_.length;e++){var t=this.arr_[e],r=t[0];this.map_[r.toString()]=new jspb.Map.Entry_(r,t[1])}this.arrClean=!0},jspb.Map.prototype.toArray=function(){if(this.arrClean){if(this.valueCtor_){var e,t=this.map_;for(e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var r=t[e].valueWrapper;r&&r.toArray()}}}else{for(this.arr_.length=0,(t=this.stringKeys_()).sort(),e=0;e<t.length;e++){var n=this.map_[t[e]];(r=n.valueWrapper)&&r.toArray(),this.arr_.push([n.key,n.value])}this.arrClean=!0}return this.arr_},goog.exportProperty(jspb.Map.prototype,"toArray",jspb.Map.prototype.toArray),jspb.Map.prototype.toObject=function(e,t){for(var r=this.toArray(),n=[],o=0;o<r.length;o++){var a=this.map_[r[o][0].toString()];this.wrapEntry_(a);var i=a.valueWrapper;i?(jspb.asserts.assert(t),n.push([a.key,t(e,i)])):n.push([a.key,a.value])}return n},goog.exportProperty(jspb.Map.prototype,"toObject",jspb.Map.prototype.toObject),jspb.Map.fromObject=function(e,t,r){t=new jspb.Map([],t);for(var n=0;n<e.length;n++){var o=e[n][0],a=r(e[n][1]);t.set(o,a)}return t},goog.exportProperty(jspb.Map,"fromObject",jspb.Map.fromObject),jspb.Map.ArrayIteratorIterable_=function(e){this.idx_=0,this.arr_=e},jspb.Map.ArrayIteratorIterable_.prototype.next=function(){return this.idx_<this.arr_.length?{done:!1,value:this.arr_[this.idx_++]}:{done:!0,value:void 0}},"undefined"!=typeof Symbol&&(jspb.Map.ArrayIteratorIterable_.prototype[Symbol.iterator]=function(){return this}),jspb.Map.prototype.getLength=function(){return this.stringKeys_().length},goog.exportProperty(jspb.Map.prototype,"getLength",jspb.Map.prototype.getLength),jspb.Map.prototype.clear=function(){this.map_={},this.arrClean=!1},goog.exportProperty(jspb.Map.prototype,"clear",jspb.Map.prototype.clear),jspb.Map.prototype.del=function(e){e=e.toString();var t=this.map_.hasOwnProperty(e);return delete this.map_[e],this.arrClean=!1,t},goog.exportProperty(jspb.Map.prototype,"del",jspb.Map.prototype.del),jspb.Map.prototype.getEntryList=function(){var e=[],t=this.stringKeys_();t.sort();for(var r=0;r<t.length;r++){var n=this.map_[t[r]];e.push([n.key,n.value])}return e},goog.exportProperty(jspb.Map.prototype,"getEntryList",jspb.Map.prototype.getEntryList),jspb.Map.prototype.entries=function(){var e=[],t=this.stringKeys_();t.sort();for(var r=0;r<t.length;r++){var n=this.map_[t[r]];e.push([n.key,this.wrapEntry_(n)])}return new jspb.Map.ArrayIteratorIterable_(e)},goog.exportProperty(jspb.Map.prototype,"entries",jspb.Map.prototype.entries),jspb.Map.prototype.keys=function(){var e=[],t=this.stringKeys_();t.sort();for(var r=0;r<t.length;r++)e.push(this.map_[t[r]].key);return new jspb.Map.ArrayIteratorIterable_(e)},goog.exportProperty(jspb.Map.prototype,"keys",jspb.Map.prototype.keys),jspb.Map.prototype.values=function(){var e=[],t=this.stringKeys_();t.sort();for(var r=0;r<t.length;r++)e.push(this.wrapEntry_(this.map_[t[r]]));return new jspb.Map.ArrayIteratorIterable_(e)},goog.exportProperty(jspb.Map.prototype,"values",jspb.Map.prototype.values),jspb.Map.prototype.forEach=function(e,t){var r=this.stringKeys_();r.sort();for(var n=0;n<r.length;n++){var o=this.map_[r[n]];e.call(t,this.wrapEntry_(o),o.key,this)}},goog.exportProperty(jspb.Map.prototype,"forEach",jspb.Map.prototype.forEach),jspb.Map.prototype.set=function(e,t){var r=new jspb.Map.Entry_(e);return this.valueCtor_?(r.valueWrapper=t,r.value=t.toArray()):r.value=t,this.map_[e.toString()]=r,this.arrClean=!1,this},goog.exportProperty(jspb.Map.prototype,"set",jspb.Map.prototype.set),jspb.Map.prototype.wrapEntry_=function(e){return this.valueCtor_?(e.valueWrapper||(e.valueWrapper=new this.valueCtor_(e.value)),e.valueWrapper):e.value},jspb.Map.prototype.get=function(e){if(e=this.map_[e.toString()])return this.wrapEntry_(e)},goog.exportProperty(jspb.Map.prototype,"get",jspb.Map.prototype.get),jspb.Map.prototype.has=function(e){return e.toString()in this.map_},goog.exportProperty(jspb.Map.prototype,"has",jspb.Map.prototype.has),jspb.Map.prototype.serializeBinary=function(e,t,r,n,o){var a=this.stringKeys_();a.sort();for(var i=0;i<a.length;i++){var s=this.map_[a[i]];t.beginSubMessage(e),r.call(t,1,s.key),this.valueCtor_?n.call(t,2,this.wrapEntry_(s),o):n.call(t,2,s.value),t.endSubMessage()}},goog.exportProperty(jspb.Map.prototype,"serializeBinary",jspb.Map.prototype.serializeBinary),jspb.Map.deserializeBinary=function(e,t,r,n,o,a,i){for(;t.nextField()&&!t.isEndGroup();){var s=t.getFieldNumber();1==s?a=r.call(t):2==s&&(e.valueCtor_?(jspb.asserts.assert(o),i||(i=new e.valueCtor_),n.call(t,i,o)):i=n.call(t))}jspb.asserts.assert(null!=a),jspb.asserts.assert(null!=i),e.set(a,i)},goog.exportProperty(jspb.Map,"deserializeBinary",jspb.Map.deserializeBinary),jspb.Map.prototype.stringKeys_=function(){var e,t=this.map_,r=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&r.push(e);return r},jspb.Map.Entry_=function(e,t){this.key=e,this.value=t,this.valueWrapper=void 0},jspb.ExtensionFieldInfo=function(e,t,r,n,o){this.fieldIndex=e,this.fieldName=t,this.ctor=r,this.toObjectFn=n,this.isRepeated=o},goog.exportSymbol("jspb.ExtensionFieldInfo",jspb.ExtensionFieldInfo),jspb.ExtensionFieldBinaryInfo=function(e,t,r,n,o,a){this.fieldInfo=e,this.binaryReaderFn=t,this.binaryWriterFn=r,this.binaryMessageSerializeFn=n,this.binaryMessageDeserializeFn=o,this.isPacked=a},goog.exportSymbol("jspb.ExtensionFieldBinaryInfo",jspb.ExtensionFieldBinaryInfo),jspb.ExtensionFieldInfo.prototype.isMessageType=function(){return!!this.ctor},goog.exportProperty(jspb.ExtensionFieldInfo.prototype,"isMessageType",jspb.ExtensionFieldInfo.prototype.isMessageType),jspb.Message=function(){},goog.exportSymbol("jspb.Message",jspb.Message),jspb.Message.GENERATE_TO_OBJECT=!0,goog.exportProperty(jspb.Message,"GENERATE_TO_OBJECT",jspb.Message.GENERATE_TO_OBJECT),jspb.Message.GENERATE_FROM_OBJECT=!goog.DISALLOW_TEST_ONLY_CODE,goog.exportProperty(jspb.Message,"GENERATE_FROM_OBJECT",jspb.Message.GENERATE_FROM_OBJECT),jspb.Message.GENERATE_TO_STRING=!0,jspb.Message.ASSUME_LOCAL_ARRAYS=!1,jspb.Message.SERIALIZE_EMPTY_TRAILING_FIELDS=!0,jspb.Message.SUPPORTS_UINT8ARRAY_="function"==typeof Uint8Array,jspb.Message.prototype.getJsPbMessageId=function(){return this.messageId_},goog.exportProperty(jspb.Message.prototype,"getJsPbMessageId",jspb.Message.prototype.getJsPbMessageId),jspb.Message.getIndex_=function(e,t){return t+e.arrayIndexOffset_},jspb.Message.hiddenES6Property_=function(){},jspb.Message.getFieldNumber_=function(e,t){return t-e.arrayIndexOffset_},jspb.Message.initialize=function(e,t,r,n,o,a){if(e.wrappers_=null,t||(t=r?[r]:[]),e.messageId_=r?String(r):void 0,e.arrayIndexOffset_=0===r?-1:0,e.array=t,jspb.Message.initPivotAndExtensionObject_(e,n),e.convertedPrimitiveFields_={},jspb.Message.SERIALIZE_EMPTY_TRAILING_FIELDS||(e.repeatedFields=o),o)for(t=0;t<o.length;t++)(r=o[t])<e.pivot_?(r=jspb.Message.getIndex_(e,r),e.array[r]=e.array[r]||jspb.Message.EMPTY_LIST_SENTINEL_):(jspb.Message.maybeInitEmptyExtensionObject_(e),e.extensionObject_[r]=e.extensionObject_[r]||jspb.Message.EMPTY_LIST_SENTINEL_);if(a&&a.length)for(t=0;t<a.length;t++)jspb.Message.computeOneofCase(e,a[t])},goog.exportProperty(jspb.Message,"initialize",jspb.Message.initialize),jspb.Message.EMPTY_LIST_SENTINEL_=goog.DEBUG&&Object.freeze?Object.freeze([]):[],jspb.Message.isArray_=function(e){return jspb.Message.ASSUME_LOCAL_ARRAYS?e instanceof Array:Array.isArray(e)},jspb.Message.isExtensionObject_=function(e){return!(null===e||"object"!=typeof e||jspb.Message.isArray_(e)||jspb.Message.SUPPORTS_UINT8ARRAY_&&e instanceof Uint8Array)},jspb.Message.initPivotAndExtensionObject_=function(e,t){var r=e.array.length,n=-1;if(r&&(n=r-1,r=e.array[n],jspb.Message.isExtensionObject_(r)))return e.pivot_=jspb.Message.getFieldNumber_(e,n),void(e.extensionObject_=r);-1<t?(e.pivot_=Math.max(t,jspb.Message.getFieldNumber_(e,n+1)),e.extensionObject_=null):e.pivot_=Number.MAX_VALUE},jspb.Message.maybeInitEmptyExtensionObject_=function(e){var t=jspb.Message.getIndex_(e,e.pivot_);e.array[t]||(e.extensionObject_=e.array[t]={})},jspb.Message.toObjectList=function(e,t,r){for(var n=[],o=0;o<e.length;o++)n[o]=t.call(e[o],r,e[o]);return n},goog.exportProperty(jspb.Message,"toObjectList",jspb.Message.toObjectList),jspb.Message.toObjectExtension=function(e,t,r,n,o){for(var a in r){var i=r[a],s=n.call(e,i);if(null!=s){for(var p in i.fieldName)if(i.fieldName.hasOwnProperty(p))break;t[p]=i.toObjectFn?i.isRepeated?jspb.Message.toObjectList(s,i.toObjectFn,o):i.toObjectFn(o,s):s}}},goog.exportProperty(jspb.Message,"toObjectExtension",jspb.Message.toObjectExtension),jspb.Message.serializeBinaryExtensions=function(e,t,r,n){for(var o in r){var a=r[o],i=a.fieldInfo;if(!a.binaryWriterFn)throw Error("Message extension present that was generated without binary serialization support");var s=n.call(e,i);if(null!=s)if(i.isMessageType()){if(!a.binaryMessageSerializeFn)throw Error("Message extension present holding submessage without binary support enabled, and message is being serialized to binary format");a.binaryWriterFn.call(t,i.fieldIndex,s,a.binaryMessageSerializeFn)}else a.binaryWriterFn.call(t,i.fieldIndex,s)}},goog.exportProperty(jspb.Message,"serializeBinaryExtensions",jspb.Message.serializeBinaryExtensions),jspb.Message.readBinaryExtension=function(e,t,r,n,o){var a=r[t.getFieldNumber()];if(a){if(r=a.fieldInfo,!a.binaryReaderFn)throw Error("Deserializing extension whose generated code does not support binary format");if(r.isMessageType()){var i=new r.ctor;a.binaryReaderFn.call(t,i,a.binaryMessageDeserializeFn)}else i=a.binaryReaderFn.call(t);r.isRepeated&&!a.isPacked?(t=n.call(e,r))?t.push(i):o.call(e,r,[i]):o.call(e,r,i)}else t.skipField()},goog.exportProperty(jspb.Message,"readBinaryExtension",jspb.Message.readBinaryExtension),jspb.Message.getField=function(e,t){if(t<e.pivot_){t=jspb.Message.getIndex_(e,t);var r=e.array[t];return r===jspb.Message.EMPTY_LIST_SENTINEL_?e.array[t]=[]:r}if(e.extensionObject_)return(r=e.extensionObject_[t])===jspb.Message.EMPTY_LIST_SENTINEL_?e.extensionObject_[t]=[]:r},goog.exportProperty(jspb.Message,"getField",jspb.Message.getField),jspb.Message.getRepeatedField=function(e,t){return jspb.Message.getField(e,t)},goog.exportProperty(jspb.Message,"getRepeatedField",jspb.Message.getRepeatedField),jspb.Message.getOptionalFloatingPointField=function(e,t){return null==(e=jspb.Message.getField(e,t))?e:+e},goog.exportProperty(jspb.Message,"getOptionalFloatingPointField",jspb.Message.getOptionalFloatingPointField),jspb.Message.getBooleanField=function(e,t){return null==(e=jspb.Message.getField(e,t))?e:!!e},goog.exportProperty(jspb.Message,"getBooleanField",jspb.Message.getBooleanField),jspb.Message.getRepeatedFloatingPointField=function(e,t){var r=jspb.Message.getRepeatedField(e,t);if(e.convertedPrimitiveFields_||(e.convertedPrimitiveFields_={}),!e.convertedPrimitiveFields_[t]){for(var n=0;n<r.length;n++)r[n]=+r[n];e.convertedPrimitiveFields_[t]=!0}return r},goog.exportProperty(jspb.Message,"getRepeatedFloatingPointField",jspb.Message.getRepeatedFloatingPointField),jspb.Message.getRepeatedBooleanField=function(e,t){var r=jspb.Message.getRepeatedField(e,t);if(e.convertedPrimitiveFields_||(e.convertedPrimitiveFields_={}),!e.convertedPrimitiveFields_[t]){for(var n=0;n<r.length;n++)r[n]=!!r[n];e.convertedPrimitiveFields_[t]=!0}return r},goog.exportProperty(jspb.Message,"getRepeatedBooleanField",jspb.Message.getRepeatedBooleanField),jspb.Message.bytesAsB64=function(e){return null==e||"string"==typeof e?e:jspb.Message.SUPPORTS_UINT8ARRAY_&&e instanceof Uint8Array?goog.crypt.base64.encodeByteArray(e):(jspb.asserts.fail("Cannot coerce to b64 string: "+goog.typeOf(e)),null)},goog.exportProperty(jspb.Message,"bytesAsB64",jspb.Message.bytesAsB64),jspb.Message.bytesAsU8=function(e){return null==e||e instanceof Uint8Array?e:"string"==typeof e?goog.crypt.base64.decodeStringToUint8Array(e):(jspb.asserts.fail("Cannot coerce to Uint8Array: "+goog.typeOf(e)),null)},goog.exportProperty(jspb.Message,"bytesAsU8",jspb.Message.bytesAsU8),jspb.Message.bytesListAsB64=function(e){return jspb.Message.assertConsistentTypes_(e),e.length&&"string"!=typeof e[0]?goog.array.map(e,jspb.Message.bytesAsB64):e},goog.exportProperty(jspb.Message,"bytesListAsB64",jspb.Message.bytesListAsB64),jspb.Message.bytesListAsU8=function(e){return jspb.Message.assertConsistentTypes_(e),!e.length||e[0]instanceof Uint8Array?e:goog.array.map(e,jspb.Message.bytesAsU8)},goog.exportProperty(jspb.Message,"bytesListAsU8",jspb.Message.bytesListAsU8),jspb.Message.assertConsistentTypes_=function(e){if(goog.DEBUG&&e&&1<e.length){var t=goog.typeOf(e[0]);goog.array.forEach(e,(function(e){goog.typeOf(e)!=t&&jspb.asserts.fail("Inconsistent type in JSPB repeated field array. Got "+goog.typeOf(e)+" expected "+t)}))}},jspb.Message.getFieldWithDefault=function(e,t,r){return null==(e=jspb.Message.getField(e,t))?r:e},goog.exportProperty(jspb.Message,"getFieldWithDefault",jspb.Message.getFieldWithDefault),jspb.Message.getBooleanFieldWithDefault=function(e,t,r){return null==(e=jspb.Message.getBooleanField(e,t))?r:e},goog.exportProperty(jspb.Message,"getBooleanFieldWithDefault",jspb.Message.getBooleanFieldWithDefault),jspb.Message.getFloatingPointFieldWithDefault=function(e,t,r){return null==(e=jspb.Message.getOptionalFloatingPointField(e,t))?r:e},goog.exportProperty(jspb.Message,"getFloatingPointFieldWithDefault",jspb.Message.getFloatingPointFieldWithDefault),jspb.Message.getFieldProto3=jspb.Message.getFieldWithDefault,goog.exportProperty(jspb.Message,"getFieldProto3",jspb.Message.getFieldProto3),jspb.Message.getMapField=function(e,t,r,n){if(e.wrappers_||(e.wrappers_={}),t in e.wrappers_)return e.wrappers_[t];var o=jspb.Message.getField(e,t);if(!o){if(r)return;o=[],jspb.Message.setField(e,t,o)}return e.wrappers_[t]=new jspb.Map(o,n)},goog.exportProperty(jspb.Message,"getMapField",jspb.Message.getMapField),jspb.Message.setField=function(e,t,r){return jspb.asserts.assertInstanceof(e,jspb.Message),t<e.pivot_?e.array[jspb.Message.getIndex_(e,t)]=r:(jspb.Message.maybeInitEmptyExtensionObject_(e),e.extensionObject_[t]=r),e},goog.exportProperty(jspb.Message,"setField",jspb.Message.setField),jspb.Message.setProto3IntField=function(e,t,r){return jspb.Message.setFieldIgnoringDefault_(e,t,r,0)},goog.exportProperty(jspb.Message,"setProto3IntField",jspb.Message.setProto3IntField),jspb.Message.setProto3FloatField=function(e,t,r){return jspb.Message.setFieldIgnoringDefault_(e,t,r,0)},goog.exportProperty(jspb.Message,"setProto3FloatField",jspb.Message.setProto3FloatField),jspb.Message.setProto3BooleanField=function(e,t,r){return jspb.Message.setFieldIgnoringDefault_(e,t,r,!1)},goog.exportProperty(jspb.Message,"setProto3BooleanField",jspb.Message.setProto3BooleanField),jspb.Message.setProto3StringField=function(e,t,r){return jspb.Message.setFieldIgnoringDefault_(e,t,r,"")},goog.exportProperty(jspb.Message,"setProto3StringField",jspb.Message.setProto3StringField),jspb.Message.setProto3BytesField=function(e,t,r){return jspb.Message.setFieldIgnoringDefault_(e,t,r,"")},goog.exportProperty(jspb.Message,"setProto3BytesField",jspb.Message.setProto3BytesField),jspb.Message.setProto3EnumField=function(e,t,r){return jspb.Message.setFieldIgnoringDefault_(e,t,r,0)},goog.exportProperty(jspb.Message,"setProto3EnumField",jspb.Message.setProto3EnumField),jspb.Message.setProto3StringIntField=function(e,t,r){return jspb.Message.setFieldIgnoringDefault_(e,t,r,"0")},goog.exportProperty(jspb.Message,"setProto3StringIntField",jspb.Message.setProto3StringIntField),jspb.Message.setFieldIgnoringDefault_=function(e,t,r,n){return jspb.asserts.assertInstanceof(e,jspb.Message),r!==n?jspb.Message.setField(e,t,r):t<e.pivot_?e.array[jspb.Message.getIndex_(e,t)]=null:(jspb.Message.maybeInitEmptyExtensionObject_(e),delete e.extensionObject_[t]),e},jspb.Message.addToRepeatedField=function(e,t,r,n){return jspb.asserts.assertInstanceof(e,jspb.Message),t=jspb.Message.getRepeatedField(e,t),null!=n?t.splice(n,0,r):t.push(r),e},goog.exportProperty(jspb.Message,"addToRepeatedField",jspb.Message.addToRepeatedField),jspb.Message.setOneofField=function(e,t,r,n){return jspb.asserts.assertInstanceof(e,jspb.Message),(r=jspb.Message.computeOneofCase(e,r))&&r!==t&&void 0!==n&&(e.wrappers_&&r in e.wrappers_&&(e.wrappers_[r]=void 0),jspb.Message.setField(e,r,void 0)),jspb.Message.setField(e,t,n)},goog.exportProperty(jspb.Message,"setOneofField",jspb.Message.setOneofField),jspb.Message.computeOneofCase=function(e,t){for(var r,n,o=0;o<t.length;o++){var a=t[o],i=jspb.Message.getField(e,a);null!=i&&(r=a,n=i,jspb.Message.setField(e,a,void 0))}return r?(jspb.Message.setField(e,r,n),r):0},goog.exportProperty(jspb.Message,"computeOneofCase",jspb.Message.computeOneofCase),jspb.Message.getWrapperField=function(e,t,r,n){if(e.wrappers_||(e.wrappers_={}),!e.wrappers_[r]){var o=jspb.Message.getField(e,r);(n||o)&&(e.wrappers_[r]=new t(o))}return e.wrappers_[r]},goog.exportProperty(jspb.Message,"getWrapperField",jspb.Message.getWrapperField),jspb.Message.getRepeatedWrapperField=function(e,t,r){return jspb.Message.wrapRepeatedField_(e,t,r),(t=e.wrappers_[r])==jspb.Message.EMPTY_LIST_SENTINEL_&&(t=e.wrappers_[r]=[]),t},goog.exportProperty(jspb.Message,"getRepeatedWrapperField",jspb.Message.getRepeatedWrapperField),jspb.Message.wrapRepeatedField_=function(e,t,r){if(e.wrappers_||(e.wrappers_={}),!e.wrappers_[r]){for(var n=jspb.Message.getRepeatedField(e,r),o=[],a=0;a<n.length;a++)o[a]=new t(n[a]);e.wrappers_[r]=o}},jspb.Message.setWrapperField=function(e,t,r){jspb.asserts.assertInstanceof(e,jspb.Message),e.wrappers_||(e.wrappers_={});var n=r?r.toArray():r;return e.wrappers_[t]=r,jspb.Message.setField(e,t,n)},goog.exportProperty(jspb.Message,"setWrapperField",jspb.Message.setWrapperField),jspb.Message.setOneofWrapperField=function(e,t,r,n){jspb.asserts.assertInstanceof(e,jspb.Message),e.wrappers_||(e.wrappers_={});var o=n?n.toArray():n;return e.wrappers_[t]=n,jspb.Message.setOneofField(e,t,r,o)},goog.exportProperty(jspb.Message,"setOneofWrapperField",jspb.Message.setOneofWrapperField),jspb.Message.setRepeatedWrapperField=function(e,t,r){jspb.asserts.assertInstanceof(e,jspb.Message),e.wrappers_||(e.wrappers_={}),r=r||[];for(var n=[],o=0;o<r.length;o++)n[o]=r[o].toArray();return e.wrappers_[t]=r,jspb.Message.setField(e,t,n)},goog.exportProperty(jspb.Message,"setRepeatedWrapperField",jspb.Message.setRepeatedWrapperField),jspb.Message.addToRepeatedWrapperField=function(e,t,r,n,o){jspb.Message.wrapRepeatedField_(e,n,t);var a=e.wrappers_[t];return a||(a=e.wrappers_[t]=[]),r=r||new n,e=jspb.Message.getRepeatedField(e,t),null!=o?(a.splice(o,0,r),e.splice(o,0,r.toArray())):(a.push(r),e.push(r.toArray())),r},goog.exportProperty(jspb.Message,"addToRepeatedWrapperField",jspb.Message.addToRepeatedWrapperField),jspb.Message.toMap=function(e,t,r,n){for(var o={},a=0;a<e.length;a++)o[t.call(e[a])]=r?r.call(e[a],n,e[a]):e[a];return o},goog.exportProperty(jspb.Message,"toMap",jspb.Message.toMap),jspb.Message.prototype.syncMapFields_=function(){if(this.wrappers_)for(var e in this.wrappers_){var t=this.wrappers_[e];if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]&&t[r].toArray();else t&&t.toArray()}},jspb.Message.prototype.toArray=function(){return this.syncMapFields_(),this.array},goog.exportProperty(jspb.Message.prototype,"toArray",jspb.Message.prototype.toArray),jspb.Message.GENERATE_TO_STRING&&(jspb.Message.prototype.toString=function(){return this.syncMapFields_(),this.array.toString()}),jspb.Message.prototype.getExtension=function(e){if(this.extensionObject_){this.wrappers_||(this.wrappers_={});var t=e.fieldIndex;if(e.isRepeated){if(e.isMessageType())return this.wrappers_[t]||(this.wrappers_[t]=goog.array.map(this.extensionObject_[t]||[],(function(t){return new e.ctor(t)}))),this.wrappers_[t]}else if(e.isMessageType())return!this.wrappers_[t]&&this.extensionObject_[t]&&(this.wrappers_[t]=new e.ctor(this.extensionObject_[t])),this.wrappers_[t];return this.extensionObject_[t]}},goog.exportProperty(jspb.Message.prototype,"getExtension",jspb.Message.prototype.getExtension),jspb.Message.prototype.setExtension=function(e,t){this.wrappers_||(this.wrappers_={}),jspb.Message.maybeInitEmptyExtensionObject_(this);var r=e.fieldIndex;return e.isRepeated?(t=t||[],e.isMessageType()?(this.wrappers_[r]=t,this.extensionObject_[r]=goog.array.map(t,(function(e){return e.toArray()}))):this.extensionObject_[r]=t):e.isMessageType()?(this.wrappers_[r]=t,this.extensionObject_[r]=t?t.toArray():t):this.extensionObject_[r]=t,this},goog.exportProperty(jspb.Message.prototype,"setExtension",jspb.Message.prototype.setExtension),jspb.Message.difference=function(e,t){if(!(e instanceof t.constructor))throw Error("Messages have different types.");var r=e.toArray();t=t.toArray();var n=[],o=0,a=r.length>t.length?r.length:t.length;for(e.getJsPbMessageId()&&(n[0]=e.getJsPbMessageId(),o=1);o<a;o++)jspb.Message.compareFields(r[o],t[o])||(n[o]=t[o]);return new e.constructor(n)},goog.exportProperty(jspb.Message,"difference",jspb.Message.difference),jspb.Message.equals=function(e,t){return e==t||!(!e||!t)&&e instanceof t.constructor&&jspb.Message.compareFields(e.toArray(),t.toArray())},goog.exportProperty(jspb.Message,"equals",jspb.Message.equals),jspb.Message.compareExtensions=function(e,t){e=e||{},t=t||{};var r,n={};for(r in e)n[r]=0;for(r in t)n[r]=0;for(r in n)if(!jspb.Message.compareFields(e[r],t[r]))return!1;return!0},goog.exportProperty(jspb.Message,"compareExtensions",jspb.Message.compareExtensions),jspb.Message.compareFields=function(e,t){if(e==t)return!0;if(!goog.isObject(e)||!goog.isObject(t))return!!("number"==typeof e&&isNaN(e)||"number"==typeof t&&isNaN(t))&&String(e)==String(t);if(e.constructor!=t.constructor)return!1;if(jspb.Message.SUPPORTS_UINT8ARRAY_&&e.constructor===Uint8Array){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!=t[r])return!1;return!0}if(e.constructor===Array){var n=void 0,o=void 0,a=Math.max(e.length,t.length);for(r=0;r<a;r++){var i=e[r],s=t[r];if(i&&i.constructor==Object&&(jspb.asserts.assert(void 0===n),jspb.asserts.assert(r===e.length-1),n=i,i=void 0),s&&s.constructor==Object&&(jspb.asserts.assert(void 0===o),jspb.asserts.assert(r===t.length-1),o=s,s=void 0),!jspb.Message.compareFields(i,s))return!1}return!n&&!o||(n=n||{},o=o||{},jspb.Message.compareExtensions(n,o))}if(e.constructor===Object)return jspb.Message.compareExtensions(e,t);throw Error("Invalid type in JSPB array")},goog.exportProperty(jspb.Message,"compareFields",jspb.Message.compareFields),jspb.Message.prototype.cloneMessage=function(){return jspb.Message.cloneMessage(this)},goog.exportProperty(jspb.Message.prototype,"cloneMessage",jspb.Message.prototype.cloneMessage),jspb.Message.prototype.clone=function(){return jspb.Message.cloneMessage(this)},goog.exportProperty(jspb.Message.prototype,"clone",jspb.Message.prototype.clone),jspb.Message.clone=function(e){return jspb.Message.cloneMessage(e)},goog.exportProperty(jspb.Message,"clone",jspb.Message.clone),jspb.Message.cloneMessage=function(e){return new e.constructor(jspb.Message.clone_(e.toArray()))},jspb.Message.copyInto=function(e,t){jspb.asserts.assertInstanceof(e,jspb.Message),jspb.asserts.assertInstanceof(t,jspb.Message),jspb.asserts.assert(e.constructor==t.constructor,"Copy source and target message should have the same type."),e=jspb.Message.clone(e);for(var r=t.toArray(),n=e.toArray(),o=r.length=0;o<n.length;o++)r[o]=n[o];t.wrappers_=e.wrappers_,t.extensionObject_=e.extensionObject_},goog.exportProperty(jspb.Message,"copyInto",jspb.Message.copyInto),jspb.Message.clone_=function(e){if(Array.isArray(e)){for(var t=Array(e.length),r=0;r<e.length;r++){var n=e[r];null!=n&&(t[r]="object"==typeof n?jspb.Message.clone_(jspb.asserts.assert(n)):n)}return t}if(jspb.Message.SUPPORTS_UINT8ARRAY_&&e instanceof Uint8Array)return new Uint8Array(e);for(r in t={},e)null!=(n=e[r])&&(t[r]="object"==typeof n?jspb.Message.clone_(jspb.asserts.assert(n)):n);return t},jspb.Message.registerMessageType=function(e,t){t.messageId=e},goog.exportProperty(jspb.Message,"registerMessageType",jspb.Message.registerMessageType),jspb.Message.messageSetExtensions={},jspb.Message.messageSetExtensionsBinary={},jspb.Export={},exports.Map=jspb.Map,exports.Message=jspb.Message,exports.BinaryReader=jspb.BinaryReader,exports.BinaryWriter=jspb.BinaryWriter,exports.ExtensionFieldInfo=jspb.ExtensionFieldInfo,exports.ExtensionFieldBinaryInfo=jspb.ExtensionFieldBinaryInfo,exports.exportSymbol=goog.exportSymbol,exports.inherits=goog.inherits,exports.object={extend:goog.object.extend},exports.typeOf=goog.typeOf})(googleProtobuf);var calculator_options_pb={};!function(e){var t=googleProtobuf,r=t,n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==n&&n||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.mediapipe.CalculatorOptions",null,n),proto.mediapipe.CalculatorOptions=function(e){t.Message.initialize(this,e,0,2,null,null)},r.inherits(proto.mediapipe.CalculatorOptions,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.CalculatorOptions.displayName="proto.mediapipe.CalculatorOptions"),proto.mediapipe.CalculatorOptions.extensions={},proto.mediapipe.CalculatorOptions.extensionsBinary={},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.CalculatorOptions.prototype.toObject=function(e){return proto.mediapipe.CalculatorOptions.toObject(e,this)},proto.mediapipe.CalculatorOptions.toObject=function(e,r){var n,o={mergeFields:null==(n=t.Message.getBooleanField(r,1))?void 0:n};return t.Message.toObjectExtension(r,o,proto.mediapipe.CalculatorOptions.extensions,proto.mediapipe.CalculatorOptions.prototype.getExtension,e),e&&(o.$jspbMessageInstance=r),o}),proto.mediapipe.CalculatorOptions.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.CalculatorOptions;return proto.mediapipe.CalculatorOptions.deserializeBinaryFromReader(n,r)},proto.mediapipe.CalculatorOptions.deserializeBinaryFromReader=function(e,r){for(;r.nextField()&&!r.isEndGroup();)if(1===r.getFieldNumber()){var n=r.readBool();e.setMergeFields(n)}else t.Message.readBinaryExtension(e,r,proto.mediapipe.CalculatorOptions.extensionsBinary,proto.mediapipe.CalculatorOptions.prototype.getExtension,proto.mediapipe.CalculatorOptions.prototype.setExtension);return e},proto.mediapipe.CalculatorOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.CalculatorOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.CalculatorOptions.serializeBinaryToWriter=function(e,r){var n;null!=(n=t.Message.getField(e,1))&&r.writeBool(1,n),t.Message.serializeBinaryExtensions(e,r,proto.mediapipe.CalculatorOptions.extensionsBinary,proto.mediapipe.CalculatorOptions.prototype.getExtension)},proto.mediapipe.CalculatorOptions.prototype.getMergeFields=function(){return t.Message.getBooleanFieldWithDefault(this,1,!1)},proto.mediapipe.CalculatorOptions.prototype.setMergeFields=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.CalculatorOptions.prototype.clearMergeFields=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.CalculatorOptions.prototype.hasMergeFields=function(){return null!=t.Message.getField(this,1)},r.object.extend(e,proto.mediapipe)}(calculator_options_pb);var any_pb={};!function(e){var t=googleProtobuf,r=t,n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==n&&n||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.google.protobuf.Any",null,n),proto.google.protobuf.Any=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.google.protobuf.Any,t.Message),r.DEBUG&&!COMPILED&&(proto.google.protobuf.Any.displayName="proto.google.protobuf.Any"),t.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.Any.prototype.toObject=function(e){return proto.google.protobuf.Any.toObject(e,this)},proto.google.protobuf.Any.toObject=function(e,r){var n={typeUrl:t.Message.getFieldWithDefault(r,1,""),value:r.getValue_asB64()};return e&&(n.$jspbMessageInstance=r),n}),proto.google.protobuf.Any.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.google.protobuf.Any;return proto.google.protobuf.Any.deserializeBinaryFromReader(n,r)},proto.google.protobuf.Any.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readString();e.setTypeUrl(r);break;case 2:r=t.readBytes(),e.setValue(r);break;default:t.skipField()}return e},proto.google.protobuf.Any.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.google.protobuf.Any.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.google.protobuf.Any.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getTypeUrl()).length>0&&t.writeString(1,r),(r=e.getValue_asU8()).length>0&&t.writeBytes(2,r)},proto.google.protobuf.Any.prototype.getTypeUrl=function(){return t.Message.getFieldWithDefault(this,1,"")},proto.google.protobuf.Any.prototype.setTypeUrl=function(e){return t.Message.setProto3StringField(this,1,e)},proto.google.protobuf.Any.prototype.getValue=function(){return t.Message.getFieldWithDefault(this,2,"")},proto.google.protobuf.Any.prototype.getValue_asB64=function(){return t.Message.bytesAsB64(this.getValue())},proto.google.protobuf.Any.prototype.getValue_asU8=function(){return t.Message.bytesAsU8(this.getValue())},proto.google.protobuf.Any.prototype.setValue=function(e){return t.Message.setProto3BytesField(this,2,e)},r.object.extend(e,proto.google.protobuf),proto.google.protobuf.Any.prototype.getTypeName=function(){return this.getTypeUrl().split("/").pop()},proto.google.protobuf.Any.prototype.pack=function(e,t,r){r||(r="type.googleapis.com/"),"/"!=r.substr(-1)?this.setTypeUrl(r+"/"+t):this.setTypeUrl(r+t),this.setValue(e)},proto.google.protobuf.Any.prototype.unpack=function(e,t){return this.getTypeName()==t?e(this.getValue_asU8()):null}}(any_pb);var mediapipe_options_pb={};!function(e){var t=googleProtobuf,r=t,n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==n&&n||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.mediapipe.MediaPipeOptions",null,n),proto.mediapipe.MediaPipeOptions=function(e){t.Message.initialize(this,e,0,1,null,null)},r.inherits(proto.mediapipe.MediaPipeOptions,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.MediaPipeOptions.displayName="proto.mediapipe.MediaPipeOptions"),proto.mediapipe.MediaPipeOptions.extensions={},proto.mediapipe.MediaPipeOptions.extensionsBinary={},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.MediaPipeOptions.prototype.toObject=function(e){return proto.mediapipe.MediaPipeOptions.toObject(e,this)},proto.mediapipe.MediaPipeOptions.toObject=function(e,r){var n={};return t.Message.toObjectExtension(r,n,proto.mediapipe.MediaPipeOptions.extensions,proto.mediapipe.MediaPipeOptions.prototype.getExtension,e),e&&(n.$jspbMessageInstance=r),n}),proto.mediapipe.MediaPipeOptions.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.MediaPipeOptions;return proto.mediapipe.MediaPipeOptions.deserializeBinaryFromReader(n,r)},proto.mediapipe.MediaPipeOptions.deserializeBinaryFromReader=function(e,r){for(;r.nextField()&&!r.isEndGroup();)r.getFieldNumber(),t.Message.readBinaryExtension(e,r,proto.mediapipe.MediaPipeOptions.extensionsBinary,proto.mediapipe.MediaPipeOptions.prototype.getExtension,proto.mediapipe.MediaPipeOptions.prototype.setExtension);return e},proto.mediapipe.MediaPipeOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.MediaPipeOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.MediaPipeOptions.serializeBinaryToWriter=function(e,r){t.Message.serializeBinaryExtensions(e,r,proto.mediapipe.MediaPipeOptions.extensionsBinary,proto.mediapipe.MediaPipeOptions.prototype.getExtension)},r.object.extend(e,proto.mediapipe)}(mediapipe_options_pb);var packet_factory_pb={};!function(e){var t=googleProtobuf,r=t,n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==n&&n||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.mediapipe.PacketFactoryConfig",null,n),r.exportSymbol("proto.mediapipe.PacketFactoryOptions",null,n),r.exportSymbol("proto.mediapipe.PacketManagerConfig",null,n),proto.mediapipe.PacketFactoryOptions=function(e){t.Message.initialize(this,e,0,1,null,null)},r.inherits(proto.mediapipe.PacketFactoryOptions,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.PacketFactoryOptions.displayName="proto.mediapipe.PacketFactoryOptions"),proto.mediapipe.PacketFactoryOptions.extensions={},proto.mediapipe.PacketFactoryOptions.extensionsBinary={},proto.mediapipe.PacketFactoryConfig=function(e){t.Message.initialize(this,e,0,500,null,null)},r.inherits(proto.mediapipe.PacketFactoryConfig,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.PacketFactoryConfig.displayName="proto.mediapipe.PacketFactoryConfig"),proto.mediapipe.PacketManagerConfig=function(e){t.Message.initialize(this,e,0,-1,proto.mediapipe.PacketManagerConfig.repeatedFields_,null)},r.inherits(proto.mediapipe.PacketManagerConfig,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.PacketManagerConfig.displayName="proto.mediapipe.PacketManagerConfig"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.PacketFactoryOptions.prototype.toObject=function(e){return proto.mediapipe.PacketFactoryOptions.toObject(e,this)},proto.mediapipe.PacketFactoryOptions.toObject=function(e,r){var n={};return t.Message.toObjectExtension(r,n,proto.mediapipe.PacketFactoryOptions.extensions,proto.mediapipe.PacketFactoryOptions.prototype.getExtension,e),e&&(n.$jspbMessageInstance=r),n}),proto.mediapipe.PacketFactoryOptions.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.PacketFactoryOptions;return proto.mediapipe.PacketFactoryOptions.deserializeBinaryFromReader(n,r)},proto.mediapipe.PacketFactoryOptions.deserializeBinaryFromReader=function(e,r){for(;r.nextField()&&!r.isEndGroup();)r.getFieldNumber(),t.Message.readBinaryExtension(e,r,proto.mediapipe.PacketFactoryOptions.extensionsBinary,proto.mediapipe.PacketFactoryOptions.prototype.getExtension,proto.mediapipe.PacketFactoryOptions.prototype.setExtension);return e},proto.mediapipe.PacketFactoryOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.PacketFactoryOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.PacketFactoryOptions.serializeBinaryToWriter=function(e,r){t.Message.serializeBinaryExtensions(e,r,proto.mediapipe.PacketFactoryOptions.extensionsBinary,proto.mediapipe.PacketFactoryOptions.prototype.getExtension)},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.PacketFactoryConfig.prototype.toObject=function(e){return proto.mediapipe.PacketFactoryConfig.toObject(e,this)},proto.mediapipe.PacketFactoryConfig.toObject=function(e,r){var n,o={packetFactory:null==(n=t.Message.getField(r,1))?void 0:n,outputSidePacket:null==(n=t.Message.getField(r,2))?void 0:n,externalOutput:null==(n=t.Message.getField(r,1002))?void 0:n,options:(n=r.getOptions())&&proto.mediapipe.PacketFactoryOptions.toObject(e,n)};return e&&(o.$jspbMessageInstance=r),o}),proto.mediapipe.PacketFactoryConfig.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.PacketFactoryConfig;return proto.mediapipe.PacketFactoryConfig.deserializeBinaryFromReader(n,r)},proto.mediapipe.PacketFactoryConfig.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readString();e.setPacketFactory(r);break;case 2:r=t.readString(),e.setOutputSidePacket(r);break;case 1002:r=t.readString(),e.setExternalOutput(r);break;case 3:r=new proto.mediapipe.PacketFactoryOptions,t.readMessage(r,proto.mediapipe.PacketFactoryOptions.deserializeBinaryFromReader),e.setOptions(r);break;default:t.skipField()}return e},proto.mediapipe.PacketFactoryConfig.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.PacketFactoryConfig.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.PacketFactoryConfig.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=t.Message.getField(e,1))&&r.writeString(1,n),null!=(n=t.Message.getField(e,2))&&r.writeString(2,n),null!=(n=t.Message.getField(e,1002))&&r.writeString(1002,n),null!=(n=e.getOptions())&&r.writeMessage(3,n,proto.mediapipe.PacketFactoryOptions.serializeBinaryToWriter)},proto.mediapipe.PacketFactoryConfig.prototype.getPacketFactory=function(){return t.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.PacketFactoryConfig.prototype.setPacketFactory=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.PacketFactoryConfig.prototype.clearPacketFactory=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.PacketFactoryConfig.prototype.hasPacketFactory=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.PacketFactoryConfig.prototype.getOutputSidePacket=function(){return t.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.PacketFactoryConfig.prototype.setOutputSidePacket=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.PacketFactoryConfig.prototype.clearOutputSidePacket=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.PacketFactoryConfig.prototype.hasOutputSidePacket=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.PacketFactoryConfig.prototype.getExternalOutput=function(){return t.Message.getFieldWithDefault(this,1002,"")},proto.mediapipe.PacketFactoryConfig.prototype.setExternalOutput=function(e){return t.Message.setField(this,1002,e)},proto.mediapipe.PacketFactoryConfig.prototype.clearExternalOutput=function(){return t.Message.setField(this,1002,void 0)},proto.mediapipe.PacketFactoryConfig.prototype.hasExternalOutput=function(){return null!=t.Message.getField(this,1002)},proto.mediapipe.PacketFactoryConfig.prototype.getOptions=function(){return t.Message.getWrapperField(this,proto.mediapipe.PacketFactoryOptions,3)},proto.mediapipe.PacketFactoryConfig.prototype.setOptions=function(e){return t.Message.setWrapperField(this,3,e)},proto.mediapipe.PacketFactoryConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.PacketFactoryConfig.prototype.hasOptions=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.PacketManagerConfig.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.PacketManagerConfig.prototype.toObject=function(e){return proto.mediapipe.PacketManagerConfig.toObject(e,this)},proto.mediapipe.PacketManagerConfig.toObject=function(e,r){var n={packetList:t.Message.toObjectList(r.getPacketList(),proto.mediapipe.PacketFactoryConfig.toObject,e)};return e&&(n.$jspbMessageInstance=r),n}),proto.mediapipe.PacketManagerConfig.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.PacketManagerConfig;return proto.mediapipe.PacketManagerConfig.deserializeBinaryFromReader(n,r)},proto.mediapipe.PacketManagerConfig.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var r=new proto.mediapipe.PacketFactoryConfig;t.readMessage(r,proto.mediapipe.PacketFactoryConfig.deserializeBinaryFromReader),e.addPacket(r)}else t.skipField();return e},proto.mediapipe.PacketManagerConfig.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.PacketManagerConfig.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.PacketManagerConfig.serializeBinaryToWriter=function(e,t){var r;(r=e.getPacketList()).length>0&&t.writeRepeatedMessage(1,r,proto.mediapipe.PacketFactoryConfig.serializeBinaryToWriter)},proto.mediapipe.PacketManagerConfig.prototype.getPacketList=function(){return t.Message.getRepeatedWrapperField(this,proto.mediapipe.PacketFactoryConfig,1)},proto.mediapipe.PacketManagerConfig.prototype.setPacketList=function(e){return t.Message.setRepeatedWrapperField(this,1,e)},proto.mediapipe.PacketManagerConfig.prototype.addPacket=function(e,r){return t.Message.addToRepeatedWrapperField(this,1,e,proto.mediapipe.PacketFactoryConfig,r)},proto.mediapipe.PacketManagerConfig.prototype.clearPacketList=function(){return this.setPacketList([])},r.object.extend(e,proto.mediapipe)}(packet_factory_pb);var packet_generator_pb={};!function(e){var t=googleProtobuf,r=t,n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==n&&n||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.mediapipe.PacketGeneratorConfig",null,n),r.exportSymbol("proto.mediapipe.PacketGeneratorOptions",null,n),proto.mediapipe.PacketGeneratorOptions=function(e){t.Message.initialize(this,e,0,2,null,null)},r.inherits(proto.mediapipe.PacketGeneratorOptions,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.PacketGeneratorOptions.displayName="proto.mediapipe.PacketGeneratorOptions"),proto.mediapipe.PacketGeneratorOptions.extensions={},proto.mediapipe.PacketGeneratorOptions.extensionsBinary={},proto.mediapipe.PacketGeneratorConfig=function(e){t.Message.initialize(this,e,0,500,proto.mediapipe.PacketGeneratorConfig.repeatedFields_,null)},r.inherits(proto.mediapipe.PacketGeneratorConfig,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.PacketGeneratorConfig.displayName="proto.mediapipe.PacketGeneratorConfig"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.PacketGeneratorOptions.prototype.toObject=function(e){return proto.mediapipe.PacketGeneratorOptions.toObject(e,this)},proto.mediapipe.PacketGeneratorOptions.toObject=function(e,r){var n={mergeFields:t.Message.getBooleanFieldWithDefault(r,1,!0)};return t.Message.toObjectExtension(r,n,proto.mediapipe.PacketGeneratorOptions.extensions,proto.mediapipe.PacketGeneratorOptions.prototype.getExtension,e),e&&(n.$jspbMessageInstance=r),n}),proto.mediapipe.PacketGeneratorOptions.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.PacketGeneratorOptions;return proto.mediapipe.PacketGeneratorOptions.deserializeBinaryFromReader(n,r)},proto.mediapipe.PacketGeneratorOptions.deserializeBinaryFromReader=function(e,r){for(;r.nextField()&&!r.isEndGroup();)if(1===r.getFieldNumber()){var n=r.readBool();e.setMergeFields(n)}else t.Message.readBinaryExtension(e,r,proto.mediapipe.PacketGeneratorOptions.extensionsBinary,proto.mediapipe.PacketGeneratorOptions.prototype.getExtension,proto.mediapipe.PacketGeneratorOptions.prototype.setExtension);return e},proto.mediapipe.PacketGeneratorOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.PacketGeneratorOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.PacketGeneratorOptions.serializeBinaryToWriter=function(e,r){var n;null!=(n=t.Message.getField(e,1))&&r.writeBool(1,n),t.Message.serializeBinaryExtensions(e,r,proto.mediapipe.PacketGeneratorOptions.extensionsBinary,proto.mediapipe.PacketGeneratorOptions.prototype.getExtension)},proto.mediapipe.PacketGeneratorOptions.prototype.getMergeFields=function(){return t.Message.getBooleanFieldWithDefault(this,1,!0)},proto.mediapipe.PacketGeneratorOptions.prototype.setMergeFields=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.PacketGeneratorOptions.prototype.clearMergeFields=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.PacketGeneratorOptions.prototype.hasMergeFields=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.PacketGeneratorConfig.repeatedFields_=[2,1002,3,1003],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.PacketGeneratorConfig.prototype.toObject=function(e){return proto.mediapipe.PacketGeneratorConfig.toObject(e,this)},proto.mediapipe.PacketGeneratorConfig.toObject=function(e,r){var n,o={packetGenerator:null==(n=t.Message.getField(r,1))?void 0:n,inputSidePacketList:null==(n=t.Message.getRepeatedField(r,2))?void 0:n,externalInputList:null==(n=t.Message.getRepeatedField(r,1002))?void 0:n,outputSidePacketList:null==(n=t.Message.getRepeatedField(r,3))?void 0:n,externalOutputList:null==(n=t.Message.getRepeatedField(r,1003))?void 0:n,options:(n=r.getOptions())&&proto.mediapipe.PacketGeneratorOptions.toObject(e,n)};return e&&(o.$jspbMessageInstance=r),o}),proto.mediapipe.PacketGeneratorConfig.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.PacketGeneratorConfig;return proto.mediapipe.PacketGeneratorConfig.deserializeBinaryFromReader(n,r)},proto.mediapipe.PacketGeneratorConfig.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readString();e.setPacketGenerator(r);break;case 2:r=t.readString(),e.addInputSidePacket(r);break;case 1002:r=t.readString(),e.addExternalInput(r);break;case 3:r=t.readString(),e.addOutputSidePacket(r);break;case 1003:r=t.readString(),e.addExternalOutput(r);break;case 4:r=new proto.mediapipe.PacketGeneratorOptions,t.readMessage(r,proto.mediapipe.PacketGeneratorOptions.deserializeBinaryFromReader),e.setOptions(r);break;default:t.skipField()}return e},proto.mediapipe.PacketGeneratorConfig.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.PacketGeneratorConfig.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.PacketGeneratorConfig.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=t.Message.getField(e,1))&&r.writeString(1,n),(n=e.getInputSidePacketList()).length>0&&r.writeRepeatedString(2,n),(n=e.getExternalInputList()).length>0&&r.writeRepeatedString(1002,n),(n=e.getOutputSidePacketList()).length>0&&r.writeRepeatedString(3,n),(n=e.getExternalOutputList()).length>0&&r.writeRepeatedString(1003,n),null!=(n=e.getOptions())&&r.writeMessage(4,n,proto.mediapipe.PacketGeneratorOptions.serializeBinaryToWriter)},proto.mediapipe.PacketGeneratorConfig.prototype.getPacketGenerator=function(){return t.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.PacketGeneratorConfig.prototype.setPacketGenerator=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.PacketGeneratorConfig.prototype.clearPacketGenerator=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.PacketGeneratorConfig.prototype.hasPacketGenerator=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.PacketGeneratorConfig.prototype.getInputSidePacketList=function(){return t.Message.getRepeatedField(this,2)},proto.mediapipe.PacketGeneratorConfig.prototype.setInputSidePacketList=function(e){return t.Message.setField(this,2,e||[])},proto.mediapipe.PacketGeneratorConfig.prototype.addInputSidePacket=function(e,r){return t.Message.addToRepeatedField(this,2,e,r)},proto.mediapipe.PacketGeneratorConfig.prototype.clearInputSidePacketList=function(){return this.setInputSidePacketList([])},proto.mediapipe.PacketGeneratorConfig.prototype.getExternalInputList=function(){return t.Message.getRepeatedField(this,1002)},proto.mediapipe.PacketGeneratorConfig.prototype.setExternalInputList=function(e){return t.Message.setField(this,1002,e||[])},proto.mediapipe.PacketGeneratorConfig.prototype.addExternalInput=function(e,r){return t.Message.addToRepeatedField(this,1002,e,r)},proto.mediapipe.PacketGeneratorConfig.prototype.clearExternalInputList=function(){return this.setExternalInputList([])},proto.mediapipe.PacketGeneratorConfig.prototype.getOutputSidePacketList=function(){return t.Message.getRepeatedField(this,3)},proto.mediapipe.PacketGeneratorConfig.prototype.setOutputSidePacketList=function(e){return t.Message.setField(this,3,e||[])},proto.mediapipe.PacketGeneratorConfig.prototype.addOutputSidePacket=function(e,r){return t.Message.addToRepeatedField(this,3,e,r)},proto.mediapipe.PacketGeneratorConfig.prototype.clearOutputSidePacketList=function(){return this.setOutputSidePacketList([])},proto.mediapipe.PacketGeneratorConfig.prototype.getExternalOutputList=function(){return t.Message.getRepeatedField(this,1003)},proto.mediapipe.PacketGeneratorConfig.prototype.setExternalOutputList=function(e){return t.Message.setField(this,1003,e||[])},proto.mediapipe.PacketGeneratorConfig.prototype.addExternalOutput=function(e,r){return t.Message.addToRepeatedField(this,1003,e,r)},proto.mediapipe.PacketGeneratorConfig.prototype.clearExternalOutputList=function(){return this.setExternalOutputList([])},proto.mediapipe.PacketGeneratorConfig.prototype.getOptions=function(){return t.Message.getWrapperField(this,proto.mediapipe.PacketGeneratorOptions,4)},proto.mediapipe.PacketGeneratorConfig.prototype.setOptions=function(e){return t.Message.setWrapperField(this,4,e)},proto.mediapipe.PacketGeneratorConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.PacketGeneratorConfig.prototype.hasOptions=function(){return null!=t.Message.getField(this,4)},r.object.extend(e,proto.mediapipe)}(packet_generator_pb);var status_handler_pb={};!function(e){var t=googleProtobuf,r=t,n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==n&&n||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),o=mediapipe_options_pb;r.object.extend(proto,o),r.exportSymbol("proto.mediapipe.StatusHandlerConfig",null,n),proto.mediapipe.StatusHandlerConfig=function(e){t.Message.initialize(this,e,0,500,proto.mediapipe.StatusHandlerConfig.repeatedFields_,null)},r.inherits(proto.mediapipe.StatusHandlerConfig,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.StatusHandlerConfig.displayName="proto.mediapipe.StatusHandlerConfig"),proto.mediapipe.StatusHandlerConfig.repeatedFields_=[2,1002],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.StatusHandlerConfig.prototype.toObject=function(e){return proto.mediapipe.StatusHandlerConfig.toObject(e,this)},proto.mediapipe.StatusHandlerConfig.toObject=function(e,r){var n,a={statusHandler:null==(n=t.Message.getField(r,1))?void 0:n,inputSidePacketList:null==(n=t.Message.getRepeatedField(r,2))?void 0:n,externalInputList:null==(n=t.Message.getRepeatedField(r,1002))?void 0:n,options:(n=r.getOptions())&&o.MediaPipeOptions.toObject(e,n)};return e&&(a.$jspbMessageInstance=r),a}),proto.mediapipe.StatusHandlerConfig.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.StatusHandlerConfig;return proto.mediapipe.StatusHandlerConfig.deserializeBinaryFromReader(n,r)},proto.mediapipe.StatusHandlerConfig.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readString();e.setStatusHandler(r);break;case 2:r=t.readString(),e.addInputSidePacket(r);break;case 1002:r=t.readString(),e.addExternalInput(r);break;case 3:r=new o.MediaPipeOptions,t.readMessage(r,o.MediaPipeOptions.deserializeBinaryFromReader),e.setOptions(r);break;default:t.skipField()}return e},proto.mediapipe.StatusHandlerConfig.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.StatusHandlerConfig.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.StatusHandlerConfig.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=t.Message.getField(e,1))&&r.writeString(1,n),(n=e.getInputSidePacketList()).length>0&&r.writeRepeatedString(2,n),(n=e.getExternalInputList()).length>0&&r.writeRepeatedString(1002,n),null!=(n=e.getOptions())&&r.writeMessage(3,n,o.MediaPipeOptions.serializeBinaryToWriter)},proto.mediapipe.StatusHandlerConfig.prototype.getStatusHandler=function(){return t.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.StatusHandlerConfig.prototype.setStatusHandler=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.StatusHandlerConfig.prototype.clearStatusHandler=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.StatusHandlerConfig.prototype.hasStatusHandler=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.StatusHandlerConfig.prototype.getInputSidePacketList=function(){return t.Message.getRepeatedField(this,2)},proto.mediapipe.StatusHandlerConfig.prototype.setInputSidePacketList=function(e){return t.Message.setField(this,2,e||[])},proto.mediapipe.StatusHandlerConfig.prototype.addInputSidePacket=function(e,r){return t.Message.addToRepeatedField(this,2,e,r)},proto.mediapipe.StatusHandlerConfig.prototype.clearInputSidePacketList=function(){return this.setInputSidePacketList([])},proto.mediapipe.StatusHandlerConfig.prototype.getExternalInputList=function(){return t.Message.getRepeatedField(this,1002)},proto.mediapipe.StatusHandlerConfig.prototype.setExternalInputList=function(e){return t.Message.setField(this,1002,e||[])},proto.mediapipe.StatusHandlerConfig.prototype.addExternalInput=function(e,r){return t.Message.addToRepeatedField(this,1002,e,r)},proto.mediapipe.StatusHandlerConfig.prototype.clearExternalInputList=function(){return this.setExternalInputList([])},proto.mediapipe.StatusHandlerConfig.prototype.getOptions=function(){return t.Message.getWrapperField(this,o.MediaPipeOptions,3)},proto.mediapipe.StatusHandlerConfig.prototype.setOptions=function(e){return t.Message.setWrapperField(this,3,e)},proto.mediapipe.StatusHandlerConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.StatusHandlerConfig.prototype.hasOptions=function(){return null!=t.Message.getField(this,3)},r.object.extend(e,proto.mediapipe)}(status_handler_pb);var stream_handler_pb={};!function(e){var t=googleProtobuf,r=t,n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==n&&n||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),o=mediapipe_options_pb;r.object.extend(proto,o),r.exportSymbol("proto.mediapipe.InputStreamHandlerConfig",null,n),r.exportSymbol("proto.mediapipe.OutputStreamHandlerConfig",null,n),proto.mediapipe.InputStreamHandlerConfig=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.InputStreamHandlerConfig,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.InputStreamHandlerConfig.displayName="proto.mediapipe.InputStreamHandlerConfig"),proto.mediapipe.OutputStreamHandlerConfig=function(e){t.Message.initialize(this,e,0,-1,proto.mediapipe.OutputStreamHandlerConfig.repeatedFields_,null)},r.inherits(proto.mediapipe.OutputStreamHandlerConfig,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.OutputStreamHandlerConfig.displayName="proto.mediapipe.OutputStreamHandlerConfig"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InputStreamHandlerConfig.prototype.toObject=function(e){return proto.mediapipe.InputStreamHandlerConfig.toObject(e,this)},proto.mediapipe.InputStreamHandlerConfig.toObject=function(e,r){var n,a={inputStreamHandler:t.Message.getFieldWithDefault(r,1,"DefaultInputStreamHandler"),options:(n=r.getOptions())&&o.MediaPipeOptions.toObject(e,n)};return e&&(a.$jspbMessageInstance=r),a}),proto.mediapipe.InputStreamHandlerConfig.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.InputStreamHandlerConfig;return proto.mediapipe.InputStreamHandlerConfig.deserializeBinaryFromReader(n,r)},proto.mediapipe.InputStreamHandlerConfig.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readString();e.setInputStreamHandler(r);break;case 3:r=new o.MediaPipeOptions,t.readMessage(r,o.MediaPipeOptions.deserializeBinaryFromReader),e.setOptions(r);break;default:t.skipField()}return e},proto.mediapipe.InputStreamHandlerConfig.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.InputStreamHandlerConfig.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.InputStreamHandlerConfig.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=t.Message.getField(e,1))&&r.writeString(1,n),null!=(n=e.getOptions())&&r.writeMessage(3,n,o.MediaPipeOptions.serializeBinaryToWriter)},proto.mediapipe.InputStreamHandlerConfig.prototype.getInputStreamHandler=function(){return t.Message.getFieldWithDefault(this,1,"DefaultInputStreamHandler")},proto.mediapipe.InputStreamHandlerConfig.prototype.setInputStreamHandler=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.InputStreamHandlerConfig.prototype.clearInputStreamHandler=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.InputStreamHandlerConfig.prototype.hasInputStreamHandler=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.InputStreamHandlerConfig.prototype.getOptions=function(){return t.Message.getWrapperField(this,o.MediaPipeOptions,3)},proto.mediapipe.InputStreamHandlerConfig.prototype.setOptions=function(e){return t.Message.setWrapperField(this,3,e)},proto.mediapipe.InputStreamHandlerConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.InputStreamHandlerConfig.prototype.hasOptions=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.OutputStreamHandlerConfig.repeatedFields_=[2],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.OutputStreamHandlerConfig.prototype.toObject=function(e){return proto.mediapipe.OutputStreamHandlerConfig.toObject(e,this)},proto.mediapipe.OutputStreamHandlerConfig.toObject=function(e,r){var n,a={outputStreamHandler:t.Message.getFieldWithDefault(r,1,"InOrderOutputStreamHandler"),inputSidePacketList:null==(n=t.Message.getRepeatedField(r,2))?void 0:n,options:(n=r.getOptions())&&o.MediaPipeOptions.toObject(e,n)};return e&&(a.$jspbMessageInstance=r),a}),proto.mediapipe.OutputStreamHandlerConfig.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.OutputStreamHandlerConfig;return proto.mediapipe.OutputStreamHandlerConfig.deserializeBinaryFromReader(n,r)},proto.mediapipe.OutputStreamHandlerConfig.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readString();e.setOutputStreamHandler(r);break;case 2:r=t.readString(),e.addInputSidePacket(r);break;case 3:r=new o.MediaPipeOptions,t.readMessage(r,o.MediaPipeOptions.deserializeBinaryFromReader),e.setOptions(r);break;default:t.skipField()}return e},proto.mediapipe.OutputStreamHandlerConfig.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.OutputStreamHandlerConfig.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.OutputStreamHandlerConfig.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=t.Message.getField(e,1))&&r.writeString(1,n),(n=e.getInputSidePacketList()).length>0&&r.writeRepeatedString(2,n),null!=(n=e.getOptions())&&r.writeMessage(3,n,o.MediaPipeOptions.serializeBinaryToWriter)},proto.mediapipe.OutputStreamHandlerConfig.prototype.getOutputStreamHandler=function(){return t.Message.getFieldWithDefault(this,1,"InOrderOutputStreamHandler")},proto.mediapipe.OutputStreamHandlerConfig.prototype.setOutputStreamHandler=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.OutputStreamHandlerConfig.prototype.clearOutputStreamHandler=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.OutputStreamHandlerConfig.prototype.hasOutputStreamHandler=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.OutputStreamHandlerConfig.prototype.getInputSidePacketList=function(){return t.Message.getRepeatedField(this,2)},proto.mediapipe.OutputStreamHandlerConfig.prototype.setInputSidePacketList=function(e){return t.Message.setField(this,2,e||[])},proto.mediapipe.OutputStreamHandlerConfig.prototype.addInputSidePacket=function(e,r){return t.Message.addToRepeatedField(this,2,e,r)},proto.mediapipe.OutputStreamHandlerConfig.prototype.clearInputSidePacketList=function(){return this.setInputSidePacketList([])},proto.mediapipe.OutputStreamHandlerConfig.prototype.getOptions=function(){return t.Message.getWrapperField(this,o.MediaPipeOptions,3)},proto.mediapipe.OutputStreamHandlerConfig.prototype.setOptions=function(e){return t.Message.setWrapperField(this,3,e)},proto.mediapipe.OutputStreamHandlerConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.OutputStreamHandlerConfig.prototype.hasOptions=function(){return null!=t.Message.getField(this,3)},r.object.extend(e,proto.mediapipe)}(stream_handler_pb),function(e){var t=googleProtobuf,r=t,n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==n&&n||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),o=calculator_options_pb;r.object.extend(proto,o);var a=any_pb;r.object.extend(proto,a);var i=mediapipe_options_pb;r.object.extend(proto,i);var s=packet_factory_pb;r.object.extend(proto,s);var p=packet_generator_pb;r.object.extend(proto,p);var l=status_handler_pb;r.object.extend(proto,l);var u=stream_handler_pb;r.object.extend(proto,u),r.exportSymbol("proto.mediapipe.CalculatorGraphConfig",null,n),r.exportSymbol("proto.mediapipe.CalculatorGraphConfig.Node",null,n),r.exportSymbol("proto.mediapipe.ExecutorConfig",null,n),r.exportSymbol("proto.mediapipe.InputCollection",null,n),r.exportSymbol("proto.mediapipe.InputCollection.InputType",null,n),r.exportSymbol("proto.mediapipe.InputCollectionSet",null,n),r.exportSymbol("proto.mediapipe.InputStreamInfo",null,n),r.exportSymbol("proto.mediapipe.ProfilerConfig",null,n),proto.mediapipe.ExecutorConfig=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.ExecutorConfig,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.ExecutorConfig.displayName="proto.mediapipe.ExecutorConfig"),proto.mediapipe.InputCollection=function(e){t.Message.initialize(this,e,0,500,proto.mediapipe.InputCollection.repeatedFields_,null)},r.inherits(proto.mediapipe.InputCollection,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.InputCollection.displayName="proto.mediapipe.InputCollection"),proto.mediapipe.InputCollectionSet=function(e){t.Message.initialize(this,e,0,-1,proto.mediapipe.InputCollectionSet.repeatedFields_,null)},r.inherits(proto.mediapipe.InputCollectionSet,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.InputCollectionSet.displayName="proto.mediapipe.InputCollectionSet"),proto.mediapipe.InputStreamInfo=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.InputStreamInfo,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.InputStreamInfo.displayName="proto.mediapipe.InputStreamInfo"),proto.mediapipe.ProfilerConfig=function(e){t.Message.initialize(this,e,0,-1,proto.mediapipe.ProfilerConfig.repeatedFields_,null)},r.inherits(proto.mediapipe.ProfilerConfig,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.ProfilerConfig.displayName="proto.mediapipe.ProfilerConfig"),proto.mediapipe.CalculatorGraphConfig=function(e){t.Message.initialize(this,e,0,500,proto.mediapipe.CalculatorGraphConfig.repeatedFields_,null)},r.inherits(proto.mediapipe.CalculatorGraphConfig,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.CalculatorGraphConfig.displayName="proto.mediapipe.CalculatorGraphConfig"),proto.mediapipe.CalculatorGraphConfig.Node=function(e){t.Message.initialize(this,e,0,500,proto.mediapipe.CalculatorGraphConfig.Node.repeatedFields_,null)},r.inherits(proto.mediapipe.CalculatorGraphConfig.Node,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.CalculatorGraphConfig.Node.displayName="proto.mediapipe.CalculatorGraphConfig.Node"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.ExecutorConfig.prototype.toObject=function(e){return proto.mediapipe.ExecutorConfig.toObject(e,this)},proto.mediapipe.ExecutorConfig.toObject=function(e,r){var n,o={name:t.Message.getFieldWithDefault(r,1,""),type:t.Message.getFieldWithDefault(r,2,""),options:(n=r.getOptions())&&i.MediaPipeOptions.toObject(e,n)};return e&&(o.$jspbMessageInstance=r),o}),proto.mediapipe.ExecutorConfig.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.ExecutorConfig;return proto.mediapipe.ExecutorConfig.deserializeBinaryFromReader(n,r)},proto.mediapipe.ExecutorConfig.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readString();e.setName(r);break;case 2:r=t.readString(),e.setType(r);break;case 3:r=new i.MediaPipeOptions,t.readMessage(r,i.MediaPipeOptions.deserializeBinaryFromReader),e.setOptions(r);break;default:t.skipField()}return e},proto.mediapipe.ExecutorConfig.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.ExecutorConfig.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.ExecutorConfig.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getName()).length>0&&t.writeString(1,r),(r=e.getType()).length>0&&t.writeString(2,r),null!=(r=e.getOptions())&&t.writeMessage(3,r,i.MediaPipeOptions.serializeBinaryToWriter)},proto.mediapipe.ExecutorConfig.prototype.getName=function(){return t.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.ExecutorConfig.prototype.setName=function(e){return t.Message.setProto3StringField(this,1,e)},proto.mediapipe.ExecutorConfig.prototype.getType=function(){return t.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.ExecutorConfig.prototype.setType=function(e){return t.Message.setProto3StringField(this,2,e)},proto.mediapipe.ExecutorConfig.prototype.getOptions=function(){return t.Message.getWrapperField(this,i.MediaPipeOptions,3)},proto.mediapipe.ExecutorConfig.prototype.setOptions=function(e){return t.Message.setWrapperField(this,3,e)},proto.mediapipe.ExecutorConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.ExecutorConfig.prototype.hasOptions=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.InputCollection.repeatedFields_=[2,1002],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InputCollection.prototype.toObject=function(e){return proto.mediapipe.InputCollection.toObject(e,this)},proto.mediapipe.InputCollection.toObject=function(e,r){var n,o={name:t.Message.getFieldWithDefault(r,1,""),sidePacketNameList:null==(n=t.Message.getRepeatedField(r,2))?void 0:n,externalInputNameList:null==(n=t.Message.getRepeatedField(r,1002))?void 0:n,inputType:t.Message.getFieldWithDefault(r,3,0),fileName:t.Message.getFieldWithDefault(r,4,"")};return e&&(o.$jspbMessageInstance=r),o}),proto.mediapipe.InputCollection.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.InputCollection;return proto.mediapipe.InputCollection.deserializeBinaryFromReader(n,r)},proto.mediapipe.InputCollection.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readString();e.setName(r);break;case 2:r=t.readString(),e.addSidePacketName(r);break;case 1002:r=t.readString(),e.addExternalInputName(r);break;case 3:r=t.readEnum(),e.setInputType(r);break;case 4:r=t.readString(),e.setFileName(r);break;default:t.skipField()}return e},proto.mediapipe.InputCollection.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.InputCollection.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.InputCollection.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getName()).length>0&&t.writeString(1,r),(r=e.getSidePacketNameList()).length>0&&t.writeRepeatedString(2,r),(r=e.getExternalInputNameList()).length>0&&t.writeRepeatedString(1002,r),0!==(r=e.getInputType())&&t.writeEnum(3,r),(r=e.getFileName()).length>0&&t.writeString(4,r)},proto.mediapipe.InputCollection.InputType={UNKNOWN:0,RECORDIO:1,FOREIGN_RECORDIO:2,FOREIGN_CSV_TEXT:3,INVALID_UPPER_BOUND:4},proto.mediapipe.InputCollection.prototype.getName=function(){return t.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.InputCollection.prototype.setName=function(e){return t.Message.setProto3StringField(this,1,e)},proto.mediapipe.InputCollection.prototype.getSidePacketNameList=function(){return t.Message.getRepeatedField(this,2)},proto.mediapipe.InputCollection.prototype.setSidePacketNameList=function(e){return t.Message.setField(this,2,e||[])},proto.mediapipe.InputCollection.prototype.addSidePacketName=function(e,r){return t.Message.addToRepeatedField(this,2,e,r)},proto.mediapipe.InputCollection.prototype.clearSidePacketNameList=function(){return this.setSidePacketNameList([])},proto.mediapipe.InputCollection.prototype.getExternalInputNameList=function(){return t.Message.getRepeatedField(this,1002)},proto.mediapipe.InputCollection.prototype.setExternalInputNameList=function(e){return t.Message.setField(this,1002,e||[])},proto.mediapipe.InputCollection.prototype.addExternalInputName=function(e,r){return t.Message.addToRepeatedField(this,1002,e,r)},proto.mediapipe.InputCollection.prototype.clearExternalInputNameList=function(){return this.setExternalInputNameList([])},proto.mediapipe.InputCollection.prototype.getInputType=function(){return t.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.InputCollection.prototype.setInputType=function(e){return t.Message.setProto3EnumField(this,3,e)},proto.mediapipe.InputCollection.prototype.getFileName=function(){return t.Message.getFieldWithDefault(this,4,"")},proto.mediapipe.InputCollection.prototype.setFileName=function(e){return t.Message.setProto3StringField(this,4,e)},proto.mediapipe.InputCollectionSet.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InputCollectionSet.prototype.toObject=function(e){return proto.mediapipe.InputCollectionSet.toObject(e,this)},proto.mediapipe.InputCollectionSet.toObject=function(e,r){var n={inputCollectionList:t.Message.toObjectList(r.getInputCollectionList(),proto.mediapipe.InputCollection.toObject,e)};return e&&(n.$jspbMessageInstance=r),n}),proto.mediapipe.InputCollectionSet.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.InputCollectionSet;return proto.mediapipe.InputCollectionSet.deserializeBinaryFromReader(n,r)},proto.mediapipe.InputCollectionSet.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var r=new proto.mediapipe.InputCollection;t.readMessage(r,proto.mediapipe.InputCollection.deserializeBinaryFromReader),e.addInputCollection(r)}else t.skipField();return e},proto.mediapipe.InputCollectionSet.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.InputCollectionSet.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.InputCollectionSet.serializeBinaryToWriter=function(e,t){var r;(r=e.getInputCollectionList()).length>0&&t.writeRepeatedMessage(1,r,proto.mediapipe.InputCollection.serializeBinaryToWriter)},proto.mediapipe.InputCollectionSet.prototype.getInputCollectionList=function(){return t.Message.getRepeatedWrapperField(this,proto.mediapipe.InputCollection,1)},proto.mediapipe.InputCollectionSet.prototype.setInputCollectionList=function(e){return t.Message.setRepeatedWrapperField(this,1,e)},proto.mediapipe.InputCollectionSet.prototype.addInputCollection=function(e,r){return t.Message.addToRepeatedWrapperField(this,1,e,proto.mediapipe.InputCollection,r)},proto.mediapipe.InputCollectionSet.prototype.clearInputCollectionList=function(){return this.setInputCollectionList([])},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InputStreamInfo.prototype.toObject=function(e){return proto.mediapipe.InputStreamInfo.toObject(e,this)},proto.mediapipe.InputStreamInfo.toObject=function(e,r){var n={tagIndex:t.Message.getFieldWithDefault(r,1,""),backEdge:t.Message.getBooleanFieldWithDefault(r,2,!1)};return e&&(n.$jspbMessageInstance=r),n}),proto.mediapipe.InputStreamInfo.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.InputStreamInfo;return proto.mediapipe.InputStreamInfo.deserializeBinaryFromReader(n,r)},proto.mediapipe.InputStreamInfo.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readString();e.setTagIndex(r);break;case 2:r=t.readBool(),e.setBackEdge(r);break;default:t.skipField()}return e},proto.mediapipe.InputStreamInfo.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.InputStreamInfo.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.InputStreamInfo.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getTagIndex()).length>0&&t.writeString(1,r),(r=e.getBackEdge())&&t.writeBool(2,r)},proto.mediapipe.InputStreamInfo.prototype.getTagIndex=function(){return t.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.InputStreamInfo.prototype.setTagIndex=function(e){return t.Message.setProto3StringField(this,1,e)},proto.mediapipe.InputStreamInfo.prototype.getBackEdge=function(){return t.Message.getBooleanFieldWithDefault(this,2,!1)},proto.mediapipe.InputStreamInfo.prototype.setBackEdge=function(e){return t.Message.setProto3BooleanField(this,2,e)},proto.mediapipe.ProfilerConfig.repeatedFields_=[8],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.ProfilerConfig.prototype.toObject=function(e){return proto.mediapipe.ProfilerConfig.toObject(e,this)},proto.mediapipe.ProfilerConfig.toObject=function(e,r){var n,o={histogramIntervalSizeUsec:t.Message.getFieldWithDefault(r,1,0),numHistogramIntervals:t.Message.getFieldWithDefault(r,2,0),enableInputOutputLatency:t.Message.getBooleanFieldWithDefault(r,3,!1),enableProfiler:t.Message.getBooleanFieldWithDefault(r,4,!1),enableStreamLatency:t.Message.getBooleanFieldWithDefault(r,5,!1),usePacketTimestampForAddedPacket:t.Message.getBooleanFieldWithDefault(r,6,!1),traceLogCapacity:t.Message.getFieldWithDefault(r,7,0),traceEventTypesDisabledList:null==(n=t.Message.getRepeatedField(r,8))?void 0:n,traceLogPath:t.Message.getFieldWithDefault(r,9,""),traceLogCount:t.Message.getFieldWithDefault(r,10,0),traceLogIntervalUsec:t.Message.getFieldWithDefault(r,11,0),traceLogMarginUsec:t.Message.getFieldWithDefault(r,12,0),traceLogDurationEvents:t.Message.getBooleanFieldWithDefault(r,13,!1),traceLogIntervalCount:t.Message.getFieldWithDefault(r,14,0),traceLogDisabled:t.Message.getBooleanFieldWithDefault(r,15,!1),traceEnabled:t.Message.getBooleanFieldWithDefault(r,16,!1),traceLogInstantEvents:t.Message.getBooleanFieldWithDefault(r,17,!1),calculatorFilter:t.Message.getFieldWithDefault(r,18,"")};return e&&(o.$jspbMessageInstance=r),o}),proto.mediapipe.ProfilerConfig.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.ProfilerConfig;return proto.mediapipe.ProfilerConfig.deserializeBinaryFromReader(n,r)},proto.mediapipe.ProfilerConfig.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readInt64();e.setHistogramIntervalSizeUsec(r);break;case 2:r=t.readInt64(),e.setNumHistogramIntervals(r);break;case 3:r=t.readBool(),e.setEnableInputOutputLatency(r);break;case 4:r=t.readBool(),e.setEnableProfiler(r);break;case 5:r=t.readBool(),e.setEnableStreamLatency(r);break;case 6:r=t.readBool(),e.setUsePacketTimestampForAddedPacket(r);break;case 7:r=t.readInt64(),e.setTraceLogCapacity(r);break;case 8:for(var n=t.isDelimited()?t.readPackedInt32():[t.readInt32()],o=0;o<n.length;o++)e.addTraceEventTypesDisabled(n[o]);break;case 9:r=t.readString(),e.setTraceLogPath(r);break;case 10:r=t.readInt32(),e.setTraceLogCount(r);break;case 11:r=t.readInt64(),e.setTraceLogIntervalUsec(r);break;case 12:r=t.readInt64(),e.setTraceLogMarginUsec(r);break;case 13:r=t.readBool(),e.setTraceLogDurationEvents(r);break;case 14:r=t.readInt32(),e.setTraceLogIntervalCount(r);break;case 15:r=t.readBool(),e.setTraceLogDisabled(r);break;case 16:r=t.readBool(),e.setTraceEnabled(r);break;case 17:r=t.readBool(),e.setTraceLogInstantEvents(r);break;case 18:r=t.readString(),e.setCalculatorFilter(r);break;default:t.skipField()}return e},proto.mediapipe.ProfilerConfig.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.ProfilerConfig.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.ProfilerConfig.serializeBinaryToWriter=function(e,t){var r=void 0;0!==(r=e.getHistogramIntervalSizeUsec())&&t.writeInt64(1,r),0!==(r=e.getNumHistogramIntervals())&&t.writeInt64(2,r),(r=e.getEnableInputOutputLatency())&&t.writeBool(3,r),(r=e.getEnableProfiler())&&t.writeBool(4,r),(r=e.getEnableStreamLatency())&&t.writeBool(5,r),(r=e.getUsePacketTimestampForAddedPacket())&&t.writeBool(6,r),0!==(r=e.getTraceLogCapacity())&&t.writeInt64(7,r),(r=e.getTraceEventTypesDisabledList()).length>0&&t.writePackedInt32(8,r),(r=e.getTraceLogPath()).length>0&&t.writeString(9,r),0!==(r=e.getTraceLogCount())&&t.writeInt32(10,r),0!==(r=e.getTraceLogIntervalUsec())&&t.writeInt64(11,r),0!==(r=e.getTraceLogMarginUsec())&&t.writeInt64(12,r),(r=e.getTraceLogDurationEvents())&&t.writeBool(13,r),0!==(r=e.getTraceLogIntervalCount())&&t.writeInt32(14,r),(r=e.getTraceLogDisabled())&&t.writeBool(15,r),(r=e.getTraceEnabled())&&t.writeBool(16,r),(r=e.getTraceLogInstantEvents())&&t.writeBool(17,r),(r=e.getCalculatorFilter()).length>0&&t.writeString(18,r)},proto.mediapipe.ProfilerConfig.prototype.getHistogramIntervalSizeUsec=function(){return t.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.ProfilerConfig.prototype.setHistogramIntervalSizeUsec=function(e){return t.Message.setProto3IntField(this,1,e)},proto.mediapipe.ProfilerConfig.prototype.getNumHistogramIntervals=function(){return t.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.ProfilerConfig.prototype.setNumHistogramIntervals=function(e){return t.Message.setProto3IntField(this,2,e)},proto.mediapipe.ProfilerConfig.prototype.getEnableInputOutputLatency=function(){return t.Message.getBooleanFieldWithDefault(this,3,!1)},proto.mediapipe.ProfilerConfig.prototype.setEnableInputOutputLatency=function(e){return t.Message.setProto3BooleanField(this,3,e)},proto.mediapipe.ProfilerConfig.prototype.getEnableProfiler=function(){return t.Message.getBooleanFieldWithDefault(this,4,!1)},proto.mediapipe.ProfilerConfig.prototype.setEnableProfiler=function(e){return t.Message.setProto3BooleanField(this,4,e)},proto.mediapipe.ProfilerConfig.prototype.getEnableStreamLatency=function(){return t.Message.getBooleanFieldWithDefault(this,5,!1)},proto.mediapipe.ProfilerConfig.prototype.setEnableStreamLatency=function(e){return t.Message.setProto3BooleanField(this,5,e)},proto.mediapipe.ProfilerConfig.prototype.getUsePacketTimestampForAddedPacket=function(){return t.Message.getBooleanFieldWithDefault(this,6,!1)},proto.mediapipe.ProfilerConfig.prototype.setUsePacketTimestampForAddedPacket=function(e){return t.Message.setProto3BooleanField(this,6,e)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogCapacity=function(){return t.Message.getFieldWithDefault(this,7,0)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogCapacity=function(e){return t.Message.setProto3IntField(this,7,e)},proto.mediapipe.ProfilerConfig.prototype.getTraceEventTypesDisabledList=function(){return t.Message.getRepeatedField(this,8)},proto.mediapipe.ProfilerConfig.prototype.setTraceEventTypesDisabledList=function(e){return t.Message.setField(this,8,e||[])},proto.mediapipe.ProfilerConfig.prototype.addTraceEventTypesDisabled=function(e,r){return t.Message.addToRepeatedField(this,8,e,r)},proto.mediapipe.ProfilerConfig.prototype.clearTraceEventTypesDisabledList=function(){return this.setTraceEventTypesDisabledList([])},proto.mediapipe.ProfilerConfig.prototype.getTraceLogPath=function(){return t.Message.getFieldWithDefault(this,9,"")},proto.mediapipe.ProfilerConfig.prototype.setTraceLogPath=function(e){return t.Message.setProto3StringField(this,9,e)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogCount=function(){return t.Message.getFieldWithDefault(this,10,0)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogCount=function(e){return t.Message.setProto3IntField(this,10,e)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogIntervalUsec=function(){return t.Message.getFieldWithDefault(this,11,0)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogIntervalUsec=function(e){return t.Message.setProto3IntField(this,11,e)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogMarginUsec=function(){return t.Message.getFieldWithDefault(this,12,0)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogMarginUsec=function(e){return t.Message.setProto3IntField(this,12,e)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogDurationEvents=function(){return t.Message.getBooleanFieldWithDefault(this,13,!1)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogDurationEvents=function(e){return t.Message.setProto3BooleanField(this,13,e)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogIntervalCount=function(){return t.Message.getFieldWithDefault(this,14,0)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogIntervalCount=function(e){return t.Message.setProto3IntField(this,14,e)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogDisabled=function(){return t.Message.getBooleanFieldWithDefault(this,15,!1)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogDisabled=function(e){return t.Message.setProto3BooleanField(this,15,e)},proto.mediapipe.ProfilerConfig.prototype.getTraceEnabled=function(){return t.Message.getBooleanFieldWithDefault(this,16,!1)},proto.mediapipe.ProfilerConfig.prototype.setTraceEnabled=function(e){return t.Message.setProto3BooleanField(this,16,e)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogInstantEvents=function(){return t.Message.getBooleanFieldWithDefault(this,17,!1)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogInstantEvents=function(e){return t.Message.setProto3BooleanField(this,17,e)},proto.mediapipe.ProfilerConfig.prototype.getCalculatorFilter=function(){return t.Message.getFieldWithDefault(this,18,"")},proto.mediapipe.ProfilerConfig.prototype.setCalculatorFilter=function(e){return t.Message.setProto3StringField(this,18,e)},proto.mediapipe.CalculatorGraphConfig.repeatedFields_=[1,6,7,9,10,15,16,17,14,1002],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.CalculatorGraphConfig.prototype.toObject=function(e){return proto.mediapipe.CalculatorGraphConfig.toObject(e,this)},proto.mediapipe.CalculatorGraphConfig.toObject=function(e,r){var n,o={nodeList:t.Message.toObjectList(r.getNodeList(),proto.mediapipe.CalculatorGraphConfig.Node.toObject,e),packetFactoryList:t.Message.toObjectList(r.getPacketFactoryList(),s.PacketFactoryConfig.toObject,e),packetGeneratorList:t.Message.toObjectList(r.getPacketGeneratorList(),p.PacketGeneratorConfig.toObject,e),numThreads:t.Message.getFieldWithDefault(r,8,0),statusHandlerList:t.Message.toObjectList(r.getStatusHandlerList(),l.StatusHandlerConfig.toObject,e),inputStreamList:null==(n=t.Message.getRepeatedField(r,10))?void 0:n,outputStreamList:null==(n=t.Message.getRepeatedField(r,15))?void 0:n,inputSidePacketList:null==(n=t.Message.getRepeatedField(r,16))?void 0:n,outputSidePacketList:null==(n=t.Message.getRepeatedField(r,17))?void 0:n,maxQueueSize:t.Message.getFieldWithDefault(r,11,0),reportDeadlock:t.Message.getBooleanFieldWithDefault(r,21,!1),inputStreamHandler:(n=r.getInputStreamHandler())&&u.InputStreamHandlerConfig.toObject(e,n),outputStreamHandler:(n=r.getOutputStreamHandler())&&u.OutputStreamHandlerConfig.toObject(e,n),executorList:t.Message.toObjectList(r.getExecutorList(),proto.mediapipe.ExecutorConfig.toObject,e),profilerConfig:(n=r.getProfilerConfig())&&proto.mediapipe.ProfilerConfig.toObject(e,n),pb_package:t.Message.getFieldWithDefault(r,19,""),type:t.Message.getFieldWithDefault(r,20,""),options:(n=r.getOptions())&&i.MediaPipeOptions.toObject(e,n),graphOptionsList:t.Message.toObjectList(r.getGraphOptionsList(),a.Any.toObject,e)};return e&&(o.$jspbMessageInstance=r),o}),proto.mediapipe.CalculatorGraphConfig.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.CalculatorGraphConfig;return proto.mediapipe.CalculatorGraphConfig.deserializeBinaryFromReader(n,r)},proto.mediapipe.CalculatorGraphConfig.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=new proto.mediapipe.CalculatorGraphConfig.Node;t.readMessage(r,proto.mediapipe.CalculatorGraphConfig.Node.deserializeBinaryFromReader),e.addNode(r);break;case 6:r=new s.PacketFactoryConfig,t.readMessage(r,s.PacketFactoryConfig.deserializeBinaryFromReader),e.addPacketFactory(r);break;case 7:r=new p.PacketGeneratorConfig,t.readMessage(r,p.PacketGeneratorConfig.deserializeBinaryFromReader),e.addPacketGenerator(r);break;case 8:r=t.readInt32(),e.setNumThreads(r);break;case 9:r=new l.StatusHandlerConfig,t.readMessage(r,l.StatusHandlerConfig.deserializeBinaryFromReader),e.addStatusHandler(r);break;case 10:r=t.readString(),e.addInputStream(r);break;case 15:r=t.readString(),e.addOutputStream(r);break;case 16:r=t.readString(),e.addInputSidePacket(r);break;case 17:r=t.readString(),e.addOutputSidePacket(r);break;case 11:r=t.readInt32(),e.setMaxQueueSize(r);break;case 21:r=t.readBool(),e.setReportDeadlock(r);break;case 12:r=new u.InputStreamHandlerConfig,t.readMessage(r,u.InputStreamHandlerConfig.deserializeBinaryFromReader),e.setInputStreamHandler(r);break;case 13:r=new u.OutputStreamHandlerConfig,t.readMessage(r,u.OutputStreamHandlerConfig.deserializeBinaryFromReader),e.setOutputStreamHandler(r);break;case 14:r=new proto.mediapipe.ExecutorConfig,t.readMessage(r,proto.mediapipe.ExecutorConfig.deserializeBinaryFromReader),e.addExecutor(r);break;case 18:r=new proto.mediapipe.ProfilerConfig,t.readMessage(r,proto.mediapipe.ProfilerConfig.deserializeBinaryFromReader),e.setProfilerConfig(r);break;case 19:r=t.readString(),e.setPackage(r);break;case 20:r=t.readString(),e.setType(r);break;case 1001:r=new i.MediaPipeOptions,t.readMessage(r,i.MediaPipeOptions.deserializeBinaryFromReader),e.setOptions(r);break;case 1002:r=new a.Any,t.readMessage(r,a.Any.deserializeBinaryFromReader),e.addGraphOptions(r);break;default:t.skipField()}return e},proto.mediapipe.CalculatorGraphConfig.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.CalculatorGraphConfig.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.CalculatorGraphConfig.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getNodeList()).length>0&&t.writeRepeatedMessage(1,r,proto.mediapipe.CalculatorGraphConfig.Node.serializeBinaryToWriter),(r=e.getPacketFactoryList()).length>0&&t.writeRepeatedMessage(6,r,s.PacketFactoryConfig.serializeBinaryToWriter),(r=e.getPacketGeneratorList()).length>0&&t.writeRepeatedMessage(7,r,p.PacketGeneratorConfig.serializeBinaryToWriter),0!==(r=e.getNumThreads())&&t.writeInt32(8,r),(r=e.getStatusHandlerList()).length>0&&t.writeRepeatedMessage(9,r,l.StatusHandlerConfig.serializeBinaryToWriter),(r=e.getInputStreamList()).length>0&&t.writeRepeatedString(10,r),(r=e.getOutputStreamList()).length>0&&t.writeRepeatedString(15,r),(r=e.getInputSidePacketList()).length>0&&t.writeRepeatedString(16,r),(r=e.getOutputSidePacketList()).length>0&&t.writeRepeatedString(17,r),0!==(r=e.getMaxQueueSize())&&t.writeInt32(11,r),(r=e.getReportDeadlock())&&t.writeBool(21,r),null!=(r=e.getInputStreamHandler())&&t.writeMessage(12,r,u.InputStreamHandlerConfig.serializeBinaryToWriter),null!=(r=e.getOutputStreamHandler())&&t.writeMessage(13,r,u.OutputStreamHandlerConfig.serializeBinaryToWriter),(r=e.getExecutorList()).length>0&&t.writeRepeatedMessage(14,r,proto.mediapipe.ExecutorConfig.serializeBinaryToWriter),null!=(r=e.getProfilerConfig())&&t.writeMessage(18,r,proto.mediapipe.ProfilerConfig.serializeBinaryToWriter),(r=e.getPackage()).length>0&&t.writeString(19,r),(r=e.getType()).length>0&&t.writeString(20,r),null!=(r=e.getOptions())&&t.writeMessage(1001,r,i.MediaPipeOptions.serializeBinaryToWriter),(r=e.getGraphOptionsList()).length>0&&t.writeRepeatedMessage(1002,r,a.Any.serializeBinaryToWriter)},proto.mediapipe.CalculatorGraphConfig.Node.repeatedFields_=[3,4,5,6,8,13,17,1005],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.CalculatorGraphConfig.Node.prototype.toObject=function(e){return proto.mediapipe.CalculatorGraphConfig.Node.toObject(e,this)},proto.mediapipe.CalculatorGraphConfig.Node.toObject=function(e,r){var n,i={name:t.Message.getFieldWithDefault(r,1,""),calculator:t.Message.getFieldWithDefault(r,2,""),inputStreamList:null==(n=t.Message.getRepeatedField(r,3))?void 0:n,outputStreamList:null==(n=t.Message.getRepeatedField(r,4))?void 0:n,inputSidePacketList:null==(n=t.Message.getRepeatedField(r,5))?void 0:n,outputSidePacketList:null==(n=t.Message.getRepeatedField(r,6))?void 0:n,options:(n=r.getOptions())&&o.CalculatorOptions.toObject(e,n),nodeOptionsList:t.Message.toObjectList(r.getNodeOptionsList(),a.Any.toObject,e),sourceLayer:t.Message.getFieldWithDefault(r,9,0),bufferSizeHint:t.Message.getFieldWithDefault(r,10,0),inputStreamHandler:(n=r.getInputStreamHandler())&&u.InputStreamHandlerConfig.toObject(e,n),outputStreamHandler:(n=r.getOutputStreamHandler())&&u.OutputStreamHandlerConfig.toObject(e,n),inputStreamInfoList:t.Message.toObjectList(r.getInputStreamInfoList(),proto.mediapipe.InputStreamInfo.toObject,e),executor:t.Message.getFieldWithDefault(r,14,""),profilerConfig:(n=r.getProfilerConfig())&&proto.mediapipe.ProfilerConfig.toObject(e,n),maxInFlight:t.Message.getFieldWithDefault(r,16,0),optionValueList:null==(n=t.Message.getRepeatedField(r,17))?void 0:n,externalInputList:null==(n=t.Message.getRepeatedField(r,1005))?void 0:n};return e&&(i.$jspbMessageInstance=r),i}),proto.mediapipe.CalculatorGraphConfig.Node.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.CalculatorGraphConfig.Node;return proto.mediapipe.CalculatorGraphConfig.Node.deserializeBinaryFromReader(n,r)},proto.mediapipe.CalculatorGraphConfig.Node.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readString();e.setName(r);break;case 2:r=t.readString(),e.setCalculator(r);break;case 3:r=t.readString(),e.addInputStream(r);break;case 4:r=t.readString(),e.addOutputStream(r);break;case 5:r=t.readString(),e.addInputSidePacket(r);break;case 6:r=t.readString(),e.addOutputSidePacket(r);break;case 7:r=new o.CalculatorOptions,t.readMessage(r,o.CalculatorOptions.deserializeBinaryFromReader),e.setOptions(r);break;case 8:r=new a.Any,t.readMessage(r,a.Any.deserializeBinaryFromReader),e.addNodeOptions(r);break;case 9:r=t.readInt32(),e.setSourceLayer(r);break;case 10:r=t.readInt32(),e.setBufferSizeHint(r);break;case 11:r=new u.InputStreamHandlerConfig,t.readMessage(r,u.InputStreamHandlerConfig.deserializeBinaryFromReader),e.setInputStreamHandler(r);break;case 12:r=new u.OutputStreamHandlerConfig,t.readMessage(r,u.OutputStreamHandlerConfig.deserializeBinaryFromReader),e.setOutputStreamHandler(r);break;case 13:r=new proto.mediapipe.InputStreamInfo,t.readMessage(r,proto.mediapipe.InputStreamInfo.deserializeBinaryFromReader),e.addInputStreamInfo(r);break;case 14:r=t.readString(),e.setExecutor(r);break;case 15:r=new proto.mediapipe.ProfilerConfig,t.readMessage(r,proto.mediapipe.ProfilerConfig.deserializeBinaryFromReader),e.setProfilerConfig(r);break;case 16:r=t.readInt32(),e.setMaxInFlight(r);break;case 17:r=t.readString(),e.addOptionValue(r);break;case 1005:r=t.readString(),e.addExternalInput(r);break;default:t.skipField()}return e},proto.mediapipe.CalculatorGraphConfig.Node.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.CalculatorGraphConfig.Node.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.CalculatorGraphConfig.Node.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getName()).length>0&&t.writeString(1,r),(r=e.getCalculator()).length>0&&t.writeString(2,r),(r=e.getInputStreamList()).length>0&&t.writeRepeatedString(3,r),(r=e.getOutputStreamList()).length>0&&t.writeRepeatedString(4,r),(r=e.getInputSidePacketList()).length>0&&t.writeRepeatedString(5,r),(r=e.getOutputSidePacketList()).length>0&&t.writeRepeatedString(6,r),null!=(r=e.getOptions())&&t.writeMessage(7,r,o.CalculatorOptions.serializeBinaryToWriter),(r=e.getNodeOptionsList()).length>0&&t.writeRepeatedMessage(8,r,a.Any.serializeBinaryToWriter),0!==(r=e.getSourceLayer())&&t.writeInt32(9,r),0!==(r=e.getBufferSizeHint())&&t.writeInt32(10,r),null!=(r=e.getInputStreamHandler())&&t.writeMessage(11,r,u.InputStreamHandlerConfig.serializeBinaryToWriter),null!=(r=e.getOutputStreamHandler())&&t.writeMessage(12,r,u.OutputStreamHandlerConfig.serializeBinaryToWriter),(r=e.getInputStreamInfoList()).length>0&&t.writeRepeatedMessage(13,r,proto.mediapipe.InputStreamInfo.serializeBinaryToWriter),(r=e.getExecutor()).length>0&&t.writeString(14,r),null!=(r=e.getProfilerConfig())&&t.writeMessage(15,r,proto.mediapipe.ProfilerConfig.serializeBinaryToWriter),0!==(r=e.getMaxInFlight())&&t.writeInt32(16,r),(r=e.getOptionValueList()).length>0&&t.writeRepeatedString(17,r),(r=e.getExternalInputList()).length>0&&t.writeRepeatedString(1005,r)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getName=function(){return t.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setName=function(e){return t.Message.setProto3StringField(this,1,e)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getCalculator=function(){return t.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setCalculator=function(e){return t.Message.setProto3StringField(this,2,e)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getInputStreamList=function(){return t.Message.getRepeatedField(this,3)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setInputStreamList=function(e){return t.Message.setField(this,3,e||[])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addInputStream=function(e,r){return t.Message.addToRepeatedField(this,3,e,r)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearInputStreamList=function(){return this.setInputStreamList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getOutputStreamList=function(){return t.Message.getRepeatedField(this,4)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setOutputStreamList=function(e){return t.Message.setField(this,4,e||[])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addOutputStream=function(e,r){return t.Message.addToRepeatedField(this,4,e,r)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearOutputStreamList=function(){return this.setOutputStreamList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getInputSidePacketList=function(){return t.Message.getRepeatedField(this,5)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setInputSidePacketList=function(e){return t.Message.setField(this,5,e||[])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addInputSidePacket=function(e,r){return t.Message.addToRepeatedField(this,5,e,r)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearInputSidePacketList=function(){return this.setInputSidePacketList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getOutputSidePacketList=function(){return t.Message.getRepeatedField(this,6)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setOutputSidePacketList=function(e){return t.Message.setField(this,6,e||[])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addOutputSidePacket=function(e,r){return t.Message.addToRepeatedField(this,6,e,r)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearOutputSidePacketList=function(){return this.setOutputSidePacketList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getOptions=function(){return t.Message.getWrapperField(this,o.CalculatorOptions,7)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setOptions=function(e){return t.Message.setWrapperField(this,7,e)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.hasOptions=function(){return null!=t.Message.getField(this,7)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getNodeOptionsList=function(){return t.Message.getRepeatedWrapperField(this,a.Any,8)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setNodeOptionsList=function(e){return t.Message.setRepeatedWrapperField(this,8,e)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addNodeOptions=function(e,r){return t.Message.addToRepeatedWrapperField(this,8,e,proto.google.protobuf.Any,r)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearNodeOptionsList=function(){return this.setNodeOptionsList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getSourceLayer=function(){return t.Message.getFieldWithDefault(this,9,0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setSourceLayer=function(e){return t.Message.setProto3IntField(this,9,e)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getBufferSizeHint=function(){return t.Message.getFieldWithDefault(this,10,0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setBufferSizeHint=function(e){return t.Message.setProto3IntField(this,10,e)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getInputStreamHandler=function(){return t.Message.getWrapperField(this,u.InputStreamHandlerConfig,11)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setInputStreamHandler=function(e){return t.Message.setWrapperField(this,11,e)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearInputStreamHandler=function(){return this.setInputStreamHandler(void 0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.hasInputStreamHandler=function(){return null!=t.Message.getField(this,11)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getOutputStreamHandler=function(){return t.Message.getWrapperField(this,u.OutputStreamHandlerConfig,12)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setOutputStreamHandler=function(e){return t.Message.setWrapperField(this,12,e)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearOutputStreamHandler=function(){return this.setOutputStreamHandler(void 0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.hasOutputStreamHandler=function(){return null!=t.Message.getField(this,12)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getInputStreamInfoList=function(){return t.Message.getRepeatedWrapperField(this,proto.mediapipe.InputStreamInfo,13)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setInputStreamInfoList=function(e){return t.Message.setRepeatedWrapperField(this,13,e)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addInputStreamInfo=function(e,r){return t.Message.addToRepeatedWrapperField(this,13,e,proto.mediapipe.InputStreamInfo,r)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearInputStreamInfoList=function(){return this.setInputStreamInfoList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getExecutor=function(){return t.Message.getFieldWithDefault(this,14,"")},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setExecutor=function(e){return t.Message.setProto3StringField(this,14,e)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getProfilerConfig=function(){return t.Message.getWrapperField(this,proto.mediapipe.ProfilerConfig,15)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setProfilerConfig=function(e){return t.Message.setWrapperField(this,15,e)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearProfilerConfig=function(){return this.setProfilerConfig(void 0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.hasProfilerConfig=function(){return null!=t.Message.getField(this,15)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getMaxInFlight=function(){return t.Message.getFieldWithDefault(this,16,0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setMaxInFlight=function(e){return t.Message.setProto3IntField(this,16,e)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getOptionValueList=function(){return t.Message.getRepeatedField(this,17)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setOptionValueList=function(e){return t.Message.setField(this,17,e||[])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addOptionValue=function(e,r){return t.Message.addToRepeatedField(this,17,e,r)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearOptionValueList=function(){return this.setOptionValueList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getExternalInputList=function(){return t.Message.getRepeatedField(this,1005)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setExternalInputList=function(e){return t.Message.setField(this,1005,e||[])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addExternalInput=function(e,r){return t.Message.addToRepeatedField(this,1005,e,r)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearExternalInputList=function(){return this.setExternalInputList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getNodeList=function(){return t.Message.getRepeatedWrapperField(this,proto.mediapipe.CalculatorGraphConfig.Node,1)},proto.mediapipe.CalculatorGraphConfig.prototype.setNodeList=function(e){return t.Message.setRepeatedWrapperField(this,1,e)},proto.mediapipe.CalculatorGraphConfig.prototype.addNode=function(e,r){return t.Message.addToRepeatedWrapperField(this,1,e,proto.mediapipe.CalculatorGraphConfig.Node,r)},proto.mediapipe.CalculatorGraphConfig.prototype.clearNodeList=function(){return this.setNodeList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getPacketFactoryList=function(){return t.Message.getRepeatedWrapperField(this,s.PacketFactoryConfig,6)},proto.mediapipe.CalculatorGraphConfig.prototype.setPacketFactoryList=function(e){return t.Message.setRepeatedWrapperField(this,6,e)},proto.mediapipe.CalculatorGraphConfig.prototype.addPacketFactory=function(e,r){return t.Message.addToRepeatedWrapperField(this,6,e,proto.mediapipe.PacketFactoryConfig,r)},proto.mediapipe.CalculatorGraphConfig.prototype.clearPacketFactoryList=function(){return this.setPacketFactoryList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getPacketGeneratorList=function(){return t.Message.getRepeatedWrapperField(this,p.PacketGeneratorConfig,7)},proto.mediapipe.CalculatorGraphConfig.prototype.setPacketGeneratorList=function(e){return t.Message.setRepeatedWrapperField(this,7,e)},proto.mediapipe.CalculatorGraphConfig.prototype.addPacketGenerator=function(e,r){return t.Message.addToRepeatedWrapperField(this,7,e,proto.mediapipe.PacketGeneratorConfig,r)},proto.mediapipe.CalculatorGraphConfig.prototype.clearPacketGeneratorList=function(){return this.setPacketGeneratorList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getNumThreads=function(){return t.Message.getFieldWithDefault(this,8,0)},proto.mediapipe.CalculatorGraphConfig.prototype.setNumThreads=function(e){return t.Message.setProto3IntField(this,8,e)},proto.mediapipe.CalculatorGraphConfig.prototype.getStatusHandlerList=function(){return t.Message.getRepeatedWrapperField(this,l.StatusHandlerConfig,9)},proto.mediapipe.CalculatorGraphConfig.prototype.setStatusHandlerList=function(e){return t.Message.setRepeatedWrapperField(this,9,e)},proto.mediapipe.CalculatorGraphConfig.prototype.addStatusHandler=function(e,r){return t.Message.addToRepeatedWrapperField(this,9,e,proto.mediapipe.StatusHandlerConfig,r)},proto.mediapipe.CalculatorGraphConfig.prototype.clearStatusHandlerList=function(){return this.setStatusHandlerList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getInputStreamList=function(){return t.Message.getRepeatedField(this,10)},proto.mediapipe.CalculatorGraphConfig.prototype.setInputStreamList=function(e){return t.Message.setField(this,10,e||[])},proto.mediapipe.CalculatorGraphConfig.prototype.addInputStream=function(e,r){return t.Message.addToRepeatedField(this,10,e,r)},proto.mediapipe.CalculatorGraphConfig.prototype.clearInputStreamList=function(){return this.setInputStreamList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getOutputStreamList=function(){return t.Message.getRepeatedField(this,15)},proto.mediapipe.CalculatorGraphConfig.prototype.setOutputStreamList=function(e){return t.Message.setField(this,15,e||[])},proto.mediapipe.CalculatorGraphConfig.prototype.addOutputStream=function(e,r){return t.Message.addToRepeatedField(this,15,e,r)},proto.mediapipe.CalculatorGraphConfig.prototype.clearOutputStreamList=function(){return this.setOutputStreamList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getInputSidePacketList=function(){return t.Message.getRepeatedField(this,16)},proto.mediapipe.CalculatorGraphConfig.prototype.setInputSidePacketList=function(e){return t.Message.setField(this,16,e||[])},proto.mediapipe.CalculatorGraphConfig.prototype.addInputSidePacket=function(e,r){return t.Message.addToRepeatedField(this,16,e,r)},proto.mediapipe.CalculatorGraphConfig.prototype.clearInputSidePacketList=function(){return this.setInputSidePacketList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getOutputSidePacketList=function(){return t.Message.getRepeatedField(this,17)},proto.mediapipe.CalculatorGraphConfig.prototype.setOutputSidePacketList=function(e){return t.Message.setField(this,17,e||[])},proto.mediapipe.CalculatorGraphConfig.prototype.addOutputSidePacket=function(e,r){return t.Message.addToRepeatedField(this,17,e,r)},proto.mediapipe.CalculatorGraphConfig.prototype.clearOutputSidePacketList=function(){return this.setOutputSidePacketList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getMaxQueueSize=function(){return t.Message.getFieldWithDefault(this,11,0)},proto.mediapipe.CalculatorGraphConfig.prototype.setMaxQueueSize=function(e){return t.Message.setProto3IntField(this,11,e)},proto.mediapipe.CalculatorGraphConfig.prototype.getReportDeadlock=function(){return t.Message.getBooleanFieldWithDefault(this,21,!1)},proto.mediapipe.CalculatorGraphConfig.prototype.setReportDeadlock=function(e){return t.Message.setProto3BooleanField(this,21,e)},proto.mediapipe.CalculatorGraphConfig.prototype.getInputStreamHandler=function(){return t.Message.getWrapperField(this,u.InputStreamHandlerConfig,12)},proto.mediapipe.CalculatorGraphConfig.prototype.setInputStreamHandler=function(e){return t.Message.setWrapperField(this,12,e)},proto.mediapipe.CalculatorGraphConfig.prototype.clearInputStreamHandler=function(){return this.setInputStreamHandler(void 0)},proto.mediapipe.CalculatorGraphConfig.prototype.hasInputStreamHandler=function(){return null!=t.Message.getField(this,12)},proto.mediapipe.CalculatorGraphConfig.prototype.getOutputStreamHandler=function(){return t.Message.getWrapperField(this,u.OutputStreamHandlerConfig,13)},proto.mediapipe.CalculatorGraphConfig.prototype.setOutputStreamHandler=function(e){return t.Message.setWrapperField(this,13,e)},proto.mediapipe.CalculatorGraphConfig.prototype.clearOutputStreamHandler=function(){return this.setOutputStreamHandler(void 0)},proto.mediapipe.CalculatorGraphConfig.prototype.hasOutputStreamHandler=function(){return null!=t.Message.getField(this,13)},proto.mediapipe.CalculatorGraphConfig.prototype.getExecutorList=function(){return t.Message.getRepeatedWrapperField(this,proto.mediapipe.ExecutorConfig,14)},proto.mediapipe.CalculatorGraphConfig.prototype.setExecutorList=function(e){return t.Message.setRepeatedWrapperField(this,14,e)},proto.mediapipe.CalculatorGraphConfig.prototype.addExecutor=function(e,r){return t.Message.addToRepeatedWrapperField(this,14,e,proto.mediapipe.ExecutorConfig,r)},proto.mediapipe.CalculatorGraphConfig.prototype.clearExecutorList=function(){return this.setExecutorList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getProfilerConfig=function(){return t.Message.getWrapperField(this,proto.mediapipe.ProfilerConfig,18)},proto.mediapipe.CalculatorGraphConfig.prototype.setProfilerConfig=function(e){return t.Message.setWrapperField(this,18,e)},proto.mediapipe.CalculatorGraphConfig.prototype.clearProfilerConfig=function(){return this.setProfilerConfig(void 0)},proto.mediapipe.CalculatorGraphConfig.prototype.hasProfilerConfig=function(){return null!=t.Message.getField(this,18)},proto.mediapipe.CalculatorGraphConfig.prototype.getPackage=function(){return t.Message.getFieldWithDefault(this,19,"")},proto.mediapipe.CalculatorGraphConfig.prototype.setPackage=function(e){return t.Message.setProto3StringField(this,19,e)},proto.mediapipe.CalculatorGraphConfig.prototype.getType=function(){return t.Message.getFieldWithDefault(this,20,"")},proto.mediapipe.CalculatorGraphConfig.prototype.setType=function(e){return t.Message.setProto3StringField(this,20,e)},proto.mediapipe.CalculatorGraphConfig.prototype.getOptions=function(){return t.Message.getWrapperField(this,i.MediaPipeOptions,1001)},proto.mediapipe.CalculatorGraphConfig.prototype.setOptions=function(e){return t.Message.setWrapperField(this,1001,e)},proto.mediapipe.CalculatorGraphConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.CalculatorGraphConfig.prototype.hasOptions=function(){return null!=t.Message.getField(this,1001)},proto.mediapipe.CalculatorGraphConfig.prototype.getGraphOptionsList=function(){return t.Message.getRepeatedWrapperField(this,a.Any,1002)},proto.mediapipe.CalculatorGraphConfig.prototype.setGraphOptionsList=function(e){return t.Message.setRepeatedWrapperField(this,1002,e)},proto.mediapipe.CalculatorGraphConfig.prototype.addGraphOptions=function(e,r){return t.Message.addToRepeatedWrapperField(this,1002,e,proto.google.protobuf.Any,r)},proto.mediapipe.CalculatorGraphConfig.prototype.clearGraphOptionsList=function(){return this.setGraphOptionsList([])},r.object.extend(e,proto.mediapipe)}(calculator_pb);var detection_pb={},location_data_pb={},rasterization_pb={};!function(e){var t=googleProtobuf,r=t,n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==n&&n||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.mediapipe.Rasterization",null,n),r.exportSymbol("proto.mediapipe.Rasterization.Interval",null,n),proto.mediapipe.Rasterization=function(e){t.Message.initialize(this,e,0,-1,proto.mediapipe.Rasterization.repeatedFields_,null)},r.inherits(proto.mediapipe.Rasterization,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.Rasterization.displayName="proto.mediapipe.Rasterization"),proto.mediapipe.Rasterization.Interval=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.Rasterization.Interval,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.Rasterization.Interval.displayName="proto.mediapipe.Rasterization.Interval"),proto.mediapipe.Rasterization.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Rasterization.prototype.toObject=function(e){return proto.mediapipe.Rasterization.toObject(e,this)},proto.mediapipe.Rasterization.toObject=function(e,r){var n={intervalList:t.Message.toObjectList(r.getIntervalList(),proto.mediapipe.Rasterization.Interval.toObject,e)};return e&&(n.$jspbMessageInstance=r),n}),proto.mediapipe.Rasterization.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.Rasterization;return proto.mediapipe.Rasterization.deserializeBinaryFromReader(n,r)},proto.mediapipe.Rasterization.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var r=new proto.mediapipe.Rasterization.Interval;t.readMessage(r,proto.mediapipe.Rasterization.Interval.deserializeBinaryFromReader),e.addInterval(r)}else t.skipField();return e},proto.mediapipe.Rasterization.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.Rasterization.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.Rasterization.serializeBinaryToWriter=function(e,t){var r;(r=e.getIntervalList()).length>0&&t.writeRepeatedMessage(1,r,proto.mediapipe.Rasterization.Interval.serializeBinaryToWriter)},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Rasterization.Interval.prototype.toObject=function(e){return proto.mediapipe.Rasterization.Interval.toObject(e,this)},proto.mediapipe.Rasterization.Interval.toObject=function(e,r){var n,o={y:null==(n=t.Message.getField(r,1))?void 0:n,leftX:null==(n=t.Message.getField(r,2))?void 0:n,rightX:null==(n=t.Message.getField(r,3))?void 0:n};return e&&(o.$jspbMessageInstance=r),o}),proto.mediapipe.Rasterization.Interval.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.Rasterization.Interval;return proto.mediapipe.Rasterization.Interval.deserializeBinaryFromReader(n,r)},proto.mediapipe.Rasterization.Interval.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readInt32();e.setY(r);break;case 2:r=t.readInt32(),e.setLeftX(r);break;case 3:r=t.readInt32(),e.setRightX(r);break;default:t.skipField()}return e},proto.mediapipe.Rasterization.Interval.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.Rasterization.Interval.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.Rasterization.Interval.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=t.Message.getField(e,1))&&r.writeInt32(1,n),null!=(n=t.Message.getField(e,2))&&r.writeInt32(2,n),null!=(n=t.Message.getField(e,3))&&r.writeInt32(3,n)},proto.mediapipe.Rasterization.Interval.prototype.getY=function(){return t.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.Rasterization.Interval.prototype.setY=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.Rasterization.Interval.prototype.clearY=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.Rasterization.Interval.prototype.hasY=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.Rasterization.Interval.prototype.getLeftX=function(){return t.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.Rasterization.Interval.prototype.setLeftX=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.Rasterization.Interval.prototype.clearLeftX=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.Rasterization.Interval.prototype.hasLeftX=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.Rasterization.Interval.prototype.getRightX=function(){return t.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.Rasterization.Interval.prototype.setRightX=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.Rasterization.Interval.prototype.clearRightX=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.Rasterization.Interval.prototype.hasRightX=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.Rasterization.prototype.getIntervalList=function(){return t.Message.getRepeatedWrapperField(this,proto.mediapipe.Rasterization.Interval,1)},proto.mediapipe.Rasterization.prototype.setIntervalList=function(e){return t.Message.setRepeatedWrapperField(this,1,e)},proto.mediapipe.Rasterization.prototype.addInterval=function(e,r){return t.Message.addToRepeatedWrapperField(this,1,e,proto.mediapipe.Rasterization.Interval,r)},proto.mediapipe.Rasterization.prototype.clearIntervalList=function(){return this.setIntervalList([])},r.object.extend(e,proto.mediapipe)}(rasterization_pb),function(e){var t=googleProtobuf,r=t,n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==n&&n||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),o=rasterization_pb;r.object.extend(proto,o),r.exportSymbol("proto.mediapipe.LocationData",null,n),r.exportSymbol("proto.mediapipe.LocationData.BinaryMask",null,n),r.exportSymbol("proto.mediapipe.LocationData.BoundingBox",null,n),r.exportSymbol("proto.mediapipe.LocationData.Format",null,n),r.exportSymbol("proto.mediapipe.LocationData.RelativeBoundingBox",null,n),r.exportSymbol("proto.mediapipe.LocationData.RelativeKeypoint",null,n),proto.mediapipe.LocationData=function(e){t.Message.initialize(this,e,0,-1,proto.mediapipe.LocationData.repeatedFields_,null)},r.inherits(proto.mediapipe.LocationData,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.LocationData.displayName="proto.mediapipe.LocationData"),proto.mediapipe.LocationData.BoundingBox=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.LocationData.BoundingBox,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.LocationData.BoundingBox.displayName="proto.mediapipe.LocationData.BoundingBox"),proto.mediapipe.LocationData.RelativeBoundingBox=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.LocationData.RelativeBoundingBox,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.LocationData.RelativeBoundingBox.displayName="proto.mediapipe.LocationData.RelativeBoundingBox"),proto.mediapipe.LocationData.BinaryMask=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.LocationData.BinaryMask,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.LocationData.BinaryMask.displayName="proto.mediapipe.LocationData.BinaryMask"),proto.mediapipe.LocationData.RelativeKeypoint=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.LocationData.RelativeKeypoint,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.LocationData.RelativeKeypoint.displayName="proto.mediapipe.LocationData.RelativeKeypoint"),proto.mediapipe.LocationData.repeatedFields_=[5],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LocationData.prototype.toObject=function(e){return proto.mediapipe.LocationData.toObject(e,this)},proto.mediapipe.LocationData.toObject=function(e,r){var n,o={format:null==(n=t.Message.getField(r,1))?void 0:n,boundingBox:(n=r.getBoundingBox())&&proto.mediapipe.LocationData.BoundingBox.toObject(e,n),relativeBoundingBox:(n=r.getRelativeBoundingBox())&&proto.mediapipe.LocationData.RelativeBoundingBox.toObject(e,n),mask:(n=r.getMask())&&proto.mediapipe.LocationData.BinaryMask.toObject(e,n),relativeKeypointsList:t.Message.toObjectList(r.getRelativeKeypointsList(),proto.mediapipe.LocationData.RelativeKeypoint.toObject,e)};return e&&(o.$jspbMessageInstance=r),o}),proto.mediapipe.LocationData.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.LocationData;return proto.mediapipe.LocationData.deserializeBinaryFromReader(n,r)},proto.mediapipe.LocationData.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readEnum();e.setFormat(r);break;case 2:r=new proto.mediapipe.LocationData.BoundingBox,t.readMessage(r,proto.mediapipe.LocationData.BoundingBox.deserializeBinaryFromReader),e.setBoundingBox(r);break;case 3:r=new proto.mediapipe.LocationData.RelativeBoundingBox,t.readMessage(r,proto.mediapipe.LocationData.RelativeBoundingBox.deserializeBinaryFromReader),e.setRelativeBoundingBox(r);break;case 4:r=new proto.mediapipe.LocationData.BinaryMask,t.readMessage(r,proto.mediapipe.LocationData.BinaryMask.deserializeBinaryFromReader),e.setMask(r);break;case 5:r=new proto.mediapipe.LocationData.RelativeKeypoint,t.readMessage(r,proto.mediapipe.LocationData.RelativeKeypoint.deserializeBinaryFromReader),e.addRelativeKeypoints(r);break;default:t.skipField()}return e},proto.mediapipe.LocationData.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.LocationData.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.LocationData.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=t.Message.getField(e,1))&&r.writeEnum(1,n),null!=(n=e.getBoundingBox())&&r.writeMessage(2,n,proto.mediapipe.LocationData.BoundingBox.serializeBinaryToWriter),null!=(n=e.getRelativeBoundingBox())&&r.writeMessage(3,n,proto.mediapipe.LocationData.RelativeBoundingBox.serializeBinaryToWriter),null!=(n=e.getMask())&&r.writeMessage(4,n,proto.mediapipe.LocationData.BinaryMask.serializeBinaryToWriter),(n=e.getRelativeKeypointsList()).length>0&&r.writeRepeatedMessage(5,n,proto.mediapipe.LocationData.RelativeKeypoint.serializeBinaryToWriter)},proto.mediapipe.LocationData.Format={GLOBAL:0,BOUNDING_BOX:1,RELATIVE_BOUNDING_BOX:2,MASK:3},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LocationData.BoundingBox.prototype.toObject=function(e){return proto.mediapipe.LocationData.BoundingBox.toObject(e,this)},proto.mediapipe.LocationData.BoundingBox.toObject=function(e,r){var n,o={xmin:null==(n=t.Message.getField(r,1))?void 0:n,ymin:null==(n=t.Message.getField(r,2))?void 0:n,width:null==(n=t.Message.getField(r,3))?void 0:n,height:null==(n=t.Message.getField(r,4))?void 0:n};return e&&(o.$jspbMessageInstance=r),o}),proto.mediapipe.LocationData.BoundingBox.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.LocationData.BoundingBox;return proto.mediapipe.LocationData.BoundingBox.deserializeBinaryFromReader(n,r)},proto.mediapipe.LocationData.BoundingBox.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readInt32();e.setXmin(r);break;case 2:r=t.readInt32(),e.setYmin(r);break;case 3:r=t.readInt32(),e.setWidth(r);break;case 4:r=t.readInt32(),e.setHeight(r);break;default:t.skipField()}return e},proto.mediapipe.LocationData.BoundingBox.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.LocationData.BoundingBox.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.LocationData.BoundingBox.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=t.Message.getField(e,1))&&r.writeInt32(1,n),null!=(n=t.Message.getField(e,2))&&r.writeInt32(2,n),null!=(n=t.Message.getField(e,3))&&r.writeInt32(3,n),null!=(n=t.Message.getField(e,4))&&r.writeInt32(4,n)},proto.mediapipe.LocationData.BoundingBox.prototype.getXmin=function(){return t.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.LocationData.BoundingBox.prototype.setXmin=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.LocationData.BoundingBox.prototype.clearXmin=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.LocationData.BoundingBox.prototype.hasXmin=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.LocationData.BoundingBox.prototype.getYmin=function(){return t.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.LocationData.BoundingBox.prototype.setYmin=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.LocationData.BoundingBox.prototype.clearYmin=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.LocationData.BoundingBox.prototype.hasYmin=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.LocationData.BoundingBox.prototype.getWidth=function(){return t.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.LocationData.BoundingBox.prototype.setWidth=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.LocationData.BoundingBox.prototype.clearWidth=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.LocationData.BoundingBox.prototype.hasWidth=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.LocationData.BoundingBox.prototype.getHeight=function(){return t.Message.getFieldWithDefault(this,4,0)},proto.mediapipe.LocationData.BoundingBox.prototype.setHeight=function(e){return t.Message.setField(this,4,e)},proto.mediapipe.LocationData.BoundingBox.prototype.clearHeight=function(){return t.Message.setField(this,4,void 0)},proto.mediapipe.LocationData.BoundingBox.prototype.hasHeight=function(){return null!=t.Message.getField(this,4)},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LocationData.RelativeBoundingBox.prototype.toObject=function(e){return proto.mediapipe.LocationData.RelativeBoundingBox.toObject(e,this)},proto.mediapipe.LocationData.RelativeBoundingBox.toObject=function(e,r){var n,o={xmin:null==(n=t.Message.getOptionalFloatingPointField(r,1))?void 0:n,ymin:null==(n=t.Message.getOptionalFloatingPointField(r,2))?void 0:n,width:null==(n=t.Message.getOptionalFloatingPointField(r,3))?void 0:n,height:null==(n=t.Message.getOptionalFloatingPointField(r,4))?void 0:n};return e&&(o.$jspbMessageInstance=r),o}),proto.mediapipe.LocationData.RelativeBoundingBox.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.LocationData.RelativeBoundingBox;return proto.mediapipe.LocationData.RelativeBoundingBox.deserializeBinaryFromReader(n,r)},proto.mediapipe.LocationData.RelativeBoundingBox.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readFloat();e.setXmin(r);break;case 2:r=t.readFloat(),e.setYmin(r);break;case 3:r=t.readFloat(),e.setWidth(r);break;case 4:r=t.readFloat(),e.setHeight(r);break;default:t.skipField()}return e},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.LocationData.RelativeBoundingBox.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.LocationData.RelativeBoundingBox.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=t.Message.getField(e,1))&&r.writeFloat(1,n),null!=(n=t.Message.getField(e,2))&&r.writeFloat(2,n),null!=(n=t.Message.getField(e,3))&&r.writeFloat(3,n),null!=(n=t.Message.getField(e,4))&&r.writeFloat(4,n)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.getXmin=function(){return t.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.setXmin=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.clearXmin=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.hasXmin=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.getYmin=function(){return t.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.setYmin=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.clearYmin=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.hasYmin=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.getWidth=function(){return t.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.setWidth=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.clearWidth=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.hasWidth=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.getHeight=function(){return t.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.setHeight=function(e){return t.Message.setField(this,4,e)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.clearHeight=function(){return t.Message.setField(this,4,void 0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.hasHeight=function(){return null!=t.Message.getField(this,4)},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LocationData.BinaryMask.prototype.toObject=function(e){return proto.mediapipe.LocationData.BinaryMask.toObject(e,this)},proto.mediapipe.LocationData.BinaryMask.toObject=function(e,r){var n,a={width:null==(n=t.Message.getField(r,1))?void 0:n,height:null==(n=t.Message.getField(r,2))?void 0:n,rasterization:(n=r.getRasterization())&&o.Rasterization.toObject(e,n)};return e&&(a.$jspbMessageInstance=r),a}),proto.mediapipe.LocationData.BinaryMask.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.LocationData.BinaryMask;return proto.mediapipe.LocationData.BinaryMask.deserializeBinaryFromReader(n,r)},proto.mediapipe.LocationData.BinaryMask.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readInt32();e.setWidth(r);break;case 2:r=t.readInt32(),e.setHeight(r);break;case 3:r=new o.Rasterization,t.readMessage(r,o.Rasterization.deserializeBinaryFromReader),e.setRasterization(r);break;default:t.skipField()}return e},proto.mediapipe.LocationData.BinaryMask.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.LocationData.BinaryMask.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.LocationData.BinaryMask.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=t.Message.getField(e,1))&&r.writeInt32(1,n),null!=(n=t.Message.getField(e,2))&&r.writeInt32(2,n),null!=(n=e.getRasterization())&&r.writeMessage(3,n,o.Rasterization.serializeBinaryToWriter)},proto.mediapipe.LocationData.BinaryMask.prototype.getWidth=function(){return t.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.LocationData.BinaryMask.prototype.setWidth=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.LocationData.BinaryMask.prototype.clearWidth=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.LocationData.BinaryMask.prototype.hasWidth=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.LocationData.BinaryMask.prototype.getHeight=function(){return t.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.LocationData.BinaryMask.prototype.setHeight=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.LocationData.BinaryMask.prototype.clearHeight=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.LocationData.BinaryMask.prototype.hasHeight=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.LocationData.BinaryMask.prototype.getRasterization=function(){return t.Message.getWrapperField(this,o.Rasterization,3)},proto.mediapipe.LocationData.BinaryMask.prototype.setRasterization=function(e){return t.Message.setWrapperField(this,3,e)},proto.mediapipe.LocationData.BinaryMask.prototype.clearRasterization=function(){return this.setRasterization(void 0)},proto.mediapipe.LocationData.BinaryMask.prototype.hasRasterization=function(){return null!=t.Message.getField(this,3)},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LocationData.RelativeKeypoint.prototype.toObject=function(e){return proto.mediapipe.LocationData.RelativeKeypoint.toObject(e,this)},proto.mediapipe.LocationData.RelativeKeypoint.toObject=function(e,r){var n,o={x:null==(n=t.Message.getOptionalFloatingPointField(r,1))?void 0:n,y:null==(n=t.Message.getOptionalFloatingPointField(r,2))?void 0:n,keypointLabel:null==(n=t.Message.getField(r,3))?void 0:n,score:null==(n=t.Message.getOptionalFloatingPointField(r,4))?void 0:n};return e&&(o.$jspbMessageInstance=r),o}),proto.mediapipe.LocationData.RelativeKeypoint.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.LocationData.RelativeKeypoint;return proto.mediapipe.LocationData.RelativeKeypoint.deserializeBinaryFromReader(n,r)},proto.mediapipe.LocationData.RelativeKeypoint.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readFloat();e.setX(r);break;case 2:r=t.readFloat(),e.setY(r);break;case 3:r=t.readString(),e.setKeypointLabel(r);break;case 4:r=t.readFloat(),e.setScore(r);break;default:t.skipField()}return e},proto.mediapipe.LocationData.RelativeKeypoint.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.LocationData.RelativeKeypoint.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.LocationData.RelativeKeypoint.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=t.Message.getField(e,1))&&r.writeFloat(1,n),null!=(n=t.Message.getField(e,2))&&r.writeFloat(2,n),null!=(n=t.Message.getField(e,3))&&r.writeString(3,n),null!=(n=t.Message.getField(e,4))&&r.writeFloat(4,n)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.getX=function(){return t.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.setX=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.clearX=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.hasX=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.getY=function(){return t.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.setY=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.clearY=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.hasY=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.getKeypointLabel=function(){return t.Message.getFieldWithDefault(this,3,"")},proto.mediapipe.LocationData.RelativeKeypoint.prototype.setKeypointLabel=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.clearKeypointLabel=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.hasKeypointLabel=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.getScore=function(){return t.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.setScore=function(e){return t.Message.setField(this,4,e)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.clearScore=function(){return t.Message.setField(this,4,void 0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.hasScore=function(){return null!=t.Message.getField(this,4)},proto.mediapipe.LocationData.prototype.getFormat=function(){return t.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.LocationData.prototype.setFormat=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.LocationData.prototype.clearFormat=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.LocationData.prototype.hasFormat=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.LocationData.prototype.getBoundingBox=function(){return t.Message.getWrapperField(this,proto.mediapipe.LocationData.BoundingBox,2)},proto.mediapipe.LocationData.prototype.setBoundingBox=function(e){return t.Message.setWrapperField(this,2,e)},proto.mediapipe.LocationData.prototype.clearBoundingBox=function(){return this.setBoundingBox(void 0)},proto.mediapipe.LocationData.prototype.hasBoundingBox=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.LocationData.prototype.getRelativeBoundingBox=function(){return t.Message.getWrapperField(this,proto.mediapipe.LocationData.RelativeBoundingBox,3)},proto.mediapipe.LocationData.prototype.setRelativeBoundingBox=function(e){return t.Message.setWrapperField(this,3,e)},proto.mediapipe.LocationData.prototype.clearRelativeBoundingBox=function(){return this.setRelativeBoundingBox(void 0)},proto.mediapipe.LocationData.prototype.hasRelativeBoundingBox=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.LocationData.prototype.getMask=function(){return t.Message.getWrapperField(this,proto.mediapipe.LocationData.BinaryMask,4)},proto.mediapipe.LocationData.prototype.setMask=function(e){return t.Message.setWrapperField(this,4,e)},proto.mediapipe.LocationData.prototype.clearMask=function(){return this.setMask(void 0)},proto.mediapipe.LocationData.prototype.hasMask=function(){return null!=t.Message.getField(this,4)},proto.mediapipe.LocationData.prototype.getRelativeKeypointsList=function(){return t.Message.getRepeatedWrapperField(this,proto.mediapipe.LocationData.RelativeKeypoint,5)},proto.mediapipe.LocationData.prototype.setRelativeKeypointsList=function(e){return t.Message.setRepeatedWrapperField(this,5,e)},proto.mediapipe.LocationData.prototype.addRelativeKeypoints=function(e,r){return t.Message.addToRepeatedWrapperField(this,5,e,proto.mediapipe.LocationData.RelativeKeypoint,r)},proto.mediapipe.LocationData.prototype.clearRelativeKeypointsList=function(){return this.setRelativeKeypointsList([])},r.object.extend(e,proto.mediapipe)}(location_data_pb),function(e){var t=googleProtobuf,r=t,n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==n&&n||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),o=location_data_pb;r.object.extend(proto,o),r.exportSymbol("proto.mediapipe.Detection",null,n),r.exportSymbol("proto.mediapipe.Detection.AssociatedDetection",null,n),r.exportSymbol("proto.mediapipe.DetectionList",null,n),proto.mediapipe.Detection=function(e){t.Message.initialize(this,e,0,-1,proto.mediapipe.Detection.repeatedFields_,null)},r.inherits(proto.mediapipe.Detection,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.Detection.displayName="proto.mediapipe.Detection"),proto.mediapipe.Detection.AssociatedDetection=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.Detection.AssociatedDetection,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.Detection.AssociatedDetection.displayName="proto.mediapipe.Detection.AssociatedDetection"),proto.mediapipe.DetectionList=function(e){t.Message.initialize(this,e,0,-1,proto.mediapipe.DetectionList.repeatedFields_,null)},r.inherits(proto.mediapipe.DetectionList,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.DetectionList.displayName="proto.mediapipe.DetectionList"),proto.mediapipe.Detection.repeatedFields_=[1,2,3,8,9],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Detection.prototype.toObject=function(e){return proto.mediapipe.Detection.toObject(e,this)},proto.mediapipe.Detection.toObject=function(e,r){var n,a={labelList:null==(n=t.Message.getRepeatedField(r,1))?void 0:n,labelIdList:null==(n=t.Message.getRepeatedField(r,2))?void 0:n,scoreList:null==(n=t.Message.getRepeatedFloatingPointField(r,3))?void 0:n,locationData:(n=r.getLocationData())&&o.LocationData.toObject(e,n),featureTag:null==(n=t.Message.getField(r,5))?void 0:n,trackId:null==(n=t.Message.getField(r,6))?void 0:n,detectionId:null==(n=t.Message.getField(r,7))?void 0:n,associatedDetectionsList:t.Message.toObjectList(r.getAssociatedDetectionsList(),proto.mediapipe.Detection.AssociatedDetection.toObject,e),displayNameList:null==(n=t.Message.getRepeatedField(r,9))?void 0:n,timestampUsec:null==(n=t.Message.getField(r,10))?void 0:n};return e&&(a.$jspbMessageInstance=r),a}),proto.mediapipe.Detection.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.Detection;return proto.mediapipe.Detection.deserializeBinaryFromReader(n,r)},proto.mediapipe.Detection.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readString();e.addLabel(r);break;case 2:for(var n=t.isDelimited()?t.readPackedInt32():[t.readInt32()],a=0;a<n.length;a++)e.addLabelId(n[a]);break;case 3:for(n=t.isDelimited()?t.readPackedFloat():[t.readFloat()],a=0;a<n.length;a++)e.addScore(n[a]);break;case 4:r=new o.LocationData,t.readMessage(r,o.LocationData.deserializeBinaryFromReader),e.setLocationData(r);break;case 5:r=t.readString(),e.setFeatureTag(r);break;case 6:r=t.readString(),e.setTrackId(r);break;case 7:r=t.readInt64(),e.setDetectionId(r);break;case 8:r=new proto.mediapipe.Detection.AssociatedDetection,t.readMessage(r,proto.mediapipe.Detection.AssociatedDetection.deserializeBinaryFromReader),e.addAssociatedDetections(r);break;case 9:r=t.readString(),e.addDisplayName(r);break;case 10:r=t.readInt64(),e.setTimestampUsec(r);break;default:t.skipField()}return e},proto.mediapipe.Detection.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.Detection.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.Detection.serializeBinaryToWriter=function(e,r){var n=void 0;(n=e.getLabelList()).length>0&&r.writeRepeatedString(1,n),(n=e.getLabelIdList()).length>0&&r.writePackedInt32(2,n),(n=e.getScoreList()).length>0&&r.writePackedFloat(3,n),null!=(n=e.getLocationData())&&r.writeMessage(4,n,o.LocationData.serializeBinaryToWriter),null!=(n=t.Message.getField(e,5))&&r.writeString(5,n),null!=(n=t.Message.getField(e,6))&&r.writeString(6,n),null!=(n=t.Message.getField(e,7))&&r.writeInt64(7,n),(n=e.getAssociatedDetectionsList()).length>0&&r.writeRepeatedMessage(8,n,proto.mediapipe.Detection.AssociatedDetection.serializeBinaryToWriter),(n=e.getDisplayNameList()).length>0&&r.writeRepeatedString(9,n),null!=(n=t.Message.getField(e,10))&&r.writeInt64(10,n)},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Detection.AssociatedDetection.prototype.toObject=function(e){return proto.mediapipe.Detection.AssociatedDetection.toObject(e,this)},proto.mediapipe.Detection.AssociatedDetection.toObject=function(e,r){var n,o={id:null==(n=t.Message.getField(r,1))?void 0:n,confidence:null==(n=t.Message.getOptionalFloatingPointField(r,2))?void 0:n};return e&&(o.$jspbMessageInstance=r),o}),proto.mediapipe.Detection.AssociatedDetection.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.Detection.AssociatedDetection;return proto.mediapipe.Detection.AssociatedDetection.deserializeBinaryFromReader(n,r)},proto.mediapipe.Detection.AssociatedDetection.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readInt32();e.setId(r);break;case 2:r=t.readFloat(),e.setConfidence(r);break;default:t.skipField()}return e},proto.mediapipe.Detection.AssociatedDetection.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.Detection.AssociatedDetection.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.Detection.AssociatedDetection.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=t.Message.getField(e,1))&&r.writeInt32(1,n),null!=(n=t.Message.getField(e,2))&&r.writeFloat(2,n)},proto.mediapipe.Detection.AssociatedDetection.prototype.getId=function(){return t.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.Detection.AssociatedDetection.prototype.setId=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.Detection.AssociatedDetection.prototype.clearId=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.Detection.AssociatedDetection.prototype.hasId=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.Detection.AssociatedDetection.prototype.getConfidence=function(){return t.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.Detection.AssociatedDetection.prototype.setConfidence=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.Detection.AssociatedDetection.prototype.clearConfidence=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.Detection.AssociatedDetection.prototype.hasConfidence=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.Detection.prototype.getLabelList=function(){return t.Message.getRepeatedField(this,1)},proto.mediapipe.Detection.prototype.setLabelList=function(e){return t.Message.setField(this,1,e||[])},proto.mediapipe.Detection.prototype.addLabel=function(e,r){return t.Message.addToRepeatedField(this,1,e,r)},proto.mediapipe.Detection.prototype.clearLabelList=function(){return this.setLabelList([])},proto.mediapipe.Detection.prototype.getLabelIdList=function(){return t.Message.getRepeatedField(this,2)},proto.mediapipe.Detection.prototype.setLabelIdList=function(e){return t.Message.setField(this,2,e||[])},proto.mediapipe.Detection.prototype.addLabelId=function(e,r){return t.Message.addToRepeatedField(this,2,e,r)},proto.mediapipe.Detection.prototype.clearLabelIdList=function(){return this.setLabelIdList([])},proto.mediapipe.Detection.prototype.getScoreList=function(){return t.Message.getRepeatedFloatingPointField(this,3)},proto.mediapipe.Detection.prototype.setScoreList=function(e){return t.Message.setField(this,3,e||[])},proto.mediapipe.Detection.prototype.addScore=function(e,r){return t.Message.addToRepeatedField(this,3,e,r)},proto.mediapipe.Detection.prototype.clearScoreList=function(){return this.setScoreList([])},proto.mediapipe.Detection.prototype.getLocationData=function(){return t.Message.getWrapperField(this,o.LocationData,4)},proto.mediapipe.Detection.prototype.setLocationData=function(e){return t.Message.setWrapperField(this,4,e)},proto.mediapipe.Detection.prototype.clearLocationData=function(){return this.setLocationData(void 0)},proto.mediapipe.Detection.prototype.hasLocationData=function(){return null!=t.Message.getField(this,4)},proto.mediapipe.Detection.prototype.getFeatureTag=function(){return t.Message.getFieldWithDefault(this,5,"")},proto.mediapipe.Detection.prototype.setFeatureTag=function(e){return t.Message.setField(this,5,e)},proto.mediapipe.Detection.prototype.clearFeatureTag=function(){return t.Message.setField(this,5,void 0)},proto.mediapipe.Detection.prototype.hasFeatureTag=function(){return null!=t.Message.getField(this,5)},proto.mediapipe.Detection.prototype.getTrackId=function(){return t.Message.getFieldWithDefault(this,6,"")},proto.mediapipe.Detection.prototype.setTrackId=function(e){return t.Message.setField(this,6,e)},proto.mediapipe.Detection.prototype.clearTrackId=function(){return t.Message.setField(this,6,void 0)},proto.mediapipe.Detection.prototype.hasTrackId=function(){return null!=t.Message.getField(this,6)},proto.mediapipe.Detection.prototype.getDetectionId=function(){return t.Message.getFieldWithDefault(this,7,0)},proto.mediapipe.Detection.prototype.setDetectionId=function(e){return t.Message.setField(this,7,e)},proto.mediapipe.Detection.prototype.clearDetectionId=function(){return t.Message.setField(this,7,void 0)},proto.mediapipe.Detection.prototype.hasDetectionId=function(){return null!=t.Message.getField(this,7)},proto.mediapipe.Detection.prototype.getAssociatedDetectionsList=function(){return t.Message.getRepeatedWrapperField(this,proto.mediapipe.Detection.AssociatedDetection,8)},proto.mediapipe.Detection.prototype.setAssociatedDetectionsList=function(e){return t.Message.setRepeatedWrapperField(this,8,e)},proto.mediapipe.Detection.prototype.addAssociatedDetections=function(e,r){return t.Message.addToRepeatedWrapperField(this,8,e,proto.mediapipe.Detection.AssociatedDetection,r)},proto.mediapipe.Detection.prototype.clearAssociatedDetectionsList=function(){return this.setAssociatedDetectionsList([])},proto.mediapipe.Detection.prototype.getDisplayNameList=function(){return t.Message.getRepeatedField(this,9)},proto.mediapipe.Detection.prototype.setDisplayNameList=function(e){return t.Message.setField(this,9,e||[])},proto.mediapipe.Detection.prototype.addDisplayName=function(e,r){return t.Message.addToRepeatedField(this,9,e,r)},proto.mediapipe.Detection.prototype.clearDisplayNameList=function(){return this.setDisplayNameList([])},proto.mediapipe.Detection.prototype.getTimestampUsec=function(){return t.Message.getFieldWithDefault(this,10,0)},proto.mediapipe.Detection.prototype.setTimestampUsec=function(e){return t.Message.setField(this,10,e)},proto.mediapipe.Detection.prototype.clearTimestampUsec=function(){return t.Message.setField(this,10,void 0)},proto.mediapipe.Detection.prototype.hasTimestampUsec=function(){return null!=t.Message.getField(this,10)},proto.mediapipe.DetectionList.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.DetectionList.prototype.toObject=function(e){return proto.mediapipe.DetectionList.toObject(e,this)},proto.mediapipe.DetectionList.toObject=function(e,r){var n={detectionList:t.Message.toObjectList(r.getDetectionList(),proto.mediapipe.Detection.toObject,e)};return e&&(n.$jspbMessageInstance=r),n}),proto.mediapipe.DetectionList.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.DetectionList;return proto.mediapipe.DetectionList.deserializeBinaryFromReader(n,r)},proto.mediapipe.DetectionList.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var r=new proto.mediapipe.Detection;t.readMessage(r,proto.mediapipe.Detection.deserializeBinaryFromReader),e.addDetection(r)}else t.skipField();return e},proto.mediapipe.DetectionList.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.DetectionList.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.DetectionList.serializeBinaryToWriter=function(e,t){var r;(r=e.getDetectionList()).length>0&&t.writeRepeatedMessage(1,r,proto.mediapipe.Detection.serializeBinaryToWriter)},proto.mediapipe.DetectionList.prototype.getDetectionList=function(){return t.Message.getRepeatedWrapperField(this,proto.mediapipe.Detection,1)},proto.mediapipe.DetectionList.prototype.setDetectionList=function(e){return t.Message.setRepeatedWrapperField(this,1,e)},proto.mediapipe.DetectionList.prototype.addDetection=function(e,r){return t.Message.addToRepeatedWrapperField(this,1,e,proto.mediapipe.Detection,r)},proto.mediapipe.DetectionList.prototype.clearDetectionList=function(){return this.setDetectionList([])},r.object.extend(e,proto.mediapipe)}(detection_pb);var base_options_pb={},acceleration_pb={},inference_calculator_pb={};!function(e){var t=googleProtobuf,r=t,n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==n&&n||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),o=calculator_pb;r.object.extend(proto,o);var a=calculator_options_pb;r.object.extend(proto,a),r.exportSymbol("proto.mediapipe.InferenceCalculatorOptions",null,n),r.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate",null,n),r.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.DelegateCase",null,n),r.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu",null,n),r.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.Api",null,n),r.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.InferenceUsage",null,n),r.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi",null,n),r.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite",null,n),r.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack",null,n),proto.mediapipe.InferenceCalculatorOptions=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.InferenceCalculatorOptions,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.InferenceCalculatorOptions.displayName="proto.mediapipe.InferenceCalculatorOptions"),proto.mediapipe.InferenceCalculatorOptions.Delegate=function(e){t.Message.initialize(this,e,0,-1,null,proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_)},r.inherits(proto.mediapipe.InferenceCalculatorOptions.Delegate,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.displayName="proto.mediapipe.InferenceCalculatorOptions.Delegate"),proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.displayName="proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite"),proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.displayName="proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu"),proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.displayName="proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi"),proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.displayName="proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InferenceCalculatorOptions.prototype.toObject=function(e){return proto.mediapipe.InferenceCalculatorOptions.toObject(e,this)},proto.mediapipe.InferenceCalculatorOptions.toObject=function(e,r){var n,o={modelPath:null==(n=t.Message.getField(r,1))?void 0:n,useGpu:t.Message.getBooleanFieldWithDefault(r,2,!1),useNnapi:t.Message.getBooleanFieldWithDefault(r,3,!1),cpuNumThread:t.Message.getFieldWithDefault(r,4,-1),delegate:(n=r.getDelegate())&&proto.mediapipe.InferenceCalculatorOptions.Delegate.toObject(e,n)};return e&&(o.$jspbMessageInstance=r),o}),proto.mediapipe.InferenceCalculatorOptions.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.InferenceCalculatorOptions;return proto.mediapipe.InferenceCalculatorOptions.deserializeBinaryFromReader(n,r)},proto.mediapipe.InferenceCalculatorOptions.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readString();e.setModelPath(r);break;case 2:r=t.readBool(),e.setUseGpu(r);break;case 3:r=t.readBool(),e.setUseNnapi(r);break;case 4:r=t.readInt32(),e.setCpuNumThread(r);break;case 5:r=new proto.mediapipe.InferenceCalculatorOptions.Delegate,t.readMessage(r,proto.mediapipe.InferenceCalculatorOptions.Delegate.deserializeBinaryFromReader),e.setDelegate(r);break;default:t.skipField()}return e},proto.mediapipe.InferenceCalculatorOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.InferenceCalculatorOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.InferenceCalculatorOptions.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=t.Message.getField(e,1))&&r.writeString(1,n),null!=(n=t.Message.getField(e,2))&&r.writeBool(2,n),null!=(n=t.Message.getField(e,3))&&r.writeBool(3,n),null!=(n=t.Message.getField(e,4))&&r.writeInt32(4,n),null!=(n=e.getDelegate())&&r.writeMessage(5,n,proto.mediapipe.InferenceCalculatorOptions.Delegate.serializeBinaryToWriter)},proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_=[[1,2,3,4]],proto.mediapipe.InferenceCalculatorOptions.Delegate.DelegateCase={DELEGATE_NOT_SET:0,TFLITE:1,GPU:2,NNAPI:3,XNNPACK:4},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.getDelegateCase=function(){return t.Message.computeOneofCase(this,proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_[0])},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.toObject=function(e){return proto.mediapipe.InferenceCalculatorOptions.Delegate.toObject(e,this)},proto.mediapipe.InferenceCalculatorOptions.Delegate.toObject=function(e,t){var r,n={tflite:(r=t.getTflite())&&proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.toObject(e,r),gpu:(r=t.getGpu())&&proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.toObject(e,r),nnapi:(r=t.getNnapi())&&proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.toObject(e,r),xnnpack:(r=t.getXnnpack())&&proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.toObject(e,r)};return e&&(n.$jspbMessageInstance=t),n}),proto.mediapipe.InferenceCalculatorOptions.Delegate.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.InferenceCalculatorOptions.Delegate;return proto.mediapipe.InferenceCalculatorOptions.Delegate.deserializeBinaryFromReader(n,r)},proto.mediapipe.InferenceCalculatorOptions.Delegate.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=new proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite;t.readMessage(r,proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.deserializeBinaryFromReader),e.setTflite(r);break;case 2:r=new proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu,t.readMessage(r,proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.deserializeBinaryFromReader),e.setGpu(r);break;case 3:r=new proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi,t.readMessage(r,proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.deserializeBinaryFromReader),e.setNnapi(r);break;case 4:r=new proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack,t.readMessage(r,proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.deserializeBinaryFromReader),e.setXnnpack(r);break;default:t.skipField()}return e},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.InferenceCalculatorOptions.Delegate.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.InferenceCalculatorOptions.Delegate.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getTflite())&&t.writeMessage(1,r,proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.serializeBinaryToWriter),null!=(r=e.getGpu())&&t.writeMessage(2,r,proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.serializeBinaryToWriter),null!=(r=e.getNnapi())&&t.writeMessage(3,r,proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.serializeBinaryToWriter),null!=(r=e.getXnnpack())&&t.writeMessage(4,r,proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.serializeBinaryToWriter)},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.prototype.toObject=function(e){return proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.toObject(e,this)},proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite;return proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.deserializeBinaryFromReader(n,r)},proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.serializeBinaryToWriter=function(e,t){},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.toObject=function(e){return proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.toObject(e,this)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.toObject=function(e,r){var n,o={useAdvancedGpuApi:t.Message.getBooleanFieldWithDefault(r,1,!1),api:t.Message.getFieldWithDefault(r,4,0),allowPrecisionLoss:t.Message.getBooleanFieldWithDefault(r,3,!0),cachedKernelPath:null==(n=t.Message.getField(r,2))?void 0:n,serializedModelDir:null==(n=t.Message.getField(r,7))?void 0:n,modelToken:null==(n=t.Message.getField(r,8))?void 0:n,usage:t.Message.getFieldWithDefault(r,5,2)};return e&&(o.$jspbMessageInstance=r),o}),proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu;return proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.deserializeBinaryFromReader(n,r)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readBool();e.setUseAdvancedGpuApi(r);break;case 4:r=t.readEnum(),e.setApi(r);break;case 3:r=t.readBool(),e.setAllowPrecisionLoss(r);break;case 2:r=t.readString(),e.setCachedKernelPath(r);break;case 7:r=t.readString(),e.setSerializedModelDir(r);break;case 8:r=t.readString(),e.setModelToken(r);break;case 5:r=t.readEnum(),e.setUsage(r);break;default:t.skipField()}return e},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=t.Message.getField(e,1))&&r.writeBool(1,n),null!=(n=t.Message.getField(e,4))&&r.writeEnum(4,n),null!=(n=t.Message.getField(e,3))&&r.writeBool(3,n),null!=(n=t.Message.getField(e,2))&&r.writeString(2,n),null!=(n=t.Message.getField(e,7))&&r.writeString(7,n),null!=(n=t.Message.getField(e,8))&&r.writeString(8,n),null!=(n=t.Message.getField(e,5))&&r.writeEnum(5,n)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.Api={ANY:0,OPENGL:1,OPENCL:2},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.InferenceUsage={UNSPECIFIED:0,FAST_SINGLE_ANSWER:1,SUSTAINED_SPEED:2},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getUseAdvancedGpuApi=function(){return t.Message.getBooleanFieldWithDefault(this,1,!1)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setUseAdvancedGpuApi=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearUseAdvancedGpuApi=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasUseAdvancedGpuApi=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getApi=function(){return t.Message.getFieldWithDefault(this,4,0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setApi=function(e){return t.Message.setField(this,4,e)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearApi=function(){return t.Message.setField(this,4,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasApi=function(){return null!=t.Message.getField(this,4)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getAllowPrecisionLoss=function(){return t.Message.getBooleanFieldWithDefault(this,3,!0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setAllowPrecisionLoss=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearAllowPrecisionLoss=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasAllowPrecisionLoss=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getCachedKernelPath=function(){return t.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setCachedKernelPath=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearCachedKernelPath=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasCachedKernelPath=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getSerializedModelDir=function(){return t.Message.getFieldWithDefault(this,7,"")},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setSerializedModelDir=function(e){return t.Message.setField(this,7,e)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearSerializedModelDir=function(){return t.Message.setField(this,7,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasSerializedModelDir=function(){return null!=t.Message.getField(this,7)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getModelToken=function(){return t.Message.getFieldWithDefault(this,8,"")},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setModelToken=function(e){return t.Message.setField(this,8,e)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearModelToken=function(){return t.Message.setField(this,8,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasModelToken=function(){return null!=t.Message.getField(this,8)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getUsage=function(){return t.Message.getFieldWithDefault(this,5,2)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setUsage=function(e){return t.Message.setField(this,5,e)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearUsage=function(){return t.Message.setField(this,5,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasUsage=function(){return null!=t.Message.getField(this,5)},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.toObject=function(e){return proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.toObject(e,this)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.toObject=function(e,r){var n,o={cacheDir:null==(n=t.Message.getField(r,1))?void 0:n,modelToken:null==(n=t.Message.getField(r,2))?void 0:n,acceleratorName:null==(n=t.Message.getField(r,3))?void 0:n};return e&&(o.$jspbMessageInstance=r),o}),proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi;return proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.deserializeBinaryFromReader(n,r)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readString();e.setCacheDir(r);break;case 2:r=t.readString(),e.setModelToken(r);break;case 3:r=t.readString(),e.setAcceleratorName(r);break;default:t.skipField()}return e},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=t.Message.getField(e,1))&&r.writeString(1,n),null!=(n=t.Message.getField(e,2))&&r.writeString(2,n),null!=(n=t.Message.getField(e,3))&&r.writeString(3,n)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.getCacheDir=function(){return t.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.setCacheDir=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.clearCacheDir=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.hasCacheDir=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.getModelToken=function(){return t.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.setModelToken=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.clearModelToken=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.hasModelToken=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.getAcceleratorName=function(){return t.Message.getFieldWithDefault(this,3,"")},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.setAcceleratorName=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.clearAcceleratorName=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.hasAcceleratorName=function(){return null!=t.Message.getField(this,3)},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.prototype.toObject=function(e){return proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.toObject(e,this)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.toObject=function(e,r){var n={numThreads:t.Message.getFieldWithDefault(r,1,-1)};return e&&(n.$jspbMessageInstance=r),n}),proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack;return proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.deserializeBinaryFromReader(n,r)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var r=t.readInt32();e.setNumThreads(r)}else t.skipField();return e},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.serializeBinaryToWriter=function(e,r){var n;null!=(n=t.Message.getField(e,1))&&r.writeInt32(1,n)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.prototype.getNumThreads=function(){return t.Message.getFieldWithDefault(this,1,-1)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.prototype.setNumThreads=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.prototype.clearNumThreads=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.prototype.hasNumThreads=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.getTflite=function(){return t.Message.getWrapperField(this,proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite,1)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.setTflite=function(e){return t.Message.setOneofWrapperField(this,1,proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_[0],e)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.clearTflite=function(){return this.setTflite(void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.hasTflite=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.getGpu=function(){return t.Message.getWrapperField(this,proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu,2)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.setGpu=function(e){return t.Message.setOneofWrapperField(this,2,proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_[0],e)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.clearGpu=function(){return this.setGpu(void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.hasGpu=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.getNnapi=function(){return t.Message.getWrapperField(this,proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi,3)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.setNnapi=function(e){return t.Message.setOneofWrapperField(this,3,proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_[0],e)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.clearNnapi=function(){return this.setNnapi(void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.hasNnapi=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.getXnnpack=function(){return t.Message.getWrapperField(this,proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack,4)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.setXnnpack=function(e){return t.Message.setOneofWrapperField(this,4,proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_[0],e)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.clearXnnpack=function(){return this.setXnnpack(void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.hasXnnpack=function(){return null!=t.Message.getField(this,4)},proto.mediapipe.InferenceCalculatorOptions.ext=new t.ExtensionFieldInfo(336783863,{ext:0},proto.mediapipe.InferenceCalculatorOptions,proto.mediapipe.InferenceCalculatorOptions.toObject,0),a.CalculatorOptions.extensionsBinary[336783863]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.InferenceCalculatorOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.InferenceCalculatorOptions.serializeBinaryToWriter,proto.mediapipe.InferenceCalculatorOptions.deserializeBinaryFromReader,!1),a.CalculatorOptions.extensions[336783863]=proto.mediapipe.InferenceCalculatorOptions.ext,proto.mediapipe.InferenceCalculatorOptions.prototype.getModelPath=function(){return t.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.InferenceCalculatorOptions.prototype.setModelPath=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.InferenceCalculatorOptions.prototype.clearModelPath=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.InferenceCalculatorOptions.prototype.hasModelPath=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.InferenceCalculatorOptions.prototype.getUseGpu=function(){return t.Message.getBooleanFieldWithDefault(this,2,!1)},proto.mediapipe.InferenceCalculatorOptions.prototype.setUseGpu=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.InferenceCalculatorOptions.prototype.clearUseGpu=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.InferenceCalculatorOptions.prototype.hasUseGpu=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.InferenceCalculatorOptions.prototype.getUseNnapi=function(){return t.Message.getBooleanFieldWithDefault(this,3,!1)},proto.mediapipe.InferenceCalculatorOptions.prototype.setUseNnapi=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.InferenceCalculatorOptions.prototype.clearUseNnapi=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.InferenceCalculatorOptions.prototype.hasUseNnapi=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.InferenceCalculatorOptions.prototype.getCpuNumThread=function(){return t.Message.getFieldWithDefault(this,4,-1)},proto.mediapipe.InferenceCalculatorOptions.prototype.setCpuNumThread=function(e){return t.Message.setField(this,4,e)},proto.mediapipe.InferenceCalculatorOptions.prototype.clearCpuNumThread=function(){return t.Message.setField(this,4,void 0)},proto.mediapipe.InferenceCalculatorOptions.prototype.hasCpuNumThread=function(){return null!=t.Message.getField(this,4)},proto.mediapipe.InferenceCalculatorOptions.prototype.getDelegate=function(){return t.Message.getWrapperField(this,proto.mediapipe.InferenceCalculatorOptions.Delegate,5)},proto.mediapipe.InferenceCalculatorOptions.prototype.setDelegate=function(e){return t.Message.setWrapperField(this,5,e)},proto.mediapipe.InferenceCalculatorOptions.prototype.clearDelegate=function(){return this.setDelegate(void 0)},proto.mediapipe.InferenceCalculatorOptions.prototype.hasDelegate=function(){return null!=t.Message.getField(this,5)},proto.mediapipe.InferenceCalculatorOptions.ext=new t.ExtensionFieldInfo(336783863,{ext:0},proto.mediapipe.InferenceCalculatorOptions,proto.mediapipe.InferenceCalculatorOptions.toObject,0),a.CalculatorOptions.extensionsBinary[336783863]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.InferenceCalculatorOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.InferenceCalculatorOptions.serializeBinaryToWriter,proto.mediapipe.InferenceCalculatorOptions.deserializeBinaryFromReader,!1),a.CalculatorOptions.extensions[336783863]=proto.mediapipe.InferenceCalculatorOptions.ext,r.object.extend(e,proto.mediapipe)}(inference_calculator_pb),function(e){var t=googleProtobuf,r=t,n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==n&&n||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),o=inference_calculator_pb;r.object.extend(proto,o),r.exportSymbol("proto.mediapipe.tasks.core.proto.Acceleration",null,n),r.exportSymbol("proto.mediapipe.tasks.core.proto.Acceleration.DelegateCase",null,n),proto.mediapipe.tasks.core.proto.Acceleration=function(e){t.Message.initialize(this,e,0,-1,null,proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_)},r.inherits(proto.mediapipe.tasks.core.proto.Acceleration,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.core.proto.Acceleration.displayName="proto.mediapipe.tasks.core.proto.Acceleration"),proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_=[[1,2,4,5]],proto.mediapipe.tasks.core.proto.Acceleration.DelegateCase={DELEGATE_NOT_SET:0,XNNPACK:1,GPU:2,TFLITE:4,NNAPI:5},proto.mediapipe.tasks.core.proto.Acceleration.prototype.getDelegateCase=function(){return t.Message.computeOneofCase(this,proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_[0])},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.core.proto.Acceleration.prototype.toObject=function(e){return proto.mediapipe.tasks.core.proto.Acceleration.toObject(e,this)},proto.mediapipe.tasks.core.proto.Acceleration.toObject=function(e,t){var r,n={xnnpack:(r=t.getXnnpack())&&o.InferenceCalculatorOptions.Delegate.Xnnpack.toObject(e,r),gpu:(r=t.getGpu())&&o.InferenceCalculatorOptions.Delegate.Gpu.toObject(e,r),tflite:(r=t.getTflite())&&o.InferenceCalculatorOptions.Delegate.TfLite.toObject(e,r),nnapi:(r=t.getNnapi())&&o.InferenceCalculatorOptions.Delegate.Nnapi.toObject(e,r)};return e&&(n.$jspbMessageInstance=t),n}),proto.mediapipe.tasks.core.proto.Acceleration.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.tasks.core.proto.Acceleration;return proto.mediapipe.tasks.core.proto.Acceleration.deserializeBinaryFromReader(n,r)},proto.mediapipe.tasks.core.proto.Acceleration.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=new o.InferenceCalculatorOptions.Delegate.Xnnpack;t.readMessage(r,o.InferenceCalculatorOptions.Delegate.Xnnpack.deserializeBinaryFromReader),e.setXnnpack(r);break;case 2:r=new o.InferenceCalculatorOptions.Delegate.Gpu,t.readMessage(r,o.InferenceCalculatorOptions.Delegate.Gpu.deserializeBinaryFromReader),e.setGpu(r);break;case 4:r=new o.InferenceCalculatorOptions.Delegate.TfLite,t.readMessage(r,o.InferenceCalculatorOptions.Delegate.TfLite.deserializeBinaryFromReader),e.setTflite(r);break;case 5:r=new o.InferenceCalculatorOptions.Delegate.Nnapi,t.readMessage(r,o.InferenceCalculatorOptions.Delegate.Nnapi.deserializeBinaryFromReader),e.setNnapi(r);break;default:t.skipField()}return e},proto.mediapipe.tasks.core.proto.Acceleration.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.core.proto.Acceleration.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.core.proto.Acceleration.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getXnnpack())&&t.writeMessage(1,r,o.InferenceCalculatorOptions.Delegate.Xnnpack.serializeBinaryToWriter),null!=(r=e.getGpu())&&t.writeMessage(2,r,o.InferenceCalculatorOptions.Delegate.Gpu.serializeBinaryToWriter),null!=(r=e.getTflite())&&t.writeMessage(4,r,o.InferenceCalculatorOptions.Delegate.TfLite.serializeBinaryToWriter),null!=(r=e.getNnapi())&&t.writeMessage(5,r,o.InferenceCalculatorOptions.Delegate.Nnapi.serializeBinaryToWriter)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.getXnnpack=function(){return t.Message.getWrapperField(this,o.InferenceCalculatorOptions.Delegate.Xnnpack,1)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.setXnnpack=function(e){return t.Message.setOneofWrapperField(this,1,proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_[0],e)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.clearXnnpack=function(){return this.setXnnpack(void 0)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.hasXnnpack=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.getGpu=function(){return t.Message.getWrapperField(this,o.InferenceCalculatorOptions.Delegate.Gpu,2)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.setGpu=function(e){return t.Message.setOneofWrapperField(this,2,proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_[0],e)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.clearGpu=function(){return this.setGpu(void 0)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.hasGpu=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.getTflite=function(){return t.Message.getWrapperField(this,o.InferenceCalculatorOptions.Delegate.TfLite,4)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.setTflite=function(e){return t.Message.setOneofWrapperField(this,4,proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_[0],e)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.clearTflite=function(){return this.setTflite(void 0)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.hasTflite=function(){return null!=t.Message.getField(this,4)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.getNnapi=function(){return t.Message.getWrapperField(this,o.InferenceCalculatorOptions.Delegate.Nnapi,5)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.setNnapi=function(e){return t.Message.setOneofWrapperField(this,5,proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_[0],e)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.clearNnapi=function(){return this.setNnapi(void 0)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.hasNnapi=function(){return null!=t.Message.getField(this,5)},r.object.extend(e,proto.mediapipe.tasks.core.proto)}(acceleration_pb);var external_file_pb={};!function(e){var t=googleProtobuf,r=t,n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==n&&n||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.mediapipe.tasks.core.proto.ExternalFile",null,n),r.exportSymbol("proto.mediapipe.tasks.core.proto.FileDescriptorMeta",null,n),r.exportSymbol("proto.mediapipe.tasks.core.proto.FilePointerMeta",null,n),proto.mediapipe.tasks.core.proto.ExternalFile=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.core.proto.ExternalFile,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.core.proto.ExternalFile.displayName="proto.mediapipe.tasks.core.proto.ExternalFile"),proto.mediapipe.tasks.core.proto.FileDescriptorMeta=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.core.proto.FileDescriptorMeta,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.core.proto.FileDescriptorMeta.displayName="proto.mediapipe.tasks.core.proto.FileDescriptorMeta"),proto.mediapipe.tasks.core.proto.FilePointerMeta=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.core.proto.FilePointerMeta,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.core.proto.FilePointerMeta.displayName="proto.mediapipe.tasks.core.proto.FilePointerMeta"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.core.proto.ExternalFile.prototype.toObject=function(e){return proto.mediapipe.tasks.core.proto.ExternalFile.toObject(e,this)},proto.mediapipe.tasks.core.proto.ExternalFile.toObject=function(e,r){var n,o={fileContent:r.getFileContent_asB64(),fileName:null==(n=t.Message.getField(r,2))?void 0:n,fileDescriptorMeta:(n=r.getFileDescriptorMeta())&&proto.mediapipe.tasks.core.proto.FileDescriptorMeta.toObject(e,n),filePointerMeta:(n=r.getFilePointerMeta())&&proto.mediapipe.tasks.core.proto.FilePointerMeta.toObject(e,n)};return e&&(o.$jspbMessageInstance=r),o}),proto.mediapipe.tasks.core.proto.ExternalFile.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.tasks.core.proto.ExternalFile;return proto.mediapipe.tasks.core.proto.ExternalFile.deserializeBinaryFromReader(n,r)},proto.mediapipe.tasks.core.proto.ExternalFile.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readBytes();e.setFileContent(r);break;case 2:r=t.readString(),e.setFileName(r);break;case 3:r=new proto.mediapipe.tasks.core.proto.FileDescriptorMeta,t.readMessage(r,proto.mediapipe.tasks.core.proto.FileDescriptorMeta.deserializeBinaryFromReader),e.setFileDescriptorMeta(r);break;case 4:r=new proto.mediapipe.tasks.core.proto.FilePointerMeta,t.readMessage(r,proto.mediapipe.tasks.core.proto.FilePointerMeta.deserializeBinaryFromReader),e.setFilePointerMeta(r);break;default:t.skipField()}return e},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.core.proto.ExternalFile.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.core.proto.ExternalFile.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=t.Message.getField(e,1))&&r.writeBytes(1,n),null!=(n=t.Message.getField(e,2))&&r.writeString(2,n),null!=(n=e.getFileDescriptorMeta())&&r.writeMessage(3,n,proto.mediapipe.tasks.core.proto.FileDescriptorMeta.serializeBinaryToWriter),null!=(n=e.getFilePointerMeta())&&r.writeMessage(4,n,proto.mediapipe.tasks.core.proto.FilePointerMeta.serializeBinaryToWriter)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.getFileContent=function(){return t.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.getFileContent_asB64=function(){return t.Message.bytesAsB64(this.getFileContent())},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.getFileContent_asU8=function(){return t.Message.bytesAsU8(this.getFileContent())},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.setFileContent=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.clearFileContent=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.hasFileContent=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.getFileName=function(){return t.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.setFileName=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.clearFileName=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.hasFileName=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.getFileDescriptorMeta=function(){return t.Message.getWrapperField(this,proto.mediapipe.tasks.core.proto.FileDescriptorMeta,3)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.setFileDescriptorMeta=function(e){return t.Message.setWrapperField(this,3,e)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.clearFileDescriptorMeta=function(){return this.setFileDescriptorMeta(void 0)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.hasFileDescriptorMeta=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.getFilePointerMeta=function(){return t.Message.getWrapperField(this,proto.mediapipe.tasks.core.proto.FilePointerMeta,4)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.setFilePointerMeta=function(e){return t.Message.setWrapperField(this,4,e)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.clearFilePointerMeta=function(){return this.setFilePointerMeta(void 0)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.hasFilePointerMeta=function(){return null!=t.Message.getField(this,4)},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.toObject=function(e){return proto.mediapipe.tasks.core.proto.FileDescriptorMeta.toObject(e,this)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.toObject=function(e,r){var n,o={fd:null==(n=t.Message.getField(r,1))?void 0:n,length:null==(n=t.Message.getField(r,2))?void 0:n,offset:null==(n=t.Message.getField(r,3))?void 0:n};return e&&(o.$jspbMessageInstance=r),o}),proto.mediapipe.tasks.core.proto.FileDescriptorMeta.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.tasks.core.proto.FileDescriptorMeta;return proto.mediapipe.tasks.core.proto.FileDescriptorMeta.deserializeBinaryFromReader(n,r)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readInt32();e.setFd(r);break;case 2:r=t.readInt64(),e.setLength(r);break;case 3:r=t.readInt64(),e.setOffset(r);break;default:t.skipField()}return e},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.core.proto.FileDescriptorMeta.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=t.Message.getField(e,1))&&r.writeInt32(1,n),null!=(n=t.Message.getField(e,2))&&r.writeInt64(2,n),null!=(n=t.Message.getField(e,3))&&r.writeInt64(3,n)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.getFd=function(){return t.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.setFd=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.clearFd=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.hasFd=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.getLength=function(){return t.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.setLength=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.clearLength=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.hasLength=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.getOffset=function(){return t.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.setOffset=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.clearOffset=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.hasOffset=function(){return null!=t.Message.getField(this,3)},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.toObject=function(e){return proto.mediapipe.tasks.core.proto.FilePointerMeta.toObject(e,this)},proto.mediapipe.tasks.core.proto.FilePointerMeta.toObject=function(e,r){var n,o={pointer:null==(n=t.Message.getField(r,1))?void 0:n,length:null==(n=t.Message.getField(r,2))?void 0:n};return e&&(o.$jspbMessageInstance=r),o}),proto.mediapipe.tasks.core.proto.FilePointerMeta.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.tasks.core.proto.FilePointerMeta;return proto.mediapipe.tasks.core.proto.FilePointerMeta.deserializeBinaryFromReader(n,r)},proto.mediapipe.tasks.core.proto.FilePointerMeta.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readUint64();e.setPointer(r);break;case 2:r=t.readInt64(),e.setLength(r);break;default:t.skipField()}return e},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.core.proto.FilePointerMeta.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.core.proto.FilePointerMeta.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=t.Message.getField(e,1))&&r.writeUint64(1,n),null!=(n=t.Message.getField(e,2))&&r.writeInt64(2,n)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.getPointer=function(){return t.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.setPointer=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.clearPointer=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.hasPointer=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.getLength=function(){return t.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.setLength=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.clearLength=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.hasLength=function(){return null!=t.Message.getField(this,2)},r.object.extend(e,proto.mediapipe.tasks.core.proto)}(external_file_pb),function(e){var t=googleProtobuf,r=t,n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==n&&n||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),o=acceleration_pb;r.object.extend(proto,o);var a=external_file_pb;r.object.extend(proto,a),r.exportSymbol("proto.mediapipe.tasks.core.proto.BaseOptions",null,n),proto.mediapipe.tasks.core.proto.BaseOptions=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.core.proto.BaseOptions,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.core.proto.BaseOptions.displayName="proto.mediapipe.tasks.core.proto.BaseOptions"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.core.proto.BaseOptions.prototype.toObject=function(e){return proto.mediapipe.tasks.core.proto.BaseOptions.toObject(e,this)},proto.mediapipe.tasks.core.proto.BaseOptions.toObject=function(e,r){var n,i={modelAsset:(n=r.getModelAsset())&&a.ExternalFile.toObject(e,n),useStreamMode:t.Message.getBooleanFieldWithDefault(r,2,!1),acceleration:(n=r.getAcceleration())&&o.Acceleration.toObject(e,n)};return e&&(i.$jspbMessageInstance=r),i}),proto.mediapipe.tasks.core.proto.BaseOptions.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.tasks.core.proto.BaseOptions;return proto.mediapipe.tasks.core.proto.BaseOptions.deserializeBinaryFromReader(n,r)},proto.mediapipe.tasks.core.proto.BaseOptions.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=new a.ExternalFile;t.readMessage(r,a.ExternalFile.deserializeBinaryFromReader),e.setModelAsset(r);break;case 2:r=t.readBool(),e.setUseStreamMode(r);break;case 3:r=new o.Acceleration,t.readMessage(r,o.Acceleration.deserializeBinaryFromReader),e.setAcceleration(r);break;default:t.skipField()}return e},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.core.proto.BaseOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.core.proto.BaseOptions.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=e.getModelAsset())&&r.writeMessage(1,n,a.ExternalFile.serializeBinaryToWriter),null!=(n=t.Message.getField(e,2))&&r.writeBool(2,n),null!=(n=e.getAcceleration())&&r.writeMessage(3,n,o.Acceleration.serializeBinaryToWriter)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.getModelAsset=function(){return t.Message.getWrapperField(this,a.ExternalFile,1)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.setModelAsset=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.clearModelAsset=function(){return this.setModelAsset(void 0)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.hasModelAsset=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.getUseStreamMode=function(){return t.Message.getBooleanFieldWithDefault(this,2,!1)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.setUseStreamMode=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.clearUseStreamMode=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.hasUseStreamMode=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.getAcceleration=function(){return t.Message.getWrapperField(this,o.Acceleration,3)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.setAcceleration=function(e){return t.Message.setWrapperField(this,3,e)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.clearAcceleration=function(){return this.setAcceleration(void 0)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.hasAcceleration=function(){return null!=t.Message.getField(this,3)},r.object.extend(e,proto.mediapipe.tasks.core.proto)}(base_options_pb);var face_detector_graph_options_pb={};!function(e){var t=googleProtobuf,r=t,n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==n&&n||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),o=calculator_pb;r.object.extend(proto,o);var a=calculator_options_pb;r.object.extend(proto,a);var i=base_options_pb;r.object.extend(proto,i),r.exportSymbol("proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions",null,n),proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.displayName="proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.toObject=function(e){return proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.toObject(e,this)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.toObject=function(e,r){var n,o={baseOptions:(n=r.getBaseOptions())&&i.BaseOptions.toObject(e,n),minDetectionConfidence:t.Message.getFloatingPointFieldWithDefault(r,2,.5),minSuppressionThreshold:t.Message.getFloatingPointFieldWithDefault(r,3,.5),numFaces:null==(n=t.Message.getField(r,4))?void 0:n};return e&&(o.$jspbMessageInstance=r),o}),proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions;return proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.deserializeBinaryFromReader(n,r)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=new i.BaseOptions;t.readMessage(r,i.BaseOptions.deserializeBinaryFromReader),e.setBaseOptions(r);break;case 2:r=t.readFloat(),e.setMinDetectionConfidence(r);break;case 3:r=t.readFloat(),e.setMinSuppressionThreshold(r);break;case 4:r=t.readInt32(),e.setNumFaces(r);break;default:t.skipField()}return e},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=e.getBaseOptions())&&r.writeMessage(1,n,i.BaseOptions.serializeBinaryToWriter),null!=(n=t.Message.getField(e,2))&&r.writeFloat(2,n),null!=(n=t.Message.getField(e,3))&&r.writeFloat(3,n),null!=(n=t.Message.getField(e,4))&&r.writeInt32(4,n)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.ext=new t.ExtensionFieldInfo(502141897,{ext:0},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.toObject,0),a.CalculatorOptions.extensionsBinary[502141897]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.deserializeBinaryFromReader,!1),a.CalculatorOptions.extensions[502141897]=proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.ext,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.getBaseOptions=function(){return t.Message.getWrapperField(this,i.BaseOptions,1)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.setBaseOptions=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.hasBaseOptions=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.getMinDetectionConfidence=function(){return t.Message.getFloatingPointFieldWithDefault(this,2,.5)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.setMinDetectionConfidence=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.clearMinDetectionConfidence=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.hasMinDetectionConfidence=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.getMinSuppressionThreshold=function(){return t.Message.getFloatingPointFieldWithDefault(this,3,.5)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.setMinSuppressionThreshold=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.clearMinSuppressionThreshold=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.hasMinSuppressionThreshold=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.getNumFaces=function(){return t.Message.getFieldWithDefault(this,4,0)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.setNumFaces=function(e){return t.Message.setField(this,4,e)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.clearNumFaces=function(){return t.Message.setField(this,4,void 0)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.hasNumFaces=function(){return null!=t.Message.getField(this,4)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.ext=new t.ExtensionFieldInfo(502141897,{ext:0},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.toObject,0),a.CalculatorOptions.extensionsBinary[502141897]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.deserializeBinaryFromReader,!1),a.CalculatorOptions.extensions[502141897]=proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.ext,r.object.extend(e,proto.mediapipe.tasks.vision.face_detector.proto)}(face_detector_graph_options_pb);var detection_result={};Object.defineProperty(detection_result,"__esModule",{value:!0}),detection_result.convertFromDetectionProto=void 0;const DEFAULT_CATEGORY_INDEX=-1;function convertFromDetectionProto(e){var t,r,n,o,a,i,s,p,l,u,d,c,g;const h=e.getScoreList(),f=e.getLabelIdList(),m=e.getLabelList(),y=e.getDisplayNameList(),b={categories:[],keypoints:[]};for(let e=0;e<h.length;e++)b.categories.push({score:h[e],index:null!==(t=f[e])&&void 0!==t?t:DEFAULT_CATEGORY_INDEX,categoryName:null!==(r=m[e])&&void 0!==r?r:"",displayName:null!==(n=y[e])&&void 0!==n?n:""});const _=null===(o=e.getLocationData())||void 0===o?void 0:o.getBoundingBox();if(_&&(b.boundingBox={originX:null!==(a=_.getXmin())&&void 0!==a?a:0,originY:null!==(i=_.getYmin())&&void 0!==i?i:0,width:null!==(s=_.getWidth())&&void 0!==s?s:0,height:null!==(p=_.getHeight())&&void 0!==p?p:0,angle:0}),null===(l=e.getLocationData())||void 0===l?void 0:l.getRelativeKeypointsList().length)for(const t of e.getLocationData().getRelativeKeypointsList())b.keypoints.push({x:null!==(u=t.getX())&&void 0!==u?u:0,y:null!==(d=t.getY())&&void 0!==d?d:0,score:null!==(c=t.getScore())&&void 0!==c?c:0,label:null!==(g=t.getKeypointLabel())&&void 0!==g?g:""});return b}detection_result.convertFromDetectionProto=convertFromDetectionProto;var vision_task_runner={},rect_pb={};!function(e){var t=googleProtobuf,r=t,n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==n&&n||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.mediapipe.NormalizedRect",null,n),r.exportSymbol("proto.mediapipe.Rect",null,n),proto.mediapipe.Rect=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.Rect,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.Rect.displayName="proto.mediapipe.Rect"),proto.mediapipe.NormalizedRect=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.NormalizedRect,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.NormalizedRect.displayName="proto.mediapipe.NormalizedRect"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Rect.prototype.toObject=function(e){return proto.mediapipe.Rect.toObject(e,this)},proto.mediapipe.Rect.toObject=function(e,r){var n,o={xCenter:null==(n=t.Message.getField(r,1))?void 0:n,yCenter:null==(n=t.Message.getField(r,2))?void 0:n,height:null==(n=t.Message.getField(r,3))?void 0:n,width:null==(n=t.Message.getField(r,4))?void 0:n,rotation:t.Message.getFloatingPointFieldWithDefault(r,5,0),rectId:null==(n=t.Message.getField(r,6))?void 0:n};return e&&(o.$jspbMessageInstance=r),o}),proto.mediapipe.Rect.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.Rect;return proto.mediapipe.Rect.deserializeBinaryFromReader(n,r)},proto.mediapipe.Rect.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readInt32();e.setXCenter(r);break;case 2:r=t.readInt32(),e.setYCenter(r);break;case 3:r=t.readInt32(),e.setHeight(r);break;case 4:r=t.readInt32(),e.setWidth(r);break;case 5:r=t.readFloat(),e.setRotation(r);break;case 6:r=t.readInt64(),e.setRectId(r);break;default:t.skipField()}return e},proto.mediapipe.Rect.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.Rect.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.Rect.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=t.Message.getField(e,1))&&r.writeInt32(1,n),null!=(n=t.Message.getField(e,2))&&r.writeInt32(2,n),null!=(n=t.Message.getField(e,3))&&r.writeInt32(3,n),null!=(n=t.Message.getField(e,4))&&r.writeInt32(4,n),null!=(n=t.Message.getField(e,5))&&r.writeFloat(5,n),null!=(n=t.Message.getField(e,6))&&r.writeInt64(6,n)},proto.mediapipe.Rect.prototype.getXCenter=function(){return t.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.Rect.prototype.setXCenter=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.Rect.prototype.clearXCenter=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.Rect.prototype.hasXCenter=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.Rect.prototype.getYCenter=function(){return t.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.Rect.prototype.setYCenter=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.Rect.prototype.clearYCenter=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.Rect.prototype.hasYCenter=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.Rect.prototype.getHeight=function(){return t.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.Rect.prototype.setHeight=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.Rect.prototype.clearHeight=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.Rect.prototype.hasHeight=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.Rect.prototype.getWidth=function(){return t.Message.getFieldWithDefault(this,4,0)},proto.mediapipe.Rect.prototype.setWidth=function(e){return t.Message.setField(this,4,e)},proto.mediapipe.Rect.prototype.clearWidth=function(){return t.Message.setField(this,4,void 0)},proto.mediapipe.Rect.prototype.hasWidth=function(){return null!=t.Message.getField(this,4)},proto.mediapipe.Rect.prototype.getRotation=function(){return t.Message.getFloatingPointFieldWithDefault(this,5,0)},proto.mediapipe.Rect.prototype.setRotation=function(e){return t.Message.setField(this,5,e)},proto.mediapipe.Rect.prototype.clearRotation=function(){return t.Message.setField(this,5,void 0)},proto.mediapipe.Rect.prototype.hasRotation=function(){return null!=t.Message.getField(this,5)},proto.mediapipe.Rect.prototype.getRectId=function(){return t.Message.getFieldWithDefault(this,6,0)},proto.mediapipe.Rect.prototype.setRectId=function(e){return t.Message.setField(this,6,e)},proto.mediapipe.Rect.prototype.clearRectId=function(){return t.Message.setField(this,6,void 0)},proto.mediapipe.Rect.prototype.hasRectId=function(){return null!=t.Message.getField(this,6)},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.NormalizedRect.prototype.toObject=function(e){return proto.mediapipe.NormalizedRect.toObject(e,this)},proto.mediapipe.NormalizedRect.toObject=function(e,r){var n,o={xCenter:null==(n=t.Message.getOptionalFloatingPointField(r,1))?void 0:n,yCenter:null==(n=t.Message.getOptionalFloatingPointField(r,2))?void 0:n,height:null==(n=t.Message.getOptionalFloatingPointField(r,3))?void 0:n,width:null==(n=t.Message.getOptionalFloatingPointField(r,4))?void 0:n,rotation:t.Message.getFloatingPointFieldWithDefault(r,5,0),rectId:null==(n=t.Message.getField(r,6))?void 0:n};return e&&(o.$jspbMessageInstance=r),o}),proto.mediapipe.NormalizedRect.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.NormalizedRect;return proto.mediapipe.NormalizedRect.deserializeBinaryFromReader(n,r)},proto.mediapipe.NormalizedRect.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readFloat();e.setXCenter(r);break;case 2:r=t.readFloat(),e.setYCenter(r);break;case 3:r=t.readFloat(),e.setHeight(r);break;case 4:r=t.readFloat(),e.setWidth(r);break;case 5:r=t.readFloat(),e.setRotation(r);break;case 6:r=t.readInt64(),e.setRectId(r);break;default:t.skipField()}return e},proto.mediapipe.NormalizedRect.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.NormalizedRect.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.NormalizedRect.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=t.Message.getField(e,1))&&r.writeFloat(1,n),null!=(n=t.Message.getField(e,2))&&r.writeFloat(2,n),null!=(n=t.Message.getField(e,3))&&r.writeFloat(3,n),null!=(n=t.Message.getField(e,4))&&r.writeFloat(4,n),null!=(n=t.Message.getField(e,5))&&r.writeFloat(5,n),null!=(n=t.Message.getField(e,6))&&r.writeInt64(6,n)},proto.mediapipe.NormalizedRect.prototype.getXCenter=function(){return t.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.NormalizedRect.prototype.setXCenter=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.NormalizedRect.prototype.clearXCenter=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.NormalizedRect.prototype.hasXCenter=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.NormalizedRect.prototype.getYCenter=function(){return t.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.NormalizedRect.prototype.setYCenter=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.NormalizedRect.prototype.clearYCenter=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.NormalizedRect.prototype.hasYCenter=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.NormalizedRect.prototype.getHeight=function(){return t.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.NormalizedRect.prototype.setHeight=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.NormalizedRect.prototype.clearHeight=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.NormalizedRect.prototype.hasHeight=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.NormalizedRect.prototype.getWidth=function(){return t.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.NormalizedRect.prototype.setWidth=function(e){return t.Message.setField(this,4,e)},proto.mediapipe.NormalizedRect.prototype.clearWidth=function(){return t.Message.setField(this,4,void 0)},proto.mediapipe.NormalizedRect.prototype.hasWidth=function(){return null!=t.Message.getField(this,4)},proto.mediapipe.NormalizedRect.prototype.getRotation=function(){return t.Message.getFloatingPointFieldWithDefault(this,5,0)},proto.mediapipe.NormalizedRect.prototype.setRotation=function(e){return t.Message.setField(this,5,e)},proto.mediapipe.NormalizedRect.prototype.clearRotation=function(){return t.Message.setField(this,5,void 0)},proto.mediapipe.NormalizedRect.prototype.hasRotation=function(){return null!=t.Message.getField(this,5)},proto.mediapipe.NormalizedRect.prototype.getRectId=function(){return t.Message.getFieldWithDefault(this,6,0)},proto.mediapipe.NormalizedRect.prototype.setRectId=function(e){return t.Message.setField(this,6,e)},proto.mediapipe.NormalizedRect.prototype.clearRectId=function(){return t.Message.setField(this,6,void 0)},proto.mediapipe.NormalizedRect.prototype.hasRectId=function(){return null!=t.Message.getField(this,6)},r.object.extend(e,proto.mediapipe)}(rect_pb);var task_runner={},graph_runner={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.createGraphRunner=e.createMediaPipeLib=e.GraphRunner=e.CALCULATOR_GRAPH_CONFIG_LISTENER_NAME=void 0;const t=platform_utils;e.CALCULATOR_GRAPH_CONFIG_LISTENER_NAME="__graph_config__";class r{constructor(e,r){this.autoResizeCanvas=!0,this.wasmModule=e,this.audioPtr=null,this.audioSize=0,this.hasMultiStreamSupport="function"==typeof this.wasmModule._addIntToInputStream,void 0!==r?this.wasmModule.canvas=r:"undefined"==typeof OffscreenCanvas||(0,t.isWebKit)()?(console.warn("OffscreenCanvas not supported and GraphRunner constructor glCanvas parameter is undefined. Creating backup canvas."),this.wasmModule.canvas=document.createElement("canvas")):this.wasmModule.canvas=new OffscreenCanvas(1,1)}async initializeGraph(e){const t=await fetch(e),r=await t.arrayBuffer(),n=!(e.endsWith(".pbtxt")||e.endsWith(".textproto"));this.setGraph(new Uint8Array(r),n)}setGraphFromString(e){this.setGraph((new TextEncoder).encode(e),!1)}setGraph(e,t){const r=e.length,n=this.wasmModule._malloc(r);this.wasmModule.HEAPU8.set(e,n),t?this.wasmModule._changeBinaryGraph(r,n):this.wasmModule._changeTextGraph(r,n),this.wasmModule._free(n)}configureAudio(e,t,r,n,o){this.wasmModule._configureAudio||console.warn('Attempting to use configureAudio without support for input audio. Is build dep ":gl_graph_runner_audio" missing?'),n=n||"input_audio",this.wrapStringPtr(n,(n=>{o=o||"audio_header",this.wrapStringPtr(o,(o=>{this.wasmModule._configureAudio(n,o,e,t,r)}))}))}setAutoResizeCanvas(e){this.autoResizeCanvas=e}setAutoRenderToScreen(e){this.wasmModule._setAutoRenderToScreen(e)}bindTextureToStream(e,t){if(!this.wasmModule.canvas)throw new Error("No OpenGL canvas configured.");t?this.wasmModule._bindTextureToStream(t):console.assert(this.wasmModule._bindTextureToCanvas());const r=this.wasmModule.canvas.getContext("webgl2")||this.wasmModule.canvas.getContext("webgl");if(!r)throw new Error("Failed to obtain WebGL context from the provided canvas. `getContext()` should only be invoked with `webgl` or `webgl2`.");let n,o;return r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e),e.videoWidth?(n=e.videoWidth,o=e.videoHeight):e.naturalWidth?(n=e.naturalWidth,o=e.naturalHeight):(n=e.width,o=e.height),!this.autoResizeCanvas||n===this.wasmModule.canvas.width&&o===this.wasmModule.canvas.height||(this.wasmModule.canvas.width=n,this.wasmModule.canvas.height=o),[n,o]}processGl(e,t){const[r,n]=this.bindTextureToStream(e),o=this.wasmModule._malloc(16);this.wasmModule.HEAPU32[o/4]=r,this.wasmModule.HEAPU32[o/4+1]=n,this.wasmModule.HEAPF64[o/8+1]=t,this.wasmModule._processGl(o),this.wasmModule._free(o)}wrapStringPtr(e,t){this.hasMultiStreamSupport||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target");const r=this.wasmModule.stringToNewUTF8(e);t(r),this.wasmModule._free(r)}wrapStringPtrPtr(e,t){this.hasMultiStreamSupport||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target");const r=new Uint32Array(e.length);for(let t=0;t<e.length;t++)r[t]=this.wasmModule.stringToNewUTF8(e[t]);const n=this.wasmModule._malloc(4*r.length);this.wasmModule.HEAPU32.set(r,n>>2),t(n);for(const e of r)this.wasmModule._free(e);this.wasmModule._free(n)}getCalculatorGraphConfig(t,r){const n=e.CALCULATOR_GRAPH_CONFIG_LISTENER_NAME;this.setListener(n,(e=>{t(e)})),this.wrapStringPtr(n,(e=>{this.wasmModule._getGraphConfig(e,r)})),delete this.wasmModule.simpleListeners[n]}setListener(e,t){this.wasmModule.simpleListeners=this.wasmModule.simpleListeners||{},this.wasmModule.simpleListeners[e]=t}setVectorListener(e,t){let r=[];this.wasmModule.simpleListeners=this.wasmModule.simpleListeners||{},this.wasmModule.simpleListeners[e]=(e,n,o)=>{n?(t(r,o),r=[]):r.push(e)}}attachErrorListener(e){this.wasmModule.errorListener=e}attachEmptyPacketListener(e,t){this.wasmModule.emptyPacketListeners=this.wasmModule.emptyPacketListeners||{},this.wasmModule.emptyPacketListeners[e]=t}addAudioToStream(e,t,r){this.addAudioToStreamWithShape(e,0,0,t,r)}addAudioToStreamWithShape(e,t,r,n,o){const a=4*e.length;this.audioSize!==a&&(this.audioPtr&&this.wasmModule._free(this.audioPtr),this.audioPtr=this.wasmModule._malloc(a),this.audioSize=a),this.wasmModule.HEAPF32.set(e,this.audioPtr/4),this.wrapStringPtr(n,(e=>{this.wasmModule._addAudioToInputStream(this.audioPtr,t,r,e,o)}))}addGpuBufferToStream(e,t,r){this.wrapStringPtr(t,(t=>{const[n,o]=this.bindTextureToStream(e,t);this.wasmModule._addBoundTextureToStream(t,n,o,r)}))}addBoolToStream(e,t,r){this.wrapStringPtr(t,(t=>{this.wasmModule._addBoolToInputStream(e,t,r)}))}addDoubleToStream(e,t,r){this.wrapStringPtr(t,(t=>{this.wasmModule._addDoubleToInputStream(e,t,r)}))}addFloatToStream(e,t,r){this.wrapStringPtr(t,(t=>{this.wasmModule._addFloatToInputStream(e,t,r)}))}addIntToStream(e,t,r){this.wrapStringPtr(t,(t=>{this.wasmModule._addIntToInputStream(e,t,r)}))}addStringToStream(e,t,r){this.wrapStringPtr(t,(t=>{this.wrapStringPtr(e,(e=>{this.wasmModule._addStringToInputStream(e,t,r)}))}))}addStringRecordToStream(e,t,r){this.wrapStringPtr(t,(t=>{this.wrapStringPtrPtr(Object.keys(e),(n=>{this.wrapStringPtrPtr(Object.values(e),(o=>{this.wasmModule._addFlatHashMapToInputStream(n,o,Object.keys(e).length,t,r)}))}))}))}addProtoToStream(e,t,r,n){this.wrapStringPtr(r,(r=>{this.wrapStringPtr(t,(t=>{const o=this.wasmModule._malloc(e.length);this.wasmModule.HEAPU8.set(e,o),this.wasmModule._addProtoToInputStream(o,e.length,t,r,n),this.wasmModule._free(o)}))}))}addEmptyPacketToStream(e,t){this.wrapStringPtr(e,(e=>{this.wasmModule._addEmptyPacketToInputStream(e,t)}))}addBoolToInputSidePacket(e,t){this.wrapStringPtr(t,(t=>{this.wasmModule._addBoolToInputSidePacket(e,t)}))}addDoubleToInputSidePacket(e,t){this.wrapStringPtr(t,(t=>{this.wasmModule._addDoubleToInputSidePacket(e,t)}))}addFloatToInputSidePacket(e,t){this.wrapStringPtr(t,(t=>{this.wasmModule._addFloatToInputSidePacket(e,t)}))}addIntToInputSidePacket(e,t){this.wrapStringPtr(t,(t=>{this.wasmModule._addIntToInputSidePacket(e,t)}))}addStringToInputSidePacket(e,t){this.wrapStringPtr(t,(t=>{this.wrapStringPtr(e,(e=>{this.wasmModule._addStringToInputSidePacket(e,t)}))}))}addProtoToInputSidePacket(e,t,r){this.wrapStringPtr(r,(r=>{this.wrapStringPtr(t,(t=>{const n=this.wasmModule._malloc(e.length);this.wasmModule.HEAPU8.set(e,n),this.wasmModule._addProtoToInputSidePacket(n,e.length,t,r),this.wasmModule._free(n)}))}))}attachBoolListener(e,t){this.setListener(e,t),this.wrapStringPtr(e,(e=>{this.wasmModule._attachBoolListener(e)}))}attachBoolVectorListener(e,t){this.setVectorListener(e,t),this.wrapStringPtr(e,(e=>{this.wasmModule._attachBoolVectorListener(e)}))}attachIntListener(e,t){this.setListener(e,t),this.wrapStringPtr(e,(e=>{this.wasmModule._attachIntListener(e)}))}attachIntVectorListener(e,t){this.setVectorListener(e,t),this.wrapStringPtr(e,(e=>{this.wasmModule._attachIntVectorListener(e)}))}attachDoubleListener(e,t){this.setListener(e,t),this.wrapStringPtr(e,(e=>{this.wasmModule._attachDoubleListener(e)}))}attachDoubleVectorListener(e,t){this.setVectorListener(e,t),this.wrapStringPtr(e,(e=>{this.wasmModule._attachDoubleVectorListener(e)}))}attachFloatListener(e,t){this.setListener(e,t),this.wrapStringPtr(e,(e=>{this.wasmModule._attachFloatListener(e)}))}attachFloatVectorListener(e,t){this.setVectorListener(e,t),this.wrapStringPtr(e,(e=>{this.wasmModule._attachFloatVectorListener(e)}))}attachStringListener(e,t){this.setListener(e,t),this.wrapStringPtr(e,(e=>{this.wasmModule._attachStringListener(e)}))}attachStringVectorListener(e,t){this.setVectorListener(e,t),this.wrapStringPtr(e,(e=>{this.wasmModule._attachStringVectorListener(e)}))}attachProtoListener(e,t,r){this.setListener(e,t),this.wrapStringPtr(e,(e=>{this.wasmModule._attachProtoListener(e,r||!1)}))}attachProtoVectorListener(e,t,r){this.setVectorListener(e,t),this.wrapStringPtr(e,(e=>{this.wasmModule._attachProtoVectorListener(e,r||!1)}))}attachAudioListener(e,t,r){this.wasmModule._attachAudioListener||console.warn('Attempting to use attachAudioListener without support for output audio. Is build dep ":gl_graph_runner_audio_out" missing?'),this.setListener(e,((e,r)=>{const n=new Float32Array(e.buffer,e.byteOffset,e.length/4);t(n,r)})),this.wrapStringPtr(e,(e=>{this.wasmModule._attachAudioListener(e,r||!1)}))}finishProcessing(){this.wasmModule._waitUntilIdle()}closeGraph(){this.wasmModule._closeGraph(),this.wasmModule.simpleListeners=void 0,this.wasmModule.emptyPacketListeners=void 0}}async function n(e){if("function"!=typeof importScripts){const t=document.createElement("script");return t.setAttribute("src",e),t.setAttribute("crossorigin","anonymous"),new Promise((e=>{t.addEventListener("load",(()=>{e()}),!1),t.addEventListener("error",(()=>{e()}),!1),document.body.appendChild(t)}))}importScripts(e.toString())}async function o(e,t,r,o,a){const i=[];if(t&&i.push(t),r&&i.push(r),i.length&&await Promise.all(i.map(n)),!self.ModuleFactory)throw new Error("ModuleFactory not set.");if(self.Module&&a){const e=self.Module;e.locateFile=a.locateFile,a.mainScriptUrlOrBlob&&(e.mainScriptUrlOrBlob=a.mainScriptUrlOrBlob)}const s=await self.ModuleFactory(self.Module||a);return self.ModuleFactory=self.Module=void 0,new e(s,o)}e.GraphRunner=r,e.createMediaPipeLib=o,e.createGraphRunner=async function(e,t,n,a){return o(r,e,t,n,a)}}(graph_runner);var register_model_resources_graph_service={};function SupportModelResourcesGraphService(e){return class extends e{registerModelResourcesGraphService(){this.wasmModule._registerModelResourcesGraphService()}}}Object.defineProperty(register_model_resources_graph_service,"__esModule",{value:!0}),register_model_resources_graph_service.SupportModelResourcesGraphService=void 0,register_model_resources_graph_service.SupportModelResourcesGraphService=SupportModelResourcesGraphService,Object.defineProperty(task_runner,"__esModule",{value:!0}),task_runner.TaskRunner=task_runner.createTaskRunner=task_runner.CachedGraphRunner=void 0;const inference_calculator_pb_1=inference_calculator_pb,calculator_pb_1=calculator_pb,acceleration_pb_1=acceleration_pb,external_file_pb_1=external_file_pb,graph_runner_1$1=graph_runner,register_model_resources_graph_service_1$1=register_model_resources_graph_service,FREE_MEMORY_STREAM="free_memory",UNUSED_STREAM_SUFFIX="_unused_out",CachedGraphRunnerType=(0,register_model_resources_graph_service_1$1.SupportModelResourcesGraphService)(graph_runner_1$1.GraphRunner);class CachedGraphRunner extends CachedGraphRunnerType{}async function createTaskRunner(e,t,r,n){const o={locateFile:()=>r.wasmBinaryPath.toString()},a=await(0,graph_runner_1$1.createMediaPipeLib)(e,r.wasmLoaderPath,r.assetLoaderPath,t,o);return await a.setOptions(n),a}task_runner.CachedGraphRunner=CachedGraphRunner,task_runner.createTaskRunner=createTaskRunner;class TaskRunner{static async createInstance(e,t,r,n){return createTaskRunner(e,t,r,n)}constructor(e){this.graphRunner=e,this.processingErrors=[],this.latestOutputTimestamp=0,this.graphRunner.setAutoRenderToScreen(!1)}applyOptions(e,t=!0){var r,n,o,a,i,s;if(t){const t=e.baseOptions||{};if((null===(r=e.baseOptions)||void 0===r?void 0:r.modelAssetBuffer)&&(null===(n=e.baseOptions)||void 0===n?void 0:n.modelAssetPath))throw new Error("Cannot set both baseOptions.modelAssetPath and baseOptions.modelAssetBuffer");if(!((null===(o=this.baseOptions.getModelAsset())||void 0===o?void 0:o.hasFileContent())||(null===(a=this.baseOptions.getModelAsset())||void 0===a?void 0:a.hasFileName())||(null===(i=e.baseOptions)||void 0===i?void 0:i.modelAssetBuffer)||(null===(s=e.baseOptions)||void 0===s?void 0:s.modelAssetPath)))throw new Error("Either baseOptions.modelAssetPath or baseOptions.modelAssetBuffer must be set");if(this.setAcceleration(t),t.modelAssetPath)return fetch(t.modelAssetPath.toString()).then((e=>{if(e.ok)return e.arrayBuffer();throw new Error(`Failed to fetch model: ${t.modelAssetPath} (${e.status})`)})).then((e=>{try{this.graphRunner.wasmModule.FS_unlink("/model.dat")}catch(e){}this.graphRunner.wasmModule.FS_createDataFile("/","model.dat",new Uint8Array(e),!0,!1,!1),this.setExternalFile("/model.dat"),this.refreshGraph(),this.onGraphRefreshed()}));this.setExternalFile(t.modelAssetBuffer)}return this.refreshGraph(),this.onGraphRefreshed(),Promise.resolve()}onGraphRefreshed(){}getCalculatorGraphConfig(){let e;if(this.graphRunner.getCalculatorGraphConfig((t=>{e=calculator_pb_1.CalculatorGraphConfig.deserializeBinary(t)})),!e)throw new Error("Failed to retrieve CalculatorGraphConfig");return e}setGraph(e,t){this.graphRunner.attachErrorListener(((e,t)=>{this.processingErrors.push(new Error(t))})),this.graphRunner.registerModelResourcesGraphService(),this.graphRunner.setGraph(e,t),this.keepaliveNode=void 0,this.handleErrors()}finishProcessing(){this.graphRunner.finishProcessing(),this.handleErrors()}setLatestOutputTimestamp(e){this.latestOutputTimestamp=Math.max(this.latestOutputTimestamp,e)}getSynctheticTimestamp(){return this.latestOutputTimestamp+1}handleErrors(){try{const e=this.processingErrors.length;if(1===e)throw new Error(this.processingErrors[0].message);if(e>1)throw new Error("Encountered multiple errors: "+this.processingErrors.map((e=>e.message)).join(", "))}finally{this.processingErrors=[]}}setExternalFile(e){const t=this.baseOptions.getModelAsset()||new external_file_pb_1.ExternalFile;"string"==typeof e?(t.setFileName(e),t.clearFileContent()):e instanceof Uint8Array&&(t.setFileContent(e),t.clearFileName()),this.baseOptions.setModelAsset(t)}setAcceleration(e){let t=this.baseOptions.getAcceleration();t||(t=new acceleration_pb_1.Acceleration,t.setTflite(new inference_calculator_pb_1.InferenceCalculatorOptions.Delegate.TfLite)),"delegate"in e&&("GPU"===e.delegate?t.setGpu(new inference_calculator_pb_1.InferenceCalculatorOptions.Delegate.Gpu):t.setTflite(new inference_calculator_pb_1.InferenceCalculatorOptions.Delegate.TfLite)),this.baseOptions.setAcceleration(t)}addKeepaliveNode(e){this.keepaliveNode=new calculator_pb_1.CalculatorGraphConfig.Node,this.keepaliveNode.setCalculator("PassThroughCalculator"),this.keepaliveNode.addInputStream(FREE_MEMORY_STREAM),this.keepaliveNode.addOutputStream(FREE_MEMORY_STREAM+UNUSED_STREAM_SUFFIX),e.addInputStream(FREE_MEMORY_STREAM),e.addNode(this.keepaliveNode)}keepStreamAlive(e){this.keepaliveNode.addInputStream(e),this.keepaliveNode.addOutputStream(e+UNUSED_STREAM_SUFFIX)}freeKeepaliveStreams(){this.graphRunner.addBoolToStream(!0,FREE_MEMORY_STREAM,this.latestOutputTimestamp)}close(){this.keepaliveNode=void 0,this.graphRunner.closeGraph()}}task_runner.TaskRunner=TaskRunner;var graph_runner_image_lib={};function SupportImage(e){return class extends e{get wasmImageModule(){return this.wasmModule}addGpuBufferAsImageToStream(e,t,r){this.wrapStringPtr(t,(t=>{const[n,o]=this.bindTextureToStream(e,t);this.wasmImageModule._addBoundTextureAsImageToStream(t,n,o,r)}))}attachImageListener(e,t){this.setListener(e,t),this.wrapStringPtr(e,(e=>{this.wasmImageModule._attachImageListener(e)}))}attachImageVectorListener(e,t){this.setVectorListener(e,t),this.wrapStringPtr(e,(e=>{this.wasmImageModule._attachImageVectorListener(e)}))}}}Object.defineProperty(graph_runner_image_lib,"__esModule",{value:!0}),graph_runner_image_lib.SupportImage=void 0,graph_runner_image_lib.SupportImage=SupportImage,Object.defineProperty(vision_task_runner,"__esModule",{value:!0}),vision_task_runner.VisionTaskRunner=vision_task_runner.VisionGraphRunner=void 0;const rect_pb_1=rect_pb,task_runner_1=task_runner,image_1$1=image,image_shader_context_1=image_shader_context,mask_1$1=mask,graph_runner_1=graph_runner,graph_runner_image_lib_1=graph_runner_image_lib,platform_utils_1=platform_utils,register_model_resources_graph_service_1=register_model_resources_graph_service,GraphRunnerVisionType=(0,register_model_resources_graph_service_1.SupportModelResourcesGraphService)((0,graph_runner_image_lib_1.SupportImage)(graph_runner_1.GraphRunner));class VisionGraphRunner extends GraphRunnerVisionType{}function createCanvas(){return"undefined"==typeof OffscreenCanvas||(0,platform_utils_1.isWebKit)()?document.createElement("canvas"):void 0}vision_task_runner.VisionGraphRunner=VisionGraphRunner;class VisionTaskRunner extends task_runner_1.TaskRunner{static async createVisionInstance(e,t,r){var n;const o=null!==(n=r.canvas)&&void 0!==n?n:createCanvas();return task_runner_1.TaskRunner.createInstance(e,o,t,r)}constructor(e,t,r,n){super(e),this.graphRunner=e,this.imageStreamName=t,this.normRectStreamName=r,this.roiAllowed=n,this.shaderContext=new image_shader_context_1.MPImageShaderContext}applyOptions(e,t=!0){if("runningMode"in e){const t=!!e.runningMode&&"IMAGE"!==e.runningMode;this.baseOptions.setUseStreamMode(t)}if(void 0!==e.canvas&&this.graphRunner.wasmModule.canvas!==e.canvas)throw new Error("You must create a new task to reset the canvas.");return super.applyOptions(e,t)}processImageData(e,t){var r;if(null===(r=this.baseOptions)||void 0===r?void 0:r.getUseStreamMode())throw new Error("Task is not initialized with image mode. 'runningMode' must be set to 'IMAGE'.");this.process(e,t,this.getSynctheticTimestamp())}processVideoData(e,t,r){var n;if(!(null===(n=this.baseOptions)||void 0===n?void 0:n.getUseStreamMode()))throw new Error("Task is not initialized with video mode. 'runningMode' must be set to 'VIDEO'.");this.process(e,t,r)}getImageSourceSize(e){return void 0!==e.videoWidth?[e.videoWidth,e.videoHeight]:void 0!==e.naturalWidth?[e.naturalWidth,e.naturalHeight]:[e.width,e.height]}convertToNormalizedRect(e,t){const r=new rect_pb_1.NormalizedRect;if(null==t?void 0:t.regionOfInterest){if(!this.roiAllowed)throw new Error("This task doesn't support region-of-interest.");const e=t.regionOfInterest;if(e.left>=e.right||e.top>=e.bottom)throw new Error("Expected RectF with left < right and top < bottom.");if(e.left<0||e.top<0||e.right>1||e.bottom>1)throw new Error("Expected RectF values to be in [0,1].");r.setXCenter((e.left+e.right)/2),r.setYCenter((e.top+e.bottom)/2),r.setWidth(e.right-e.left),r.setHeight(e.bottom-e.top)}else r.setXCenter(.5),r.setYCenter(.5),r.setWidth(1),r.setHeight(1);if(null==t?void 0:t.rotationDegrees){if((null==t?void 0:t.rotationDegrees)%90!=0)throw new Error("Expected rotation to be a multiple of 90°.");if(r.setRotation(-Math.PI*t.rotationDegrees/180),(null==t?void 0:t.rotationDegrees)%180!=0){const[t,n]=this.getImageSourceSize(e),o=r.getHeight()*n/t,a=r.getWidth()*t/n;r.setWidth(o),r.setHeight(a)}}return r}process(e,t,r){if(this.normRectStreamName){const n=this.convertToNormalizedRect(e,t);this.graphRunner.addProtoToStream(n.serializeBinary(),"mediapipe.NormalizedRect",this.normRectStreamName,r)}this.graphRunner.addGpuBufferAsImageToStream(e,this.imageStreamName,null!=r?r:performance.now()),this.finishProcessing()}convertToMPImage(e,t){const{data:r,width:n,height:o}=e,a=n*o;let i;if(r instanceof Uint8Array)if(r.length===3*a){const e=new Uint8ClampedArray(4*a);for(let t=0;t<a;++t)e[4*t]=r[3*t],e[4*t+1]=r[3*t+1],e[4*t+2]=r[3*t+2],e[4*t+3]=255;i=new ImageData(e,n,o)}else{if(r.length!==4*a)throw new Error("Unsupported channel count: "+r.length/a);i=new ImageData(new Uint8ClampedArray(r.buffer,r.byteOffset,r.length),n,o)}else{if(!(r instanceof WebGLTexture))throw new Error(`Unsupported format: ${r.constructor.name}`);i=r}const s=new image_1$1.MPImage([i],!1,!1,this.graphRunner.wasmModule.canvas,this.shaderContext,n,o);return t?s.clone():s}convertToMPMask(e,t){const{data:r,width:n,height:o}=e,a=n*o;let i;if(r instanceof Uint8Array||r instanceof Float32Array){if(r.length!==a)throw new Error("Unsupported channel count: "+r.length/a);i=r}else i=r;const s=new mask_1$1.MPMask([i],!1,this.graphRunner.wasmModule.canvas,this.shaderContext,n,o);return t?s.clone():s}close(){this.shaderContext.close(),super.close()}}vision_task_runner.VisionTaskRunner=VisionTaskRunner;var face_detector_options={};Object.defineProperty(face_detector_options,"__esModule",{value:!0});var face_detector_result={};Object.defineProperty(face_detector_result,"__esModule",{value:!0}),function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=commonjsGlobal&&commonjsGlobal.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.FaceDetector=void 0;const n=calculator_pb,o=calculator_options_pb,a=detection_pb,i=base_options_pb,s=face_detector_graph_options_pb,p=detection_result,l=vision_task_runner,u="image_in",d="norm_rect_in",c="detections";r(face_detector_options,e),r(face_detector_result,e);class g extends l.VisionTaskRunner{static createFromOptions(e,t){return l.VisionTaskRunner.createVisionInstance(g,e,t)}static createFromModelBuffer(e,t){return l.VisionTaskRunner.createVisionInstance(g,e,{baseOptions:{modelAssetBuffer:t}})}static async createFromModelPath(e,t){return l.VisionTaskRunner.createVisionInstance(g,e,{baseOptions:{modelAssetPath:t}})}constructor(e,t){super(new l.VisionGraphRunner(e,t),u,d,!1),this.result={detections:[]},this.options=new s.FaceDetectorGraphOptions,this.options.setBaseOptions(new i.BaseOptions),this.options.setMinDetectionConfidence(.5),this.options.setMinSuppressionThreshold(.3)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(e){this.options.setBaseOptions(e)}setOptions(e){var t,r;return"minDetectionConfidence"in e&&this.options.setMinDetectionConfidence(null!==(t=e.minDetectionConfidence)&&void 0!==t?t:.5),"minSuppressionThreshold"in e&&this.options.setMinSuppressionThreshold(null!==(r=e.minSuppressionThreshold)&&void 0!==r?r:.3),this.applyOptions(e)}detect(e,t){return this.result={detections:[]},this.processImageData(e,t),this.result}detectForVideo(e,t,r){return this.result={detections:[]},this.processVideoData(e,r,t),this.result}addJsFaceDetections(e){for(const t of e){const e=a.Detection.deserializeBinary(t);this.result.detections.push((0,p.convertFromDetectionProto)(e))}}refreshGraph(){const e=new n.CalculatorGraphConfig;e.addInputStream(u),e.addInputStream(d),e.addOutputStream(c);const t=new o.CalculatorOptions;t.setExtension(s.FaceDetectorGraphOptions.ext,this.options);const r=new n.CalculatorGraphConfig.Node;r.setCalculator("mediapipe.tasks.vision.face_detector.FaceDetectorGraph"),r.addInputStream("IMAGE:"+u),r.addInputStream("NORM_RECT:"+d),r.addOutputStream("DETECTIONS:"+c),r.setOptions(t),e.addNode(r),this.graphRunner.attachProtoVectorListener(c,((e,t)=>{this.addJsFaceDetections(e),this.setLatestOutputTimestamp(t)})),this.graphRunner.attachEmptyPacketListener(c,(e=>{this.setLatestOutputTimestamp(e)}));const a=e.serializeBinary();this.setGraph(new Uint8Array(a),!0)}}e.FaceDetector=g}(face_detector);var face_landmarker={},classification_pb={};!function(e){var t=googleProtobuf,r=t,n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==n&&n||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.mediapipe.Classification",null,n),r.exportSymbol("proto.mediapipe.ClassificationList",null,n),r.exportSymbol("proto.mediapipe.ClassificationListCollection",null,n),proto.mediapipe.Classification=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.Classification,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.Classification.displayName="proto.mediapipe.Classification"),proto.mediapipe.ClassificationList=function(e){t.Message.initialize(this,e,0,-1,proto.mediapipe.ClassificationList.repeatedFields_,null)},r.inherits(proto.mediapipe.ClassificationList,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.ClassificationList.displayName="proto.mediapipe.ClassificationList"),proto.mediapipe.ClassificationListCollection=function(e){t.Message.initialize(this,e,0,-1,proto.mediapipe.ClassificationListCollection.repeatedFields_,null)},r.inherits(proto.mediapipe.ClassificationListCollection,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.ClassificationListCollection.displayName="proto.mediapipe.ClassificationListCollection"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Classification.prototype.toObject=function(e){return proto.mediapipe.Classification.toObject(e,this)},proto.mediapipe.Classification.toObject=function(e,r){var n,o={index:null==(n=t.Message.getField(r,1))?void 0:n,score:null==(n=t.Message.getOptionalFloatingPointField(r,2))?void 0:n,label:null==(n=t.Message.getField(r,3))?void 0:n,displayName:null==(n=t.Message.getField(r,4))?void 0:n};return e&&(o.$jspbMessageInstance=r),o}),proto.mediapipe.Classification.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.Classification;return proto.mediapipe.Classification.deserializeBinaryFromReader(n,r)},proto.mediapipe.Classification.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readInt32();e.setIndex(r);break;case 2:r=t.readFloat(),e.setScore(r);break;case 3:r=t.readString(),e.setLabel(r);break;case 4:r=t.readString(),e.setDisplayName(r);break;default:t.skipField()}return e},proto.mediapipe.Classification.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.Classification.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.Classification.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=t.Message.getField(e,1))&&r.writeInt32(1,n),null!=(n=t.Message.getField(e,2))&&r.writeFloat(2,n),null!=(n=t.Message.getField(e,3))&&r.writeString(3,n),null!=(n=t.Message.getField(e,4))&&r.writeString(4,n)},proto.mediapipe.Classification.prototype.getIndex=function(){return t.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.Classification.prototype.setIndex=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.Classification.prototype.clearIndex=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.Classification.prototype.hasIndex=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.Classification.prototype.getScore=function(){return t.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.Classification.prototype.setScore=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.Classification.prototype.clearScore=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.Classification.prototype.hasScore=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.Classification.prototype.getLabel=function(){return t.Message.getFieldWithDefault(this,3,"")},proto.mediapipe.Classification.prototype.setLabel=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.Classification.prototype.clearLabel=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.Classification.prototype.hasLabel=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.Classification.prototype.getDisplayName=function(){return t.Message.getFieldWithDefault(this,4,"")},proto.mediapipe.Classification.prototype.setDisplayName=function(e){return t.Message.setField(this,4,e)},proto.mediapipe.Classification.prototype.clearDisplayName=function(){return t.Message.setField(this,4,void 0)},proto.mediapipe.Classification.prototype.hasDisplayName=function(){return null!=t.Message.getField(this,4)},proto.mediapipe.ClassificationList.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.ClassificationList.prototype.toObject=function(e){return proto.mediapipe.ClassificationList.toObject(e,this)},proto.mediapipe.ClassificationList.toObject=function(e,r){var n={classificationList:t.Message.toObjectList(r.getClassificationList(),proto.mediapipe.Classification.toObject,e)};return e&&(n.$jspbMessageInstance=r),n}),proto.mediapipe.ClassificationList.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.ClassificationList;return proto.mediapipe.ClassificationList.deserializeBinaryFromReader(n,r)},proto.mediapipe.ClassificationList.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var r=new proto.mediapipe.Classification;t.readMessage(r,proto.mediapipe.Classification.deserializeBinaryFromReader),e.addClassification(r)}else t.skipField();return e},proto.mediapipe.ClassificationList.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.ClassificationList.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.ClassificationList.serializeBinaryToWriter=function(e,t){var r;(r=e.getClassificationList()).length>0&&t.writeRepeatedMessage(1,r,proto.mediapipe.Classification.serializeBinaryToWriter)},proto.mediapipe.ClassificationList.prototype.getClassificationList=function(){return t.Message.getRepeatedWrapperField(this,proto.mediapipe.Classification,1)},proto.mediapipe.ClassificationList.prototype.setClassificationList=function(e){return t.Message.setRepeatedWrapperField(this,1,e)},proto.mediapipe.ClassificationList.prototype.addClassification=function(e,r){return t.Message.addToRepeatedWrapperField(this,1,e,proto.mediapipe.Classification,r)},proto.mediapipe.ClassificationList.prototype.clearClassificationList=function(){return this.setClassificationList([])},proto.mediapipe.ClassificationListCollection.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.ClassificationListCollection.prototype.toObject=function(e){return proto.mediapipe.ClassificationListCollection.toObject(e,this)},proto.mediapipe.ClassificationListCollection.toObject=function(e,r){var n={classificationListList:t.Message.toObjectList(r.getClassificationListList(),proto.mediapipe.ClassificationList.toObject,e)};return e&&(n.$jspbMessageInstance=r),n}),proto.mediapipe.ClassificationListCollection.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.ClassificationListCollection;return proto.mediapipe.ClassificationListCollection.deserializeBinaryFromReader(n,r)},proto.mediapipe.ClassificationListCollection.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var r=new proto.mediapipe.ClassificationList;t.readMessage(r,proto.mediapipe.ClassificationList.deserializeBinaryFromReader),e.addClassificationList(r)}else t.skipField();return e},proto.mediapipe.ClassificationListCollection.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.ClassificationListCollection.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.ClassificationListCollection.serializeBinaryToWriter=function(e,t){var r;(r=e.getClassificationListList()).length>0&&t.writeRepeatedMessage(1,r,proto.mediapipe.ClassificationList.serializeBinaryToWriter)},proto.mediapipe.ClassificationListCollection.prototype.getClassificationListList=function(){return t.Message.getRepeatedWrapperField(this,proto.mediapipe.ClassificationList,1)},proto.mediapipe.ClassificationListCollection.prototype.setClassificationListList=function(e){return t.Message.setRepeatedWrapperField(this,1,e)},proto.mediapipe.ClassificationListCollection.prototype.addClassificationList=function(e,r){return t.Message.addToRepeatedWrapperField(this,1,e,proto.mediapipe.ClassificationList,r)},proto.mediapipe.ClassificationListCollection.prototype.clearClassificationListList=function(){return this.setClassificationListList([])},r.object.extend(e,proto.mediapipe)}(classification_pb);var landmark_pb={};!function(e){var t=googleProtobuf,r=t,n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==n&&n||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.mediapipe.Landmark",null,n),r.exportSymbol("proto.mediapipe.LandmarkList",null,n),r.exportSymbol("proto.mediapipe.LandmarkListCollection",null,n),r.exportSymbol("proto.mediapipe.NormalizedLandmark",null,n),r.exportSymbol("proto.mediapipe.NormalizedLandmarkList",null,n),r.exportSymbol("proto.mediapipe.NormalizedLandmarkListCollection",null,n),proto.mediapipe.Landmark=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.Landmark,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.Landmark.displayName="proto.mediapipe.Landmark"),proto.mediapipe.LandmarkList=function(e){t.Message.initialize(this,e,0,-1,proto.mediapipe.LandmarkList.repeatedFields_,null)},r.inherits(proto.mediapipe.LandmarkList,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.LandmarkList.displayName="proto.mediapipe.LandmarkList"),proto.mediapipe.LandmarkListCollection=function(e){t.Message.initialize(this,e,0,-1,proto.mediapipe.LandmarkListCollection.repeatedFields_,null)},r.inherits(proto.mediapipe.LandmarkListCollection,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.LandmarkListCollection.displayName="proto.mediapipe.LandmarkListCollection"),proto.mediapipe.NormalizedLandmark=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.NormalizedLandmark,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.NormalizedLandmark.displayName="proto.mediapipe.NormalizedLandmark"),proto.mediapipe.NormalizedLandmarkList=function(e){t.Message.initialize(this,e,0,-1,proto.mediapipe.NormalizedLandmarkList.repeatedFields_,null)},r.inherits(proto.mediapipe.NormalizedLandmarkList,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.NormalizedLandmarkList.displayName="proto.mediapipe.NormalizedLandmarkList"),proto.mediapipe.NormalizedLandmarkListCollection=function(e){t.Message.initialize(this,e,0,-1,proto.mediapipe.NormalizedLandmarkListCollection.repeatedFields_,null)},r.inherits(proto.mediapipe.NormalizedLandmarkListCollection,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.NormalizedLandmarkListCollection.displayName="proto.mediapipe.NormalizedLandmarkListCollection"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Landmark.prototype.toObject=function(e){return proto.mediapipe.Landmark.toObject(e,this)},proto.mediapipe.Landmark.toObject=function(e,r){var n,o={x:null==(n=t.Message.getOptionalFloatingPointField(r,1))?void 0:n,y:null==(n=t.Message.getOptionalFloatingPointField(r,2))?void 0:n,z:null==(n=t.Message.getOptionalFloatingPointField(r,3))?void 0:n,visibility:null==(n=t.Message.getOptionalFloatingPointField(r,4))?void 0:n,presence:null==(n=t.Message.getOptionalFloatingPointField(r,5))?void 0:n};return e&&(o.$jspbMessageInstance=r),o}),proto.mediapipe.Landmark.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.Landmark;return proto.mediapipe.Landmark.deserializeBinaryFromReader(n,r)},proto.mediapipe.Landmark.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readFloat();e.setX(r);break;case 2:r=t.readFloat(),e.setY(r);break;case 3:r=t.readFloat(),e.setZ(r);break;case 4:r=t.readFloat(),e.setVisibility(r);break;case 5:r=t.readFloat(),e.setPresence(r);break;default:t.skipField()}return e},proto.mediapipe.Landmark.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.Landmark.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.Landmark.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=t.Message.getField(e,1))&&r.writeFloat(1,n),null!=(n=t.Message.getField(e,2))&&r.writeFloat(2,n),null!=(n=t.Message.getField(e,3))&&r.writeFloat(3,n),null!=(n=t.Message.getField(e,4))&&r.writeFloat(4,n),null!=(n=t.Message.getField(e,5))&&r.writeFloat(5,n)},proto.mediapipe.Landmark.prototype.getX=function(){return t.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.Landmark.prototype.setX=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.Landmark.prototype.clearX=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.Landmark.prototype.hasX=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.Landmark.prototype.getY=function(){return t.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.Landmark.prototype.setY=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.Landmark.prototype.clearY=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.Landmark.prototype.hasY=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.Landmark.prototype.getZ=function(){return t.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.Landmark.prototype.setZ=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.Landmark.prototype.clearZ=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.Landmark.prototype.hasZ=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.Landmark.prototype.getVisibility=function(){return t.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.Landmark.prototype.setVisibility=function(e){return t.Message.setField(this,4,e)},proto.mediapipe.Landmark.prototype.clearVisibility=function(){return t.Message.setField(this,4,void 0)},proto.mediapipe.Landmark.prototype.hasVisibility=function(){return null!=t.Message.getField(this,4)},proto.mediapipe.Landmark.prototype.getPresence=function(){return t.Message.getFloatingPointFieldWithDefault(this,5,0)},proto.mediapipe.Landmark.prototype.setPresence=function(e){return t.Message.setField(this,5,e)},proto.mediapipe.Landmark.prototype.clearPresence=function(){return t.Message.setField(this,5,void 0)},proto.mediapipe.Landmark.prototype.hasPresence=function(){return null!=t.Message.getField(this,5)},proto.mediapipe.LandmarkList.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LandmarkList.prototype.toObject=function(e){return proto.mediapipe.LandmarkList.toObject(e,this)},proto.mediapipe.LandmarkList.toObject=function(e,r){var n={landmarkList:t.Message.toObjectList(r.getLandmarkList(),proto.mediapipe.Landmark.toObject,e)};return e&&(n.$jspbMessageInstance=r),n}),proto.mediapipe.LandmarkList.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.LandmarkList;return proto.mediapipe.LandmarkList.deserializeBinaryFromReader(n,r)},proto.mediapipe.LandmarkList.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var r=new proto.mediapipe.Landmark;t.readMessage(r,proto.mediapipe.Landmark.deserializeBinaryFromReader),e.addLandmark(r)}else t.skipField();return e},proto.mediapipe.LandmarkList.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.LandmarkList.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.LandmarkList.serializeBinaryToWriter=function(e,t){var r;(r=e.getLandmarkList()).length>0&&t.writeRepeatedMessage(1,r,proto.mediapipe.Landmark.serializeBinaryToWriter)},proto.mediapipe.LandmarkList.prototype.getLandmarkList=function(){return t.Message.getRepeatedWrapperField(this,proto.mediapipe.Landmark,1)},proto.mediapipe.LandmarkList.prototype.setLandmarkList=function(e){return t.Message.setRepeatedWrapperField(this,1,e)},proto.mediapipe.LandmarkList.prototype.addLandmark=function(e,r){return t.Message.addToRepeatedWrapperField(this,1,e,proto.mediapipe.Landmark,r)},proto.mediapipe.LandmarkList.prototype.clearLandmarkList=function(){return this.setLandmarkList([])},proto.mediapipe.LandmarkListCollection.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LandmarkListCollection.prototype.toObject=function(e){return proto.mediapipe.LandmarkListCollection.toObject(e,this)},proto.mediapipe.LandmarkListCollection.toObject=function(e,r){var n={landmarkListList:t.Message.toObjectList(r.getLandmarkListList(),proto.mediapipe.LandmarkList.toObject,e)};return e&&(n.$jspbMessageInstance=r),n}),proto.mediapipe.LandmarkListCollection.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.LandmarkListCollection;return proto.mediapipe.LandmarkListCollection.deserializeBinaryFromReader(n,r)},proto.mediapipe.LandmarkListCollection.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var r=new proto.mediapipe.LandmarkList;t.readMessage(r,proto.mediapipe.LandmarkList.deserializeBinaryFromReader),e.addLandmarkList(r)}else t.skipField();return e},proto.mediapipe.LandmarkListCollection.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.LandmarkListCollection.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.LandmarkListCollection.serializeBinaryToWriter=function(e,t){var r;(r=e.getLandmarkListList()).length>0&&t.writeRepeatedMessage(1,r,proto.mediapipe.LandmarkList.serializeBinaryToWriter)},proto.mediapipe.LandmarkListCollection.prototype.getLandmarkListList=function(){return t.Message.getRepeatedWrapperField(this,proto.mediapipe.LandmarkList,1)},proto.mediapipe.LandmarkListCollection.prototype.setLandmarkListList=function(e){return t.Message.setRepeatedWrapperField(this,1,e)},proto.mediapipe.LandmarkListCollection.prototype.addLandmarkList=function(e,r){return t.Message.addToRepeatedWrapperField(this,1,e,proto.mediapipe.LandmarkList,r)},proto.mediapipe.LandmarkListCollection.prototype.clearLandmarkListList=function(){return this.setLandmarkListList([])},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.NormalizedLandmark.prototype.toObject=function(e){return proto.mediapipe.NormalizedLandmark.toObject(e,this)},proto.mediapipe.NormalizedLandmark.toObject=function(e,r){var n,o={x:null==(n=t.Message.getOptionalFloatingPointField(r,1))?void 0:n,y:null==(n=t.Message.getOptionalFloatingPointField(r,2))?void 0:n,z:null==(n=t.Message.getOptionalFloatingPointField(r,3))?void 0:n,visibility:null==(n=t.Message.getOptionalFloatingPointField(r,4))?void 0:n,presence:null==(n=t.Message.getOptionalFloatingPointField(r,5))?void 0:n};return e&&(o.$jspbMessageInstance=r),o}),proto.mediapipe.NormalizedLandmark.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.NormalizedLandmark;return proto.mediapipe.NormalizedLandmark.deserializeBinaryFromReader(n,r)},proto.mediapipe.NormalizedLandmark.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readFloat();e.setX(r);break;case 2:r=t.readFloat(),e.setY(r);break;case 3:r=t.readFloat(),e.setZ(r);break;case 4:r=t.readFloat(),e.setVisibility(r);break;case 5:r=t.readFloat(),e.setPresence(r);break;default:t.skipField()}return e},proto.mediapipe.NormalizedLandmark.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.NormalizedLandmark.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.NormalizedLandmark.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=t.Message.getField(e,1))&&r.writeFloat(1,n),null!=(n=t.Message.getField(e,2))&&r.writeFloat(2,n),null!=(n=t.Message.getField(e,3))&&r.writeFloat(3,n),null!=(n=t.Message.getField(e,4))&&r.writeFloat(4,n),null!=(n=t.Message.getField(e,5))&&r.writeFloat(5,n)},proto.mediapipe.NormalizedLandmark.prototype.getX=function(){return t.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.NormalizedLandmark.prototype.setX=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.NormalizedLandmark.prototype.clearX=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.NormalizedLandmark.prototype.hasX=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.NormalizedLandmark.prototype.getY=function(){return t.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.NormalizedLandmark.prototype.setY=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.NormalizedLandmark.prototype.clearY=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.NormalizedLandmark.prototype.hasY=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.NormalizedLandmark.prototype.getZ=function(){return t.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.NormalizedLandmark.prototype.setZ=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.NormalizedLandmark.prototype.clearZ=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.NormalizedLandmark.prototype.hasZ=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.NormalizedLandmark.prototype.getVisibility=function(){return t.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.NormalizedLandmark.prototype.setVisibility=function(e){return t.Message.setField(this,4,e)},proto.mediapipe.NormalizedLandmark.prototype.clearVisibility=function(){return t.Message.setField(this,4,void 0)},proto.mediapipe.NormalizedLandmark.prototype.hasVisibility=function(){return null!=t.Message.getField(this,4)},proto.mediapipe.NormalizedLandmark.prototype.getPresence=function(){return t.Message.getFloatingPointFieldWithDefault(this,5,0)},proto.mediapipe.NormalizedLandmark.prototype.setPresence=function(e){return t.Message.setField(this,5,e)},proto.mediapipe.NormalizedLandmark.prototype.clearPresence=function(){return t.Message.setField(this,5,void 0)},proto.mediapipe.NormalizedLandmark.prototype.hasPresence=function(){return null!=t.Message.getField(this,5)},proto.mediapipe.NormalizedLandmarkList.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.NormalizedLandmarkList.prototype.toObject=function(e){return proto.mediapipe.NormalizedLandmarkList.toObject(e,this)},proto.mediapipe.NormalizedLandmarkList.toObject=function(e,r){var n={landmarkList:t.Message.toObjectList(r.getLandmarkList(),proto.mediapipe.NormalizedLandmark.toObject,e)};return e&&(n.$jspbMessageInstance=r),n}),proto.mediapipe.NormalizedLandmarkList.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.NormalizedLandmarkList;return proto.mediapipe.NormalizedLandmarkList.deserializeBinaryFromReader(n,r)},proto.mediapipe.NormalizedLandmarkList.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var r=new proto.mediapipe.NormalizedLandmark;t.readMessage(r,proto.mediapipe.NormalizedLandmark.deserializeBinaryFromReader),e.addLandmark(r)}else t.skipField();return e},proto.mediapipe.NormalizedLandmarkList.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.NormalizedLandmarkList.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.NormalizedLandmarkList.serializeBinaryToWriter=function(e,t){var r;(r=e.getLandmarkList()).length>0&&t.writeRepeatedMessage(1,r,proto.mediapipe.NormalizedLandmark.serializeBinaryToWriter)},proto.mediapipe.NormalizedLandmarkList.prototype.getLandmarkList=function(){return t.Message.getRepeatedWrapperField(this,proto.mediapipe.NormalizedLandmark,1)},proto.mediapipe.NormalizedLandmarkList.prototype.setLandmarkList=function(e){return t.Message.setRepeatedWrapperField(this,1,e)},proto.mediapipe.NormalizedLandmarkList.prototype.addLandmark=function(e,r){return t.Message.addToRepeatedWrapperField(this,1,e,proto.mediapipe.NormalizedLandmark,r)},proto.mediapipe.NormalizedLandmarkList.prototype.clearLandmarkList=function(){return this.setLandmarkList([])},proto.mediapipe.NormalizedLandmarkListCollection.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.NormalizedLandmarkListCollection.prototype.toObject=function(e){return proto.mediapipe.NormalizedLandmarkListCollection.toObject(e,this)},proto.mediapipe.NormalizedLandmarkListCollection.toObject=function(e,r){var n={landmarkListList:t.Message.toObjectList(r.getLandmarkListList(),proto.mediapipe.NormalizedLandmarkList.toObject,e)};return e&&(n.$jspbMessageInstance=r),n}),proto.mediapipe.NormalizedLandmarkListCollection.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.NormalizedLandmarkListCollection;return proto.mediapipe.NormalizedLandmarkListCollection.deserializeBinaryFromReader(n,r)},proto.mediapipe.NormalizedLandmarkListCollection.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var r=new proto.mediapipe.NormalizedLandmarkList;t.readMessage(r,proto.mediapipe.NormalizedLandmarkList.deserializeBinaryFromReader),e.addLandmarkList(r)}else t.skipField();return e},proto.mediapipe.NormalizedLandmarkListCollection.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.NormalizedLandmarkListCollection.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.NormalizedLandmarkListCollection.serializeBinaryToWriter=function(e,t){var r;(r=e.getLandmarkListList()).length>0&&t.writeRepeatedMessage(1,r,proto.mediapipe.NormalizedLandmarkList.serializeBinaryToWriter)},proto.mediapipe.NormalizedLandmarkListCollection.prototype.getLandmarkListList=function(){return t.Message.getRepeatedWrapperField(this,proto.mediapipe.NormalizedLandmarkList,1)},proto.mediapipe.NormalizedLandmarkListCollection.prototype.setLandmarkListList=function(e){return t.Message.setRepeatedWrapperField(this,1,e)},proto.mediapipe.NormalizedLandmarkListCollection.prototype.addLandmarkList=function(e,r){return t.Message.addToRepeatedWrapperField(this,1,e,proto.mediapipe.NormalizedLandmarkList,r)},proto.mediapipe.NormalizedLandmarkListCollection.prototype.clearLandmarkListList=function(){return this.setLandmarkListList([])},r.object.extend(e,proto.mediapipe)}(landmark_pb);var face_geometry_pb={},matrix_data_pb={};!function(e){var t=googleProtobuf,r=t,n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==n&&n||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.mediapipe.MatrixData",null,n),r.exportSymbol("proto.mediapipe.MatrixData.Layout",null,n),proto.mediapipe.MatrixData=function(e){t.Message.initialize(this,e,0,-1,proto.mediapipe.MatrixData.repeatedFields_,null)},r.inherits(proto.mediapipe.MatrixData,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.MatrixData.displayName="proto.mediapipe.MatrixData"),proto.mediapipe.MatrixData.repeatedFields_=[3],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.MatrixData.prototype.toObject=function(e){return proto.mediapipe.MatrixData.toObject(e,this)},proto.mediapipe.MatrixData.toObject=function(e,r){var n,o={rows:null==(n=t.Message.getField(r,1))?void 0:n,cols:null==(n=t.Message.getField(r,2))?void 0:n,packedDataList:null==(n=t.Message.getRepeatedFloatingPointField(r,3))?void 0:n,layout:t.Message.getFieldWithDefault(r,4,0)};return e&&(o.$jspbMessageInstance=r),o}),proto.mediapipe.MatrixData.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.MatrixData;return proto.mediapipe.MatrixData.deserializeBinaryFromReader(n,r)},proto.mediapipe.MatrixData.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readInt32();e.setRows(r);break;case 2:r=t.readInt32(),e.setCols(r);break;case 3:for(var n=t.isDelimited()?t.readPackedFloat():[t.readFloat()],o=0;o<n.length;o++)e.addPackedData(n[o]);break;case 4:r=t.readEnum(),e.setLayout(r);break;default:t.skipField()}return e},proto.mediapipe.MatrixData.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.MatrixData.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.MatrixData.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=t.Message.getField(e,1))&&r.writeInt32(1,n),null!=(n=t.Message.getField(e,2))&&r.writeInt32(2,n),(n=e.getPackedDataList()).length>0&&r.writePackedFloat(3,n),null!=(n=t.Message.getField(e,4))&&r.writeEnum(4,n)},proto.mediapipe.MatrixData.Layout={COLUMN_MAJOR:0,ROW_MAJOR:1},proto.mediapipe.MatrixData.prototype.getRows=function(){return t.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.MatrixData.prototype.setRows=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.MatrixData.prototype.clearRows=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.MatrixData.prototype.hasRows=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.MatrixData.prototype.getCols=function(){return t.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.MatrixData.prototype.setCols=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.MatrixData.prototype.clearCols=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.MatrixData.prototype.hasCols=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.MatrixData.prototype.getPackedDataList=function(){return t.Message.getRepeatedFloatingPointField(this,3)},proto.mediapipe.MatrixData.prototype.setPackedDataList=function(e){return t.Message.setField(this,3,e||[])},proto.mediapipe.MatrixData.prototype.addPackedData=function(e,r){return t.Message.addToRepeatedField(this,3,e,r)},proto.mediapipe.MatrixData.prototype.clearPackedDataList=function(){return this.setPackedDataList([])},proto.mediapipe.MatrixData.prototype.getLayout=function(){return t.Message.getFieldWithDefault(this,4,0)},proto.mediapipe.MatrixData.prototype.setLayout=function(e){return t.Message.setField(this,4,e)},proto.mediapipe.MatrixData.prototype.clearLayout=function(){return t.Message.setField(this,4,void 0)},proto.mediapipe.MatrixData.prototype.hasLayout=function(){return null!=t.Message.getField(this,4)},r.object.extend(e,proto.mediapipe)}(matrix_data_pb);var mesh_3d_pb={};!function(e){var t=googleProtobuf,r=t,n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==n&&n||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d",null,n),r.exportSymbol("proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.PrimitiveType",null,n),r.exportSymbol("proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.VertexType",null,n),proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d=function(e){t.Message.initialize(this,e,0,-1,proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.repeatedFields_,null)},r.inherits(proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.displayName="proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d"),proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.repeatedFields_=[3,4],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.toObject=function(e){return proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.toObject(e,this)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.toObject=function(e,r){var n,o={vertexType:null==(n=t.Message.getField(r,1))?void 0:n,primitiveType:null==(n=t.Message.getField(r,2))?void 0:n,vertexBufferList:null==(n=t.Message.getRepeatedFloatingPointField(r,3))?void 0:n,indexBufferList:null==(n=t.Message.getRepeatedField(r,4))?void 0:n};return e&&(o.$jspbMessageInstance=r),o}),proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d;return proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.deserializeBinaryFromReader(n,r)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readEnum();e.setVertexType(r);break;case 2:r=t.readEnum(),e.setPrimitiveType(r);break;case 3:for(var n=t.isDelimited()?t.readPackedFloat():[t.readFloat()],o=0;o<n.length;o++)e.addVertexBuffer(n[o]);break;case 4:for(n=t.isDelimited()?t.readPackedUint32():[t.readUint32()],o=0;o<n.length;o++)e.addIndexBuffer(n[o]);break;default:t.skipField()}return e},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=t.Message.getField(e,1))&&r.writeEnum(1,n),null!=(n=t.Message.getField(e,2))&&r.writeEnum(2,n),(n=e.getVertexBufferList()).length>0&&r.writeRepeatedFloat(3,n),(n=e.getIndexBufferList()).length>0&&r.writeRepeatedUint32(4,n)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.VertexType={VERTEX_PT:0},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.PrimitiveType={TRIANGLE:0},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.getVertexType=function(){return t.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.setVertexType=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.clearVertexType=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.hasVertexType=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.getPrimitiveType=function(){return t.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.setPrimitiveType=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.clearPrimitiveType=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.hasPrimitiveType=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.getVertexBufferList=function(){return t.Message.getRepeatedFloatingPointField(this,3)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.setVertexBufferList=function(e){return t.Message.setField(this,3,e||[])},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.addVertexBuffer=function(e,r){return t.Message.addToRepeatedField(this,3,e,r)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.clearVertexBufferList=function(){return this.setVertexBufferList([])},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.getIndexBufferList=function(){return t.Message.getRepeatedField(this,4)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.setIndexBufferList=function(e){return t.Message.setField(this,4,e||[])},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.addIndexBuffer=function(e,r){return t.Message.addToRepeatedField(this,4,e,r)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.clearIndexBufferList=function(){return this.setIndexBufferList([])},r.object.extend(e,proto.mediapipe.tasks.vision.face_geometry.proto)}(mesh_3d_pb),function(e){var t=googleProtobuf,r=t,n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==n&&n||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),o=matrix_data_pb;r.object.extend(proto,o);var a=mesh_3d_pb;r.object.extend(proto,a),r.exportSymbol("proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry",null,n),proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.displayName="proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.toObject=function(e){return proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.toObject(e,this)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.toObject=function(e,t){var r,n={mesh:(r=t.getMesh())&&a.Mesh3d.toObject(e,r),poseTransformMatrix:(r=t.getPoseTransformMatrix())&&o.MatrixData.toObject(e,r)};return e&&(n.$jspbMessageInstance=t),n}),proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry;return proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.deserializeBinaryFromReader(n,r)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=new a.Mesh3d;t.readMessage(r,a.Mesh3d.deserializeBinaryFromReader),e.setMesh(r);break;case 2:r=new o.MatrixData,t.readMessage(r,o.MatrixData.deserializeBinaryFromReader),e.setPoseTransformMatrix(r);break;default:t.skipField()}return e},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getMesh())&&t.writeMessage(1,r,a.Mesh3d.serializeBinaryToWriter),null!=(r=e.getPoseTransformMatrix())&&t.writeMessage(2,r,o.MatrixData.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.getMesh=function(){return t.Message.getWrapperField(this,a.Mesh3d,1)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.setMesh=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.clearMesh=function(){return this.setMesh(void 0)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.hasMesh=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.getPoseTransformMatrix=function(){return t.Message.getWrapperField(this,o.MatrixData,2)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.setPoseTransformMatrix=function(e){return t.Message.setWrapperField(this,2,e)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.clearPoseTransformMatrix=function(){return this.setPoseTransformMatrix(void 0)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.hasPoseTransformMatrix=function(){return null!=t.Message.getField(this,2)},r.object.extend(e,proto.mediapipe.tasks.vision.face_geometry.proto)}(face_geometry_pb);var face_landmarker_graph_options_pb={},face_geometry_graph_options_pb={},geometry_pipeline_calculator_pb={};!function(e){var t=googleProtobuf,r=t,n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==n&&n||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),o=calculator_options_pb;r.object.extend(proto,o);var a=external_file_pb;r.object.extend(proto,a),r.exportSymbol("proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions",null,n),proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.displayName="proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.prototype.toObject=function(e){return proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.toObject(e,this)},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.toObject=function(e,t){var r,n={metadataFile:(r=t.getMetadataFile())&&a.ExternalFile.toObject(e,r)};return e&&(n.$jspbMessageInstance=t),n}),proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions;return proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.deserializeBinaryFromReader(n,r)},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var r=new a.ExternalFile;t.readMessage(r,a.ExternalFile.deserializeBinaryFromReader),e.setMetadataFile(r)}else t.skipField();return e},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.serializeBinaryToWriter=function(e,t){var r;null!=(r=e.getMetadataFile())&&t.writeMessage(1,r,a.ExternalFile.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.ext=new t.ExtensionFieldInfo(512499200,{ext:0},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.toObject,0),o.CalculatorOptions.extensionsBinary[512499200]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[512499200]=proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.ext,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.prototype.getMetadataFile=function(){return t.Message.getWrapperField(this,a.ExternalFile,1)},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.prototype.setMetadataFile=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.prototype.clearMetadataFile=function(){return this.setMetadataFile(void 0)},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.prototype.hasMetadataFile=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.ext=new t.ExtensionFieldInfo(512499200,{ext:0},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.toObject,0),o.CalculatorOptions.extensionsBinary[512499200]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[512499200]=proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.ext,r.object.extend(e,proto.mediapipe.tasks.vision.face_geometry)}(geometry_pipeline_calculator_pb),function(e){var t=googleProtobuf,r=t,n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==n&&n||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),o=calculator_options_pb;r.object.extend(proto,o);var a=geometry_pipeline_calculator_pb;r.object.extend(proto,a),r.exportSymbol("proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions",null,n),proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.displayName="proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.prototype.toObject=function(e){return proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.toObject(e,this)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.toObject=function(e,t){var r,n={geometryPipelineOptions:(r=t.getGeometryPipelineOptions())&&a.FaceGeometryPipelineCalculatorOptions.toObject(e,r)};return e&&(n.$jspbMessageInstance=t),n}),proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions;return proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.deserializeBinaryFromReader(n,r)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var r=new a.FaceGeometryPipelineCalculatorOptions;t.readMessage(r,a.FaceGeometryPipelineCalculatorOptions.deserializeBinaryFromReader),e.setGeometryPipelineOptions(r)}else t.skipField();return e},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.serializeBinaryToWriter=function(e,t){var r;null!=(r=e.getGeometryPipelineOptions())&&t.writeMessage(1,r,a.FaceGeometryPipelineCalculatorOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.ext=new t.ExtensionFieldInfo(515723506,{ext:0},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[515723506]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[515723506]=proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.ext,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.prototype.getGeometryPipelineOptions=function(){return t.Message.getWrapperField(this,a.FaceGeometryPipelineCalculatorOptions,1)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.prototype.setGeometryPipelineOptions=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.prototype.clearGeometryPipelineOptions=function(){return this.setGeometryPipelineOptions(void 0)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.prototype.hasGeometryPipelineOptions=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.ext=new t.ExtensionFieldInfo(515723506,{ext:0},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[515723506]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[515723506]=proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.ext,r.object.extend(e,proto.mediapipe.tasks.vision.face_geometry.proto)}(face_geometry_graph_options_pb);var face_landmarks_detector_graph_options_pb={},face_blendshapes_graph_options_pb={};!function(e){var t=googleProtobuf,r=t,n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==n&&n||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),o=calculator_pb;r.object.extend(proto,o);var a=calculator_options_pb;r.object.extend(proto,a);var i=base_options_pb;r.object.extend(proto,i),r.exportSymbol("proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions",null,n),proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.displayName="proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.prototype.toObject=function(e){return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.toObject(e,this)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.toObject=function(e,t){var r,n={baseOptions:(r=t.getBaseOptions())&&i.BaseOptions.toObject(e,r)};return e&&(n.$jspbMessageInstance=t),n}),proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions;return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.deserializeBinaryFromReader(n,r)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var r=new i.BaseOptions;t.readMessage(r,i.BaseOptions.deserializeBinaryFromReader),e.setBaseOptions(r)}else t.skipField();return e},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.serializeBinaryToWriter=function(e,t){var r;null!=(r=e.getBaseOptions())&&t.writeMessage(1,r,i.BaseOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.ext=new t.ExtensionFieldInfo(508981768,{ext:0},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.toObject,0),a.CalculatorOptions.extensionsBinary[508981768]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.deserializeBinaryFromReader,!1),a.CalculatorOptions.extensions[508981768]=proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.ext,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.prototype.getBaseOptions=function(){return t.Message.getWrapperField(this,i.BaseOptions,1)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.prototype.setBaseOptions=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.prototype.hasBaseOptions=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.ext=new t.ExtensionFieldInfo(508981768,{ext:0},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.toObject,0),a.CalculatorOptions.extensionsBinary[508981768]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.deserializeBinaryFromReader,!1),a.CalculatorOptions.extensions[508981768]=proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.ext,r.object.extend(e,proto.mediapipe.tasks.vision.face_landmarker.proto)}(face_blendshapes_graph_options_pb),function(e){var t=googleProtobuf,r=t,n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==n&&n||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),o=calculator_pb;r.object.extend(proto,o);var a=calculator_options_pb;r.object.extend(proto,a);var i=base_options_pb;r.object.extend(proto,i);var s=face_blendshapes_graph_options_pb;r.object.extend(proto,s),r.exportSymbol("proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions",null,n),proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.displayName="proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.toObject=function(e){return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.toObject(e,this)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.toObject=function(e,r){var n,o={baseOptions:(n=r.getBaseOptions())&&i.BaseOptions.toObject(e,n),minDetectionConfidence:t.Message.getFloatingPointFieldWithDefault(r,2,.5),smoothLandmarks:null==(n=t.Message.getBooleanField(r,4))?void 0:n,faceBlendshapesGraphOptions:(n=r.getFaceBlendshapesGraphOptions())&&s.FaceBlendshapesGraphOptions.toObject(e,n)};return e&&(o.$jspbMessageInstance=r),o}),proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions;return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.deserializeBinaryFromReader(n,r)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=new i.BaseOptions;t.readMessage(r,i.BaseOptions.deserializeBinaryFromReader),e.setBaseOptions(r);break;case 2:r=t.readFloat(),e.setMinDetectionConfidence(r);break;case 4:r=t.readBool(),e.setSmoothLandmarks(r);break;case 3:r=new s.FaceBlendshapesGraphOptions,t.readMessage(r,s.FaceBlendshapesGraphOptions.deserializeBinaryFromReader),e.setFaceBlendshapesGraphOptions(r);break;default:t.skipField()}return e},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=e.getBaseOptions())&&r.writeMessage(1,n,i.BaseOptions.serializeBinaryToWriter),null!=(n=t.Message.getField(e,2))&&r.writeFloat(2,n),null!=(n=t.Message.getField(e,4))&&r.writeBool(4,n),null!=(n=e.getFaceBlendshapesGraphOptions())&&r.writeMessage(3,n,s.FaceBlendshapesGraphOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.ext=new t.ExtensionFieldInfo(508968149,{ext:0},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.toObject,0),a.CalculatorOptions.extensionsBinary[508968149]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.deserializeBinaryFromReader,!1),a.CalculatorOptions.extensions[508968149]=proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.ext,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.getBaseOptions=function(){return t.Message.getWrapperField(this,i.BaseOptions,1)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.setBaseOptions=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.hasBaseOptions=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.getMinDetectionConfidence=function(){return t.Message.getFloatingPointFieldWithDefault(this,2,.5)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.setMinDetectionConfidence=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.clearMinDetectionConfidence=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.hasMinDetectionConfidence=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.getSmoothLandmarks=function(){return t.Message.getBooleanFieldWithDefault(this,4,!1)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.setSmoothLandmarks=function(e){return t.Message.setField(this,4,e)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.clearSmoothLandmarks=function(){return t.Message.setField(this,4,void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.hasSmoothLandmarks=function(){return null!=t.Message.getField(this,4)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.getFaceBlendshapesGraphOptions=function(){return t.Message.getWrapperField(this,s.FaceBlendshapesGraphOptions,3)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.setFaceBlendshapesGraphOptions=function(e){return t.Message.setWrapperField(this,3,e)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.clearFaceBlendshapesGraphOptions=function(){return this.setFaceBlendshapesGraphOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.hasFaceBlendshapesGraphOptions=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.ext=new t.ExtensionFieldInfo(508968149,{ext:0},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.toObject,0),a.CalculatorOptions.extensionsBinary[508968149]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.deserializeBinaryFromReader,!1),a.CalculatorOptions.extensions[508968149]=proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.ext,r.object.extend(e,proto.mediapipe.tasks.vision.face_landmarker.proto)}(face_landmarks_detector_graph_options_pb),function(e){var t=googleProtobuf,r=t,n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==n&&n||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),o=calculator_pb;r.object.extend(proto,o);var a=calculator_options_pb;r.object.extend(proto,a);var i=base_options_pb;r.object.extend(proto,i);var s=face_detector_graph_options_pb;r.object.extend(proto,s);var p=face_geometry_graph_options_pb;r.object.extend(proto,p);var l=face_landmarks_detector_graph_options_pb;r.object.extend(proto,l),r.exportSymbol("proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions",null,n),proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.displayName="proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.toObject=function(e){return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.toObject(e,this)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.toObject=function(e,r){var n,o={baseOptions:(n=r.getBaseOptions())&&i.BaseOptions.toObject(e,n),faceDetectorGraphOptions:(n=r.getFaceDetectorGraphOptions())&&s.FaceDetectorGraphOptions.toObject(e,n),faceLandmarksDetectorGraphOptions:(n=r.getFaceLandmarksDetectorGraphOptions())&&l.FaceLandmarksDetectorGraphOptions.toObject(e,n),minTrackingConfidence:t.Message.getFloatingPointFieldWithDefault(r,4,.5),faceGeometryGraphOptions:(n=r.getFaceGeometryGraphOptions())&&p.FaceGeometryGraphOptions.toObject(e,n)};return e&&(o.$jspbMessageInstance=r),o}),proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions;return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.deserializeBinaryFromReader(n,r)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=new i.BaseOptions;t.readMessage(r,i.BaseOptions.deserializeBinaryFromReader),e.setBaseOptions(r);break;case 2:r=new s.FaceDetectorGraphOptions,t.readMessage(r,s.FaceDetectorGraphOptions.deserializeBinaryFromReader),e.setFaceDetectorGraphOptions(r);break;case 3:r=new l.FaceLandmarksDetectorGraphOptions,t.readMessage(r,l.FaceLandmarksDetectorGraphOptions.deserializeBinaryFromReader),e.setFaceLandmarksDetectorGraphOptions(r);break;case 4:r=t.readFloat(),e.setMinTrackingConfidence(r);break;case 5:r=new p.FaceGeometryGraphOptions,t.readMessage(r,p.FaceGeometryGraphOptions.deserializeBinaryFromReader),e.setFaceGeometryGraphOptions(r);break;default:t.skipField()}return e},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=e.getBaseOptions())&&r.writeMessage(1,n,i.BaseOptions.serializeBinaryToWriter),null!=(n=e.getFaceDetectorGraphOptions())&&r.writeMessage(2,n,s.FaceDetectorGraphOptions.serializeBinaryToWriter),null!=(n=e.getFaceLandmarksDetectorGraphOptions())&&r.writeMessage(3,n,l.FaceLandmarksDetectorGraphOptions.serializeBinaryToWriter),null!=(n=t.Message.getField(e,4))&&r.writeFloat(4,n),null!=(n=e.getFaceGeometryGraphOptions())&&r.writeMessage(5,n,p.FaceGeometryGraphOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.ext=new t.ExtensionFieldInfo(508968150,{ext:0},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.toObject,0),a.CalculatorOptions.extensionsBinary[508968150]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.deserializeBinaryFromReader,!1),a.CalculatorOptions.extensions[508968150]=proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.ext,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.getBaseOptions=function(){return t.Message.getWrapperField(this,i.BaseOptions,1)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.setBaseOptions=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.hasBaseOptions=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.getFaceDetectorGraphOptions=function(){return t.Message.getWrapperField(this,s.FaceDetectorGraphOptions,2)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.setFaceDetectorGraphOptions=function(e){return t.Message.setWrapperField(this,2,e)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.clearFaceDetectorGraphOptions=function(){return this.setFaceDetectorGraphOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.hasFaceDetectorGraphOptions=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.getFaceLandmarksDetectorGraphOptions=function(){return t.Message.getWrapperField(this,l.FaceLandmarksDetectorGraphOptions,3)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.setFaceLandmarksDetectorGraphOptions=function(e){return t.Message.setWrapperField(this,3,e)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.clearFaceLandmarksDetectorGraphOptions=function(){return this.setFaceLandmarksDetectorGraphOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.hasFaceLandmarksDetectorGraphOptions=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.getMinTrackingConfidence=function(){return t.Message.getFloatingPointFieldWithDefault(this,4,.5)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.setMinTrackingConfidence=function(e){return t.Message.setField(this,4,e)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.clearMinTrackingConfidence=function(){return t.Message.setField(this,4,void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.hasMinTrackingConfidence=function(){return null!=t.Message.getField(this,4)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.getFaceGeometryGraphOptions=function(){return t.Message.getWrapperField(this,p.FaceGeometryGraphOptions,5)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.setFaceGeometryGraphOptions=function(e){return t.Message.setWrapperField(this,5,e)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.clearFaceGeometryGraphOptions=function(){return this.setFaceGeometryGraphOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.hasFaceGeometryGraphOptions=function(){return null!=t.Message.getField(this,5)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.ext=new t.ExtensionFieldInfo(508968150,{ext:0},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.toObject,0),a.CalculatorOptions.extensionsBinary[508968150]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.deserializeBinaryFromReader,!1),a.CalculatorOptions.extensions[508968150]=proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.ext,r.object.extend(e,proto.mediapipe.tasks.vision.face_landmarker.proto)}(face_landmarker_graph_options_pb);var classifier_result={};Object.defineProperty(classifier_result,"__esModule",{value:!0}),classifier_result.convertFromClassificationResultProto=classifier_result.convertFromClassifications=void 0;const DEFAULT_INDEX$1=-1,DEFAULT_SCORE=0;function convertFromClassifications(e,t=DEFAULT_INDEX$1,r=""){return{categories:e.map((e=>{var t,r,n,o;return{index:null!==(t=e.getIndex())&&void 0!==t?t:DEFAULT_INDEX$1,score:null!==(r=e.getScore())&&void 0!==r?r:DEFAULT_SCORE,categoryName:null!==(n=e.getLabel())&&void 0!==n?n:"",displayName:null!==(o=e.getDisplayName())&&void 0!==o?o:""}})),headIndex:t,headName:r}}function convertFromClassificationsProto(e){var t,r;return convertFromClassifications(null!==(r=null===(t=e.getClassificationList())||void 0===t?void 0:t.getClassificationList())&&void 0!==r?r:[],e.getHeadIndex(),e.getHeadName())}function convertFromClassificationResultProto(e){const t={classifications:e.getClassificationsList().map((e=>convertFromClassificationsProto(e)))};return e.hasTimestampMs()&&(t.timestampMs=e.getTimestampMs()),t}classifier_result.convertFromClassifications=convertFromClassifications,classifier_result.convertFromClassificationResultProto=convertFromClassificationResultProto;var landmark_result={};function convertToLandmarks(e){var t,r,n;const o=[];for(const a of e.getLandmarkList())o.push({x:null!==(t=a.getX())&&void 0!==t?t:0,y:null!==(r=a.getY())&&void 0!==r?r:0,z:null!==(n=a.getZ())&&void 0!==n?n:0});return o}function convertToWorldLandmarks(e){var t,r,n;const o=[];for(const a of e.getLandmarkList())o.push({x:null!==(t=a.getX())&&void 0!==t?t:0,y:null!==(r=a.getY())&&void 0!==r?r:0,z:null!==(n=a.getZ())&&void 0!==n?n:0});return o}Object.defineProperty(landmark_result,"__esModule",{value:!0}),landmark_result.convertToWorldLandmarks=landmark_result.convertToLandmarks=void 0,landmark_result.convertToLandmarks=convertToLandmarks,landmark_result.convertToWorldLandmarks=convertToWorldLandmarks;var face_landmarks_connections={},exports;exports=face_landmarks_connections,Object.defineProperty(exports,"__esModule",{value:!0}),exports.FACE_LANDMARKS_TESSELATION=exports.FACE_LANDMARKS_CONTOURS=exports.FACE_LANDMARKS_FACE_OVAL=exports.FACE_LANDMARKS_RIGHT_IRIS=exports.FACE_LANDMARKS_RIGHT_EYEBROW=exports.FACE_LANDMARKS_RIGHT_EYE=exports.FACE_LANDMARKS_LEFT_IRIS=exports.FACE_LANDMARKS_LEFT_EYEBROW=exports.FACE_LANDMARKS_LEFT_EYE=exports.FACE_LANDMARKS_LIPS=void 0,exports.FACE_LANDMARKS_LIPS=[{start:61,end:146},{start:146,end:91},{start:91,end:181},{start:181,end:84},{start:84,end:17},{start:17,end:314},{start:314,end:405},{start:405,end:321},{start:321,end:375},{start:375,end:291},{start:61,end:185},{start:185,end:40},{start:40,end:39},{start:39,end:37},{start:37,end:0},{start:0,end:267},{start:267,end:269},{start:269,end:270},{start:270,end:409},{start:409,end:291},{start:78,end:95},{start:95,end:88},{start:88,end:178},{start:178,end:87},{start:87,end:14},{start:14,end:317},{start:317,end:402},{start:402,end:318},{start:318,end:324},{start:324,end:308},{start:78,end:191},{start:191,end:80},{start:80,end:81},{start:81,end:82},{start:82,end:13},{start:13,end:312},{start:312,end:311},{start:311,end:310},{start:310,end:415},{start:415,end:308}],exports.FACE_LANDMARKS_LEFT_EYE=[{start:263,end:249},{start:249,end:390},{start:390,end:373},{start:373,end:374},{start:374,end:380},{start:380,end:381},{start:381,end:382},{start:382,end:362},{start:263,end:466},{start:466,end:388},{start:388,end:387},{start:387,end:386},{start:386,end:385},{start:385,end:384},{start:384,end:398},{start:398,end:362}],exports.FACE_LANDMARKS_LEFT_EYEBROW=[{start:276,end:283},{start:283,end:282},{start:282,end:295},{start:295,end:285},{start:300,end:293},{start:293,end:334},{start:334,end:296},{start:296,end:336}],exports.FACE_LANDMARKS_LEFT_IRIS=[{start:474,end:475},{start:475,end:476},{start:476,end:477},{start:477,end:474}],exports.FACE_LANDMARKS_RIGHT_EYE=[{start:33,end:7},{start:7,end:163},{start:163,end:144},{start:144,end:145},{start:145,end:153},{start:153,end:154},{start:154,end:155},{start:155,end:133},{start:33,end:246},{start:246,end:161},{start:161,end:160},{start:160,end:159},{start:159,end:158},{start:158,end:157},{start:157,end:173},{start:173,end:133}],exports.FACE_LANDMARKS_RIGHT_EYEBROW=[{start:46,end:53},{start:53,end:52},{start:52,end:65},{start:65,end:55},{start:70,end:63},{start:63,end:105},{start:105,end:66},{start:66,end:107}],exports.FACE_LANDMARKS_RIGHT_IRIS=[{start:469,end:470},{start:470,end:471},{start:471,end:472},{start:472,end:469}],exports.FACE_LANDMARKS_FACE_OVAL=[{start:10,end:338},{start:338,end:297},{start:297,end:332},{start:332,end:284},{start:284,end:251},{start:251,end:389},{start:389,end:356},{start:356,end:454},{start:454,end:323},{start:323,end:361},{start:361,end:288},{start:288,end:397},{start:397,end:365},{start:365,end:379},{start:379,end:378},{start:378,end:400},{start:400,end:377},{start:377,end:152},{start:152,end:148},{start:148,end:176},{start:176,end:149},{start:149,end:150},{start:150,end:136},{start:136,end:172},{start:172,end:58},{start:58,end:132},{start:132,end:93},{start:93,end:234},{start:234,end:127},{start:127,end:162},{start:162,end:21},{start:21,end:54},{start:54,end:103},{start:103,end:67},{start:67,end:109},{start:109,end:10}],exports.FACE_LANDMARKS_CONTOURS=[...exports.FACE_LANDMARKS_LIPS,...exports.FACE_LANDMARKS_LEFT_EYE,...exports.FACE_LANDMARKS_LEFT_EYEBROW,...exports.FACE_LANDMARKS_RIGHT_EYE,...exports.FACE_LANDMARKS_RIGHT_EYEBROW,...exports.FACE_LANDMARKS_FACE_OVAL],exports.FACE_LANDMARKS_TESSELATION=[{start:127,end:34},{start:34,end:139},{start:139,end:127},{start:11,end:0},{start:0,end:37},{start:37,end:11},{start:232,end:231},{start:231,end:120},{start:120,end:232},{start:72,end:37},{start:37,end:39},{start:39,end:72},{start:128,end:121},{start:121,end:47},{start:47,end:128},{start:232,end:121},{start:121,end:128},{start:128,end:232},{start:104,end:69},{start:69,end:67},{start:67,end:104},{start:175,end:171},{start:171,end:148},{start:148,end:175},{start:118,end:50},{start:50,end:101},{start:101,end:118},{start:73,end:39},{start:39,end:40},{start:40,end:73},{start:9,end:151},{start:151,end:108},{start:108,end:9},{start:48,end:115},{start:115,end:131},{start:131,end:48},{start:194,end:204},{start:204,end:211},{start:211,end:194},{start:74,end:40},{start:40,end:185},{start:185,end:74},{start:80,end:42},{start:42,end:183},{start:183,end:80},{start:40,end:92},{start:92,end:186},{start:186,end:40},{start:230,end:229},{start:229,end:118},{start:118,end:230},{start:202,end:212},{start:212,end:214},{start:214,end:202},{start:83,end:18},{start:18,end:17},{start:17,end:83},{start:76,end:61},{start:61,end:146},{start:146,end:76},{start:160,end:29},{start:29,end:30},{start:30,end:160},{start:56,end:157},{start:157,end:173},{start:173,end:56},{start:106,end:204},{start:204,end:194},{start:194,end:106},{start:135,end:214},{start:214,end:192},{start:192,end:135},{start:203,end:165},{start:165,end:98},{start:98,end:203},{start:21,end:71},{start:71,end:68},{start:68,end:21},{start:51,end:45},{start:45,end:4},{start:4,end:51},{start:144,end:24},{start:24,end:23},{start:23,end:144},{start:77,end:146},{start:146,end:91},{start:91,end:77},{start:205,end:50},{start:50,end:187},{start:187,end:205},{start:201,end:200},{start:200,end:18},{start:18,end:201},{start:91,end:106},{start:106,end:182},{start:182,end:91},{start:90,end:91},{start:91,end:181},{start:181,end:90},{start:85,end:84},{start:84,end:17},{start:17,end:85},{start:206,end:203},{start:203,end:36},{start:36,end:206},{start:148,end:171},{start:171,end:140},{start:140,end:148},{start:92,end:40},{start:40,end:39},{start:39,end:92},{start:193,end:189},{start:189,end:244},{start:244,end:193},{start:159,end:158},{start:158,end:28},{start:28,end:159},{start:247,end:246},{start:246,end:161},{start:161,end:247},{start:236,end:3},{start:3,end:196},{start:196,end:236},{start:54,end:68},{start:68,end:104},{start:104,end:54},{start:193,end:168},{start:168,end:8},{start:8,end:193},{start:117,end:228},{start:228,end:31},{start:31,end:117},{start:189,end:193},{start:193,end:55},{start:55,end:189},{start:98,end:97},{start:97,end:99},{start:99,end:98},{start:126,end:47},{start:47,end:100},{start:100,end:126},{start:166,end:79},{start:79,end:218},{start:218,end:166},{start:155,end:154},{start:154,end:26},{start:26,end:155},{start:209,end:49},{start:49,end:131},{start:131,end:209},{start:135,end:136},{start:136,end:150},{start:150,end:135},{start:47,end:126},{start:126,end:217},{start:217,end:47},{start:223,end:52},{start:52,end:53},{start:53,end:223},{start:45,end:51},{start:51,end:134},{start:134,end:45},{start:211,end:170},{start:170,end:140},{start:140,end:211},{start:67,end:69},{start:69,end:108},{start:108,end:67},{start:43,end:106},{start:106,end:91},{start:91,end:43},{start:230,end:119},{start:119,end:120},{start:120,end:230},{start:226,end:130},{start:130,end:247},{start:247,end:226},{start:63,end:53},{start:53,end:52},{start:52,end:63},{start:238,end:20},{start:20,end:242},{start:242,end:238},{start:46,end:70},{start:70,end:156},{start:156,end:46},{start:78,end:62},{start:62,end:96},{start:96,end:78},{start:46,end:53},{start:53,end:63},{start:63,end:46},{start:143,end:34},{start:34,end:227},{start:227,end:143},{start:123,end:117},{start:117,end:111},{start:111,end:123},{start:44,end:125},{start:125,end:19},{start:19,end:44},{start:236,end:134},{start:134,end:51},{start:51,end:236},{start:216,end:206},{start:206,end:205},{start:205,end:216},{start:154,end:153},{start:153,end:22},{start:22,end:154},{start:39,end:37},{start:37,end:167},{start:167,end:39},{start:200,end:201},{start:201,end:208},{start:208,end:200},{start:36,end:142},{start:142,end:100},{start:100,end:36},{start:57,end:212},{start:212,end:202},{start:202,end:57},{start:20,end:60},{start:60,end:99},{start:99,end:20},{start:28,end:158},{start:158,end:157},{start:157,end:28},{start:35,end:226},{start:226,end:113},{start:113,end:35},{start:160,end:159},{start:159,end:27},{start:27,end:160},{start:204,end:202},{start:202,end:210},{start:210,end:204},{start:113,end:225},{start:225,end:46},{start:46,end:113},{start:43,end:202},{start:202,end:204},{start:204,end:43},{start:62,end:76},{start:76,end:77},{start:77,end:62},{start:137,end:123},{start:123,end:116},{start:116,end:137},{start:41,end:38},{start:38,end:72},{start:72,end:41},{start:203,end:129},{start:129,end:142},{start:142,end:203},{start:64,end:98},{start:98,end:240},{start:240,end:64},{start:49,end:102},{start:102,end:64},{start:64,end:49},{start:41,end:73},{start:73,end:74},{start:74,end:41},{start:212,end:216},{start:216,end:207},{start:207,end:212},{start:42,end:74},{start:74,end:184},{start:184,end:42},{start:169,end:170},{start:170,end:211},{start:211,end:169},{start:170,end:149},{start:149,end:176},{start:176,end:170},{start:105,end:66},{start:66,end:69},{start:69,end:105},{start:122,end:6},{start:6,end:168},{start:168,end:122},{start:123,end:147},{start:147,end:187},{start:187,end:123},{start:96,end:77},{start:77,end:90},{start:90,end:96},{start:65,end:55},{start:55,end:107},{start:107,end:65},{start:89,end:90},{start:90,end:180},{start:180,end:89},{start:101,end:100},{start:100,end:120},{start:120,end:101},{start:63,end:105},{start:105,end:104},{start:104,end:63},{start:93,end:137},{start:137,end:227},{start:227,end:93},{start:15,end:86},{start:86,end:85},{start:85,end:15},{start:129,end:102},{start:102,end:49},{start:49,end:129},{start:14,end:87},{start:87,end:86},{start:86,end:14},{start:55,end:8},{start:8,end:9},{start:9,end:55},{start:100,end:47},{start:47,end:121},{start:121,end:100},{start:145,end:23},{start:23,end:22},{start:22,end:145},{start:88,end:89},{start:89,end:179},{start:179,end:88},{start:6,end:122},{start:122,end:196},{start:196,end:6},{start:88,end:95},{start:95,end:96},{start:96,end:88},{start:138,end:172},{start:172,end:136},{start:136,end:138},{start:215,end:58},{start:58,end:172},{start:172,end:215},{start:115,end:48},{start:48,end:219},{start:219,end:115},{start:42,end:80},{start:80,end:81},{start:81,end:42},{start:195,end:3},{start:3,end:51},{start:51,end:195},{start:43,end:146},{start:146,end:61},{start:61,end:43},{start:171,end:175},{start:175,end:199},{start:199,end:171},{start:81,end:82},{start:82,end:38},{start:38,end:81},{start:53,end:46},{start:46,end:225},{start:225,end:53},{start:144,end:163},{start:163,end:110},{start:110,end:144},{start:52,end:65},{start:65,end:66},{start:66,end:52},{start:229,end:228},{start:228,end:117},{start:117,end:229},{start:34,end:127},{start:127,end:234},{start:234,end:34},{start:107,end:108},{start:108,end:69},{start:69,end:107},{start:109,end:108},{start:108,end:151},{start:151,end:109},{start:48,end:64},{start:64,end:235},{start:235,end:48},{start:62,end:78},{start:78,end:191},{start:191,end:62},{start:129,end:209},{start:209,end:126},{start:126,end:129},{start:111,end:35},{start:35,end:143},{start:143,end:111},{start:117,end:123},{start:123,end:50},{start:50,end:117},{start:222,end:65},{start:65,end:52},{start:52,end:222},{start:19,end:125},{start:125,end:141},{start:141,end:19},{start:221,end:55},{start:55,end:65},{start:65,end:221},{start:3,end:195},{start:195,end:197},{start:197,end:3},{start:25,end:7},{start:7,end:33},{start:33,end:25},{start:220,end:237},{start:237,end:44},{start:44,end:220},{start:70,end:71},{start:71,end:139},{start:139,end:70},{start:122,end:193},{start:193,end:245},{start:245,end:122},{start:247,end:130},{start:130,end:33},{start:33,end:247},{start:71,end:21},{start:21,end:162},{start:162,end:71},{start:170,end:169},{start:169,end:150},{start:150,end:170},{start:188,end:174},{start:174,end:196},{start:196,end:188},{start:216,end:186},{start:186,end:92},{start:92,end:216},{start:2,end:97},{start:97,end:167},{start:167,end:2},{start:141,end:125},{start:125,end:241},{start:241,end:141},{start:164,end:167},{start:167,end:37},{start:37,end:164},{start:72,end:38},{start:38,end:12},{start:12,end:72},{start:38,end:82},{start:82,end:13},{start:13,end:38},{start:63,end:68},{start:68,end:71},{start:71,end:63},{start:226,end:35},{start:35,end:111},{start:111,end:226},{start:101,end:50},{start:50,end:205},{start:205,end:101},{start:206,end:92},{start:92,end:165},{start:165,end:206},{start:209,end:198},{start:198,end:217},{start:217,end:209},{start:165,end:167},{start:167,end:97},{start:97,end:165},{start:220,end:115},{start:115,end:218},{start:218,end:220},{start:133,end:112},{start:112,end:243},{start:243,end:133},{start:239,end:238},{start:238,end:241},{start:241,end:239},{start:214,end:135},{start:135,end:169},{start:169,end:214},{start:190,end:173},{start:173,end:133},{start:133,end:190},{start:171,end:208},{start:208,end:32},{start:32,end:171},{start:125,end:44},{start:44,end:237},{start:237,end:125},{start:86,end:87},{start:87,end:178},{start:178,end:86},{start:85,end:86},{start:86,end:179},{start:179,end:85},{start:84,end:85},{start:85,end:180},{start:180,end:84},{start:83,end:84},{start:84,end:181},{start:181,end:83},{start:201,end:83},{start:83,end:182},{start:182,end:201},{start:137,end:93},{start:93,end:132},{start:132,end:137},{start:76,end:62},{start:62,end:183},{start:183,end:76},{start:61,end:76},{start:76,end:184},{start:184,end:61},{start:57,end:61},{start:61,end:185},{start:185,end:57},{start:212,end:57},{start:57,end:186},{start:186,end:212},{start:214,end:207},{start:207,end:187},{start:187,end:214},{start:34,end:143},{start:143,end:156},{start:156,end:34},{start:79,end:239},{start:239,end:237},{start:237,end:79},{start:123,end:137},{start:137,end:177},{start:177,end:123},{start:44,end:1},{start:1,end:4},{start:4,end:44},{start:201,end:194},{start:194,end:32},{start:32,end:201},{start:64,end:102},{start:102,end:129},{start:129,end:64},{start:213,end:215},{start:215,end:138},{start:138,end:213},{start:59,end:166},{start:166,end:219},{start:219,end:59},{start:242,end:99},{start:99,end:97},{start:97,end:242},{start:2,end:94},{start:94,end:141},{start:141,end:2},{start:75,end:59},{start:59,end:235},{start:235,end:75},{start:24,end:110},{start:110,end:228},{start:228,end:24},{start:25,end:130},{start:130,end:226},{start:226,end:25},{start:23,end:24},{start:24,end:229},{start:229,end:23},{start:22,end:23},{start:23,end:230},{start:230,end:22},{start:26,end:22},{start:22,end:231},{start:231,end:26},{start:112,end:26},{start:26,end:232},{start:232,end:112},{start:189,end:190},{start:190,end:243},{start:243,end:189},{start:221,end:56},{start:56,end:190},{start:190,end:221},{start:28,end:56},{start:56,end:221},{start:221,end:28},{start:27,end:28},{start:28,end:222},{start:222,end:27},{start:29,end:27},{start:27,end:223},{start:223,end:29},{start:30,end:29},{start:29,end:224},{start:224,end:30},{start:247,end:30},{start:30,end:225},{start:225,end:247},{start:238,end:79},{start:79,end:20},{start:20,end:238},{start:166,end:59},{start:59,end:75},{start:75,end:166},{start:60,end:75},{start:75,end:240},{start:240,end:60},{start:147,end:177},{start:177,end:215},{start:215,end:147},{start:20,end:79},{start:79,end:166},{start:166,end:20},{start:187,end:147},{start:147,end:213},{start:213,end:187},{start:112,end:233},{start:233,end:244},{start:244,end:112},{start:233,end:128},{start:128,end:245},{start:245,end:233},{start:128,end:114},{start:114,end:188},{start:188,end:128},{start:114,end:217},{start:217,end:174},{start:174,end:114},{start:131,end:115},{start:115,end:220},{start:220,end:131},{start:217,end:198},{start:198,end:236},{start:236,end:217},{start:198,end:131},{start:131,end:134},{start:134,end:198},{start:177,end:132},{start:132,end:58},{start:58,end:177},{start:143,end:35},{start:35,end:124},{start:124,end:143},{start:110,end:163},{start:163,end:7},{start:7,end:110},{start:228,end:110},{start:110,end:25},{start:25,end:228},{start:356,end:389},{start:389,end:368},{start:368,end:356},{start:11,end:302},{start:302,end:267},{start:267,end:11},{start:452,end:350},{start:350,end:349},{start:349,end:452},{start:302,end:303},{start:303,end:269},{start:269,end:302},{start:357,end:343},{start:343,end:277},{start:277,end:357},{start:452,end:453},{start:453,end:357},{start:357,end:452},{start:333,end:332},{start:332,end:297},{start:297,end:333},{start:175,end:152},{start:152,end:377},{start:377,end:175},{start:347,end:348},{start:348,end:330},{start:330,end:347},{start:303,end:304},{start:304,end:270},{start:270,end:303},{start:9,end:336},{start:336,end:337},{start:337,end:9},{start:278,end:279},{start:279,end:360},{start:360,end:278},{start:418,end:262},{start:262,end:431},{start:431,end:418},{start:304,end:408},{start:408,end:409},{start:409,end:304},{start:310,end:415},{start:415,end:407},{start:407,end:310},{start:270,end:409},{start:409,end:410},{start:410,end:270},{start:450,end:348},{start:348,end:347},{start:347,end:450},{start:422,end:430},{start:430,end:434},{start:434,end:422},{start:313,end:314},{start:314,end:17},{start:17,end:313},{start:306,end:307},{start:307,end:375},{start:375,end:306},{start:387,end:388},{start:388,end:260},{start:260,end:387},{start:286,end:414},{start:414,end:398},{start:398,end:286},{start:335,end:406},{start:406,end:418},{start:418,end:335},{start:364,end:367},{start:367,end:416},{start:416,end:364},{start:423,end:358},{start:358,end:327},{start:327,end:423},{start:251,end:284},{start:284,end:298},{start:298,end:251},{start:281,end:5},{start:5,end:4},{start:4,end:281},{start:373,end:374},{start:374,end:253},{start:253,end:373},{start:307,end:320},{start:320,end:321},{start:321,end:307},{start:425,end:427},{start:427,end:411},{start:411,end:425},{start:421,end:313},{start:313,end:18},{start:18,end:421},{start:321,end:405},{start:405,end:406},{start:406,end:321},{start:320,end:404},{start:404,end:405},{start:405,end:320},{start:315,end:16},{start:16,end:17},{start:17,end:315},{start:426,end:425},{start:425,end:266},{start:266,end:426},{start:377,end:400},{start:400,end:369},{start:369,end:377},{start:322,end:391},{start:391,end:269},{start:269,end:322},{start:417,end:465},{start:465,end:464},{start:464,end:417},{start:386,end:257},{start:257,end:258},{start:258,end:386},{start:466,end:260},{start:260,end:388},{start:388,end:466},{start:456,end:399},{start:399,end:419},{start:419,end:456},{start:284,end:332},{start:332,end:333},{start:333,end:284},{start:417,end:285},{start:285,end:8},{start:8,end:417},{start:346,end:340},{start:340,end:261},{start:261,end:346},{start:413,end:441},{start:441,end:285},{start:285,end:413},{start:327,end:460},{start:460,end:328},{start:328,end:327},{start:355,end:371},{start:371,end:329},{start:329,end:355},{start:392,end:439},{start:439,end:438},{start:438,end:392},{start:382,end:341},{start:341,end:256},{start:256,end:382},{start:429,end:420},{start:420,end:360},{start:360,end:429},{start:364,end:394},{start:394,end:379},{start:379,end:364},{start:277,end:343},{start:343,end:437},{start:437,end:277},{start:443,end:444},{start:444,end:283},{start:283,end:443},{start:275,end:440},{start:440,end:363},{start:363,end:275},{start:431,end:262},{start:262,end:369},{start:369,end:431},{start:297,end:338},{start:338,end:337},{start:337,end:297},{start:273,end:375},{start:375,end:321},{start:321,end:273},{start:450,end:451},{start:451,end:349},{start:349,end:450},{start:446,end:342},{start:342,end:467},{start:467,end:446},{start:293,end:334},{start:334,end:282},{start:282,end:293},{start:458,end:461},{start:461,end:462},{start:462,end:458},{start:276,end:353},{start:353,end:383},{start:383,end:276},{start:308,end:324},{start:324,end:325},{start:325,end:308},{start:276,end:300},{start:300,end:293},{start:293,end:276},{start:372,end:345},{start:345,end:447},{start:447,end:372},{start:352,end:345},{start:345,end:340},{start:340,end:352},{start:274,end:1},{start:1,end:19},{start:19,end:274},{start:456,end:248},{start:248,end:281},{start:281,end:456},{start:436,end:427},{start:427,end:425},{start:425,end:436},{start:381,end:256},{start:256,end:252},{start:252,end:381},{start:269,end:391},{start:391,end:393},{start:393,end:269},{start:200,end:199},{start:199,end:428},{start:428,end:200},{start:266,end:330},{start:330,end:329},{start:329,end:266},{start:287,end:273},{start:273,end:422},{start:422,end:287},{start:250,end:462},{start:462,end:328},{start:328,end:250},{start:258,end:286},{start:286,end:384},{start:384,end:258},{start:265,end:353},{start:353,end:342},{start:342,end:265},{start:387,end:259},{start:259,end:257},{start:257,end:387},{start:424,end:431},{start:431,end:430},{start:430,end:424},{start:342,end:353},{start:353,end:276},{start:276,end:342},{start:273,end:335},{start:335,end:424},{start:424,end:273},{start:292,end:325},{start:325,end:307},{start:307,end:292},{start:366,end:447},{start:447,end:345},{start:345,end:366},{start:271,end:303},{start:303,end:302},{start:302,end:271},{start:423,end:266},{start:266,end:371},{start:371,end:423},{start:294,end:455},{start:455,end:460},{start:460,end:294},{start:279,end:278},{start:278,end:294},{start:294,end:279},{start:271,end:272},{start:272,end:304},{start:304,end:271},{start:432,end:434},{start:434,end:427},{start:427,end:432},{start:272,end:407},{start:407,end:408},{start:408,end:272},{start:394,end:430},{start:430,end:431},{start:431,end:394},{start:395,end:369},{start:369,end:400},{start:400,end:395},{start:334,end:333},{start:333,end:299},{start:299,end:334},{start:351,end:417},{start:417,end:168},{start:168,end:351},{start:352,end:280},{start:280,end:411},{start:411,end:352},{start:325,end:319},{start:319,end:320},{start:320,end:325},{start:295,end:296},{start:296,end:336},{start:336,end:295},{start:319,end:403},{start:403,end:404},{start:404,end:319},{start:330,end:348},{start:348,end:349},{start:349,end:330},{start:293,end:298},{start:298,end:333},{start:333,end:293},{start:323,end:454},{start:454,end:447},{start:447,end:323},{start:15,end:16},{start:16,end:315},{start:315,end:15},{start:358,end:429},{start:429,end:279},{start:279,end:358},{start:14,end:15},{start:15,end:316},{start:316,end:14},{start:285,end:336},{start:336,end:9},{start:9,end:285},{start:329,end:349},{start:349,end:350},{start:350,end:329},{start:374,end:380},{start:380,end:252},{start:252,end:374},{start:318,end:402},{start:402,end:403},{start:403,end:318},{start:6,end:197},{start:197,end:419},{start:419,end:6},{start:318,end:319},{start:319,end:325},{start:325,end:318},{start:367,end:364},{start:364,end:365},{start:365,end:367},{start:435,end:367},{start:367,end:397},{start:397,end:435},{start:344,end:438},{start:438,end:439},{start:439,end:344},{start:272,end:271},{start:271,end:311},{start:311,end:272},{start:195,end:5},{start:5,end:281},{start:281,end:195},{start:273,end:287},{start:287,end:291},{start:291,end:273},{start:396,end:428},{start:428,end:199},{start:199,end:396},{start:311,end:271},{start:271,end:268},{start:268,end:311},{start:283,end:444},{start:444,end:445},{start:445,end:283},{start:373,end:254},{start:254,end:339},{start:339,end:373},{start:282,end:334},{start:334,end:296},{start:296,end:282},{start:449,end:347},{start:347,end:346},{start:346,end:449},{start:264,end:447},{start:447,end:454},{start:454,end:264},{start:336,end:296},{start:296,end:299},{start:299,end:336},{start:338,end:10},{start:10,end:151},{start:151,end:338},{start:278,end:439},{start:439,end:455},{start:455,end:278},{start:292,end:407},{start:407,end:415},{start:415,end:292},{start:358,end:371},{start:371,end:355},{start:355,end:358},{start:340,end:345},{start:345,end:372},{start:372,end:340},{start:346,end:347},{start:347,end:280},{start:280,end:346},{start:442,end:443},{start:443,end:282},{start:282,end:442},{start:19,end:94},{start:94,end:370},{start:370,end:19},{start:441,end:442},{start:442,end:295},{start:295,end:441},{start:248,end:419},{start:419,end:197},{start:197,end:248},{start:263,end:255},{start:255,end:359},{start:359,end:263},{start:440,end:275},{start:275,end:274},{start:274,end:440},{start:300,end:383},{start:383,end:368},{start:368,end:300},{start:351,end:412},{start:412,end:465},{start:465,end:351},{start:263,end:467},{start:467,end:466},{start:466,end:263},{start:301,end:368},{start:368,end:389},{start:389,end:301},{start:395,end:378},{start:378,end:379},{start:379,end:395},{start:412,end:351},{start:351,end:419},{start:419,end:412},{start:436,end:426},{start:426,end:322},{start:322,end:436},{start:2,end:164},{start:164,end:393},{start:393,end:2},{start:370,end:462},{start:462,end:461},{start:461,end:370},{start:164,end:0},{start:0,end:267},{start:267,end:164},{start:302,end:11},{start:11,end:12},{start:12,end:302},{start:268,end:12},{start:12,end:13},{start:13,end:268},{start:293,end:300},{start:300,end:301},{start:301,end:293},{start:446,end:261},{start:261,end:340},{start:340,end:446},{start:330,end:266},{start:266,end:425},{start:425,end:330},{start:426,end:423},{start:423,end:391},{start:391,end:426},{start:429,end:355},{start:355,end:437},{start:437,end:429},{start:391,end:327},{start:327,end:326},{start:326,end:391},{start:440,end:457},{start:457,end:438},{start:438,end:440},{start:341,end:382},{start:382,end:362},{start:362,end:341},{start:459,end:457},{start:457,end:461},{start:461,end:459},{start:434,end:430},{start:430,end:394},{start:394,end:434},{start:414,end:463},{start:463,end:362},{start:362,end:414},{start:396,end:369},{start:369,end:262},{start:262,end:396},{start:354,end:461},{start:461,end:457},{start:457,end:354},{start:316,end:403},{start:403,end:402},{start:402,end:316},{start:315,end:404},{start:404,end:403},{start:403,end:315},{start:314,end:405},{start:405,end:404},{start:404,end:314},{start:313,end:406},{start:406,end:405},{start:405,end:313},{start:421,end:418},{start:418,end:406},{start:406,end:421},{start:366,end:401},{start:401,end:361},{start:361,end:366},{start:306,end:408},{start:408,end:407},{start:407,end:306},{start:291,end:409},{start:409,end:408},{start:408,end:291},{start:287,end:410},{start:410,end:409},{start:409,end:287},{start:432,end:436},{start:436,end:410},{start:410,end:432},{start:434,end:416},{start:416,end:411},{start:411,end:434},{start:264,end:368},{start:368,end:383},{start:383,end:264},{start:309,end:438},{start:438,end:457},{start:457,end:309},{start:352,end:376},{start:376,end:401},{start:401,end:352},{start:274,end:275},{start:275,end:4},{start:4,end:274},{start:421,end:428},{start:428,end:262},{start:262,end:421},{start:294,end:327},{start:327,end:358},{start:358,end:294},{start:433,end:416},{start:416,end:367},{start:367,end:433},{start:289,end:455},{start:455,end:439},{start:439,end:289},{start:462,end:370},{start:370,end:326},{start:326,end:462},{start:2,end:326},{start:326,end:370},{start:370,end:2},{start:305,end:460},{start:460,end:455},{start:455,end:305},{start:254,end:449},{start:449,end:448},{start:448,end:254},{start:255,end:261},{start:261,end:446},{start:446,end:255},{start:253,end:450},{start:450,end:449},{start:449,end:253},{start:252,end:451},{start:451,end:450},{start:450,end:252},{start:256,end:452},{start:452,end:451},{start:451,end:256},{start:341,end:453},{start:453,end:452},{start:452,end:341},{start:413,end:464},{start:464,end:463},{start:463,end:413},{start:441,end:413},{start:413,end:414},{start:414,end:441},{start:258,end:442},{start:442,end:441},{start:441,end:258},{start:257,end:443},{start:443,end:442},{start:442,end:257},{start:259,end:444},{start:444,end:443},{start:443,end:259},{start:260,end:445},{start:445,end:444},{start:444,end:260},{start:467,end:342},{start:342,end:445},{start:445,end:467},{start:459,end:458},{start:458,end:250},{start:250,end:459},{start:289,end:392},{start:392,end:290},{start:290,end:289},{start:290,end:328},{start:328,end:460},{start:460,end:290},{start:376,end:433},{start:433,end:435},{start:435,end:376},{start:250,end:290},{start:290,end:392},{start:392,end:250},{start:411,end:416},{start:416,end:433},{start:433,end:411},{start:341,end:463},{start:463,end:464},{start:464,end:341},{start:453,end:464},{start:464,end:465},{start:465,end:453},{start:357,end:465},{start:465,end:412},{start:412,end:357},{start:343,end:412},{start:412,end:399},{start:399,end:343},{start:360,end:363},{start:363,end:440},{start:440,end:360},{start:437,end:399},{start:399,end:456},{start:456,end:437},{start:420,end:456},{start:456,end:363},{start:363,end:420},{start:401,end:435},{start:435,end:288},{start:288,end:401},{start:372,end:383},{start:383,end:353},{start:353,end:372},{start:339,end:255},{start:255,end:249},{start:249,end:339},{start:448,end:261},{start:261,end:255},{start:255,end:448},{start:133,end:243},{start:243,end:190},{start:190,end:133},{start:133,end:155},{start:155,end:112},{start:112,end:133},{start:33,end:246},{start:246,end:247},{start:247,end:33},{start:33,end:130},{start:130,end:25},{start:25,end:33},{start:398,end:384},{start:384,end:286},{start:286,end:398},{start:362,end:398},{start:398,end:414},{start:414,end:362},{start:362,end:463},{start:463,end:341},{start:341,end:362},{start:263,end:359},{start:359,end:467},{start:467,end:263},{start:263,end:249},{start:249,end:255},{start:255,end:263},{start:466,end:467},{start:467,end:260},{start:260,end:466},{start:75,end:60},{start:60,end:166},{start:166,end:75},{start:238,end:239},{start:239,end:79},{start:79,end:238},{start:162,end:127},{start:127,end:139},{start:139,end:162},{start:72,end:11},{start:11,end:37},{start:37,end:72},{start:121,end:232},{start:232,end:120},{start:120,end:121},{start:73,end:72},{start:72,end:39},{start:39,end:73},{start:114,end:128},{start:128,end:47},{start:47,end:114},{start:233,end:232},{start:232,end:128},{start:128,end:233},{start:103,end:104},{start:104,end:67},{start:67,end:103},{start:152,end:175},{start:175,end:148},{start:148,end:152},{start:119,end:118},{start:118,end:101},{start:101,end:119},{start:74,end:73},{start:73,end:40},{start:40,end:74},{start:107,end:9},{start:9,end:108},{start:108,end:107},{start:49,end:48},{start:48,end:131},{start:131,end:49},{start:32,end:194},{start:194,end:211},{start:211,end:32},{start:184,end:74},{start:74,end:185},{start:185,end:184},{start:191,end:80},{start:80,end:183},{start:183,end:191},{start:185,end:40},{start:40,end:186},{start:186,end:185},{start:119,end:230},{start:230,end:118},{start:118,end:119},{start:210,end:202},{start:202,end:214},{start:214,end:210},{start:84,end:83},{start:83,end:17},{start:17,end:84},{start:77,end:76},{start:76,end:146},{start:146,end:77},{start:161,end:160},{start:160,end:30},{start:30,end:161},{start:190,end:56},{start:56,end:173},{start:173,end:190},{start:182,end:106},{start:106,end:194},{start:194,end:182},{start:138,end:135},{start:135,end:192},{start:192,end:138},{start:129,end:203},{start:203,end:98},{start:98,end:129},{start:54,end:21},{start:21,end:68},{start:68,end:54},{start:5,end:51},{start:51,end:4},{start:4,end:5},{start:145,end:144},{start:144,end:23},{start:23,end:145},{start:90,end:77},{start:77,end:91},{start:91,end:90},{start:207,end:205},{start:205,end:187},{start:187,end:207},{start:83,end:201},{start:201,end:18},{start:18,end:83},{start:181,end:91},{start:91,end:182},{start:182,end:181},{start:180,end:90},{start:90,end:181},{start:181,end:180},{start:16,end:85},{start:85,end:17},{start:17,end:16},{start:205,end:206},{start:206,end:36},{start:36,end:205},{start:176,end:148},{start:148,end:140},{start:140,end:176},{start:165,end:92},{start:92,end:39},{start:39,end:165},{start:245,end:193},{start:193,end:244},{start:244,end:245},{start:27,end:159},{start:159,end:28},{start:28,end:27},{start:30,end:247},{start:247,end:161},{start:161,end:30},{start:174,end:236},{start:236,end:196},{start:196,end:174},{start:103,end:54},{start:54,end:104},{start:104,end:103},{start:55,end:193},{start:193,end:8},{start:8,end:55},{start:111,end:117},{start:117,end:31},{start:31,end:111},{start:221,end:189},{start:189,end:55},{start:55,end:221},{start:240,end:98},{start:98,end:99},{start:99,end:240},{start:142,end:126},{start:126,end:100},{start:100,end:142},{start:219,end:166},{start:166,end:218},{start:218,end:219},{start:112,end:155},{start:155,end:26},{start:26,end:112},{start:198,end:209},{start:209,end:131},{start:131,end:198},{start:169,end:135},{start:135,end:150},{start:150,end:169},{start:114,end:47},{start:47,end:217},{start:217,end:114},{start:224,end:223},{start:223,end:53},{start:53,end:224},{start:220,end:45},{start:45,end:134},{start:134,end:220},{start:32,end:211},{start:211,end:140},{start:140,end:32},{start:109,end:67},{start:67,end:108},{start:108,end:109},{start:146,end:43},{start:43,end:91},{start:91,end:146},{start:231,end:230},{start:230,end:120},{start:120,end:231},{start:113,end:226},{start:226,end:247},{start:247,end:113},{start:105,end:63},{start:63,end:52},{start:52,end:105},{start:241,end:238},{start:238,end:242},{start:242,end:241},{start:124,end:46},{start:46,end:156},{start:156,end:124},{start:95,end:78},{start:78,end:96},{start:96,end:95},{start:70,end:46},{start:46,end:63},{start:63,end:70},{start:116,end:143},{start:143,end:227},{start:227,end:116},{start:116,end:123},{start:123,end:111},{start:111,end:116},{start:1,end:44},{start:44,end:19},{start:19,end:1},{start:3,end:236},{start:236,end:51},{start:51,end:3},{start:207,end:216},{start:216,end:205},{start:205,end:207},{start:26,end:154},{start:154,end:22},{start:22,end:26},{start:165,end:39},{start:39,end:167},{start:167,end:165},{start:199,end:200},{start:200,end:208},{start:208,end:199},{start:101,end:36},{start:36,end:100},{start:100,end:101},{start:43,end:57},{start:57,end:202},{start:202,end:43},{start:242,end:20},{start:20,end:99},{start:99,end:242},{start:56,end:28},{start:28,end:157},{start:157,end:56},{start:124,end:35},{start:35,end:113},{start:113,end:124},{start:29,end:160},{start:160,end:27},{start:27,end:29},{start:211,end:204},{start:204,end:210},{start:210,end:211},{start:124,end:113},{start:113,end:46},{start:46,end:124},{start:106,end:43},{start:43,end:204},{start:204,end:106},{start:96,end:62},{start:62,end:77},{start:77,end:96},{start:227,end:137},{start:137,end:116},{start:116,end:227},{start:73,end:41},{start:41,end:72},{start:72,end:73},{start:36,end:203},{start:203,end:142},{start:142,end:36},{start:235,end:64},{start:64,end:240},{start:240,end:235},{start:48,end:49},{start:49,end:64},{start:64,end:48},{start:42,end:41},{start:41,end:74},{start:74,end:42},{start:214,end:212},{start:212,end:207},{start:207,end:214},{start:183,end:42},{start:42,end:184},{start:184,end:183},{start:210,end:169},{start:169,end:211},{start:211,end:210},{start:140,end:170},{start:170,end:176},{start:176,end:140},{start:104,end:105},{start:105,end:69},{start:69,end:104},{start:193,end:122},{start:122,end:168},{start:168,end:193},{start:50,end:123},{start:123,end:187},{start:187,end:50},{start:89,end:96},{start:96,end:90},{start:90,end:89},{start:66,end:65},{start:65,end:107},{start:107,end:66},{start:179,end:89},{start:89,end:180},{start:180,end:179},{start:119,end:101},{start:101,end:120},{start:120,end:119},{start:68,end:63},{start:63,end:104},{start:104,end:68},{start:234,end:93},{start:93,end:227},{start:227,end:234},{start:16,end:15},{start:15,end:85},{start:85,end:16},{start:209,end:129},{start:129,end:49},{start:49,end:209},{start:15,end:14},{start:14,end:86},{start:86,end:15},{start:107,end:55},{start:55,end:9},{start:9,end:107},{start:120,end:100},{start:100,end:121},{start:121,end:120},{start:153,end:145},{start:145,end:22},{start:22,end:153},{start:178,end:88},{start:88,end:179},{start:179,end:178},{start:197,end:6},{start:6,end:196},{start:196,end:197},{start:89,end:88},{start:88,end:96},{start:96,end:89},{start:135,end:138},{start:138,end:136},{start:136,end:135},{start:138,end:215},{start:215,end:172},{start:172,end:138},{start:218,end:115},{start:115,end:219},{start:219,end:218},{start:41,end:42},{start:42,end:81},{start:81,end:41},{start:5,end:195},{start:195,end:51},{start:51,end:5},{start:57,end:43},{start:43,end:61},{start:61,end:57},{start:208,end:171},{start:171,end:199},{start:199,end:208},{start:41,end:81},{start:81,end:38},{start:38,end:41},{start:224,end:53},{start:53,end:225},{start:225,end:224},{start:24,end:144},{start:144,end:110},{start:110,end:24},{start:105,end:52},{start:52,end:66},{start:66,end:105},{start:118,end:229},{start:229,end:117},{start:117,end:118},{start:227,end:34},{start:34,end:234},{start:234,end:227},{start:66,end:107},{start:107,end:69},{start:69,end:66},{start:10,end:109},{start:109,end:151},{start:151,end:10},{start:219,end:48},{start:48,end:235},{start:235,end:219},{start:183,end:62},{start:62,end:191},{start:191,end:183},{start:142,end:129},{start:129,end:126},{start:126,end:142},{start:116,end:111},{start:111,end:143},{start:143,end:116},{start:118,end:117},{start:117,end:50},{start:50,end:118},{start:223,end:222},{start:222,end:52},{start:52,end:223},{start:94,end:19},{start:19,end:141},{start:141,end:94},{start:222,end:221},{start:221,end:65},{start:65,end:222},{start:196,end:3},{start:3,end:197},{start:197,end:196},{start:45,end:220},{start:220,end:44},{start:44,end:45},{start:156,end:70},{start:70,end:139},{start:139,end:156},{start:188,end:122},{start:122,end:245},{start:245,end:188},{start:139,end:71},{start:71,end:162},{start:162,end:139},{start:149,end:170},{start:170,end:150},{start:150,end:149},{start:122,end:188},{start:188,end:196},{start:196,end:122},{start:206,end:216},{start:216,end:92},{start:92,end:206},{start:164,end:2},{start:2,end:167},{start:167,end:164},{start:242,end:141},{start:141,end:241},{start:241,end:242},{start:0,end:164},{start:164,end:37},{start:37,end:0},{start:11,end:72},{start:72,end:12},{start:12,end:11},{start:12,end:38},{start:38,end:13},{start:13,end:12},{start:70,end:63},{start:63,end:71},{start:71,end:70},{start:31,end:226},{start:226,end:111},{start:111,end:31},{start:36,end:101},{start:101,end:205},{start:205,end:36},{start:203,end:206},{start:206,end:165},{start:165,end:203},{start:126,end:209},{start:209,end:217},{start:217,end:126},{start:98,end:165},{start:165,end:97},{start:97,end:98},{start:237,end:220},{start:220,end:218},{start:218,end:237},{start:237,end:239},{start:239,end:241},{start:241,end:237},{start:210,end:214},{start:214,end:169},{start:169,end:210},{start:140,end:171},{start:171,end:32},{start:32,end:140},{start:241,end:125},{start:125,end:237},{start:237,end:241},{start:179,end:86},{start:86,end:178},{start:178,end:179},{start:180,end:85},{start:85,end:179},{start:179,end:180},{start:181,end:84},{start:84,end:180},{start:180,end:181},{start:182,end:83},{start:83,end:181},{start:181,end:182},{start:194,end:201},{start:201,end:182},{start:182,end:194},{start:177,end:137},{start:137,end:132},{start:132,end:177},{start:184,end:76},{start:76,end:183},{start:183,end:184},{start:185,end:61},{start:61,end:184},{start:184,end:185},{start:186,end:57},{start:57,end:185},{start:185,end:186},{start:216,end:212},{start:212,end:186},{start:186,end:216},{start:192,end:214},{start:214,end:187},{start:187,end:192},{start:139,end:34},{start:34,end:156},{start:156,end:139},{start:218,end:79},{start:79,end:237},{start:237,end:218},{start:147,end:123},{start:123,end:177},{start:177,end:147},{start:45,end:44},{start:44,end:4},{start:4,end:45},{start:208,end:201},{start:201,end:32},{start:32,end:208},{start:98,end:64},{start:64,end:129},{start:129,end:98},{start:192,end:213},{start:213,end:138},{start:138,end:192},{start:235,end:59},{start:59,end:219},{start:219,end:235},{start:141,end:242},{start:242,end:97},{start:97,end:141},{start:97,end:2},{start:2,end:141},{start:141,end:97},{start:240,end:75},{start:75,end:235},{start:235,end:240},{start:229,end:24},{start:24,end:228},{start:228,end:229},{start:31,end:25},{start:25,end:226},{start:226,end:31},{start:230,end:23},{start:23,end:229},{start:229,end:230},{start:231,end:22},{start:22,end:230},{start:230,end:231},{start:232,end:26},{start:26,end:231},{start:231,end:232},{start:233,end:112},{start:112,end:232},{start:232,end:233},{start:244,end:189},{start:189,end:243},{start:243,end:244},{start:189,end:221},{start:221,end:190},{start:190,end:189},{start:222,end:28},{start:28,end:221},{start:221,end:222},{start:223,end:27},{start:27,end:222},{start:222,end:223},{start:224,end:29},{start:29,end:223},{start:223,end:224},{start:225,end:30},{start:30,end:224},{start:224,end:225},{start:113,end:247},{start:247,end:225},{start:225,end:113},{start:99,end:60},{start:60,end:240},{start:240,end:99},{start:213,end:147},{start:147,end:215},{start:215,end:213},{start:60,end:20},{start:20,end:166},{start:166,end:60},{start:192,end:187},{start:187,end:213},{start:213,end:192},{start:243,end:112},{start:112,end:244},{start:244,end:243},{start:244,end:233},{start:233,end:245},{start:245,end:244},{start:245,end:128},{start:128,end:188},{start:188,end:245},{start:188,end:114},{start:114,end:174},{start:174,end:188},{start:134,end:131},{start:131,end:220},{start:220,end:134},{start:174,end:217},{start:217,end:236},{start:236,end:174},{start:236,end:198},{start:198,end:134},{start:134,end:236},{start:215,end:177},{start:177,end:58},{start:58,end:215},{start:156,end:143},{start:143,end:124},{start:124,end:156},{start:25,end:110},{start:110,end:7},{start:7,end:25},{start:31,end:228},{start:228,end:25},{start:25,end:31},{start:264,end:356},{start:356,end:368},{start:368,end:264},{start:0,end:11},{start:11,end:267},{start:267,end:0},{start:451,end:452},{start:452,end:349},{start:349,end:451},{start:267,end:302},{start:302,end:269},{start:269,end:267},{start:350,end:357},{start:357,end:277},{start:277,end:350},{start:350,end:452},{start:452,end:357},{start:357,end:350},{start:299,end:333},{start:333,end:297},{start:297,end:299},{start:396,end:175},{start:175,end:377},{start:377,end:396},{start:280,end:347},{start:347,end:330},{start:330,end:280},{start:269,end:303},{start:303,end:270},{start:270,end:269},{start:151,end:9},{start:9,end:337},{start:337,end:151},{start:344,end:278},{start:278,end:360},{start:360,end:344},{start:424,end:418},{start:418,end:431},{start:431,end:424},{start:270,end:304},{start:304,end:409},{start:409,end:270},{start:272,end:310},{start:310,end:407},{start:407,end:272},{start:322,end:270},{start:270,end:410},{start:410,end:322},{start:449,end:450},{start:450,end:347},{start:347,end:449},{start:432,end:422},{start:422,end:434},{start:434,end:432},{start:18,end:313},{start:313,end:17},{start:17,end:18},{start:291,end:306},{start:306,end:375},{start:375,end:291},{start:259,end:387},{start:387,end:260},{start:260,end:259},{start:424,end:335},{start:335,end:418},{start:418,end:424},{start:434,end:364},{start:364,end:416},{start:416,end:434},{start:391,end:423},{start:423,end:327},{start:327,end:391},{start:301,end:251},{start:251,end:298},{start:298,end:301},{start:275,end:281},{start:281,end:4},{start:4,end:275},{start:254,end:373},{start:373,end:253},{start:253,end:254},{start:375,end:307},{start:307,end:321},{start:321,end:375},{start:280,end:425},{start:425,end:411},{start:411,end:280},{start:200,end:421},{start:421,end:18},{start:18,end:200},{start:335,end:321},{start:321,end:406},{start:406,end:335},{start:321,end:320},{start:320,end:405},{start:405,end:321},{start:314,end:315},{start:315,end:17},{start:17,end:314},{start:423,end:426},{start:426,end:266},{start:266,end:423},{start:396,end:377},{start:377,end:369},{start:369,end:396},{start:270,end:322},{start:322,end:269},{start:269,end:270},{start:413,end:417},{start:417,end:464},{start:464,end:413},{start:385,end:386},{start:386,end:258},{start:258,end:385},{start:248,end:456},{start:456,end:419},{start:419,end:248},{start:298,end:284},{start:284,end:333},{start:333,end:298},{start:168,end:417},{start:417,end:8},{start:8,end:168},{start:448,end:346},{start:346,end:261},{start:261,end:448},{start:417,end:413},{start:413,end:285},{start:285,end:417},{start:326,end:327},{start:327,end:328},{start:328,end:326},{start:277,end:355},{start:355,end:329},{start:329,end:277},{start:309,end:392},{start:392,end:438},{start:438,end:309},{start:381,end:382},{start:382,end:256},{start:256,end:381},{start:279,end:429},{start:429,end:360},{start:360,end:279},{start:365,end:364},{start:364,end:379},{start:379,end:365},{start:355,end:277},{start:277,end:437},{start:437,end:355},{start:282,end:443},{start:443,end:283},{start:283,end:282},{start:281,end:275},{start:275,end:363},{start:363,end:281},{start:395,end:431},{start:431,end:369},{start:369,end:395},{start:299,end:297},{start:297,end:337},{start:337,end:299},{start:335,end:273},{start:273,end:321},{start:321,end:335},{start:348,end:450},{start:450,end:349},{start:349,end:348},{start:359,end:446},{start:446,end:467},{start:467,end:359},{start:283,end:293},{start:293,end:282},{start:282,end:283},{start:250,end:458},{start:458,end:462},{start:462,end:250},{start:300,end:276},{start:276,end:383},{start:383,end:300},{start:292,end:308},{start:308,end:325},{start:325,end:292},{start:283,end:276},{start:276,end:293},{start:293,end:283},{start:264,end:372},{start:372,end:447},{start:447,end:264},{start:346,end:352},{start:352,end:340},{start:340,end:346},{start:354,end:274},{start:274,end:19},{start:19,end:354},{start:363,end:456},{start:456,end:281},{start:281,end:363},{start:426,end:436},{start:436,end:425},{start:425,end:426},{start:380,end:381},{start:381,end:252},{start:252,end:380},{start:267,end:269},{start:269,end:393},{start:393,end:267},{start:421,end:200},{start:200,end:428},{start:428,end:421},{start:371,end:266},{start:266,end:329},{start:329,end:371},{start:432,end:287},{start:287,end:422},{start:422,end:432},{start:290,end:250},{start:250,end:328},{start:328,end:290},{start:385,end:258},{start:258,end:384},{start:384,end:385},{start:446,end:265},{start:265,end:342},{start:342,end:446},{start:386,end:387},{start:387,end:257},{start:257,end:386},{start:422,end:424},{start:424,end:430},{start:430,end:422},{start:445,end:342},{start:342,end:276},{start:276,end:445},{start:422,end:273},{start:273,end:424},{start:424,end:422},{start:306,end:292},{start:292,end:307},{start:307,end:306},{start:352,end:366},{start:366,end:345},{start:345,end:352},{start:268,end:271},{start:271,end:302},{start:302,end:268},{start:358,end:423},{start:423,end:371},{start:371,end:358},{start:327,end:294},{start:294,end:460},{start:460,end:327},{start:331,end:279},{start:279,end:294},{start:294,end:331},{start:303,end:271},{start:271,end:304},{start:304,end:303},{start:436,end:432},{start:432,end:427},{start:427,end:436},{start:304,end:272},{start:272,end:408},{start:408,end:304},{start:395,end:394},{start:394,end:431},{start:431,end:395},{start:378,end:395},{start:395,end:400},{start:400,end:378},{start:296,end:334},{start:334,end:299},{start:299,end:296},{start:6,end:351},{start:351,end:168},{start:168,end:6},{start:376,end:352},{start:352,end:411},{start:411,end:376},{start:307,end:325},{start:325,end:320},{start:320,end:307},{start:285,end:295},{start:295,end:336},{start:336,end:285},{start:320,end:319},{start:319,end:404},{start:404,end:320},{start:329,end:330},{start:330,end:349},{start:349,end:329},{start:334,end:293},{start:293,end:333},{start:333,end:334},{start:366,end:323},{start:323,end:447},{start:447,end:366},{start:316,end:15},{start:15,end:315},{start:315,end:316},{start:331,end:358},{start:358,end:279},{start:279,end:331},{start:317,end:14},{start:14,end:316},{start:316,end:317},{start:8,end:285},{start:285,end:9},{start:9,end:8},{start:277,end:329},{start:329,end:350},{start:350,end:277},{start:253,end:374},{start:374,end:252},{start:252,end:253},{start:319,end:318},{start:318,end:403},{start:403,end:319},{start:351,end:6},{start:6,end:419},{start:419,end:351},{start:324,end:318},{start:318,end:325},{start:325,end:324},{start:397,end:367},{start:367,end:365},{start:365,end:397},{start:288,end:435},{start:435,end:397},{start:397,end:288},{start:278,end:344},{start:344,end:439},{start:439,end:278},{start:310,end:272},{start:272,end:311},{start:311,end:310},{start:248,end:195},{start:195,end:281},{start:281,end:248},{start:375,end:273},{start:273,end:291},{start:291,end:375},{start:175,end:396},{start:396,end:199},{start:199,end:175},{start:312,end:311},{start:311,end:268},{start:268,end:312},{start:276,end:283},{start:283,end:445},{start:445,end:276},{start:390,end:373},{start:373,end:339},{start:339,end:390},{start:295,end:282},{start:282,end:296},{start:296,end:295},{start:448,end:449},{start:449,end:346},{start:346,end:448},{start:356,end:264},{start:264,end:454},{start:454,end:356},{start:337,end:336},{start:336,end:299},{start:299,end:337},{start:337,end:338},{start:338,end:151},{start:151,end:337},{start:294,end:278},{start:278,end:455},{start:455,end:294},{start:308,end:292},{start:292,end:415},{start:415,end:308},{start:429,end:358},{start:358,end:355},{start:355,end:429},{start:265,end:340},{start:340,end:372},{start:372,end:265},{start:352,end:346},{start:346,end:280},{start:280,end:352},{start:295,end:442},{start:442,end:282},{start:282,end:295},{start:354,end:19},{start:19,end:370},{start:370,end:354},{start:285,end:441},{start:441,end:295},{start:295,end:285},{start:195,end:248},{start:248,end:197},{start:197,end:195},{start:457,end:440},{start:440,end:274},{start:274,end:457},{start:301,end:300},{start:300,end:368},{start:368,end:301},{start:417,end:351},{start:351,end:465},{start:465,end:417},{start:251,end:301},{start:301,end:389},{start:389,end:251},{start:394,end:395},{start:395,end:379},{start:379,end:394},{start:399,end:412},{start:412,end:419},{start:419,end:399},{start:410,end:436},{start:436,end:322},{start:322,end:410},{start:326,end:2},{start:2,end:393},{start:393,end:326},{start:354,end:370},{start:370,end:461},{start:461,end:354},{start:393,end:164},{start:164,end:267},{start:267,end:393},{start:268,end:302},{start:302,end:12},{start:12,end:268},{start:312,end:268},{start:268,end:13},{start:13,end:312},{start:298,end:293},{start:293,end:301},{start:301,end:298},{start:265,end:446},{start:446,end:340},{start:340,end:265},{start:280,end:330},{start:330,end:425},{start:425,end:280},{start:322,end:426},{start:426,end:391},{start:391,end:322},{start:420,end:429},{start:429,end:437},{start:437,end:420},{start:393,end:391},{start:391,end:326},{start:326,end:393},{start:344,end:440},{start:440,end:438},{start:438,end:344},{start:458,end:459},{start:459,end:461},{start:461,end:458},{start:364,end:434},{start:434,end:394},{start:394,end:364},{start:428,end:396},{start:396,end:262},{start:262,end:428},{start:274,end:354},{start:354,end:457},{start:457,end:274},{start:317,end:316},{start:316,end:402},{start:402,end:317},{start:316,end:315},{start:315,end:403},{start:403,end:316},{start:315,end:314},{start:314,end:404},{start:404,end:315},{start:314,end:313},{start:313,end:405},{start:405,end:314},{start:313,end:421},{start:421,end:406},{start:406,end:313},{start:323,end:366},{start:366,end:361},{start:361,end:323},{start:292,end:306},{start:306,end:407},{start:407,end:292},{start:306,end:291},{start:291,end:408},{start:408,end:306},{start:291,end:287},{start:287,end:409},{start:409,end:291},{start:287,end:432},{start:432,end:410},{start:410,end:287},{start:427,end:434},{start:434,end:411},{start:411,end:427},{start:372,end:264},{start:264,end:383},{start:383,end:372},{start:459,end:309},{start:309,end:457},{start:457,end:459},{start:366,end:352},{start:352,end:401},{start:401,end:366},{start:1,end:274},{start:274,end:4},{start:4,end:1},{start:418,end:421},{start:421,end:262},{start:262,end:418},{start:331,end:294},{start:294,end:358},{start:358,end:331},{start:435,end:433},{start:433,end:367},{start:367,end:435},{start:392,end:289},{start:289,end:439},{start:439,end:392},{start:328,end:462},{start:462,end:326},{start:326,end:328},{start:94,end:2},{start:2,end:370},{start:370,end:94},{start:289,end:305},{start:305,end:455},{start:455,end:289},{start:339,end:254},{start:254,end:448},{start:448,end:339},{start:359,end:255},{start:255,end:446},{start:446,end:359},{start:254,end:253},{start:253,end:449},{start:449,end:254},{start:253,end:252},{start:252,end:450},{start:450,end:253},{start:252,end:256},{start:256,end:451},{start:451,end:252},{start:256,end:341},{start:341,end:452},{start:452,end:256},{start:414,end:413},{start:413,end:463},{start:463,end:414},{start:286,end:441},{start:441,end:414},{start:414,end:286},{start:286,end:258},{start:258,end:441},{start:441,end:286},{start:258,end:257},{start:257,end:442},{start:442,end:258},{start:257,end:259},{start:259,end:443},{start:443,end:257},{start:259,end:260},{start:260,end:444},{start:444,end:259},{start:260,end:467},{start:467,end:445},{start:445,end:260},{start:309,end:459},{start:459,end:250},{start:250,end:309},{start:305,end:289},{start:289,end:290},{start:290,end:305},{start:305,end:290},{start:290,end:460},{start:460,end:305},{start:401,end:376},{start:376,end:435},{start:435,end:401},{start:309,end:250},{start:250,end:392},{start:392,end:309},{start:376,end:411},{start:411,end:433},{start:433,end:376},{start:453,end:341},{start:341,end:464},{start:464,end:453},{start:357,end:453},{start:453,end:465},{start:465,end:357},{start:343,end:357},{start:357,end:412},{start:412,end:343},{start:437,end:343},{start:343,end:399},{start:399,end:437},{start:344,end:360},{start:360,end:440},{start:440,end:344},{start:420,end:437},{start:437,end:456},{start:456,end:420},{start:360,end:420},{start:420,end:363},{start:363,end:360},{start:361,end:401},{start:401,end:288},{start:288,end:361},{start:265,end:372},{start:372,end:353},{start:353,end:265},{start:390,end:339},{start:339,end:249},{start:249,end:390},{start:339,end:448},{start:448,end:255},{start:255,end:339}];var face_landmarker_options={};Object.defineProperty(face_landmarker_options,"__esModule",{value:!0});var face_landmarker_result={};Object.defineProperty(face_landmarker_result,"__esModule",{value:!0}),function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=commonjsGlobal&&commonjsGlobal.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.FaceLandmarker=void 0;const n=calculator_pb,o=calculator_options_pb,a=classification_pb,i=landmark_pb,s=base_options_pb,p=face_detector_graph_options_pb,l=face_geometry_pb,u=face_landmarker_graph_options_pb,d=face_landmarks_detector_graph_options_pb,c=classifier_result,g=landmark_result,h=vision_task_runner,f=face_landmarks_connections;r(face_landmarker_options,e),r(face_landmarker_result,e);const m="image_in",y="norm_rect",b="face_landmarks",_="blendshapes",v="face_geometry",w=.5;class k extends h.VisionTaskRunner{static createFromOptions(e,t){return h.VisionTaskRunner.createVisionInstance(k,e,t)}static createFromModelBuffer(e,t){return h.VisionTaskRunner.createVisionInstance(k,e,{baseOptions:{modelAssetBuffer:t}})}static createFromModelPath(e,t){return h.VisionTaskRunner.createVisionInstance(k,e,{baseOptions:{modelAssetPath:t}})}constructor(e,t){super(new h.VisionGraphRunner(e,t),m,y,!1),this.result={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]},this.outputFaceBlendshapes=!1,this.outputFacialTransformationMatrixes=!1,this.options=new u.FaceLandmarkerGraphOptions,this.options.setBaseOptions(new s.BaseOptions),this.faceLandmarksDetectorGraphOptions=new d.FaceLandmarksDetectorGraphOptions,this.options.setFaceLandmarksDetectorGraphOptions(this.faceLandmarksDetectorGraphOptions),this.faceDetectorGraphOptions=new p.FaceDetectorGraphOptions,this.options.setFaceDetectorGraphOptions(this.faceDetectorGraphOptions),this.initDefaults()}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(e){this.options.setBaseOptions(e)}setOptions(e){var t,r,n,o;return"numFaces"in e&&this.faceDetectorGraphOptions.setNumFaces(null!==(t=e.numFaces)&&void 0!==t?t:1),"minFaceDetectionConfidence"in e&&this.faceDetectorGraphOptions.setMinDetectionConfidence(null!==(r=e.minFaceDetectionConfidence)&&void 0!==r?r:w),"minTrackingConfidence"in e&&this.options.setMinTrackingConfidence(null!==(n=e.minTrackingConfidence)&&void 0!==n?n:w),"minFacePresenceConfidence"in e&&this.faceLandmarksDetectorGraphOptions.setMinDetectionConfidence(null!==(o=e.minFacePresenceConfidence)&&void 0!==o?o:w),"outputFaceBlendshapes"in e&&(this.outputFaceBlendshapes=!!e.outputFaceBlendshapes),"outputFacialTransformationMatrixes"in e&&(this.outputFacialTransformationMatrixes=!!e.outputFacialTransformationMatrixes),this.applyOptions(e)}detect(e,t){return this.resetResults(),this.processImageData(e,t),this.result}detectForVideo(e,t,r){return this.resetResults(),this.processVideoData(e,r,t),this.result}resetResults(){this.result={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]}}initDefaults(){this.faceDetectorGraphOptions.setNumFaces(1),this.faceDetectorGraphOptions.setMinDetectionConfidence(w),this.faceLandmarksDetectorGraphOptions.setMinDetectionConfidence(w),this.options.setMinTrackingConfidence(w)}addJsLandmarks(e){for(const t of e){const e=i.NormalizedLandmarkList.deserializeBinary(t);this.result.faceLandmarks.push((0,g.convertToLandmarks)(e))}}addBlenshape(e){var t;if(this.outputFaceBlendshapes)for(const r of e){const e=a.ClassificationList.deserializeBinary(r);this.result.faceBlendshapes.push((0,c.convertFromClassifications)(null!==(t=e.getClassificationList())&&void 0!==t?t:[]))}}addFacialTransformationMatrixes(e){var t,r,n;if(this.outputFacialTransformationMatrixes)for(const o of e){const e=l.FaceGeometry.deserializeBinary(o).getPoseTransformMatrix();e&&this.result.facialTransformationMatrixes.push({rows:null!==(t=e.getRows())&&void 0!==t?t:0,columns:null!==(r=e.getCols())&&void 0!==r?r:0,data:null!==(n=e.getPackedDataList())&&void 0!==n?n:[]})}}refreshGraph(){const e=new n.CalculatorGraphConfig;e.addInputStream(m),e.addInputStream(y),e.addOutputStream(b);const t=new o.CalculatorOptions;t.setExtension(u.FaceLandmarkerGraphOptions.ext,this.options);const r=new n.CalculatorGraphConfig.Node;r.setCalculator("mediapipe.tasks.vision.face_landmarker.FaceLandmarkerGraph"),r.addInputStream("IMAGE:"+m),r.addInputStream("NORM_RECT:"+y),r.addOutputStream("NORM_LANDMARKS:"+b),r.setOptions(t),e.addNode(r),this.graphRunner.attachProtoVectorListener(b,((e,t)=>{this.addJsLandmarks(e),this.setLatestOutputTimestamp(t)})),this.graphRunner.attachEmptyPacketListener(b,(e=>{this.setLatestOutputTimestamp(e)})),this.outputFaceBlendshapes&&(e.addOutputStream(_),r.addOutputStream("BLENDSHAPES:"+_),this.graphRunner.attachProtoVectorListener(_,((e,t)=>{this.addBlenshape(e),this.setLatestOutputTimestamp(t)})),this.graphRunner.attachEmptyPacketListener(_,(e=>{this.setLatestOutputTimestamp(e)}))),this.outputFacialTransformationMatrixes&&(e.addOutputStream(v),r.addOutputStream("FACE_GEOMETRY:"+v),this.graphRunner.attachProtoVectorListener(v,((e,t)=>{this.addFacialTransformationMatrixes(e),this.setLatestOutputTimestamp(t)})),this.graphRunner.attachEmptyPacketListener(v,(e=>{this.setLatestOutputTimestamp(e)})));const a=e.serializeBinary();this.setGraph(new Uint8Array(a),!0)}}e.FaceLandmarker=k,k.FACE_LANDMARKS_LIPS=f.FACE_LANDMARKS_LIPS,k.FACE_LANDMARKS_LEFT_EYE=f.FACE_LANDMARKS_LEFT_EYE,k.FACE_LANDMARKS_LEFT_EYEBROW=f.FACE_LANDMARKS_LEFT_EYEBROW,k.FACE_LANDMARKS_LEFT_IRIS=f.FACE_LANDMARKS_LEFT_IRIS,k.FACE_LANDMARKS_RIGHT_EYE=f.FACE_LANDMARKS_RIGHT_EYE,k.FACE_LANDMARKS_RIGHT_EYEBROW=f.FACE_LANDMARKS_RIGHT_EYEBROW,k.FACE_LANDMARKS_RIGHT_IRIS=f.FACE_LANDMARKS_RIGHT_IRIS,k.FACE_LANDMARKS_FACE_OVAL=f.FACE_LANDMARKS_FACE_OVAL,k.FACE_LANDMARKS_CONTOURS=f.FACE_LANDMARKS_CONTOURS,k.FACE_LANDMARKS_TESSELATION=f.FACE_LANDMARKS_TESSELATION}(face_landmarker);var face_stylizer={},face_stylizer_graph_options_pb={};!function(e){var t=googleProtobuf,r=t,n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==n&&n||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),o=calculator_pb;r.object.extend(proto,o);var a=calculator_options_pb;r.object.extend(proto,a);var i=base_options_pb;r.object.extend(proto,i);var s=face_landmarker_graph_options_pb;r.object.extend(proto,s),r.exportSymbol("proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions",null,n),proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.displayName="proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.toObject=function(e){return proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.toObject(e,this)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.toObject=function(e,r){var n,o={baseOptions:(n=r.getBaseOptions())&&i.BaseOptions.toObject(e,n),faceLandmarkerGraphOptions:(n=r.getFaceLandmarkerGraphOptions())&&s.FaceLandmarkerGraphOptions.toObject(e,n),faceAlignmentSize:t.Message.getFieldWithDefault(r,3,256)};return e&&(o.$jspbMessageInstance=r),o}),proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions;return proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.deserializeBinaryFromReader(n,r)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=new i.BaseOptions;t.readMessage(r,i.BaseOptions.deserializeBinaryFromReader),e.setBaseOptions(r);break;case 2:r=new s.FaceLandmarkerGraphOptions,t.readMessage(r,s.FaceLandmarkerGraphOptions.deserializeBinaryFromReader),e.setFaceLandmarkerGraphOptions(r);break;case 3:r=t.readInt32(),e.setFaceAlignmentSize(r);break;default:t.skipField()}return e},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=e.getBaseOptions())&&r.writeMessage(1,n,i.BaseOptions.serializeBinaryToWriter),null!=(n=e.getFaceLandmarkerGraphOptions())&&r.writeMessage(2,n,s.FaceLandmarkerGraphOptions.serializeBinaryToWriter),null!=(n=t.Message.getField(e,3))&&r.writeInt32(3,n)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.ext=new t.ExtensionFieldInfo(513916220,{ext:0},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.toObject,0),a.CalculatorOptions.extensionsBinary[513916220]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.deserializeBinaryFromReader,!1),a.CalculatorOptions.extensions[513916220]=proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.ext,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.getBaseOptions=function(){return t.Message.getWrapperField(this,i.BaseOptions,1)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.setBaseOptions=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.hasBaseOptions=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.getFaceLandmarkerGraphOptions=function(){return t.Message.getWrapperField(this,s.FaceLandmarkerGraphOptions,2)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.setFaceLandmarkerGraphOptions=function(e){return t.Message.setWrapperField(this,2,e)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.clearFaceLandmarkerGraphOptions=function(){return this.setFaceLandmarkerGraphOptions(void 0)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.hasFaceLandmarkerGraphOptions=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.getFaceAlignmentSize=function(){return t.Message.getFieldWithDefault(this,3,256)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.setFaceAlignmentSize=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.clearFaceAlignmentSize=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.hasFaceAlignmentSize=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.ext=new t.ExtensionFieldInfo(513916220,{ext:0},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.toObject,0),a.CalculatorOptions.extensionsBinary[513916220]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.deserializeBinaryFromReader,!1),a.CalculatorOptions.extensions[513916220]=proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.ext,r.object.extend(e,proto.mediapipe.tasks.vision.face_stylizer.proto)}(face_stylizer_graph_options_pb);var face_stylizer_options={};Object.defineProperty(face_stylizer_options,"__esModule",{value:!0}),function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=commonjsGlobal&&commonjsGlobal.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.FaceStylizer=void 0;const n=calculator_pb,o=calculator_options_pb,a=base_options_pb,i=face_stylizer_graph_options_pb,s=vision_task_runner;r(face_stylizer_options,e);const p="image_in",l="norm_rect",u="stylized_image";class d extends s.VisionTaskRunner{static createFromOptions(e,t){return s.VisionTaskRunner.createVisionInstance(d,e,t)}static createFromModelBuffer(e,t){return s.VisionTaskRunner.createVisionInstance(d,e,{baseOptions:{modelAssetBuffer:t}})}static createFromModelPath(e,t){return s.VisionTaskRunner.createVisionInstance(d,e,{baseOptions:{modelAssetPath:t}})}constructor(e,t){super(new s.VisionGraphRunner(e,t),p,l,!0),this.options=new i.FaceStylizerGraphOptions,this.options.setBaseOptions(new a.BaseOptions)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(e){this.options.setBaseOptions(e)}setOptions(e){return super.applyOptions(e)}stylize(e,t,r){const n="function"!=typeof t?t:{};if(this.userCallback="function"==typeof t?t:r,this.processImageData(e,null!=n?n:{}),!this.userCallback)return this.result}stylizeForVideo(e,t,r,n){const o="function"!=typeof r?r:{};if(this.userCallback="function"==typeof r?r:n,this.processVideoData(e,o,t),this.userCallback=void 0,!this.userCallback)return this.result}refreshGraph(){const e=new n.CalculatorGraphConfig;e.addInputStream(p),e.addInputStream(l),e.addOutputStream(u);const t=new o.CalculatorOptions;t.setExtension(i.FaceStylizerGraphOptions.ext,this.options);const r=new n.CalculatorGraphConfig.Node;r.setCalculator("mediapipe.tasks.vision.face_stylizer.FaceStylizerGraph"),r.addInputStream("IMAGE:"+p),r.addInputStream("NORM_RECT:"+l),r.addOutputStream("STYLIZED_IMAGE:"+u),r.setOptions(t),e.addNode(r),this.graphRunner.attachImageListener(u,((e,t)=>{const r=this.convertToMPImage(e,!this.userCallback);this.result=r,this.userCallback&&this.userCallback(r),this.setLatestOutputTimestamp(t)})),this.graphRunner.attachEmptyPacketListener(u,(e=>{this.result=null,this.userCallback&&this.userCallback(null),this.setLatestOutputTimestamp(e)}));const a=e.serializeBinary();this.setGraph(new Uint8Array(a),!0)}}e.FaceStylizer=d}(face_stylizer);var gesture_recognizer={},gesture_classifier_graph_options_pb={},classifier_options_pb={};!function(e){var t=googleProtobuf,r=t,n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==n&&n||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.mediapipe.tasks.components.processors.proto.ClassifierOptions",null,n),proto.mediapipe.tasks.components.processors.proto.ClassifierOptions=function(e){t.Message.initialize(this,e,0,-1,proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.repeatedFields_,null)},r.inherits(proto.mediapipe.tasks.components.processors.proto.ClassifierOptions,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.displayName="proto.mediapipe.tasks.components.processors.proto.ClassifierOptions"),proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.repeatedFields_=[4,5],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.toObject=function(e){return proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.toObject(e,this)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.toObject=function(e,r){var n,o={displayNamesLocale:t.Message.getFieldWithDefault(r,1,"en"),maxResults:t.Message.getFieldWithDefault(r,2,-1),scoreThreshold:null==(n=t.Message.getOptionalFloatingPointField(r,3))?void 0:n,categoryAllowlistList:null==(n=t.Message.getRepeatedField(r,4))?void 0:n,categoryDenylistList:null==(n=t.Message.getRepeatedField(r,5))?void 0:n};return e&&(o.$jspbMessageInstance=r),o}),proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.tasks.components.processors.proto.ClassifierOptions;return proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.deserializeBinaryFromReader(n,r)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readString();e.setDisplayNamesLocale(r);break;case 2:r=t.readInt32(),e.setMaxResults(r);break;case 3:r=t.readFloat(),e.setScoreThreshold(r);break;case 4:r=t.readString(),e.addCategoryAllowlist(r);break;case 5:r=t.readString(),e.addCategoryDenylist(r);break;default:t.skipField()}return e},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=t.Message.getField(e,1))&&r.writeString(1,n),null!=(n=t.Message.getField(e,2))&&r.writeInt32(2,n),null!=(n=t.Message.getField(e,3))&&r.writeFloat(3,n),(n=e.getCategoryAllowlistList()).length>0&&r.writeRepeatedString(4,n),(n=e.getCategoryDenylistList()).length>0&&r.writeRepeatedString(5,n)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.getDisplayNamesLocale=function(){return t.Message.getFieldWithDefault(this,1,"en")},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.setDisplayNamesLocale=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.clearDisplayNamesLocale=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.hasDisplayNamesLocale=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.getMaxResults=function(){return t.Message.getFieldWithDefault(this,2,-1)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.setMaxResults=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.clearMaxResults=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.hasMaxResults=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.getScoreThreshold=function(){return t.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.setScoreThreshold=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.clearScoreThreshold=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.hasScoreThreshold=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.getCategoryAllowlistList=function(){return t.Message.getRepeatedField(this,4)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.setCategoryAllowlistList=function(e){return t.Message.setField(this,4,e||[])},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.addCategoryAllowlist=function(e,r){return t.Message.addToRepeatedField(this,4,e,r)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.clearCategoryAllowlistList=function(){return this.setCategoryAllowlistList([])},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.getCategoryDenylistList=function(){return t.Message.getRepeatedField(this,5)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.setCategoryDenylistList=function(e){return t.Message.setField(this,5,e||[])},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.addCategoryDenylist=function(e,r){return t.Message.addToRepeatedField(this,5,e,r)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.clearCategoryDenylistList=function(){return this.setCategoryDenylistList([])},r.object.extend(e,proto.mediapipe.tasks.components.processors.proto)}(classifier_options_pb),function(e){var t=googleProtobuf,r=t,n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==n&&n||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),o=calculator_pb;r.object.extend(proto,o);var a=calculator_options_pb;r.object.extend(proto,a);var i=classifier_options_pb;r.object.extend(proto,i);var s=base_options_pb;r.object.extend(proto,s),r.exportSymbol("proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions",null,n),proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.displayName="proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.toObject=function(e){return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.toObject(e,this)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.toObject=function(e,t){var r,n={baseOptions:(r=t.getBaseOptions())&&s.BaseOptions.toObject(e,r),classifierOptions:(r=t.getClassifierOptions())&&i.ClassifierOptions.toObject(e,r)};return e&&(n.$jspbMessageInstance=t),n}),proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.deserializeBinaryFromReader(n,r)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=new s.BaseOptions;t.readMessage(r,s.BaseOptions.deserializeBinaryFromReader),e.setBaseOptions(r);break;case 2:r=new i.ClassifierOptions,t.readMessage(r,i.ClassifierOptions.deserializeBinaryFromReader),e.setClassifierOptions(r);break;default:t.skipField()}return e},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getBaseOptions())&&t.writeMessage(1,r,s.BaseOptions.serializeBinaryToWriter),null!=(r=e.getClassifierOptions())&&t.writeMessage(2,r,i.ClassifierOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.ext=new t.ExtensionFieldInfo(478825465,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.toObject,0),a.CalculatorOptions.extensionsBinary[478825465]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.deserializeBinaryFromReader,!1),a.CalculatorOptions.extensions[478825465]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.ext,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.getBaseOptions=function(){return t.Message.getWrapperField(this,s.BaseOptions,1)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.setBaseOptions=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.hasBaseOptions=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.getClassifierOptions=function(){return t.Message.getWrapperField(this,i.ClassifierOptions,2)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.setClassifierOptions=function(e){return t.Message.setWrapperField(this,2,e)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.clearClassifierOptions=function(){return this.setClassifierOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.hasClassifierOptions=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.ext=new t.ExtensionFieldInfo(478825465,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.toObject,0),a.CalculatorOptions.extensionsBinary[478825465]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.deserializeBinaryFromReader,!1),a.CalculatorOptions.extensions[478825465]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.ext,r.object.extend(e,proto.mediapipe.tasks.vision.gesture_recognizer.proto)}(gesture_classifier_graph_options_pb);var gesture_recognizer_graph_options_pb={},hand_gesture_recognizer_graph_options_pb={},gesture_embedder_graph_options_pb={};!function(e){var t=googleProtobuf,r=t,n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==n&&n||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),o=calculator_pb;r.object.extend(proto,o);var a=calculator_options_pb;r.object.extend(proto,a);var i=base_options_pb;r.object.extend(proto,i),r.exportSymbol("proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions",null,n),proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.displayName="proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.prototype.toObject=function(e){return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.toObject(e,this)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.toObject=function(e,t){var r,n={baseOptions:(r=t.getBaseOptions())&&i.BaseOptions.toObject(e,r)};return e&&(n.$jspbMessageInstance=t),n}),proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.deserializeBinaryFromReader(n,r)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var r=new i.BaseOptions;t.readMessage(r,i.BaseOptions.deserializeBinaryFromReader),e.setBaseOptions(r)}else t.skipField();return e},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.serializeBinaryToWriter=function(e,t){var r;null!=(r=e.getBaseOptions())&&t.writeMessage(1,r,i.BaseOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.ext=new t.ExtensionFieldInfo(478825422,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.toObject,0),a.CalculatorOptions.extensionsBinary[478825422]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.deserializeBinaryFromReader,!1),a.CalculatorOptions.extensions[478825422]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.ext,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.prototype.getBaseOptions=function(){return t.Message.getWrapperField(this,i.BaseOptions,1)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.prototype.setBaseOptions=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.prototype.hasBaseOptions=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.ext=new t.ExtensionFieldInfo(478825422,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.toObject,0),a.CalculatorOptions.extensionsBinary[478825422]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.deserializeBinaryFromReader,!1),a.CalculatorOptions.extensions[478825422]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.ext,r.object.extend(e,proto.mediapipe.tasks.vision.gesture_recognizer.proto)}(gesture_embedder_graph_options_pb),function(e){var t=googleProtobuf,r=t,n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==n&&n||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),o=calculator_pb;r.object.extend(proto,o);var a=calculator_options_pb;r.object.extend(proto,a);var i=base_options_pb;r.object.extend(proto,i);var s=gesture_classifier_graph_options_pb;r.object.extend(proto,s);var p=gesture_embedder_graph_options_pb;r.object.extend(proto,p),r.exportSymbol("proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions",null,n),proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.displayName="proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.toObject=function(e){return proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.toObject(e,this)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.toObject=function(e,t){var r,n={baseOptions:(r=t.getBaseOptions())&&i.BaseOptions.toObject(e,r),gestureEmbedderGraphOptions:(r=t.getGestureEmbedderGraphOptions())&&p.GestureEmbedderGraphOptions.toObject(e,r),cannedGestureClassifierGraphOptions:(r=t.getCannedGestureClassifierGraphOptions())&&s.GestureClassifierGraphOptions.toObject(e,r),customGestureClassifierGraphOptions:(r=t.getCustomGestureClassifierGraphOptions())&&s.GestureClassifierGraphOptions.toObject(e,r)};return e&&(n.$jspbMessageInstance=t),n}),proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.deserializeBinaryFromReader(n,r)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=new i.BaseOptions;t.readMessage(r,i.BaseOptions.deserializeBinaryFromReader),e.setBaseOptions(r);break;case 2:r=new p.GestureEmbedderGraphOptions,t.readMessage(r,p.GestureEmbedderGraphOptions.deserializeBinaryFromReader),e.setGestureEmbedderGraphOptions(r);break;case 3:r=new s.GestureClassifierGraphOptions,t.readMessage(r,s.GestureClassifierGraphOptions.deserializeBinaryFromReader),e.setCannedGestureClassifierGraphOptions(r);break;case 4:r=new s.GestureClassifierGraphOptions,t.readMessage(r,s.GestureClassifierGraphOptions.deserializeBinaryFromReader),e.setCustomGestureClassifierGraphOptions(r);break;default:t.skipField()}return e},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getBaseOptions())&&t.writeMessage(1,r,i.BaseOptions.serializeBinaryToWriter),null!=(r=e.getGestureEmbedderGraphOptions())&&t.writeMessage(2,r,p.GestureEmbedderGraphOptions.serializeBinaryToWriter),null!=(r=e.getCannedGestureClassifierGraphOptions())&&t.writeMessage(3,r,s.GestureClassifierGraphOptions.serializeBinaryToWriter),null!=(r=e.getCustomGestureClassifierGraphOptions())&&t.writeMessage(4,r,s.GestureClassifierGraphOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.ext=new t.ExtensionFieldInfo(463370452,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.toObject,0),a.CalculatorOptions.extensionsBinary[463370452]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.deserializeBinaryFromReader,!1),a.CalculatorOptions.extensions[463370452]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.ext,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.getBaseOptions=function(){return t.Message.getWrapperField(this,i.BaseOptions,1)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.setBaseOptions=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.hasBaseOptions=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.getGestureEmbedderGraphOptions=function(){return t.Message.getWrapperField(this,p.GestureEmbedderGraphOptions,2)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.setGestureEmbedderGraphOptions=function(e){return t.Message.setWrapperField(this,2,e)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.clearGestureEmbedderGraphOptions=function(){return this.setGestureEmbedderGraphOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.hasGestureEmbedderGraphOptions=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.getCannedGestureClassifierGraphOptions=function(){return t.Message.getWrapperField(this,s.GestureClassifierGraphOptions,3)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.setCannedGestureClassifierGraphOptions=function(e){return t.Message.setWrapperField(this,3,e)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.clearCannedGestureClassifierGraphOptions=function(){return this.setCannedGestureClassifierGraphOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.hasCannedGestureClassifierGraphOptions=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.getCustomGestureClassifierGraphOptions=function(){return t.Message.getWrapperField(this,s.GestureClassifierGraphOptions,4)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.setCustomGestureClassifierGraphOptions=function(e){return t.Message.setWrapperField(this,4,e)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.clearCustomGestureClassifierGraphOptions=function(){return this.setCustomGestureClassifierGraphOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.hasCustomGestureClassifierGraphOptions=function(){return null!=t.Message.getField(this,4)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.ext=new t.ExtensionFieldInfo(463370452,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.toObject,0),a.CalculatorOptions.extensionsBinary[463370452]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.deserializeBinaryFromReader,!1),a.CalculatorOptions.extensions[463370452]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.ext,r.object.extend(e,proto.mediapipe.tasks.vision.gesture_recognizer.proto)}(hand_gesture_recognizer_graph_options_pb);var hand_landmarker_graph_options_pb={},hand_detector_graph_options_pb={};!function(e){var t=googleProtobuf,r=t,n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==n&&n||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),o=calculator_pb;r.object.extend(proto,o);var a=calculator_options_pb;r.object.extend(proto,a);var i=base_options_pb;r.object.extend(proto,i),r.exportSymbol("proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions",null,n),proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.displayName="proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.toObject=function(e){return proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.toObject(e,this)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.toObject=function(e,r){var n,o={baseOptions:(n=r.getBaseOptions())&&i.BaseOptions.toObject(e,n),minDetectionConfidence:t.Message.getFloatingPointFieldWithDefault(r,2,.5),numHands:null==(n=t.Message.getField(r,3))?void 0:n};return e&&(o.$jspbMessageInstance=r),o}),proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions;return proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.deserializeBinaryFromReader(n,r)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=new i.BaseOptions;t.readMessage(r,i.BaseOptions.deserializeBinaryFromReader),e.setBaseOptions(r);break;case 2:r=t.readFloat(),e.setMinDetectionConfidence(r);break;case 3:r=t.readInt32(),e.setNumHands(r);break;default:t.skipField()}return e},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=e.getBaseOptions())&&r.writeMessage(1,n,i.BaseOptions.serializeBinaryToWriter),null!=(n=t.Message.getField(e,2))&&r.writeFloat(2,n),null!=(n=t.Message.getField(e,3))&&r.writeInt32(3,n)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.ext=new t.ExtensionFieldInfo(464864288,{ext:0},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.toObject,0),a.CalculatorOptions.extensionsBinary[464864288]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.deserializeBinaryFromReader,!1),a.CalculatorOptions.extensions[464864288]=proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.ext,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.getBaseOptions=function(){return t.Message.getWrapperField(this,i.BaseOptions,1)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.setBaseOptions=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.hasBaseOptions=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.getMinDetectionConfidence=function(){return t.Message.getFloatingPointFieldWithDefault(this,2,.5)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.setMinDetectionConfidence=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.clearMinDetectionConfidence=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.hasMinDetectionConfidence=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.getNumHands=function(){return t.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.setNumHands=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.clearNumHands=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.hasNumHands=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.ext=new t.ExtensionFieldInfo(464864288,{ext:0},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.toObject,0),a.CalculatorOptions.extensionsBinary[464864288]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.deserializeBinaryFromReader,!1),a.CalculatorOptions.extensions[464864288]=proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.ext,r.object.extend(e,proto.mediapipe.tasks.vision.hand_detector.proto)}(hand_detector_graph_options_pb);var hand_landmarks_detector_graph_options_pb={};!function(e){var t=googleProtobuf,r=t,n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==n&&n||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),o=calculator_pb;r.object.extend(proto,o);var a=calculator_options_pb;r.object.extend(proto,a);var i=base_options_pb;r.object.extend(proto,i),r.exportSymbol("proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions",null,n),proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.displayName="proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.toObject=function(e){return proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.toObject(e,this)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.toObject=function(e,r){var n,o={baseOptions:(n=r.getBaseOptions())&&i.BaseOptions.toObject(e,n),minDetectionConfidence:t.Message.getFloatingPointFieldWithDefault(r,2,.5)};return e&&(o.$jspbMessageInstance=r),o}),proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions;return proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.deserializeBinaryFromReader(n,r)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=new i.BaseOptions;t.readMessage(r,i.BaseOptions.deserializeBinaryFromReader),e.setBaseOptions(r);break;case 2:r=t.readFloat(),e.setMinDetectionConfidence(r);break;default:t.skipField()}return e},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=e.getBaseOptions())&&r.writeMessage(1,n,i.BaseOptions.serializeBinaryToWriter),null!=(n=t.Message.getField(e,2))&&r.writeFloat(2,n)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.ext=new t.ExtensionFieldInfo(474472470,{ext:0},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.toObject,0),a.CalculatorOptions.extensionsBinary[474472470]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.deserializeBinaryFromReader,!1),a.CalculatorOptions.extensions[474472470]=proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.ext,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.getBaseOptions=function(){return t.Message.getWrapperField(this,i.BaseOptions,1)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.setBaseOptions=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.hasBaseOptions=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.getMinDetectionConfidence=function(){return t.Message.getFloatingPointFieldWithDefault(this,2,.5)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.setMinDetectionConfidence=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.clearMinDetectionConfidence=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.hasMinDetectionConfidence=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.ext=new t.ExtensionFieldInfo(474472470,{ext:0},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.toObject,0),a.CalculatorOptions.extensionsBinary[474472470]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.deserializeBinaryFromReader,!1),a.CalculatorOptions.extensions[474472470]=proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.ext,r.object.extend(e,proto.mediapipe.tasks.vision.hand_landmarker.proto)}(hand_landmarks_detector_graph_options_pb),function(e){var t=googleProtobuf,r=t,n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==n&&n||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),o=calculator_pb;r.object.extend(proto,o);var a=calculator_options_pb;r.object.extend(proto,a);var i=base_options_pb;r.object.extend(proto,i);var s=hand_detector_graph_options_pb;r.object.extend(proto,s);var p=hand_landmarks_detector_graph_options_pb;r.object.extend(proto,p),r.exportSymbol("proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions",null,n),proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.displayName="proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.toObject=function(e){return proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.toObject(e,this)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.toObject=function(e,r){var n,o={baseOptions:(n=r.getBaseOptions())&&i.BaseOptions.toObject(e,n),handDetectorGraphOptions:(n=r.getHandDetectorGraphOptions())&&s.HandDetectorGraphOptions.toObject(e,n),handLandmarksDetectorGraphOptions:(n=r.getHandLandmarksDetectorGraphOptions())&&p.HandLandmarksDetectorGraphOptions.toObject(e,n),minTrackingConfidence:t.Message.getFloatingPointFieldWithDefault(r,4,.5)};return e&&(o.$jspbMessageInstance=r),o}),proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions;return proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.deserializeBinaryFromReader(n,r)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=new i.BaseOptions;t.readMessage(r,i.BaseOptions.deserializeBinaryFromReader),e.setBaseOptions(r);break;case 2:r=new s.HandDetectorGraphOptions,t.readMessage(r,s.HandDetectorGraphOptions.deserializeBinaryFromReader),e.setHandDetectorGraphOptions(r);break;case 3:r=new p.HandLandmarksDetectorGraphOptions,t.readMessage(r,p.HandLandmarksDetectorGraphOptions.deserializeBinaryFromReader),e.setHandLandmarksDetectorGraphOptions(r);break;case 4:r=t.readFloat(),e.setMinTrackingConfidence(r);break;default:t.skipField()}return e},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=e.getBaseOptions())&&r.writeMessage(1,n,i.BaseOptions.serializeBinaryToWriter),null!=(n=e.getHandDetectorGraphOptions())&&r.writeMessage(2,n,s.HandDetectorGraphOptions.serializeBinaryToWriter),null!=(n=e.getHandLandmarksDetectorGraphOptions())&&r.writeMessage(3,n,p.HandLandmarksDetectorGraphOptions.serializeBinaryToWriter),null!=(n=t.Message.getField(e,4))&&r.writeFloat(4,n)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.ext=new t.ExtensionFieldInfo(462713202,{ext:0},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.toObject,0),a.CalculatorOptions.extensionsBinary[462713202]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.deserializeBinaryFromReader,!1),a.CalculatorOptions.extensions[462713202]=proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.ext,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.getBaseOptions=function(){return t.Message.getWrapperField(this,i.BaseOptions,1)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.setBaseOptions=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.hasBaseOptions=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.getHandDetectorGraphOptions=function(){return t.Message.getWrapperField(this,s.HandDetectorGraphOptions,2)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.setHandDetectorGraphOptions=function(e){return t.Message.setWrapperField(this,2,e)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.clearHandDetectorGraphOptions=function(){return this.setHandDetectorGraphOptions(void 0)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.hasHandDetectorGraphOptions=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.getHandLandmarksDetectorGraphOptions=function(){return t.Message.getWrapperField(this,p.HandLandmarksDetectorGraphOptions,3)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.setHandLandmarksDetectorGraphOptions=function(e){return t.Message.setWrapperField(this,3,e)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.clearHandLandmarksDetectorGraphOptions=function(){return this.setHandLandmarksDetectorGraphOptions(void 0)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.hasHandLandmarksDetectorGraphOptions=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.getMinTrackingConfidence=function(){return t.Message.getFloatingPointFieldWithDefault(this,4,.5)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.setMinTrackingConfidence=function(e){return t.Message.setField(this,4,e)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.clearMinTrackingConfidence=function(){return t.Message.setField(this,4,void 0)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.hasMinTrackingConfidence=function(){return null!=t.Message.getField(this,4)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.ext=new t.ExtensionFieldInfo(462713202,{ext:0},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.toObject,0),a.CalculatorOptions.extensionsBinary[462713202]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.deserializeBinaryFromReader,!1),a.CalculatorOptions.extensions[462713202]=proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.ext,r.object.extend(e,proto.mediapipe.tasks.vision.hand_landmarker.proto)}(hand_landmarker_graph_options_pb),function(e){var t=googleProtobuf,r=t,n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==n&&n||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),o=calculator_pb;r.object.extend(proto,o);var a=calculator_options_pb;r.object.extend(proto,a);var i=base_options_pb;r.object.extend(proto,i);var s=hand_gesture_recognizer_graph_options_pb;r.object.extend(proto,s);var p=hand_landmarker_graph_options_pb;r.object.extend(proto,p),r.exportSymbol("proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions",null,n),proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.displayName="proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.toObject=function(e){return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.toObject(e,this)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.toObject=function(e,t){var r,n={baseOptions:(r=t.getBaseOptions())&&i.BaseOptions.toObject(e,r),handLandmarkerGraphOptions:(r=t.getHandLandmarkerGraphOptions())&&p.HandLandmarkerGraphOptions.toObject(e,r),handGestureRecognizerGraphOptions:(r=t.getHandGestureRecognizerGraphOptions())&&s.HandGestureRecognizerGraphOptions.toObject(e,r)};return e&&(n.$jspbMessageInstance=t),n}),proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.deserializeBinaryFromReader(n,r)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=new i.BaseOptions;t.readMessage(r,i.BaseOptions.deserializeBinaryFromReader),e.setBaseOptions(r);break;case 2:r=new p.HandLandmarkerGraphOptions,t.readMessage(r,p.HandLandmarkerGraphOptions.deserializeBinaryFromReader),e.setHandLandmarkerGraphOptions(r);break;case 3:r=new s.HandGestureRecognizerGraphOptions,t.readMessage(r,s.HandGestureRecognizerGraphOptions.deserializeBinaryFromReader),e.setHandGestureRecognizerGraphOptions(r);break;default:t.skipField()}return e},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getBaseOptions())&&t.writeMessage(1,r,i.BaseOptions.serializeBinaryToWriter),null!=(r=e.getHandLandmarkerGraphOptions())&&t.writeMessage(2,r,p.HandLandmarkerGraphOptions.serializeBinaryToWriter),null!=(r=e.getHandGestureRecognizerGraphOptions())&&t.writeMessage(3,r,s.HandGestureRecognizerGraphOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.ext=new t.ExtensionFieldInfo(479097054,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.toObject,0),a.CalculatorOptions.extensionsBinary[479097054]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.deserializeBinaryFromReader,!1),a.CalculatorOptions.extensions[479097054]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.ext,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.getBaseOptions=function(){return t.Message.getWrapperField(this,i.BaseOptions,1)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.setBaseOptions=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.hasBaseOptions=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.getHandLandmarkerGraphOptions=function(){return t.Message.getWrapperField(this,p.HandLandmarkerGraphOptions,2)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.setHandLandmarkerGraphOptions=function(e){return t.Message.setWrapperField(this,2,e)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.clearHandLandmarkerGraphOptions=function(){return this.setHandLandmarkerGraphOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.hasHandLandmarkerGraphOptions=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.getHandGestureRecognizerGraphOptions=function(){return t.Message.getWrapperField(this,s.HandGestureRecognizerGraphOptions,3)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.setHandGestureRecognizerGraphOptions=function(e){return t.Message.setWrapperField(this,3,e)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.clearHandGestureRecognizerGraphOptions=function(){return this.setHandGestureRecognizerGraphOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.hasHandGestureRecognizerGraphOptions=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.ext=new t.ExtensionFieldInfo(479097054,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.toObject,0),a.CalculatorOptions.extensionsBinary[479097054]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.deserializeBinaryFromReader,!1),a.CalculatorOptions.extensions[479097054]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.ext,r.object.extend(e,proto.mediapipe.tasks.vision.gesture_recognizer.proto)}(gesture_recognizer_graph_options_pb);var classifier_options={};Object.defineProperty(classifier_options,"__esModule",{value:!0}),classifier_options.convertClassifierOptionsToProto=void 0;const classifier_options_pb_1=classifier_options_pb;function convertClassifierOptionsToProto(e,t){const r=t?t.clone():new classifier_options_pb_1.ClassifierOptions;return void 0!==e.displayNamesLocale?r.setDisplayNamesLocale(e.displayNamesLocale):void 0===e.displayNamesLocale&&r.clearDisplayNamesLocale(),void 0!==e.maxResults?r.setMaxResults(e.maxResults):"maxResults"in e&&r.clearMaxResults(),void 0!==e.scoreThreshold?r.setScoreThreshold(e.scoreThreshold):"scoreThreshold"in e&&r.clearScoreThreshold(),void 0!==e.categoryAllowlist?r.setCategoryAllowlistList(e.categoryAllowlist):"categoryAllowlist"in e&&r.clearCategoryAllowlistList(),void 0!==e.categoryDenylist?r.setCategoryDenylistList(e.categoryDenylist):"categoryDenylist"in e&&r.clearCategoryDenylistList(),r}classifier_options.convertClassifierOptionsToProto=convertClassifierOptionsToProto;var hand_landmarks_connections={};Object.defineProperty(hand_landmarks_connections,"__esModule",{value:!0}),hand_landmarks_connections.HAND_CONNECTIONS=void 0,hand_landmarks_connections.HAND_CONNECTIONS=[{start:0,end:1},{start:1,end:2},{start:2,end:3},{start:3,end:4},{start:0,end:5},{start:5,end:6},{start:6,end:7},{start:7,end:8},{start:5,end:9},{start:9,end:10},{start:10,end:11},{start:11,end:12},{start:9,end:13},{start:13,end:14},{start:14,end:15},{start:15,end:16},{start:13,end:17},{start:0,end:17},{start:17,end:18},{start:18,end:19},{start:19,end:20}];var gesture_recognizer_options={};Object.defineProperty(gesture_recognizer_options,"__esModule",{value:!0});var gesture_recognizer_result={};Object.defineProperty(gesture_recognizer_result,"__esModule",{value:!0}),function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=commonjsGlobal&&commonjsGlobal.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.GestureRecognizer=void 0;const n=calculator_pb,o=calculator_options_pb,a=classification_pb,i=landmark_pb,s=base_options_pb,p=gesture_classifier_graph_options_pb,l=gesture_recognizer_graph_options_pb,u=hand_gesture_recognizer_graph_options_pb,d=hand_detector_graph_options_pb,c=hand_landmarker_graph_options_pb,g=hand_landmarks_detector_graph_options_pb,h=classifier_options,f=vision_task_runner,m=hand_landmarks_connections;r(gesture_recognizer_options,e),r(gesture_recognizer_result,e);const y="image_in",b="norm_rect",_="hand_gestures",v="hand_landmarks",w="world_hand_landmarks",k="handedness",T=.5;class O extends f.VisionTaskRunner{static createFromOptions(e,t){return f.VisionTaskRunner.createVisionInstance(O,e,t)}static createFromModelBuffer(e,t){return f.VisionTaskRunner.createVisionInstance(O,e,{baseOptions:{modelAssetBuffer:t}})}static createFromModelPath(e,t){return f.VisionTaskRunner.createVisionInstance(O,e,{baseOptions:{modelAssetPath:t}})}constructor(e,t){super(new f.VisionGraphRunner(e,t),y,b,!1),this.gestures=[],this.landmarks=[],this.worldLandmarks=[],this.handednesses=[],this.options=new l.GestureRecognizerGraphOptions,this.options.setBaseOptions(new s.BaseOptions),this.handLandmarkerGraphOptions=new c.HandLandmarkerGraphOptions,this.options.setHandLandmarkerGraphOptions(this.handLandmarkerGraphOptions),this.handLandmarksDetectorGraphOptions=new g.HandLandmarksDetectorGraphOptions,this.handLandmarkerGraphOptions.setHandLandmarksDetectorGraphOptions(this.handLandmarksDetectorGraphOptions),this.handDetectorGraphOptions=new d.HandDetectorGraphOptions,this.handLandmarkerGraphOptions.setHandDetectorGraphOptions(this.handDetectorGraphOptions),this.handGestureRecognizerGraphOptions=new u.HandGestureRecognizerGraphOptions,this.options.setHandGestureRecognizerGraphOptions(this.handGestureRecognizerGraphOptions),this.handDetectorGraphOptions.setMinDetectionConfidence(T),this.handLandmarkerGraphOptions.setMinTrackingConfidence(T),this.handLandmarksDetectorGraphOptions.setMinDetectionConfidence(T)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(e){this.options.setBaseOptions(e)}setOptions(e){var t,r,n,o,a,i,s,l;if(this.handDetectorGraphOptions.setNumHands(null!==(t=e.numHands)&&void 0!==t?t:1),"minHandDetectionConfidence"in e&&this.handDetectorGraphOptions.setMinDetectionConfidence(null!==(r=e.minHandDetectionConfidence)&&void 0!==r?r:T),"minTrackingConfidence"in e&&this.handLandmarkerGraphOptions.setMinTrackingConfidence(null!==(n=e.minTrackingConfidence)&&void 0!==n?n:T),"minHandPresenceConfidence"in e&&this.handLandmarksDetectorGraphOptions.setMinDetectionConfidence(null!==(o=e.minHandPresenceConfidence)&&void 0!==o?o:T),e.cannedGesturesClassifierOptions){const t=new p.GestureClassifierGraphOptions;t.setClassifierOptions((0,h.convertClassifierOptionsToProto)(e.cannedGesturesClassifierOptions,null===(a=this.handGestureRecognizerGraphOptions.getCannedGestureClassifierGraphOptions())||void 0===a?void 0:a.getClassifierOptions())),this.handGestureRecognizerGraphOptions.setCannedGestureClassifierGraphOptions(t)}else void 0===e.cannedGesturesClassifierOptions&&(null===(i=this.handGestureRecognizerGraphOptions.getCannedGestureClassifierGraphOptions())||void 0===i||i.clearClassifierOptions());if(e.customGesturesClassifierOptions){const t=new p.GestureClassifierGraphOptions;t.setClassifierOptions((0,h.convertClassifierOptionsToProto)(e.customGesturesClassifierOptions,null===(s=this.handGestureRecognizerGraphOptions.getCustomGestureClassifierGraphOptions())||void 0===s?void 0:s.getClassifierOptions())),this.handGestureRecognizerGraphOptions.setCustomGestureClassifierGraphOptions(t)}else void 0===e.customGesturesClassifierOptions&&(null===(l=this.handGestureRecognizerGraphOptions.getCustomGestureClassifierGraphOptions())||void 0===l||l.clearClassifierOptions());return this.applyOptions(e)}recognize(e,t){return this.resetResults(),this.processImageData(e,t),this.processResults()}recognizeForVideo(e,t,r){return this.resetResults(),this.processVideoData(e,r,t),this.processResults()}resetResults(){this.gestures=[],this.landmarks=[],this.worldLandmarks=[],this.handednesses=[]}processResults(){return 0===this.gestures.length?{gestures:[],landmarks:[],worldLandmarks:[],handednesses:[]}:{gestures:this.gestures,landmarks:this.landmarks,worldLandmarks:this.worldLandmarks,handednesses:this.handednesses}}toJsCategories(e,t=!0){var r,n,o;const i=[];for(const s of e){const e=a.ClassificationList.deserializeBinary(s),p=[];for(const a of e.getClassificationList()){const e=t&&a.hasIndex()?a.getIndex():-1;p.push({score:null!==(r=a.getScore())&&void 0!==r?r:0,index:e,categoryName:null!==(n=a.getLabel())&&void 0!==n?n:"",displayName:null!==(o=a.getDisplayName())&&void 0!==o?o:""})}i.push(p)}return i}addJsLandmarks(e){var t,r,n;for(const o of e){const e=i.NormalizedLandmarkList.deserializeBinary(o),a=[];for(const o of e.getLandmarkList())a.push({x:null!==(t=o.getX())&&void 0!==t?t:0,y:null!==(r=o.getY())&&void 0!==r?r:0,z:null!==(n=o.getZ())&&void 0!==n?n:0});this.landmarks.push(a)}}adddJsWorldLandmarks(e){var t,r,n;for(const o of e){const e=i.LandmarkList.deserializeBinary(o),a=[];for(const o of e.getLandmarkList())a.push({x:null!==(t=o.getX())&&void 0!==t?t:0,y:null!==(r=o.getY())&&void 0!==r?r:0,z:null!==(n=o.getZ())&&void 0!==n?n:0});this.worldLandmarks.push(a)}}refreshGraph(){const e=new n.CalculatorGraphConfig;e.addInputStream(y),e.addInputStream(b),e.addOutputStream(_),e.addOutputStream(v),e.addOutputStream(w),e.addOutputStream(k);const t=new o.CalculatorOptions;t.setExtension(l.GestureRecognizerGraphOptions.ext,this.options);const r=new n.CalculatorGraphConfig.Node;r.setCalculator("mediapipe.tasks.vision.gesture_recognizer.GestureRecognizerGraph"),r.addInputStream("IMAGE:"+y),r.addInputStream("NORM_RECT:"+b),r.addOutputStream("HAND_GESTURES:"+_),r.addOutputStream("LANDMARKS:"+v),r.addOutputStream("WORLD_LANDMARKS:"+w),r.addOutputStream("HANDEDNESS:"+k),r.setOptions(t),e.addNode(r),this.graphRunner.attachProtoVectorListener(v,((e,t)=>{this.addJsLandmarks(e),this.setLatestOutputTimestamp(t)})),this.graphRunner.attachEmptyPacketListener(v,(e=>{this.setLatestOutputTimestamp(e)})),this.graphRunner.attachProtoVectorListener(w,((e,t)=>{this.adddJsWorldLandmarks(e),this.setLatestOutputTimestamp(t)})),this.graphRunner.attachEmptyPacketListener(w,(e=>{this.setLatestOutputTimestamp(e)})),this.graphRunner.attachProtoVectorListener(_,((e,t)=>{this.gestures.push(...this.toJsCategories(e,!1)),this.setLatestOutputTimestamp(t)})),this.graphRunner.attachEmptyPacketListener(_,(e=>{this.setLatestOutputTimestamp(e)})),this.graphRunner.attachProtoVectorListener(k,((e,t)=>{this.handednesses.push(...this.toJsCategories(e)),this.setLatestOutputTimestamp(t)})),this.graphRunner.attachEmptyPacketListener(k,(e=>{this.setLatestOutputTimestamp(e)}));const a=e.serializeBinary();this.setGraph(new Uint8Array(a),!0)}}e.GestureRecognizer=O,O.HAND_CONNECTIONS=m.HAND_CONNECTIONS}(gesture_recognizer);var hand_landmarker={},hand_landmarker_options={};Object.defineProperty(hand_landmarker_options,"__esModule",{value:!0});var hand_landmarker_result={};Object.defineProperty(hand_landmarker_result,"__esModule",{value:!0}),function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=commonjsGlobal&&commonjsGlobal.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.HandLandmarker=void 0;const n=calculator_pb,o=calculator_options_pb,a=classification_pb,i=landmark_pb,s=base_options_pb,p=hand_detector_graph_options_pb,l=hand_landmarker_graph_options_pb,u=hand_landmarks_detector_graph_options_pb,d=landmark_result,c=vision_task_runner,g=hand_landmarks_connections;r(hand_landmarker_options,e),r(hand_landmarker_result,e);const h="image_in",f="norm_rect",m="hand_landmarks",y="world_hand_landmarks",b="handedness",_=.5;class v extends c.VisionTaskRunner{static createFromOptions(e,t){return c.VisionTaskRunner.createVisionInstance(v,e,t)}static createFromModelBuffer(e,t){return c.VisionTaskRunner.createVisionInstance(v,e,{baseOptions:{modelAssetBuffer:t}})}static createFromModelPath(e,t){return c.VisionTaskRunner.createVisionInstance(v,e,{baseOptions:{modelAssetPath:t}})}constructor(e,t){super(new c.VisionGraphRunner(e,t),h,f,!1),this.landmarks=[],this.worldLandmarks=[],this.handednesses=[],this.options=new l.HandLandmarkerGraphOptions,this.options.setBaseOptions(new s.BaseOptions),this.handLandmarksDetectorGraphOptions=new u.HandLandmarksDetectorGraphOptions,this.options.setHandLandmarksDetectorGraphOptions(this.handLandmarksDetectorGraphOptions),this.handDetectorGraphOptions=new p.HandDetectorGraphOptions,this.options.setHandDetectorGraphOptions(this.handDetectorGraphOptions),this.initDefaults()}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(e){this.options.setBaseOptions(e)}setOptions(e){var t,r,n,o;return"numHands"in e&&this.handDetectorGraphOptions.setNumHands(null!==(t=e.numHands)&&void 0!==t?t:1),"minHandDetectionConfidence"in e&&this.handDetectorGraphOptions.setMinDetectionConfidence(null!==(r=e.minHandDetectionConfidence)&&void 0!==r?r:_),"minTrackingConfidence"in e&&this.options.setMinTrackingConfidence(null!==(n=e.minTrackingConfidence)&&void 0!==n?n:_),"minHandPresenceConfidence"in e&&this.handLandmarksDetectorGraphOptions.setMinDetectionConfidence(null!==(o=e.minHandPresenceConfidence)&&void 0!==o?o:_),this.applyOptions(e)}detect(e,t){return this.resetResults(),this.processImageData(e,t),this.processResults()}detectForVideo(e,t,r){return this.resetResults(),this.processVideoData(e,r,t),this.processResults()}resetResults(){this.landmarks=[],this.worldLandmarks=[],this.handednesses=[]}processResults(){return{landmarks:this.landmarks,worldLandmarks:this.worldLandmarks,handednesses:this.handednesses}}initDefaults(){this.handDetectorGraphOptions.setNumHands(1),this.handDetectorGraphOptions.setMinDetectionConfidence(_),this.handLandmarksDetectorGraphOptions.setMinDetectionConfidence(_),this.options.setMinTrackingConfidence(_)}toJsCategories(e){var t,r,n,o;const i=[];for(const s of e){const e=a.ClassificationList.deserializeBinary(s),p=[];for(const a of e.getClassificationList())p.push({score:null!==(t=a.getScore())&&void 0!==t?t:0,index:null!==(r=a.getIndex())&&void 0!==r?r:-1,categoryName:null!==(n=a.getLabel())&&void 0!==n?n:"",displayName:null!==(o=a.getDisplayName())&&void 0!==o?o:""});i.push(p)}return i}addJsLandmarks(e){for(const t of e){const e=i.NormalizedLandmarkList.deserializeBinary(t);this.landmarks.push((0,d.convertToLandmarks)(e))}}adddJsWorldLandmarks(e){for(const t of e){const e=i.LandmarkList.deserializeBinary(t);this.worldLandmarks.push((0,d.convertToWorldLandmarks)(e))}}refreshGraph(){const e=new n.CalculatorGraphConfig;e.addInputStream(h),e.addInputStream(f),e.addOutputStream(m),e.addOutputStream(y),e.addOutputStream(b);const t=new o.CalculatorOptions;t.setExtension(l.HandLandmarkerGraphOptions.ext,this.options);const r=new n.CalculatorGraphConfig.Node;r.setCalculator("mediapipe.tasks.vision.hand_landmarker.HandLandmarkerGraph"),r.addInputStream("IMAGE:"+h),r.addInputStream("NORM_RECT:"+f),r.addOutputStream("LANDMARKS:"+m),r.addOutputStream("WORLD_LANDMARKS:"+y),r.addOutputStream("HANDEDNESS:"+b),r.setOptions(t),e.addNode(r),this.graphRunner.attachProtoVectorListener(m,((e,t)=>{this.addJsLandmarks(e),this.setLatestOutputTimestamp(t)})),this.graphRunner.attachEmptyPacketListener(m,(e=>{this.setLatestOutputTimestamp(e)})),this.graphRunner.attachProtoVectorListener(y,((e,t)=>{this.adddJsWorldLandmarks(e),this.setLatestOutputTimestamp(t)})),this.graphRunner.attachEmptyPacketListener(y,(e=>{this.setLatestOutputTimestamp(e)})),this.graphRunner.attachProtoVectorListener(b,((e,t)=>{this.handednesses.push(...this.toJsCategories(e)),this.setLatestOutputTimestamp(t)})),this.graphRunner.attachEmptyPacketListener(b,(e=>{this.setLatestOutputTimestamp(e)}));const a=e.serializeBinary();this.setGraph(new Uint8Array(a),!0)}}e.HandLandmarker=v,v.HAND_CONNECTIONS=g.HAND_CONNECTIONS}(hand_landmarker);var image_classifier={},classifications_pb={};!function(e){var t=googleProtobuf,r=t,n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==n&&n||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),o=classification_pb;r.object.extend(proto,o),r.exportSymbol("proto.mediapipe.tasks.components.containers.proto.ClassificationResult",null,n),r.exportSymbol("proto.mediapipe.tasks.components.containers.proto.Classifications",null,n),proto.mediapipe.tasks.components.containers.proto.Classifications=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.components.containers.proto.Classifications,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.containers.proto.Classifications.displayName="proto.mediapipe.tasks.components.containers.proto.Classifications"),proto.mediapipe.tasks.components.containers.proto.ClassificationResult=function(e){t.Message.initialize(this,e,0,-1,proto.mediapipe.tasks.components.containers.proto.ClassificationResult.repeatedFields_,null)},r.inherits(proto.mediapipe.tasks.components.containers.proto.ClassificationResult,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.containers.proto.ClassificationResult.displayName="proto.mediapipe.tasks.components.containers.proto.ClassificationResult"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.toObject=function(e){return proto.mediapipe.tasks.components.containers.proto.Classifications.toObject(e,this)},proto.mediapipe.tasks.components.containers.proto.Classifications.toObject=function(e,r){var n,a={classificationList:(n=r.getClassificationList())&&o.ClassificationList.toObject(e,n),headIndex:null==(n=t.Message.getField(r,2))?void 0:n,headName:null==(n=t.Message.getField(r,3))?void 0:n};return e&&(a.$jspbMessageInstance=r),a}),proto.mediapipe.tasks.components.containers.proto.Classifications.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.tasks.components.containers.proto.Classifications;return proto.mediapipe.tasks.components.containers.proto.Classifications.deserializeBinaryFromReader(n,r)},proto.mediapipe.tasks.components.containers.proto.Classifications.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 4:var r=new o.ClassificationList;t.readMessage(r,o.ClassificationList.deserializeBinaryFromReader),e.setClassificationList(r);break;case 2:r=t.readInt32(),e.setHeadIndex(r);break;case 3:r=t.readString(),e.setHeadName(r);break;default:t.skipField()}return e},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.components.containers.proto.Classifications.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.components.containers.proto.Classifications.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=e.getClassificationList())&&r.writeMessage(4,n,o.ClassificationList.serializeBinaryToWriter),null!=(n=t.Message.getField(e,2))&&r.writeInt32(2,n),null!=(n=t.Message.getField(e,3))&&r.writeString(3,n)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.getClassificationList=function(){return t.Message.getWrapperField(this,o.ClassificationList,4)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.setClassificationList=function(e){return t.Message.setWrapperField(this,4,e)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.clearClassificationList=function(){return this.setClassificationList(void 0)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.hasClassificationList=function(){return null!=t.Message.getField(this,4)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.getHeadIndex=function(){return t.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.setHeadIndex=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.clearHeadIndex=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.hasHeadIndex=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.getHeadName=function(){return t.Message.getFieldWithDefault(this,3,"")},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.setHeadName=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.clearHeadName=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.hasHeadName=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.toObject=function(e){return proto.mediapipe.tasks.components.containers.proto.ClassificationResult.toObject(e,this)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.toObject=function(e,r){var n,o={classificationsList:t.Message.toObjectList(r.getClassificationsList(),proto.mediapipe.tasks.components.containers.proto.Classifications.toObject,e),timestampMs:null==(n=t.Message.getField(r,2))?void 0:n};return e&&(o.$jspbMessageInstance=r),o}),proto.mediapipe.tasks.components.containers.proto.ClassificationResult.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.tasks.components.containers.proto.ClassificationResult;return proto.mediapipe.tasks.components.containers.proto.ClassificationResult.deserializeBinaryFromReader(n,r)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=new proto.mediapipe.tasks.components.containers.proto.Classifications;t.readMessage(r,proto.mediapipe.tasks.components.containers.proto.Classifications.deserializeBinaryFromReader),e.addClassifications(r);break;case 2:r=t.readInt64(),e.setTimestampMs(r);break;default:t.skipField()}return e},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.components.containers.proto.ClassificationResult.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.serializeBinaryToWriter=function(e,r){var n=void 0;(n=e.getClassificationsList()).length>0&&r.writeRepeatedMessage(1,n,proto.mediapipe.tasks.components.containers.proto.Classifications.serializeBinaryToWriter),null!=(n=t.Message.getField(e,2))&&r.writeInt64(2,n)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.getClassificationsList=function(){return t.Message.getRepeatedWrapperField(this,proto.mediapipe.tasks.components.containers.proto.Classifications,1)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.setClassificationsList=function(e){return t.Message.setRepeatedWrapperField(this,1,e)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.addClassifications=function(e,r){return t.Message.addToRepeatedWrapperField(this,1,e,proto.mediapipe.tasks.components.containers.proto.Classifications,r)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.clearClassificationsList=function(){return this.setClassificationsList([])},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.getTimestampMs=function(){return t.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.setTimestampMs=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.clearTimestampMs=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.hasTimestampMs=function(){return null!=t.Message.getField(this,2)},r.object.extend(e,proto.mediapipe.tasks.components.containers.proto)}(classifications_pb);var image_classifier_graph_options_pb={};!function(e){var t=googleProtobuf,r=t,n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==n&&n||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),o=calculator_pb;r.object.extend(proto,o);var a=calculator_options_pb;r.object.extend(proto,a);var i=classifier_options_pb;r.object.extend(proto,i);var s=base_options_pb;r.object.extend(proto,s),r.exportSymbol("proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions",null,n),proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.displayName="proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.toObject=function(e){return proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.toObject(e,this)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.toObject=function(e,t){var r,n={baseOptions:(r=t.getBaseOptions())&&s.BaseOptions.toObject(e,r),classifierOptions:(r=t.getClassifierOptions())&&i.ClassifierOptions.toObject(e,r)};return e&&(n.$jspbMessageInstance=t),n}),proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions;return proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.deserializeBinaryFromReader(n,r)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=new s.BaseOptions;t.readMessage(r,s.BaseOptions.deserializeBinaryFromReader),e.setBaseOptions(r);break;case 2:r=new i.ClassifierOptions,t.readMessage(r,i.ClassifierOptions.deserializeBinaryFromReader),e.setClassifierOptions(r);break;default:t.skipField()}return e},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getBaseOptions())&&t.writeMessage(1,r,s.BaseOptions.serializeBinaryToWriter),null!=(r=e.getClassifierOptions())&&t.writeMessage(2,r,i.ClassifierOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.ext=new t.ExtensionFieldInfo(456383383,{ext:0},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.toObject,0),a.CalculatorOptions.extensionsBinary[456383383]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.deserializeBinaryFromReader,!1),a.CalculatorOptions.extensions[456383383]=proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.ext,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.getBaseOptions=function(){return t.Message.getWrapperField(this,s.BaseOptions,1)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.setBaseOptions=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.hasBaseOptions=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.getClassifierOptions=function(){return t.Message.getWrapperField(this,i.ClassifierOptions,2)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.setClassifierOptions=function(e){return t.Message.setWrapperField(this,2,e)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.clearClassifierOptions=function(){return this.setClassifierOptions(void 0)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.hasClassifierOptions=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.ext=new t.ExtensionFieldInfo(456383383,{ext:0},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.toObject,0),a.CalculatorOptions.extensionsBinary[456383383]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.deserializeBinaryFromReader,!1),a.CalculatorOptions.extensions[456383383]=proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.ext,r.object.extend(e,proto.mediapipe.tasks.vision.image_classifier.proto)}(image_classifier_graph_options_pb);var image_classifier_options={};Object.defineProperty(image_classifier_options,"__esModule",{value:!0});var image_classifier_result={};Object.defineProperty(image_classifier_result,"__esModule",{value:!0}),function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=commonjsGlobal&&commonjsGlobal.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.ImageClassifier=void 0;const n=calculator_pb,o=calculator_options_pb,a=classifications_pb,i=base_options_pb,s=image_classifier_graph_options_pb,p=classifier_options,l=classifier_result,u=vision_task_runner,d="input_image",c="norm_rect",g="classifications";r(image_classifier_options,e),r(image_classifier_result,e);class h extends u.VisionTaskRunner{static createFromOptions(e,t){return u.VisionTaskRunner.createVisionInstance(h,e,t)}static createFromModelBuffer(e,t){return u.VisionTaskRunner.createVisionInstance(h,e,{baseOptions:{modelAssetBuffer:t}})}static createFromModelPath(e,t){return u.VisionTaskRunner.createVisionInstance(h,e,{baseOptions:{modelAssetPath:t}})}constructor(e,t){super(new u.VisionGraphRunner(e,t),d,c,!0),this.classificationResult={classifications:[]},this.options=new s.ImageClassifierGraphOptions,this.options.setBaseOptions(new i.BaseOptions)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(e){this.options.setBaseOptions(e)}setOptions(e){return this.options.setClassifierOptions((0,p.convertClassifierOptionsToProto)(e,this.options.getClassifierOptions())),this.applyOptions(e)}classify(e,t){return this.classificationResult={classifications:[]},this.processImageData(e,t),this.classificationResult}classifyForVideo(e,t,r){return this.classificationResult={classifications:[]},this.processVideoData(e,r,t),this.classificationResult}refreshGraph(){const e=new n.CalculatorGraphConfig;e.addInputStream(d),e.addInputStream(c),e.addOutputStream(g);const t=new o.CalculatorOptions;t.setExtension(s.ImageClassifierGraphOptions.ext,this.options);const r=new n.CalculatorGraphConfig.Node;r.setCalculator("mediapipe.tasks.vision.image_classifier.ImageClassifierGraph"),r.addInputStream("IMAGE:"+d),r.addInputStream("NORM_RECT:"+c),r.addOutputStream("CLASSIFICATIONS:"+g),r.setOptions(t),e.addNode(r),this.graphRunner.attachProtoListener(g,((e,t)=>{this.classificationResult=(0,l.convertFromClassificationResultProto)(a.ClassificationResult.deserializeBinary(e)),this.setLatestOutputTimestamp(t)})),this.graphRunner.attachEmptyPacketListener(g,(e=>{this.setLatestOutputTimestamp(e)}));const i=e.serializeBinary();this.setGraph(new Uint8Array(i),!0)}}e.ImageClassifier=h}(image_classifier);var image_embedder={},embeddings_pb={};!function(e){var t=googleProtobuf,r=t,n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==n&&n||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.mediapipe.tasks.components.containers.proto.Embedding",null,n),r.exportSymbol("proto.mediapipe.tasks.components.containers.proto.Embedding.EmbeddingCase",null,n),r.exportSymbol("proto.mediapipe.tasks.components.containers.proto.EmbeddingResult",null,n),r.exportSymbol("proto.mediapipe.tasks.components.containers.proto.FloatEmbedding",null,n),r.exportSymbol("proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding",null,n),proto.mediapipe.tasks.components.containers.proto.FloatEmbedding=function(e){t.Message.initialize(this,e,0,-1,proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.repeatedFields_,null)},r.inherits(proto.mediapipe.tasks.components.containers.proto.FloatEmbedding,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.displayName="proto.mediapipe.tasks.components.containers.proto.FloatEmbedding"),proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.displayName="proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding"),proto.mediapipe.tasks.components.containers.proto.Embedding=function(e){t.Message.initialize(this,e,0,-1,null,proto.mediapipe.tasks.components.containers.proto.Embedding.oneofGroups_)},r.inherits(proto.mediapipe.tasks.components.containers.proto.Embedding,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.containers.proto.Embedding.displayName="proto.mediapipe.tasks.components.containers.proto.Embedding"),proto.mediapipe.tasks.components.containers.proto.EmbeddingResult=function(e){t.Message.initialize(this,e,0,-1,proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.repeatedFields_,null)},r.inherits(proto.mediapipe.tasks.components.containers.proto.EmbeddingResult,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.displayName="proto.mediapipe.tasks.components.containers.proto.EmbeddingResult"),proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.prototype.toObject=function(e){return proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.toObject(e,this)},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.toObject=function(e,r){var n,o={valuesList:null==(n=t.Message.getRepeatedFloatingPointField(r,1))?void 0:n};return e&&(o.$jspbMessageInstance=r),o}),proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.tasks.components.containers.proto.FloatEmbedding;return proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.deserializeBinaryFromReader(n,r)},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber())for(var r=t.isDelimited()?t.readPackedFloat():[t.readFloat()],n=0;n<r.length;n++)e.addValues(r[n]);else t.skipField();return e},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.serializeBinaryToWriter=function(e,t){var r;(r=e.getValuesList()).length>0&&t.writePackedFloat(1,r)},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.prototype.getValuesList=function(){return t.Message.getRepeatedFloatingPointField(this,1)},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.prototype.setValuesList=function(e){return t.Message.setField(this,1,e||[])},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.prototype.addValues=function(e,r){return t.Message.addToRepeatedField(this,1,e,r)},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.prototype.clearValuesList=function(){return this.setValuesList([])},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.toObject=function(e){return proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.toObject(e,this)},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.toObject=function(e,t){var r={values:t.getValues_asB64()};return e&&(r.$jspbMessageInstance=t),r}),proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding;return proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.deserializeBinaryFromReader(n,r)},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var r=t.readBytes();e.setValues(r)}else t.skipField();return e},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.serializeBinaryToWriter=function(e,r){var n;null!=(n=t.Message.getField(e,1))&&r.writeBytes(1,n)},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.getValues=function(){return t.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.getValues_asB64=function(){return t.Message.bytesAsB64(this.getValues())},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.getValues_asU8=function(){return t.Message.bytesAsU8(this.getValues())},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.setValues=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.clearValues=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.hasValues=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.components.containers.proto.Embedding.oneofGroups_=[[1,2]],proto.mediapipe.tasks.components.containers.proto.Embedding.EmbeddingCase={EMBEDDING_NOT_SET:0,FLOAT_EMBEDDING:1,QUANTIZED_EMBEDDING:2},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.getEmbeddingCase=function(){return t.Message.computeOneofCase(this,proto.mediapipe.tasks.components.containers.proto.Embedding.oneofGroups_[0])},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.toObject=function(e){return proto.mediapipe.tasks.components.containers.proto.Embedding.toObject(e,this)},proto.mediapipe.tasks.components.containers.proto.Embedding.toObject=function(e,r){var n,o={floatEmbedding:(n=r.getFloatEmbedding())&&proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.toObject(e,n),quantizedEmbedding:(n=r.getQuantizedEmbedding())&&proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.toObject(e,n),headIndex:null==(n=t.Message.getField(r,3))?void 0:n,headName:null==(n=t.Message.getField(r,4))?void 0:n};return e&&(o.$jspbMessageInstance=r),o}),proto.mediapipe.tasks.components.containers.proto.Embedding.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.tasks.components.containers.proto.Embedding;return proto.mediapipe.tasks.components.containers.proto.Embedding.deserializeBinaryFromReader(n,r)},proto.mediapipe.tasks.components.containers.proto.Embedding.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=new proto.mediapipe.tasks.components.containers.proto.FloatEmbedding;t.readMessage(r,proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.deserializeBinaryFromReader),e.setFloatEmbedding(r);break;case 2:r=new proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding,t.readMessage(r,proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.deserializeBinaryFromReader),e.setQuantizedEmbedding(r);break;case 3:r=t.readInt32(),e.setHeadIndex(r);break;case 4:r=t.readString(),e.setHeadName(r);break;default:t.skipField()}return e},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.components.containers.proto.Embedding.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.components.containers.proto.Embedding.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=e.getFloatEmbedding())&&r.writeMessage(1,n,proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.serializeBinaryToWriter),null!=(n=e.getQuantizedEmbedding())&&r.writeMessage(2,n,proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.serializeBinaryToWriter),null!=(n=t.Message.getField(e,3))&&r.writeInt32(3,n),null!=(n=t.Message.getField(e,4))&&r.writeString(4,n)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.getFloatEmbedding=function(){return t.Message.getWrapperField(this,proto.mediapipe.tasks.components.containers.proto.FloatEmbedding,1)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.setFloatEmbedding=function(e){return t.Message.setOneofWrapperField(this,1,proto.mediapipe.tasks.components.containers.proto.Embedding.oneofGroups_[0],e)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.clearFloatEmbedding=function(){return this.setFloatEmbedding(void 0)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.hasFloatEmbedding=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.getQuantizedEmbedding=function(){return t.Message.getWrapperField(this,proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding,2)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.setQuantizedEmbedding=function(e){return t.Message.setOneofWrapperField(this,2,proto.mediapipe.tasks.components.containers.proto.Embedding.oneofGroups_[0],e)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.clearQuantizedEmbedding=function(){return this.setQuantizedEmbedding(void 0)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.hasQuantizedEmbedding=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.getHeadIndex=function(){return t.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.setHeadIndex=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.clearHeadIndex=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.hasHeadIndex=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.getHeadName=function(){return t.Message.getFieldWithDefault(this,4,"")},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.setHeadName=function(e){return t.Message.setField(this,4,e)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.clearHeadName=function(){return t.Message.setField(this,4,void 0)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.hasHeadName=function(){return null!=t.Message.getField(this,4)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.toObject=function(e){return proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.toObject(e,this)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.toObject=function(e,r){var n,o={embeddingsList:t.Message.toObjectList(r.getEmbeddingsList(),proto.mediapipe.tasks.components.containers.proto.Embedding.toObject,e),timestampMs:null==(n=t.Message.getField(r,2))?void 0:n};return e&&(o.$jspbMessageInstance=r),o}),proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.tasks.components.containers.proto.EmbeddingResult;return proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.deserializeBinaryFromReader(n,r)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=new proto.mediapipe.tasks.components.containers.proto.Embedding;t.readMessage(r,proto.mediapipe.tasks.components.containers.proto.Embedding.deserializeBinaryFromReader),e.addEmbeddings(r);break;case 2:r=t.readInt64(),e.setTimestampMs(r);break;default:t.skipField()}return e},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.serializeBinaryToWriter=function(e,r){var n=void 0;(n=e.getEmbeddingsList()).length>0&&r.writeRepeatedMessage(1,n,proto.mediapipe.tasks.components.containers.proto.Embedding.serializeBinaryToWriter),null!=(n=t.Message.getField(e,2))&&r.writeInt64(2,n)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.getEmbeddingsList=function(){return t.Message.getRepeatedWrapperField(this,proto.mediapipe.tasks.components.containers.proto.Embedding,1)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.setEmbeddingsList=function(e){return t.Message.setRepeatedWrapperField(this,1,e)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.addEmbeddings=function(e,r){return t.Message.addToRepeatedWrapperField(this,1,e,proto.mediapipe.tasks.components.containers.proto.Embedding,r)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.clearEmbeddingsList=function(){return this.setEmbeddingsList([])},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.getTimestampMs=function(){return t.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.setTimestampMs=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.clearTimestampMs=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.hasTimestampMs=function(){return null!=t.Message.getField(this,2)},r.object.extend(e,proto.mediapipe.tasks.components.containers.proto)}(embeddings_pb);var image_embedder_graph_options_pb={},embedder_options_pb={};!function(e){var t=googleProtobuf,r=t,n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==n&&n||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.mediapipe.tasks.components.processors.proto.EmbedderOptions",null,n),proto.mediapipe.tasks.components.processors.proto.EmbedderOptions=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.components.processors.proto.EmbedderOptions,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.displayName="proto.mediapipe.tasks.components.processors.proto.EmbedderOptions"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.toObject=function(e){return proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.toObject(e,this)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.toObject=function(e,r){var n,o={l2Normalize:null==(n=t.Message.getBooleanField(r,1))?void 0:n,quantize:null==(n=t.Message.getBooleanField(r,2))?void 0:n};return e&&(o.$jspbMessageInstance=r),o}),proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.tasks.components.processors.proto.EmbedderOptions;return proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.deserializeBinaryFromReader(n,r)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readBool();e.setL2Normalize(r);break;case 2:r=t.readBool(),e.setQuantize(r);break;default:t.skipField()}return e},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=t.Message.getField(e,1))&&r.writeBool(1,n),null!=(n=t.Message.getField(e,2))&&r.writeBool(2,n)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.getL2Normalize=function(){return t.Message.getBooleanFieldWithDefault(this,1,!1)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.setL2Normalize=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.clearL2Normalize=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.hasL2Normalize=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.getQuantize=function(){return t.Message.getBooleanFieldWithDefault(this,2,!1)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.setQuantize=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.clearQuantize=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.hasQuantize=function(){return null!=t.Message.getField(this,2)},r.object.extend(e,proto.mediapipe.tasks.components.processors.proto)}(embedder_options_pb),function(e){var t=googleProtobuf,r=t,n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==n&&n||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),o=calculator_pb;r.object.extend(proto,o);var a=calculator_options_pb;r.object.extend(proto,a);var i=embedder_options_pb;r.object.extend(proto,i);var s=base_options_pb;r.object.extend(proto,s),r.exportSymbol("proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions",null,n),proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.displayName="proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.toObject=function(e){return proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.toObject(e,this)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.toObject=function(e,t){var r,n={baseOptions:(r=t.getBaseOptions())&&s.BaseOptions.toObject(e,r),embedderOptions:(r=t.getEmbedderOptions())&&i.EmbedderOptions.toObject(e,r)};return e&&(n.$jspbMessageInstance=t),n}),proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions;return proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.deserializeBinaryFromReader(n,r)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=new s.BaseOptions;t.readMessage(r,s.BaseOptions.deserializeBinaryFromReader),e.setBaseOptions(r);break;case 2:r=new i.EmbedderOptions,t.readMessage(r,i.EmbedderOptions.deserializeBinaryFromReader),e.setEmbedderOptions(r);break;default:t.skipField()}return e},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getBaseOptions())&&t.writeMessage(1,r,s.BaseOptions.serializeBinaryToWriter),null!=(r=e.getEmbedderOptions())&&t.writeMessage(2,r,i.EmbedderOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.ext=new t.ExtensionFieldInfo(476348187,{ext:0},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.toObject,0),a.CalculatorOptions.extensionsBinary[476348187]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.deserializeBinaryFromReader,!1),a.CalculatorOptions.extensions[476348187]=proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.ext,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.getBaseOptions=function(){return t.Message.getWrapperField(this,s.BaseOptions,1)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.setBaseOptions=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.hasBaseOptions=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.getEmbedderOptions=function(){return t.Message.getWrapperField(this,i.EmbedderOptions,2)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.setEmbedderOptions=function(e){return t.Message.setWrapperField(this,2,e)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.clearEmbedderOptions=function(){return this.setEmbedderOptions(void 0)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.hasEmbedderOptions=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.ext=new t.ExtensionFieldInfo(476348187,{ext:0},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.toObject,0),a.CalculatorOptions.extensionsBinary[476348187]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.deserializeBinaryFromReader,!1),a.CalculatorOptions.extensions[476348187]=proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.ext,r.object.extend(e,proto.mediapipe.tasks.vision.image_embedder.proto)}(image_embedder_graph_options_pb);var embedder_options={};Object.defineProperty(embedder_options,"__esModule",{value:!0}),embedder_options.convertEmbedderOptionsToProto=void 0;const embedder_options_pb_1=embedder_options_pb;function convertEmbedderOptionsToProto(e,t){const r=t?t.clone():new embedder_options_pb_1.EmbedderOptions;return void 0!==e.l2Normalize?r.setL2Normalize(e.l2Normalize):"l2Normalize"in e&&r.clearL2Normalize(),void 0!==e.quantize?r.setQuantize(e.quantize):"quantize"in e&&r.clearQuantize(),r}embedder_options.convertEmbedderOptionsToProto=convertEmbedderOptionsToProto;var embedder_result={};Object.defineProperty(embedder_result,"__esModule",{value:!0}),embedder_result.convertFromEmbeddingResultProto=void 0;const DEFAULT_INDEX=-1;function convertFromEmbeddingsProto(e){var t,r,n,o;const a={headIndex:null!==(t=e.getHeadIndex())&&void 0!==t?t:DEFAULT_INDEX,headName:null!==(r=e.getHeadName())&&void 0!==r?r:""};if(e.hasFloatEmbedding())a.floatEmbedding=e.getFloatEmbedding().getValuesList();else{const t=null!==(o=null===(n=e.getQuantizedEmbedding())||void 0===n?void 0:n.getValues())&&void 0!==o?o:"";a.quantizedEmbedding="string"==typeof t?Uint8Array.from(atob(t),(e=>e.charCodeAt(0))):t}return a}function convertFromEmbeddingResultProto(e){return{embeddings:e.getEmbeddingsList().map((e=>convertFromEmbeddingsProto(e))),timestampMs:e.getTimestampMs()}}embedder_result.convertFromEmbeddingResultProto=convertFromEmbeddingResultProto;var cosine_similarity={};function computeCosineSimilarity(e,t){if(e.floatEmbedding&&t.floatEmbedding)return compute(e.floatEmbedding,t.floatEmbedding);if(e.quantizedEmbedding&&t.quantizedEmbedding)return compute(convertToBytes(e.quantizedEmbedding),convertToBytes(t.quantizedEmbedding));throw new Error("Cannot compute cosine similarity between quantized and float embeddings.")}function convertToBytes(e){return Array.from(e,(e=>e>127?e-256:e))}function compute(e,t){if(e.length!==t.length)throw new Error(`Cannot compute cosine similarity between embeddings of different sizes (${e.length} vs. ${t.length}).`);let r=0,n=0,o=0;for(let a=0;a<e.length;a++)r+=e[a]*t[a],n+=e[a]*e[a],o+=t[a]*t[a];if(n<=0||o<=0)throw new Error("Cannot compute cosine similarity on embedding with 0 norm.");return r/Math.sqrt(n*o)}Object.defineProperty(cosine_similarity,"__esModule",{value:!0}),cosine_similarity.computeCosineSimilarity=void 0,cosine_similarity.computeCosineSimilarity=computeCosineSimilarity;var image_embedder_options={};Object.defineProperty(image_embedder_options,"__esModule",{value:!0});var image_embedder_result={};Object.defineProperty(image_embedder_result,"__esModule",{value:!0}),function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=commonjsGlobal&&commonjsGlobal.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.ImageEmbedder=void 0;const n=calculator_pb,o=calculator_options_pb,a=embeddings_pb,i=base_options_pb,s=image_embedder_graph_options_pb,p=embedder_options,l=embedder_result,u=cosine_similarity,d=vision_task_runner,c="image_in",g="norm_rect",h="embeddings_out";r(image_embedder_options,e),r(image_embedder_result,e);class f extends d.VisionTaskRunner{static createFromOptions(e,t){return d.VisionTaskRunner.createVisionInstance(f,e,t)}static createFromModelBuffer(e,t){return d.VisionTaskRunner.createVisionInstance(f,e,{baseOptions:{modelAssetBuffer:t}})}static createFromModelPath(e,t){return d.VisionTaskRunner.createVisionInstance(f,e,{baseOptions:{modelAssetPath:t}})}constructor(e,t){super(new d.VisionGraphRunner(e,t),c,g,!0),this.options=new s.ImageEmbedderGraphOptions,this.embeddings={embeddings:[]},this.options.setBaseOptions(new i.BaseOptions)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(e){this.options.setBaseOptions(e)}setOptions(e){return this.options.setEmbedderOptions((0,p.convertEmbedderOptionsToProto)(e,this.options.getEmbedderOptions())),this.applyOptions(e)}embed(e,t){return this.processImageData(e,t),this.embeddings}embedForVideo(e,t,r){return this.processVideoData(e,r,t),this.embeddings}static cosineSimilarity(e,t){return(0,u.computeCosineSimilarity)(e,t)}addJsImageEmdedding(e){const t=a.EmbeddingResult.deserializeBinary(e);this.embeddings=(0,l.convertFromEmbeddingResultProto)(t)}refreshGraph(){const e=new n.CalculatorGraphConfig;e.addInputStream(c),e.addInputStream(g),e.addOutputStream(h);const t=new o.CalculatorOptions;t.setExtension(s.ImageEmbedderGraphOptions.ext,this.options);const r=new n.CalculatorGraphConfig.Node;r.setCalculator("mediapipe.tasks.vision.image_embedder.ImageEmbedderGraph"),r.addInputStream("IMAGE:"+c),r.addInputStream("NORM_RECT:"+g),r.addOutputStream("EMBEDDINGS:"+h),r.setOptions(t),e.addNode(r),this.graphRunner.attachProtoListener(h,((e,t)=>{this.addJsImageEmdedding(e),this.setLatestOutputTimestamp(t)})),this.graphRunner.attachEmptyPacketListener(h,(e=>{this.setLatestOutputTimestamp(e)}));const a=e.serializeBinary();this.setGraph(new Uint8Array(a),!0)}}e.ImageEmbedder=f}(image_embedder);var image_segmenter={},tensors_to_segmentation_calculator_pb={},segmenter_options_pb={};!function(e){var t=googleProtobuf,r=t,n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==n&&n||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions",null,n),r.exportSymbol("proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.Activation",null,n),r.exportSymbol("proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.OutputType",null,n),proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.displayName="proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.toObject=function(e){return proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.toObject(e,this)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.toObject=function(e,r){var n,o={outputType:null==(n=t.Message.getField(r,1))?void 0:n,activation:t.Message.getFieldWithDefault(r,2,0)};return e&&(o.$jspbMessageInstance=r),o}),proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions;return proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.deserializeBinaryFromReader(n,r)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readEnum();e.setOutputType(r);break;case 2:r=t.readEnum(),e.setActivation(r);break;default:t.skipField()}return e},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=t.Message.getField(e,1))&&r.writeEnum(1,n),null!=(n=t.Message.getField(e,2))&&r.writeEnum(2,n)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.OutputType={UNSPECIFIED:0,CATEGORY_MASK:1,CONFIDENCE_MASK:2},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.Activation={NONE:0,SIGMOID:1,SOFTMAX:2},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.getOutputType=function(){return t.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.setOutputType=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.clearOutputType=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.hasOutputType=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.getActivation=function(){return t.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.setActivation=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.clearActivation=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.hasActivation=function(){return null!=t.Message.getField(this,2)},r.object.extend(e,proto.mediapipe.tasks.vision.image_segmenter.proto)}(segmenter_options_pb);var label_map_pb={};!function(e){var t=googleProtobuf,r=t,n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==n&&n||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.mediapipe.LabelMapItem",null,n),proto.mediapipe.LabelMapItem=function(e){t.Message.initialize(this,e,0,-1,proto.mediapipe.LabelMapItem.repeatedFields_,null)},r.inherits(proto.mediapipe.LabelMapItem,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.LabelMapItem.displayName="proto.mediapipe.LabelMapItem"),proto.mediapipe.LabelMapItem.repeatedFields_=[3],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LabelMapItem.prototype.toObject=function(e){return proto.mediapipe.LabelMapItem.toObject(e,this)},proto.mediapipe.LabelMapItem.toObject=function(e,r){var n,o={name:null==(n=t.Message.getField(r,1))?void 0:n,displayName:null==(n=t.Message.getField(r,2))?void 0:n,childNameList:null==(n=t.Message.getRepeatedField(r,3))?void 0:n};return e&&(o.$jspbMessageInstance=r),o}),proto.mediapipe.LabelMapItem.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.LabelMapItem;return proto.mediapipe.LabelMapItem.deserializeBinaryFromReader(n,r)},proto.mediapipe.LabelMapItem.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readString();e.setName(r);break;case 2:r=t.readString(),e.setDisplayName(r);break;case 3:r=t.readString(),e.addChildName(r);break;default:t.skipField()}return e},proto.mediapipe.LabelMapItem.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.LabelMapItem.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.LabelMapItem.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=t.Message.getField(e,1))&&r.writeString(1,n),null!=(n=t.Message.getField(e,2))&&r.writeString(2,n),(n=e.getChildNameList()).length>0&&r.writeRepeatedString(3,n)},proto.mediapipe.LabelMapItem.prototype.getName=function(){return t.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.LabelMapItem.prototype.setName=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.LabelMapItem.prototype.clearName=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.LabelMapItem.prototype.hasName=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.LabelMapItem.prototype.getDisplayName=function(){return t.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.LabelMapItem.prototype.setDisplayName=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.LabelMapItem.prototype.clearDisplayName=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.LabelMapItem.prototype.hasDisplayName=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.LabelMapItem.prototype.getChildNameList=function(){return t.Message.getRepeatedField(this,3)},proto.mediapipe.LabelMapItem.prototype.setChildNameList=function(e){return t.Message.setField(this,3,e||[])},proto.mediapipe.LabelMapItem.prototype.addChildName=function(e,r){return t.Message.addToRepeatedField(this,3,e,r)},proto.mediapipe.LabelMapItem.prototype.clearChildNameList=function(){return this.setChildNameList([])},r.object.extend(e,proto.mediapipe)}(label_map_pb),function(e){var t=googleProtobuf,r=t,n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==n&&n||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),o=calculator_options_pb;r.object.extend(proto,o);var a=segmenter_options_pb;r.object.extend(proto,a);var i=label_map_pb;r.object.extend(proto,i),r.exportSymbol("proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions",null,n),proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.displayName="proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.toObject=function(e){return proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.toObject(e,this)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.toObject=function(e,t){var r,n={segmenterOptions:(r=t.getSegmenterOptions())&&a.SegmenterOptions.toObject(e,r),labelItemsMap:(r=t.getLabelItemsMap())?r.toObject(e,proto.mediapipe.LabelMapItem.toObject):[]};return e&&(n.$jspbMessageInstance=t),n}),proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions;return proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.deserializeBinaryFromReader(n,r)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.deserializeBinaryFromReader=function(e,r){for(;r.nextField()&&!r.isEndGroup();)switch(r.getFieldNumber()){case 1:var n=new a.SegmenterOptions;r.readMessage(n,a.SegmenterOptions.deserializeBinaryFromReader),e.setSegmenterOptions(n);break;case 2:n=e.getLabelItemsMap(),r.readMessage(n,(function(e,r){t.Map.deserializeBinary(e,r,t.BinaryReader.prototype.readInt64,t.BinaryReader.prototype.readMessage,proto.mediapipe.LabelMapItem.deserializeBinaryFromReader,0,new proto.mediapipe.LabelMapItem)}));break;default:r.skipField()}return e},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=e.getSegmenterOptions())&&r.writeMessage(1,n,a.SegmenterOptions.serializeBinaryToWriter),(n=e.getLabelItemsMap(!0))&&n.getLength()>0&&n.serializeBinary(2,r,t.BinaryWriter.prototype.writeInt64,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.LabelMapItem.serializeBinaryToWriter)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.ext=new t.ExtensionFieldInfo(458105876,{ext:0},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.toObject,0),o.CalculatorOptions.extensionsBinary[458105876]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.serializeBinaryToWriter,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[458105876]=proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.ext,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.getSegmenterOptions=function(){return t.Message.getWrapperField(this,a.SegmenterOptions,1)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.setSegmenterOptions=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.clearSegmenterOptions=function(){return this.setSegmenterOptions(void 0)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.hasSegmenterOptions=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.getLabelItemsMap=function(e){return t.Message.getMapField(this,2,e,proto.mediapipe.LabelMapItem)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.clearLabelItemsMap=function(){return this.getLabelItemsMap().clear(),this},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.ext=new t.ExtensionFieldInfo(458105876,{ext:0},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.toObject,0),o.CalculatorOptions.extensionsBinary[458105876]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.serializeBinaryToWriter,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[458105876]=proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.ext,r.object.extend(e,proto.mediapipe.tasks)}(tensors_to_segmentation_calculator_pb);var image_segmenter_graph_options_pb={};!function(e){var t=googleProtobuf,r=t,n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==n&&n||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),o=calculator_pb;r.object.extend(proto,o);var a=calculator_options_pb;r.object.extend(proto,a);var i=base_options_pb;r.object.extend(proto,i);var s=segmenter_options_pb;r.object.extend(proto,s),r.exportSymbol("proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions",null,n),proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.displayName="proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.toObject=function(e){return proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.toObject(e,this)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.toObject=function(e,r){var n,o={baseOptions:(n=r.getBaseOptions())&&i.BaseOptions.toObject(e,n),displayNamesLocale:t.Message.getFieldWithDefault(r,2,"en"),segmenterOptions:(n=r.getSegmenterOptions())&&s.SegmenterOptions.toObject(e,n)};return e&&(o.$jspbMessageInstance=r),o}),proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions;return proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.deserializeBinaryFromReader(n,r)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=new i.BaseOptions;t.readMessage(r,i.BaseOptions.deserializeBinaryFromReader),e.setBaseOptions(r);break;case 2:r=t.readString(),e.setDisplayNamesLocale(r);break;case 3:r=new s.SegmenterOptions,t.readMessage(r,s.SegmenterOptions.deserializeBinaryFromReader),e.setSegmenterOptions(r);break;default:t.skipField()}return e},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=e.getBaseOptions())&&r.writeMessage(1,n,i.BaseOptions.serializeBinaryToWriter),null!=(n=t.Message.getField(e,2))&&r.writeString(2,n),null!=(n=e.getSegmenterOptions())&&r.writeMessage(3,n,s.SegmenterOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.ext=new t.ExtensionFieldInfo(458105758,{ext:0},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.toObject,0),a.CalculatorOptions.extensionsBinary[458105758]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.deserializeBinaryFromReader,!1),a.CalculatorOptions.extensions[458105758]=proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.ext,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.getBaseOptions=function(){return t.Message.getWrapperField(this,i.BaseOptions,1)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.setBaseOptions=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.hasBaseOptions=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.getDisplayNamesLocale=function(){return t.Message.getFieldWithDefault(this,2,"en")},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.setDisplayNamesLocale=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.clearDisplayNamesLocale=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.hasDisplayNamesLocale=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.getSegmenterOptions=function(){return t.Message.getWrapperField(this,s.SegmenterOptions,3)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.setSegmenterOptions=function(e){return t.Message.setWrapperField(this,3,e)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.clearSegmenterOptions=function(){return this.setSegmenterOptions(void 0)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.hasSegmenterOptions=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.ext=new t.ExtensionFieldInfo(458105758,{ext:0},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.toObject,0),a.CalculatorOptions.extensionsBinary[458105758]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.deserializeBinaryFromReader,!1),a.CalculatorOptions.extensions[458105758]=proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.ext,r.object.extend(e,proto.mediapipe.tasks.vision.image_segmenter.proto)}(image_segmenter_graph_options_pb);var image_segmenter_result={};Object.defineProperty(image_segmenter_result,"__esModule",{value:!0}),image_segmenter_result.ImageSegmenterResult=void 0;class ImageSegmenterResult{constructor(e,t,r){this.confidenceMasks=e,this.categoryMask=t,this.qualityScores=r}close(){var e,t;null===(e=this.confidenceMasks)||void 0===e||e.forEach((e=>{e.close()})),null===(t=this.categoryMask)||void 0===t||t.close()}}image_segmenter_result.ImageSegmenterResult=ImageSegmenterResult;var image_segmenter_options={};Object.defineProperty(image_segmenter_options,"__esModule",{value:!0}),function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=commonjsGlobal&&commonjsGlobal.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.ImageSegmenter=void 0;const n=calculator_pb,o=calculator_options_pb,a=base_options_pb,i=tensors_to_segmentation_calculator_pb,s=image_segmenter_graph_options_pb,p=segmenter_options_pb,l=vision_task_runner,u=image_segmenter_result;r(image_segmenter_options,e),r(image_segmenter_result,e);const d="image_in",c="norm_rect",g="confidence_masks",h="category_mask",f="quality_scores",m="mediapipe.tasks.TensorsToSegmentationCalculator";class y extends l.VisionTaskRunner{static createFromOptions(e,t){return l.VisionTaskRunner.createVisionInstance(y,e,t)}static createFromModelBuffer(e,t){return l.VisionTaskRunner.createVisionInstance(y,e,{baseOptions:{modelAssetBuffer:t}})}static createFromModelPath(e,t){return l.VisionTaskRunner.createVisionInstance(y,e,{baseOptions:{modelAssetPath:t}})}constructor(e,t){super(new l.VisionGraphRunner(e,t),d,c,!1),this.labels=[],this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.options=new s.ImageSegmenterGraphOptions,this.segmenterOptions=new p.SegmenterOptions,this.options.setSegmenterOptions(this.segmenterOptions),this.options.setBaseOptions(new a.BaseOptions)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(e){this.options.setBaseOptions(e)}setOptions(e){var t,r;return void 0!==e.displayNamesLocale?this.options.setDisplayNamesLocale(e.displayNamesLocale):"displayNamesLocale"in e&&this.options.clearDisplayNamesLocale(),"outputCategoryMask"in e&&(this.outputCategoryMask=null!==(t=e.outputCategoryMask)&&void 0!==t&&t),"outputConfidenceMasks"in e&&(this.outputConfidenceMasks=null===(r=e.outputConfidenceMasks)||void 0===r||r),super.applyOptions(e)}onGraphRefreshed(){this.populateLabels()}populateLabels(){var e,t,r;const n=this.getCalculatorGraphConfig().getNodeList().filter((e=>e.getName().includes(m)));if(this.labels=[],n.length>1)throw new Error(`The graph has more than one ${m}.`);1===n.length&&(null!==(r=null===(t=null===(e=n[0].getOptions())||void 0===e?void 0:e.getExtension(i.TensorsToSegmentationCalculatorOptions.ext))||void 0===t?void 0:t.getLabelItemsMap())&&void 0!==r?r:new Map).forEach(((e,t)=>{this.labels[Number(t)]=e.getName()}))}segment(e,t,r){const n="function"!=typeof t?t:{};return this.userCallback="function"==typeof t?t:r,this.reset(),this.processImageData(e,n),this.processResults()}segmentForVideo(e,t,r,n){const o="function"!=typeof r?r:{};return this.userCallback="function"==typeof r?r:n,this.reset(),this.processVideoData(e,o,t),this.processResults()}getLabels(){return this.labels}reset(){this.categoryMask=void 0,this.confidenceMasks=void 0,this.qualityScores=void 0}processResults(){try{const e=new u.ImageSegmenterResult(this.confidenceMasks,this.categoryMask,this.qualityScores);if(!this.userCallback)return e;this.userCallback(e)}finally{this.freeKeepaliveStreams()}}refreshGraph(){const e=new n.CalculatorGraphConfig;e.addInputStream(d),e.addInputStream(c);const t=new o.CalculatorOptions;t.setExtension(s.ImageSegmenterGraphOptions.ext,this.options);const r=new n.CalculatorGraphConfig.Node;r.setCalculator("mediapipe.tasks.vision.image_segmenter.ImageSegmenterGraph"),r.addInputStream("IMAGE:"+d),r.addInputStream("NORM_RECT:"+c),r.setOptions(t),e.addNode(r),this.addKeepaliveNode(e),this.outputConfidenceMasks&&(e.addOutputStream(g),r.addOutputStream("CONFIDENCE_MASKS:"+g),this.keepStreamAlive(g),this.graphRunner.attachImageVectorListener(g,((e,t)=>{this.confidenceMasks=e.map((e=>this.convertToMPMask(e,!this.userCallback))),this.setLatestOutputTimestamp(t)})),this.graphRunner.attachEmptyPacketListener(g,(e=>{this.confidenceMasks=[],this.setLatestOutputTimestamp(e)}))),this.outputCategoryMask&&(e.addOutputStream(h),r.addOutputStream("CATEGORY_MASK:"+h),this.keepStreamAlive(h),this.graphRunner.attachImageListener(h,((e,t)=>{this.categoryMask=this.convertToMPMask(e,!this.userCallback),this.setLatestOutputTimestamp(t)})),this.graphRunner.attachEmptyPacketListener(h,(e=>{this.categoryMask=void 0,this.setLatestOutputTimestamp(e)}))),e.addOutputStream(f),r.addOutputStream("QUALITY_SCORES:"+f),this.graphRunner.attachFloatVectorListener(f,((e,t)=>{this.qualityScores=e,this.setLatestOutputTimestamp(t)})),this.graphRunner.attachEmptyPacketListener(f,(e=>{this.categoryMask=void 0,this.setLatestOutputTimestamp(e)}));const a=e.serializeBinary();this.setGraph(new Uint8Array(a),!0)}}e.ImageSegmenter=y}(image_segmenter);var interactive_segmenter={},color_pb={};!function(e){var t=googleProtobuf,r=t,n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==n&&n||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.mediapipe.Color",null,n),r.exportSymbol("proto.mediapipe.ColorMap",null,n),proto.mediapipe.Color=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.Color,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.Color.displayName="proto.mediapipe.Color"),proto.mediapipe.ColorMap=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.ColorMap,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.ColorMap.displayName="proto.mediapipe.ColorMap"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Color.prototype.toObject=function(e){return proto.mediapipe.Color.toObject(e,this)},proto.mediapipe.Color.toObject=function(e,r){var n,o={r:null==(n=t.Message.getField(r,1))?void 0:n,g:null==(n=t.Message.getField(r,2))?void 0:n,b:null==(n=t.Message.getField(r,3))?void 0:n};return e&&(o.$jspbMessageInstance=r),o}),proto.mediapipe.Color.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.Color;return proto.mediapipe.Color.deserializeBinaryFromReader(n,r)},proto.mediapipe.Color.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readInt32();e.setR(r);break;case 2:r=t.readInt32(),e.setG(r);break;case 3:r=t.readInt32(),e.setB(r);break;default:t.skipField()}return e},proto.mediapipe.Color.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.Color.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.Color.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=t.Message.getField(e,1))&&r.writeInt32(1,n),null!=(n=t.Message.getField(e,2))&&r.writeInt32(2,n),null!=(n=t.Message.getField(e,3))&&r.writeInt32(3,n)},proto.mediapipe.Color.prototype.getR=function(){return t.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.Color.prototype.setR=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.Color.prototype.clearR=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.Color.prototype.hasR=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.Color.prototype.getG=function(){return t.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.Color.prototype.setG=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.Color.prototype.clearG=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.Color.prototype.hasG=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.Color.prototype.getB=function(){return t.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.Color.prototype.setB=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.Color.prototype.clearB=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.Color.prototype.hasB=function(){return null!=t.Message.getField(this,3)},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.ColorMap.prototype.toObject=function(e){return proto.mediapipe.ColorMap.toObject(e,this)},proto.mediapipe.ColorMap.toObject=function(e,t){var r,n={labelToColorMap:(r=t.getLabelToColorMap())?r.toObject(e,proto.mediapipe.Color.toObject):[]};return e&&(n.$jspbMessageInstance=t),n}),proto.mediapipe.ColorMap.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.ColorMap;return proto.mediapipe.ColorMap.deserializeBinaryFromReader(n,r)},proto.mediapipe.ColorMap.deserializeBinaryFromReader=function(e,r){for(;r.nextField()&&!r.isEndGroup();)if(1===r.getFieldNumber()){var n=e.getLabelToColorMap();r.readMessage(n,(function(e,r){t.Map.deserializeBinary(e,r,t.BinaryReader.prototype.readString,t.BinaryReader.prototype.readMessage,proto.mediapipe.Color.deserializeBinaryFromReader,"",new proto.mediapipe.Color)}))}else r.skipField();return e},proto.mediapipe.ColorMap.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.ColorMap.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.ColorMap.serializeBinaryToWriter=function(e,r){var n=void 0;(n=e.getLabelToColorMap(!0))&&n.getLength()>0&&n.serializeBinary(1,r,t.BinaryWriter.prototype.writeString,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.Color.serializeBinaryToWriter)},proto.mediapipe.ColorMap.prototype.getLabelToColorMap=function(e){return t.Message.getMapField(this,1,e,proto.mediapipe.Color)},proto.mediapipe.ColorMap.prototype.clearLabelToColorMap=function(){return this.getLabelToColorMap().clear(),this},r.object.extend(e,proto.mediapipe)}(color_pb);var render_data_pb={};!function(e){var t=googleProtobuf,r=t,n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==n&&n||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),o=color_pb;r.object.extend(proto,o),r.exportSymbol("proto.mediapipe.RenderAnnotation",null,n),r.exportSymbol("proto.mediapipe.RenderAnnotation.Arrow",null,n),r.exportSymbol("proto.mediapipe.RenderAnnotation.DataCase",null,n),r.exportSymbol("proto.mediapipe.RenderAnnotation.FilledOval",null,n),r.exportSymbol("proto.mediapipe.RenderAnnotation.FilledRectangle",null,n),r.exportSymbol("proto.mediapipe.RenderAnnotation.FilledRoundedRectangle",null,n),r.exportSymbol("proto.mediapipe.RenderAnnotation.GradientLine",null,n),r.exportSymbol("proto.mediapipe.RenderAnnotation.Line",null,n),r.exportSymbol("proto.mediapipe.RenderAnnotation.Line.LineType",null,n),r.exportSymbol("proto.mediapipe.RenderAnnotation.Oval",null,n),r.exportSymbol("proto.mediapipe.RenderAnnotation.Point",null,n),r.exportSymbol("proto.mediapipe.RenderAnnotation.Rectangle",null,n),r.exportSymbol("proto.mediapipe.RenderAnnotation.RoundedRectangle",null,n),r.exportSymbol("proto.mediapipe.RenderAnnotation.Scribble",null,n),r.exportSymbol("proto.mediapipe.RenderAnnotation.Text",null,n),r.exportSymbol("proto.mediapipe.RenderData",null,n),r.exportSymbol("proto.mediapipe.RenderViewport",null,n),proto.mediapipe.RenderData=function(e){t.Message.initialize(this,e,0,-1,proto.mediapipe.RenderData.repeatedFields_,null)},r.inherits(proto.mediapipe.RenderData,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.RenderData.displayName="proto.mediapipe.RenderData"),proto.mediapipe.RenderAnnotation=function(e){t.Message.initialize(this,e,0,-1,null,proto.mediapipe.RenderAnnotation.oneofGroups_)},r.inherits(proto.mediapipe.RenderAnnotation,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.displayName="proto.mediapipe.RenderAnnotation"),proto.mediapipe.RenderAnnotation.Rectangle=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.RenderAnnotation.Rectangle,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Rectangle.displayName="proto.mediapipe.RenderAnnotation.Rectangle"),proto.mediapipe.RenderAnnotation.FilledRectangle=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.RenderAnnotation.FilledRectangle,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.FilledRectangle.displayName="proto.mediapipe.RenderAnnotation.FilledRectangle"),proto.mediapipe.RenderAnnotation.RoundedRectangle=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.RenderAnnotation.RoundedRectangle,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.RoundedRectangle.displayName="proto.mediapipe.RenderAnnotation.RoundedRectangle"),proto.mediapipe.RenderAnnotation.FilledRoundedRectangle=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.RenderAnnotation.FilledRoundedRectangle,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.displayName="proto.mediapipe.RenderAnnotation.FilledRoundedRectangle"),proto.mediapipe.RenderAnnotation.Oval=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.RenderAnnotation.Oval,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Oval.displayName="proto.mediapipe.RenderAnnotation.Oval"),proto.mediapipe.RenderAnnotation.FilledOval=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.RenderAnnotation.FilledOval,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.FilledOval.displayName="proto.mediapipe.RenderAnnotation.FilledOval"),proto.mediapipe.RenderAnnotation.Point=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.RenderAnnotation.Point,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Point.displayName="proto.mediapipe.RenderAnnotation.Point"),proto.mediapipe.RenderAnnotation.Line=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.RenderAnnotation.Line,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Line.displayName="proto.mediapipe.RenderAnnotation.Line"),proto.mediapipe.RenderAnnotation.GradientLine=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.RenderAnnotation.GradientLine,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.GradientLine.displayName="proto.mediapipe.RenderAnnotation.GradientLine"),proto.mediapipe.RenderAnnotation.Scribble=function(e){t.Message.initialize(this,e,0,-1,proto.mediapipe.RenderAnnotation.Scribble.repeatedFields_,null)},r.inherits(proto.mediapipe.RenderAnnotation.Scribble,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Scribble.displayName="proto.mediapipe.RenderAnnotation.Scribble"),proto.mediapipe.RenderAnnotation.Arrow=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.RenderAnnotation.Arrow,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Arrow.displayName="proto.mediapipe.RenderAnnotation.Arrow"),proto.mediapipe.RenderAnnotation.Text=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.RenderAnnotation.Text,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Text.displayName="proto.mediapipe.RenderAnnotation.Text"),proto.mediapipe.RenderViewport=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.RenderViewport,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.RenderViewport.displayName="proto.mediapipe.RenderViewport"),proto.mediapipe.RenderData.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderData.prototype.toObject=function(e){return proto.mediapipe.RenderData.toObject(e,this)},proto.mediapipe.RenderData.toObject=function(e,r){var n,o={renderAnnotationsList:t.Message.toObjectList(r.getRenderAnnotationsList(),proto.mediapipe.RenderAnnotation.toObject,e),sceneClass:null==(n=t.Message.getField(r,2))?void 0:n,sceneViewport:(n=r.getSceneViewport())&&proto.mediapipe.RenderViewport.toObject(e,n)};return e&&(o.$jspbMessageInstance=r),o}),proto.mediapipe.RenderData.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.RenderData;return proto.mediapipe.RenderData.deserializeBinaryFromReader(n,r)},proto.mediapipe.RenderData.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=new proto.mediapipe.RenderAnnotation;t.readMessage(r,proto.mediapipe.RenderAnnotation.deserializeBinaryFromReader),e.addRenderAnnotations(r);break;case 2:r=t.readString(),e.setSceneClass(r);break;case 3:r=new proto.mediapipe.RenderViewport,t.readMessage(r,proto.mediapipe.RenderViewport.deserializeBinaryFromReader),e.setSceneViewport(r);break;default:t.skipField()}return e},proto.mediapipe.RenderData.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.RenderData.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.RenderData.serializeBinaryToWriter=function(e,r){var n=void 0;(n=e.getRenderAnnotationsList()).length>0&&r.writeRepeatedMessage(1,n,proto.mediapipe.RenderAnnotation.serializeBinaryToWriter),null!=(n=t.Message.getField(e,2))&&r.writeString(2,n),null!=(n=e.getSceneViewport())&&r.writeMessage(3,n,proto.mediapipe.RenderViewport.serializeBinaryToWriter)},proto.mediapipe.RenderData.prototype.getRenderAnnotationsList=function(){return t.Message.getRepeatedWrapperField(this,proto.mediapipe.RenderAnnotation,1)},proto.mediapipe.RenderData.prototype.setRenderAnnotationsList=function(e){return t.Message.setRepeatedWrapperField(this,1,e)},proto.mediapipe.RenderData.prototype.addRenderAnnotations=function(e,r){return t.Message.addToRepeatedWrapperField(this,1,e,proto.mediapipe.RenderAnnotation,r)},proto.mediapipe.RenderData.prototype.clearRenderAnnotationsList=function(){return this.setRenderAnnotationsList([])},proto.mediapipe.RenderData.prototype.getSceneClass=function(){return t.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.RenderData.prototype.setSceneClass=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.RenderData.prototype.clearSceneClass=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.RenderData.prototype.hasSceneClass=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.RenderData.prototype.getSceneViewport=function(){return t.Message.getWrapperField(this,proto.mediapipe.RenderViewport,3)},proto.mediapipe.RenderData.prototype.setSceneViewport=function(e){return t.Message.setWrapperField(this,3,e)},proto.mediapipe.RenderData.prototype.clearSceneViewport=function(){return this.setSceneViewport(void 0)},proto.mediapipe.RenderData.prototype.hasSceneViewport=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.RenderAnnotation.oneofGroups_=[[1,2,3,4,5,6,7,8,9,10,14,15]],proto.mediapipe.RenderAnnotation.DataCase={DATA_NOT_SET:0,RECTANGLE:1,FILLED_RECTANGLE:2,OVAL:3,FILLED_OVAL:4,POINT:5,LINE:6,ARROW:7,TEXT:8,ROUNDED_RECTANGLE:9,FILLED_ROUNDED_RECTANGLE:10,GRADIENT_LINE:14,SCRIBBLE:15},proto.mediapipe.RenderAnnotation.prototype.getDataCase=function(){return t.Message.computeOneofCase(this,proto.mediapipe.RenderAnnotation.oneofGroups_[0])},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.prototype.toObject=function(e){return proto.mediapipe.RenderAnnotation.toObject(e,this)},proto.mediapipe.RenderAnnotation.toObject=function(e,r){var n,a={rectangle:(n=r.getRectangle())&&proto.mediapipe.RenderAnnotation.Rectangle.toObject(e,n),filledRectangle:(n=r.getFilledRectangle())&&proto.mediapipe.RenderAnnotation.FilledRectangle.toObject(e,n),oval:(n=r.getOval())&&proto.mediapipe.RenderAnnotation.Oval.toObject(e,n),filledOval:(n=r.getFilledOval())&&proto.mediapipe.RenderAnnotation.FilledOval.toObject(e,n),point:(n=r.getPoint())&&proto.mediapipe.RenderAnnotation.Point.toObject(e,n),line:(n=r.getLine())&&proto.mediapipe.RenderAnnotation.Line.toObject(e,n),arrow:(n=r.getArrow())&&proto.mediapipe.RenderAnnotation.Arrow.toObject(e,n),text:(n=r.getText())&&proto.mediapipe.RenderAnnotation.Text.toObject(e,n),roundedRectangle:(n=r.getRoundedRectangle())&&proto.mediapipe.RenderAnnotation.RoundedRectangle.toObject(e,n),filledRoundedRectangle:(n=r.getFilledRoundedRectangle())&&proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.toObject(e,n),gradientLine:(n=r.getGradientLine())&&proto.mediapipe.RenderAnnotation.GradientLine.toObject(e,n),scribble:(n=r.getScribble())&&proto.mediapipe.RenderAnnotation.Scribble.toObject(e,n),thickness:t.Message.getFloatingPointFieldWithDefault(r,11,1),color:(n=r.getColor())&&o.Color.toObject(e,n),sceneTag:null==(n=t.Message.getField(r,13))?void 0:n};return e&&(a.$jspbMessageInstance=r),a}),proto.mediapipe.RenderAnnotation.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.RenderAnnotation;return proto.mediapipe.RenderAnnotation.deserializeBinaryFromReader(n,r)},proto.mediapipe.RenderAnnotation.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=new proto.mediapipe.RenderAnnotation.Rectangle;t.readMessage(r,proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinaryFromReader),e.setRectangle(r);break;case 2:r=new proto.mediapipe.RenderAnnotation.FilledRectangle,t.readMessage(r,proto.mediapipe.RenderAnnotation.FilledRectangle.deserializeBinaryFromReader),e.setFilledRectangle(r);break;case 3:r=new proto.mediapipe.RenderAnnotation.Oval,t.readMessage(r,proto.mediapipe.RenderAnnotation.Oval.deserializeBinaryFromReader),e.setOval(r);break;case 4:r=new proto.mediapipe.RenderAnnotation.FilledOval,t.readMessage(r,proto.mediapipe.RenderAnnotation.FilledOval.deserializeBinaryFromReader),e.setFilledOval(r);break;case 5:r=new proto.mediapipe.RenderAnnotation.Point,t.readMessage(r,proto.mediapipe.RenderAnnotation.Point.deserializeBinaryFromReader),e.setPoint(r);break;case 6:r=new proto.mediapipe.RenderAnnotation.Line,t.readMessage(r,proto.mediapipe.RenderAnnotation.Line.deserializeBinaryFromReader),e.setLine(r);break;case 7:r=new proto.mediapipe.RenderAnnotation.Arrow,t.readMessage(r,proto.mediapipe.RenderAnnotation.Arrow.deserializeBinaryFromReader),e.setArrow(r);break;case 8:r=new proto.mediapipe.RenderAnnotation.Text,t.readMessage(r,proto.mediapipe.RenderAnnotation.Text.deserializeBinaryFromReader),e.setText(r);break;case 9:r=new proto.mediapipe.RenderAnnotation.RoundedRectangle,t.readMessage(r,proto.mediapipe.RenderAnnotation.RoundedRectangle.deserializeBinaryFromReader),e.setRoundedRectangle(r);break;case 10:r=new proto.mediapipe.RenderAnnotation.FilledRoundedRectangle,t.readMessage(r,proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.deserializeBinaryFromReader),e.setFilledRoundedRectangle(r);break;case 14:r=new proto.mediapipe.RenderAnnotation.GradientLine,t.readMessage(r,proto.mediapipe.RenderAnnotation.GradientLine.deserializeBinaryFromReader),e.setGradientLine(r);break;case 15:r=new proto.mediapipe.RenderAnnotation.Scribble,t.readMessage(r,proto.mediapipe.RenderAnnotation.Scribble.deserializeBinaryFromReader),e.setScribble(r);break;case 11:r=t.readDouble(),e.setThickness(r);break;case 12:r=new o.Color,t.readMessage(r,o.Color.deserializeBinaryFromReader),e.setColor(r);break;case 13:r=t.readString(),e.setSceneTag(r);break;default:t.skipField()}return e},proto.mediapipe.RenderAnnotation.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.RenderAnnotation.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.RenderAnnotation.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=e.getRectangle())&&r.writeMessage(1,n,proto.mediapipe.RenderAnnotation.Rectangle.serializeBinaryToWriter),null!=(n=e.getFilledRectangle())&&r.writeMessage(2,n,proto.mediapipe.RenderAnnotation.FilledRectangle.serializeBinaryToWriter),null!=(n=e.getOval())&&r.writeMessage(3,n,proto.mediapipe.RenderAnnotation.Oval.serializeBinaryToWriter),null!=(n=e.getFilledOval())&&r.writeMessage(4,n,proto.mediapipe.RenderAnnotation.FilledOval.serializeBinaryToWriter),null!=(n=e.getPoint())&&r.writeMessage(5,n,proto.mediapipe.RenderAnnotation.Point.serializeBinaryToWriter),null!=(n=e.getLine())&&r.writeMessage(6,n,proto.mediapipe.RenderAnnotation.Line.serializeBinaryToWriter),null!=(n=e.getArrow())&&r.writeMessage(7,n,proto.mediapipe.RenderAnnotation.Arrow.serializeBinaryToWriter),null!=(n=e.getText())&&r.writeMessage(8,n,proto.mediapipe.RenderAnnotation.Text.serializeBinaryToWriter),null!=(n=e.getRoundedRectangle())&&r.writeMessage(9,n,proto.mediapipe.RenderAnnotation.RoundedRectangle.serializeBinaryToWriter),null!=(n=e.getFilledRoundedRectangle())&&r.writeMessage(10,n,proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.serializeBinaryToWriter),null!=(n=e.getGradientLine())&&r.writeMessage(14,n,proto.mediapipe.RenderAnnotation.GradientLine.serializeBinaryToWriter),null!=(n=e.getScribble())&&r.writeMessage(15,n,proto.mediapipe.RenderAnnotation.Scribble.serializeBinaryToWriter),null!=(n=t.Message.getField(e,11))&&r.writeDouble(11,n),null!=(n=e.getColor())&&r.writeMessage(12,n,o.Color.serializeBinaryToWriter),null!=(n=t.Message.getField(e,13))&&r.writeString(13,n)},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Rectangle.prototype.toObject=function(e){return proto.mediapipe.RenderAnnotation.Rectangle.toObject(e,this)},proto.mediapipe.RenderAnnotation.Rectangle.toObject=function(e,r){var n,o={left:null==(n=t.Message.getOptionalFloatingPointField(r,1))?void 0:n,top:null==(n=t.Message.getOptionalFloatingPointField(r,2))?void 0:n,right:null==(n=t.Message.getOptionalFloatingPointField(r,3))?void 0:n,bottom:null==(n=t.Message.getOptionalFloatingPointField(r,4))?void 0:n,normalized:t.Message.getBooleanFieldWithDefault(r,5,!1),rotation:null==(n=t.Message.getOptionalFloatingPointField(r,6))?void 0:n,topLeftThickness:null==(n=t.Message.getOptionalFloatingPointField(r,7))?void 0:n};return e&&(o.$jspbMessageInstance=r),o}),proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.RenderAnnotation.Rectangle;return proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinaryFromReader(n,r)},proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readDouble();e.setLeft(r);break;case 2:r=t.readDouble(),e.setTop(r);break;case 3:r=t.readDouble(),e.setRight(r);break;case 4:r=t.readDouble(),e.setBottom(r);break;case 5:r=t.readBool(),e.setNormalized(r);break;case 6:r=t.readDouble(),e.setRotation(r);break;case 7:r=t.readDouble(),e.setTopLeftThickness(r);break;default:t.skipField()}return e},proto.mediapipe.RenderAnnotation.Rectangle.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.RenderAnnotation.Rectangle.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.RenderAnnotation.Rectangle.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=t.Message.getField(e,1))&&r.writeDouble(1,n),null!=(n=t.Message.getField(e,2))&&r.writeDouble(2,n),null!=(n=t.Message.getField(e,3))&&r.writeDouble(3,n),null!=(n=t.Message.getField(e,4))&&r.writeDouble(4,n),null!=(n=t.Message.getField(e,5))&&r.writeBool(5,n),null!=(n=t.Message.getField(e,6))&&r.writeDouble(6,n),null!=(n=t.Message.getField(e,7))&&r.writeDouble(7,n)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getLeft=function(){return t.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setLeft=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearLeft=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasLeft=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getTop=function(){return t.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setTop=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearTop=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasTop=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getRight=function(){return t.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setRight=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearRight=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasRight=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getBottom=function(){return t.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setBottom=function(e){return t.Message.setField(this,4,e)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearBottom=function(){return t.Message.setField(this,4,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasBottom=function(){return null!=t.Message.getField(this,4)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getNormalized=function(){return t.Message.getBooleanFieldWithDefault(this,5,!1)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setNormalized=function(e){return t.Message.setField(this,5,e)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearNormalized=function(){return t.Message.setField(this,5,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasNormalized=function(){return null!=t.Message.getField(this,5)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getRotation=function(){return t.Message.getFloatingPointFieldWithDefault(this,6,0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setRotation=function(e){return t.Message.setField(this,6,e)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearRotation=function(){return t.Message.setField(this,6,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasRotation=function(){return null!=t.Message.getField(this,6)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getTopLeftThickness=function(){return t.Message.getFloatingPointFieldWithDefault(this,7,0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setTopLeftThickness=function(e){return t.Message.setField(this,7,e)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearTopLeftThickness=function(){return t.Message.setField(this,7,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasTopLeftThickness=function(){return null!=t.Message.getField(this,7)},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.toObject=function(e){return proto.mediapipe.RenderAnnotation.FilledRectangle.toObject(e,this)},proto.mediapipe.RenderAnnotation.FilledRectangle.toObject=function(e,t){var r,n={rectangle:(r=t.getRectangle())&&proto.mediapipe.RenderAnnotation.Rectangle.toObject(e,r),fillColor:(r=t.getFillColor())&&o.Color.toObject(e,r)};return e&&(n.$jspbMessageInstance=t),n}),proto.mediapipe.RenderAnnotation.FilledRectangle.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.RenderAnnotation.FilledRectangle;return proto.mediapipe.RenderAnnotation.FilledRectangle.deserializeBinaryFromReader(n,r)},proto.mediapipe.RenderAnnotation.FilledRectangle.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=new proto.mediapipe.RenderAnnotation.Rectangle;t.readMessage(r,proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinaryFromReader),e.setRectangle(r);break;case 2:r=new o.Color,t.readMessage(r,o.Color.deserializeBinaryFromReader),e.setFillColor(r);break;default:t.skipField()}return e},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.RenderAnnotation.FilledRectangle.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.RenderAnnotation.FilledRectangle.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getRectangle())&&t.writeMessage(1,r,proto.mediapipe.RenderAnnotation.Rectangle.serializeBinaryToWriter),null!=(r=e.getFillColor())&&t.writeMessage(2,r,o.Color.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.getRectangle=function(){return t.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Rectangle,1)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.setRectangle=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.clearRectangle=function(){return this.setRectangle(void 0)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.hasRectangle=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.getFillColor=function(){return t.Message.getWrapperField(this,o.Color,2)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.setFillColor=function(e){return t.Message.setWrapperField(this,2,e)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.clearFillColor=function(){return this.setFillColor(void 0)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.hasFillColor=function(){return null!=t.Message.getField(this,2)},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.toObject=function(e){return proto.mediapipe.RenderAnnotation.RoundedRectangle.toObject(e,this)},proto.mediapipe.RenderAnnotation.RoundedRectangle.toObject=function(e,r){var n,o={rectangle:(n=r.getRectangle())&&proto.mediapipe.RenderAnnotation.Rectangle.toObject(e,n),cornerRadius:t.Message.getFieldWithDefault(r,2,0),lineType:t.Message.getFieldWithDefault(r,3,4)};return e&&(o.$jspbMessageInstance=r),o}),proto.mediapipe.RenderAnnotation.RoundedRectangle.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.RenderAnnotation.RoundedRectangle;return proto.mediapipe.RenderAnnotation.RoundedRectangle.deserializeBinaryFromReader(n,r)},proto.mediapipe.RenderAnnotation.RoundedRectangle.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=new proto.mediapipe.RenderAnnotation.Rectangle;t.readMessage(r,proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinaryFromReader),e.setRectangle(r);break;case 2:r=t.readInt32(),e.setCornerRadius(r);break;case 3:r=t.readInt32(),e.setLineType(r);break;default:t.skipField()}return e},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.RenderAnnotation.RoundedRectangle.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.RenderAnnotation.RoundedRectangle.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=e.getRectangle())&&r.writeMessage(1,n,proto.mediapipe.RenderAnnotation.Rectangle.serializeBinaryToWriter),null!=(n=t.Message.getField(e,2))&&r.writeInt32(2,n),null!=(n=t.Message.getField(e,3))&&r.writeInt32(3,n)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.getRectangle=function(){return t.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Rectangle,1)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.setRectangle=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.clearRectangle=function(){return this.setRectangle(void 0)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.hasRectangle=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.getCornerRadius=function(){return t.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.setCornerRadius=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.clearCornerRadius=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.hasCornerRadius=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.getLineType=function(){return t.Message.getFieldWithDefault(this,3,4)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.setLineType=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.clearLineType=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.hasLineType=function(){return null!=t.Message.getField(this,3)},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.toObject=function(e){return proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.toObject(e,this)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.toObject=function(e,t){var r,n={roundedRectangle:(r=t.getRoundedRectangle())&&proto.mediapipe.RenderAnnotation.RoundedRectangle.toObject(e,r),fillColor:(r=t.getFillColor())&&o.Color.toObject(e,r)};return e&&(n.$jspbMessageInstance=t),n}),proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.RenderAnnotation.FilledRoundedRectangle;return proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.deserializeBinaryFromReader(n,r)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=new proto.mediapipe.RenderAnnotation.RoundedRectangle;t.readMessage(r,proto.mediapipe.RenderAnnotation.RoundedRectangle.deserializeBinaryFromReader),e.setRoundedRectangle(r);break;case 2:r=new o.Color,t.readMessage(r,o.Color.deserializeBinaryFromReader),e.setFillColor(r);break;default:t.skipField()}return e},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getRoundedRectangle())&&t.writeMessage(1,r,proto.mediapipe.RenderAnnotation.RoundedRectangle.serializeBinaryToWriter),null!=(r=e.getFillColor())&&t.writeMessage(2,r,o.Color.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.getRoundedRectangle=function(){return t.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.RoundedRectangle,1)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.setRoundedRectangle=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.clearRoundedRectangle=function(){return this.setRoundedRectangle(void 0)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.hasRoundedRectangle=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.getFillColor=function(){return t.Message.getWrapperField(this,o.Color,2)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.setFillColor=function(e){return t.Message.setWrapperField(this,2,e)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.clearFillColor=function(){return this.setFillColor(void 0)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.hasFillColor=function(){return null!=t.Message.getField(this,2)},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Oval.prototype.toObject=function(e){return proto.mediapipe.RenderAnnotation.Oval.toObject(e,this)},proto.mediapipe.RenderAnnotation.Oval.toObject=function(e,t){var r,n={rectangle:(r=t.getRectangle())&&proto.mediapipe.RenderAnnotation.Rectangle.toObject(e,r)};return e&&(n.$jspbMessageInstance=t),n}),proto.mediapipe.RenderAnnotation.Oval.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.RenderAnnotation.Oval;return proto.mediapipe.RenderAnnotation.Oval.deserializeBinaryFromReader(n,r)},proto.mediapipe.RenderAnnotation.Oval.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var r=new proto.mediapipe.RenderAnnotation.Rectangle;t.readMessage(r,proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinaryFromReader),e.setRectangle(r)}else t.skipField();return e},proto.mediapipe.RenderAnnotation.Oval.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.RenderAnnotation.Oval.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.RenderAnnotation.Oval.serializeBinaryToWriter=function(e,t){var r;null!=(r=e.getRectangle())&&t.writeMessage(1,r,proto.mediapipe.RenderAnnotation.Rectangle.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.Oval.prototype.getRectangle=function(){return t.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Rectangle,1)},proto.mediapipe.RenderAnnotation.Oval.prototype.setRectangle=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.RenderAnnotation.Oval.prototype.clearRectangle=function(){return this.setRectangle(void 0)},proto.mediapipe.RenderAnnotation.Oval.prototype.hasRectangle=function(){return null!=t.Message.getField(this,1)},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.FilledOval.prototype.toObject=function(e){return proto.mediapipe.RenderAnnotation.FilledOval.toObject(e,this)},proto.mediapipe.RenderAnnotation.FilledOval.toObject=function(e,t){var r,n={oval:(r=t.getOval())&&proto.mediapipe.RenderAnnotation.Oval.toObject(e,r),fillColor:(r=t.getFillColor())&&o.Color.toObject(e,r)};return e&&(n.$jspbMessageInstance=t),n}),proto.mediapipe.RenderAnnotation.FilledOval.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.RenderAnnotation.FilledOval;return proto.mediapipe.RenderAnnotation.FilledOval.deserializeBinaryFromReader(n,r)},proto.mediapipe.RenderAnnotation.FilledOval.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=new proto.mediapipe.RenderAnnotation.Oval;t.readMessage(r,proto.mediapipe.RenderAnnotation.Oval.deserializeBinaryFromReader),e.setOval(r);break;case 2:r=new o.Color,t.readMessage(r,o.Color.deserializeBinaryFromReader),e.setFillColor(r);break;default:t.skipField()}return e},proto.mediapipe.RenderAnnotation.FilledOval.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.RenderAnnotation.FilledOval.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.RenderAnnotation.FilledOval.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getOval())&&t.writeMessage(1,r,proto.mediapipe.RenderAnnotation.Oval.serializeBinaryToWriter),null!=(r=e.getFillColor())&&t.writeMessage(2,r,o.Color.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.getOval=function(){return t.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Oval,1)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.setOval=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.clearOval=function(){return this.setOval(void 0)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.hasOval=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.getFillColor=function(){return t.Message.getWrapperField(this,o.Color,2)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.setFillColor=function(e){return t.Message.setWrapperField(this,2,e)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.clearFillColor=function(){return this.setFillColor(void 0)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.hasFillColor=function(){return null!=t.Message.getField(this,2)},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Point.prototype.toObject=function(e){return proto.mediapipe.RenderAnnotation.Point.toObject(e,this)},proto.mediapipe.RenderAnnotation.Point.toObject=function(e,r){var n,o={x:null==(n=t.Message.getOptionalFloatingPointField(r,1))?void 0:n,y:null==(n=t.Message.getOptionalFloatingPointField(r,2))?void 0:n,normalized:t.Message.getBooleanFieldWithDefault(r,3,!1)};return e&&(o.$jspbMessageInstance=r),o}),proto.mediapipe.RenderAnnotation.Point.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.RenderAnnotation.Point;return proto.mediapipe.RenderAnnotation.Point.deserializeBinaryFromReader(n,r)},proto.mediapipe.RenderAnnotation.Point.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readDouble();e.setX(r);break;case 2:r=t.readDouble(),e.setY(r);break;case 3:r=t.readBool(),e.setNormalized(r);break;default:t.skipField()}return e},proto.mediapipe.RenderAnnotation.Point.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.RenderAnnotation.Point.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.RenderAnnotation.Point.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=t.Message.getField(e,1))&&r.writeDouble(1,n),null!=(n=t.Message.getField(e,2))&&r.writeDouble(2,n),null!=(n=t.Message.getField(e,3))&&r.writeBool(3,n)},proto.mediapipe.RenderAnnotation.Point.prototype.getX=function(){return t.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.RenderAnnotation.Point.prototype.setX=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.RenderAnnotation.Point.prototype.clearX=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.RenderAnnotation.Point.prototype.hasX=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.RenderAnnotation.Point.prototype.getY=function(){return t.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.Point.prototype.setY=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.RenderAnnotation.Point.prototype.clearY=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.Point.prototype.hasY=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.RenderAnnotation.Point.prototype.getNormalized=function(){return t.Message.getBooleanFieldWithDefault(this,3,!1)},proto.mediapipe.RenderAnnotation.Point.prototype.setNormalized=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.RenderAnnotation.Point.prototype.clearNormalized=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.Point.prototype.hasNormalized=function(){return null!=t.Message.getField(this,3)},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Line.prototype.toObject=function(e){return proto.mediapipe.RenderAnnotation.Line.toObject(e,this)},proto.mediapipe.RenderAnnotation.Line.toObject=function(e,r){var n,o={xStart:null==(n=t.Message.getOptionalFloatingPointField(r,1))?void 0:n,yStart:null==(n=t.Message.getOptionalFloatingPointField(r,2))?void 0:n,xEnd:null==(n=t.Message.getOptionalFloatingPointField(r,3))?void 0:n,yEnd:null==(n=t.Message.getOptionalFloatingPointField(r,4))?void 0:n,normalized:t.Message.getBooleanFieldWithDefault(r,5,!1),lineType:t.Message.getFieldWithDefault(r,6,1)};return e&&(o.$jspbMessageInstance=r),o}),proto.mediapipe.RenderAnnotation.Line.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.RenderAnnotation.Line;return proto.mediapipe.RenderAnnotation.Line.deserializeBinaryFromReader(n,r)},proto.mediapipe.RenderAnnotation.Line.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readDouble();e.setXStart(r);break;case 2:r=t.readDouble(),e.setYStart(r);break;case 3:r=t.readDouble(),e.setXEnd(r);break;case 4:r=t.readDouble(),e.setYEnd(r);break;case 5:r=t.readBool(),e.setNormalized(r);break;case 6:r=t.readEnum(),e.setLineType(r);break;default:t.skipField()}return e},proto.mediapipe.RenderAnnotation.Line.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.RenderAnnotation.Line.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.RenderAnnotation.Line.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=t.Message.getField(e,1))&&r.writeDouble(1,n),null!=(n=t.Message.getField(e,2))&&r.writeDouble(2,n),null!=(n=t.Message.getField(e,3))&&r.writeDouble(3,n),null!=(n=t.Message.getField(e,4))&&r.writeDouble(4,n),null!=(n=t.Message.getField(e,5))&&r.writeBool(5,n),null!=(n=t.Message.getField(e,6))&&r.writeEnum(6,n)},proto.mediapipe.RenderAnnotation.Line.LineType={UNKNOWN:0,SOLID:1,DASHED:2},proto.mediapipe.RenderAnnotation.Line.prototype.getXStart=function(){return t.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.RenderAnnotation.Line.prototype.setXStart=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.RenderAnnotation.Line.prototype.clearXStart=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.RenderAnnotation.Line.prototype.hasXStart=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.RenderAnnotation.Line.prototype.getYStart=function(){return t.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.Line.prototype.setYStart=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.RenderAnnotation.Line.prototype.clearYStart=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.Line.prototype.hasYStart=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.RenderAnnotation.Line.prototype.getXEnd=function(){return t.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.RenderAnnotation.Line.prototype.setXEnd=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.RenderAnnotation.Line.prototype.clearXEnd=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.Line.prototype.hasXEnd=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.RenderAnnotation.Line.prototype.getYEnd=function(){return t.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.RenderAnnotation.Line.prototype.setYEnd=function(e){return t.Message.setField(this,4,e)},proto.mediapipe.RenderAnnotation.Line.prototype.clearYEnd=function(){return t.Message.setField(this,4,void 0)},proto.mediapipe.RenderAnnotation.Line.prototype.hasYEnd=function(){return null!=t.Message.getField(this,4)},proto.mediapipe.RenderAnnotation.Line.prototype.getNormalized=function(){return t.Message.getBooleanFieldWithDefault(this,5,!1)},proto.mediapipe.RenderAnnotation.Line.prototype.setNormalized=function(e){return t.Message.setField(this,5,e)},proto.mediapipe.RenderAnnotation.Line.prototype.clearNormalized=function(){return t.Message.setField(this,5,void 0)},proto.mediapipe.RenderAnnotation.Line.prototype.hasNormalized=function(){return null!=t.Message.getField(this,5)},proto.mediapipe.RenderAnnotation.Line.prototype.getLineType=function(){return t.Message.getFieldWithDefault(this,6,1)},proto.mediapipe.RenderAnnotation.Line.prototype.setLineType=function(e){return t.Message.setField(this,6,e)},proto.mediapipe.RenderAnnotation.Line.prototype.clearLineType=function(){return t.Message.setField(this,6,void 0)},proto.mediapipe.RenderAnnotation.Line.prototype.hasLineType=function(){return null!=t.Message.getField(this,6)},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.GradientLine.prototype.toObject=function(e){return proto.mediapipe.RenderAnnotation.GradientLine.toObject(e,this)},proto.mediapipe.RenderAnnotation.GradientLine.toObject=function(e,r){var n,a={xStart:null==(n=t.Message.getOptionalFloatingPointField(r,1))?void 0:n,yStart:null==(n=t.Message.getOptionalFloatingPointField(r,2))?void 0:n,xEnd:null==(n=t.Message.getOptionalFloatingPointField(r,3))?void 0:n,yEnd:null==(n=t.Message.getOptionalFloatingPointField(r,4))?void 0:n,normalized:t.Message.getBooleanFieldWithDefault(r,5,!1),color1:(n=r.getColor1())&&o.Color.toObject(e,n),color2:(n=r.getColor2())&&o.Color.toObject(e,n)};return e&&(a.$jspbMessageInstance=r),a}),proto.mediapipe.RenderAnnotation.GradientLine.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.RenderAnnotation.GradientLine;return proto.mediapipe.RenderAnnotation.GradientLine.deserializeBinaryFromReader(n,r)},proto.mediapipe.RenderAnnotation.GradientLine.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readDouble();e.setXStart(r);break;case 2:r=t.readDouble(),e.setYStart(r);break;case 3:r=t.readDouble(),e.setXEnd(r);break;case 4:r=t.readDouble(),e.setYEnd(r);break;case 5:r=t.readBool(),e.setNormalized(r);break;case 6:r=new o.Color,t.readMessage(r,o.Color.deserializeBinaryFromReader),e.setColor1(r);break;case 7:r=new o.Color,t.readMessage(r,o.Color.deserializeBinaryFromReader),e.setColor2(r);break;default:t.skipField()}return e},proto.mediapipe.RenderAnnotation.GradientLine.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.RenderAnnotation.GradientLine.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.RenderAnnotation.GradientLine.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=t.Message.getField(e,1))&&r.writeDouble(1,n),null!=(n=t.Message.getField(e,2))&&r.writeDouble(2,n),null!=(n=t.Message.getField(e,3))&&r.writeDouble(3,n),null!=(n=t.Message.getField(e,4))&&r.writeDouble(4,n),null!=(n=t.Message.getField(e,5))&&r.writeBool(5,n),null!=(n=e.getColor1())&&r.writeMessage(6,n,o.Color.serializeBinaryToWriter),null!=(n=e.getColor2())&&r.writeMessage(7,n,o.Color.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getXStart=function(){return t.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setXStart=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearXStart=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasXStart=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getYStart=function(){return t.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setYStart=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearYStart=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasYStart=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getXEnd=function(){return t.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setXEnd=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearXEnd=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasXEnd=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getYEnd=function(){return t.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setYEnd=function(e){return t.Message.setField(this,4,e)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearYEnd=function(){return t.Message.setField(this,4,void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasYEnd=function(){return null!=t.Message.getField(this,4)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getNormalized=function(){return t.Message.getBooleanFieldWithDefault(this,5,!1)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setNormalized=function(e){return t.Message.setField(this,5,e)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearNormalized=function(){return t.Message.setField(this,5,void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasNormalized=function(){return null!=t.Message.getField(this,5)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getColor1=function(){return t.Message.getWrapperField(this,o.Color,6)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setColor1=function(e){return t.Message.setWrapperField(this,6,e)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearColor1=function(){return this.setColor1(void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasColor1=function(){return null!=t.Message.getField(this,6)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getColor2=function(){return t.Message.getWrapperField(this,o.Color,7)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setColor2=function(e){return t.Message.setWrapperField(this,7,e)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearColor2=function(){return this.setColor2(void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasColor2=function(){return null!=t.Message.getField(this,7)},proto.mediapipe.RenderAnnotation.Scribble.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Scribble.prototype.toObject=function(e){return proto.mediapipe.RenderAnnotation.Scribble.toObject(e,this)},proto.mediapipe.RenderAnnotation.Scribble.toObject=function(e,r){var n={pointList:t.Message.toObjectList(r.getPointList(),proto.mediapipe.RenderAnnotation.Point.toObject,e)};return e&&(n.$jspbMessageInstance=r),n}),proto.mediapipe.RenderAnnotation.Scribble.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.RenderAnnotation.Scribble;return proto.mediapipe.RenderAnnotation.Scribble.deserializeBinaryFromReader(n,r)},proto.mediapipe.RenderAnnotation.Scribble.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var r=new proto.mediapipe.RenderAnnotation.Point;t.readMessage(r,proto.mediapipe.RenderAnnotation.Point.deserializeBinaryFromReader),e.addPoint(r)}else t.skipField();return e},proto.mediapipe.RenderAnnotation.Scribble.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.RenderAnnotation.Scribble.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.RenderAnnotation.Scribble.serializeBinaryToWriter=function(e,t){var r;(r=e.getPointList()).length>0&&t.writeRepeatedMessage(1,r,proto.mediapipe.RenderAnnotation.Point.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.Scribble.prototype.getPointList=function(){return t.Message.getRepeatedWrapperField(this,proto.mediapipe.RenderAnnotation.Point,1)},proto.mediapipe.RenderAnnotation.Scribble.prototype.setPointList=function(e){return t.Message.setRepeatedWrapperField(this,1,e)},proto.mediapipe.RenderAnnotation.Scribble.prototype.addPoint=function(e,r){return t.Message.addToRepeatedWrapperField(this,1,e,proto.mediapipe.RenderAnnotation.Point,r)},proto.mediapipe.RenderAnnotation.Scribble.prototype.clearPointList=function(){return this.setPointList([])},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Arrow.prototype.toObject=function(e){return proto.mediapipe.RenderAnnotation.Arrow.toObject(e,this)},proto.mediapipe.RenderAnnotation.Arrow.toObject=function(e,r){var n,o={xStart:null==(n=t.Message.getOptionalFloatingPointField(r,1))?void 0:n,yStart:null==(n=t.Message.getOptionalFloatingPointField(r,2))?void 0:n,xEnd:null==(n=t.Message.getOptionalFloatingPointField(r,3))?void 0:n,yEnd:null==(n=t.Message.getOptionalFloatingPointField(r,4))?void 0:n,normalized:t.Message.getBooleanFieldWithDefault(r,5,!1)};return e&&(o.$jspbMessageInstance=r),o}),proto.mediapipe.RenderAnnotation.Arrow.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.RenderAnnotation.Arrow;return proto.mediapipe.RenderAnnotation.Arrow.deserializeBinaryFromReader(n,r)},proto.mediapipe.RenderAnnotation.Arrow.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readDouble();e.setXStart(r);break;case 2:r=t.readDouble(),e.setYStart(r);break;case 3:r=t.readDouble(),e.setXEnd(r);break;case 4:r=t.readDouble(),e.setYEnd(r);break;case 5:r=t.readBool(),e.setNormalized(r);break;default:t.skipField()}return e},proto.mediapipe.RenderAnnotation.Arrow.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.RenderAnnotation.Arrow.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.RenderAnnotation.Arrow.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=t.Message.getField(e,1))&&r.writeDouble(1,n),null!=(n=t.Message.getField(e,2))&&r.writeDouble(2,n),null!=(n=t.Message.getField(e,3))&&r.writeDouble(3,n),null!=(n=t.Message.getField(e,4))&&r.writeDouble(4,n),null!=(n=t.Message.getField(e,5))&&r.writeBool(5,n)},proto.mediapipe.RenderAnnotation.Arrow.prototype.getXStart=function(){return t.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.setXStart=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.RenderAnnotation.Arrow.prototype.clearXStart=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.hasXStart=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.RenderAnnotation.Arrow.prototype.getYStart=function(){return t.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.setYStart=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.RenderAnnotation.Arrow.prototype.clearYStart=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.hasYStart=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.RenderAnnotation.Arrow.prototype.getXEnd=function(){return t.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.setXEnd=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.RenderAnnotation.Arrow.prototype.clearXEnd=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.hasXEnd=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.RenderAnnotation.Arrow.prototype.getYEnd=function(){return t.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.setYEnd=function(e){return t.Message.setField(this,4,e)},proto.mediapipe.RenderAnnotation.Arrow.prototype.clearYEnd=function(){return t.Message.setField(this,4,void 0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.hasYEnd=function(){return null!=t.Message.getField(this,4)},proto.mediapipe.RenderAnnotation.Arrow.prototype.getNormalized=function(){return t.Message.getBooleanFieldWithDefault(this,5,!1)},proto.mediapipe.RenderAnnotation.Arrow.prototype.setNormalized=function(e){return t.Message.setField(this,5,e)},proto.mediapipe.RenderAnnotation.Arrow.prototype.clearNormalized=function(){return t.Message.setField(this,5,void 0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.hasNormalized=function(){return null!=t.Message.getField(this,5)},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Text.prototype.toObject=function(e){return proto.mediapipe.RenderAnnotation.Text.toObject(e,this)},proto.mediapipe.RenderAnnotation.Text.toObject=function(e,r){var n,a={displayText:null==(n=t.Message.getField(r,1))?void 0:n,left:null==(n=t.Message.getOptionalFloatingPointField(r,2))?void 0:n,baseline:null==(n=t.Message.getOptionalFloatingPointField(r,3))?void 0:n,fontHeight:t.Message.getFloatingPointFieldWithDefault(r,4,8),normalized:t.Message.getBooleanFieldWithDefault(r,5,!1),fontFace:t.Message.getFieldWithDefault(r,6,0),centerHorizontally:t.Message.getBooleanFieldWithDefault(r,7,!1),centerVertically:t.Message.getBooleanFieldWithDefault(r,8,!1),outlineThickness:t.Message.getFloatingPointFieldWithDefault(r,11,0),outlineColor:(n=r.getOutlineColor())&&o.Color.toObject(e,n)};return e&&(a.$jspbMessageInstance=r),a}),proto.mediapipe.RenderAnnotation.Text.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.RenderAnnotation.Text;return proto.mediapipe.RenderAnnotation.Text.deserializeBinaryFromReader(n,r)},proto.mediapipe.RenderAnnotation.Text.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readString();e.setDisplayText(r);break;case 2:r=t.readDouble(),e.setLeft(r);break;case 3:r=t.readDouble(),e.setBaseline(r);break;case 4:r=t.readDouble(),e.setFontHeight(r);break;case 5:r=t.readBool(),e.setNormalized(r);break;case 6:r=t.readInt32(),e.setFontFace(r);break;case 7:r=t.readBool(),e.setCenterHorizontally(r);break;case 8:r=t.readBool(),e.setCenterVertically(r);break;case 11:r=t.readDouble(),e.setOutlineThickness(r);break;case 12:r=new o.Color,t.readMessage(r,o.Color.deserializeBinaryFromReader),e.setOutlineColor(r);break;default:t.skipField()}return e},proto.mediapipe.RenderAnnotation.Text.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.RenderAnnotation.Text.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.RenderAnnotation.Text.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=t.Message.getField(e,1))&&r.writeString(1,n),null!=(n=t.Message.getField(e,2))&&r.writeDouble(2,n),null!=(n=t.Message.getField(e,3))&&r.writeDouble(3,n),null!=(n=t.Message.getField(e,4))&&r.writeDouble(4,n),null!=(n=t.Message.getField(e,5))&&r.writeBool(5,n),null!=(n=t.Message.getField(e,6))&&r.writeInt32(6,n),null!=(n=t.Message.getField(e,7))&&r.writeBool(7,n),null!=(n=t.Message.getField(e,8))&&r.writeBool(8,n),null!=(n=t.Message.getField(e,11))&&r.writeDouble(11,n),null!=(n=e.getOutlineColor())&&r.writeMessage(12,n,o.Color.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.Text.prototype.getDisplayText=function(){return t.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.RenderAnnotation.Text.prototype.setDisplayText=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.RenderAnnotation.Text.prototype.clearDisplayText=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasDisplayText=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.RenderAnnotation.Text.prototype.getLeft=function(){return t.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.Text.prototype.setLeft=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.RenderAnnotation.Text.prototype.clearLeft=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasLeft=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.RenderAnnotation.Text.prototype.getBaseline=function(){return t.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.RenderAnnotation.Text.prototype.setBaseline=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.RenderAnnotation.Text.prototype.clearBaseline=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasBaseline=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.RenderAnnotation.Text.prototype.getFontHeight=function(){return t.Message.getFloatingPointFieldWithDefault(this,4,8)},proto.mediapipe.RenderAnnotation.Text.prototype.setFontHeight=function(e){return t.Message.setField(this,4,e)},proto.mediapipe.RenderAnnotation.Text.prototype.clearFontHeight=function(){return t.Message.setField(this,4,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasFontHeight=function(){return null!=t.Message.getField(this,4)},proto.mediapipe.RenderAnnotation.Text.prototype.getNormalized=function(){return t.Message.getBooleanFieldWithDefault(this,5,!1)},proto.mediapipe.RenderAnnotation.Text.prototype.setNormalized=function(e){return t.Message.setField(this,5,e)},proto.mediapipe.RenderAnnotation.Text.prototype.clearNormalized=function(){return t.Message.setField(this,5,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasNormalized=function(){return null!=t.Message.getField(this,5)},proto.mediapipe.RenderAnnotation.Text.prototype.getFontFace=function(){return t.Message.getFieldWithDefault(this,6,0)},proto.mediapipe.RenderAnnotation.Text.prototype.setFontFace=function(e){return t.Message.setField(this,6,e)},proto.mediapipe.RenderAnnotation.Text.prototype.clearFontFace=function(){return t.Message.setField(this,6,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasFontFace=function(){return null!=t.Message.getField(this,6)},proto.mediapipe.RenderAnnotation.Text.prototype.getCenterHorizontally=function(){return t.Message.getBooleanFieldWithDefault(this,7,!1)},proto.mediapipe.RenderAnnotation.Text.prototype.setCenterHorizontally=function(e){return t.Message.setField(this,7,e)},proto.mediapipe.RenderAnnotation.Text.prototype.clearCenterHorizontally=function(){return t.Message.setField(this,7,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasCenterHorizontally=function(){return null!=t.Message.getField(this,7)},proto.mediapipe.RenderAnnotation.Text.prototype.getCenterVertically=function(){return t.Message.getBooleanFieldWithDefault(this,8,!1)},proto.mediapipe.RenderAnnotation.Text.prototype.setCenterVertically=function(e){return t.Message.setField(this,8,e)},proto.mediapipe.RenderAnnotation.Text.prototype.clearCenterVertically=function(){return t.Message.setField(this,8,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasCenterVertically=function(){return null!=t.Message.getField(this,8)},proto.mediapipe.RenderAnnotation.Text.prototype.getOutlineThickness=function(){return t.Message.getFloatingPointFieldWithDefault(this,11,0)},proto.mediapipe.RenderAnnotation.Text.prototype.setOutlineThickness=function(e){return t.Message.setField(this,11,e)},proto.mediapipe.RenderAnnotation.Text.prototype.clearOutlineThickness=function(){return t.Message.setField(this,11,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasOutlineThickness=function(){return null!=t.Message.getField(this,11)},proto.mediapipe.RenderAnnotation.Text.prototype.getOutlineColor=function(){return t.Message.getWrapperField(this,o.Color,12)},proto.mediapipe.RenderAnnotation.Text.prototype.setOutlineColor=function(e){return t.Message.setWrapperField(this,12,e)},proto.mediapipe.RenderAnnotation.Text.prototype.clearOutlineColor=function(){return this.setOutlineColor(void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasOutlineColor=function(){return null!=t.Message.getField(this,12)},proto.mediapipe.RenderAnnotation.prototype.getRectangle=function(){return t.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Rectangle,1)},proto.mediapipe.RenderAnnotation.prototype.setRectangle=function(e){return t.Message.setOneofWrapperField(this,1,proto.mediapipe.RenderAnnotation.oneofGroups_[0],e)},proto.mediapipe.RenderAnnotation.prototype.clearRectangle=function(){return this.setRectangle(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasRectangle=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.RenderAnnotation.prototype.getFilledRectangle=function(){return t.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.FilledRectangle,2)},proto.mediapipe.RenderAnnotation.prototype.setFilledRectangle=function(e){return t.Message.setOneofWrapperField(this,2,proto.mediapipe.RenderAnnotation.oneofGroups_[0],e)},proto.mediapipe.RenderAnnotation.prototype.clearFilledRectangle=function(){return this.setFilledRectangle(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasFilledRectangle=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.RenderAnnotation.prototype.getOval=function(){return t.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Oval,3)},proto.mediapipe.RenderAnnotation.prototype.setOval=function(e){return t.Message.setOneofWrapperField(this,3,proto.mediapipe.RenderAnnotation.oneofGroups_[0],e)},proto.mediapipe.RenderAnnotation.prototype.clearOval=function(){return this.setOval(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasOval=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.RenderAnnotation.prototype.getFilledOval=function(){return t.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.FilledOval,4)},proto.mediapipe.RenderAnnotation.prototype.setFilledOval=function(e){return t.Message.setOneofWrapperField(this,4,proto.mediapipe.RenderAnnotation.oneofGroups_[0],e)},proto.mediapipe.RenderAnnotation.prototype.clearFilledOval=function(){return this.setFilledOval(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasFilledOval=function(){return null!=t.Message.getField(this,4)},proto.mediapipe.RenderAnnotation.prototype.getPoint=function(){return t.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Point,5)},proto.mediapipe.RenderAnnotation.prototype.setPoint=function(e){return t.Message.setOneofWrapperField(this,5,proto.mediapipe.RenderAnnotation.oneofGroups_[0],e)},proto.mediapipe.RenderAnnotation.prototype.clearPoint=function(){return this.setPoint(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasPoint=function(){return null!=t.Message.getField(this,5)},proto.mediapipe.RenderAnnotation.prototype.getLine=function(){return t.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Line,6)},proto.mediapipe.RenderAnnotation.prototype.setLine=function(e){return t.Message.setOneofWrapperField(this,6,proto.mediapipe.RenderAnnotation.oneofGroups_[0],e)},proto.mediapipe.RenderAnnotation.prototype.clearLine=function(){return this.setLine(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasLine=function(){return null!=t.Message.getField(this,6)},proto.mediapipe.RenderAnnotation.prototype.getArrow=function(){return t.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Arrow,7)},proto.mediapipe.RenderAnnotation.prototype.setArrow=function(e){return t.Message.setOneofWrapperField(this,7,proto.mediapipe.RenderAnnotation.oneofGroups_[0],e)},proto.mediapipe.RenderAnnotation.prototype.clearArrow=function(){return this.setArrow(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasArrow=function(){return null!=t.Message.getField(this,7)},proto.mediapipe.RenderAnnotation.prototype.getText=function(){return t.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Text,8)},proto.mediapipe.RenderAnnotation.prototype.setText=function(e){return t.Message.setOneofWrapperField(this,8,proto.mediapipe.RenderAnnotation.oneofGroups_[0],e)},proto.mediapipe.RenderAnnotation.prototype.clearText=function(){return this.setText(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasText=function(){return null!=t.Message.getField(this,8)},proto.mediapipe.RenderAnnotation.prototype.getRoundedRectangle=function(){return t.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.RoundedRectangle,9)},proto.mediapipe.RenderAnnotation.prototype.setRoundedRectangle=function(e){return t.Message.setOneofWrapperField(this,9,proto.mediapipe.RenderAnnotation.oneofGroups_[0],e)},proto.mediapipe.RenderAnnotation.prototype.clearRoundedRectangle=function(){return this.setRoundedRectangle(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasRoundedRectangle=function(){return null!=t.Message.getField(this,9)},proto.mediapipe.RenderAnnotation.prototype.getFilledRoundedRectangle=function(){return t.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.FilledRoundedRectangle,10)},proto.mediapipe.RenderAnnotation.prototype.setFilledRoundedRectangle=function(e){return t.Message.setOneofWrapperField(this,10,proto.mediapipe.RenderAnnotation.oneofGroups_[0],e)},proto.mediapipe.RenderAnnotation.prototype.clearFilledRoundedRectangle=function(){return this.setFilledRoundedRectangle(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasFilledRoundedRectangle=function(){return null!=t.Message.getField(this,10)},proto.mediapipe.RenderAnnotation.prototype.getGradientLine=function(){return t.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.GradientLine,14)},proto.mediapipe.RenderAnnotation.prototype.setGradientLine=function(e){return t.Message.setOneofWrapperField(this,14,proto.mediapipe.RenderAnnotation.oneofGroups_[0],e)},proto.mediapipe.RenderAnnotation.prototype.clearGradientLine=function(){return this.setGradientLine(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasGradientLine=function(){return null!=t.Message.getField(this,14)},proto.mediapipe.RenderAnnotation.prototype.getScribble=function(){return t.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Scribble,15)},proto.mediapipe.RenderAnnotation.prototype.setScribble=function(e){return t.Message.setOneofWrapperField(this,15,proto.mediapipe.RenderAnnotation.oneofGroups_[0],e)},proto.mediapipe.RenderAnnotation.prototype.clearScribble=function(){return this.setScribble(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasScribble=function(){return null!=t.Message.getField(this,15)},proto.mediapipe.RenderAnnotation.prototype.getThickness=function(){return t.Message.getFloatingPointFieldWithDefault(this,11,1)},proto.mediapipe.RenderAnnotation.prototype.setThickness=function(e){return t.Message.setField(this,11,e)},proto.mediapipe.RenderAnnotation.prototype.clearThickness=function(){return t.Message.setField(this,11,void 0)},proto.mediapipe.RenderAnnotation.prototype.hasThickness=function(){return null!=t.Message.getField(this,11)},proto.mediapipe.RenderAnnotation.prototype.getColor=function(){return t.Message.getWrapperField(this,o.Color,12)},proto.mediapipe.RenderAnnotation.prototype.setColor=function(e){return t.Message.setWrapperField(this,12,e)},proto.mediapipe.RenderAnnotation.prototype.clearColor=function(){return this.setColor(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasColor=function(){return null!=t.Message.getField(this,12)},proto.mediapipe.RenderAnnotation.prototype.getSceneTag=function(){return t.Message.getFieldWithDefault(this,13,"")},proto.mediapipe.RenderAnnotation.prototype.setSceneTag=function(e){return t.Message.setField(this,13,e)},proto.mediapipe.RenderAnnotation.prototype.clearSceneTag=function(){return t.Message.setField(this,13,void 0)},proto.mediapipe.RenderAnnotation.prototype.hasSceneTag=function(){return null!=t.Message.getField(this,13)},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderViewport.prototype.toObject=function(e){return proto.mediapipe.RenderViewport.toObject(e,this)},proto.mediapipe.RenderViewport.toObject=function(e,r){var n,o={id:null==(n=t.Message.getField(r,1))?void 0:n,widthPx:null==(n=t.Message.getField(r,2))?void 0:n,heightPx:null==(n=t.Message.getField(r,3))?void 0:n,composeOnVideo:null==(n=t.Message.getBooleanField(r,4))?void 0:n};return e&&(o.$jspbMessageInstance=r),o}),proto.mediapipe.RenderViewport.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.RenderViewport;return proto.mediapipe.RenderViewport.deserializeBinaryFromReader(n,r)},proto.mediapipe.RenderViewport.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readString();e.setId(r);break;case 2:r=t.readInt32(),e.setWidthPx(r);break;case 3:r=t.readInt32(),e.setHeightPx(r);break;case 4:r=t.readBool(),e.setComposeOnVideo(r);break;default:t.skipField()}return e},proto.mediapipe.RenderViewport.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.RenderViewport.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.RenderViewport.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=t.Message.getField(e,1))&&r.writeString(1,n),null!=(n=t.Message.getField(e,2))&&r.writeInt32(2,n),null!=(n=t.Message.getField(e,3))&&r.writeInt32(3,n),null!=(n=t.Message.getField(e,4))&&r.writeBool(4,n)},proto.mediapipe.RenderViewport.prototype.getId=function(){return t.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.RenderViewport.prototype.setId=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.RenderViewport.prototype.clearId=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.RenderViewport.prototype.hasId=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.RenderViewport.prototype.getWidthPx=function(){return t.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.RenderViewport.prototype.setWidthPx=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.RenderViewport.prototype.clearWidthPx=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.RenderViewport.prototype.hasWidthPx=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.RenderViewport.prototype.getHeightPx=function(){return t.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.RenderViewport.prototype.setHeightPx=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.RenderViewport.prototype.clearHeightPx=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.RenderViewport.prototype.hasHeightPx=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.RenderViewport.prototype.getComposeOnVideo=function(){return t.Message.getBooleanFieldWithDefault(this,4,!1)},proto.mediapipe.RenderViewport.prototype.setComposeOnVideo=function(e){return t.Message.setField(this,4,e)},proto.mediapipe.RenderViewport.prototype.clearComposeOnVideo=function(){return t.Message.setField(this,4,void 0)},proto.mediapipe.RenderViewport.prototype.hasComposeOnVideo=function(){return null!=t.Message.getField(this,4)},r.object.extend(e,proto.mediapipe)}(render_data_pb);var interactive_segmenter_result={};Object.defineProperty(interactive_segmenter_result,"__esModule",{value:!0}),interactive_segmenter_result.InteractiveSegmenterResult=void 0;class InteractiveSegmenterResult{constructor(e,t,r){this.confidenceMasks=e,this.categoryMask=t,this.qualityScores=r}close(){var e,t;null===(e=this.confidenceMasks)||void 0===e||e.forEach((e=>{e.close()})),null===(t=this.categoryMask)||void 0===t||t.close()}}interactive_segmenter_result.InteractiveSegmenterResult=InteractiveSegmenterResult;var interactive_segmenter_options={};Object.defineProperty(interactive_segmenter_options,"__esModule",{value:!0}),function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=commonjsGlobal&&commonjsGlobal.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.InteractiveSegmenter=void 0;const n=calculator_pb,o=calculator_options_pb,a=base_options_pb,i=image_segmenter_graph_options_pb,s=segmenter_options_pb,p=vision_task_runner,l=color_pb,u=render_data_pb,d=interactive_segmenter_result;r(interactive_segmenter_options,e),r(interactive_segmenter_result,e);const c="image_in",g="norm_rect_in",h="roi_in",f="confidence_masks",m="category_mask",y="quality_scores";class b extends p.VisionTaskRunner{static createFromOptions(e,t){return p.VisionTaskRunner.createVisionInstance(b,e,t)}static createFromModelBuffer(e,t){return p.VisionTaskRunner.createVisionInstance(b,e,{baseOptions:{modelAssetBuffer:t}})}static createFromModelPath(e,t){return p.VisionTaskRunner.createVisionInstance(b,e,{baseOptions:{modelAssetPath:t}})}constructor(e,t){super(new p.VisionGraphRunner(e,t),c,g,!1),this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.options=new i.ImageSegmenterGraphOptions,this.segmenterOptions=new s.SegmenterOptions,this.options.setSegmenterOptions(this.segmenterOptions),this.options.setBaseOptions(new a.BaseOptions)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(e){this.options.setBaseOptions(e)}setOptions(e){var t,r;return"outputCategoryMask"in e&&(this.outputCategoryMask=null!==(t=e.outputCategoryMask)&&void 0!==t&&t),"outputConfidenceMasks"in e&&(this.outputConfidenceMasks=null===(r=e.outputConfidenceMasks)||void 0===r||r),super.applyOptions(e)}segment(e,t,r,n){const o="function"!=typeof r?r:{};return this.userCallback="function"==typeof r?r:n,this.reset(),this.processRenderData(t,this.getSynctheticTimestamp()),this.processImageData(e,o),this.processResults()}reset(){this.confidenceMasks=void 0,this.categoryMask=void 0,this.qualityScores=void 0}processResults(){try{const e=new d.InteractiveSegmenterResult(this.confidenceMasks,this.categoryMask,this.qualityScores);if(!this.userCallback)return e;this.userCallback(e)}finally{this.freeKeepaliveStreams()}}refreshGraph(){const e=new n.CalculatorGraphConfig;e.addInputStream(c),e.addInputStream(h),e.addInputStream(g);const t=new o.CalculatorOptions;t.setExtension(i.ImageSegmenterGraphOptions.ext,this.options);const r=new n.CalculatorGraphConfig.Node;r.setCalculator("mediapipe.tasks.vision.interactive_segmenter.InteractiveSegmenterGraph"),r.addInputStream("IMAGE:"+c),r.addInputStream("ROI:"+h),r.addInputStream("NORM_RECT:"+g),r.setOptions(t),e.addNode(r),this.addKeepaliveNode(e),this.outputConfidenceMasks&&(e.addOutputStream(f),r.addOutputStream("CONFIDENCE_MASKS:"+f),this.keepStreamAlive(f),this.graphRunner.attachImageVectorListener(f,((e,t)=>{this.confidenceMasks=e.map((e=>this.convertToMPMask(e,!this.userCallback))),this.setLatestOutputTimestamp(t)})),this.graphRunner.attachEmptyPacketListener(f,(e=>{this.confidenceMasks=[],this.setLatestOutputTimestamp(e)}))),this.outputCategoryMask&&(e.addOutputStream(m),r.addOutputStream("CATEGORY_MASK:"+m),this.keepStreamAlive(m),this.graphRunner.attachImageListener(m,((e,t)=>{this.categoryMask=this.convertToMPMask(e,!this.userCallback),this.setLatestOutputTimestamp(t)})),this.graphRunner.attachEmptyPacketListener(m,(e=>{this.categoryMask=void 0,this.setLatestOutputTimestamp(e)}))),e.addOutputStream(y),r.addOutputStream("QUALITY_SCORES:"+y),this.graphRunner.attachFloatVectorListener(y,((e,t)=>{this.qualityScores=e,this.setLatestOutputTimestamp(t)})),this.graphRunner.attachEmptyPacketListener(y,(e=>{this.categoryMask=void 0,this.setLatestOutputTimestamp(e)}));const a=e.serializeBinary();this.setGraph(new Uint8Array(a),!0)}processRenderData(e,t){const r=new u.RenderData,n=new u.RenderAnnotation,o=new l.Color;if(o.setR(255),n.setColor(o),e.keypoint&&e.scribble)throw new Error("Cannot provide both keypoint and scribble.");if(e.keypoint){const t=new u.RenderAnnotation.Point;t.setNormalized(!0),t.setX(e.keypoint.x),t.setY(e.keypoint.y),n.setPoint(t)}else{if(!e.scribble)throw new Error("Must provide either a keypoint or a scribble.");{const t=new u.RenderAnnotation.Scribble;for(const r of e.scribble){const e=new u.RenderAnnotation.Point;e.setNormalized(!0),e.setX(r.x),e.setY(r.y),t.addPoint(e)}n.setScribble(t)}}r.addRenderAnnotations(n),this.graphRunner.addProtoToStream(r.serializeBinary(),"mediapipe.RenderData",h,t)}}e.InteractiveSegmenter=b}(interactive_segmenter);var object_detector={},object_detector_options_pb={};!function(e){var t=googleProtobuf,r=t,n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==n&&n||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),o=calculator_pb;r.object.extend(proto,o);var a=calculator_options_pb;r.object.extend(proto,a);var i=base_options_pb;r.object.extend(proto,i),r.exportSymbol("proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions",null,n),proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions=function(e){t.Message.initialize(this,e,0,-1,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.repeatedFields_,null)},r.inherits(proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.displayName="proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions"),proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.repeatedFields_=[5,6],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.toObject=function(e){return proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.toObject(e,this)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.toObject=function(e,r){var n,o={baseOptions:(n=r.getBaseOptions())&&i.BaseOptions.toObject(e,n),displayNamesLocale:t.Message.getFieldWithDefault(r,2,"en"),maxResults:t.Message.getFieldWithDefault(r,3,-1),scoreThreshold:null==(n=t.Message.getOptionalFloatingPointField(r,4))?void 0:n,categoryAllowlistList:null==(n=t.Message.getRepeatedField(r,5))?void 0:n,categoryDenylistList:null==(n=t.Message.getRepeatedField(r,6))?void 0:n};return e&&(o.$jspbMessageInstance=r),o}),proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions;return proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.deserializeBinaryFromReader(n,r)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=new i.BaseOptions;t.readMessage(r,i.BaseOptions.deserializeBinaryFromReader),e.setBaseOptions(r);break;case 2:r=t.readString(),e.setDisplayNamesLocale(r);break;case 3:r=t.readInt32(),e.setMaxResults(r);break;case 4:r=t.readFloat(),e.setScoreThreshold(r);break;case 5:r=t.readString(),e.addCategoryAllowlist(r);break;case 6:r=t.readString(),e.addCategoryDenylist(r);break;default:t.skipField()}return e},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=e.getBaseOptions())&&r.writeMessage(1,n,i.BaseOptions.serializeBinaryToWriter),null!=(n=t.Message.getField(e,2))&&r.writeString(2,n),null!=(n=t.Message.getField(e,3))&&r.writeInt32(3,n),null!=(n=t.Message.getField(e,4))&&r.writeFloat(4,n),(n=e.getCategoryAllowlistList()).length>0&&r.writeRepeatedString(5,n),(n=e.getCategoryDenylistList()).length>0&&r.writeRepeatedString(6,n)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.ext=new t.ExtensionFieldInfo(443442058,{ext:0},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.toObject,0),a.CalculatorOptions.extensionsBinary[443442058]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.deserializeBinaryFromReader,!1),a.CalculatorOptions.extensions[443442058]=proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.ext,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.getBaseOptions=function(){return t.Message.getWrapperField(this,i.BaseOptions,1)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.setBaseOptions=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.hasBaseOptions=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.getDisplayNamesLocale=function(){return t.Message.getFieldWithDefault(this,2,"en")},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.setDisplayNamesLocale=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.clearDisplayNamesLocale=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.hasDisplayNamesLocale=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.getMaxResults=function(){return t.Message.getFieldWithDefault(this,3,-1)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.setMaxResults=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.clearMaxResults=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.hasMaxResults=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.getScoreThreshold=function(){return t.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.setScoreThreshold=function(e){return t.Message.setField(this,4,e)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.clearScoreThreshold=function(){return t.Message.setField(this,4,void 0)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.hasScoreThreshold=function(){return null!=t.Message.getField(this,4)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.getCategoryAllowlistList=function(){return t.Message.getRepeatedField(this,5)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.setCategoryAllowlistList=function(e){return t.Message.setField(this,5,e||[])},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.addCategoryAllowlist=function(e,r){return t.Message.addToRepeatedField(this,5,e,r)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.clearCategoryAllowlistList=function(){return this.setCategoryAllowlistList([])},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.getCategoryDenylistList=function(){return t.Message.getRepeatedField(this,6)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.setCategoryDenylistList=function(e){return t.Message.setField(this,6,e||[])},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.addCategoryDenylist=function(e,r){return t.Message.addToRepeatedField(this,6,e,r)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.clearCategoryDenylistList=function(){return this.setCategoryDenylistList([])},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.ext=new t.ExtensionFieldInfo(443442058,{ext:0},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.toObject,0),a.CalculatorOptions.extensionsBinary[443442058]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.deserializeBinaryFromReader,!1),a.CalculatorOptions.extensions[443442058]=proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.ext,r.object.extend(e,proto.mediapipe.tasks.vision.object_detector.proto)}(object_detector_options_pb);var object_detector_options={};Object.defineProperty(object_detector_options,"__esModule",{value:!0});var object_detector_result={};Object.defineProperty(object_detector_result,"__esModule",{value:!0}),function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=commonjsGlobal&&commonjsGlobal.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectDetector=void 0;const n=calculator_pb,o=calculator_options_pb,a=detection_pb,i=base_options_pb,s=object_detector_options_pb,p=detection_result,l=vision_task_runner,u="input_frame_gpu",d="norm_rect",c="detections";r(object_detector_options,e),r(object_detector_result,e);class g extends l.VisionTaskRunner{static createFromOptions(e,t){return l.VisionTaskRunner.createVisionInstance(g,e,t)}static createFromModelBuffer(e,t){return l.VisionTaskRunner.createVisionInstance(g,e,{baseOptions:{modelAssetBuffer:t}})}static async createFromModelPath(e,t){return l.VisionTaskRunner.createVisionInstance(g,e,{baseOptions:{modelAssetPath:t}})}constructor(e,t){super(new l.VisionGraphRunner(e,t),u,d,!1),this.result={detections:[]},this.options=new s.ObjectDetectorOptions,this.options.setBaseOptions(new i.BaseOptions)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(e){this.options.setBaseOptions(e)}setOptions(e){return void 0!==e.displayNamesLocale?this.options.setDisplayNamesLocale(e.displayNamesLocale):"displayNamesLocale"in e&&this.options.clearDisplayNamesLocale(),void 0!==e.maxResults?this.options.setMaxResults(e.maxResults):"maxResults"in e&&this.options.clearMaxResults(),void 0!==e.scoreThreshold?this.options.setScoreThreshold(e.scoreThreshold):"scoreThreshold"in e&&this.options.clearScoreThreshold(),void 0!==e.categoryAllowlist?this.options.setCategoryAllowlistList(e.categoryAllowlist):"categoryAllowlist"in e&&this.options.clearCategoryAllowlistList(),void 0!==e.categoryDenylist?this.options.setCategoryDenylistList(e.categoryDenylist):"categoryDenylist"in e&&this.options.clearCategoryDenylistList(),this.applyOptions(e)}detect(e,t){return this.result={detections:[]},this.processImageData(e,t),this.result}detectForVideo(e,t,r){return this.result={detections:[]},this.processVideoData(e,r,t),this.result}addJsObjectDetections(e){for(const t of e){const e=a.Detection.deserializeBinary(t);this.result.detections.push((0,p.convertFromDetectionProto)(e))}}refreshGraph(){const e=new n.CalculatorGraphConfig;e.addInputStream(u),e.addInputStream(d),e.addOutputStream(c);const t=new o.CalculatorOptions;t.setExtension(s.ObjectDetectorOptions.ext,this.options);const r=new n.CalculatorGraphConfig.Node;r.setCalculator("mediapipe.tasks.vision.ObjectDetectorGraph"),r.addInputStream("IMAGE:"+u),r.addInputStream("NORM_RECT:"+d),r.addOutputStream("DETECTIONS:"+c),r.setOptions(t),e.addNode(r),this.graphRunner.attachProtoVectorListener(c,((e,t)=>{this.addJsObjectDetections(e),this.setLatestOutputTimestamp(t)})),this.graphRunner.attachEmptyPacketListener(c,(e=>{this.setLatestOutputTimestamp(e)}));const a=e.serializeBinary();this.setGraph(new Uint8Array(a),!0)}}e.ObjectDetector=g}(object_detector);var pose_landmarker={},pose_detector_graph_options_pb={};!function(e){var t=googleProtobuf,r=t,n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==n&&n||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),o=calculator_pb;r.object.extend(proto,o);var a=calculator_options_pb;r.object.extend(proto,a);var i=base_options_pb;r.object.extend(proto,i),r.exportSymbol("proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions",null,n),proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.displayName="proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.toObject=function(e){return proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.toObject(e,this)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.toObject=function(e,r){var n,o={baseOptions:(n=r.getBaseOptions())&&i.BaseOptions.toObject(e,n),minDetectionConfidence:t.Message.getFloatingPointFieldWithDefault(r,2,.5),minSuppressionThreshold:t.Message.getFloatingPointFieldWithDefault(r,3,.5),numPoses:null==(n=t.Message.getField(r,4))?void 0:n};return e&&(o.$jspbMessageInstance=r),o}),proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions;return proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.deserializeBinaryFromReader(n,r)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=new i.BaseOptions;t.readMessage(r,i.BaseOptions.deserializeBinaryFromReader),e.setBaseOptions(r);break;case 2:r=t.readFloat(),e.setMinDetectionConfidence(r);break;case 3:r=t.readFloat(),e.setMinSuppressionThreshold(r);break;case 4:r=t.readInt32(),e.setNumPoses(r);break;default:t.skipField()}return e},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=e.getBaseOptions())&&r.writeMessage(1,n,i.BaseOptions.serializeBinaryToWriter),null!=(n=t.Message.getField(e,2))&&r.writeFloat(2,n),null!=(n=t.Message.getField(e,3))&&r.writeFloat(3,n),null!=(n=t.Message.getField(e,4))&&r.writeInt32(4,n)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.ext=new t.ExtensionFieldInfo(514774813,{ext:0},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions,proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.toObject,0),a.CalculatorOptions.extensionsBinary[514774813]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.deserializeBinaryFromReader,!1),a.CalculatorOptions.extensions[514774813]=proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.ext,proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.getBaseOptions=function(){return t.Message.getWrapperField(this,i.BaseOptions,1)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.setBaseOptions=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.hasBaseOptions=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.getMinDetectionConfidence=function(){return t.Message.getFloatingPointFieldWithDefault(this,2,.5)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.setMinDetectionConfidence=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.clearMinDetectionConfidence=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.hasMinDetectionConfidence=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.getMinSuppressionThreshold=function(){return t.Message.getFloatingPointFieldWithDefault(this,3,.5)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.setMinSuppressionThreshold=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.clearMinSuppressionThreshold=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.hasMinSuppressionThreshold=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.getNumPoses=function(){return t.Message.getFieldWithDefault(this,4,0)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.setNumPoses=function(e){return t.Message.setField(this,4,e)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.clearNumPoses=function(){return t.Message.setField(this,4,void 0)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.hasNumPoses=function(){return null!=t.Message.getField(this,4)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.ext=new t.ExtensionFieldInfo(514774813,{ext:0},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions,proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.toObject,0),a.CalculatorOptions.extensionsBinary[514774813]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.deserializeBinaryFromReader,!1),a.CalculatorOptions.extensions[514774813]=proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.ext,r.object.extend(e,proto.mediapipe.tasks.vision.pose_detector.proto)}(pose_detector_graph_options_pb);var pose_landmarker_graph_options_pb={},pose_landmarks_detector_graph_options_pb={};!function(e){var t=googleProtobuf,r=t,n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==n&&n||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),o=calculator_pb;r.object.extend(proto,o);var a=calculator_options_pb;r.object.extend(proto,a);var i=base_options_pb;r.object.extend(proto,i),r.exportSymbol("proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions",null,n),proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.displayName="proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.toObject=function(e){return proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.toObject(e,this)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.toObject=function(e,r){var n,o={baseOptions:(n=r.getBaseOptions())&&i.BaseOptions.toObject(e,n),minDetectionConfidence:t.Message.getFloatingPointFieldWithDefault(r,2,.5)};return e&&(o.$jspbMessageInstance=r),o}),proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions;return proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.deserializeBinaryFromReader(n,r)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=new i.BaseOptions;t.readMessage(r,i.BaseOptions.deserializeBinaryFromReader),e.setBaseOptions(r);break;case 2:r=t.readFloat(),e.setMinDetectionConfidence(r);break;default:t.skipField()}return e},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=e.getBaseOptions())&&r.writeMessage(1,n,i.BaseOptions.serializeBinaryToWriter),null!=(n=t.Message.getField(e,2))&&r.writeFloat(2,n)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.ext=new t.ExtensionFieldInfo(518928384,{ext:0},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.toObject,0),a.CalculatorOptions.extensionsBinary[518928384]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.deserializeBinaryFromReader,!1),a.CalculatorOptions.extensions[518928384]=proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.ext,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.getBaseOptions=function(){return t.Message.getWrapperField(this,i.BaseOptions,1)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.setBaseOptions=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.hasBaseOptions=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.getMinDetectionConfidence=function(){return t.Message.getFloatingPointFieldWithDefault(this,2,.5)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.setMinDetectionConfidence=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.clearMinDetectionConfidence=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.hasMinDetectionConfidence=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.ext=new t.ExtensionFieldInfo(518928384,{ext:0},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.toObject,0),a.CalculatorOptions.extensionsBinary[518928384]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.deserializeBinaryFromReader,!1),a.CalculatorOptions.extensions[518928384]=proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.ext,r.object.extend(e,proto.mediapipe.tasks.vision.pose_landmarker.proto)}(pose_landmarks_detector_graph_options_pb),function(e){var t=googleProtobuf,r=t,n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==n&&n||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),o=calculator_pb;r.object.extend(proto,o);var a=calculator_options_pb;r.object.extend(proto,a);var i=base_options_pb;r.object.extend(proto,i);var s=pose_detector_graph_options_pb;r.object.extend(proto,s);var p=pose_landmarks_detector_graph_options_pb;r.object.extend(proto,p),r.exportSymbol("proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions",null,n),proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions=function(e){t.Message.initialize(this,e,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions,t.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.displayName="proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.toObject=function(e){return proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.toObject(e,this)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.toObject=function(e,r){var n,o={baseOptions:(n=r.getBaseOptions())&&i.BaseOptions.toObject(e,n),poseDetectorGraphOptions:(n=r.getPoseDetectorGraphOptions())&&s.PoseDetectorGraphOptions.toObject(e,n),poseLandmarksDetectorGraphOptions:(n=r.getPoseLandmarksDetectorGraphOptions())&&p.PoseLandmarksDetectorGraphOptions.toObject(e,n),minTrackingConfidence:t.Message.getFloatingPointFieldWithDefault(r,4,.5)};return e&&(o.$jspbMessageInstance=r),o}),proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.deserializeBinary=function(e){var r=new t.BinaryReader(e),n=new proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions;return proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.deserializeBinaryFromReader(n,r)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=new i.BaseOptions;t.readMessage(r,i.BaseOptions.deserializeBinaryFromReader),e.setBaseOptions(r);break;case 2:r=new s.PoseDetectorGraphOptions,t.readMessage(r,s.PoseDetectorGraphOptions.deserializeBinaryFromReader),e.setPoseDetectorGraphOptions(r);break;case 3:r=new p.PoseLandmarksDetectorGraphOptions,t.readMessage(r,p.PoseLandmarksDetectorGraphOptions.deserializeBinaryFromReader),e.setPoseLandmarksDetectorGraphOptions(r);break;case 4:r=t.readFloat(),e.setMinTrackingConfidence(r);break;default:t.skipField()}return e},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.serializeBinaryToWriter=function(e,r){var n=void 0;null!=(n=e.getBaseOptions())&&r.writeMessage(1,n,i.BaseOptions.serializeBinaryToWriter),null!=(n=e.getPoseDetectorGraphOptions())&&r.writeMessage(2,n,s.PoseDetectorGraphOptions.serializeBinaryToWriter),null!=(n=e.getPoseLandmarksDetectorGraphOptions())&&r.writeMessage(3,n,p.PoseLandmarksDetectorGraphOptions.serializeBinaryToWriter),null!=(n=t.Message.getField(e,4))&&r.writeFloat(4,n)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.ext=new t.ExtensionFieldInfo(516587230,{ext:0},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.toObject,0),a.CalculatorOptions.extensionsBinary[516587230]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.deserializeBinaryFromReader,!1),a.CalculatorOptions.extensions[516587230]=proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.ext,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.getBaseOptions=function(){return t.Message.getWrapperField(this,i.BaseOptions,1)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.setBaseOptions=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.hasBaseOptions=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.getPoseDetectorGraphOptions=function(){return t.Message.getWrapperField(this,s.PoseDetectorGraphOptions,2)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.setPoseDetectorGraphOptions=function(e){return t.Message.setWrapperField(this,2,e)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.clearPoseDetectorGraphOptions=function(){return this.setPoseDetectorGraphOptions(void 0)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.hasPoseDetectorGraphOptions=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.getPoseLandmarksDetectorGraphOptions=function(){return t.Message.getWrapperField(this,p.PoseLandmarksDetectorGraphOptions,3)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.setPoseLandmarksDetectorGraphOptions=function(e){return t.Message.setWrapperField(this,3,e)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.clearPoseLandmarksDetectorGraphOptions=function(){return this.setPoseLandmarksDetectorGraphOptions(void 0)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.hasPoseLandmarksDetectorGraphOptions=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.getMinTrackingConfidence=function(){return t.Message.getFloatingPointFieldWithDefault(this,4,.5)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.setMinTrackingConfidence=function(e){return t.Message.setField(this,4,e)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.clearMinTrackingConfidence=function(){return t.Message.setField(this,4,void 0)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.hasMinTrackingConfidence=function(){return null!=t.Message.getField(this,4)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.ext=new t.ExtensionFieldInfo(516587230,{ext:0},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.toObject,0),a.CalculatorOptions.extensionsBinary[516587230]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.deserializeBinaryFromReader,!1),a.CalculatorOptions.extensions[516587230]=proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.ext,r.object.extend(e,proto.mediapipe.tasks.vision.pose_landmarker.proto)}(pose_landmarker_graph_options_pb);var pose_landmarker_result={};Object.defineProperty(pose_landmarker_result,"__esModule",{value:!0}),pose_landmarker_result.PoseLandmarkerResult=void 0;class PoseLandmarkerResult{constructor(e,t,r){this.landmarks=e,this.worldLandmarks=t,this.segmentationMasks=r}close(){var e;null===(e=this.segmentationMasks)||void 0===e||e.forEach((e=>{e.close()}))}}pose_landmarker_result.PoseLandmarkerResult=PoseLandmarkerResult;var pose_landmarker_options={};Object.defineProperty(pose_landmarker_options,"__esModule",{value:!0}),function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=commonjsGlobal&&commonjsGlobal.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.PoseLandmarker=void 0;const n=calculator_pb,o=calculator_options_pb,a=landmark_pb,i=base_options_pb,s=pose_detector_graph_options_pb,p=pose_landmarker_graph_options_pb,l=pose_landmarks_detector_graph_options_pb,u=landmark_result,d=vision_task_runner,c=pose_landmarker_result;r(pose_landmarker_options,e),r(pose_landmarker_result,e);const g="image_in",h="norm_rect",f="normalized_landmarks",m="world_landmarks",y="segmentation_masks",b=.5;class _ extends d.VisionTaskRunner{static createFromOptions(e,t){return d.VisionTaskRunner.createVisionInstance(_,e,t)}static createFromModelBuffer(e,t){return d.VisionTaskRunner.createVisionInstance(_,e,{baseOptions:{modelAssetBuffer:t}})}static createFromModelPath(e,t){return d.VisionTaskRunner.createVisionInstance(_,e,{baseOptions:{modelAssetPath:t}})}constructor(e,t){super(new d.VisionGraphRunner(e,t),g,h,!1),this.landmarks=[],this.worldLandmarks=[],this.outputSegmentationMasks=!1,this.options=new p.PoseLandmarkerGraphOptions,this.options.setBaseOptions(new i.BaseOptions),this.poseLandmarksDetectorGraphOptions=new l.PoseLandmarksDetectorGraphOptions,this.options.setPoseLandmarksDetectorGraphOptions(this.poseLandmarksDetectorGraphOptions),this.poseDetectorGraphOptions=new s.PoseDetectorGraphOptions,this.options.setPoseDetectorGraphOptions(this.poseDetectorGraphOptions),this.initDefaults()}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(e){this.options.setBaseOptions(e)}setOptions(e){var t,r,n,o,a;return"numPoses"in e&&this.poseDetectorGraphOptions.setNumPoses(null!==(t=e.numPoses)&&void 0!==t?t:1),"minPoseDetectionConfidence"in e&&this.poseDetectorGraphOptions.setMinDetectionConfidence(null!==(r=e.minPoseDetectionConfidence)&&void 0!==r?r:b),"minTrackingConfidence"in e&&this.options.setMinTrackingConfidence(null!==(n=e.minTrackingConfidence)&&void 0!==n?n:b),"minPosePresenceConfidence"in e&&this.poseLandmarksDetectorGraphOptions.setMinDetectionConfidence(null!==(o=e.minPosePresenceConfidence)&&void 0!==o?o:b),"outputSegmentationMasks"in e&&(this.outputSegmentationMasks=null!==(a=e.outputSegmentationMasks)&&void 0!==a&&a),this.applyOptions(e)}detect(e,t,r){const n="function"!=typeof t?t:{};return this.userCallback="function"==typeof t?t:r,this.resetResults(),this.processImageData(e,n),this.processResults()}detectForVideo(e,t,r,n){const o="function"!=typeof r?r:{};return this.userCallback="function"==typeof r?r:n,this.resetResults(),this.processVideoData(e,o,t),this.processResults()}resetResults(){this.landmarks=[],this.worldLandmarks=[],this.segmentationMasks=void 0}processResults(){try{const e=new c.PoseLandmarkerResult(this.landmarks,this.worldLandmarks,this.segmentationMasks);if(!this.userCallback)return e;this.userCallback(e)}finally{this.freeKeepaliveStreams()}}initDefaults(){this.poseDetectorGraphOptions.setNumPoses(1),this.poseDetectorGraphOptions.setMinDetectionConfidence(b),this.poseLandmarksDetectorGraphOptions.setMinDetectionConfidence(b),this.options.setMinTrackingConfidence(b)}addJsLandmarks(e){this.landmarks=[];for(const t of e){const e=a.NormalizedLandmarkList.deserializeBinary(t);this.landmarks.push((0,u.convertToLandmarks)(e))}}adddJsWorldLandmarks(e){this.worldLandmarks=[];for(const t of e){const e=a.LandmarkList.deserializeBinary(t);this.worldLandmarks.push((0,u.convertToWorldLandmarks)(e))}}refreshGraph(){const e=new n.CalculatorGraphConfig;e.addInputStream(g),e.addInputStream(h),e.addOutputStream(f),e.addOutputStream(m),e.addOutputStream(y);const t=new o.CalculatorOptions;t.setExtension(p.PoseLandmarkerGraphOptions.ext,this.options);const r=new n.CalculatorGraphConfig.Node;r.setCalculator("mediapipe.tasks.vision.pose_landmarker.PoseLandmarkerGraph"),r.addInputStream("IMAGE:"+g),r.addInputStream("NORM_RECT:"+h),r.addOutputStream("NORM_LANDMARKS:"+f),r.addOutputStream("WORLD_LANDMARKS:"+m),r.setOptions(t),e.addNode(r),this.addKeepaliveNode(e),this.graphRunner.attachProtoVectorListener(f,((e,t)=>{this.addJsLandmarks(e),this.setLatestOutputTimestamp(t)})),this.graphRunner.attachEmptyPacketListener(f,(e=>{this.landmarks=[],this.setLatestOutputTimestamp(e)})),this.graphRunner.attachProtoVectorListener(m,((e,t)=>{this.adddJsWorldLandmarks(e),this.setLatestOutputTimestamp(t)})),this.graphRunner.attachEmptyPacketListener(m,(e=>{this.worldLandmarks=[],this.setLatestOutputTimestamp(e)})),this.outputSegmentationMasks&&(r.addOutputStream("SEGMENTATION_MASK:"+y),this.keepStreamAlive(y),this.graphRunner.attachImageVectorListener(y,((e,t)=>{this.segmentationMasks=e.map((e=>this.convertToMPMask(e,!this.userCallback))),this.setLatestOutputTimestamp(t)})),this.graphRunner.attachEmptyPacketListener(y,(e=>{this.segmentationMasks=[],this.setLatestOutputTimestamp(e)})));const a=e.serializeBinary();this.setGraph(new Uint8Array(a),!0)}}e.PoseLandmarker=_,_.POSE_CONNECTIONS=[{start:0,end:1},{start:1,end:2},{start:2,end:3},{start:3,end:7},{start:0,end:4},{start:4,end:5},{start:5,end:6},{start:6,end:8},{start:9,end:10},{start:11,end:12},{start:11,end:13},{start:13,end:15},{start:15,end:17},{start:15,end:19},{start:15,end:21},{start:17,end:19},{start:12,end:14},{start:14,end:16},{start:16,end:18},{start:16,end:20},{start:16,end:22},{start:18,end:20},{start:11,end:23},{start:12,end:24},{start:23,end:24},{start:23,end:25},{start:24,end:26},{start:25,end:27},{start:26,end:28},{start:27,end:29},{start:28,end:30},{start:29,end:31},{start:30,end:32},{start:27,end:31},{start:28,end:32}]}(pose_landmarker),Object.defineProperty(vision,"__esModule",{value:!0});var PoseLandmarker_1=vision.PoseLandmarker=ObjectDetector_1=vision.ObjectDetector=InteractiveSegmenter_1=vision.InteractiveSegmenter=ImageSegmenter_1=vision.ImageSegmenter=ImageEmbedder_1=vision.ImageEmbedder=ImageClassifier_1=vision.ImageClassifier=HandLandmarker_1=vision.HandLandmarker=GestureRecognizer_1=vision.GestureRecognizer=FaceStylizer_1=vision.FaceStylizer=FaceLandmarker_1=vision.FaceLandmarker=FaceDetector_1=vision.FaceDetector=MPMask_1=vision.MPMask=MPImage_1=vision.MPImage=FilesetResolver_1=vision.FilesetResolver=DrawingUtils_1=vision.DrawingUtils=void 0;const fileset_resolver_1=fileset_resolver,drawing_utils_1=drawing_utils,image_1=image,mask_1=mask,face_detector_1=face_detector,face_landmarker_1=face_landmarker,face_stylizer_1=face_stylizer,gesture_recognizer_1=gesture_recognizer,hand_landmarker_1=hand_landmarker,image_classifier_1=image_classifier,image_embedder_1=image_embedder,image_segmenter_1=image_segmenter,interactive_segmenter_1=interactive_segmenter,object_detector_1=object_detector,pose_landmarker_1=pose_landmarker,DrawingUtils=drawing_utils_1.DrawingUtils;var DrawingUtils_1=vision.DrawingUtils=DrawingUtils;const FilesetResolver=fileset_resolver_1.FilesetResolver;var FilesetResolver_1=vision.FilesetResolver=FilesetResolver;const MPImage=image_1.MPImage;var MPImage_1=vision.MPImage=MPImage;const MPMask=mask_1.MPMask;var MPMask_1=vision.MPMask=MPMask;const FaceDetector=face_detector_1.FaceDetector;var FaceDetector_1=vision.FaceDetector=FaceDetector;const FaceLandmarker=face_landmarker_1.FaceLandmarker;var FaceLandmarker_1=vision.FaceLandmarker=FaceLandmarker;const FaceStylizer=face_stylizer_1.FaceStylizer;var FaceStylizer_1=vision.FaceStylizer=FaceStylizer;const GestureRecognizer=gesture_recognizer_1.GestureRecognizer;var GestureRecognizer_1=vision.GestureRecognizer=GestureRecognizer;const HandLandmarker=hand_landmarker_1.HandLandmarker;var HandLandmarker_1=vision.HandLandmarker=HandLandmarker;const ImageClassifier=image_classifier_1.ImageClassifier;var ImageClassifier_1=vision.ImageClassifier=ImageClassifier;const ImageEmbedder=image_embedder_1.ImageEmbedder;var ImageEmbedder_1=vision.ImageEmbedder=ImageEmbedder;const ImageSegmenter=image_segmenter_1.ImageSegmenter;var ImageSegmenter_1=vision.ImageSegmenter=ImageSegmenter;const InteractiveSegmenter=interactive_segmenter_1.InteractiveSegmenter;var InteractiveSegmenter_1=vision.InteractiveSegmenter=InteractiveSegmenter;const ObjectDetector=object_detector_1.ObjectDetector;var ObjectDetector_1=vision.ObjectDetector=ObjectDetector;const PoseLandmarker=pose_landmarker_1.PoseLandmarker;PoseLandmarker_1=vision.PoseLandmarker=PoseLandmarker}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__webpack_require__),r.loaded=!0,r.exports}__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var __webpack_exports__={};(()=>{__webpack_require__.d(__webpack_exports__,{Ao:()=>pM,Gv:()=>FM,rQ:()=>aM,o:()=>eM,R0:()=>e,j2:()=>EM,i8:()=>r});var e={};__webpack_require__.r(e),__webpack_require__.d(e,{SwitchEffectCanceled:()=>nM});var t,r="5.4.1",n=(t="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,function(e={}){var r,n,o;r||(r=void 0!==e?e:{}),r.ready=new Promise((function(e,t){n=e,o=t}));let a=null;const i=[];function s(){for(const e of i)e()}function p(){for(const e of i)e()}r.addPreRenderListener=function(e){i.push(e)},r.addPostRenderListener=function(e){i.push(e)};var l=null,u=null;let d=!1;const c=new ImageData(640,360);c.Ml=!0;let g,h,f,m,y,b,_,v,w,k,T,O,x,S,E,F,M,R,C=!1,I=null,A=null,B=null,D=null,L=null;function N(e){const t=r.Hk.length;return r.Hk[t]=e,t}r.Hk=[null],r.preinitializedWebGLContext=r.canvas.getContext("webgl2",{alpha:!1,antialias:!0,powerPreference:"high-performance"}),r.process=function(){};let P=new class{get Rk(){switch(this.type){case"Timer":return this.$k;case"RAF":return this.Zk;case"Oscillator":return this.Yk}}constructor(){this.Yk=this.Zk=this.$k=!1,this.type="RAF",this.al=1e3/33}add(e){this.Lk=e}start(){switch(this.type){case"Timer":if(!this.$k){this.$k=!0;const e=()=>{setTimeout((()=>{this.Lk&&this.Lk(),this.$k&&e()}),this.al)};e()}break;case"RAF":if(!this.Zk){this.Zk=!0;const e=t=>{requestAnimationFrame((r=>{r-t<=this.al?this.Zk&&e(t):this.Lk&&(this.Lk(),e(r))}))};e(-this.al-10)}break;case"Oscillator":if(!this.Yk){a=a||new AudioContext,this.Yk=!0;const e=a.createGain();let t;e.gain.value=0,e.connect(a.destination);const r=()=>{this.Lk&&this.Lk(),t&&t.disconnect(),this.ll=t=a.createOscillator(),t.connect(e),this.Yk&&(t.onended=r,t.start(),t.stop(a.currentTime+this.al/1e3))};r()}}}stop(){switch(this.type){case"Timer":this.$k=!1;break;case"RAF":this.Zk=!1;break;case"Oscillator":this.Yk=!1,this.ll&&(this.ll.onended=null,this.ll=void 0)}}};function j(){var e=r.Hk[0];if(e&&e.readyState===e.HAVE_ENOUGH_DATA)r._processFrameVideo(0,V),C=!0;else if(!C||0<Object.entries(U).length||null!=$||null!=H){e=g||c;var t=r._malloc(e.data.length);if(!t)return;ie.set(e.data,t),r._processFrameRawPixels(t,e.width,e.height,e.Ml),C=!0,r._free(t)}s(),e=r.canvas.width,t=r.canvas.height,r.canvasWidth===e&&r.canvasHeight===t||(r.canvasWidth=e,r.canvasHeight=t,ya(e,t)),r._render(),p(),r.apiObject.__deeparRendered&&r.apiObject.__deeparRendered(po),r.apiObject.__deeparRendered2&&r.apiObject.__deeparRendered2(po)}function G(){j()}r.setFps=function(e){P.al=1e3/e},P.add(G),r.startLoop=function(){P.add(G),P.start()},r.endLoop=function(){P.Lk=void 0,P.stop()};var W=!1,z=null;r.takeScreenshot=function(e){if(W)throw Error("The last call to takeScreenshot is not finished yet. Wait for the screenshot to finish.");W=!0,z=e;try{ma(),P.Rk||(s(),r._render(),p())}catch(e){throw W=!1,z=null,e}},r.processFrameRawPixels=function(e,t,n,o){var a=r._malloc(e.length);a&&(ie.set(e,a),r._processFrameRawPixels(a,t,n,o),g=new ImageData(new Uint8ClampedArray(e),t,n),g.Ml=o,C=!0,P.Rk||(s(),r._render(),p()),r._free(a))},r.initializeFootTracking=function(){Lo(),_a()},r.isFootTrackingInitialized=function(){return No()},r.initializeSegmentation=function(){d?$o():_o()},r.isSegmentationInitialized=function(){return d?Ho():!!mo},r.isWristTrackingInitialized=function(){return ea()};let U={},$=null,H=null;r.switchEffectByteArray=function(e,t,n,o,a){if(!I)throw Error("Error in internal API: __switchEffect is null!");const i=r._malloc(n.length);if(!i)throw Error("Cannot allocate buffer for switch effect.");ie.set(n,i),U[t]&&U[t].error&&U[t].error(new r.customErrors.SwitchEffectCanceled(`Switch effect canceled by another switch effect to the same slot: ${t}.`)),U[t]={Qk:o,error:a};try{I(t,i,n.length,e),C=!1,P.Rk||j()}catch(e){throw delete U[t],e}},r.hasVar=function(e,t){return h(e,t)},r.getVarType=function(e,t){if(f(e,t))return v(e,t);throw Error("Variable named '"+e+"' does not exist.")},r.getBoolVar=function(e,t){if(m(e,t))return w(e,t);throw Error("Variable named '"+e+"' does not exist or is not a boolean.")},r.getIntVar=function(e,t){if(y(e,t))return k(e,t);throw Error("Variable named '"+e+"' does not exist or is not an integer.")},r.getDoubleVar=function(e,t){if(b(e,t))return T(e,t);throw Error("Variable named '"+e+"' does not exist or is not a double.")},r.getStringVar=function(e,t){if(_(e,t))return O(e,t);throw Error("Variable named '"+e+"' does not exist or is not a string.")},r.setBoolVar=function(e,t,r){return x(e,t,r)},r.setIntVar=function(e,t,r){return S(e,t,r)},r.setDoubleVar=function(e,t,r){return E(e,t,r)},r.setStringVar=function(e,t,r){return F(e,t,r)},r.deleteVar=function(e,t){return M(e,t)},r.clearVars=function(e){return R(e)},r.clearEffect=function(e){U[e]&&U[e].error&&(U[e].error(new r.customErrors.SwitchEffectCanceled(`Switch effect canceled by the call to clearEffect() on the same slot: ${e}.`)),delete U[e]),A&&(A(e),P.Rk||j())},r.moveGameObject=function(e,t){B&&(B(e,t),P.Rk||j())};let V=!0;r.setMirror=function(e){V=!!e};let K=!1;r.startCamera=function(e,t,n,o,a,i){r.stopVideo(),V=!!e;let s=document.createElement("video");s.setAttribute("playsinline","playsinline"),r.Hk[0]=s,t=t||!0,a&&a(),navigator.mediaDevices.getUserMedia({video:t}).then((function(e){i&&i(),s.srcObject=e,s.onloadedmetadata=()=>{s.play().then((()=>{n&&n()}))},K=!0})).catch((e=>{o&&o(e),console.error(`${e.name}: ${e.message}`)}))},r.shutdown=function(){r.stopVideo(),fa(),r.um()},r.setVideoElement=function(e,t){r.stopVideo(),V=!!t,r.Hk[0]=e},r.stopVideo=function(){r.Hk[0]&&(K&&(r.Hk[0].srcObject.getTracks().forEach((e=>{e.stop()})),r.Hk[0].srcObject=null,K=!1),r.Hk[0]=null)},r.touchOccurred=function(e){ba(e.x,e.y,e.type)},r.setOffscreenRenderingEnabled=function(e){!function(e){var t=P;if(t.type!==e){var r=t.$k|t.Yk|t.Zk;t.stop(),t.type=e,r&&t.start()}}(e?"Oscillator":"RAF")},r.backgroundReplacement=function(e,t,r,n){if(e){H&&H.error&&H.error(""),H={Qk:r,error:n};var o=new Image;o.onload=()=>{const t=document.createElement("canvas");var r=t.getContext("2d",{Jn:!0});t.width=o.width,t.height=o.height,r.drawImage(o,0,0),r=r.getImageData(0,0,t.width,t.height),r=new Uint8Array(r.data.buffer);const n=va(r.length);ie.set(r,n);try{L(e,n,r.length,t.width,t.height),C=!1,P.Rk||j()}catch(e){throw H=null,e}},o.src=t}else L(!1,null,0,0,0),r()},r.backgroundBlur=function(e,t,r,n){if(e){$&&$.error&&$.error(""),$={Qk:r,error:n};try{D(e,t),C=!1,P.Rk||j()}catch(e){throw $=null,e}}else D(!1,0),r()},r.lm=function(e,t,n,o){if(r.apiObject.onFaceTracked){var a=[];for(let u=0;u<o;u++){let o={detected:!1,translation:[],rotation:[],poseMatrix:[],landmarks:[],landmarks2d:[],faceRect:[]};var i=t+u*n,s=i+e.translationOffset;let d=i+e.rotationOffset;var p=i+e.poseMatrixOffset,l=i+e.landmarksOffset;let c=i+e.landmarks2DOffset,g=i+e.faceRectOffset;for(o.detected=!!r.HEAP32[i/Float32Array.BYTES_PER_ELEMENT],i=0;3>i;i++)o.translation.push(r.HEAPF32[s/Float32Array.BYTES_PER_ELEMENT+i]),o.rotation.push(r.HEAPF32[d/Float32Array.BYTES_PER_ELEMENT+i]);for(s=0;16>s;s++)o.poseMatrix.push(r.HEAPF32[p/Float32Array.BYTES_PER_ELEMENT+s]);for(p=0;204>p;p++)o.landmarks.push(r.HEAPF32[l/Float32Array.BYTES_PER_ELEMENT+p]),136>p&&o.landmarks2d.push(r.HEAPF32[c/Float32Array.BYTES_PER_ELEMENT+p]);for(l=0;4>l;l++)o.faceRect.push(r.HEAPF32[g/Float32Array.BYTES_PER_ELEMENT+l]);a.push(o)}r.apiObject.onFaceTracked(a)}},r.rn=function(){r.apiObject.onVideoStarted&&r.apiObject.onVideoStarted()},r.qm=function(){r.apiObject.onInitialize&&r.apiObject.onInitialize()},r.mm=function(e){r.apiObject.onFaceVisibilityChanged&&r.apiObject.onFaceVisibilityChanged(e)},r.pm=function(e){r.apiObject.onImageVisibilityChanged&&r.apiObject.onImageVisibilityChanged(e)},r.qn=function(){r.apiObject.onCameraPermissionGranted&&r.apiObject.onCameraPermissionGranted()},r.pn=function(){r.apiObject.onCameraPermissionDenied&&r.apiObject.onCameraPermissionDenied()},r.on=function(){r.apiObject.onCameraPermissionAsked&&r.apiObject.onCameraPermissionAsked()},r.sm=function(e,t,r){const n=document.createElement("canvas"),o=n.getContext("2d");n.width=t,n.height=r;const a=o.getImageData(0,0,n.width,n.height),i=a.data;for(let n=0;n<r;n++)for(let o=0;o<t;o++){const a=4*((r-n-1)*t+o),s=4*(n*t+o);i[s]=ie[e+a+2],i[s+1]=ie[e+a+1],i[s+2]=ie[e+a+0],i[s+3]=ie[e+a+3]}o.putImageData(a,0,0),W?(W=!1,z(n.toDataURL("image/png")),z=null):console.error("DeepAR screenshot taken but no registered callback.")},r.gm=function(e){r.apiObject.onAnimationTransitionedToState&&r.apiObject.onAnimationTransitionedToState(e)},r.km=function(e,t){"Error"===e?console.error(t):"Debug"===e?console.debug(t):"Info"===e?console.info(t):"Warning"===e?console.warn(t):console.log(t)},r.jm=function(e){U[e]&&U[e].Qk&&U[e].Qk(),delete U[e]},r.im=function(){H&&H.Qk&&H.Qk(),H={}},r.hm=function(){$&&$.Qk&&$.Qk(),$={}},r.rm=function(e){r.apiObject.onNumberOfFacesVisibleChanged&&r.apiObject.onNumberOfFacesVisibleChanged(e)},r.um=function(){r.apiObject.onShutdown&&r.apiObject.onShutdown()},r.om=function(){r.apiObject.onFootTrackingInitialized&&r.apiObject.onFootTrackingInitialized()},r.tm=function(){r.apiObject.onSegmentationInitialized&&r.apiObject.onSegmentationInitialized()},r.nm=function(e,t){r.apiObject.onFeetTracked&&r.apiObject.onFeetTracked(e,t)},r.wm=function(){r.apiObject.onWristTrackingInitialized&&r.apiObject.onWristTrackingInitialized()},r.vm=function(e){r.apiObject.onWristTracked&&r.apiObject.onWristTracked(e)},r.noInitialRun=!0,r.initializeDeepAR=function(){l=r.xzimg,u=r.mediaPipe,r.initializeML&&(r.initializeML.useXzimgWebSegmentation&&(d=!0),r.initializeML.faceModelsPredownload&&q("face"),r.initializeML.segmentationInit&&(d?$o():_o()),r.initializeML.footInit&&Lo(),r.initializeML.segmentationModelsPredownload&&q("segmentationXzimg"),r.initializeML.footModelsPredownload&&(q("footDetector"),q("footTracker"),q("footObj")),r.initializeML.rigidFaceInit&&(q("rigidFaceDetector"),q("rigidFaceTracker"))),I=sa("switchEffect",null,["string","number","number","number"]),A=sa("clearEffect",null,["string"]),B=sa("moveGameObject",null,["string","string"]),D=sa("backgroundBlur",null,["boolean","number"]),L=sa("backgroundReplacement",null,["boolean","number","number","number","number"]),h=sa("hasVar","boolean",["string","string"]),f=sa("getVarTypeStatus","boolean",["string","string"]),m=sa("getBoolVarStatus","boolean",["string","string"]),y=sa("getIntVarStatus","boolean",["string","string"]),b=sa("getDoubleVarStatus","boolean",["string","string"]),_=sa("getStringVarStatus","boolean",["string","string"]),v=sa("getVarType","int",["string","string"]),w=sa("getBoolVar","boolean",["string","string"]),k=sa("getIntVar","int",["string","string"]),T=sa("getDoubleVar","number",["string","string"]),O=sa("getStringVar","string",["string","string"]),x=sa("setBoolVar","boolean",["string","boolean","string"]),S=sa("setIntVar","boolean",["string","int","string"]),E=sa("setDoubleVar","boolean",["string","number","string"]),F=sa("setStringVar","boolean",["string","string","string"]),M=sa("deleteVar","boolean",["string","string"]),R=sa("clearVars","boolean",["string"]),r.pushConsoleLog=sa("pushConsoleLog","boolean",["string","int"]),r.changeParameterFloat=sa("changeParameterFloat",null,["string","string","string","number"]),r.changeParameterVector=sa("changeParameterVector",null,"string string string number number number number".split(" ")),r.changeParameterBool=sa("changeParameterBool",null,["string","string","string","boolean"]),r.changeParameterTexture=sa("changeParameterTexture",null,"string string string number number number number".split(" ")),r.fireTrigger=sa("fireTrigger",null,["string"]),r.setFaceDetectionSensitivity=sa("setFaceDetectionSensitivity",null,["number"]),r.showStats=sa("showStats",null,["number"]),r.simulatePhysics=sa("simulatePhysics",null,["number"]),r.showColliders=sa("showColliders",null,["number"]),r.setLicenseKey=sa("setLicenseKey",null,["string"]),r.muteSound=sa("muteSound",null,["boolean"]),r.setLicenseKey(r.licenseKey),ga(r.canvasWidth,r.canvasHeight,r.initializeML&&r.initializeML.rigidFaceInit,d)};let Y={};function X(e,t,r){Y[e]={path:t,nl:!1,data:null,ml:!1,bl:[],Jl:r,Ul:function(r){r&&this.bl.push(r),this.data?this.bl.forEach((e=>{e.Qk(this.data)})):this.nl||(this.ml&&this.bl.forEach((e=>{e.error()})),this.path||(console.error(`The ${e} model was requested but the path to it is not defined.`),this.ml=!0,this.bl.forEach((e=>{e.error()}))),this.nl=!0,fetch(this.path).then((r=>{r.ok?r.arrayBuffer().then((r=>{this.data=r,this.nl=!1,this.ml=!0,async function(e){return e=await crypto.subtle.digest("SHA-256",e),Array.from(new Uint8Array(e)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(r).then((r=>{this.Jl.some((e=>e===r))||console.warn(`The loaded ${e} model (${t}) does not pass the validity check. DeepAR may not function as expected or it might crash. Expected digests: ${this.Jl} but got this digest ${r}.`)})),this.bl.forEach((e=>{e.Qk(r)}))})).catch((t=>{console.error(t),console.error(`Error downloading the ${e} model (${this.path}), could not resolve the array buffer`),this.bl.forEach((e=>{e.error()}))})):(this.nl=!1,this.ml=!0,console.error(`Error downloading the ${e} model (${this.path}), response status = ${r.status}. Effects using ${e} will not work properly or at all.`),this.bl.forEach((e=>{e.error()})))})))},Em:function(){return this.data?this.data:this.ml||this.nl?null:void this.Ul()},Dm:async function(){return new Promise(((e,t)=>{this.Ul({Qk:e,error:t})}))}}}function q(e){if(!Y[e])throw Error(`No ML model with name ${e}.`);return Y[e].Em()}function J(e){if(!Y[e])throw Error(`No ML model with name ${e}.`);return Y[e].Dm()}X("face",r.faceTrackingModelPath,["d77b98c4cbe7f514b541ff79f79503bf23bc8f2b27046c8c785f2d89d2c3a44b"]),X("rigidFaceDetector",r.rigidFaceTrackingConfig.detectorPath,["8270514ae788bc6ee67db086c9400581d17a78c18de38c878f1148dcc3a8e480"]),X("rigidFaceTracker",r.rigidFaceTrackingConfig.trackerPath,["83ed5dae95a107733811b1ff3bfcce1cd94b9e652c52a8c9317156294f3c9c9a"]),X("segmentationXzimg",r.segmentationConfig.modelPath,["373cb9dd1fbf3972245665a81607ec7d33078ee0dae380c9d9e8bc03034dc09a"]),X("segmentationMediaPipe",r.segmentationConfig.mediaPipeConfig.modelPath,["191ac9529ae506ee0beefa6b2c945a172dab9d07d1e802a290a4e4038226658b","490e9ea734313e0de10fa0cd9e3c6133e36ea4db2b7a49bde9ef019f72796b8e"]),X("footDetector",r.footTrackingConfig.detectorPath,["2c6d4af14fbe42bdc37fba53526429ac7453e19971a4a070e64bae6460872ac3"]),X("footTracker",r.footTrackingConfig.trackerPath,["ddfc598f45ae5e5a8169518a9daecedc556df623cb3a1d676e7de0f85f14f337","f0ec050f034b9ade54711705213d2dd336b76452a7d81bd17ba2505a5293438a"]),X("footObj",r.footTrackingConfig.objPath,["689ec395dc4382e15af1304405546fcdcb677044d61bf73db0b2d6c163be35f2"]),X("wristDetector",r.wristTrackingConfig.detectorPath,["b4c14a6f4b7bed1bc1cb313bbad5e877c7958c25b8e47d12583404f9a611d7ff"]),X("wristTracker",r.wristTrackingConfig.trackerPath,["5f2e644d8217fe47f15c823e8419085e2544140706e88b453615749e7c5b7918"]),X("wristObj",r.wristTrackingConfig.objPath,["5c763303cac33e377bbfbc3bd13475c0b99ca6412f9774ecc7a65fe72ac01732"]),X("background_replacement.deepar",r.embeddedEffectConfig.backgroundReplacementPath,["40e3ea2148e50af361eabc79a27b7d5b5c1ad04c4d9c0b48a296acd29054f3c9"]),X("background_blur.deepar",r.embeddedEffectConfig.backgroundBlurPath,["27018fc27e24a68a5f7022ac270d17734967e2c2c650630b9b8ade1e0198d684"]);var Q=Object.assign({},r),Z="";"undefined"!=typeof document&&document.currentScript&&(Z=document.currentScript.src),t&&(Z=t),Z=0!==Z.indexOf("blob:")?Z.substr(0,Z.replace(/[?#].*/,"").lastIndexOf("/")+1):"";var ee=console.log.bind(console),te=console.warn.bind(console);Object.assign(r,Q),Q=null;var re=!1;"object"!=typeof WebAssembly&&Ie("no native wasm support detected");var ne,oe,ae,ie,se,pe,le,ue,de,ce,ge=!1,he="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function fe(e,t,r){var n=t+r;for(r=t;e[r]&&!(r>=n);)++r;if(16<r-t&&e.buffer&&he)return he.decode(e.subarray(t,r));for(n="";t<r;){var o=e[t++];if(128&o){var a=63&e[t++];if(192==(224&o))n+=String.fromCharCode((31&o)<<6|a);else{var i=63&e[t++];65536>(o=224==(240&o)?(15&o)<<12|a<<6|i:(7&o)<<18|a<<12|i<<6|63&e[t++])?n+=String.fromCharCode(o):(o-=65536,n+=String.fromCharCode(55296|o>>10,56320|1023&o))}}else n+=String.fromCharCode(o)}return n}function me(e,t){return e?fe(ie,e,t):""}function ye(e,t,r,n){if(!(0<n))return 0;var o=r;n=r+n-1;for(var a=0;a<e.length;++a){var i=e.charCodeAt(a);if(55296<=i&&57343>=i&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++a)),127>=i){if(r>=n)break;t[r++]=i}else{if(2047>=i){if(r+1>=n)break;t[r++]=192|i>>6}else{if(65535>=i){if(r+2>=n)break;t[r++]=224|i>>12}else{if(r+3>=n)break;t[r++]=240|i>>18,t[r++]=128|i>>12&63}t[r++]=128|i>>6&63}t[r++]=128|63&i}}return t[r]=0,r-o}function be(e,t,r){return ye(e,ie,t,r)}function _e(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);127>=n?t++:2047>=n?t+=2:55296<=n&&57343>=n?(t+=4,++r):t+=3}return t}function ve(){var e=ne.buffer;r.HEAP8=ae=new Int8Array(e),r.HEAP16=se=new Int16Array(e),r.HEAP32=le=new Int32Array(e),r.HEAPU8=ie=new Uint8Array(e),r.HEAPU16=pe=new Uint16Array(e),r.HEAPU32=ue=new Uint32Array(e),r.HEAPF32=de=new Float32Array(e),r.HEAPF64=ce=new Float64Array(e)}var we,ke,Te=[],Oe=[],xe=[],Se=[],Ee=!1,Fe=0,Me=0,Re=null,Ce=null;function Ie(e){throw te(e="Aborted("+e+")"),ge=!0,oe=1,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),o(e),e}function Ae(e){return e.startsWith("data:application/octet-stream;base64,")}if(!Ae(ke="deepar.wasm")){var Be=ke;ke=r.locateFile?r.locateFile(Be,Z):Z+Be}function De(){try{throw"both async and sync fetching of the wasm failed"}catch(e){Ie(e)}}function Le(e,t,r){return function(e){return"function"==typeof fetch?fetch(e,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at '"+e+"'";return t.arrayBuffer()})).catch((function(){return De()})):Promise.resolve().then((function(){return De()}))}(e).then((function(e){return WebAssembly.instantiate(e,t)})).then((function(e){return e})).then(r,(function(e){te("failed to asynchronously prepare wasm: "+e),Ie(e)}))}var Ne={979880:(e,t,r,n,o,a)=>{var i=document.createElement("canvas"),s=i.getContext("2d");i.width=t,i.height=r,e=new Uint8ClampedArray(ie.subarray(e,e+i.width*i.height*4)),e=new ImageData(e,i.width,i.height),s.putImageData(e,0,0),e=(s=document.createElement("canvas")).getContext("2d"),s.width=o,s.height=a,e.drawImage(i,0,0,s.width,s.height),o=e.getImageData(0,0,s.width,s.height),o=new Uint8Array(o.data.buffer),ie.set(o,n)},980734:(e,t,r,n,o,a)=>{var i=document.createElement("canvas"),s=i.getContext("2d");i.width=t,i.height=r,e=new Uint8ClampedArray(ie.subarray(e,e+i.width*i.height*4)),e=new ImageData(e,i.width,i.height),s.putImageData(e,0,0),e=(s=document.createElement("canvas")).getContext("2d"),s.width=o,s.height=a,e.drawImage(i,0,0,s.width,s.height),o=e.getImageData(0,0,s.width,s.height),o=new Uint8Array(o.data.buffer),ie.set(o,n)},981588:()=>{console.log("License key not valid")},981625:()=>{r.qm()},981649:(e,t,n)=>{r.sm(e,t,n)},981692:e=>{r.rm(e)},981739:e=>{r.jm(me(e))},981783:(e,t,n,o,a,i,s,p,l)=>{r.lm({translationOffset:e,rotationOffset:t,poseMatrixOffset:n,landmarksOffset:o,landmarks2DOffset:a,faceRectOffset:i},s,p,l)},981967:(e,t)=>{r.km(me(e),me(t))},982024:()=>{r.hm()},982062:()=>{r.im()},982107:()=>{r.om()},982148:()=>{r.wm()},982190:(e,t)=>{r.nm({detected:!!e},{detected:!!t})},982261:(e,t)=>{r.vm({detected:!!e,isLeft:!!t})},982326:()=>{r.tm()},982367:e=>{r.mm(!!e)},982408:e=>{r.pm(!!e)},982452:(e,t)=>{e=me(e,t),r.gm(e)},982533:()=>{alert("DeepAR license not valid")},982567:()=>{r.endLoop()},982588:()=>{let e=q("face");if(!e)return 0;e=new Uint8Array(e);var t=va(e.length);return ie.set(e,t),t},982797:()=>{var e=Xn,t=_e(e)+1,r=va(t);return be(e,r,t),r},982951:()=>{var e=qn,t=_e(e)+1,r=va(t);return be(e,r,t),r},983110:()=>{var e=Jn,t=_e(e)+1,r=va(t);return be(e,r,t),r},983276:()=>{var e=Zn,t=_e(e)+1,r=va(t);return be(e,r,t),r},983439:()=>{var e=eo,t=_e(e)+1,r=va(t);return be(e,r,t),r},983607:()=>{var e=Qn,t=_e(e)+1,r=va(t);return be(e,r,t),r},983772:()=>{var e=to,t=_e(e)+1,r=va(t);return be(e,r,t),r},983934:()=>{var e=ro,t=_e(e)+1,r=va(t);return be(e,r,t),r},984095:()=>{var e=no,t=_e(e)+1,r=va(t);return be(e,r,t),r}};function Pe(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function je(e){for(;0<e.length;)e.shift()(r)}var Ge=[],We=0,ze=0;function Ue(e){return we.get(e)}function $e(e){this.ol=e,this.Fk=e-24,this.am=function(e){ue[this.Fk+4>>2]=e},this.Lk=function(){return ue[this.Fk+4>>2]},this.Yl=function(e){ue[this.Fk+8>>2]=e},this.Gm=function(){return ue[this.Fk+8>>2]},this.$l=function(){le[this.Fk>>2]=0},this.Dl=function(e){ae[this.Fk+12>>0]=e?1:0},this.$k=function(){return 0!=ae[this.Fk+12>>0]},this.El=function(e){ae[this.Fk+13>>0]=e?1:0},this.Ll=function(){return 0!=ae[this.Fk+13>>0]},this.ll=function(e,t){this.Rk(0),this.am(e),this.Yl(t),this.$l(),this.Dl(!1),this.El(!1)},this.Yk=function(){le[this.Fk>>2]+=1},this.Rm=function(){var e=le[this.Fk>>2];return le[this.Fk>>2]=e-1,1===e},this.Rk=function(e){ue[this.Fk+16>>2]=e},this.Zk=function(){return ue[this.Fk+16>>2]},this.al=function(){if(Ca(this.Lk()))return ue[this.ol>>2];var e=this.Zk();return 0!==e?e:this.ol}}function He(){var e=ze;if(!e)return ka(0),0;var t=new $e(e);t.Rk(e);var r=t.Lk();if(!r)return ka(0),e;for(var n=0;n<arguments.length;n++){var o=arguments[n];if(0===o||o===r)break;if(Ra(o,r,t.Fk+16))return ka(o),e}return ka(r),e}var Ve={};function Ke(e){for(;e.length;){var t=e.pop();e.pop()(t)}}function Ye(e){return this.fromWireType(le[e>>2])}var Xe={},qe={},Je={};function Qe(e){if(void 0===e)return"_unknown";var t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return 48<=t&&57>=t?"_"+e:e}function Ze(e,t){return{[e=Qe(e)]:function(){return t.apply(this,arguments)}}[e]}function et(e){var t=Error,r=Ze(e,(function(t){this.name=e,this.message=t,void 0!==(t=Error(t).stack)&&(this.stack=this.toString()+"\n"+t.replace(/^Error(:[^\n]*)?\n/,""))}));return r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},r}var tt=void 0;function rt(e){throw new tt(e)}function nt(e,t,r){function n(t){(t=r(t)).length!==e.length&&rt("Mismatched type converter count");for(var n=0;n<e.length;++n)lt(e[n],t[n])}e.forEach((function(e){Je[e]=t}));var o=Array(t.length),a=[],i=0;t.forEach(((e,t)=>{qe.hasOwnProperty(e)?o[t]=qe[e]:(a.push(e),Xe.hasOwnProperty(e)||(Xe[e]=[]),Xe[e].push((()=>{o[t]=qe[e],++i===a.length&&n(o)})))})),0===a.length&&n(o)}function ot(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}var at=void 0;function it(e){for(var t="";ie[e];)t+=at[ie[e++]];return t}var st=void 0;function pt(e){throw new st(e)}function lt(e,t,r={}){if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var n=t.name;if(e||pt('type "'+n+'" must have a positive integer typeid pointer'),qe.hasOwnProperty(e)){if(r.Lm)return;pt("Cannot register type '"+n+"' twice")}qe[e]=t,delete Je[e],Xe.hasOwnProperty(e)&&(t=Xe[e],delete Xe[e],t.forEach((e=>e())))}function ut(e){pt(e.Ek.Ik.Gk.name+" instance already deleted")}var dt=!1;function ct(){}function gt(e){--e.count.value,0===e.count.value&&(e.Nk?e.Pk.Xk(e.Nk):e.Ik.Gk.Xk(e.Fk))}function ht(e,t,r){return t===r?e:void 0===r.Sk||null===(e=ht(e,t,r.Sk))?null:r.zm(e)}var ft={},mt=[];function yt(){for(;mt.length;){var e=mt.pop();e.Ek.jl=!1,e.delete()}}var bt=void 0,_t={};function vt(e,t){return t.Ik&&t.Fk||rt("makeClassHandle requires ptr and ptrType"),!!t.Pk!=!!t.Nk&&rt("Both smartPtrType and smartPtr must be specified"),t.count={value:1},wt(Object.create(e,{Ek:{value:t}}))}function wt(e){return"undefined"==typeof FinalizationRegistry?(wt=e=>e,e):(dt=new FinalizationRegistry((e=>{gt(e.Ek)})),wt=e=>{var t=e.Ek;return t.Nk&&dt.register(e,{Ek:t},e),e},ct=e=>{dt.unregister(e)},wt(e))}function kt(){}function Tt(e,t,r){if(void 0===e[t].Kk){var n=e[t];e[t]=function(){return e[t].Kk.hasOwnProperty(arguments.length)||pt("Function '"+r+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[t].Kk+")!"),e[t].Kk[arguments.length].apply(this,arguments)},e[t].Kk=[],e[t].Kk[n.rl]=n}}function Ot(e,t,n){r.hasOwnProperty(e)?((void 0===n||void 0!==r[e].Kk&&void 0!==r[e].Kk[n])&&pt("Cannot register public name '"+e+"' twice"),Tt(r,e,e),r.hasOwnProperty(n)&&pt("Cannot register multiple overloads of a function with the same number of arguments ("+n+")!"),r[e].Kk[n]=t):(r[e]=t,void 0!==n&&(r[e].En=n))}function xt(e,t,r,n,o,a,i,s){this.name=e,this.constructor=t,this.kl=r,this.Xk=n,this.Sk=o,this.Cm=a,this.ql=i,this.zm=s,this.Om=[]}function St(e,t,r){for(;t!==r;)t.ql||pt("Expected null or instance of "+r.name+", got an instance of "+t.name),e=t.ql(e),t=t.Sk;return e}function Et(e,t){return null===t?(this.zl&&pt("null is not a valid "+this.name),0):(t.Ek||pt('Cannot pass "'+Ht(t)+'" as a '+this.name),t.Ek.Fk||pt("Cannot pass deleted object as a pointer of type "+this.name),St(t.Ek.Fk,t.Ek.Ik.Gk,this.Gk))}function Ft(e,t){if(null===t){if(this.zl&&pt("null is not a valid "+this.name),this.tl){var r=this.Bl();return null!==e&&e.push(this.Xk,r),r}return 0}if(t.Ek||pt('Cannot pass "'+Ht(t)+'" as a '+this.name),t.Ek.Fk||pt("Cannot pass deleted object as a pointer of type "+this.name),!this.sl&&t.Ek.Ik.sl&&pt("Cannot convert argument of type "+(t.Ek.Pk?t.Ek.Pk.name:t.Ek.Ik.name)+" to parameter type "+this.name),r=St(t.Ek.Fk,t.Ek.Ik.Gk,this.Gk),this.tl)switch(void 0===t.Ek.Nk&&pt("Passing raw pointer to smart pointer is illegal"),this.Vm){case 0:t.Ek.Pk===this?r=t.Ek.Nk:pt("Cannot convert argument of type "+(t.Ek.Pk?t.Ek.Pk.name:t.Ek.Ik.name)+" to parameter type "+this.name);break;case 1:r=t.Ek.Nk;break;case 2:if(t.Ek.Pk===this)r=t.Ek.Nk;else{var n=t.clone();r=this.Qm(r,zt((function(){n.delete()}))),null!==e&&e.push(this.Xk,r)}break;default:pt("Unsupporting sharing policy")}return r}function Mt(e,t){return null===t?(this.zl&&pt("null is not a valid "+this.name),0):(t.Ek||pt('Cannot pass "'+Ht(t)+'" as a '+this.name),t.Ek.Fk||pt("Cannot pass deleted object as a pointer of type "+this.name),t.Ek.Ik.sl&&pt("Cannot convert argument of type "+t.Ek.Ik.name+" to parameter type "+this.name),St(t.Ek.Fk,t.Ek.Ik.Gk,this.Gk))}function Rt(e,t,r,n){this.name=e,this.Gk=t,this.zl=r,this.sl=n,this.tl=!1,this.Xk=this.Qm=this.Bl=this.Pl=this.Vm=this.Nm=void 0,void 0!==t.Sk?this.toWireType=Ft:(this.toWireType=n?Et:Mt,this.Ok=null)}function Ct(e,t,n){r.hasOwnProperty(e)||rt("Replacing nonexistant public symbol"),void 0!==r[e].Kk&&void 0!==n?r[e].Kk[n]=t:(r[e]=t,r[e].rl=n)}function It(e,t,n){return e.includes("j")?(e=r["dynCall_"+e],t=n&&n.length?e.apply(null,[t].concat(n)):e.call(null,t)):t=Ue(t).apply(null,n),t}function At(e,t){var r=(e=it(e)).includes("j")?function(e,t){var r=[];return function(){return r.length=0,Object.assign(r,arguments),It(e,t,r)}}(e,t):Ue(t);return"function"!=typeof r&&pt("unknown function pointer with signature "+e+": "+t),r}var Bt=void 0;function Dt(e){var t=it(e=Oa(e));return wa(e),t}function Lt(e,t){var r=[],n={};throw t.forEach((function e(t){n[t]||qe[t]||(Je[t]?Je[t].forEach(e):(r.push(t),n[t]=!0))})),new Bt(e+": "+r.map(Dt).join([", "]))}function Nt(e,t){for(var r=[],n=0;n<e;n++)r.push(ue[t+4*n>>2]);return r}function Pt(e,t,r,n,o){var a=t.length;2>a&&pt("argTypes array size mismatch! Must at least get return value and 'this' types!");var i=null!==t[1]&&null!==r,s=!1;for(r=1;r<t.length;++r)if(null!==t[r]&&void 0===t[r].Ok){s=!0;break}var p="void"!==t[0].name,l="",u="";for(r=0;r<a-2;++r)l+=(0!==r?", ":"")+"arg"+r,u+=(0!==r?", ":"")+"arg"+r+"Wired";e="return function "+Qe(e)+"("+l+") {\nif (arguments.length !== "+(a-2)+") {\nthrowBindingError('function "+e+" called with ' + arguments.length + ' arguments, expected "+(a-2)+" args!');\n}\n",s&&(e+="var destructors = [];\n");var d=s?"destructors":"null";for(l="throwBindingError invoker fn runDestructors retType classParam".split(" "),n=[pt,n,o,Ke,t[0],t[1]],i&&(e+="var thisWired = classParam.toWireType("+d+", this);\n"),r=0;r<a-2;++r)e+="var arg"+r+"Wired = argType"+r+".toWireType("+d+", arg"+r+"); // "+t[r+2].name+"\n",l.push("argType"+r),n.push(t[r+2]);if(i&&(u="thisWired"+(0<u.length?", ":"")+u),e+=(p?"var rv = ":"")+"invoker(fn"+(0<u.length?", ":"")+u+");\n",s)e+="runDestructors(destructors);\n";else for(r=i?1:2;r<t.length;++r)a=1===r?"thisWired":"arg"+(r-2)+"Wired",null!==t[r].Ok&&(e+=a+"_dtor("+a+"); // "+t[r].name+"\n",l.push(a+"_dtor"),n.push(t[r].Ok));return p&&(e+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),l.push(e+"}\n"),function(e){var t=Function;if(!(t instanceof Function))throw new TypeError("new_ called with constructor type "+typeof t+" which is not a function");var r=Ze(t.name||"unknownFunctionName",(function(){}));return r.prototype=t.prototype,r=new r,(e=t.apply(r,e))instanceof Object?e:r}(l).apply(null,n)}var jt=[],Gt=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function Wt(e){4<e&&0==--Gt[e].Cl&&(Gt[e]=void 0,jt.push(e))}var zt=e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var t=jt.length?jt.pop():Gt.length;return Gt[t]={Cl:1,value:e},t}};function Ut(e,t,r){switch(t){case 0:return function(e){return this.fromWireType((r?ae:ie)[e])};case 1:return function(e){return this.fromWireType((r?se:pe)[e>>1])};case 2:return function(e){return this.fromWireType((r?le:ue)[e>>2])};default:throw new TypeError("Unknown integer type: "+e)}}function $t(e,t){var r=qe[e];return void 0===r&&pt(t+" has unknown type "+Dt(e)),r}function Ht(e){if(null===e)return"null";var t=typeof e;return"object"===t||"array"===t||"function"===t?e.toString():""+e}function Vt(e,t){switch(t){case 2:return function(e){return this.fromWireType(de[e>>2])};case 3:return function(e){return this.fromWireType(ce[e>>3])};default:throw new TypeError("Unknown float type: "+e)}}function Kt(e,t,r){switch(t){case 0:return r?function(e){return ae[e]}:function(e){return ie[e]};case 1:return r?function(e){return se[e>>1]}:function(e){return pe[e>>1]};case 2:return r?function(e){return le[e>>2]}:function(e){return ue[e>>2]};default:throw new TypeError("Unknown integer type: "+e)}}var Yt="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0;function Xt(e,t){for(var r=e>>1,n=r+t/2;!(r>=n)&&pe[r];)++r;if(32<(r<<=1)-e&&Yt)return Yt.decode(ie.subarray(e,r));for(r="",n=0;!(n>=t/2);++n){var o=se[e+2*n>>1];if(0==o)break;r+=String.fromCharCode(o)}return r}function qt(e,t,r){if(void 0===r&&(r=2147483647),2>r)return 0;var n=t;r=(r-=2)<2*e.length?r/2:e.length;for(var o=0;o<r;++o)se[t>>1]=e.charCodeAt(o),t+=2;return se[t>>1]=0,t-n}function Jt(e){return 2*e.length}function Qt(e,t){for(var r=0,n="";!(r>=t/4);){var o=le[e+4*r>>2];if(0==o)break;++r,65536<=o?(o-=65536,n+=String.fromCharCode(55296|o>>10,56320|1023&o)):n+=String.fromCharCode(o)}return n}function Zt(e,t,r){if(void 0===r&&(r=2147483647),4>r)return 0;var n=t;r=n+r-4;for(var o=0;o<e.length;++o){var a=e.charCodeAt(o);if(55296<=a&&57343>=a&&(a=65536+((1023&a)<<10)|1023&e.charCodeAt(++o)),le[t>>2]=a,(t+=4)+4>r)break}return le[t>>2]=0,t-n}function er(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);55296<=n&&57343>=n&&++r,t+=4}return t}function tr(e){return 0==e%4&&(0!=e%100||0==e%400)}var rr,nr=[0,31,60,91,121,152,182,213,244,274,305,335],or=[0,31,59,90,120,151,181,212,243,273,304,334];function ar(e){return(tr(e.getFullYear())?nr:or)[e.getMonth()]+e.getDate()-1}function ir(e){var t=_e(e)+1,r=va(t);return r&&ye(e,ae,r,t),r}function sr(e,t){if(wr=e,kr=t,vr)if(yr||(Fe+=1,yr=!0),0==e)br=function(){var e=0|Math.max(0,hr+t-rr());setTimeout(fr,e)};else if(1==e)br=function(){Br(fr)};else if(2==e){if("undefined"==typeof setImmediate){var r=[];addEventListener("message",(e=>{"setimmediate"!==e.data&&"setimmediate"!==e.data.target||(e.stopPropagation(),r.shift()())}),!0),setImmediate=function(e){r.push(e),postMessage("setimmediate","*")}}br=function(){setImmediate(fr)}}}function pr(e){throw oe=e,re||0<Fe||(xa(),je(xe),Ta(0),Kn[1].length&&Yn(1,10),Kn[2].length&&Yn(2,10),Ee=!0),oe=e,re||0<Fe||(ge=!0),new Pe(e)}function lr(e){if(!(e instanceof Pe||"unwind"==e))throw e}function ur(){if(!(re||0<Fe))try{pr(oe)}catch(e){lr(e)}}function dr(e){if(!Ee&&!ge)try{e(),ur()}catch(e){lr(e)}}function cr(e){gr||(gr={}),gr[e]||(gr[e]=1,te(e))}rr=()=>performance.now();var gr,hr,fr,mr,yr=!1,br=null,_r=0,vr=null,wr=0,kr=0,Tr=0,Or=[],xr={},Sr=!1,Er=!1,Fr=[];var Mr=!1,Rr=void 0,Cr=void 0;function Ir(){return!!Sr&&((document.exitFullscreen||document.cancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen||document.webkitCancelFullScreen||function(){}).apply(document,[]),!0)}var Ar=0;function Br(e){if("function"==typeof requestAnimationFrame)requestAnimationFrame(e);else{var t=Date.now();if(0===Ar)Ar=t+1e3/60;else for(;t+2>=Ar;)Ar+=1e3/60;setTimeout(e,Math.max(Ar-t,0))}}function Dr(e){return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",bmp:"image/bmp",ogg:"audio/ogg",wav:"audio/wav",mp3:"audio/mpeg"}[e.substr(e.lastIndexOf(".")+1)]}var Lr=[];function Nr(){var e=r.canvas;Lr.forEach((function(t){t(e.width,e.height)}))}function Pr(e,t,n){t&&n?(e.an=t,e.Km=n):(t=e.an,n=e.Km);var o=t,a=n;if(r.forcedAspectRatio&&0<r.forcedAspectRatio&&(o/a<r.forcedAspectRatio?o=Math.round(a*r.forcedAspectRatio):a=Math.round(o/r.forcedAspectRatio)),(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===e.parentNode&&"undefined"!=typeof screen){var i=Math.min(screen.width/o,screen.height/a);o=Math.round(o*i),a=Math.round(a*i)}Cr?(e.width!=o&&(e.width=o),e.height!=a&&(e.height=a),void 0!==e.style&&(e.style.removeProperty("width"),e.style.removeProperty("height"))):(e.width!=t&&(e.width=t),e.height!=n&&(e.height=n),void 0!==e.style&&(o!=t||a!=n?(e.style.setProperty("width",o+"px","important"),e.style.setProperty("height",a+"px","important")):(e.style.removeProperty("width"),e.style.removeProperty("height"))))}var jr,Gr,Wr,zr,Ur,$r=!1,Hr=0,Vr=0,Kr=0,Yr={alpha:!1,depth:!1,stencil:!1,antialias:!1},Xr={},qr=1,Jr=[],Qr=[],Zr=[],en=[],tn=[],rn=[],nn=[],on=[],an=[],sn=[],pn=[],ln=[],un={},dn={};function cn(e){yn||(yn=e)}function gn(e){for(var t=qr++,r=e.length;r<t;r++)e[r]=null;return t}function hn(e,t,r){for(var n="",o=0;o<e;++o){var a=r?le[r+4*o>>2]:-1;n+=me(le[t+4*o>>2],0>a?void 0:a)}return n}function fn(e,t){if(r.preinitializedWebGLContext){var n=r.preinitializedWebGLContext;t.Al=Number(n.getParameter(n.VERSION).match(/^WebGL (\d+).\d+/)[1])}else e.Lk||(e.Lk=e.getContext,e.getContext=function(t,r){return"webgl"==t==(r=e.Lk(t,r))instanceof WebGLRenderingContext?r:null}),n=e.getContext("webgl2",t);return n?function(e,t){var r=gn(on),n={xn:r,attributes:t,version:t.Al,il:e};return e.canvas&&(e.canvas.Xl=n),on[r]=n,(void 0===t.Am||t.Am)&&function(e){if(e||(e=bn),!e.Mm){e.Mm=!0;var t=e.il;t.un=t.getExtension("WEBGL_draw_instanced_base_vertex_base_instance"),t.An=t.getExtension("WEBGL_multi_draw_instanced_base_vertex_base_instance"),2<=e.version&&(t.Mk=t.getExtension("EXT_disjoint_timer_query_webgl2")),(2>e.version||!t.Mk)&&(t.Mk=t.getExtension("EXT_disjoint_timer_query")),t.Cn=t.getExtension("WEBGL_multi_draw"),(t.getSupportedExtensions()||[]).forEach((function(e){e.includes("lose_context")||e.includes("debug")||t.getExtension(e)}))}}(n),r}(n,t):0}function mn(e){bn=on[e],r.dl=ua=bn&&bn.il}var yn,bn,_n={},vn=[];function wn(e,t,r){var n;for(vn.length=0,r>>=2;n=ie[t++];)r+=105!=n&r,vn.push(105==n?le[r]:ce[r++>>1]),++r;return Ne[e].apply(null,vn)}var kn={},Tn=0,On=[];function xn(e,t,r,n){ua.drawElements(e,t,r,n)}function Sn(e,t,r,n){for(var o=0;o<e;o++){var a=ua[r](),i=a&&gn(n);a?(a.name=i,n[i]=a):cn(1282),le[t+4*o>>2]=i}}function En(e,t,r,n,o,a,i,s){t=Qr[t],(e=ua[e](t,r))&&(n=s&&be(e.name,s,n),o&&(le[o>>2]=n),a&&(le[a>>2]=e.size),i&&(le[i>>2]=e.type))}function Fn(e,t){ue[e>>2]=t,ue[e+4>>2]=(t-ue[e>>2])/4294967296}function Mn(e,t,r){if(t){var n=void 0;switch(e){case 36346:n=1;break;case 36344:return void(0!=r&&1!=r&&cn(1280));case 34814:case 36345:n=0;break;case 34466:var o=ua.getParameter(34467);n=o?o.length:0;break;case 33309:if(2>bn.version)return void cn(1282);n=2*(ua.getSupportedExtensions()||[]).length;break;case 33307:case 33308:if(2>bn.version)return void cn(1280);n=33307==e?3:0}if(void 0===n)switch(o=ua.getParameter(e),typeof o){case"number":n=o;break;case"boolean":n=o?1:0;break;case"string":return void cn(1280);case"object":if(null===o)switch(e){case 34964:case 35725:case 34965:case 36006:case 36007:case 32873:case 34229:case 36662:case 36663:case 35053:case 35055:case 36010:case 35097:case 35869:case 32874:case 36389:case 35983:case 35368:case 34068:n=0;break;default:return void cn(1280)}else{if(o instanceof Float32Array||o instanceof Uint32Array||o instanceof Int32Array||o instanceof Array){for(e=0;e<o.length;++e)switch(r){case 0:le[t+4*e>>2]=o[e];break;case 2:de[t+4*e>>2]=o[e];break;case 4:ae[t+e>>0]=o[e]?1:0}return}try{n=0|o.name}catch(t){return cn(1280),void te("GL_INVALID_ENUM in glGet"+r+"v: Unknown object returned from WebGL getParameter("+e+")! (error: "+t+")")}}break;default:return cn(1280),void te("GL_INVALID_ENUM in glGet"+r+"v: Native code calling glGet"+r+"v("+e+") and it returns "+o+" of type "+typeof o+"!")}switch(r){case 1:Fn(t,n);break;case 0:le[t>>2]=n;break;case 2:de[t>>2]=n;break;case 4:ae[t>>0]=n?1:0}}else cn(1281)}function Rn(e,t,r,n){if(r){switch(typeof(t=ua.getIndexedParameter(e,t))){case"boolean":e=t?1:0;break;case"number":e=t;break;case"object":if(null===t)switch(e){case 35983:case 35368:e=0;break;default:return void cn(1280)}else{if(!(t instanceof WebGLBuffer))return void cn(1280);e=0|t.name}break;default:return void cn(1280)}switch(n){case 1:Fn(r,e);break;case 0:le[r>>2]=e;break;case 2:de[r>>2]=e;break;case 4:ae[r>>0]=e?1:0;break;default:throw"internal emscriptenWebGLGetIndexed() error, bad type: "+n}}else cn(1281)}function Cn(e){var t=_e(e)+1,r=va(t);return be(e,r,t),r}function In(e){return"]"==e.slice(-1)&&e.lastIndexOf("[")}function An(e){var t,r=e.hl,n=e.yl;if(!r)for(e.hl=r={},e.Vl={},t=0;t<ua.getProgramParameter(e,35718);++t){var o=ua.getActiveUniform(e,t),a=o.name;o=o.size;var i=In(a);i=0<i?a.slice(0,i):a;var s=e.xl;for(e.xl+=o,n[i]=[o,s],a=0;a<o;++a)r[s]=a,e.Vl[s++]=i}}function Bn(e){var t=ua.Hl;if(t){var r=t.hl[e];return"number"==typeof r&&(t.hl[e]=r=ua.getUniformLocation(t,t.Vl[e]+(0<r?"["+r+"]":""))),r}cn(1282)}function Dn(e,t,r,n){if(r)if(An(e=Qr[e]),"number"==typeof(e=ua.getUniform(e,Bn(t)))||"boolean"==typeof e)switch(n){case 0:le[r>>2]=e;break;case 2:de[r>>2]=e}else for(t=0;t<e.length;t++)switch(n){case 0:le[r+4*t>>2]=e[t];break;case 2:de[r+4*t>>2]=e[t]}else cn(1281)}function Ln(e,t,r,n){if(r)if(e=ua.getVertexAttrib(e,t),34975==t)le[r>>2]=e&&e.name;else if("number"==typeof e||"boolean"==typeof e)switch(n){case 0:le[r>>2]=e;break;case 2:de[r>>2]=e;break;case 5:le[r>>2]=Math.fround(e)}else for(t=0;t<e.length;t++)switch(n){case 0:le[r+4*t>>2]=e[t];break;case 2:de[r+4*t>>2]=e[t];break;case 5:le[r+4*t>>2]=Math.fround(e[t])}else cn(1281)}function Nn(e){return 0==(e-=5120)?ae:1==e?ie:2==e?se:4==e?le:6==e?de:5==e||28922==e||28520==e||30779==e||30782==e?ue:pe}function Pn(e){return 31-Math.clz32(e.BYTES_PER_ELEMENT)}function jn(e,t){if(0>=e)return e;var r=32>=t?Math.abs(1<<t-1):Math.pow(2,t-1);return e>=r&&(32>=t||e>r)&&(e=-2*r+e),e}function Gn(e,t){return 0<=e?e:32>=t?2*Math.abs(1<<t-1)+e:Math.pow(2,t)+e}function Wn(e){for(var t=e;ie[t];)++t;return t-e}function zn(e,t){var r=Array(_e(e)+1);return e=ye(e,r,0,r.length),t&&(r.length=e),r}function Un(e){if(!e||!e.callee||!e.callee.name)return[null,"",""];var t,r=e.callee.name,n="(",o=!0;for(t in e){var a=e[t];o||(n+=", "),o=!1,n="number"==typeof a||"string"==typeof a?n+a:n+"("+typeof a+")"}return n+=")",o&&(n=""),[e=(e=e.callee.caller)?e.arguments:[],r,n]}var $n={};function Hn(){if(!Vn){var e,t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:"./this.program"};for(e in $n)void 0===$n[e]?delete t[e]:t[e]=$n[e];var r=[];for(e in t)r.push(e+"="+t[e]);Vn=r}return Vn}var Vn,Kn=[null,[],[]];function Yn(e,t){var r=Kn[e];0===t||10===t?((1===e?ee:te)(fe(r,0)),r.length=0):r.push(t)}var Xn=null,qn=null,Jn=null,Qn=null,Zn=null,eo=null,to=null,ro=null,no=null,oo=null,ao=null,io={},so=!1,po=null,lo=null,uo=0,co=null,go=-1,ho=-1,fo=null,mo=null,yo=!1;function bo(e,t){mo?mo.segmentForVideo(e,performance.now(),(e=>{0<e.confidenceMasks.length&&de.set(e.confidenceMasks[0].getAsFloat32Array(),t>>2)})):console.error("Trying to use mediaPipe segment but it is not initialized.")}async function _o(){if(!mo&&!yo){console.log("DeepAR MediaPipe segmentation initialize started"),yo=!0,fo||(fo=await u.FilesetResolver.forVisionTasks(r.segmentationConfig.mediaPipeConfig.wasmBasePath));var e=q("segmentationMediaPipe");e||(e=await J("segmentationMediaPipe")),mo=await u.ImageSegmenter.createFromOptions(fo,{runningMode:"VIDEO",baseOptions:{modelAssetBuffer:new Uint8Array(e)},outputConfidenceMasks:!0}),yo=!1,console.log("DeepAR MediaPipe segmentation initialized")}}var vo=!1,wo=null,ko=null,To=null,Oo=null,xo=null;function So(e){if(!vo&&null!=wo&&wo.isInitialized()){var t=ko.getVideoCanvas();t.width=e.width,t.height=e.height,ko.preProcessWithBuffer(e);try{wo.trackSync()}catch(e){return console.log(e),void(To=!1)}null!=(e=wo.getInterpolatedPose())&&wo.isDetected()?(xo=e.t(),Oo=e.R(),To=!0):To=!1}}var Eo=!1,Fo=null,Mo=null,Ro=null,Co=null,Io=null,Ao=null,Bo=null,Do=null;async function Lo(){if(null==Fo&&(Fo=new l.Foot),null==Mo&&(Mo=new l.VideoManager(null)),!Fo.isInitialized()&&!Eo){Eo=!0,console.log("DeepAR FootTracking initialize started.");var e,t=q("footDetector");t||(e=J("footDetector"));var n,o=q("footTracker");o||(n=J("footTracker"));var a,i=q("footObj");i||(a=J("footObj")),t||(t=await e),o||(o=await n),i||(i=await a),await Fo.initialize(Mo,{poseEstimationWasmFilename:r.footTrackingConfig.poseEstimationWasmPath,modelFilename:t,featuresFilename:o,objFilename:i,fovY:50,detectScoreThs:.25,validTrackedKeypThs:.3,trackScoreThs:.3,footToDetect:"BOTH",wasmBackend:{enable:!0,tfjsBackendWasmPath:r.footTrackingConfig.tfjsBackendWasmPath,tfjsBackendWasmSimdPath:r.footTrackingConfig.tfjsBackendWasmSimdPath,tfjsBackendWasmThreadedPath:r.footTrackingConfig.tfjsBackendWasmThreadedSimdPath}}),Eo=!1,console.log("DeepAR FootTracking initialized!")}}function No(){return null!=Fo&&Fo.isInitialized()}function Po(e){if(!Eo&&null!=Fo&&Fo.isInitialized()){var t=Mo.getVideoCanvas();t.width=e.width,t.height=e.height,Mo.preProcessWithBuffer(e);try{Fo.trackSync()}catch(e){return console.log(e),void(Do=Io=!1)}e=Fo.getInterpolatedPose("LEFT_FOOT"),t=Fo.getInterpolatedPose("RIGHT_FOOT"),null!=e&&e.isDetected()?(Ro=e.t(),Co=e.R(),Io=!0):Io=!1,null!=t&&t.isDetected()?(Ao=t.t(),Bo=t.R(),Do=!0):Do=!1}}var jo=null,Go=null,Wo=null,zo=!1;function Uo(e,t){if(jo.isInitialized()){var r=Go.getVideoCanvas();r.width=e.width,r.height=e.height,Go.preProcessWithBuffer(e),jo.processSync(),Wo=jo.getOutput(),Go.postProcess(),de.set(Wo,t>>2)}}async function $o(){if(null==jo&&(jo=new l.Segmentation),null==Go&&(Go=new l.VideoManager(null)),!jo.isInitialized()&&!zo){console.log("DeepAR segmentation initialize started"),zo=!0;var e=q("segmentationXzimg");e||(e=await J("segmentationXzimg")),await jo.initialize(Go,{filename:e}),zo=!1,console.log("DeepAR segmentation initialized")}}function Ho(){return null!=jo&&jo.isInitialized()}var Vo=!1,Ko=null,Yo=null,Xo=null,qo=null,Jo=null,Qo=0,Zo=0;function ea(){return null!=Ko&&Ko.isInitialized()}function ta(e){if(ea()){var t=Yo.getVideoCanvas();t.width=e.width,t.height=e.height,Yo.preProcessWithBuffer(e);try{Ko.trackSync()}catch(e){return console.log(e),void(Xo=!1)}e=!1,Ko.isDetected()?(++Qo>Zo&&(e=!0),(Xo=e)&&(e=Ko.getInterpolatedPose(),qo=e.t(),Jo=e.R())):(Qo=0,Xo=!1)}}function ra(e,t){for(var r=0,n=0;n<=t;r+=e[n++]);return r}var na=[31,29,31,30,31,30,31,31,30,31,30,31],oa=[31,28,31,30,31,30,31,31,30,31,30,31];function aa(e,t){for(e=new Date(e.getTime());0<t;){var r=e.getMonth(),n=(tr(e.getFullYear())?na:oa)[r];if(!(t>n-e.getDate())){e.setDate(e.getDate()+t);break}t-=n-e.getDate()+1,e.setDate(1),11>r?e.setMonth(r+1):(e.setMonth(0),e.setFullYear(e.getFullYear()+1))}return e}function ia(e,t,r,n){function o(e,t,r){for(e="number"==typeof e?e.toString():e||"";e.length<t;)e=r[0]+e;return e}function a(e,t){return o(e,t,"0")}function i(e,t){function r(e){return 0>e?-1:0<e?1:0}var n;return 0===(n=r(e.getFullYear()-t.getFullYear()))&&0===(n=r(e.getMonth()-t.getMonth()))&&(n=r(e.getDate()-t.getDate())),n}function s(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function p(e){e=aa(new Date(e.gl+1900,0,1),e.fl);var t=new Date(e.getFullYear()+1,0,4),r=s(new Date(e.getFullYear(),0,4));return t=s(t),0>=i(r,e)?0>=i(t,e)?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1}var l=le[n+40>>2];for(var u in n={Ym:le[n>>2],Xm:le[n+4>>2],vl:le[n+8>>2],Fl:le[n+12>>2],wl:le[n+16>>2],gl:le[n+20>>2],Tk:le[n+24>>2],fl:le[n+28>>2],In:le[n+32>>2],Wm:le[n+36>>2],Zm:l?me(l):""},r=me(r),l={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})r=r.replace(new RegExp(u,"g"),l[u]);var d="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),c="January February March April May June July August September October November December".split(" ");for(u in l={"%a":function(e){return d[e.Tk].substring(0,3)},"%A":function(e){return d[e.Tk]},"%b":function(e){return c[e.wl].substring(0,3)},"%B":function(e){return c[e.wl]},"%C":function(e){return a((e.gl+1900)/100|0,2)},"%d":function(e){return a(e.Fl,2)},"%e":function(e){return o(e.Fl,2," ")},"%g":function(e){return p(e).toString().substring(2)},"%G":function(e){return p(e)},"%H":function(e){return a(e.vl,2)},"%I":function(e){return 0==(e=e.vl)?e=12:12<e&&(e-=12),a(e,2)},"%j":function(e){return a(e.Fl+ra(tr(e.gl+1900)?na:oa,e.wl-1),3)},"%m":function(e){return a(e.wl+1,2)},"%M":function(e){return a(e.Xm,2)},"%n":function(){return"\n"},"%p":function(e){return 0<=e.vl&&12>e.vl?"AM":"PM"},"%S":function(e){return a(e.Ym,2)},"%t":function(){return"\t"},"%u":function(e){return e.Tk||7},"%U":function(e){return a(Math.floor((e.fl+7-e.Tk)/7),2)},"%V":function(e){var t=Math.floor((e.fl+7-(e.Tk+6)%7)/7);if(2>=(e.Tk+371-e.fl-2)%7&&t++,t)53==t&&(4==(r=(e.Tk+371-e.fl)%7)||3==r&&tr(e.gl)||(t=1));else{t=52;var r=(e.Tk+7-e.fl-1)%7;(4==r||5==r&&tr(e.gl%400-1))&&t++}return a(t,2)},"%w":function(e){return e.Tk},"%W":function(e){return a(Math.floor((e.fl+7-(e.Tk+6)%7)/7),2)},"%y":function(e){return(e.gl+1900).toString().substring(2)},"%Y":function(e){return e.gl+1900},"%z":function(e){var t=0<=(e=e.Wm);return e=Math.abs(e)/60,(t?"+":"-")+String("0000"+(e/60*100+e%60)).slice(-4)},"%Z":function(e){return e.Zm},"%%":function(){return"%"}},r=r.replace(/%%/g,"\0\0"),l)r.includes(u)&&(r=r.replace(new RegExp(u,"g"),l[u](n)));return(u=zn(r=r.replace(/\0\0/g,"%"),!1)).length>t?0:(ae.set(u,e),u.length-1)}function sa(e,t,n,o){var a=!n||n.every((e=>"number"===e||"boolean"===e));return"string"!==t&&a&&!o?r["_"+e]:function(){return function(e,t,n,o){var a={string:e=>{var t=0;if(null!=e&&0!==e){var r=1+(e.length<<2);be(e,t=Ma(r),r)}return t},array:e=>{var t=Ma(e.length);return ae.set(e,t),t}};e=r["_"+e];var i=[],s=0;if(o)for(var p=0;p<o.length;p++){var l=a[n[p]];l?(0===s&&(s=Ea()),i[p]=l(o[p])):i[p]=o[p]}return function(e){return 0!==s&&Fa(s),"string"===t?me(e):"boolean"===t?!!e:e}(n=e.apply(null,i))}(e,t,n,arguments)}}tt=r.InternalError=et("InternalError");for(var pa=Array(256),la=0;256>la;++la)pa[la]=String.fromCharCode(la);at=pa,st=r.BindingError=et("BindingError"),kt.prototype.isAliasOf=function(e){if(!(this instanceof kt&&e instanceof kt))return!1;var t=this.Ek.Ik.Gk,r=this.Ek.Fk,n=e.Ek.Ik.Gk;for(e=e.Ek.Fk;t.Sk;)r=t.ql(r),t=t.Sk;for(;n.Sk;)e=n.ql(e),n=n.Sk;return t===n&&r===e},kt.prototype.clone=function(){if(this.Ek.Fk||ut(this),this.Ek.pl)return this.Ek.count.value+=1,this;var e=wt,t=Object,r=t.create,n=Object.getPrototypeOf(this),o=this.Ek;return(e=e(r.call(t,n,{Ek:{value:{count:o.count,jl:o.jl,pl:o.pl,Fk:o.Fk,Ik:o.Ik,Nk:o.Nk,Pk:o.Pk}}}))).Ek.count.value+=1,e.Ek.jl=!1,e},kt.prototype.delete=function(){this.Ek.Fk||ut(this),this.Ek.jl&&!this.Ek.pl&&pt("Object already scheduled for deletion"),ct(this),gt(this.Ek),this.Ek.pl||(this.Ek.Nk=void 0,this.Ek.Fk=void 0)},kt.prototype.isDeleted=function(){return!this.Ek.Fk},kt.prototype.deleteLater=function(){return this.Ek.Fk||ut(this),this.Ek.jl&&!this.Ek.pl&&pt("Object already scheduled for deletion"),mt.push(this),1===mt.length&&bt&&bt(yt),this.Ek.jl=!0,this},r.getInheritedInstanceCount=function(){return Object.keys(_t).length},r.getLiveInheritedInstances=function(){var e,t=[];for(e in _t)_t.hasOwnProperty(e)&&t.push(_t[e]);return t},r.flushPendingDeletes=yt,r.setDelayFunction=function(e){bt=e,mt.length&&bt&&bt(yt)},Rt.prototype.Fm=function(e){return this.Pl&&(e=this.Pl(e)),e},Rt.prototype.Il=function(e){this.Xk&&this.Xk(e)},Rt.prototype.argPackAdvance=8,Rt.prototype.readValueFromPointer=Ye,Rt.prototype.deleteObject=function(e){null!==e&&e.delete()},Rt.prototype.fromWireType=function(e){function t(){return this.tl?vt(this.Gk.kl,{Ik:this.Nm,Fk:r,Pk:this,Nk:e}):vt(this.Gk.kl,{Ik:this,Fk:e})}var r=this.Fm(e);if(!r)return this.Il(e),null;var n=function(e,t){for(void 0===t&&pt("ptr should not be undefined");e.Sk;)t=e.ql(t),e=e.Sk;return _t[t]}(this.Gk,r);if(void 0!==n)return 0===n.Ek.count.value?(n.Ek.Fk=r,n.Ek.Nk=e,n.clone()):(n=n.clone(),this.Il(e),n);if(n=this.Gk.Cm(r),!(n=ft[n]))return t.call(this);n=this.sl?n.ym:n.pointerType;var o=ht(r,this.Gk,n.Gk);return null===o?t.call(this):this.tl?vt(n.Gk.kl,{Ik:n,Fk:o,Pk:this,Nk:e}):vt(n.Gk.kl,{Ik:n,Fk:o})},Bt=r.UnboundTypeError=et("UnboundTypeError"),r.count_emval_handles=function(){for(var e=0,t=5;t<Gt.length;++t)void 0!==Gt[t]&&++e;return e},r.get_first_emval=function(){for(var e=5;e<Gt.length;++e)if(void 0!==Gt[e])return Gt[e];return null},r.requestFullscreen=function(e,t){!function(e,t){function n(){Sr=!1;var e=o.parentNode;(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===e?(o.exitFullscreen=Ir,Rr&&o.requestPointerLock(),Sr=!0,Cr?("undefined"!=typeof SDL&&(le[SDL.screen>>2]=8388608|ue[SDL.screen>>2]),Pr(r.canvas),Nr()):Pr(o)):(e.parentNode.insertBefore(o,e),e.parentNode.removeChild(e),Cr?("undefined"!=typeof SDL&&(le[SDL.screen>>2]=-8388609&ue[SDL.screen>>2]),Pr(r.canvas),Nr()):Pr(o)),r.onFullScreen&&r.onFullScreen(Sr),r.onFullscreen&&r.onFullscreen(Sr)}void 0===(Rr=e)&&(Rr=!0),void 0===(Cr=t)&&(Cr=!1);var o=r.canvas;Mr||(Mr=!0,document.addEventListener("fullscreenchange",n,!1),document.addEventListener("mozfullscreenchange",n,!1),document.addEventListener("webkitfullscreenchange",n,!1),document.addEventListener("MSFullscreenChange",n,!1));var a=document.createElement("div");o.parentNode.insertBefore(a,o),a.appendChild(o),a.requestFullscreen=a.requestFullscreen||a.mozRequestFullScreen||a.msRequestFullscreen||(a.webkitRequestFullscreen?()=>a.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):null)||(a.webkitRequestFullScreen?()=>a.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):null),a.requestFullscreen()}(e,t)},r.requestAnimationFrame=function(e){Br(e)},r.setCanvasSize=function(e,t,n){Pr(r.canvas,e,t),n||Nr()},r.pauseMainLoop=function(){br=null,_r++},r.resumeMainLoop=function(){_r++;var e=wr,t=kr,n=vr;vr=null,function(e){function t(){return!(n<_r&&(--Fe,ur(),1))}!vr||Ie("emscripten_set_main_loop: there can only be one main loop function at once: call emscripten_cancel_main_loop to cancel the previous one before setting a new one with different parameters."),vr=e;var n=_r;yr=!1,fr=function(){if(!ge)if(0<Or.length){var n=Date.now(),o=Or.shift();if(o.wn(o.sn),mr){var a=mr,i=0==a%1?a-1:Math.floor(a);mr=o.tn?i:(8*a+(i+.5))/9}ee('main loop blocker "'+o.name+'" took '+(Date.now()-n)+" ms"),r.setStatus&&(n=r.statusMessage||"Please wait...",a=xr.vn,(o=mr)?o<a?r.setStatus(n+" ("+(a-o)+"/"+a+")"):r.setStatus(n):r.setStatus("")),t()&&setTimeout(fr,0)}else t()&&(Tr=Tr+1|0,1==wr&&1<kr&&0!=Tr%kr?br():(0==wr&&(hr=rr()),ge||r.preMainLoop&&!1===r.preMainLoop()||(dr(e),r.postMainLoop&&r.postMainLoop()),t()&&("object"==typeof SDL&&SDL.audio&&SDL.audio.Pm&&SDL.audio.Pm(),br())))}}(n),sr(e,t),br()},r.getUserMedia=function(){window.getUserMedia||(window.getUserMedia=navigator.getUserMedia||navigator.mozGetUserMedia),window.getUserMedia(void 0)},r.createContext=function(e,t,n,o){return function(e,t,n,o){if(t&&r.dl&&e==r.canvas)return r.dl;var a;if(t){var i={antialias:!1,alpha:!1,Al:2};if(o)for(var s in o)i[s]=o[s];if(void 0!==_n&&(a=fn(e,i)))var p=on[a].il}else p=e.getContext("2d");return p?(n&&(t||void 0===ua||Ie("cannot set in module if GLctx is used, but we are a non-GL context that would replace it"),r.dl=p,t&&mn(a),r.$m=t,Fr.forEach((function(e){e()})),function(){function e(){Er=document.pointerLockElement===r.canvas||document.mozPointerLockElement===r.canvas||document.webkitPointerLockElement===r.canvas||document.msPointerLockElement===r.canvas}if(r.preloadPlugins||(r.preloadPlugins=[]),!jr){jr=!0;try{Gr=!0}catch(e){Gr=!1,te("warning: no blob constructor, cannot create blobs with mimetypes")}Wr="undefined"!=typeof MozBlobBuilder?MozBlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:Gr?null:te("warning: no BlobBuilder"),zr="undefined"!=typeof window?window.URL?window.URL:window.webkitURL:void 0,r.Nl||void 0!==zr||(te("warning: Browser does not support creating object URLs. Built-in browser image decoding will not be available."),r.Nl=!0),r.preloadPlugins.push({canHandle:function(e){return!r.Nl&&/\.(jpg|jpeg|png|bmp)$/i.test(e)},handle:function(e,t,r,n){var o=null;if(Gr)try{(o=new Blob([e],{type:Dr(t)})).size!==e.length&&(o=new Blob([new Uint8Array(e).buffer],{type:Dr(t)}))}catch(e){cr("Blob constructor present but fails: "+e+"; falling back to blob builder")}o||((o=new Wr).append(new Uint8Array(e).buffer),o=o.getBlob());var a=zr.createObjectURL(o),i=new Image;i.onload=()=>{i.complete||Ie("Image "+t+" could not be decoded");var n=document.createElement("canvas");n.width=i.width,n.height=i.height,n.getContext("2d").drawImage(i,0,0),zr.revokeObjectURL(a),r&&r(e)},i.onerror=()=>{ee("Image "+a+" could not be decoded"),n&&n()},i.src=a}}),r.preloadPlugins.push({canHandle:function(e){return!r.Dn&&e.substr(-4)in{".ogg":1,".wav":1,".mp3":1}},handle:function(e,t,r,n){function o(){i||(i=!0,r&&r(e))}function a(){i||(i=!0,new Audio,n&&n())}var i=!1;if(!Gr)return a();try{var s=new Blob([e],{type:Dr(t)})}catch(e){return a()}s=zr.createObjectURL(s);var p=new Audio;p.addEventListener("canplaythrough",(()=>o()),!1),p.onerror=function(){if(!i){te("warning: browser could not fully decode audio "+t+", trying slower base64 approach");for(var r="",n=0,a=0,s=0;s<e.length;s++)for(n=n<<8|e[s],a+=8;6<=a;){var l=n>>a-6&63;a-=6,r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[l]}2==a?(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(3&n)<<4],r+="=="):4==a&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(15&n)<<2],r+="="),p.src="data:audio/x-"+t.substr(-3)+";base64,"+r,o()}},p.src=s,function(e){Fe+=1,setTimeout((function(){--Fe,dr(e)}),1e4)}((function(){o()}))}});var t=r.canvas;t&&(t.requestPointerLock=t.requestPointerLock||t.mozRequestPointerLock||t.webkitRequestPointerLock||t.msRequestPointerLock||(()=>{}),t.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock||document.msExitPointerLock||(()=>{}),t.exitPointerLock=t.exitPointerLock.bind(document),document.addEventListener("pointerlockchange",e,!1),document.addEventListener("mozpointerlockchange",e,!1),document.addEventListener("webkitpointerlockchange",e,!1),document.addEventListener("mspointerlockchange",e,!1),r.elementPointerLock&&t.addEventListener("click",(e=>{!Er&&r.canvas.requestPointerLock&&(r.canvas.requestPointerLock(),e.preventDefault())}),!1))}}()),p):null}(e,t,n,o)};for(var ua,da=0;32>da;++da)On.push(Array(da));(po=document.createElement("canvas")).style.display="none",lo=po.getContext("2d",{willReadFrequently:!0,desynchronized:!0,alpha:!1});e:{if(!window.AudioContext){if(!window.webkitAudioContext){console.error("Audio playback is not supported!");break e}window.AudioContext=window.webkitAudioContext}oo=new AudioContext,(ao=oo.createGain()).connect(oo.destination),so=!0}var ca={l:function(e,t,r,n){Ie("Assertion failed: "+me(e)+", at: "+[t?me(t):"unknown filename",r,n?me(n):"unknown function"])},m:function(e){return(e=new $e(e)).$k()||(e.Dl(!0),We--),e.El(!1),Ge.push(e),e.Yk(),e.al()},w:function(){Sa(0);var e=Ge.pop();if(e.Rm()&&!e.Ll()){var t=e.Gm();t&&Ue(t)(e.ol),ha(e.ol)}ze=0},a:He,c:He,f:He,ba:He,mb:function(){var e=Ge.pop();e||Ie("no exception to throw");var t=e.ol;throw e.Ll()||(Ge.push(e),e.El(!0),e.Dl(!1),We++),ze=t,t},I:function(e,t,r){throw new $e(e).ll(t,r),ze=e,We++,e},tc:function(){return We},e:function(e){throw ze||(ze=e),e},Ia:function(){return 0},Ac:function(){return 0},Bc:function(){},Mh:function(e){var t=Ve[e];delete Ve[e];var r=t.Bl,n=t.Xk,o=t.Kl,a=o.map((e=>e.Jm)).concat(o.map((e=>e.Tm)));nt([e],a,(e=>{var a={};return o.forEach(((t,r)=>{var n=e[r],i=t.Hm,s=t.Im,p=e[r+o.length],l=t.Sm,u=t.Um;a[t.Bm]={read:e=>n.fromWireType(i(s,e)),write:(e,t)=>{var r=[];l(u,e,p.toWireType(r,t)),Ke(r)}}})),[{name:t.name,fromWireType:function(e){var t,r={};for(t in a)r[t]=a[t].read(e);return n(e),r},toWireType:function(e,t){for(var o in a)if(!(o in t))throw new TypeError('Missing field:  "'+o+'"');var i=r();for(o in a)a[o].write(i,t[o]);return null!==e&&e.push(n,i),i},argPackAdvance:8,readValueFromPointer:Ye,Ok:n}]}))},hc:function(){},ei:function(e,t,r,n,o){var a=ot(r);lt(e,{name:t=it(t),fromWireType:function(e){return!!e},toWireType:function(e,t){return t?n:o},argPackAdvance:8,readValueFromPointer:function(e){if(1===r)var n=ae;else if(2===r)n=se;else{if(4!==r)throw new TypeError("Unknown boolean type size: "+t);n=le}return this.fromWireType(n[e>>a])},Ok:null})},gh:function(e,t,r,n,o,a,i,s,p,l,u,d,c){u=it(u),a=At(o,a),s&&(s=At(i,s)),l&&(l=At(p,l)),c=At(d,c);var g=Qe(u);Ot(g,(function(){Lt("Cannot construct "+u+" due to unbound types",[n])})),nt([e,t,r],n?[n]:[],(function(t){if(t=t[0],n)var r=t.Gk,o=r.kl;else o=kt.prototype;t=Ze(g,(function(){if(Object.getPrototypeOf(this)!==i)throw new st("Use 'new' to construct "+u);if(void 0===p.cl)throw new st(u+" has no accessible constructor");var e=p.cl[arguments.length];if(void 0===e)throw new st("Tried to invoke ctor of "+u+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(p.cl).toString()+") parameters instead!");return e.apply(this,arguments)}));var i=Object.create(o,{constructor:{value:t}});t.prototype=i;var p=new xt(u,t,i,c,r,a,s,l);r=new Rt(u,p,!0,!1),o=new Rt(u+"*",p,!1,!1);var d=new Rt(u+" const*",p,!1,!0);return ft[e]={pointerType:o,ym:d},Ct(g,t),[r,o,d]}))},Xg:function(e,t,r,n,o,a){0<t||Ie();var i=Nt(t,r);o=At(n,o),nt([],[e],(function(e){var r="constructor "+(e=e[0]).name;if(void 0===e.Gk.cl&&(e.Gk.cl=[]),void 0!==e.Gk.cl[t-1])throw new st("Cannot register multiple constructors with identical number of parameters ("+(t-1)+") for class '"+e.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return e.Gk.cl[t-1]=()=>{Lt("Cannot construct "+e.name+" due to unbound types",i)},nt([],i,(function(n){return n.splice(1,0,null),e.Gk.cl[t-1]=Pt(r,n,null,o,a),[]})),[]}))},_:function(e,t,r,n,o,a,i,s){var p=Nt(r,n);t=it(t),a=At(o,a),nt([],[e],(function(e){function n(){Lt("Cannot call "+o+" due to unbound types",p)}var o=(e=e[0]).name+"."+t;t.startsWith("@@")&&(t=Symbol[t.substring(2)]),s&&e.Gk.Om.push(t);var l=e.Gk.kl,u=l[t];return void 0===u||void 0===u.Kk&&u.className!==e.name&&u.rl===r-2?(n.rl=r-2,n.className=e.name,l[t]=n):(Tt(l,t,o),l[t].Kk[r-2]=n),nt([],p,(function(n){return n=Pt(o,n,e,a,i),void 0===l[t].Kk?(n.rl=r-2,l[t]=n):l[t].Kk[r-2]=n,[]})),[]}))},di:function(e,t){lt(e,{name:t=it(t),fromWireType:function(e){e||pt("Cannot use deleted val. handle = "+e);var t=Gt[e].value;return Wt(e),t},toWireType:function(e,t){return zt(t)},argPackAdvance:8,readValueFromPointer:Ye,Ok:null})},ji:function(e,t,r,n){function o(){}r=ot(r),t=it(t),o.values={},lt(e,{name:t,constructor:o,fromWireType:function(e){return this.constructor.values[e]},toWireType:function(e,t){return t.value},argPackAdvance:8,readValueFromPointer:Ut(t,r,n),Ok:null}),Ot(t,o)},sa:function(e,t,r){var n=$t(e,"enum");t=it(t),e=n.constructor,n=Object.create(n.constructor.prototype,{value:{value:r},constructor:{value:Ze(n.name+"_"+t,(function(){}))}}),e.values[r]=n,e[t]=n},La:function(e,t,r){r=ot(r),lt(e,{name:t=it(t),fromWireType:function(e){return e},toWireType:function(e,t){return t},argPackAdvance:8,readValueFromPointer:Vt(t,r),Ok:null})},Bh:function(e,t,r,n,o,a){var i=Nt(t,r);e=it(e),o=At(n,o),Ot(e,(function(){Lt("Cannot call "+e+" due to unbound types",i)}),t-1),nt([],i,(function(r){return Ct(e,Pt(e,[r[0],null].concat(r.slice(1)),null,o,a),t-1),[]}))},O:function(e,t,r,n,o){t=it(t),-1===o&&(o=4294967295),o=ot(r);var a=e=>e;if(0===n){var i=32-8*r;a=e=>e<<i>>>i}r=t.includes("unsigned")?function(e,t){return t>>>0}:function(e,t){return t},lt(e,{name:t,fromWireType:a,toWireType:r,argPackAdvance:8,readValueFromPointer:Kt(t,o,0!==n),Ok:null})},G:function(e,t,r){function n(e){e>>=2;var t=ue;return new o(t.buffer,t[e+1],t[e])}var o=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];lt(e,{name:r=it(r),fromWireType:n,argPackAdvance:8,readValueFromPointer:n},{Lm:!0})},Ka:function(e,t){var r="std::string"===(t=it(t));lt(e,{name:t,fromWireType:function(e){var t=ue[e>>2],n=e+4;if(r)for(var o=n,a=0;a<=t;++a){var i=n+a;if(a==t||0==ie[i]){if(o=me(o,i-o),void 0===s)var s=o;else s+=String.fromCharCode(0),s+=o;o=i+1}}else{for(s=Array(t),a=0;a<t;++a)s[a]=String.fromCharCode(ie[n+a]);s=s.join("")}return wa(e),s},toWireType:function(e,t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));var n,o="string"==typeof t;o||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array||pt("Cannot pass non-string to std::string"),n=r&&o?_e(t):t.length;var a=va(4+n+1),i=a+4;if(ue[a>>2]=n,r&&o)be(t,i,n+1);else if(o)for(o=0;o<n;++o){var s=t.charCodeAt(o);255<s&&(wa(i),pt("String has UTF-16 code units that do not fit in 8 bits")),ie[i+o]=s}else for(o=0;o<n;++o)ie[i+o]=t[o];return null!==e&&e.push(wa,a),a},argPackAdvance:8,readValueFromPointer:Ye,Ok:function(e){wa(e)}})},ra:function(e,t,r){if(r=it(r),2===t)var n=Xt,o=qt,a=Jt,i=()=>pe,s=1;else 4===t&&(n=Qt,o=Zt,a=er,i=()=>ue,s=2);lt(e,{name:r,fromWireType:function(e){for(var r,o=ue[e>>2],a=i(),p=e+4,l=0;l<=o;++l){var u=e+4+l*t;l!=o&&0!=a[u>>s]||(p=n(p,u-p),void 0===r?r=p:(r+=String.fromCharCode(0),r+=p),p=u+t)}return wa(e),r},toWireType:function(e,n){"string"!=typeof n&&pt("Cannot pass non-string to C++ string type "+r);var i=a(n),p=va(4+i+t);return ue[p>>2]=i>>s,o(n,p+4,i+t),null!==e&&e.push(wa,p),p},argPackAdvance:8,readValueFromPointer:Ye,Ok:function(e){wa(e)}})},Xh:function(e,t,r,n,o,a){Ve[e]={name:it(t),Bl:At(r,n),Xk:At(o,a),Kl:[]}},Ja:function(e,t,r,n,o,a,i,s,p,l){Ve[e].Kl.push({Bm:it(t),Jm:r,Hm:At(n,o),Im:a,Tm:i,Sm:At(s,p),Um:l})},fi:function(e,t){lt(e,{yn:!0,name:t=it(t),argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},Cc:function(){return!0},uc:function(){throw 1/0},gg:Wt,rg:function(e){4<e&&(Gt[e].Cl+=1)},Cg:function(e,t){return e=(e=$t(e,"_emval_take_value")).readValueFromPointer(t),zt(e)},Ec:function(e,t){e=new Date(1e3*(ue[e>>2]+4294967296*le[e+4>>2])),le[t>>2]=e.getUTCSeconds(),le[t+4>>2]=e.getUTCMinutes(),le[t+8>>2]=e.getUTCHours(),le[t+12>>2]=e.getUTCDate(),le[t+16>>2]=e.getUTCMonth(),le[t+20>>2]=e.getUTCFullYear()-1900,le[t+24>>2]=e.getUTCDay(),le[t+28>>2]=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},Fc:function(e,t){e=new Date(1e3*(ue[e>>2]+4294967296*le[e+4>>2])),le[t>>2]=e.getSeconds(),le[t+4>>2]=e.getMinutes(),le[t+8>>2]=e.getHours(),le[t+12>>2]=e.getDate(),le[t+16>>2]=e.getMonth(),le[t+20>>2]=e.getFullYear()-1900,le[t+24>>2]=e.getDay(),le[t+28>>2]=0|ar(e),le[t+36>>2]=-60*e.getTimezoneOffset();var r=new Date(e.getFullYear(),6,1).getTimezoneOffset(),n=new Date(e.getFullYear(),0,1).getTimezoneOffset();le[t+32>>2]=0|(r!=n&&e.getTimezoneOffset()==Math.min(n,r))},Gc:function(e){var t=new Date(le[e+20>>2]+1900,le[e+16>>2],le[e+12>>2],le[e+8>>2],le[e+4>>2],le[e>>2],0),r=le[e+32>>2],n=t.getTimezoneOffset(),o=new Date(t.getFullYear(),6,1).getTimezoneOffset(),a=new Date(t.getFullYear(),0,1).getTimezoneOffset(),i=Math.min(a,o);return 0>r?le[e+32>>2]=Number(o!=a&&i==n):0<r!=(i==n)&&(o=Math.max(a,o),t.setTime(t.getTime()+6e4*((0<r?i:o)-n))),le[e+24>>2]=t.getDay(),le[e+28>>2]=0|ar(t),le[e>>2]=t.getSeconds(),le[e+4>>2]=t.getMinutes(),le[e+8>>2]=t.getHours(),le[e+12>>2]=t.getDate(),le[e+16>>2]=t.getMonth(),le[e+20>>2]=t.getYear(),t.getTime()/1e3|0},Hc:function(e,t,r){function n(e){return(e=e.toTimeString().match(/\(([A-Za-z ]+)\)$/))?e[1]:"GMT"}var o=(new Date).getFullYear(),a=new Date(o,0,1),i=new Date(o,6,1);o=a.getTimezoneOffset();var s=i.getTimezoneOffset();ue[e>>2]=60*Math.max(o,s),le[t>>2]=Number(o!=s),e=n(a),t=n(i),e=ir(e),t=ir(t),s<o?(ue[r>>2]=e,ue[r+4>>2]=t):(ue[r>>2]=t,ue[r+4>>2]=e)},N:function(){Ie("")},Le:function(e){try{var t=Function('return (function() {}.constructor("return this")( ));')()}catch(e){t=window}var r;for(r in t)if(8==r.length&&116==r.charCodeAt(7)&&101==r.charCodeAt(5)&&117==r.charCodeAt(3)&&100==r.charCodeAt(0)){var n=r;break}for(var o in t[n])if(6==o.length&&110==o.charCodeAt(5)&&100==o.charCodeAt(0)){var a=o;break}return t[n][a].charCodeAt(e)},Ri:function(e,t,r,n,o){if(62e3!=e)r=0;else{if(t)for(;;){if(12321==(e=le[t>>2]))Yr.alpha=0<le[t+4>>2];else if(12325==e)Yr.depth=0<le[t+4>>2];else if(12326==e)Yr.stencil=0<le[t+4>>2];else if(12337==e)e=le[t+4>>2],Yr.antialias=0<e;else if(12338==e)e=le[t+4>>2],Yr.antialias=1==e;else if(12544==e)Yr.zn=12547!=le[t+4>>2];else if(12344==e)break;t+=8}r&&n||o?(o&&(le[o>>2]=1),r&&0<n&&(le[r>>2]=62002),r=1):r=0}return r},hb:function(e,t,n,o){if(62e3!=e)return 0;for(e=1;;){if(12440!=(t=le[o>>2])){if(12344==t)break;return 0}e=le[o+4>>2],o+=8}return 2>e||3<e?0:(Yr.Al=e-1,Yr.Bn=0,0!=(Ur=fn(r.canvas,Yr))?(mn(Ur),r.$m=!0,Fr.forEach((function(e){e()})),mn(null),62004):0)},ib:function(e,t){return 62e3!=e||62002!=t?0:62006},gb:function(e,t){return 62e3!=e||62004!=t?0:(bn===on[e=Ur]&&(bn=null),"object"==typeof JSEvents&&JSEvents.Gn(on[e].il.canvas),on[e]&&on[e].il.canvas&&(on[e].il.canvas.Xl=void 0),on[e]=null,Hr==t&&(Hr=0),1)},fb:function(e,t){return 62e3!=e?0:(62006!=t||(Vr==t&&(Vr=0),Kr==t&&(Kr=0)),1)},Ti:function(){return 62e3},Si:function(e,t,r){return 62e3!=e?0:(t&&(le[t>>2]=1),r&&(le[r>>2]=4),$r=!0,1)},R:function(e,t,r,n){return 62e3!=e||0!=n&&62004!=n||0!=r&&62006!=r||0!=t&&62006!=t?0:(mn(n?Ur:null),Hr=n,Kr=t,Vr=r,1)},la:function(e,t){if(62e3!=e)return 0;if(Xr[t])return Xr[t];switch(t){case 12371:e=ir("Emscripten");break;case 12372:e=ir("1.4 Emscripten EGL");break;case 12373:e=ir("");break;case 12429:e=ir("OpenGL_ES");break;default:return 0}return Xr[t]=e},eb:function(){return $r&&r.dl&&!r.dl.isContextLost()?1:0},db:function(e,t){return 62e3!=e?0:(0==t?sr(0,0):sr(1,t),1)},Qi:function(e){return 62e3!=e?0:(Kr=Vr=Hr=0,$r=!1,1)},u:wn,hd:wn,qc:function(e,t,r,n,o,a,i,s){function p(){if(i){var e=0;if(u.statusText){var t=_e(u.statusText)+1;e=Ma(t),be(u.statusText,e,t)}Ue(i)(d,n,u.status,e)}}var l=me(e);e=me(t),r=me(r);var u=new XMLHttpRequest;u.open(e,l,!0),u.responseType="arraybuffer";var d=function(){var e=Tn;return Tn++,e}();return u.onload=function(){if(200<=u.status&&300>u.status||0===u.status&&"http"!=l.substr(0,4).toLowerCase()){var e=new Uint8Array(u.response),t=va(e.length);ie.set(e,t),a&&Ue(a)(d,n,t,e.length),o&&wa(t)}else p();delete kn[d]},u.onerror=function(){p(),delete kn[d]},u.onprogress=function(e){s&&Ue(s)(d,n,e.loaded,e.lengthComputable||void 0===e.lengthComputable?e.total:0)},u.onabort=function(){delete kn[d]},"POST"==e?(u.setRequestHeader("Content-type","application/x-www-form-urlencoded"),u.send(r)):u.send(null),kn[d]=u,d},qa:function(){return Date.now()},Nf:function(e){re=!1,Fe=0,pr(e)},wc:function(){return 2147483648},ma:rr,Jh:function(e){ua.activeTexture(e)},Ih:function(e,t){ua.attachShader(Qr[e],rn[t])},Be:function(e,t){ua.beginQuery(e,an[t])},$h:function(e,t){ua.Mk.beginQueryEXT(e,an[t])},he:function(e){ua.beginTransformFeedback(e)},Hh:function(e,t,r){ua.bindAttribLocation(Qr[e],t,me(r))},Gh:function(e,t){35051==e?ua.el=t:35052==e&&(ua.Jk=t),ua.bindBuffer(e,Jr[t])},ee:function(e,t,r){ua.bindBufferBase(e,t,Jr[r])},fe:function(e,t,r,n,o){ua.bindBufferRange(e,t,Jr[r],n,o)},Fh:function(e,t){ua.bindFramebuffer(e,Zr[t])},Eh:function(e,t){ua.bindRenderbuffer(e,en[t])},ld:function(e,t){ua.bindSampler(e,sn[t])},Dh:function(e,t){ua.bindTexture(e,tn[t])},cd:function(e,t){ua.bindTransformFeedback(e,pn[t])},me:function(e){ua.bindVertexArray(nn[e])},Sh:function(e){ua.bindVertexArray(nn[e])},Ch:function(e,t,r,n){ua.blendColor(e,t,r,n)},Ah:function(e){ua.blendEquation(e)},zh:function(e,t){ua.blendEquationSeparate(e,t)},yh:function(e,t){ua.blendFunc(e,t)},xh:function(e,t,r,n){ua.blendFuncSeparate(e,t,r,n)},pe:function(e,t,r,n,o,a,i,s,p,l){ua.blitFramebuffer(e,t,r,n,o,a,i,s,p,l)},wh:function(e,t,r,n){r&&t?ua.bufferData(e,ie,n,r,t):ua.bufferData(e,t,n)},vh:function(e,t,r,n){r&&ua.bufferSubData(e,t,ie,n,r)},uh:function(e){return ua.checkFramebufferStatus(e)},th:function(e){ua.clear(e)},Jd:function(e,t,r,n){ua.clearBufferfi(e,t,r,n)},Kd:function(e,t,r){ua.clearBufferfv(e,t,de,r>>2)},Md:function(e,t,r){ua.clearBufferiv(e,t,le,r>>2)},Ld:function(e,t,r){ua.clearBufferuiv(e,t,ue,r>>2)},sh:function(e,t,r,n){ua.clearColor(e,t,r,n)},rh:function(e){ua.clearDepth(e)},qh:function(e){ua.clearStencil(e)},ud:function(e,t,r,n){return ua.clientWaitSync(ln[e],t,(r>>>0)+4294967296*n)},ph:function(e,t,r,n){ua.colorMask(!!e,!!t,!!r,!!n)},oh:function(e){ua.compileShader(rn[e])},nh:function(e,t,r,n,o,a,i,s){ua.Jk||!i?ua.compressedTexImage2D(e,t,r,n,o,a,i,s):ua.compressedTexImage2D(e,t,r,n,o,a,ie,s,i)},Ge:function(e,t,r,n,o,a,i,s,p){ua.Jk?ua.compressedTexImage3D(e,t,r,n,o,a,i,s,p):ua.compressedTexImage3D(e,t,r,n,o,a,i,ie,p,s)},mh:function(e,t,r,n,o,a,i,s,p){ua.Jk||!s?ua.compressedTexSubImage2D(e,t,r,n,o,a,i,s,p):ua.compressedTexSubImage2D(e,t,r,n,o,a,i,ie,p,s)},Fe:function(e,t,r,n,o,a,i,s,p,l,u){ua.Jk?ua.compressedTexSubImage3D(e,t,r,n,o,a,i,s,p,l,u):ua.compressedTexSubImage3D(e,t,r,n,o,a,i,s,p,ie,u,l)},Hd:function(e,t,r,n,o){ua.copyBufferSubData(e,t,r,n,o)},lh:function(e,t,r,n,o,a,i,s){ua.copyTexImage2D(e,t,r,n,o,a,i,s)},kh:function(e,t,r,n,o,a,i,s){ua.copyTexSubImage2D(e,t,r,n,o,a,i,s)},He:function(e,t,r,n,o,a,i,s,p){ua.copyTexSubImage3D(e,t,r,n,o,a,i,s,p)},jh:function(){var e=gn(Qr),t=ua.createProgram();return t.name=e,t.Wk=t.Uk=t.Vk=0,t.xl=1,Qr[e]=t,e},ih:function(e){var t=gn(rn);return rn[t]=ua.createShader(e),t},hh:function(e){ua.cullFace(e)},fh:function(e,t){for(var r=0;r<e;r++){var n=le[t+4*r>>2],o=Jr[n];o&&(ua.deleteBuffer(o),o.name=0,Jr[n]=null,n==ua.el&&(ua.el=0),n==ua.Jk&&(ua.Jk=0))}},eh:function(e,t){for(var r=0;r<e;++r){var n=le[t+4*r>>2],o=Zr[n];o&&(ua.deleteFramebuffer(o),o.name=0,Zr[n]=null)}},dh:function(e){if(e){var t=Qr[e];t?(ua.deleteProgram(t),t.name=0,Qr[e]=null):cn(1281)}},De:function(e,t){for(var r=0;r<e;r++){var n=le[t+4*r>>2],o=an[n];o&&(ua.deleteQuery(o),an[n]=null)}},bi:function(e,t){for(var r=0;r<e;r++){var n=le[t+4*r>>2],o=an[n];o&&(ua.Mk.deleteQueryEXT(o),an[n]=null)}},ch:function(e,t){for(var r=0;r<e;r++){var n=le[t+4*r>>2],o=en[n];o&&(ua.deleteRenderbuffer(o),o.name=0,en[n]=null)}},nd:function(e,t){for(var r=0;r<e;r++){var n=le[t+4*r>>2],o=sn[n];o&&(ua.deleteSampler(o),o.name=0,sn[n]=null)}},bh:function(e){if(e){var t=rn[e];t?(ua.deleteShader(t),rn[e]=null):cn(1281)}},vd:function(e){if(e){var t=ln[e];t?(ua.deleteSync(t),t.name=0,ln[e]=null):cn(1281)}},ah:function(e,t){for(var r=0;r<e;r++){var n=le[t+4*r>>2],o=tn[n];o&&(ua.deleteTexture(o),o.name=0,tn[n]=null)}},bd:function(e,t){for(var r=0;r<e;r++){var n=le[t+4*r>>2],o=pn[n];o&&(ua.deleteTransformFeedback(o),o.name=0,pn[n]=null)}},le:function(e,t){for(var r=0;r<e;r++){var n=le[t+4*r>>2];ua.deleteVertexArray(nn[n]),nn[n]=null}},Rh:function(e,t){for(var r=0;r<e;r++){var n=le[t+4*r>>2];ua.deleteVertexArray(nn[n]),nn[n]=null}},$g:function(e){ua.depthFunc(e)},_g:function(e){ua.depthMask(!!e)},Zg:function(e,t){ua.depthRange(e,t)},Yg:function(e,t){ua.detachShader(Qr[e],rn[t])},Wg:function(e){ua.disable(e)},Vg:function(e){ua.disableVertexAttribArray(e)},Ug:function(e,t,r){ua.drawArrays(e,t,r)},zd:function(e,t,r,n){ua.drawArraysInstanced(e,t,r,n)},Nh:function(e,t,r,n){ua.drawArraysInstanced(e,t,r,n)},Lc:function(e,t,r,n){ua.drawArraysInstanced(e,t,r,n)},Qe:function(e,t,r,n){ua.drawArraysInstanced(e,t,r,n)},Mc:function(e,t,r,n){ua.drawArraysInstanced(e,t,r,n)},we:function(e,t){for(var r=On[e],n=0;n<e;n++)r[n]=le[t+4*n>>2];ua.drawBuffers(r)},Oe:function(e,t){for(var r=On[e],n=0;n<e;n++)r[n]=le[t+4*n>>2];ua.drawBuffers(r)},Oh:function(e,t){for(var r=On[e],n=0;n<e;n++)r[n]=le[t+4*n>>2];ua.drawBuffers(r)},Tg:function(e,t,r,n){ua.drawElements(e,t,r,n)},yd:function(e,t,r,n,o){ua.drawElementsInstanced(e,t,r,n,o)},Lh:function(e,t,r,n,o){ua.drawElementsInstanced(e,t,r,n,o)},Jc:function(e,t,r,n,o){ua.drawElementsInstanced(e,t,r,n,o)},Kc:function(e,t,r,n,o){ua.drawElementsInstanced(e,t,r,n,o)},Pe:function(e,t,r,n,o){ua.drawElementsInstanced(e,t,r,n,o)},Me:function(e,t,r,n,o,a){xn(e,n,o,a)},Sg:function(e){ua.enable(e)},Rg:function(e){ua.enableVertexAttribArray(e)},Ae:function(e){ua.endQuery(e)},_h:function(e){ua.Mk.endQueryEXT(e)},ge:function(){ua.endTransformFeedback()},xd:function(e,t){return(e=ua.fenceSync(e,t))?(t=gn(ln),e.name=t,ln[t]=e,t):0},Qg:function(){ua.finish()},Pg:function(){ua.flush()},Og:function(e,t,r,n){ua.framebufferRenderbuffer(e,t,r,en[n])},Ng:function(e,t,r,n,o){ua.framebufferTexture2D(e,t,r,tn[n],o)},ne:function(e,t,r,n,o){ua.framebufferTextureLayer(e,t,tn[r],n,o)},Mg:function(e){ua.frontFace(e)},Lg:function(e,t){Sn(e,t,"createBuffer",Jr)},Jg:function(e,t){Sn(e,t,"createFramebuffer",Zr)},Ee:function(e,t){Sn(e,t,"createQuery",an)},ci:function(e,t){for(var r=0;r<e;r++){var n=ua.Mk.createQueryEXT();if(!n){for(cn(1282);r<e;)le[t+4*r++>>2]=0;break}var o=gn(an);n.name=o,an[o]=n,le[t+4*r>>2]=o}},Ig:function(e,t){Sn(e,t,"createRenderbuffer",en)},od:function(e,t){Sn(e,t,"createSampler",sn)},Hg:function(e,t){Sn(e,t,"createTexture",tn)},ad:function(e,t){Sn(e,t,"createTransformFeedback",pn)},ke:function(e,t){Sn(e,t,"createVertexArray",nn)},Qh:function(e,t){Sn(e,t,"createVertexArray",nn)},Kg:function(e){ua.generateMipmap(e)},Gg:function(e,t,r,n,o,a,i){En("getActiveAttrib",e,t,r,n,o,a,i)},Fg:function(e,t,r,n,o,a,i){En("getActiveUniform",e,t,r,n,o,a,i)},Bd:function(e,t,r,n,o){e=Qr[e],(e=ua.getActiveUniformBlockName(e,t))&&(o&&0<r?(r=be(e,o,r),n&&(le[n>>2]=r)):n&&(le[n>>2]=0))},Dd:function(e,t,r,n){if(n){if(e=Qr[e],35393==r)r=ua.getActiveUniformBlockName(e,t),le[n>>2]=r.length+1;else if(null!==(e=ua.getActiveUniformBlockParameter(e,t,r)))if(35395==r)for(r=0;r<e.length;r++)le[n+4*r>>2]=e[r];else le[n>>2]=e}else cn(1281)},Fd:function(e,t,r,n,o){if(o)if(0<t&&0==r)cn(1281);else{e=Qr[e];for(var a=[],i=0;i<t;i++)a.push(le[r+4*i>>2]);if(e=ua.getActiveUniforms(e,a,n))for(t=e.length,i=0;i<t;i++)le[o+4*i>>2]=e[i]}else cn(1281)},Eg:function(e,t,r,n){var o=(e=ua.getAttachedShaders(Qr[e])).length;for(o>t&&(o=t),le[r>>2]=o,t=0;t<o;++t)le[n+4*t>>2]=rn.indexOf(e[t])},Dg:function(e,t){return ua.getAttribLocation(Qr[e],me(t))},Bg:function(e,t){Mn(e,t,4)},pd:function(e,t,r){r?Fn(r,ua.getBufferParameter(e,t)):cn(1281)},Ag:function(e,t,r){r?le[r>>2]=ua.getBufferParameter(e,t):cn(1281)},zg:function(){var e=ua.getError()||yn;return yn=0,e},yg:function(e,t){Mn(e,t,2)},Vd:function(e,t){return ua.getFragDataLocation(Qr[e],me(t))},xg:function(e,t,r,n){((e=ua.getFramebufferAttachmentParameter(e,t,r))instanceof WebGLRenderbuffer||e instanceof WebGLTexture)&&(e=0|e.name),le[n>>2]=e},qd:function(e,t,r){Rn(e,t,r,1)},sd:function(e,t){Mn(e,t,1)},ie:function(e,t,r){Rn(e,t,r,0)},wg:function(e,t){Mn(e,t,0)},Qc:function(e,t,r,n,o){if(0>n)cn(1281);else if(o){if(null!==(e=ua.getInternalformatParameter(e,t,r)))for(t=0;t<e.length&&t<n;++t)le[o+4*t>>2]=e[t]}else cn(1281)},Xc:function(){cn(1282)},ug:function(e,t,r,n){null===(e=ua.getProgramInfoLog(Qr[e]))&&(e="(unknown error)"),t=0<t&&n?be(e,n,t):0,r&&(le[r>>2]=t)},vg:function(e,t,r){if(r)if(e>=qr)cn(1281);else if(e=Qr[e],35716==t)null===(e=ua.getProgramInfoLog(e))&&(e="(unknown error)"),le[r>>2]=e.length+1;else if(35719==t){if(!e.Wk)for(t=0;t<ua.getProgramParameter(e,35718);++t)e.Wk=Math.max(e.Wk,ua.getActiveUniform(e,t).name.length+1);le[r>>2]=e.Wk}else if(35722==t){if(!e.Uk)for(t=0;t<ua.getProgramParameter(e,35721);++t)e.Uk=Math.max(e.Uk,ua.getActiveAttrib(e,t).name.length+1);le[r>>2]=e.Uk}else if(35381==t){if(!e.Vk)for(t=0;t<ua.getProgramParameter(e,35382);++t)e.Vk=Math.max(e.Vk,ua.getActiveUniformBlockName(e,t).length+1);le[r>>2]=e.Vk}else le[r>>2]=ua.getProgramParameter(e,t);else cn(1281)},Uh:function(e,t,r){r?(e=an[e],Fn(r,"boolean"==typeof(t=2>bn.version?ua.Mk.getQueryObjectEXT(e,t):ua.getQueryParameter(e,t))?t?1:0:t)):cn(1281)},Wh:function(e,t,r){var n;r?(n="boolean"==typeof(e=ua.Mk.getQueryObjectEXT(an[e],t))?e?1:0:e,le[r>>2]=n):cn(1281)},Th:function(e,t,r){r?(e=an[e],Fn(r,"boolean"==typeof(t=2>bn.version?ua.Mk.getQueryObjectEXT(e,t):ua.getQueryParameter(e,t))?t?1:0:t)):cn(1281)},xe:function(e,t,r){var n;r?(n="boolean"==typeof(e=ua.getQueryParameter(an[e],t))?e?1:0:e,le[r>>2]=n):cn(1281)},Vh:function(e,t,r){var n;r?(n="boolean"==typeof(e=ua.Mk.getQueryObjectEXT(an[e],t))?e?1:0:e,le[r>>2]=n):cn(1281)},ye:function(e,t,r){r?le[r>>2]=ua.getQuery(e,t):cn(1281)},Yh:function(e,t,r){r?le[r>>2]=ua.Mk.getQueryEXT(e,t):cn(1281)},tg:function(e,t,r){r?le[r>>2]=ua.getRenderbufferParameter(e,t):cn(1281)},ed:function(e,t,r){r?de[r>>2]=ua.getSamplerParameter(sn[e],t):cn(1281)},fd:function(e,t,r){r?le[r>>2]=ua.getSamplerParameter(sn[e],t):cn(1281)},qg:function(e,t,r,n){null===(e=ua.getShaderInfoLog(rn[e]))&&(e="(unknown error)"),t=0<t&&n?be(e,n,t):0,r&&(le[r>>2]=t)},pg:function(e,t,r,n){e=ua.getShaderPrecisionFormat(e,t),le[r>>2]=e.rangeMin,le[r+4>>2]=e.rangeMax,le[n>>2]=e.precision},og:function(e,t,r,n){(e=ua.getShaderSource(rn[e]))&&(t=0<t&&n?be(e,n,t):0,r&&(le[r>>2]=t))},sg:function(e,t,r){r?35716==t?(null===(e=ua.getShaderInfoLog(rn[e]))&&(e="(unknown error)"),le[r>>2]=e?e.length+1:0):35720==t?(e=ua.getShaderSource(rn[e]),le[r>>2]=e?e.length+1:0):le[r>>2]=ua.getShaderParameter(rn[e],t):cn(1281)},ng:function(e){var t=un[e];if(!t){switch(e){case 7939:t=(t=ua.getSupportedExtensions()||[]).concat(t.map((function(e){return"GL_"+e}))),t=Cn(t.join(" "));break;case 7936:case 7937:case 37445:case 37446:(t=ua.getParameter(e))||cn(1280),t=t&&Cn(t);break;case 7938:t=Cn("OpenGL ES 3.0 ("+ua.getParameter(7938)+")");break;case 35724:var r=(t=ua.getParameter(35724)).match(/^WebGL GLSL ES ([0-9]\.[0-9][0-9]?)(?:$| .*)/);null!==r&&(3==r[1].length&&(r[1]+="0"),t="OpenGL ES GLSL ES "+r[1]+" ("+t+")"),t=Cn(t);break;default:cn(1280)}un[e]=t}return t},Id:function(e,t){if(2>bn.version)return cn(1282),0;var r=dn[e];return r?0>t||t>=r.length?(cn(1281),0):r[t]:7939===e?(r=(r=ua.getSupportedExtensions()||[]).concat(r.map((function(e){return"GL_"+e}))),r=r.map((function(e){return Cn(e)})),r=dn[e]=r,0>t||t>=r.length?(cn(1281),0):r[t]):(cn(1280),0)},rd:function(e,t,r,n,o){0>r?cn(1281):o?null!==(e=ua.getSyncParameter(ln[e],t))&&(le[o>>2]=e,n&&(le[n>>2]=1)):cn(1281)},mg:function(e,t,r){r?de[r>>2]=ua.getTexParameter(e,t):cn(1281)},lg:function(e,t,r){r?le[r>>2]=ua.getTexParameter(e,t):cn(1281)},ce:function(e,t,r,n,o,a,i){e=Qr[e],(e=ua.getTransformFeedbackVarying(e,t))&&(i&&0<r?(r=be(e.name,i,r),n&&(le[n>>2]=r)):n&&(le[n>>2]=0),o&&(le[o>>2]=e.size),a&&(le[a>>2]=e.type))},Ed:function(e,t){return ua.getUniformBlockIndex(Qr[e],me(t))},Gd:function(e,t,r,n){if(n)if(0<t&&(0==r||0==n))cn(1281);else{e=Qr[e];for(var o=[],a=0;a<t;a++)o.push(me(le[r+4*a>>2]));if(e=ua.getUniformIndices(e,o))for(t=e.length,a=0;a<t;a++)le[n+4*a>>2]=e[a]}else cn(1281)},ig:function(e,t){if(t=me(t),e=Qr[e]){An(e);var r=e.hl,n=0,o=t,a=In(t);if(0<a&&(n=parseInt(t.slice(a+1))>>>0,o=t.slice(0,a)),(o=e.yl[o])&&n<o[0]&&(r[n+=o[1]]=r[n]||ua.getUniformLocation(e,t)))return n}else cn(1281);return-1},kg:function(e,t,r){Dn(e,t,r,2)},jg:function(e,t,r){Dn(e,t,r,0)},Wd:function(e,t,r){Dn(e,t,r,0)},ae:function(e,t,r){Ln(e,t,r,0)},$d:function(e,t,r){Ln(e,t,r,0)},eg:function(e,t,r){r?le[r>>2]=ua.getVertexAttribOffset(e,t):cn(1281)},hg:function(e,t,r){Ln(e,t,r,2)},fg:function(e,t,r){Ln(e,t,r,5)},dg:function(e,t){ua.hint(e,t)},Uc:function(e,t,r){for(var n=On[t],o=0;o<t;o++)n[o]=le[r+4*o>>2];ua.invalidateFramebuffer(e,n)},Tc:function(e,t,r,n,o,a,i){for(var s=On[t],p=0;p<t;p++)s[p]=le[r+4*p>>2];ua.invalidateSubFramebuffer(e,s,n,o,a,i)},cg:function(e){return(e=Jr[e])?ua.isBuffer(e):0},bg:function(e){return ua.isEnabled(e)},ag:function(e){return(e=Zr[e])?ua.isFramebuffer(e):0},$f:function(e){return(e=Qr[e])?ua.isProgram(e):0},Ce:function(e){return(e=an[e])?ua.isQuery(e):0},ai:function(e){return(e=an[e])?ua.Mk.isQueryEXT(e):0},_f:function(e){return(e=en[e])?ua.isRenderbuffer(e):0},md:function(e){return(e=sn[e])?ua.isSampler(e):0},Zf:function(e){return(e=rn[e])?ua.isShader(e):0},wd:function(e){return ua.isSync(ln[e])},Yf:function(e){return(e=tn[e])?ua.isTexture(e):0},$c:function(e){return ua.isTransformFeedback(pn[e])},je:function(e){return(e=nn[e])?ua.isVertexArray(e):0},Ph:function(e){return(e=nn[e])?ua.isVertexArray(e):0},Xf:function(e){ua.lineWidth(e)},Wf:function(e){e=Qr[e],ua.linkProgram(e),e.hl=0,e.yl={}},_c:function(){ua.pauseTransformFeedback()},Vf:function(e,t){ua.pixelStorei(e,t)},Uf:function(e,t){ua.polygonOffset(e,t)},Wc:function(){cn(1280)},Vc:function(){cn(1280)},Zh:function(e,t){ua.Mk.queryCounterEXT(an[e],t)},Ne:function(e){ua.readBuffer(e)},Tf:function(e,t,r,n,o,a,i){if(ua.el)ua.readPixels(e,t,r,n,o,a,i);else{var s=Nn(a);ua.readPixels(e,t,r,n,o,a,s,i>>Pn(s))}},Sf:function(){},Rf:function(e,t,r,n){ua.renderbufferStorage(e,t,r,n)},oe:function(e,t,r,n,o){ua.renderbufferStorageMultisample(e,t,r,n,o)},Zc:function(){ua.resumeTransformFeedback()},Qf:function(e,t){ua.sampleCoverage(e,!!t)},id:function(e,t,r){ua.samplerParameterf(sn[e],t,r)},gd:function(e,t,r){ua.samplerParameterf(sn[e],t,de[r>>2])},kd:function(e,t,r){ua.samplerParameteri(sn[e],t,r)},jd:function(e,t,r){ua.samplerParameteri(sn[e],t,le[r>>2])},Pf:function(e,t,r,n){ua.scissor(e,t,r,n)},Of:function(){cn(1280)},Mf:function(e,t,r,n){t=hn(t,r,n),ua.shaderSource(rn[e],t)},Lf:function(e,t,r){ua.stencilFunc(e,t,r)},Kf:function(e,t,r,n){ua.stencilFuncSeparate(e,t,r,n)},Jf:function(e){ua.stencilMask(e)},If:function(e,t){ua.stencilMaskSeparate(e,t)},Hf:function(e,t,r){ua.stencilOp(e,t,r)},Gf:function(e,t,r,n){ua.stencilOpSeparate(e,t,r,n)},Ff:function(e,t,r,n,o,a,i,s,p){if(ua.Jk)ua.texImage2D(e,t,r,n,o,a,i,s,p);else if(p){var l=Nn(s);ua.texImage2D(e,t,r,n,o,a,i,s,l,p>>Pn(l))}else ua.texImage2D(e,t,r,n,o,a,i,s,null)},Je:function(e,t,r,n,o,a,i,s,p,l){if(ua.Jk)ua.texImage3D(e,t,r,n,o,a,i,s,p,l);else if(l){var u=Nn(p);ua.texImage3D(e,t,r,n,o,a,i,s,p,u,l>>Pn(u))}else ua.texImage3D(e,t,r,n,o,a,i,s,p,null)},Ef:function(e,t,r){ua.texParameterf(e,t,r)},Df:function(e,t,r){ua.texParameterf(e,t,de[r>>2])},Bf:function(e,t,r){ua.texParameteri(e,t,r)},Af:function(e,t,r){ua.texParameteri(e,t,le[r>>2])},Sc:function(e,t,r,n,o){ua.texStorage2D(e,t,r,n,o)},Rc:function(e,t,r,n,o,a){ua.texStorage3D(e,t,r,n,o,a)},zf:function(e,t,r,n,o,a,i,s,p){if(ua.Jk)ua.texSubImage2D(e,t,r,n,o,a,i,s,p);else if(p){var l=Nn(s);ua.texSubImage2D(e,t,r,n,o,a,i,s,l,p>>Pn(l))}else ua.texSubImage2D(e,t,r,n,o,a,i,s,null)},Ie:function(e,t,r,n,o,a,i,s,p,l,u){if(ua.Jk)ua.texSubImage3D(e,t,r,n,o,a,i,s,p,l,u);else if(u){var d=Nn(l);ua.texSubImage3D(e,t,r,n,o,a,i,s,p,l,d,u>>Pn(d))}else ua.texSubImage3D(e,t,r,n,o,a,i,s,p,l,null)},de:function(e,t,r,n){e=Qr[e];for(var o=[],a=0;a<t;a++)o.push(me(le[r+4*a>>2]));ua.transformFeedbackVaryings(e,o,n)},yf:function(e,t){ua.uniform1f(Bn(e),t)},xf:function(e,t,r){t&&ua.uniform1fv(Bn(e),de,r>>2,t)},wf:function(e,t){ua.uniform1i(Bn(e),t)},vf:function(e,t,r){t&&ua.uniform1iv(Bn(e),le,r>>2,t)},Ud:function(e,t){ua.uniform1ui(Bn(e),t)},Qd:function(e,t,r){t&&ua.uniform1uiv(Bn(e),ue,r>>2,t)},uf:function(e,t,r){ua.uniform2f(Bn(e),t,r)},tf:function(e,t,r){t&&ua.uniform2fv(Bn(e),de,r>>2,2*t)},sf:function(e,t,r){ua.uniform2i(Bn(e),t,r)},qf:function(e,t,r){t&&ua.uniform2iv(Bn(e),le,r>>2,2*t)},Td:function(e,t,r){ua.uniform2ui(Bn(e),t,r)},Pd:function(e,t,r){t&&ua.uniform2uiv(Bn(e),ue,r>>2,2*t)},pf:function(e,t,r,n){ua.uniform3f(Bn(e),t,r,n)},of:function(e,t,r){t&&ua.uniform3fv(Bn(e),de,r>>2,3*t)},nf:function(e,t,r,n){ua.uniform3i(Bn(e),t,r,n)},mf:function(e,t,r){t&&ua.uniform3iv(Bn(e),le,r>>2,3*t)},Sd:function(e,t,r,n){ua.uniform3ui(Bn(e),t,r,n)},Od:function(e,t,r){t&&ua.uniform3uiv(Bn(e),ue,r>>2,3*t)},lf:function(e,t,r,n,o){ua.uniform4f(Bn(e),t,r,n,o)},kf:function(e,t,r){t&&ua.uniform4fv(Bn(e),de,r>>2,4*t)},jf:function(e,t,r,n,o){ua.uniform4i(Bn(e),t,r,n,o)},hf:function(e,t,r){t&&ua.uniform4iv(Bn(e),le,r>>2,4*t)},Rd:function(e,t,r,n,o){ua.uniform4ui(Bn(e),t,r,n,o)},Nd:function(e,t,r){t&&ua.uniform4uiv(Bn(e),ue,r>>2,4*t)},Ad:function(e,t,r){e=Qr[e],ua.uniformBlockBinding(e,t,r)},gf:function(e,t,r,n){t&&ua.uniformMatrix2fv(Bn(e),!!r,de,n>>2,4*t)},ve:function(e,t,r,n){t&&ua.uniformMatrix2x3fv(Bn(e),!!r,de,n>>2,6*t)},te:function(e,t,r,n){t&&ua.uniformMatrix2x4fv(Bn(e),!!r,de,n>>2,8*t)},ef:function(e,t,r,n){t&&ua.uniformMatrix3fv(Bn(e),!!r,de,n>>2,9*t)},ue:function(e,t,r,n){t&&ua.uniformMatrix3x2fv(Bn(e),!!r,de,n>>2,6*t)},re:function(e,t,r,n){t&&ua.uniformMatrix3x4fv(Bn(e),!!r,de,n>>2,12*t)},df:function(e,t,r,n){t&&ua.uniformMatrix4fv(Bn(e),!!r,de,n>>2,16*t)},se:function(e,t,r,n){t&&ua.uniformMatrix4x2fv(Bn(e),!!r,de,n>>2,8*t)},qe:function(e,t,r,n){t&&ua.uniformMatrix4x3fv(Bn(e),!!r,de,n>>2,12*t)},cf:function(e){e=Qr[e],ua.useProgram(e),ua.Hl=e},bf:function(e){ua.validateProgram(Qr[e])},af:function(e,t){ua.vertexAttrib1f(e,t)},$e:function(e,t){ua.vertexAttrib1f(e,de[t>>2])},_e:function(e,t,r){ua.vertexAttrib2f(e,t,r)},Ze:function(e,t){ua.vertexAttrib2f(e,de[t>>2],de[t+4>>2])},Ye:function(e,t,r,n){ua.vertexAttrib3f(e,t,r,n)},Xe:function(e,t){ua.vertexAttrib3f(e,de[t>>2],de[t+4>>2],de[t+8>>2])},Ve:function(e,t,r,n,o){ua.vertexAttrib4f(e,t,r,n,o)},Ue:function(e,t){ua.vertexAttrib4f(e,de[t>>2],de[t+4>>2],de[t+8>>2],de[t+12>>2])},dd:function(e,t){ua.vertexAttribDivisor(e,t)},Kh:function(e,t){ua.vertexAttribDivisor(e,t)},Oc:function(e,t){ua.vertexAttribDivisor(e,t)},Re:function(e,t){ua.vertexAttribDivisor(e,t)},Pc:function(e,t){ua.vertexAttribDivisor(e,t)},_d:function(e,t,r,n,o){ua.vertexAttribI4i(e,t,r,n,o)},Yd:function(e,t){ua.vertexAttribI4i(e,le[t>>2],le[t+4>>2],le[t+8>>2],le[t+12>>2])},Zd:function(e,t,r,n,o){ua.vertexAttribI4ui(e,t,r,n,o)},Xd:function(e,t){ua.vertexAttribI4ui(e,ue[t>>2],ue[t+4>>2],ue[t+8>>2],ue[t+12>>2])},be:function(e,t,r,n,o){ua.vertexAttribIPointer(e,t,r,n,o)},Te:function(e,t,r,n,o,a){ua.vertexAttribPointer(e,t,r,!!n,o,a)},Se:function(e,t,r,n){ua.viewport(e,t,r,n)},td:function(e,t,r,n){ua.waitSync(ln[e],t,(r>>>0)+4294967296*n)},jb:function(e,t,r){t=function(e,t){function r(e){var t=a;return("double"===e||"i64"===e)&&7&t&&(t+=4),a=t,"double"===e?(e=ce[a>>3],a+=8):"i64"==e?(e=[le[a>>2],le[a+4>>2]],a+=8):(e=le[a>>2],a+=4),e}for(var n,o,a=t,i=[];;){var s=e;if(0===(n=ae[e>>0]))break;if(o=ae[e+1>>0],37==n){var p=!1,l=t=!1,u=!1,d=!1;e:for(;;){switch(o){case 43:p=!0;break;case 45:t=!0;break;case 35:l=!0;break;case 48:if(u)break e;u=!0;break;case 32:d=!0;break;default:break e}e++,o=ae[e+1>>0]}var c=0;if(42==o)c=r("i32"),e++,o=ae[e+1>>0];else for(;48<=o&&57>=o;)c=10*c+(o-48),e++,o=ae[e+1>>0];var g=!1,h=-1;if(46==o){if(h=0,g=!0,e++,42==(o=ae[e+1>>0]))h=r("i32"),e++;else for(;!(48>(o=ae[e+1>>0])||57<o);)h=10*h+(o-48),e++;o=ae[e+1>>0]}switch(0>h&&(h=6,g=!1),String.fromCharCode(o)){case"h":if(104==(o=ae[e+2>>0])){e++;var f=1}else f=2;break;case"l":108==(o=ae[e+2>>0])?(e++,f=8):f=4;break;case"L":case"q":case"j":f=8;break;case"z":case"t":case"I":f=4;break;default:f=null}switch(f&&e++,o=ae[e+1>>0],String.fromCharCode(o)){case"d":case"i":case"u":case"o":case"x":case"X":case"p":s=100==o||105==o,n=r("i"+8*(f=f||4)),8==f&&(n=117==o?(n[0]>>>0)+4294967296*(n[1]>>>0):(n[0]>>>0)+4294967296*n[1]),4>=f&&(n=(s?jn:Gn)(n&Math.pow(256,f)-1,8*f));var m=Math.abs(n);if(s="",100==o||105==o)var y=jn(n,8*f).toString(10);else if(117==o)y=Gn(n,8*f).toString(10),n=Math.abs(n);else if(111==o)y=(l?"0":"")+m.toString(8);else if(120==o||88==o){if(s=l&&0!=n?"0x":"",0>n){for(n=-n,y=(m-1).toString(16),m=[],l=0;l<y.length;l++)m.push((15-parseInt(y[l],16)).toString(16));for(y=m.join("");y.length<2*f;)y="f"+y}else y=m.toString(16);88==o&&(s=s.toUpperCase(),y=y.toUpperCase())}else 112==o&&(0===m?y="(nil)":(s="0x",y=m.toString(16)));if(g)for(;y.length<h;)y="0"+y;for(0<=n&&(p?s="+"+s:d&&(s=" "+s)),"-"==y.charAt(0)&&(s="-"+s,y=y.substr(1));s.length+y.length<c;)t?y+=" ":u?y="0"+y:s=" "+s;(y=s+y).split("").forEach((function(e){i.push(e.charCodeAt(0))}));break;case"f":case"F":case"e":case"E":case"g":case"G":if(n=r("double"),isNaN(n))y="nan",u=!1;else if(isFinite(n)){if(g=!1,f=Math.min(h,20),103!=o&&71!=o||(g=!0,(h=h||1)>(f=parseInt(n.toExponential(f).split("e")[1],10))&&-4<=f?(o=(103==o?"f":"F").charCodeAt(0),h-=f+1):(o=(103==o?"e":"E").charCodeAt(0),h--),f=Math.min(h,20)),101==o||69==o?(y=n.toExponential(f),/[eE][-+]\d$/.test(y)&&(y=y.slice(0,-1)+"0"+y.slice(-1))):102!=o&&70!=o||(y=n.toFixed(f),0===n&&(0>n||0===n&&-1/0==1/n)&&(y="-"+y)),s=y.split("e"),g&&!l)for(;1<s[0].length&&s[0].includes(".")&&("0"==s[0].slice(-1)||"."==s[0].slice(-1));)s[0]=s[0].slice(0,-1);else for(l&&-1==y.indexOf(".")&&(s[0]+=".");h>f++;)s[0]+="0";y=s[0]+(1<s.length?"e"+s[1]:""),69==o&&(y=y.toUpperCase()),0<=n&&(p?y="+"+y:d&&(y=" "+y))}else y=(0>n?"-":"")+"inf",u=!1;for(;y.length<c;)y=t?y+" ":!u||"-"!=y[0]&&"+"!=y[0]?(u?"0":" ")+y:y[0]+"0"+y.slice(1);97>o&&(y=y.toUpperCase()),y.split("").forEach((function(e){i.push(e.charCodeAt(0))}));break;case"s":if(u=(p=r("i8*"))?Wn(p):6,g&&(u=Math.min(u,h)),!t)for(;u<c--;)i.push(32);if(p)for(l=0;l<u;l++)i.push(ie[p++>>0]);else i=i.concat(zn("(null)".substr(0,u),!0));if(t)for(;u<c--;)i.push(32);break;case"c":for(t&&i.push(r("i8"));0<--c;)i.push(32);t||i.push(r("i8"));break;case"n":t=r("i32*"),le[t>>2]=i.length;break;case"%":i.push(n);break;default:for(l=s;l<e+2;l++)i.push(ae[l>>0])}e+=2}else i.push(n),e+=1}return i}(t,r),t=fe(t,0),24&e&&(t=t.replace(/\s+$/,""),t+=(0<t.length?"\n":"")+function(e){e:{var t=Error();if(!t.stack){try{throw Error()}catch(e){t=e}if(!t.stack){t="(no stack trace available)";break e}}t=t.stack.toString()}t=t.slice(t.indexOf("\n",Math.max(t.lastIndexOf("_emscripten_log"),t.lastIndexOf("_emscripten_get_callstack")))+1),32&e&&cr("EM_LOG_DEMANGLE is deprecated; ignoring"),8&e&&"undefined"==typeof emscripten_source_map&&(cr('Source map information is not available, emscripten_log with EM_LOG_C_STACK will be ignored. Build with "--pre-js $EMSCRIPTEN/src/emscripten-source-map.min.js" linker flag to add source map loading to code.'),e=8^e|16);var r=null;if(128&e)for(r=Un(arguments);r[1].includes("_emscripten_");)r=Un(r[0]);var n=t.split("\n");t="";var o,a=RegExp("\\s*(.*?)@(.*?):([0-9]+):([0-9]+)"),i=RegExp("\\s*(.*?)@(.*):(.*)(:(.*))?"),s=RegExp("\\s*at (.*?) \\((.*):(.*):(.*)\\)");for(o in n){var p,l=n[o];if((p=s.exec(l))&&5==p.length){l=p[1];var u=p[2],d=p[3];p=p[4]}else{if((p=a.exec(l))||(p=i.exec(l)),!(p&&4<=p.length)){t+=l+"\n";continue}l=p[1],u=p[2],d=p[3],p=0|p[4]}var c=!1;if(8&e){var g=emscripten_source_map.Fn({line:d,xm:p});(c=g&&g.source)&&(64&e&&(g.source=g.source.substring(g.source.replace(/\\/g,"/").lastIndexOf("/")+1)),t+="    at "+l+" ("+g.source+":"+g.line+":"+g.xm+")\n")}(16&e||!c)&&(64&e&&(u=u.substring(u.replace(/\\/g,"/").lastIndexOf("/")+1)),t+=(c?"     = "+l:"    at "+l)+" ("+u+":"+d+":"+p+")\n"),128&e&&r[0]&&(r[1]==l&&0<r[2].length&&(t=t.replace(/\s+$/,""),t+=" with values: "+r[1]+r[2]+"\n"),r=Un(r[0]))}return t.replace(/\s+$/,"")}(e)),1&e?4&e?console.error(t):2&e?console.warn(t):512&e?console.info(t):256&e?console.debug(t):console.log(t):6&e?te(t):ee(t)},Ic:function(e,t,r){ie.copyWithin(e,t,t+r)},vc:function(e){var t=ie.length;if(2147483648<(e>>>=0))return!1;for(var r=1;4>=r;r*=2){var n=t*(1+.2/r);n=Math.min(n,e+100663296);var o=Math,a=o.min;n=Math.max(e,n),n+=(65536-n%65536)%65536;e:{var i=ne.buffer;try{ne.grow(a.call(o,2147483648,n)-i.byteLength+65535>>>16),ve();var s=1;break e}catch(e){}s=void 0}if(s)return!0}return!1},Pi:function(e,t){Pr(r.canvas,e,t),Nr()},xc:function(e,t){var r=0;return Hn().forEach((function(n,o){var a=t+r;for(o=ue[e+4*o>>2]=a,a=0;a<n.length;++a)ae[o++>>0]=n.charCodeAt(a);ae[o>>0]=0,r+=n.length+1})),0},yc:function(e,t){var r=Hn();ue[e>>2]=r.length;var n=0;return r.forEach((function(e){n+=e.length+1})),ue[t>>2]=n,0},ii:pr,Ga:function(){return 52},zc:function(){return 52},gc:function(){return 70},Ha:function(e,t,r,n){for(var o=0,a=0;a<r;a++){var i=ue[t>>2],s=ue[t+4>>2];t+=8;for(var p=0;p<s;p++)Yn(e,ie[i+p]);o+=s}return ue[n>>2]=o,0},Nc:async function(e,t){var r=q("background_blur.deepar");r||(r=await J("background_blur.deepar")),r=new Uint8Array(r);var n=va(r.length);ie.set(r,n),It("vii",e,[t,n])},Yc:async function(e,t){var r=q("background_replacement.deepar");r||(r=await J("background_replacement.deepar")),r=new Uint8Array(r);var n=va(r.length);ie.set(r,n),It("vii",e,[t,n])},rc:function e(t,r){e.Ol||(e.Ol=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var e=new Uint8Array(1);return()=>(crypto.getRandomValues(e),e[0])}return()=>Ie("randomDevice")}());for(var n=0;n<r;n++)ae[t+n>>0]=e.Ol();return 0},Wa:function(e){ua.activeTexture(e)},cb:function(e,t){ua.attachShader(Qr[e],rn[t])},C:function(e,t){35051==e?ua.el=t:35052==e&&(ua.Jk=t),ua.bindBuffer(e,Jr[t])},x:function(e,t){ua.bindFramebuffer(e,Zr[t])},U:function(e,t){ua.bindRenderbuffer(e,en[t])},B:function(e,t){ua.bindTexture(e,tn[t])},ti:function(e,t,r,n){ua.blendColor(e,t,r,n)},ui:function(e,t){ua.blendEquationSeparate(e,t)},vi:function(e,t,r,n){ua.blendFuncSeparate(e,t,r,n)},Ma:function(e,t,r,n){r&&t?ua.bufferData(e,ie,n,r,t):ua.bufferData(e,t,n)},Pa:function(e,t,r,n){r&&ua.bufferSubData(e,t,ie,n,r)},fa:function(e){return ua.checkFramebufferStatus(e)},pi:function(e){ua.clear(e)},Oa:function(e,t,r,n){ua.clearColor(e,t,r,n)},ri:function(e){ua.clearDepth(e)},qi:function(e){ua.clearStencil(e)},ea:function(e,t,r,n){ua.colorMask(!!e,!!t,!!r,!!n)},yi:function(e){ua.compileShader(rn[e])},Ui:function(e,t,r,n,o,a,i,s){ua.Jk||!i?ua.compressedTexImage2D(e,t,r,n,o,a,i,s):ua.compressedTexImage2D(e,t,r,n,o,a,ie,s,i)},Ei:function(e,t,r,n,o,a,i,s,p){ua.Jk||!s?ua.compressedTexSubImage2D(e,t,r,n,o,a,i,s,p):ua.compressedTexSubImage2D(e,t,r,n,o,a,i,ie,p,s)},Mi:function(){var e=gn(Qr),t=ua.createProgram();return t.name=e,t.Wk=t.Uk=t.Vk=0,t.xl=1,Qr[e]=t,e},Ai:function(e){var t=gn(rn);return rn[t]=ua.createShader(e),t},Qa:function(e){ua.cullFace(e)},ja:function(e,t){for(var r=0;r<e;r++){var n=le[t+4*r>>2],o=Jr[n];o&&(ua.deleteBuffer(o),o.name=0,Jr[n]=null,n==ua.el&&(ua.el=0),n==ua.Jk&&(ua.Jk=0))}},wa:function(e,t){for(var r=0;r<e;++r){var n=le[t+4*r>>2],o=Zr[n];o&&(ua.deleteFramebuffer(o),o.name=0,Zr[n]=null)}},bb:function(e){if(e){var t=Qr[e];t?(ua.deleteProgram(t),t.name=0,Qr[e]=null):cn(1281)}},ya:function(e,t){for(var r=0;r<e;r++){var n=le[t+4*r>>2],o=en[n];o&&(ua.deleteRenderbuffer(o),o.name=0,en[n]=null)}},Ua:function(e){if(e){var t=rn[e];t?(ua.deleteShader(t),rn[e]=null):cn(1281)}},Bi:function(e){if(e){var t=ln[e];t?(ua.deleteSync(t),t.name=0,ln[e]=null):cn(1281)}},T:function(e,t){for(var r=0;r<e;r++){var n=le[t+4*r>>2],o=tn[n];o&&(ua.deleteTexture(o),o.name=0,tn[n]=null)}},aa:function(e){ua.depthFunc(e)},ua:function(e){ua.depthMask(!!e)},ab:function(e,t){ua.detachShader(Qr[e],rn[t])},y:function(e){ua.disable(e)},_a:function(e){ua.disableVertexAttribArray(e)},oi:function(e,t,r){ua.drawArrays(e,t,r)},ki:xn,H:function(e){ua.enable(e)},Za:function(e){ua.enableVertexAttribArray(e)},si:function(){ua.flush()},xa:function(e,t,r,n){ua.framebufferRenderbuffer(e,t,r,en[n])},ga:function(e,t,r,n,o){ua.framebufferTexture2D(e,t,r,tn[n],o)},Na:function(e,t){Sn(e,t,"createBuffer",Jr)},ha:function(e,t){Sn(e,t,"createFramebuffer",Zr)},za:function(e,t){Sn(e,t,"createRenderbuffer",en)},Z:function(e,t){Sn(e,t,"createTexture",tn)},Va:function(e){ua.generateMipmap(e)},Ji:function(e,t,r,n,o,a,i){En("getActiveAttrib",e,t,r,n,o,a,i)},Ii:function(e,t,r,n,o,a,i){En("getActiveUniform",e,t,r,n,o,a,i)},$a:function(e,t){return ua.getAttribLocation(Qr[e],me(t))},z:function(){var e=ua.getError()||yn;return yn=0,e},Ni:function(e,t){Mn(e,t,2)},X:function(e,t){Mn(e,t,0)},Ki:function(e,t,r,n){null===(e=ua.getProgramInfoLog(Qr[e]))&&(e="(unknown error)"),t=0<t&&n?be(e,n,t):0,r&&(le[r>>2]=t)},V:function(e,t,r){if(r)if(e>=qr)cn(1281);else if(e=Qr[e],35716==t)null===(e=ua.getProgramInfoLog(e))&&(e="(unknown error)"),le[r>>2]=e.length+1;else if(35719==t){if(!e.Wk)for(t=0;t<ua.getProgramParameter(e,35718);++t)e.Wk=Math.max(e.Wk,ua.getActiveUniform(e,t).name.length+1);le[r>>2]=e.Wk}else if(35722==t){if(!e.Uk)for(t=0;t<ua.getProgramParameter(e,35721);++t)e.Uk=Math.max(e.Uk,ua.getActiveAttrib(e,t).name.length+1);le[r>>2]=e.Uk}else if(35381==t){if(!e.Vk)for(t=0;t<ua.getProgramParameter(e,35382);++t)e.Vk=Math.max(e.Vk,ua.getActiveUniformBlockName(e,t).length+1);le[r>>2]=e.Vk}else le[r>>2]=ua.getProgramParameter(e,t);else cn(1281)},wi:function(e,t,r,n){null===(e=ua.getShaderInfoLog(rn[e]))&&(e="(unknown error)"),t=0<t&&n?be(e,n,t):0,r&&(le[r>>2]=t)},xi:function(e,t,r){r?35716==t?(null===(e=ua.getShaderInfoLog(rn[e]))&&(e="(unknown error)"),le[r>>2]=e?e.length+1:0):35720==t?(e=ua.getShaderSource(rn[e]),le[r>>2]=e?e.length+1:0):le[r>>2]=ua.getShaderParameter(rn[e],t):cn(1281)},W:function(e){var t=un[e];if(!t){switch(e){case 7939:t=(t=ua.getSupportedExtensions()||[]).concat(t.map((function(e){return"GL_"+e}))),t=Cn(t.join(" "));break;case 7936:case 7937:case 37445:case 37446:(t=ua.getParameter(e))||cn(1280),t=t&&Cn(t);break;case 7938:t=Cn("OpenGL ES 3.0 ("+ua.getParameter(7938)+")");break;case 35724:var r=(t=ua.getParameter(35724)).match(/^WebGL GLSL ES ([0-9]\.[0-9][0-9]?)(?:$| .*)/);null!==r&&(3==r[1].length&&(r[1]+="0"),t="OpenGL ES GLSL ES "+r[1]+" ("+t+")"),t=Cn(t);break;default:cn(1280)}un[e]=t}return t},Hi:function(e,t){if(t=me(t),e=Qr[e]){An(e);var r=e.hl,n=0,o=t,a=In(t);if(0<a&&(n=parseInt(t.slice(a+1))>>>0,o=t.slice(0,a)),(o=e.yl[o])&&n<o[0]&&(r[n+=o[1]]=r[n]||ua.getUniformLocation(e,t)))return n}else cn(1281);return-1},Ci:function(e){return ua.isSync(ln[e])},Li:function(e){e=Qr[e],ua.linkProgram(e),e.hl=0,e.yl={}},ia:function(e,t){ua.pixelStorei(e,t)},ta:function(e,t,r,n,o,a,i){if(ua.el)ua.readPixels(e,t,r,n,o,a,i);else{var s=Nn(a);ua.readPixels(e,t,r,n,o,a,s,i>>Pn(s))}},Xa:function(e,t,r,n){ua.renderbufferStorage(e,t,r,n)},va:function(e,t,r,n){ua.scissor(e,t,r,n)},zi:function(e,t,r,n){t=hn(t,r,n),ua.shaderSource(rn[e],t)},Sa:function(e,t,r,n){ua.stencilFuncSeparate(e,t,r,n)},Ra:function(e,t,r,n){ua.stencilOpSeparate(e,t,r,n)},Oi:function(e,t,r,n,o,a,i,s,p){if(ua.Jk)ua.texImage2D(e,t,r,n,o,a,i,s,p);else if(p){var l=Nn(s);ua.texImage2D(e,t,r,n,o,a,i,s,l,p>>Pn(l))}else ua.texImage2D(e,t,r,n,o,a,i,s,null)},Fi:function(e,t,r){ua.texParameterf(e,t,r)},Gi:function(e,t,r){ua.texParameterf(e,t,de[r>>2])},J:function(e,t,r){ua.texParameteri(e,t,r)},Di:function(e,t,r,n,o,a,i,s,p){if(ua.Jk)ua.texSubImage2D(e,t,r,n,o,a,i,s,p);else if(p){var l=Nn(s);ua.texSubImage2D(e,t,r,n,o,a,i,s,l,p>>Pn(l))}else ua.texSubImage2D(e,t,r,n,o,a,i,s,null)},li:function(e,t){ua.uniform1i(Bn(e),t)},ni:function(e,t,r){t&&ua.uniform1iv(Bn(e),le,r>>2,t)},$:function(e,t,r){t&&ua.uniform4fv(Bn(e),de,r>>2,4*t)},mi:function(e,t,r,n){t&&ua.uniformMatrix3fv(Bn(e),!!r,de,n>>2,9*t)},M:function(e,t,r,n){t&&ua.uniformMatrix4fv(Bn(e),!!r,de,n>>2,16*t)},ka:function(e){e=Qr[e],ua.useProgram(e),ua.Hl=e},Ya:function(e,t,r,n,o,a){ua.vertexAttribPointer(e,t,r,!!n,o,a)},Ta:function(e,t,r,n){ua.viewport(e,t,r,n)},ic:function(e,t,r,n){ua.waitSync(ln[e],t,(r>>>0)+4294967296*n)},v:function(e,t,r){var n=Ea();try{return Ue(e)(t,r)}catch(e){if(Fa(n),e!==e+0)throw e;Sa(1,0)}},lb:function(e,t,r,n){var o=Ea();try{return Ue(e)(t,r,n)}catch(e){if(Fa(o),e!==e+0)throw e;Sa(1,0)}},Aa:function(e,t){var r=Ea();try{return Ue(e)(t)}catch(e){if(Fa(r),e!==e+0)throw e;Sa(1,0)}},Ea:function(e,t,r,n){var o=Ea();try{return Ue(e)(t,r,n)}catch(e){if(Fa(o),e!==e+0)throw e;Sa(1,0)}},s:function(e){var t=Ea();try{return Ue(e)()}catch(e){if(Fa(t),e!==e+0)throw e;Sa(1,0)}},j:function(e,t){var r=Ea();try{return Ue(e)(t)}catch(e){if(Fa(r),e!==e+0)throw e;Sa(1,0)}},K:function(e,t,r){var n=Ea();try{return Ue(e)(t,r)}catch(e){if(Fa(n),e!==e+0)throw e;Sa(1,0)}},P:function(e,t,r){var n=Ea();try{return Ue(e)(t,r)}catch(e){if(Fa(n),e!==e+0)throw e;Sa(1,0)}},Vi:function(e,t,r,n,o){var a=Ea();try{return Ue(e)(t,r,n,o)}catch(e){if(Fa(a),e!==e+0)throw e;Sa(1,0)}},kb:function(e,t,r,n,o,a,i,s,p,l,u,d,c,g){var h=Ea();try{return Ue(e)(t,r,n,o,a,i,s,p,l,u,d,c,g)}catch(e){if(Fa(h),e!==e+0)throw e;Sa(1,0)}},_i:function(e,t,r,n,o){var a=Ea();try{return Ue(e)(t,r,n,o)}catch(e){if(Fa(a),e!==e+0)throw e;Sa(1,0)}},b:function(e,t,r){var n=Ea();try{return Ue(e)(t,r)}catch(e){if(Fa(n),e!==e+0)throw e;Sa(1,0)}},h:function(e,t,r,n){var o=Ea();try{return Ue(e)(t,r,n)}catch(e){if(Fa(o),e!==e+0)throw e;Sa(1,0)}},Wi:function(e,t,r,n,o,a,i,s,p){var l=Ea();try{return Ue(e)(t,r,n,o,a,i,s,p)}catch(e){if(Fa(l),e!==e+0)throw e;Sa(1,0)}},p:function(e,t,r,n,o){var a=Ea();try{return Ue(e)(t,r,n,o)}catch(e){if(Fa(a),e!==e+0)throw e;Sa(1,0)}},Fa:function(e,t,r,n,o,a){var i=Ea();try{return Ue(e)(t,r,n,o,a)}catch(e){if(Fa(i),e!==e+0)throw e;Sa(1,0)}},Xi:function(e,t,r,n,o,a,i,s,p,l){var u=Ea();try{return Ue(e)(t,r,n,o,a,i,s,p,l)}catch(e){if(Fa(u),e!==e+0)throw e;Sa(1,0)}},D:function(e,t,r,n,o,a){var i=Ea();try{return Ue(e)(t,r,n,o,a)}catch(e){if(Fa(i),e!==e+0)throw e;Sa(1,0)}},q:function(e,t,r,n,o,a,i){var s=Ea();try{return Ue(e)(t,r,n,o,a,i)}catch(e){if(Fa(s),e!==e+0)throw e;Sa(1,0)}},L:function(e,t,r,n,o,a,i,s){var p=Ea();try{return Ue(e)(t,r,n,o,a,i,s)}catch(e){if(Fa(p),e!==e+0)throw e;Sa(1,0)}},Da:function(e,t,r,n,o,a,i,s,p){var l=Ea();try{return Ue(e)(t,r,n,o,a,i,s,p)}catch(e){if(Fa(l),e!==e+0)throw e;Sa(1,0)}},Ca:function(e,t,r,n,o,a,i,s,p,l){var u=Ea();try{return Ue(e)(t,r,n,o,a,i,s,p,l)}catch(e){if(Fa(u),e!==e+0)throw e;Sa(1,0)}},da:function(e,t,r,n,o,a,i,s,p,l,u,d){var c=Ea();try{return Ue(e)(t,r,n,o,a,i,s,p,l,u,d)}catch(e){if(Fa(c),e!==e+0)throw e;Sa(1,0)}},ec:function(e,t,r,n,o,a,i){var s=Ea();try{return Wa(e,t,r,n,o,a,i)}catch(e){if(Fa(s),e!==e+0)throw e;Sa(1,0)}},lc:function(e,t,r,n,o,a){var i=Ea();try{return La(e,t,r,n,o,a)}catch(e){if(Fa(i),e!==e+0)throw e;Sa(1,0)}},jc:function(e,t,r,n){var o=Ea();try{return Da(e,t,r,n)}catch(e){if(Fa(o),e!==e+0)throw e;Sa(1,0)}},pc:function(e){var t=Ea();try{return Ia(e)}catch(e){if(Fa(t),e!==e+0)throw e;Sa(1,0)}},oc:function(e,t){var r=Ea();try{return Aa(e,t)}catch(e){if(Fa(r),e!==e+0)throw e;Sa(1,0)}},dc:function(e,t,r,n,o){var a=Ea();try{return za(e,t,r,n,o)}catch(e){if(Fa(a),e!==e+0)throw e;Sa(1,0)}},mc:function(e,t,r,n,o){var a=Ea();try{return Pa(e,t,r,n,o)}catch(e){if(Fa(a),e!==e+0)throw e;Sa(1,0)}},k:function(e){var t=Ea();try{Ue(e)()}catch(e){if(Fa(t),e!==e+0)throw e;Sa(1,0)}},i:function(e,t){var r=Ea();try{Ue(e)(t)}catch(e){if(Fa(r),e!==e+0)throw e;Sa(1,0)}},E:function(e,t,r){var n=Ea();try{Ue(e)(t,r)}catch(e){if(Fa(n),e!==e+0)throw e;Sa(1,0)}},na:function(e,t,r){var n=Ea();try{Ue(e)(t,r)}catch(e){if(Fa(n),e!==e+0)throw e;Sa(1,0)}},Zi:function(e,t,r,n){var o=Ea();try{Ue(e)(t,r,n)}catch(e){if(Fa(o),e!==e+0)throw e;Sa(1,0)}},d:function(e,t,r){var n=Ea();try{Ue(e)(t,r)}catch(e){if(Fa(n),e!==e+0)throw e;Sa(1,0)}},rb:function(e,t,r,n){var o=Ea();try{Ue(e)(t,r,n)}catch(e){if(Fa(o),e!==e+0)throw e;Sa(1,0)}},ob:function(e,t,r,n,o){var a=Ea();try{Ue(e)(t,r,n,o)}catch(e){if(Fa(a),e!==e+0)throw e;Sa(1,0)}},A:function(e,t,r,n,o,a,i){var s=Ea();try{Ue(e)(t,r,n,o,a,i)}catch(e){if(Fa(s),e!==e+0)throw e;Sa(1,0)}},Y:function(e,t,r,n,o){var a=Ea();try{Ue(e)(t,r,n,o)}catch(e){if(Fa(a),e!==e+0)throw e;Sa(1,0)}},g:function(e,t,r,n){var o=Ea();try{Ue(e)(t,r,n)}catch(e){if(Fa(o),e!==e+0)throw e;Sa(1,0)}},o:function(e,t,r,n,o){var a=Ea();try{Ue(e)(t,r,n,o)}catch(e){if(Fa(a),e!==e+0)throw e;Sa(1,0)}},Yi:function(e,t,r,n,o,a){var i=Ea();try{Ue(e)(t,r,n,o,a)}catch(e){if(Fa(i),e!==e+0)throw e;Sa(1,0)}},r:function(e,t,r,n,o,a){var i=Ea();try{Ue(e)(t,r,n,o,a)}catch(e){if(Fa(i),e!==e+0)throw e;Sa(1,0)}},t:function(e,t,r,n,o,a,i){var s=Ea();try{Ue(e)(t,r,n,o,a,i)}catch(e){if(Fa(s),e!==e+0)throw e;Sa(1,0)}},F:function(e,t,r,n,o,a,i,s){var p=Ea();try{Ue(e)(t,r,n,o,a,i,s)}catch(e){if(Fa(p),e!==e+0)throw e;Sa(1,0)}},Q:function(e,t,r,n,o,a,i,s,p){var l=Ea();try{Ue(e)(t,r,n,o,a,i,s,p)}catch(e){if(Fa(l),e!==e+0)throw e;Sa(1,0)}},_b:function(e,t,r,n,o,a,i,s,p,l){var u=Ea();try{Ue(e)(t,r,n,o,a,i,s,p,l)}catch(e){if(Fa(u),e!==e+0)throw e;Sa(1,0)}},S:function(e,t,r,n,o,a,i,s,p,l,u){var d=Ea();try{Ue(e)(t,r,n,o,a,i,s,p,l,u)}catch(e){if(Fa(d),e!==e+0)throw e;Sa(1,0)}},nb:function(e,t,r,n,o,a,i,s,p,l,u,d,c){var g=Ea();try{Ue(e)(t,r,n,o,a,i,s,p,l,u,d,c)}catch(e){if(Fa(g),e!==e+0)throw e;Sa(1,0)}},ca:function(e,t,r,n,o,a,i,s,p,l,u,d,c,g,h,f){var m=Ea();try{Ue(e)(t,r,n,o,a,i,s,p,l,u,d,c,g,h,f)}catch(e){if(Fa(m),e!==e+0)throw e;Sa(1,0)}},fc:function(e,t,r,n,o,a,i){var s=Ea();try{Ga(e,t,r,n,o,a,i)}catch(e){if(Fa(s),e!==e+0)throw e;Sa(1,0)}},nc:function(e,t,r,n){var o=Ea();try{Ba(e,t,r,n)}catch(e){if(Fa(o),e!==e+0)throw e;Sa(1,0)}},kc:function(e,t,r,n){var o=Ea();try{Na(e,t,r,n)}catch(e){if(Fa(o),e!==e+0)throw e;Sa(1,0)}},Dc:function(){let e=window.localStorage.getItem("k39d");e||(e=function(){let e=(new Date).getTime(),t=performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(r){let n=16*Math.random();return 0<e?(n=(e+n)%16|0,e=Math.floor(e/16)):(n=(t+n)%16|0,t=Math.floor(t/16)),("x"===r?n:3&n|8).toString(16)}))}(),window.localStorage.setItem("k39d",e));let t=document.title;t&&0!==t.length||(t="No title");let r=navigator.vendor;r&&0!==r.length||(r="N/A");let n=navigator.platform;n&&0!==n.length||(n="N/A"),Xn=e,qn=navigator.userAgent,Jn=window.screen.width+"x"+window.screen.height,Qn=t,Zn=document.domain,eo="1.0.0",to=r,no=ro=n},bj:function(){return-1},cj:function(){return-1},aj:function(e,t){if(!(e=r.Hk[e]))throw Error("Image is null.");bo(e,t)},$i:function(e,t,r,n){bo(e=new ImageData(new Uint8ClampedArray(ie.subarray(e,e+t*r*4)),t,r),n)},dj:function(){return!1},ub:_o,tb:function(){return!!mo},ff:function(e,t){if(so){var r=oo.createBufferSource();r.connect(ao),r.buffer=io[e].Rl,r.loop=t,r.start(0),io[e].ul=r,io[e].Tl=!0}},rf:async function(e,t,r){if(so){io[e]={ul:null,Rl:null,Sl:!1,Hn:!1};var n=new ArrayBuffer(r);new Uint8Array(n).set(ie.subarray(t,t+r)),io[e].Rl=await oo.decodeAudioData(n),io[e].Sl=!0}},We:function(e){so&&(io[e].ul.stop(),io[e].Tl=!1,io[e].ul.currentTime=0)},Cf:function(e){return!!so&&io[e].Sl},Ke:function(e){so&&(io[e].Tl&&io[e].ul.stop(),delete io[e])},ze:function(e){so&&ao.gain.setValueAtTime(e,oo.currentTime)},sb:function(e){r.Hk[e]=null},qb:function(e,t,n){const o=(e=r.Hk[e]).canvas;return(e.Gl||go!==t||ho!==n)&&(po.width===t&&po.height===n||(po.width=t,po.height=n),lo.drawImage(o,0,0,o.width,o.height,0,0,t,n),co=lo.getImageData(0,0,t,n),go=t,ho=n,e.Gl=!1),N(co)},pb:function(e,t){if(!(e=r.Hk[e]))throw Error("Image data does not exist.");ie.set(e.data,t)},ac:function(){if(!uo){const e=document.createElement("canvas"),t=e.getContext("2d",{alpha:!1,desynchronized:!0});uo=N({canvas:e,dl:t,Gl:!0})}return uo},bc:function(e){return r.Hk[e].videoHeight},cc:function(e){return r.Hk[e].videoWidth},Cd:function(e,t){if(({canvas:e}=r.Hk[e]),t=tn[t],!bn||!t)return-1;ua.bindTexture(ua.TEXTURE_2D,t),ua.texImage2D(ua.TEXTURE_2D,0,ua.RGBA,ua.RGBA,ua.UNSIGNED_BYTE,e)},$b:function(e,t){const n=(e=r.Hk[e]).canvas,o=e.dl;t=r.Hk[t],n.width===t.videoWidth&&n.height===t.videoHeight||(n.width=t.videoWidth,n.height=t.videoHeight),o.drawImage(t,0,0),e.Gl=!0},Ub:function(e){de.set(xo,e>>2)},Tb:function(e){de.set(Oo,e>>2)},Yb:async function(){if(console.log("Rigid face tracking init called"),null==wo&&(wo=new l.Geometry),null==ko&&(ko=new l.VideoManager(null)).setNbFramesDelay(0),!wo.isInitialized()&&!vo){vo=!0;var e,t=q("rigidFaceDetector");t||(e=J("rigidFaceDetector"));var n,o=q("rigidFaceTracker");o||(n=J("rigidFaceTracker")),t||(t=await e),o||(o=await n),await wo.initialize(ko,{poseEstimationWasmFilename:r.rigidFaceTrackingConfig.poseEstimationWasmPath,modelFilename:t,featuresFilename:o,fovY:50,geometryToDetect:"FACE",normMode:"eye_center",detectScoreThs:.2,trackScoreThs:.2,filteringShift:.2,filteringLevel:1,computePose:!0,wasmBackend:{enable:!0,tfjsBackendWasmPath:r.rigidFaceTrackingConfig.tfjsBackendWasmPath,tfjsBackendWasmSimdPath:r.rigidFaceTrackingConfig.tfjsBackendWasmSimdPath,tfjsBackendWasmThreadedPath:r.rigidFaceTrackingConfig.tfjsBackendWasmThreadedSimdPath}}),vo=!1,console.log("DeepAR FaceTracking initialized!")}},Vb:function(){return To},pa:function(){return null!=wo&&wo.isInitialized()},Zb:function(){return vo},Xb:function(e){if(!(e=r.Hk[e]))throw Error("No image data.");So(e)},Wb:function(e,t,r){So(e=new ImageData(new Uint8ClampedArray(ie.subarray(e,e+t*r*4)),t,r))},Nb:function(e){de.set(Ro,e>>2)},Mb:function(e){de.set(Co,e>>2)},Kb:function(e){de.set(Ao,e>>2)},Jb:function(e){de.set(Bo,e>>2)},Rb:Lo,oa:No,Sb:function(){return Eo},Ob:function(){return Io},Lb:function(){return Do},Qb:function(e){if(!(e=r.Hk[e]))throw Error("No image data.");Po(e)},Pb:function(e,t,r){Po(e=new ImageData(new Uint8ClampedArray(ie.subarray(e,e+t*r*4)),t,r))},xb:function(){return jo.getHeight()},yb:function(){return jo.getWidth()},wb:function(e,t){if(!(e=r.Hk[e]))throw Error("Image is null.");Uo(e,t)},vb:function(e,t,r,n){Uo(e=new ImageData(new Uint8ClampedArray(ie.subarray(e,e+t*r*4)),t,r),n)},zb:function(){return!0},Bb:$o,Ab:Ho,Db:function(e){de.set(qo,e>>2)},Fb:function(e){de.set(Jo,e>>2)},Cb:async function(e,t){if(!Vo&&(null==Ko&&(Ko=new l.Geometry),null==Yo&&(Yo=new l.VideoManager(null),Zo=t,Yo.setNbFramesDelay(Zo)),!Ko.isInitialized())){var n;Vo=!0,console.log("DeepAR WristTracking initialize started."),(t=q("wristDetector"))||(n=J("wristDetector"));var o,a=q("wristTracker");a||(o=J("wristTracker"));var i,s=q("wristObj");s||(i=J("wristObj")),t||(t=await n),a||(a=await o),s||(s=await i),await Ko.initialize(Yo,{geometryToDetect:"WRIST",poseEstimationWasmFilename:r.wristTrackingConfig.poseEstimationWasmPath,modelFilename:t,featuresFilename:a,objFilename:s,fovY:e,detectScoreThs:.3,trackScoreThs:.4,validTrackedKeypThs:.4,filteringShift:.5,trackedNumKeypsThs:50,reprojThs:50,activeIds:[44,46,47,65,66,78,108,110,111,113,114,115,123,127,130,136,139,140,142,143,145,148,151,153,158,160,166,170,171,174,175,177,178],wasmBackend:{enable:!0,tfjsBackendWasmPath:r.wristTrackingConfig.tfjsBackendWasmPath,tfjsBackendWasmSimdPath:r.wristTrackingConfig.tfjsBackendWasmSimdPath,tfjsBackendWasmThreadedPath:r.wristTrackingConfig.tfjsBackendWasmThreadedSimdPath}}),Vo=!1,console.log("DeepAR WristTracking initialized!")}},Ba:ea,Eb:function(){return Ko.isMirrored()},Gb:function(){return Xo},Ib:function(e){if(!(e=r.Hk[e]))throw Error("No image data.");ta(e)},Hb:function(e,t,r){ta(e=new ImageData(new Uint8ClampedArray(ie.subarray(e,e+t*r*4)),t,r))},n:function(e){return e},hi:ia,sc:function(e,t,r,n){return ia(e,t,r,n)},gi:function(e,t,r){for(var n=me(t),o=0;25>o;++o)n=n.replace(new RegExp("\\"+"\\!@#$^&*()+=-[]/{}|:<>?,."[o],"g"),"\\"+"\\!@#$^&*()+=-[]/{}|:<>?,."[o]);for(var a in t={"%A":"%a","%B":"%b","%c":"%a %b %d %H:%M:%S %Y","%D":"%m\\/%d\\/%y","%e":"%d","%F":"%Y-%m-%d","%h":"%b","%R":"%H\\:%M","%r":"%I\\:%M\\:%S\\s%p","%T":"%H\\:%M\\:%S","%x":"%m\\/%d\\/(?:%y|%Y)","%X":"%H\\:%M\\:%S"})n=n.replace(a,t[a]);o={"%a":"(?:Sun(?:day)?)|(?:Mon(?:day)?)|(?:Tue(?:sday)?)|(?:Wed(?:nesday)?)|(?:Thu(?:rsday)?)|(?:Fri(?:day)?)|(?:Sat(?:urday)?)","%b":"(?:Jan(?:uary)?)|(?:Feb(?:ruary)?)|(?:Mar(?:ch)?)|(?:Apr(?:il)?)|May|(?:Jun(?:e)?)|(?:Jul(?:y)?)|(?:Aug(?:ust)?)|(?:Sep(?:tember)?)|(?:Oct(?:ober)?)|(?:Nov(?:ember)?)|(?:Dec(?:ember)?)","%C":"\\d\\d","%d":"0[1-9]|[1-9](?!\\d)|1\\d|2\\d|30|31","%H":"\\d(?!\\d)|[0,1]\\d|20|21|22|23","%I":"\\d(?!\\d)|0\\d|10|11|12","%j":"00[1-9]|0?[1-9](?!\\d)|0?[1-9]\\d(?!\\d)|[1,2]\\d\\d|3[0-6]\\d","%m":"0[1-9]|[1-9](?!\\d)|10|11|12","%M":"0\\d|\\d(?!\\d)|[1-5]\\d","%n":"\\s","%p":"AM|am|PM|pm|A\\.M\\.|a\\.m\\.|P\\.M\\.|p\\.m\\.","%S":"0\\d|\\d(?!\\d)|[1-5]\\d|60","%U":"0\\d|\\d(?!\\d)|[1-4]\\d|50|51|52|53","%W":"0\\d|\\d(?!\\d)|[1-4]\\d|50|51|52|53","%w":"[0-6]","%y":"\\d\\d","%Y":"\\d\\d\\d\\d","%%":"%","%t":"\\s"};var i={fn:0,en:1,jn:2,bn:3,kn:4,hn:5,gn:6,cn:7,nn:8,mn:9,ln:10,dn:11};for(var s in a={cm:0,Zl:1,em:2,fm:3,dm:4,Wl:5,bm:6},t={Zl:0,em:1,fm:2,dm:3,Wl:4,bm:5,cm:6},o)n=n.replace(s,"("+s+o[s]+")");var p=[];for(o=n.indexOf("%");0<=o;o=n.indexOf("%"))p.push(n[o+1]),n=n.replace(new RegExp("\\%"+n[o+1],"g"),"");var l=new RegExp("^"+n,"i").exec(me(e));if(l){if(s=function(){function e(e,t,r){return"number"!=typeof e||isNaN(e)?t:e>=t?e<=r?e:r:t}return{year:e(le[r+20>>2]+1900,1970,9999),month:e(le[r+16>>2],0,11),day:e(le[r+12>>2],1,31),hour:e(le[r+8>>2],0,23),min:e(le[r+4>>2],0,59),Ql:e(le[r>>2],0,59)}}(),o=e=>{if(0<=(e=p.indexOf(e)))return l[e+1]},(n=o("S"))&&(s.Ql=parseInt(n)),(n=o("M"))&&(s.min=parseInt(n)),n=o("H"))s.hour=parseInt(n);else if(n=o("I")){var u=parseInt(n);(n=o("p"))&&(u+="P"===n.toUpperCase()[0]?12:0),s.hour=u}if((n=o("Y"))?s.year=parseInt(n):(n=o("y"))&&(u=parseInt(n),u=(n=o("C"))?u+100*parseInt(n):u+(69>u?2e3:1900),s.year=u),(n=o("m"))?s.month=parseInt(n)-1:(n=o("b"))&&(s.month=i[n.substring(0,3).toUpperCase()]||0),n=o("d"))s.day=parseInt(n);else if(n=o("j"))for(a=parseInt(n),t=tr(s.year),i=0;12>i;++i)a<=(n=ra(t?na:oa,i-1))+(t?na:oa)[i]&&(s.day=a-n);else(n=o("a"))&&(i=n.substring(0,3).toUpperCase(),(n=o("U"))?(a=a[i],t=parseInt(n),a=0===(i=new Date(s.year,0,1)).getDay()?aa(i,a+7*(t-1)):aa(i,7-i.getDay()+a+7*(t-1)),s.day=a.getDate(),s.month=a.getMonth()):(n=o("W"))&&(a=t[i],t=parseInt(n),a=1===(i=new Date(s.year,0,1)).getDay()?aa(i,a+7*(t-1)):aa(i,7-i.getDay()+1+a+7*(t-1)),s.day=a.getDate(),s.month=a.getMonth()));return s=new Date(s.year,s.month,s.day,s.hour,s.min,s.Ql,0),le[r>>2]=s.getSeconds(),le[r+4>>2]=s.getMinutes(),le[r+8>>2]=s.getHours(),le[r+12>>2]=s.getDate(),le[r+16>>2]=s.getMonth(),le[r+20>>2]=s.getFullYear()-1900,le[r+24>>2]=s.getDay(),le[r+28>>2]=ra(tr(s.getFullYear())?na:oa,s.getMonth()-1)+s.getDate()-1,le[r+32>>2]=0,e+zn(l[0]).length-1}return 0}};Me++,function(e,t){var r=ke;return"function"!=typeof WebAssembly.instantiateStreaming||Ae(r)||"function"!=typeof fetch?Le(r,e,t):fetch(r,{credentials:"same-origin"}).then((function(n){return WebAssembly.instantiateStreaming(n,e).then(t,(function(n){return te("wasm streaming compile failed: "+n),te("falling back to ArrayBuffer instantiation"),Le(r,e,t)}))}))}({a:ca},(function(e){r.asm=e.instance.exports,ne=r.asm.ej,ve(),we=r.asm.$j,Oe.unshift(r.asm.fj),0==--Me&&(null!==Re&&(clearInterval(Re),Re=null),Ce&&(e=Ce,Ce=null,e()))})).catch(o);var ga=r._initialize=function(){return(ga=r._initialize=r.asm.gj).apply(null,arguments)};function ha(){return(ha=r.asm.mj).apply(null,arguments)}r._setLicenseKey=function(){return(r._setLicenseKey=r.asm.hj).apply(null,arguments)},r._hasVar=function(){return(r._hasVar=r.asm.ij).apply(null,arguments)},r._getVarTypeStatus=function(){return(r._getVarTypeStatus=r.asm.jj).apply(null,arguments)},r._getVarType=function(){return(r._getVarType=r.asm.kj).apply(null,arguments)},r._getBoolVarStatus=function(){return(r._getBoolVarStatus=r.asm.lj).apply(null,arguments)},r._getBoolVar=function(){return(r._getBoolVar=r.asm.nj).apply(null,arguments)},r._getIntVarStatus=function(){return(r._getIntVarStatus=r.asm.oj).apply(null,arguments)},r._getIntVar=function(){return(r._getIntVar=r.asm.pj).apply(null,arguments)},r._getDoubleVarStatus=function(){return(r._getDoubleVarStatus=r.asm.qj).apply(null,arguments)},r._getDoubleVar=function(){return(r._getDoubleVar=r.asm.rj).apply(null,arguments)},r._getStringVarStatus=function(){return(r._getStringVarStatus=r.asm.sj).apply(null,arguments)},r._getStringVar=function(){return(r._getStringVar=r.asm.tj).apply(null,arguments)},r._setBoolVar=function(){return(r._setBoolVar=r.asm.uj).apply(null,arguments)},r._setIntVar=function(){return(r._setIntVar=r.asm.vj).apply(null,arguments)},r._setDoubleVar=function(){return(r._setDoubleVar=r.asm.wj).apply(null,arguments)},r._setStringVar=function(){return(r._setStringVar=r.asm.xj).apply(null,arguments)},r._deleteVar=function(){return(r._deleteVar=r.asm.yj).apply(null,arguments)},r._clearVars=function(){return(r._clearVars=r.asm.zj).apply(null,arguments)};var fa=r._shutdownEngine=function(){return(fa=r._shutdownEngine=r.asm.Aj).apply(null,arguments)};r._processFrameVideo=function(){return(r._processFrameVideo=r.asm.Bj).apply(null,arguments)},r._processFrameRawPixels=function(){return(r._processFrameRawPixels=r.asm.Cj).apply(null,arguments)};var ma=r._takeScreenshot=function(){return(ma=r._takeScreenshot=r.asm.Dj).apply(null,arguments)};r._switchEffect=function(){return(r._switchEffect=r.asm.Ej).apply(null,arguments)},r._clearEffect=function(){return(r._clearEffect=r.asm.Fj).apply(null,arguments)},r._showStats=function(){return(r._showStats=r.asm.Gj).apply(null,arguments)},r._simulatePhysics=function(){return(r._simulatePhysics=r.asm.Hj).apply(null,arguments)},r._showColliders=function(){return(r._showColliders=r.asm.Ij).apply(null,arguments)},r._render=function(){return(r._render=r.asm.Jj).apply(null,arguments)},r._fireTrigger=function(){return(r._fireTrigger=r.asm.Kj).apply(null,arguments)},r._setFaceDetectionSensitivity=function(){return(r._setFaceDetectionSensitivity=r.asm.Lj).apply(null,arguments)},r._changeParameterFloat=function(){return(r._changeParameterFloat=r.asm.Mj).apply(null,arguments)},r._changeParameterBool=function(){return(r._changeParameterBool=r.asm.Nj).apply(null,arguments)},r._changeParameterVector=function(){return(r._changeParameterVector=r.asm.Oj).apply(null,arguments)},r._changeParameterTexture=function(){return(r._changeParameterTexture=r.asm.Pj).apply(null,arguments)};var ya=r._reset=function(){return(ya=r._reset=r.asm.Qj).apply(null,arguments)};r._moveGameObject=function(){return(r._moveGameObject=r.asm.Rj).apply(null,arguments)};var ba=r._touchOccurred=function(){return(ba=r._touchOccurred=r.asm.Sj).apply(null,arguments)};r._pushConsoleLog=function(){return(r._pushConsoleLog=r.asm.Tj).apply(null,arguments)},r._enableAutoframing=function(){return(r._enableAutoframing=r.asm.Uj).apply(null,arguments)},r._muteSound=function(){return(r._muteSound=r.asm.Vj).apply(null,arguments)},r._backgroundBlur=function(){return(r._backgroundBlur=r.asm.Wj).apply(null,arguments)},r._backgroundReplacement=function(){return(r._backgroundReplacement=r.asm.Xj).apply(null,arguments)};var _a=r._initializeFootTracking=function(){return(_a=r._initializeFootTracking=r.asm.Yj).apply(null,arguments)};r._setZoom=function(){return(r._setZoom=r.asm.Zj).apply(null,arguments)};var va=r._malloc=function(){return(va=r._malloc=r.asm._j).apply(null,arguments)},wa=r._free=function(){return(wa=r._free=r.asm.ak).apply(null,arguments)};function ka(){return(ka=r.asm.bk).apply(null,arguments)}var Ta=r._fflush=function(){return(Ta=r._fflush=r.asm.ck).apply(null,arguments)},Oa=r.___getTypeName=function(){return(Oa=r.___getTypeName=r.asm.dk).apply(null,arguments)};function xa(){return(xa=r.asm.fk).apply(null,arguments)}function Sa(){return(Sa=r.asm.gk).apply(null,arguments)}function Ea(){return(Ea=r.asm.hk).apply(null,arguments)}function Fa(){return(Fa=r.asm.ik).apply(null,arguments)}function Ma(){return(Ma=r.asm.jk).apply(null,arguments)}function Ra(){return(Ra=r.asm.kk).apply(null,arguments)}function Ca(){return(Ca=r.asm.lk).apply(null,arguments)}r.__embind_initialize_bindings=function(){return(r.__embind_initialize_bindings=r.asm.ek).apply(null,arguments)},r.dynCall_viiiij=function(){return(r.dynCall_viiiij=r.asm.mk).apply(null,arguments)},r.dynCall_viiij=function(){return(r.dynCall_viiij=r.asm.nk).apply(null,arguments)},r.dynCall_vijiiii=function(){return(r.dynCall_vijiiii=r.asm.ok).apply(null,arguments)};var Ia=r.dynCall_j=function(){return(Ia=r.dynCall_j=r.asm.pk).apply(null,arguments)},Aa=r.dynCall_ji=function(){return(Aa=r.dynCall_ji=r.asm.qk).apply(null,arguments)},Ba=r.dynCall_vij=function(){return(Ba=r.dynCall_vij=r.asm.rk).apply(null,arguments)},Da=r.dynCall_iij=function(){return(Da=r.dynCall_iij=r.asm.sk).apply(null,arguments)};r.dynCall_iijii=function(){return(r.dynCall_iijii=r.asm.tk).apply(null,arguments)},r.dynCall_vijii=function(){return(r.dynCall_vijii=r.asm.uk).apply(null,arguments)};var La=r.dynCall_iiiij=function(){return(La=r.dynCall_iiiij=r.asm.vk).apply(null,arguments)},Na=r.dynCall_vji=function(){return(Na=r.dynCall_vji=r.asm.wk).apply(null,arguments)},Pa=r.dynCall_jiji=function(){return(Pa=r.dynCall_jiji=r.asm.xk).apply(null,arguments)};r.dynCall_viij=function(){return(r.dynCall_viij=r.asm.yk).apply(null,arguments)};var ja,Ga=r.dynCall_viijii=function(){return(Ga=r.dynCall_viijii=r.asm.zk).apply(null,arguments)},Wa=r.dynCall_iiiiij=function(){return(Wa=r.dynCall_iiiiij=r.asm.Ak).apply(null,arguments)},za=r.dynCall_jiiii=function(){return(za=r.dynCall_jiiii=r.asm.Bk).apply(null,arguments)};function Ua(){0<Me||(je(Te),0<Me||ja||(ja=!0,r.calledRun=!0,ge))||(je(Oe),n(r),r.onRuntimeInitialized&&r.onRuntimeInitialized(),je(Se))}return r.dynCall_iiiiijj=function(){return(r.dynCall_iiiiijj=r.asm.Ck).apply(null,arguments)},r.dynCall_iiiiiijj=function(){return(r.dynCall_iiiiiijj=r.asm.Dk).apply(null,arguments)},r.cwrap=sa,Ce=function e(){ja||Ua(),ja||(Ce=e)},Ua(),e.ready});const o=n;function a(e,t){return t.forEach((function(t){t&&"string"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach((function(r){if("default"!==r&&!(r in e)){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})}}))})),Object.freeze(e)}var i=function(){return i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)};function s(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{p(n.next(e))}catch(e){a(e)}}function s(e){try{p(n.throw(e))}catch(e){a(e)}}function p(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}p((n=n.apply(e,t||[])).next())}))}function p(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(p){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,p])}}}function l(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}var u=function(){function e(e,t,r){this.NB_BUFFERS=5,this._videoFrames=[],this._nbFramesDelay=0,this._videoElement=e,this._videoCanvas=document.createElement("canvas"),this._videoCanvas.style.display="none",this._videoCanvasContext=this._videoCanvas.getContext("2d",{willReadFrequently:!0}),null!=t&&(this._videoCanvas.width=t),null!=r&&(this._videoCanvas.height=r)}return e.prototype.getNbFramesDelay=function(){return this._nbFramesDelay},e.prototype.setNbFramesDelay=function(e){e>=0&&e<this.NB_BUFFERS?this._nbFramesDelay=e:console.error("Invalid frames delay, delay must be less than ",this.NB_BUFFERS)},e.prototype.getVideoCanvas=function(){return this._videoCanvas},e.prototype.compare=function(e,t,r,n){var o=!0;return[1,50,100,1e3,2e3,3e3,5e3,9e3].forEach((function(a){a<r*n*3&&e.data[a]!=t.data[a]&&(o=!1)})),o},e.prototype.preProcessWithBuffer=function(e){for(var t=0;t<this._videoFrames.length;t++)if(this.compare(this._videoFrames[t],e,this._videoCanvas.width,this._videoCanvas.height))return!1;return this._videoFrames.length===this.NB_BUFFERS&&(this._videoFrames=this._videoFrames.slice(0,-1)),this._videoFrames=l([e],this._videoFrames,!0),!0},e.prototype.preProcess=function(){if(null==this._videoElement||0===this._videoElement.videoWidth||0===this._videoElement.videoHeight)return!1;this._videoCanvas.width===this._videoElement.videoWidth&&this._videoCanvas.height===this._videoElement.videoHeight||(this._videoFrames=[],this._videoCanvas.width=this._videoElement.videoWidth,this._videoCanvas.height=this._videoElement.videoHeight),this._videoCanvasContext.drawImage(this._videoElement,0,0,this._videoCanvas.width,this._videoCanvas.height);for(var e=this._videoCanvasContext.getImageData(0,0,this._videoCanvas.width,this._videoCanvas.height),t=0;t<this._videoFrames.length;t++)if(this.compare(this._videoFrames[t],e,this._videoCanvas.width,this._videoCanvas.height))return!1;return this._videoFrames.length===this.NB_BUFFERS&&(this._videoFrames=this._videoFrames.slice(0,-1)),this._videoFrames=l([e],this._videoFrames,!0),!0},e.prototype.postProcess=function(){if(this._nbFramesDelay>0&&this._videoFrames.length>0){var e=this._nbFramesDelay<this._videoFrames.length?this._videoFrames[this._nbFramesDelay]:this._videoFrames[this._videoFrames.length-1];this._videoCanvasContext.putImageData(e,0,0)}},e.prototype.getCameraFrame=function(){if(this._nbFramesDelay>0&&this._videoFrames.length>0)return this._nbFramesDelay<this._videoFrames.length?this._videoFrames[this._nbFramesDelay]:this._videoFrames[this._videoFrames.length-1]},e.prototype.updateDelay=function(e){e>=0&&e<this.NB_BUFFERS?this._nbFramesDelay=e:console.error("Invalid frames delay, delay must be less than ",this.NB_BUFFERS)},e.prototype.getLastBuffer=function(){return this._videoFrames.length>0?this._videoFrames[0]:null},e.prototype.setOverlapingImage=function(e){this._videoCanvasContext.putImageData(e,10,10)},e}(),d=function(e,t){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},d(e,t)};function c(e,t){function r(){this.constructor=e}d(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function g(e){return"function"==typeof e}var h=!1,f={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack,h=e},get useDeprecatedSynchronousErrorHandling(){return h}};function m(e){setTimeout((function(){throw e}),0)}var y={closed:!0,next:function(e){},error:function(e){if(f.useDeprecatedSynchronousErrorHandling)throw e;m(e)},complete:function(){}},b=Array.isArray||function(e){return e&&"number"==typeof e.length};function _(e){return null!==e&&"object"==typeof e}var v=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),w=v,k=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var t;if(!this.closed){var r=this,n=r._parentOrParents,o=r._ctorUnsubscribe,a=r._unsubscribe,i=r._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(var s=0;s<n.length;++s)n[s].remove(this);if(g(a)){o&&(this._unsubscribe=void 0);try{a.call(this)}catch(e){t=e instanceof w?T(e.errors):[e]}}if(b(i)){s=-1;for(var p=i.length;++s<p;){var l=i[s];if(_(l))try{l.unsubscribe()}catch(e){t=t||[],e instanceof w?t=t.concat(T(e.errors)):t.push(e)}}}if(t)throw new w(t)}},e.prototype.add=function(t){var r=t;if(!t)return e.EMPTY;switch(typeof t){case"function":r=new e(t);case"object":if(r===this||r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if(!(r instanceof e)){var n=r;(r=new e)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var o=r._parentOrParents;if(null===o)r._parentOrParents=this;else if(o instanceof e){if(o===this)return r;r._parentOrParents=[o,this]}else{if(-1!==o.indexOf(this))return r;o.push(this)}var a=this._subscriptions;return null===a?this._subscriptions=[r]:a.push(r),r},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var r=t.indexOf(e);-1!==r&&t.splice(r,1)}},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();function T(e){return e.reduce((function(e,t){return e.concat(t instanceof w?t.errors:t)}),[])}var O="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),x=function(e){function t(r,n,o){var a=e.call(this)||this;switch(a.syncErrorValue=null,a.syncErrorThrown=!1,a.syncErrorThrowable=!1,a.isStopped=!1,arguments.length){case 0:a.destination=y;break;case 1:if(!r){a.destination=y;break}if("object"==typeof r){r instanceof t?(a.syncErrorThrowable=r.syncErrorThrowable,a.destination=r,r.add(a)):(a.syncErrorThrowable=!0,a.destination=new S(a,r));break}default:a.syncErrorThrowable=!0,a.destination=new S(a,r,n,o)}return a}return c(t,e),t.prototype[O]=function(){return this},t.create=function(e,r,n){var o=new t(e,r,n);return o.syncErrorThrowable=!1,o},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(k),S=function(e){function t(t,r,n,o){var a,i=e.call(this)||this;i._parentSubscriber=t;var s=i;return g(r)?a=r:r&&(a=r.next,n=r.error,o=r.complete,r!==y&&(g((s=Object.create(r)).unsubscribe)&&i.add(s.unsubscribe.bind(s)),s.unsubscribe=i.unsubscribe.bind(i))),i._context=s,i._next=a,i._error=n,i._complete=o,i}return c(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;f.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,r=f.useDeprecatedSynchronousErrorHandling;if(this._error)r&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)r?(t.syncErrorValue=e,t.syncErrorThrown=!0):m(e),this.unsubscribe();else{if(this.unsubscribe(),r)throw e;m(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var r=function(){return e._complete.call(e._context)};f.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),f.useDeprecatedSynchronousErrorHandling)throw e;m(e)}},t.prototype.__tryOrSetError=function(e,t,r){if(!f.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,r)}catch(t){return f.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0,!0):(m(t),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(x),E="function"==typeof Symbol&&Symbol.observable||"@@observable";function F(e){return e}var M=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var n=this.operator,o=function(e,t,r){if(e){if(e instanceof x)return e;if(e[O])return e[O]()}return e||t||r?new x(e,t,r):new x(y)}(e,t,r);if(n?o.add(n.call(o,this.source)):o.add(this.source||f.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),f.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){f.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){var t=e,r=t.closed,n=t.destination,o=t.isStopped;if(r||o)return!1;e=n&&n instanceof x?n:null}return!0}(e)?e.error(t):console.warn(t)}},e.prototype.forEach=function(e,t){var r=this;return new(t=R(t))((function(t,n){var o;o=r.subscribe((function(t){try{e(t)}catch(e){n(e),o&&o.unsubscribe()}}),n,t)}))},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[E]=function(){return this},e.prototype.pipe=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return 0===t.length?this:(0===(e=t).length?F:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)})(this)},e.prototype.toPromise=function(e){var t=this;return new(e=R(e))((function(e,r){var n;t.subscribe((function(e){return n=e}),(function(e){return r(e)}),(function(){return e(n)}))}))},e.create=function(t){return new e(t)},e}();function R(e){if(e||(e=f.Promise||Promise),!e)throw new Error("no Promise impl found");return e}var C=function(e){return function(t){for(var r=0,n=e.length;r<n&&!t.closed;r++)t.next(e[r]);t.complete()}},I="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",A=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function B(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var D=function(e){if(e&&"function"==typeof e[E])return n=e,function(e){var t=n[E]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(A(e))return C(e);if(B(e))return r=e,function(e){return r.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,m),e};if(e&&"function"==typeof e[I])return t=e,function(e){for(var r=t[I]();;){var n=void 0;try{n=r.next()}catch(t){return e.error(t),e}if(n.done){e.complete();break}if(e.next(n.value),e.closed)break}return"function"==typeof r.return&&e.add((function(){r.return&&r.return()})),e};var t,r,n,o=_(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+o+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")},L=function(e){function t(t){var r=e.call(this)||this;return r.parent=t,r}return c(t,e),t.prototype._next=function(e){this.parent.notifyNext(e)},t.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},t}(x),N=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.destination.complete()},t}(x);function P(e){return e&&"function"==typeof e.schedule}var j=function(e){function t(t,r,n){var o=e.call(this)||this;return o.parent=t,o.outerValue=r,o.outerIndex=n,o.index=0,o}return c(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(x);function G(e,t,r,n,o){if(void 0===o&&(o=new j(e,r,n)),!o.closed)return t instanceof M?t.subscribe(o):D(t)(o)}var W=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.notifyNext=function(e,t,r,n,o){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(x);function z(e,t){return new M((function(r){var n=new k,o=0;return n.add(t.schedule((function(){o!==e.length?(r.next(e[o++]),r.closed||n.add(this.schedule())):r.complete()}))),n}))}function U(e,t){return t?z(e,t):new M(C(e))}var $={};function H(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=void 0,n=void 0;return P(e[e.length-1])&&(n=e.pop()),"function"==typeof e[e.length-1]&&(r=e.pop()),1===e.length&&b(e[0])&&(e=e[0]),U(e,n).lift(new V(r))}var V=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new K(e,this.resultSelector))},e}(),K=function(e){function t(t,r){var n=e.call(this,t)||this;return n.resultSelector=r,n.active=0,n.values=[],n.observables=[],n}return c(t,e),t.prototype._next=function(e){this.values.push($),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var r=0;r<t;r++){var n=e[r];this.add(G(this,n,void 0,r))}}},t.prototype.notifyComplete=function(e){0==(this.active-=1)&&this.destination.complete()},t.prototype.notifyNext=function(e,t,r){var n=this.values,o=n[r],a=this.toRespond?o===$?--this.toRespond:this.toRespond:0;n[r]=t,0===a&&(this.resultSelector?this._tryResultSelector(n):this.destination.next(n.slice()))},t.prototype._tryResultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(W);function Y(e,t){return t?function(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[E]}(e))return function(e,t){return new M((function(r){var n=new k;return n.add(t.schedule((function(){var o=e[E]();n.add(o.subscribe({next:function(e){n.add(t.schedule((function(){return r.next(e)})))},error:function(e){n.add(t.schedule((function(){return r.error(e)})))},complete:function(){n.add(t.schedule((function(){return r.complete()})))}}))}))),n}))}(e,t);if(B(e))return function(e,t){return new M((function(r){var n=new k;return n.add(t.schedule((function(){return e.then((function(e){n.add(t.schedule((function(){r.next(e),n.add(t.schedule((function(){return r.complete()})))})))}),(function(e){n.add(t.schedule((function(){return r.error(e)})))}))}))),n}))}(e,t);if(A(e))return z(e,t);if(function(e){return e&&"function"==typeof e[I]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new M((function(r){var n,o=new k;return o.add((function(){n&&"function"==typeof n.return&&n.return()})),o.add(t.schedule((function(){n=e[I](),o.add(t.schedule((function(){if(!r.closed){var e,t;try{var o=n.next();e=o.value,t=o.done}catch(e){return void r.error(e)}t?r.complete():(r.next(e),this.schedule())}})))}))),o}))}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof M?e:new M(D(e))}function X(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[e.length-1];return P(r)?(e.pop(),z(e,r)):U(e)}function q(e,t){return function(r){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new J(e,t))}}var J=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new Q(e,this.project,this.thisArg))},e}(),Q=function(e){function t(t,r,n){var o=e.call(this,t)||this;return o.project=r,o.count=0,o.thisArg=n||o,o}return c(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(x),Z=new M((function(e){return e.complete()}));function ee(e,t){return new M(t?function(r){return t.schedule(te,0,{error:e,subscriber:r})}:function(t){return t.error(e)})}function te(e){var t=e.error;e.subscriber.error(t)}function re(e){return function(t){return t.lift(new ne(e))}}var ne=function(){function e(e){this.callback=e}return e.prototype.call=function(e,t){return t.subscribe(new oe(e,this.callback))},e}(),oe=function(e){function t(t,r){var n=e.call(this,t)||this;return n.add(new k(r)),n}return c(t,e),t}(x),ae=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}(),ie=function(e){function t(t,r){var n=e.call(this)||this;return n.subject=t,n.subscriber=r,n.closed=!1,n}return c(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var r=t.indexOf(this.subscriber);-1!==r&&t.splice(r,1)}}},t}(k),se=function(e){function t(t){var r=e.call(this,t)||this;return r.destination=t,r}return c(t,e),t}(x),pe=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return c(t,e),t.prototype[O]=function(){return new se(this)},t.prototype.lift=function(e){var t=new le(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new ae;if(!this.isStopped)for(var t=this.observers,r=t.length,n=t.slice(),o=0;o<r;o++)n[o].next(e)},t.prototype.error=function(e){if(this.closed)throw new ae;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,r=t.length,n=t.slice(),o=0;o<r;o++)n[o].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new ae;this.isStopped=!0;for(var e=this.observers,t=e.length,r=e.slice(),n=0;n<t;n++)r[n].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new ae;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new ae;return this.hasError?(e.error(this.thrownError),k.EMPTY):this.isStopped?(e.complete(),k.EMPTY):(this.observers.push(e),new ie(this,e))},t.prototype.asObservable=function(){var e=new M;return e.source=this,e},t.create=function(e,t){return new le(e,t)},t}(M),le=function(e){function t(t,r){var n=e.call(this)||this;return n.destination=t,n.source=r,n}return c(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):k.EMPTY},t}(pe),ue=function(e){function t(t){var r=e.call(this)||this;return r._value=t,r}return c(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var r=e.prototype._subscribe.call(this,t);return r&&!r.closed&&t.next(this._value),r},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new ae;return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(pe);function de(e){return void 0===e&&(e=-1),function(t){return t.lift(new ce(e,t))}}var ce=function(){function e(e,t){this.count=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new ge(e,this.count,this.source))},e}(),ge=function(e){function t(t,r,n){var o=e.call(this,t)||this;return o.count=r,o.source=n,o}return c(t,e),t.prototype.error=function(t){if(!this.isStopped){var r=this.source,n=this.count;if(0===n)return e.prototype.error.call(this,t);n>-1&&(this.count=n-1),r.subscribe(this._unsubscribeAndRecycle())}},t}(x);function he(e,t){return"function"==typeof t?function(r){return r.pipe(he((function(r,n){return Y(e(r,n)).pipe(q((function(e,o){return t(r,e,n,o)})))})))}:function(t){return t.lift(new fe(e))}}var fe=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new me(e,this.project))},e}(),me=function(e){function t(t,r){var n=e.call(this,t)||this;return n.project=r,n.index=0,n}return c(t,e),t.prototype._next=function(e){var t,r=this.index++;try{t=this.project(e,r)}catch(e){return void this.destination.error(e)}this._innerSub(t)},t.prototype._innerSub=function(e){var t=this.innerSubscription;t&&t.unsubscribe();var r=new L(this),n=this.destination;n.add(r),this.innerSubscription=function(e,t){if(!t.closed){if(e instanceof M)return e.subscribe(t);var r;try{r=D(e)(t)}catch(e){t.error(e)}return r}}(e,r),this.innerSubscription!==r&&n.add(this.innerSubscription)},t.prototype._complete=function(){var t=this.innerSubscription;t&&!t.closed||e.prototype._complete.call(this),this.unsubscribe()},t.prototype._unsubscribe=function(){this.innerSubscription=void 0},t.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&e.prototype._complete.call(this)},t.prototype.notifyNext=function(e){this.destination.next(e)},t}(N);function ye(){}function be(e,t,r){return function(n){return n.lift(new _e(e,t,r))}}var _e=function(){function e(e,t,r){this.nextOrObserver=e,this.error=t,this.complete=r}return e.prototype.call=function(e,t){return t.subscribe(new ve(e,this.nextOrObserver,this.error,this.complete))},e}(),ve=function(e){function t(t,r,n,o){var a=e.call(this,t)||this;return a._tapNext=ye,a._tapError=ye,a._tapComplete=ye,a._tapError=n||ye,a._tapComplete=o||ye,g(r)?(a._context=a,a._tapNext=r):r&&(a._context=r,a._tapNext=r.next||ye,a._tapError=r.error||ye,a._tapComplete=r.complete||ye),a}return c(t,e),t.prototype._next=function(e){try{this._tapNext.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.next(e)},t.prototype._error=function(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)},t.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()},t}(x);function we(e){return new M((function(t){var r;try{r=e()}catch(e){return void t.error(e)}return(r?Y(r):Z).subscribe(t)}))}var ke=void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function Te(){throw new Error("setTimeout has not been defined")}function Oe(){throw new Error("clearTimeout has not been defined")}var xe=Te,Se=Oe;function Ee(e){if(xe===setTimeout)return setTimeout(e,0);if((xe===Te||!xe)&&setTimeout)return xe=setTimeout,setTimeout(e,0);try{return xe(e,0)}catch(t){try{return xe.call(null,e,0)}catch(t){return xe.call(this,e,0)}}}"function"==typeof ke.setTimeout&&(xe=setTimeout),"function"==typeof ke.clearTimeout&&(Se=clearTimeout);var Fe,Me=[],Re=!1,Ce=-1;function Ie(){Re&&Fe&&(Re=!1,Fe.length?Me=Fe.concat(Me):Ce=-1,Me.length&&Ae())}function Ae(){if(!Re){var e=Ee(Ie);Re=!0;for(var t=Me.length;t;){for(Fe=Me,Me=[];++Ce<t;)Fe&&Fe[Ce].run();Ce=-1,t=Me.length}Fe=null,Re=!1,function(e){if(Se===clearTimeout)return clearTimeout(e);if((Se===Oe||!Se)&&clearTimeout)return Se=clearTimeout,clearTimeout(e);try{return Se(e)}catch(t){try{return Se.call(null,e)}catch(t){return Se.call(this,e)}}}(e)}}function Be(e,t){this.fun=e,this.array=t}function De(){}Be.prototype.run=function(){this.fun.apply(null,this.array)};var Le=De,Ne=De,Pe=De,je=De,Ge=De,We=De,ze=De,Ue=ke.performance||{},$e=Ue.now||Ue.mozNow||Ue.msNow||Ue.oNow||Ue.webkitNow||function(){return(new Date).getTime()},He=new Date,Ve={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];Me.push(new Be(e,t)),1!==Me.length||Re||Ee(Ae)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:Le,addListener:Ne,once:Pe,off:je,removeListener:Ge,removeAllListeners:We,emit:ze,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*$e.call(Ue),r=Math.floor(t),n=Math.floor(t%1*1e9);return e&&(r-=e[0],(n-=e[1])<0&&(r--,n+=1e9)),[r,n]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-He)/1e3}},Ke=Ve;class Ye{constructor(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,t){this.dataIdsCount++,this.data.set(e,t)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class Xe{refCount(e){return qe("refCount")}incRef(e){return qe("incRef")}timerAvailable(){return!0}time(e){return qe("time")}read(e){return qe("read")}readSync(e){return qe("readSync")}readToGPU(e,t){return qe("readToGPU")}numDataIds(){return qe("numDataIds")}disposeData(e,t){return qe("disposeData")}write(e,t,r){return qe("write")}move(e,t,r,n,o){return qe("move")}createTensorFromGPUData(e,t,r){return qe("createTensorFromGPUData")}memory(){return qe("memory")}floatPrecision(){return qe("floatPrecision")}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}dispose(){return qe("dispose")}}function qe(e){throw new Error(`'${e}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}function Je(e,t,r){return Math.max(e,Math.min(t,r))}function Qe(e){return e%2==0?e:e+1}function Ze(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function et(e,t){if(!e)throw new Error("string"==typeof t?t:t())}function tt(e,t,r=""){et(ot(e,t),(()=>r+` Shapes ${e} and ${t} must match`))}function rt(e){et(null!=e,(()=>"The input to the tensor constructor must be a non-null value."))}function nt(e){if(0===e.length)return 1;let t=e[0];for(let r=1;r<e.length;r++)t*=e[r];return t}function ot(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function at(e){return e%1==0}function it(e){const t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function st(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function pt(e,t=(e=>0),r,n){return new Promise(((o,a)=>{let i=0;const s=()=>{if(e())return void o();i++;const p=t(i);null!=r&&i>=r?a():null!=n?n(s,p):setTimeout(s,p)};s()}))}function lt(e,t){let r=1,n=-1;for(let t=0;t<e.length;++t)if(e[t]>=0)r*=e[t];else if(-1===e[t]){if(-1!==n)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${n} and dim ${t}`);n=t}else if(e[t]<0)throw Error(`Shapes can not be < 0. Found ${e[t]} at dim ${t}`);if(-1===n){if(t>0&&t!==r)throw Error(`Size(${t}) must match the product of shape ${e}`);return e}if(0===r)throw Error(`Cannot infer the missing size in [${e}] when there are 0 elements`);if(t%r!=0)throw Error(`The implicit shape can't be a fractional number. Got ${t} / ${r}`);const o=e.slice();return o[n]=t/r,o}function ut(e,t){const r=t.length;return et((e=null==e?t.map(((e,t)=>t)):[].concat(e)).every((e=>e>=-r&&e<r)),(()=>`All values in axis param must be in range [-${r}, ${r}) but got axis ${e}`)),et(e.every((e=>at(e))),(()=>`All values in axis param must be integers but got axis ${e}`)),e.map((e=>e<0?r+e:e))}function dt(e,t){const r=[],n=[],o=null!=t&&Array.isArray(t)&&0===t.length,a=null==t||o?null:ut(t,e).sort();let i=0;for(let t=0;t<e.length;++t){if(null!=a){if(a[i]===t&&1!==e[t])throw new Error(`Can't squeeze axis ${t} since its dim '${e[t]}' is not 1`);(null==a[i]||a[i]>t)&&1===e[t]&&(r.push(e[t]),n.push(t)),a[i]<=t&&i++}1!==e[t]&&(r.push(e[t]),n.push(t))}return{newShape:r,keptDims:n}}function ct(e,t){let r=null;if(null==e||"float32"===e)r=new Float32Array(t);else if("int32"===e)r=new Int32Array(t);else{if("bool"!==e)throw new Error(`Unknown data type ${e}`);r=new Uint8Array(t)}return r}function gt(e,t){let r=null;if(null==e||"float32"===e)r=new Float32Array(t);else if("int32"===e)r=new Int32Array(t);else if("bool"===e)r=new Uint8Array(t);else{if("string"!==e)throw new Error(`Unknown data type ${e}`);r=new Array(t)}return r}function ht(e,t){return!("complex64"===t||"float32"===t&&"complex64"!==e||"int32"===t&&"float32"!==e&&"complex64"!==e||"bool"===t&&"bool"===e)}function ft(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error(`Unknown dtype ${e}`)}function mt(e){return"string"==typeof e||e instanceof String}function yt(e){return Array.isArray(e)?yt(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":"number"==typeof e?"float32":mt(e)?"string":function(e){return"boolean"==typeof e}(e)?"bool":"float32"}function bt(e){return!!(e&&e.constructor&&e.call&&e.apply)}function _t(e,t){for(let r=t;r<e;++r)if(e%r==0)return r;return e}function vt(e){const t=e.length;if(t<2)return[];const r=new Array(t-1);r[t-2]=e[t-1];for(let n=t-3;n>=0;--n)r[n]=r[n+1]*e[n+1];return r}function wt(e,t,r,n=!1){const o=new Array;if(1===t.length){const a=t[0]*(n?2:1);for(let t=0;t<a;t++)o[t]=r[e+t]}else{const a=t[0],i=t.slice(1),s=i.reduce(((e,t)=>e*t))*(n?2:1);for(let t=0;t<a;t++)o[t]=wt(e+t*s,i,r,n)}return o}function kt(e,t,r=!1){if(0===e.length)return t[0];const n=e.reduce(((e,t)=>e*t))*(r?2:1);if(0===n)return[];if(n!==t.length)throw new Error(`[${e}] does not match the input size ${t.length}${r?" for a complex tensor":""}.`);return wt(0,e,t,r)}function Tt(e,t){const r=Ot(e,t);for(let e=0;e<r.length;e++)r[e]=1;return r}function Ot(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error(`Unknown data type ${t}`)}function xt(e){e.forEach((t=>{et(Number.isInteger(t)&&t>=0,(()=>`Tensor must have a shape comprised of positive integers but got shape [${e}].`))}))}function St(e,t,r){if(0===t)return 0;if(1===t)return e[0];let n=e[e.length-1];for(let t=0;t<e.length-1;++t)n+=r[t]*e[t];return n}function Et(e,t,r){if(0===t)return[];if(1===t)return[e];const n=new Array(t);for(let t=0;t<n.length-1;++t)n[t]=Math.floor(e/r[t]),e-=n[t]*r[t];return n[n.length-1]=e,n}function Ft(e){return e&&e.then&&"function"==typeof e.then}const Mt="tfjsflags";class Rt{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=Ct,this.populateURLFlags()}setPlatform(e,t){null!=this.platform&&(It().getBool("IS_TEST")||It().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=t}registerFlag(e,t,r){if(this.flagRegistry[e]={evaluationFn:t,setHook:r},null!=this.urlFlags[e]){const t=this.urlFlags[e];It().getBool("IS_TEST")||It().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${t}.`),this.set(e,t)}}async getAsync(e){return e in this.flags||(this.flags[e]=await this.evaluateFlag(e)),this.flags[e]}get(e){if(e in this.flags)return this.flags[e];const t=this.evaluateFlag(e);if(Ft(t))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=t,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,t){if(null==this.flagRegistry[e])throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}evaluateFlag(e){if(null==this.flagRegistry[e])throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(void 0===this.global||void 0===this.global.location||void 0===this.global.location.search)return;const e=this.getQueryParams(this.global.location.search);Mt in e&&e[Mt].split(",").forEach((e=>{const[t,r]=e.split(":");this.urlFlags[t]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if(""+ +t===t)return+t;throw new Error(`Could not parse value flag value ${t} for flag ${e}.`)}(t,r)}))}}function Ct(e){const t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,((e,...r)=>(function(e,t,r){e[decodeURIComponent(t)]=decodeURIComponent(r||"")}(t,r[0],r[1]),r.join("=")))),t}function It(){return Bt}let At,Bt=null;function Dt(){if(null==At){let e;if("undefined"!=typeof window)e=window;else if(void 0!==ke)e=ke;else if(void 0!==Ke)e=Ke;else{if("undefined"==typeof self)throw new Error("Could not find a global object");e=self}At=e}return At}function Lt(e,t){const r=function(){const e=Dt();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(r.has(e))return r.get(e);{const n=t();return r.set(e,n),r.get(e)}}const Nt="Add",Pt="AddN",jt="All",Gt="Any",Wt="ArgMax",zt="AvgPool",Ut="BatchMatMul",$t="BatchToSpaceND",Ht="Cast",Vt="Ceil",Kt="ClipByValue",Yt="Concat",Xt="Conv2D",qt="Conv2DBackpropInput",Jt="Cosh",Qt="Cumprod",Zt="Cumsum",er="CropAndResize",tr="DepthToSpace",rr="DepthwiseConv2dNative",nr="RealDiv",or="Elu",ar="Equal",ir="Exp",sr="ExpandDims",pr="Fill",lr="FlipLeftRight",ur="Floor",dr="FloorDiv",cr="FusedBatchNorm",gr="GatherV2",hr="GatherNd",fr="Greater",mr="GreaterEqual",yr="Identity",br="IsNan",_r="LeakyRelu",vr="Less",wr="LessEqual",kr="LogicalAnd",Tr="LogicalNot",Or="LogicalOr",xr="Max",Sr="Maximum",Er="MaxPool",Fr="Mean",Mr="Min",Rr="Minimum",Cr="MirrorPad",Ir="Multiply",Ar="NotEqual",Br="NonMaxSuppressionV3",Dr="NonMaxSuppressionV4",Lr="NonMaxSuppressionV5",Nr="OnesLike",Pr="OneHot",jr="Pack",Gr="PadV2",Wr="Prelu",zr="Prod",Ur="Range",$r="Reciprocal",Hr="Relu",Vr="Reshape",Kr="ResizeNearestNeighbor",Yr="ResizeBilinear",Xr="Relu6",qr="Reverse",Jr="Round",Qr="Rsqrt",Zr="ScatterNd",en="Select",tn="Slice",rn="Sigmoid",nn="Sqrt",on="Sum",an="SpaceToBatchND",sn="SplitV",pn="Softmax",ln="SparseFillEmptyRows",un="SparseReshape",dn="SparseSegmentMean",cn="SparseSegmentSum",gn="SquaredDifference",hn="StridedSlice",fn="StringNGrams",mn="StringSplit",yn="StringToHashBucketFast",bn="Sub",_n="Tanh",vn="Tile",wn="TopK",kn="Transform",Tn="Transpose",On="Unpack",xn="ZerosLike",Sn="Step",En="FromPixels",Fn="RotateWithOffset",Mn="_FusedMatMul",Rn="FusedConv2D",Cn="FusedDepthwiseConv2D";function In(...e){It().getBool("IS_TEST")||It().getBool("PROD")||console.warn(...e)}const An=Lt("kernelRegistry",(()=>new Map)),Bn=Lt("gradRegistry",(()=>new Map));function Dn(e,t){const r=jn(e,t);return An.get(r)}function Ln(e){return Bn.get(e)}function Nn(e){const t=An.entries(),r=[];for(;;){const{done:n,value:o}=t.next();if(n)break;const[a,i]=o,[s]=a.split("_");s===e&&r.push(i)}return r}function Pn(e){const{kernelName:t,backendName:r}=e,n=jn(t,r);An.has(n)&&In(`The kernel '${t}' for backend '${r}' is already registered`),An.set(n,e)}function jn(e,t){return`${t}_${e}`}var Gn=zn,Wn=null;try{Wn=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(a){}function zn(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function Un(e){return!0===(e&&e.__isLong__)}zn.prototype.__isLong__,Object.defineProperty(zn.prototype,"__isLong__",{value:!0}),zn.isLong=Un;var $n={},Hn={};function Vn(e,t){var r,n,o;return t?(o=0<=(e>>>=0)&&e<256)&&(n=Hn[e])?n:(r=Yn(e,(0|e)<0?-1:0,!0),o&&(Hn[e]=r),r):(o=-128<=(e|=0)&&e<128)&&(n=$n[e])?n:(r=Yn(e,e<0?-1:0,!1),o&&($n[e]=r),r)}function Kn(e,t){if(isNaN(e))return t?no:ro;if(t){if(e<0)return no;if(e>=Zn)return po}else{if(e<=-eo)return lo;if(e+1>=eo)return so}return e<0?Kn(-e,t).neg():Yn(e%Qn|0,e/Qn|0,t)}function Yn(e,t,r){return new zn(e,t,r)}zn.fromInt=Vn,zn.fromNumber=Kn,zn.fromBits=Yn;var Xn=Math.pow;function qn(e,t,r){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return ro;if("number"==typeof t?(r=t,t=!1):t=!!t,(r=r||10)<2||36<r)throw RangeError("radix");var n;if((n=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return qn(e.substring(1),t,r).neg();for(var o=Kn(Xn(r,8)),a=ro,i=0;i<e.length;i+=8){var s=Math.min(8,e.length-i),p=parseInt(e.substring(i,i+s),r);if(s<8){var l=Kn(Xn(r,s));a=a.mul(l).add(Kn(p))}else a=(a=a.mul(o)).add(Kn(p))}return a.unsigned=t,a}function Jn(e,t){return"number"==typeof e?Kn(e,t):"string"==typeof e?qn(e,t):Yn(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}zn.fromString=qn,zn.fromValue=Jn;var Qn=4294967296,Zn=Qn*Qn,eo=Zn/2,to=Vn(1<<24),ro=Vn(0);zn.ZERO=ro;var no=Vn(0,!0);zn.UZERO=no;var oo=Vn(1);zn.ONE=oo;var ao=Vn(1,!0);zn.UONE=ao;var io=Vn(-1);zn.NEG_ONE=io;var so=Yn(-1,2147483647,!1);zn.MAX_VALUE=so;var po=Yn(-1,-1,!0);zn.MAX_UNSIGNED_VALUE=po;var lo=Yn(0,-2147483648,!1);zn.MIN_VALUE=lo;var uo=zn.prototype;uo.toInt=function(){return this.unsigned?this.low>>>0:this.low},uo.toNumber=function(){return this.unsigned?(this.high>>>0)*Qn+(this.low>>>0):this.high*Qn+(this.low>>>0)},uo.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(lo)){var t=Kn(e),r=this.div(t),n=r.mul(t).sub(this);return r.toString(e)+n.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var o=Kn(Xn(e,6),this.unsigned),a=this,i="";;){var s=a.div(o),p=(a.sub(s.mul(o)).toInt()>>>0).toString(e);if((a=s).isZero())return p+i;for(;p.length<6;)p="0"+p;i=""+p+i}},uo.getHighBits=function(){return this.high},uo.getHighBitsUnsigned=function(){return this.high>>>0},uo.getLowBits=function(){return this.low},uo.getLowBitsUnsigned=function(){return this.low>>>0},uo.getNumBitsAbs=function(){if(this.isNegative())return this.eq(lo)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},uo.isZero=function(){return 0===this.high&&0===this.low},uo.eqz=uo.isZero,uo.isNegative=function(){return!this.unsigned&&this.high<0},uo.isPositive=function(){return this.unsigned||this.high>=0},uo.isOdd=function(){return 1==(1&this.low)},uo.isEven=function(){return 0==(1&this.low)},uo.equals=function(e){return Un(e)||(e=Jn(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},uo.eq=uo.equals,uo.notEquals=function(e){return!this.eq(e)},uo.neq=uo.notEquals,uo.ne=uo.notEquals,uo.lessThan=function(e){return this.comp(e)<0},uo.lt=uo.lessThan,uo.lessThanOrEqual=function(e){return this.comp(e)<=0},uo.lte=uo.lessThanOrEqual,uo.le=uo.lessThanOrEqual,uo.greaterThan=function(e){return this.comp(e)>0},uo.gt=uo.greaterThan,uo.greaterThanOrEqual=function(e){return this.comp(e)>=0},uo.gte=uo.greaterThanOrEqual,uo.ge=uo.greaterThanOrEqual,uo.compare=function(e){if(Un(e)||(e=Jn(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},uo.comp=uo.compare,uo.negate=function(){return!this.unsigned&&this.eq(lo)?lo:this.not().add(oo)},uo.neg=uo.negate,uo.add=function(e){Un(e)||(e=Jn(e));var t=this.high>>>16,r=65535&this.high,n=this.low>>>16,o=65535&this.low,a=e.high>>>16,i=65535&e.high,s=e.low>>>16,p=0,l=0,u=0,d=0;return u+=(d+=o+(65535&e.low))>>>16,l+=(u+=n+s)>>>16,p+=(l+=r+i)>>>16,p+=t+a,Yn((u&=65535)<<16|(d&=65535),(p&=65535)<<16|(l&=65535),this.unsigned)},uo.subtract=function(e){return Un(e)||(e=Jn(e)),this.add(e.neg())},uo.sub=uo.subtract,uo.multiply=function(e){if(this.isZero())return ro;if(Un(e)||(e=Jn(e)),Wn)return Yn(Wn.mul(this.low,this.high,e.low,e.high),Wn.get_high(),this.unsigned);if(e.isZero())return ro;if(this.eq(lo))return e.isOdd()?lo:ro;if(e.eq(lo))return this.isOdd()?lo:ro;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(to)&&e.lt(to))return Kn(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,r=65535&this.high,n=this.low>>>16,o=65535&this.low,a=e.high>>>16,i=65535&e.high,s=e.low>>>16,p=65535&e.low,l=0,u=0,d=0,c=0;return d+=(c+=o*p)>>>16,u+=(d+=n*p)>>>16,d&=65535,u+=(d+=o*s)>>>16,l+=(u+=r*p)>>>16,u&=65535,l+=(u+=n*s)>>>16,u&=65535,l+=(u+=o*i)>>>16,l+=t*p+r*s+n*i+o*a,Yn((d&=65535)<<16|(c&=65535),(l&=65535)<<16|(u&=65535),this.unsigned)},uo.mul=uo.multiply,uo.divide=function(e){if(Un(e)||(e=Jn(e)),e.isZero())throw Error("division by zero");var t,r,n;if(Wn)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?Yn((this.unsigned?Wn.div_u:Wn.div_s)(this.low,this.high,e.low,e.high),Wn.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?no:ro;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return no;if(e.gt(this.shru(1)))return ao;n=no}else{if(this.eq(lo))return e.eq(oo)||e.eq(io)?lo:e.eq(lo)?oo:(t=this.shr(1).div(e).shl(1)).eq(ro)?e.isNegative()?oo:io:(r=this.sub(e.mul(t)),n=t.add(r.div(e)));if(e.eq(lo))return this.unsigned?no:ro;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();n=ro}for(r=this;r.gte(e);){t=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(t)/Math.LN2),a=o<=48?1:Xn(2,o-48),i=Kn(t),s=i.mul(e);s.isNegative()||s.gt(r);)s=(i=Kn(t-=a,this.unsigned)).mul(e);i.isZero()&&(i=oo),n=n.add(i),r=r.sub(s)}return n},uo.div=uo.divide,uo.modulo=function(e){return Un(e)||(e=Jn(e)),Wn?Yn((this.unsigned?Wn.rem_u:Wn.rem_s)(this.low,this.high,e.low,e.high),Wn.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},uo.mod=uo.modulo,uo.rem=uo.modulo,uo.not=function(){return Yn(~this.low,~this.high,this.unsigned)},uo.and=function(e){return Un(e)||(e=Jn(e)),Yn(this.low&e.low,this.high&e.high,this.unsigned)},uo.or=function(e){return Un(e)||(e=Jn(e)),Yn(this.low|e.low,this.high|e.high,this.unsigned)},uo.xor=function(e){return Un(e)||(e=Jn(e)),Yn(this.low^e.low,this.high^e.high,this.unsigned)},uo.shiftLeft=function(e){return Un(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?Yn(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):Yn(0,this.low<<e-32,this.unsigned)},uo.shl=uo.shiftLeft,uo.shiftRight=function(e){return Un(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?Yn(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):Yn(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},uo.shr=uo.shiftRight,uo.shiftRightUnsigned=function(e){if(Un(e)&&(e=e.toInt()),0==(e&=63))return this;var t=this.high;return e<32?Yn(this.low>>>e|t<<32-e,t>>>e,this.unsigned):Yn(32===e?t:t>>>e-32,0,this.unsigned)},uo.shru=uo.shiftRightUnsigned,uo.shr_u=uo.shiftRightUnsigned,uo.toSigned=function(){return this.unsigned?Yn(this.low,this.high,!1):this},uo.toUnsigned=function(){return this.unsigned?this:Yn(this.low,this.high,!0)},uo.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},uo.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},uo.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},zn.fromBytes=function(e,t,r){return r?zn.fromBytesLE(e,t):zn.fromBytesBE(e,t)},zn.fromBytesLE=function(e,t){return new zn(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},zn.fromBytesBE=function(e,t){return new zn(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};const co=Gn||a({__proto__:null,default:Gn},[Gn]);function go(e){return co.fromString(e,!0,16)}const ho=go("c3a5c85c97cb3127"),fo=go("b492b66fbe98f273"),mo=go("9ae16a3b2f90404f");function yo(e){return e.xor(e.shru(47))}function bo(e,t,r){const n=e.slice(t,t+r);return co.fromBytes(Array.from(n),!0,!0)}function _o(e,t){return bo(e,t,8)}function vo(e,t){return bo(e,t,4)}function wo(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function ko(e,t,r=go("9ddfea08eb382d69")){let n=e.xor(t).mul(r);n=n.xor(n.shru(47));let o=t.xor(n).mul(r);return o=o.xor(o.shru(47)),o=o.mul(r),o}function To(e,t,r,n){return function(e,t,r,n,o,a){o=o.add(e),a=wo(a.add(o).add(n),21);const i=o;return o=(o=o.add(t)).add(r),a=a.add(wo(o,44)),[o.add(n),a.add(i)]}(_o(e,t),_o(e,t+8),_o(e,t+16),_o(e,t+24),r,n)}function Oo(e,t=e.length){const r=co.fromNumber(81,!0);if(t<=32)return t<=16?function(e,t=e.length){if(t>=8){const r=mo.add(2*t),n=_o(e,0).add(mo),o=_o(e,t-8);return ko(wo(o,37).mul(r).add(n),wo(n,25).add(o).mul(r),r)}if(t>=4){const r=mo.add(2*t);return ko(vo(e,0).shl(3).add(t),vo(e,t-4),r)}if(t>0){const r=e[0]+(e[t>>1]<<8),n=t+(e[t-1]<<2);return yo(mo.mul(r).xor(ho.mul(n))).mul(mo)}return mo}(e,t):function(e,t=e.length){const r=mo.add(2*t),n=_o(e,0).mul(fo),o=_o(e,8),a=_o(e,t-8).mul(r),i=_o(e,t-16).mul(mo);return ko(wo(n.add(o),43).add(wo(a,30)).add(i),n.add(wo(o.add(mo),18)).add(a),r)}(e,t);if(t<=64)return function(e,t=e.length){const r=mo.add(2*t),n=_o(e,0).mul(mo),o=_o(e,8),a=_o(e,t-8).mul(r),i=_o(e,t-16).mul(mo),s=wo(n.add(o),43).add(wo(a,30)).add(i),p=ko(s,n.add(wo(o.add(mo),18)).add(a),r),l=_o(e,16).mul(r),u=_o(e,24),d=s.add(_o(e,t-32)).mul(r),c=p.add(_o(e,t-24)).mul(r);return ko(wo(l.add(u),43).add(wo(d,30)).add(c),l.add(wo(u.add(n),18)).add(d),r)}(e,t);let n=r,o=r.mul(fo).add(113),a=yo(o.mul(mo).add(113)).mul(mo),i=[co.UZERO,co.UZERO],s=[co.UZERO,co.UZERO];n=n.mul(mo).add(_o(e,0));let p=0;const l=64*(t-1>>6),u=l+(t-1&63)-63;do{n=wo(n.add(o).add(i[0]).add(_o(e,p+8)),37).mul(fo),o=wo(o.add(i[1]).add(_o(e,p+48)),42).mul(fo),n=n.xor(s[1]),o=o.add(i[0]).add(_o(e,p+40)),a=wo(a.add(s[0]),33).mul(fo),i=To(e,p,i[1].mul(fo),n.add(s[0])),s=To(e,p+32,a.add(s[1]),o.add(_o(e,p+16))),[a,n]=[n,a],p+=64}while(p!==l);const d=fo.add(a.and(255).shl(1));return p=u,s[0]=s[0].add(t-1&63),i[0]=i[0].add(s[0]),s[0]=s[0].add(i[0]),n=wo(n.add(o).add(i[0]).add(_o(e,p+8)),37).mul(d),o=wo(o.add(i[1]).add(_o(e,p+48)),42).mul(d),n=n.xor(s[1].mul(9)),o=o.add(i[0].mul(9).add(_o(e,p+40))),a=wo(a.add(s[0]),33).mul(d),i=To(e,p,i[1].mul(d),n.add(s[0])),s=To(e,p+32,a.add(s[1]),o.add(_o(e,p+16))),[a,n]=[n,a],ko(ko(i[0],s[0],d).add(yo(o).mul(ho)).add(a),ko(i[1],s[1],d).add(n),d)}function xo(e,t){return"string"===t?Fo(e):So([e],t)}function So(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=Co(e)),It().getBool("DEBUG")&&function(e,t){for(let r=0;r<e.length;r++){const n=e[r];if(isNaN(n)||!isFinite(n))throw Error(`A tensor of type ${t} being uploaded contains ${n}.`)}}(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){const t=new Uint8Array(e.length);for(let r=0;r<t.length;++r)0!==Math.round(e[r])&&(t[r]=1);return t}throw new Error(`Unknown data type ${t}`)}function Eo(){return It().platform.now()}function Fo(e,t="utf-8"){return t=t||"utf-8",It().platform.encode(e,t)}function Mo(e,t="utf-8"){return t=t||"utf-8",It().platform.decode(e,t)}function Ro(e){return It().platform.isTypedArray(e)}function Co(e,t=[],r=!1){if(null==t&&(t=[]),"boolean"==typeof e||"number"==typeof e||"string"==typeof e||Ft(e)||null==e||Ro(e)&&r)t.push(e);else if(Array.isArray(e)||Ro(e))for(let n=0;n<e.length;++n)Co(e[n],t,r);else{let n=-1;for(const t of Object.keys(e))/^([1-9]+[0-9]*|0)$/.test(t)&&(n=Math.max(n,Number(t)));for(let o=0;o<=n;o++)Co(e[o],t,r)}return t}class Io{constructor(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new Bo)}profileKernel(e,t,r){let n;const o=()=>{n=r()};let a;const i=Eo();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(o);else{o();for(const e of n)e.dataSync();a=Promise.resolve({kernelMs:Eo()-i})}if(It().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let t=0;t<n.length;t++){const r=n[t];r.data().then((t=>{Ao(t,r.dtype,e)}))}return{kernelName:e,outputs:n,inputs:t,timeMs:a.then((e=>e.kernelMs)),extraInfo:a.then((e=>null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""))}}logKernelProfile(e){const{kernelName:t,outputs:r,timeMs:n,inputs:o,extraInfo:a}=e;r.forEach((e=>{Promise.all([e.data(),n,a]).then((r=>{this.logger.logKernelProfile(t,e,r[0],r[1],o,r[2])}))}))}}function Ao(e,t,r){if("float32"!==t)return!1;for(let t=0;t<e.length;t++){const n=e[t];if(isNaN(n)||!isFinite(n))return console.warn(`Found ${n} in the result of '${r}'`),!0}return!1}class Bo{logKernelProfile(e,t,r,n,o,a){const i="number"==typeof n?st(`${n}ms`,9):n.error,s=st(e,25),p=t.rank,l=t.size,u=st(t.shape.toString(),14);let d="";for(const e in o){const r=o[e];if(null!=r){const n=r.shape||t.shape,o=n.length;d+=`${e}: ${o}D ${o>0?n:""} `}}console.log(`%c${s}\t%c${i}\t%c${p}D ${u}\t%c${l}\t%c${d}\t%c${a}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}const Do=20,Lo=3,No=7;function Po(e,t,r,n){const o=vt(t),a=function(e,t,r,n){const o=nt(t),a=n[n.length-1],i=new Array(a).fill(0),s=t.length,p="complex64"===r?zo(e):e;if(s>1)for(let e=0;e<o/a;e++){const t=e*a;for(let e=0;e<a;e++)i[e]=Math.max(i[e],jo(p[t+e],0,r).length)}return i}(e,t,r,o),i=t.length,s=Wo(e,t,r,o,a),p=["Tensor"];return n&&(p.push(`  dtype: ${r}`),p.push(`  rank: ${i}`),p.push(`  shape: [${t}]`),p.push("  values:")),p.push(s.map((e=>"    "+e)).join("\n")),p.join("\n")}function jo(e,t,r){let n;return n=Array.isArray(e)?`${parseFloat(e[0].toFixed(No))} + ${parseFloat(e[1].toFixed(No))}j`:mt(e)?`'${e}'`:"bool"===r?Go(e):parseFloat(e.toFixed(No)).toString(),st(n,t)}function Go(e){return 0===e?"false":"true"}function Wo(e,t,r,n,o,a=!0){const i="complex64"===r?2:1,s=t[0],p=t.length;if(0===p)return"complex64"===r?[jo(zo(e)[0],0,r)]:"bool"===r?[Go(e[0])]:[e[0].toString()];if(1===p){if(s>Do){const t=Lo*i;let n=Array.from(e.slice(0,t)),a=Array.from(e.slice((s-Lo)*i,s*i));return"complex64"===r&&(n=zo(n),a=zo(a)),["["+n.map(((e,t)=>jo(e,o[t],r))).join(", ")+", ..., "+a.map(((e,t)=>jo(e,o[s-Lo+t],r))).join(", ")+"]"]}return["["+("complex64"===r?zo(e):Array.from(e)).map(((e,t)=>jo(e,o[t],r))).join(", ")+"]"]}const l=t.slice(1),u=n.slice(1),d=n[0]*i,c=[];if(s>Do){for(let t=0;t<Lo;t++){const n=t*d,a=n+d;c.push(...Wo(e.slice(n,a),l,r,u,o,!1))}c.push("...");for(let t=s-Lo;t<s;t++){const n=t*d,a=n+d;c.push(...Wo(e.slice(n,a),l,r,u,o,t===s-1))}}else for(let t=0;t<s;t++){const n=t*d,a=n+d;c.push(...Wo(e.slice(n,a),l,r,u,o,t===s-1))}const g=2===p?",":"";c[0]="["+(s>0?c[0]+g:"");for(let e=1;e<c.length-1;e++)c[e]=" "+c[e]+g;let h=",\n";for(let e=2;e<p;e++)h+="\n";return c[c.length-1]=" "+c[c.length-1]+"]"+(a?"":h),c}function zo(e){const t=[];for(let r=0;r<e.length;r+=2)t.push([e[r],e[r+1]]);return t}class Uo{constructor(e,t,r){if(this.dtype=t,this.shape=e.slice(),this.size=nt(e),null!=r){const e=r.length;et(e===this.size,(()=>`Length of values '${e}' does not match the size inferred by the shape '${this.size}'.`))}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||gt(t,this.size),this.strides=vt(e)}set(e,...t){0===t.length&&(t=[0]),et(t.length===this.rank,(()=>`The number of provided coordinates (${t.length}) must match the rank (${this.rank})`));const r=this.locToIndex(t);this.values[r]=e}get(...e){0===e.length&&(e=[0]);let t=0;for(const r of e){if(r<0||r>=this.shape[t]){const t=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(t)}t++}let r=e[e.length-1];for(let t=0;t<e.length-1;++t)r+=this.strides[t]*e[t];return this.values[r]}locToIndex(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];let t=e[e.length-1];for(let r=0;r<e.length-1;++r)t+=this.strides[r]*e[r];return t}indexToLoc(e){if(0===this.rank)return[];if(1===this.rank)return[e];const t=new Array(this.shape.length);for(let r=0;r<t.length-1;++r)t[r]=Math.floor(e/this.strides[r]),e-=t[r]*this.strides[r];return t[t.length-1]=e,t}get rank(){return this.shape.length}toTensor(){return $o().makeTensor(this.values,this.shape,this.dtype)}}let $o=null,Ho=null;class Vo{constructor(e,t,r,n){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=nt(e),this.strides=vt(e),this.dataId=r,this.id=n,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return Ho.buffer(this.shape,this.dtype,e)}bufferSync(){return Ho.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return kt(this.shape,e,"complex64"===this.dtype)}arraySync(){return kt(this.shape,this.dataSync(),"complex64"===this.dtype)}async data(){this.throwIfDisposed();const e=$o().read(this.dataId);if("string"===this.dtype){const t=await e;try{return t.map((e=>Mo(e)))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),$o().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=$o().readSync(this.dataId);if("string"===this.dtype)try{return e.map((e=>Mo(e)))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await $o().read(this.dataId);return"string"===this.dtype?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||($o().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return Ho.print(this,e)}clone(){return this.throwIfDisposed(),Ho.clone(this)}toString(e=!1){return Po(this.dataSync(),this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),Ho.cast(this,e)}variable(e=!0,t,r){return this.throwIfDisposed(),$o().makeVariable(this,e,t,r)}}Object.defineProperty(Vo,Symbol.hasInstance,{value:e=>!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}),Lt("Tensor",(()=>Vo));class Ko extends Vo{constructor(e,t,r,n){super(e.shape,e.dtype,e.dataId,n),this.trainable=t,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!ot(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);$o().disposeTensor(this),this.dataId=e.dataId,$o().incRef(this,null)}dispose(){$o().disposeVariable(this),this.isDisposedInternal=!0}}var Yo,Xo,qo,Jo,Qo;Object.defineProperty(Ko,Symbol.hasInstance,{value:e=>e instanceof Vo&&null!=e.assign&&e.assign instanceof Function}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(Yo||(Yo={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(Xo||(Xo={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(qo||(qo={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(Jo||(Jo={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(Qo||(Qo={}));const Zo={float32:Jo,int32:Xo,bool:qo,complex64:Qo};function ea(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error(`Can not upcast ${e} with ${t}`)}return Zo[e][t]}function ta(e,t){if(e.dtype===t.dtype)return[e,t];const r=ea(e.dtype,t.dtype);return[e.cast(r),t.cast(r)]}function ra(e){const t=[];return na(e,t,new Set),t}function na(e,t,r){if(null==e)return;if(e instanceof Vo)return void t.push(e);if(n=e,!Array.isArray(n)&&"object"!=typeof n)return;var n;const o=e;for(const e in o){const n=o[e];r.has(n)||(r.add(n),na(n,t,r))}}function oa(e){return null!=e.kernelName}class aa{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((e=>e.name))))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class ia{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new aa}async ready(){if(null!=this.pendingBackendInit)return this.pendingBackendInit.then((()=>{}));if(null!=this.backendInstance)return;const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const r=e[t];if(await this.initializeBackend(r).success)return void await this.setBackend(r)}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(null!=this.pendingBackendInit)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(null==this.backendInstance){const{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;{const{asyncInit:t}=this.initializeBackend(e);if(t)return null}}return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t,r=1){return e in this.registryFactory?(In(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:t,priority:r},!0)}async setBackend(e){if(null==this.registryFactory[e])throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,null==this.registry[e]){this.backendInstance=null;const{success:t,asyncInit:r}=this.initializeBackend(e);if(!(r?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new Io(this.backendInstance),!0}setupRegisteredKernels(){Nn(this.backendName).forEach((e=>{null!=e.setupFunc&&e.setupFunc(this.backendInstance)}))}disposeRegisteredKernels(e){Nn(e).forEach((t=>{null!=t.disposeFunc&&t.disposeFunc(this.registry[e])}))}initializeBackend(e){const t=this.registryFactory[e];if(null==t)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=t.factory();if(!r||r instanceof Xe||"function"!=typeof r.then)return this.registry[e]=r,{success:!0,asyncInit:!1};{const t=++this.pendingBackendInitId,n=r.then((r=>!(t<this.pendingBackendInitId||(this.registry[e]=r,this.pendingBackendInit=null,0)))).catch((r=>(t<this.pendingBackendInitId||(this.pendingBackendInit=null,In(`Initialization of backend ${e} failed`),In(r.stack||r.message)),!1)));return this.pendingBackendInit=n,{success:n,asyncInit:!0}}}catch(t){return In(`Initialization of backend ${e} failed`),In(t.stack||t.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority))}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const r=e[t],{success:n,asyncInit:o}=this.initializeBackend(r);if(o||n)return{name:r,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){const r=this.state.tensorInfo.get(t),n=r.backend,o=this.readSync(t),a=n.refCount(t);n.disposeData(t,!0),r.backend=e,e.move(t,o,r.shape,r.dtype,a),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let r,n=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");n=e}return this.scopedRun((()=>this.startScope(n)),(()=>this.endScope(r)),(()=>(r=t(),r instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r)))}scopedRun(e,t,r){e();try{const e=r();return t(),e}catch(e){throw t(),e}}nextTensorId(){return ia.nextTensorId++}nextVariableId(){return ia.nextVariableId++}clone(e){const t=pa.runKernel(yr,{x:e}),r={x:e};return this.addTapeNode(this.state.activeScope.name,r,[t],(e=>({x:()=>{const t={x:e};return pa.runKernel(Ht,t,{dtype:"float32"})}})),[],{}),t}runKernel(e,t,r){if(null==this.backendName&&this.backend,null==Dn(e,this.backendName))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:t,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,r){const n=this.backend.numDataIds();let o=0;r.forEach((e=>{o+="complex64"===e.dtype?3:1}));const a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],i=n-t-o-a;if(i>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${i} data ids) after running '${e}'`)}runKernelFunc(e){let t,r=[];const n=this.isTapeOn(),o=this.state.numBytes,a=this.state.numTensors;let i,s;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;const p=oa(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(oa(e)){const{kernelName:t,inputs:o,attrs:a}=e;null==this.backendName&&this.backend;const p=Dn(t,this.backendName);et(null!=p,(()=>`Cannot find registered kernel '${t}' for backend '${this.backendName}'`)),i=()=>{const e=this.backend.numDataIds();s=p.kernelFunc({inputs:o,attrs:a,backend:this.backend});const i=Array.isArray(s)?s:[s];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(t,e,i);const l=i.map((e=>null!=e.rank?e:this.makeTensorFromTensorInfo(e)));if(n){const e=this.getTensorsForGradient(t,o,l);r=this.saveTensorsForBackwardMode(e)}return l}}else{const{forwardFunc:t}=e,o=e=>{n&&(r=e.map((e=>this.keep(this.clone(e)))))};i=()=>{const e=this.backend.numDataIds();s=this.tidy((()=>t(this.backend,o)));const r=Array.isArray(s)?s:[s];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(p,e,r),r}}const{inputs:l,attrs:u}=e,d=oa(e)?null:e.backwardsFunc;let c;return this.scopedRun((()=>this.state.kernelDepth++),(()=>this.state.kernelDepth--),(()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(c=this.profiler.profileKernel(p,l,(()=>i())),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(c),t=c.outputs):t=i()})),n&&this.addTapeNode(p,l,t,d,r,u),this.state.profiling&&this.state.activeProfile.kernels.push({name:p,bytesAdded:this.state.numBytes-o,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-a,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(l).map((e=>null!=l[e]?l[e].shape:null)),outputShapes:t.map((e=>e.shape)),kernelTimeMs:c.timeMs,extraInfo:c.extraInfo}),Array.isArray(s)?t:t[0]}saveTensorsForBackwardMode(e){return e.map((e=>this.keep(this.clone(e))))}getTensorsForGradient(e,t,r){const n=Ln(e);if(null!=n){const e=n.inputsToSave||[],o=n.outputsToSave||[];let a;n.saveAllInputs?(et(Array.isArray(t),(()=>"saveAllInputs is true, expected inputs to be an array.")),a=Object.keys(t).map((e=>t[e]))):a=e.map((e=>t[e]));const i=r.filter(((e,t)=>o[t]));return a.concat(i)}return[]}makeTensor(e,t,r,n){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",n=n||this.backend;let o=e;"string"===r&&mt(e[0])&&(o=e.map((e=>Fo(e))));const a=n.write(o,t,r),i=new Vo(t,r,a,this.nextTensorId());if(this.trackTensor(i,n),"string"===r){const e=this.state.tensorInfo.get(a),t=function(e){if(null==e)return 0;let t=0;return e.forEach((e=>t+=e.length)),t}(o);this.state.numBytes+=t-e.bytes,e.bytes=t}return i}makeTensorFromDataId(e,t,r,n){const o={dataId:e,shape:t,dtype:r=r||"float32"};return this.makeTensorFromTensorInfo(o,n)}makeTensorFromTensorInfo(e,t){const{dataId:r,shape:n,dtype:o}=e,a=new Vo(n,o,r,this.nextTensorId());return this.trackTensor(a,t),a}makeVariable(e,t=!0,r,n){r=r||this.nextVariableId().toString(),null!=n&&n!==e.dtype&&(e=e.cast(n));const o=new Ko(e,t,r,this.nextTensorId());if(null!=this.state.registeredVariables[o.name])throw new Error(`Variable with name ${o.name} was already registered`);return this.state.registeredVariables[o.name]=o,this.incRef(o,this.backend),o}trackTensor(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;let r=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(r=e.size*ft(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof Ko||this.track(e)}incRef(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}removeDataId(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){const t=e.size*ft(e.dtype);this.state.numBytes-=t}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const t=this.state.registeredVariables[e];this.disposeVariable(t)}}disposeVariable(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const t=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map((e=>e.totalBytesSnapshot))),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const e of this.state.activeProfile.kernels)e.kernelTimeMs=await e.kernelTimeMs,e.extraInfo=await e.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(e,t,r,n,o,a){const i={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:r,saved:o},s=Ln(e);null!=s&&(n=s.gradFunc),null!=n&&(i.gradient=e=>(e=e.map(((e,t)=>{if(null==e){const e=r[t],n=Ot(e.size,e.dtype);return this.makeTensor(n,e.shape,e.dtype)}return e})),n(e.length>1?e:e[0],o,a))),this.state.activeTape.push(i)}keep(e){return e.kept=!0,e}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){const t=ra(e),r=new Set(t.map((e=>e.id)));for(let e=0;e<this.state.activeScope.track.length;e++){const t=this.state.activeScope.track[e];t.kept||r.has(t.id)||t.dispose()}const n=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach((e=>{e.kept||e.scopeId!==n.id||this.track(e)}))}gradients(e,t,r,n=!1){if(et(t.length>0,(()=>"gradients() received an empty list of xs.")),null!=r&&"float32"!==r.dtype)throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const o=this.scopedRun((()=>this.startTape()),(()=>this.endTape()),(()=>this.tidy("forward",e)));et(o instanceof Vo,(()=>"The result y returned by f() must be a tensor."));const a=function(e,t,r){const n={},o={};for(let e=0;e<t.length;e++)n[t[e].id]=!0;for(let r=0;r<e.length;r++){const a=e[r],i=a.inputs;for(const e in i){const r=i[e];let s=!1;for(let e=0;e<t.length;e++)if(n[r.id]){a.outputs.forEach((e=>n[e.id]=!0)),s=!0,o[a.id]=!0;break}if(s)break}}const a={};a[r.id]=!0;const i={};for(let t=e.length-1;t>=0;t--){const r=e[t],n=r.inputs;for(let e=0;e<r.outputs.length;e++)if(a[r.outputs[e].id]){for(const e in n)a[n[e].id]=!0,i[r.id]=!0;break}}const s=[];for(let t=0;t<e.length;t++){const r=e[t];if(o[r.id]&&i[r.id]){const e={};for(const t in r.inputs){const o=r.inputs[t];n[o.id]&&(e[t]=o)}const t=Object.assign({},r);t.inputs=e,t.outputs=r.outputs,s.push(t)}}return s}(this.state.activeTape,t,o);if(!n&&0===a.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(()=>{const e={};e[o.id]=null==r?function(e){const t=Tt(nt(e),"float32");return pa.makeTensor(t,e,"float32")}(o.shape):r,function(e,t,r,n){for(let o=t.length-1;o>=0;o--){const a=t[o],i=[];if(a.outputs.forEach((t=>{const r=e[t.id];null!=r?i.push(r):i.push(null)})),null==a.gradient)throw new Error(`Cannot compute gradient: gradient function not found for ${a.kernelName}.`);const s=a.gradient(i);for(const t in a.inputs){if(!(t in s))throw new Error(`Cannot backprop through input ${t}. Available gradients found: ${Object.keys(s)}.`);const o=r((()=>s[t]()));if("float32"!==o.dtype)throw new Error(`Error in gradient for op ${a.kernelName}. The gradient of input ${t} must have 'float32' dtype, but has '${o.dtype}'`);const i=a.inputs[t];if(!ot(o.shape,i.shape))throw new Error(`Error in gradient for op ${a.kernelName}. The gradient of input '${t}' has shape '${o.shape}', which does not match the shape of the input '${i.shape}'`);if(null==e[i.id])e[i.id]=o;else{const t=e[i.id];e[i.id]=n(t,o),t.dispose()}}}}(e,a,(e=>this.tidy(e)),la);const n=t.map((t=>e[t.id]));return 0===this.state.gradientDepth&&(this.state.activeTape.forEach((e=>{for(const t of e.saved)t.dispose()})),this.state.activeTape=null),{value:o,grads:n}}))}customGrad(e){return et(bt(e),(()=>"The f passed in customGrad(f) must be a function.")),(...t)=>{let r;et(t.every((e=>e instanceof Vo)),(()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors"));const n={};return t.forEach(((e,t)=>{n[t]=e})),this.runKernelFunc({forwardFunc:(n,o)=>(r=e(...t,o),et(r.value instanceof Vo,(()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor")),et(bt(r.gradFunc),(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function.")),r.value),backwardsFunc:(e,n)=>{const o=r.gradFunc(e,n),a=Array.isArray(o)?o:[o];et(a.length===t.length,(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...).")),et(a.every((e=>e instanceof Vo)),(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."));const i={};return a.forEach(((e,t)=>{i[t]=()=>e})),i},inputs:n})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}async time(e){const t=Eo(),r=await this.backend.time(e);return r.wallMs=Eo()-t,r}track(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new aa;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}function sa(){const e=Dt();if(null==e._tfengine){const t=new Rt(e);e._tfengine=new ia(t)}var t;return t=e._tfengine.ENV,Bt=t,$o=()=>e._tfengine,e._tfengine}ia.nextTensorId=0,ia.nextVariableId=0;const pa=sa();function la(e,t){const r={a:e,b:t};return pa.runKernel(Nt,r)}function ua(e){if(e||"undefined"!=typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;const t=e.userAgent||e.vendor||("undefined"!=typeof window?window.opera:"");if(!t){const t=e;return t.userAgentData&&t.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function da(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}const ca=It();ca.registerFlag("DEBUG",(()=>!1),(e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),ca.registerFlag("IS_BROWSER",(()=>da())),ca.registerFlag("IS_NODE",(()=>void 0!==Ke&&void 0!==Ke.versions&&void 0!==Ke.versions.node)),ca.registerFlag("IS_CHROME",(()=>"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor))),ca.registerFlag("PROD",(()=>!1)),ca.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(()=>ca.getBool("DEBUG"))),ca.registerFlag("DEPRECATION_WARNINGS_ENABLED",(()=>!0)),ca.registerFlag("IS_TEST",(()=>!1)),ca.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(()=>!0)),ca.registerFlag("WRAP_TO_IMAGEBITMAP",(()=>!1)),ca.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",(()=>!1)),ca.registerFlag("USE_SETTIMEOUTCUSTOM",(()=>!1));var ga=[],ha=[],fa="undefined"!=typeof Uint8Array?Uint8Array:Array,ma=!1;function ya(){ma=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0;t<64;++t)ga[t]=e[t],ha[e.charCodeAt(t)]=t;ha["-".charCodeAt(0)]=62,ha["_".charCodeAt(0)]=63}function ba(e,t,r){for(var n,o,a=[],i=t;i<r;i+=3)n=(e[i]<<16)+(e[i+1]<<8)+e[i+2],a.push(ga[(o=n)>>18&63]+ga[o>>12&63]+ga[o>>6&63]+ga[63&o]);return a.join("")}function _a(e){var t;ma||ya();for(var r=e.length,n=r%3,o="",a=[],i=16383,s=0,p=r-n;s<p;s+=i)a.push(ba(e,s,s+i>p?p:s+i));return 1===n?(t=e[r-1],o+=ga[t>>2],o+=ga[t<<4&63],o+="=="):2===n&&(t=(e[r-2]<<8)+e[r-1],o+=ga[t>>10],o+=ga[t>>4&63],o+=ga[t<<2&63],o+="="),a.push(o),a.join("")}function va(e,t,r,n,o){var a,i,s=8*o-n-1,p=(1<<s)-1,l=p>>1,u=-7,d=r?o-1:0,c=r?-1:1,g=e[t+d];for(d+=c,a=g&(1<<-u)-1,g>>=-u,u+=s;u>0;a=256*a+e[t+d],d+=c,u-=8);for(i=a&(1<<-u)-1,a>>=-u,u+=n;u>0;i=256*i+e[t+d],d+=c,u-=8);if(0===a)a=1-l;else{if(a===p)return i?NaN:1/0*(g?-1:1);i+=Math.pow(2,n),a-=l}return(g?-1:1)*i*Math.pow(2,a-n)}function wa(e,t,r,n,o,a){var i,s,p,l=8*a-o-1,u=(1<<l)-1,d=u>>1,c=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,g=n?0:a-1,h=n?1:-1,f=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,i=u):(i=Math.floor(Math.log(t)/Math.LN2),t*(p=Math.pow(2,-i))<1&&(i--,p*=2),(t+=i+d>=1?c/p:c*Math.pow(2,1-d))*p>=2&&(i++,p/=2),i+d>=u?(s=0,i=u):i+d>=1?(s=(t*p-1)*Math.pow(2,o),i+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,o),i=0));o>=8;e[r+g]=255&s,g+=h,s/=256,o-=8);for(i=i<<o|s,l+=o;l>0;e[r+g]=255&i,g+=h,i/=256,l-=8);e[r+g-h]|=128*f}var ka={}.toString,Ta=Array.isArray||function(e){return"[object Array]"==ka.call(e)};function Oa(){return Sa.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function xa(e,t){if(Oa()<t)throw new RangeError("Invalid typed array length");return Sa.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=Sa.prototype:(null===e&&(e=new Sa(t)),e.length=t),e}function Sa(e,t,r){if(!(Sa.TYPED_ARRAY_SUPPORT||this instanceof Sa))return new Sa(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return Ma(this,e)}return Ea(this,e,t,r)}function Ea(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n),Sa.TYPED_ARRAY_SUPPORT?(e=t).__proto__=Sa.prototype:e=Ra(e,t),e}(e,t,r,n):"string"==typeof t?function(e,t,r){if("string"==typeof r&&""!==r||(r="utf8"),!Sa.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|Aa(t,r),o=(e=xa(e,n)).write(t,r);return o!==n&&(e=e.slice(0,o)),e}(e,t,r):function(e,t){if(Ia(t)){var r=0|Ca(t.length);return 0===(e=xa(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?xa(e,0):Ra(e,t);if("Buffer"===t.type&&Ta(t.data))return Ra(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function Fa(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function Ma(e,t){if(Fa(t),e=xa(e,t<0?0:0|Ca(t)),!Sa.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function Ra(e,t){var r=t.length<0?0:0|Ca(t.length);e=xa(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function Ca(e){if(e>=Oa())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Oa().toString(16)+" bytes");return 0|e}function Ia(e){return!(null==e||!e._isBuffer)}function Aa(e,t){if(Ia(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return ii(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return si(e).length;default:if(n)return ii(e).length;t=(""+t).toLowerCase(),n=!0}}function Ba(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return Xa(this,t,r);case"utf8":case"utf-8":return Ha(this,t,r);case"ascii":return Ka(this,t,r);case"latin1":case"binary":return Ya(this,t,r);case"base64":return $a(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return qa(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function Da(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function La(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=Sa.from(t,n)),Ia(t))return 0===t.length?-1:Na(e,t,r,n,o);if("number"==typeof t)return t&=255,Sa.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):Na(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function Na(e,t,r,n,o){var a,i=1,s=e.length,p=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;i=2,s/=2,p/=2,r/=2}function l(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(o){var u=-1;for(a=r;a<s;a++)if(l(e,a)===l(t,-1===u?0:a-u)){if(-1===u&&(u=a),a-u+1===p)return u*i}else-1!==u&&(a-=a-u),u=-1}else for(r+p>s&&(r=s-p),a=r;a>=0;a--){for(var d=!0,c=0;c<p;c++)if(l(e,a+c)!==l(t,c)){d=!1;break}if(d)return a}return-1}function Pa(e,t,r,n){r=Number(r)||0;var o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");n>a/2&&(n=a/2);for(var i=0;i<n;++i){var s=parseInt(t.substr(2*i,2),16);if(isNaN(s))return i;e[r+i]=s}return i}function ja(e,t,r,n){return pi(ii(t,e.length-r),e,r,n)}function Ga(e,t,r,n){return pi(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function Wa(e,t,r,n){return Ga(e,t,r,n)}function za(e,t,r,n){return pi(si(t),e,r,n)}function Ua(e,t,r,n){return pi(function(e,t){for(var r,n,o,a=[],i=0;i<e.length&&!((t-=2)<0);++i)n=(r=e.charCodeAt(i))>>8,o=r%256,a.push(o),a.push(n);return a}(t,e.length-r),e,r,n)}function $a(e,t,r){return 0===t&&r===e.length?_a(e):_a(e.slice(t,r))}function Ha(e,t,r){r=Math.min(e.length,r);for(var n=[],o=t;o<r;){var a,i,s,p,l=e[o],u=null,d=l>239?4:l>223?3:l>191?2:1;if(o+d<=r)switch(d){case 1:l<128&&(u=l);break;case 2:128==(192&(a=e[o+1]))&&(p=(31&l)<<6|63&a)>127&&(u=p);break;case 3:a=e[o+1],i=e[o+2],128==(192&a)&&128==(192&i)&&(p=(15&l)<<12|(63&a)<<6|63&i)>2047&&(p<55296||p>57343)&&(u=p);break;case 4:a=e[o+1],i=e[o+2],s=e[o+3],128==(192&a)&&128==(192&i)&&128==(192&s)&&(p=(15&l)<<18|(63&a)<<12|(63&i)<<6|63&s)>65535&&p<1114112&&(u=p)}null===u?(u=65533,d=1):u>65535&&(u-=65536,n.push(u>>>10&1023|55296),u=56320|1023&u),n.push(u),o+=d}return function(e){var t=e.length;if(t<=Va)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=Va));return r}(n)}Sa.TYPED_ARRAY_SUPPORT=void 0===ke.TYPED_ARRAY_SUPPORT||ke.TYPED_ARRAY_SUPPORT,Oa(),Sa.poolSize=8192,Sa._augment=function(e){return e.__proto__=Sa.prototype,e},Sa.from=function(e,t,r){return Ea(null,e,t,r)},Sa.TYPED_ARRAY_SUPPORT&&(Sa.prototype.__proto__=Uint8Array.prototype,Sa.__proto__=Uint8Array),Sa.alloc=function(e,t,r){return function(e,t,r,n){return Fa(t),t<=0?xa(e,t):void 0!==r?"string"==typeof n?xa(e,t).fill(r,n):xa(e,t).fill(r):xa(e,t)}(null,e,t,r)},Sa.allocUnsafe=function(e){return Ma(null,e)},Sa.allocUnsafeSlow=function(e){return Ma(null,e)},Sa.isBuffer=function(e){return null!=e&&(!!e._isBuffer||li(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&li(e.slice(0,0))}(e))},Sa.compare=function(e,t){if(!Ia(e)||!Ia(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,o=0,a=Math.min(r,n);o<a;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},Sa.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Sa.concat=function(e,t){if(!Ta(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Sa.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=Sa.allocUnsafe(t),o=0;for(r=0;r<e.length;++r){var a=e[r];if(!Ia(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,o),o+=a.length}return n},Sa.byteLength=Aa,Sa.prototype._isBuffer=!0,Sa.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)Da(this,t,t+1);return this},Sa.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)Da(this,t,t+3),Da(this,t+1,t+2);return this},Sa.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)Da(this,t,t+7),Da(this,t+1,t+6),Da(this,t+2,t+5),Da(this,t+3,t+4);return this},Sa.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?Ha(this,0,e):Ba.apply(this,arguments)},Sa.prototype.equals=function(e){if(!Ia(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Sa.compare(this,e)},Sa.prototype.inspect=function(){var e="";return this.length>0&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(e+=" ... ")),"<Buffer "+e+">"},Sa.prototype.compare=function(e,t,r,n,o){if(!Ia(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return-1;if(t>=r)return 1;if(this===e)return 0;for(var a=(o>>>=0)-(n>>>=0),i=(r>>>=0)-(t>>>=0),s=Math.min(a,i),p=this.slice(n,o),l=e.slice(t,r),u=0;u<s;++u)if(p[u]!==l[u]){a=p[u],i=l[u];break}return a<i?-1:i<a?1:0},Sa.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},Sa.prototype.indexOf=function(e,t,r){return La(this,e,t,r,!0)},Sa.prototype.lastIndexOf=function(e,t,r){return La(this,e,t,r,!1)},Sa.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var a=!1;;)switch(n){case"hex":return Pa(this,e,t,r);case"utf8":case"utf-8":return ja(this,e,t,r);case"ascii":return Ga(this,e,t,r);case"latin1":case"binary":return Wa(this,e,t,r);case"base64":return za(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ua(this,e,t,r);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},Sa.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Va=4096;function Ka(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}function Ya(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function Xa(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var o="",a=t;a<r;++a)o+=ai(e[a]);return o}function qa(e,t,r){for(var n=e.slice(t,r),o="",a=0;a<n.length;a+=2)o+=String.fromCharCode(n[a]+256*n[a+1]);return o}function Ja(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function Qa(e,t,r,n,o,a){if(!Ia(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<a)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function Za(e,t,r,n){t<0&&(t=65535+t+1);for(var o=0,a=Math.min(e.length-r,2);o<a;++o)e[r+o]=(t&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function ei(e,t,r,n){t<0&&(t=4294967295+t+1);for(var o=0,a=Math.min(e.length-r,4);o<a;++o)e[r+o]=t>>>8*(n?o:3-o)&255}function ti(e,t,r,n,o,a){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function ri(e,t,r,n,o){return o||ti(e,0,r,4),wa(e,t,r,n,23,4),r+4}function ni(e,t,r,n,o){return o||ti(e,0,r,8),wa(e,t,r,n,52,8),r+8}Sa.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),Sa.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=Sa.prototype;else{var o=t-e;r=new Sa(o,void 0);for(var a=0;a<o;++a)r[a]=this[a+e]}return r},Sa.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||Ja(e,t,this.length);for(var n=this[e],o=1,a=0;++a<t&&(o*=256);)n+=this[e+a]*o;return n},Sa.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||Ja(e,t,this.length);for(var n=this[e+--t],o=1;t>0&&(o*=256);)n+=this[e+--t]*o;return n},Sa.prototype.readUInt8=function(e,t){return t||Ja(e,1,this.length),this[e]},Sa.prototype.readUInt16LE=function(e,t){return t||Ja(e,2,this.length),this[e]|this[e+1]<<8},Sa.prototype.readUInt16BE=function(e,t){return t||Ja(e,2,this.length),this[e]<<8|this[e+1]},Sa.prototype.readUInt32LE=function(e,t){return t||Ja(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Sa.prototype.readUInt32BE=function(e,t){return t||Ja(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Sa.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||Ja(e,t,this.length);for(var n=this[e],o=1,a=0;++a<t&&(o*=256);)n+=this[e+a]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*t)),n},Sa.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||Ja(e,t,this.length);for(var n=t,o=1,a=this[e+--n];n>0&&(o*=256);)a+=this[e+--n]*o;return a>=(o*=128)&&(a-=Math.pow(2,8*t)),a},Sa.prototype.readInt8=function(e,t){return t||Ja(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Sa.prototype.readInt16LE=function(e,t){t||Ja(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},Sa.prototype.readInt16BE=function(e,t){t||Ja(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},Sa.prototype.readInt32LE=function(e,t){return t||Ja(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Sa.prototype.readInt32BE=function(e,t){return t||Ja(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Sa.prototype.readFloatLE=function(e,t){return t||Ja(e,4,this.length),va(this,e,!0,23,4)},Sa.prototype.readFloatBE=function(e,t){return t||Ja(e,4,this.length),va(this,e,!1,23,4)},Sa.prototype.readDoubleLE=function(e,t){return t||Ja(e,8,this.length),va(this,e,!0,52,8)},Sa.prototype.readDoubleBE=function(e,t){return t||Ja(e,8,this.length),va(this,e,!1,52,8)},Sa.prototype.writeUIntLE=function(e,t,r,n){e=+e,t|=0,r|=0,n||Qa(this,e,t,r,Math.pow(2,8*r)-1,0);var o=1,a=0;for(this[t]=255&e;++a<r&&(o*=256);)this[t+a]=e/o&255;return t+r},Sa.prototype.writeUIntBE=function(e,t,r,n){e=+e,t|=0,r|=0,n||Qa(this,e,t,r,Math.pow(2,8*r)-1,0);var o=r-1,a=1;for(this[t+o]=255&e;--o>=0&&(a*=256);)this[t+o]=e/a&255;return t+r},Sa.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||Qa(this,e,t,1,255,0),Sa.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},Sa.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||Qa(this,e,t,2,65535,0),Sa.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):Za(this,e,t,!0),t+2},Sa.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||Qa(this,e,t,2,65535,0),Sa.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):Za(this,e,t,!1),t+2},Sa.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||Qa(this,e,t,4,4294967295,0),Sa.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):ei(this,e,t,!0),t+4},Sa.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||Qa(this,e,t,4,4294967295,0),Sa.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):ei(this,e,t,!1),t+4},Sa.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var o=Math.pow(2,8*r-1);Qa(this,e,t,r,o-1,-o)}var a=0,i=1,s=0;for(this[t]=255&e;++a<r&&(i*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/i>>0)-s&255;return t+r},Sa.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var o=Math.pow(2,8*r-1);Qa(this,e,t,r,o-1,-o)}var a=r-1,i=1,s=0;for(this[t+a]=255&e;--a>=0&&(i*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/i>>0)-s&255;return t+r},Sa.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||Qa(this,e,t,1,127,-128),Sa.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},Sa.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||Qa(this,e,t,2,32767,-32768),Sa.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):Za(this,e,t,!0),t+2},Sa.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||Qa(this,e,t,2,32767,-32768),Sa.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):Za(this,e,t,!1),t+2},Sa.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||Qa(this,e,t,4,2147483647,-2147483648),Sa.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):ei(this,e,t,!0),t+4},Sa.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||Qa(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Sa.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):ei(this,e,t,!1),t+4},Sa.prototype.writeFloatLE=function(e,t,r){return ri(this,e,t,!0,r)},Sa.prototype.writeFloatBE=function(e,t,r){return ri(this,e,t,!1,r)},Sa.prototype.writeDoubleLE=function(e,t,r){return ni(this,e,t,!0,r)},Sa.prototype.writeDoubleBE=function(e,t,r){return ni(this,e,t,!1,r)},Sa.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var o,a=n-r;if(this===e&&r<t&&t<n)for(o=a-1;o>=0;--o)e[o+t]=this[o+r];else if(a<1e3||!Sa.TYPED_ARRAY_SUPPORT)for(o=0;o<a;++o)e[o+t]=this[o+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+a),t);return a},Sa.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!Sa.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var a;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(a=t;a<r;++a)this[a]=e;else{var i=Ia(e)?e:ii(new Sa(e,n).toString()),s=i.length;for(a=0;a<r-t;++a)this[a+t]=i[a%s]}return this};var oi=/[^+\/0-9A-Za-z-_]/g;function ai(e){return e<16?"0"+e.toString(16):e.toString(16)}function ii(e,t){var r;t=t||1/0;for(var n=e.length,o=null,a=[],i=0;i<n;++i){if((r=e.charCodeAt(i))>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(i+1===n){(t-=3)>-1&&a.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&a.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&a.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function si(e){return function(e){var t,r,n,o,a,i;ma||ya();var s=e.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");a="="===e[s-2]?2:"="===e[s-1]?1:0,i=new fa(3*s/4-a),n=a>0?s-4:s;var p=0;for(t=0,r=0;t<n;t+=4,r+=3)o=ha[e.charCodeAt(t)]<<18|ha[e.charCodeAt(t+1)]<<12|ha[e.charCodeAt(t+2)]<<6|ha[e.charCodeAt(t+3)],i[p++]=o>>16&255,i[p++]=o>>8&255,i[p++]=255&o;return 2===a?(o=ha[e.charCodeAt(t)]<<2|ha[e.charCodeAt(t+1)]>>4,i[p++]=255&o):1===a&&(o=ha[e.charCodeAt(t)]<<10|ha[e.charCodeAt(t+1)]<<4|ha[e.charCodeAt(t+2)]>>2,i[p++]=o>>8&255,i[p++]=255&o),i}(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(oi,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function pi(e,t,r,n){for(var o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}function li(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function ui(e,t){let r=e;if(Ro(e))return"string"===t?[]:[e.length];if("object"==typeof e){if("texture"in e){const t=e.channels||"RGBA";return[e.height,e.width*t.length]}if("buffer"in e&&!(e.buffer instanceof ArrayBuffer))return[e.buffer.size/(null==t?4:ft(t))]}if(!Array.isArray(e))return[];const n=[];for(;Array.isArray(r)||Ro(r)&&"string"!==t;)n.push(r.length),r=r[0];return Array.isArray(e)&&It().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&di(e,n,[]),n}function di(e,t,r){if(r=r||[],!Array.isArray(e)&&!Ro(e))return void et(0===t.length,(()=>`Element arr[${r.join("][")}] is a primitive, but should be an array/TypedArray of ${t[0]} elements`));et(t.length>0,(()=>`Element arr[${r.join("][")}] should be a primitive, but is an array of ${e.length} elements`)),et(e.length===t[0],(()=>`Element arr[${r.join("][")}] should have ${t[0]} elements, but has ${e.length} elements`));const n=t.slice(1);for(let t=0;t<e.length;++t)di(e[t],n,r.concat(t))}function ci(e,t,r,n){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error(`Argument '${r}' passed to '${n}' must be ${e} tensor, but got ${t} tensor`)}}function gi(e,t,r,n="numeric"){if(e instanceof Vo)return ci(n,e.dtype,t,r),e;let o=yt(e);if("string"!==o&&["bool","int32","float32"].indexOf(n)>=0&&(o=n),ci(n,o,t,r),null==e||!Ro(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e){const n=null==e?"null":e.constructor.name;throw new Error(`Argument '${t}' passed to '${r}' must be a Tensor or TensorLike, but got '${n}'`)}const a=ui(e,o);Ro(e)||Array.isArray(e)||(e=[e]);const i="string"!==o?So(e,o):Co(e,[],!0);return pa.makeTensor(i,a,o)}function hi(e,t,r,n="numeric"){if(!Array.isArray(e))throw new Error(`Argument ${t} passed to ${r} must be a \`Tensor[]\` or \`TensorLike[]\``);return e.map(((e,o)=>gi(e,`${t}[${o}]`,r,n)))}const fi="__op";function mi(e){const t=Object.keys(e);if(1!==t.length)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${t.length} keys.`);let r=t[0];const n=e[r];r.endsWith("_")&&(r=r.substring(0,r.length-1)),r+=fi;const o=(...e)=>{pa.startScope(r);try{const t=n(...e);return Ft(t)&&console.error("Cannot return a Promise inside of tidy."),pa.endScope(t),t}catch(e){throw pa.endScope(null),e}};return Object.defineProperty(o,"name",{value:r,configurable:!0}),o}const yi=mi({complex_:function(e,t){const r=gi(e,"real","complex"),n=gi(t,"imag","complex");tt(r.shape,n.shape,`real and imag shapes, ${r.shape} and ${n.shape}, must match in call to tf.complex().`);const o={real:r,imag:n};return pa.runKernel("Complex",o)}});function bi(e,t,r,n){if(null==n)n=yt(e);else if("complex64"===n)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if("object"==typeof e&&("texture"in e||"buffer"in e&&!(e.buffer instanceof ArrayBuffer))){if("float32"!==n&&"int32"!==n)throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${n}.`);return pa.backend.createTensorFromGPUData(e,t||r,n)}if(!Ro(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){xt(t);const e=nt(t),n=nt(r);et(e===n,(()=>`Based on the provided shape, [${t}], the tensor should have ${e} values but has ${n}`));for(let e=0;e<r.length;++e){const n=r[e],o=e!==r.length-1||n!==nt(t.slice(e));et(r[e]===t[e]||!o,(()=>`Error creating a new Tensor. Inferred shape (${r}) does not match the provided shape (${t}). `))}}return Ro(e)||Array.isArray(e)||(e=[e]),t=t||r,e="string"!==n?So(e,n):Co(e,[],!0),pa.makeTensor(e,t,n)}function _i(e,t,r){return bi(e,t,ui(e,r),r)}const vi={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8},wi=4;function ki(e,t){const r={};let n,o=0;for(const a of t){const t=a.name,i=a.dtype,s=a.shape,p=nt(s);let l;if("quantization"in a){const r=a.quantization;if("uint8"===r.dtype||"uint16"===r.dtype){if(!("min"in r)||!("scale"in r))throw new Error(`Weight ${a.name} with quantization ${r.dtype} doesn't have corresponding metadata min and scale.`)}else{if("float16"!==r.dtype)throw new Error(`Weight ${a.name} has unknown quantization dtype ${r.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);if("float32"!==i)throw new Error(`Weight ${a.name} is quantized with ${r.dtype} which only supports weights of type float32 not ${i}.`)}const s=vi[r.dtype],u=e.slice(o,o+p*s),d="uint8"===r.dtype?new Uint8Array(u):new Uint16Array(u);if("float32"===i)if("uint8"===r.dtype||"uint16"===r.dtype){l=new Float32Array(d.length);for(let e=0;e<d.length;e++){const t=d[e];l[e]=t*r.scale+r.min}}else{if("float16"!==r.dtype)throw new Error(`Unsupported quantization type ${r.dtype} for weight type float32.`);void 0===n&&(n=Ai()),l=n(d)}else{if("int32"!==i)throw new Error(`Unsupported dtype in weight '${t}': ${i}`);if("uint8"!==r.dtype&&"uint16"!==r.dtype)throw new Error(`Unsupported quantization type ${r.dtype} for weight type int32.`);l=new Int32Array(d.length);for(let e=0;e<d.length;e++){const t=d[e];l[e]=Math.round(t*r.scale+r.min)}}o+=p*s}else if("string"===i){const t=nt(a.shape);l=[];for(let r=0;r<t;r++){const t=new Uint32Array(e.slice(o,o+wi))[0];o+=wi;const r=new Uint8Array(e.slice(o,o+t));l.push(r),o+=t}}else{const n=vi[i],a=e.slice(o,o+p*n);if("float32"===i)l=new Float32Array(a);else if("int32"===i)l=new Int32Array(a);else if("bool"===i)l=new Uint8Array(a);else{if("complex64"!==i)throw new Error(`Unsupported dtype in weight '${t}': ${i}`);{l=new Float32Array(a);const e=new Float32Array(l.length/2),n=new Float32Array(l.length/2);for(let t=0;t<e.length;t++)e[t]=l[2*t],n[t]=l[2*t+1];const o=_i(e,s,"float32"),i=_i(n,s,"float32");r[t]=yi(o,i),o.dispose(),i.dispose()}}o+=p*n}"complex64"!==i&&(r[t]=_i(l,s,i))}return r}function Ti(e){if(null===e)throw new Error(`Invalid input value: ${JSON.stringify(e)}`);let t=0;const r=[];e.forEach((e=>{if(t+=e.byteLength,r.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${e.constructor.name}`)}));const n=new Uint8Array(t);let o=0;return r.forEach((e=>{n.set(new Uint8Array(e.buffer),o),o+=e.byteLength})),n.buffer}const Oi=void 0!==Sa&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function xi(e){return Oi?Sa.byteLength(e):new Blob([e]).size}function Si(e){if(1===e.length)return e[0];let t=0;e.forEach((e=>{t+=e.byteLength}));const r=new Uint8Array(t);let n=0;return e.forEach((e=>{r.set(new Uint8Array(e),n),n+=e.byteLength})),r.buffer}function Ei(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);const t=e.split("/");return t[t.length-1]}function Fi(e,t){const r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(r.signature=e.signature),null!=e.userDefinedMetadata&&(r.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(r.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(r.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(r.trainingConfig=e.trainingConfig),r}function Mi(e,t,r){const n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),null!=e.weightsManifest){if(!t)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!r)throw new Error("modelJSON has weightsManifest but weightData is null");n.weightSpecs=t,n.weightData=r}return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(n.initializerSignature=e.initializerSignature),n}async function Ri(e,t){let r,n;return null!=e.weightsManifest&&([r,n]=await t(e.weightsManifest)),Mi(e,r,n)}function Ci(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:xi(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:xi(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}function Ii(e){const t=[];for(const r of e)t.push(...r.weights);return t}function Ai(){const e=function(){const e=e=>{let t=e<<13,r=0;for(;0==(8388608&t);)r-=8388608,t<<=1;return t&=-8388609,r+=947912704,t|r},t=new Uint32Array(2048);t[0]=0;for(let r=1;r<1024;r++)t[r]=e(r);for(let e=1024;e<2048;e++)t[e]=939524096+(e-1024<<13);return t}(),t=function(){const e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(let t=1;t<31;t++)e[t]=t<<23;for(let t=33;t<63;t++)e[t]=2147483648+(t-32<<23);return e}(),r=function(){const e=new Uint32Array(64);for(let t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return n=>{const o=new ArrayBuffer(4*n.length),a=new Uint32Array(o);for(let o=0;o<n.length;o++){const i=n[o],s=e[r[i>>10]+(1023&i)]+t[i>>10];a[o]=s}return new Float32Array(o)}}class Bi{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==Bi.instance&&(Bi.instance=new Bi),Bi.instance}static registerSaveRouter(e){Bi.getInstance().saveRouters.push(e)}static registerLoadRouter(e){Bi.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return Bi.getHandlers(e,"save")}static getLoadHandlers(e,t){return Bi.getHandlers(e,"load",t)}static getHandlers(e,t,r){const n=[];return("load"===t?Bi.getInstance().loadRouters:Bi.getInstance().saveRouters).forEach((t=>{const o=t(e,r);null!==o&&n.push(o)})),n}}const Di="tensorflowjs",Li="models_store",Ni="model_info_store";function Pi(){if(!It().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const e="undefined"==typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function ji(e){const t=e.result;t.createObjectStore(Li,{keyPath:"modelPath"}),t.createObjectStore(Ni,{keyPath:"modelPath"})}class Gi{constructor(e){if(this.indexedDB=Pi(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,t){return new Promise(((e,r)=>{const n=this.indexedDB.open(Di,1);n.onupgradeneeded=()=>ji(n),n.onsuccess=()=>{const o=n.result;if(null==t){const t=o.transaction(Li,"readonly"),n=t.objectStore(Li).get(this.modelPath);n.onsuccess=()=>{if(null==n.result)return o.close(),r(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));e(n.result.modelArtifacts)},n.onerror=e=>(o.close(),r(n.error)),t.oncomplete=()=>o.close()}else{const n=Ci(t),a=o.transaction(Ni,"readwrite");let i=a.objectStore(Ni);const s=i.put({modelPath:this.modelPath,modelArtifactsInfo:n});let p;s.onsuccess=()=>{p=o.transaction(Li,"readwrite");const s=p.objectStore(Li).put({modelPath:this.modelPath,modelArtifacts:t,modelArtifactsInfo:n});s.onsuccess=()=>e({modelArtifactsInfo:n}),s.onerror=e=>{i=a.objectStore(Ni);const t=i.delete(this.modelPath);t.onsuccess=()=>(o.close(),r(s.error)),t.onerror=e=>(o.close(),r(s.error))}},s.onerror=e=>(o.close(),r(s.error)),a.oncomplete=()=>{null==p?o.close():p.oncomplete=()=>o.close()}}},n.onerror=e=>r(n.error)}))}}Gi.URL_SCHEME="indexeddb://";const Wi=e=>{return It().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Gi.URL_SCHEME)?(t=e.slice(Gi.URL_SCHEME.length),new Gi(t)):null;var t};Bi.registerSaveRouter(Wi),Bi.registerLoadRouter(Wi);class zi{constructor(){this.indexedDB=Pi()}async listModels(){return new Promise(((e,t)=>{const r=this.indexedDB.open(Di,1);r.onupgradeneeded=()=>ji(r),r.onsuccess=()=>{const n=r.result,o=n.transaction(Ni,"readonly"),a=o.objectStore(Ni).getAll();a.onsuccess=()=>{const t={};for(const e of a.result)t[e.modelPath]=e.modelArtifactsInfo;e(t)},a.onerror=e=>(n.close(),t(a.error)),o.oncomplete=()=>n.close()},r.onerror=e=>t(r.error)}))}async removeModel(e){var t;return e=(t=e).startsWith(Gi.URL_SCHEME)?t.slice(Gi.URL_SCHEME.length):t,new Promise(((t,r)=>{const n=this.indexedDB.open(Di,1);n.onupgradeneeded=()=>ji(n),n.onsuccess=()=>{const o=n.result,a=o.transaction(Ni,"readwrite"),i=a.objectStore(Ni),s=i.get(e);let p;s.onsuccess=()=>{if(null==s.result)return o.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const n=i.delete(e),a=()=>{p=o.transaction(Li,"readwrite");const n=p.objectStore(Li).delete(e);n.onsuccess=()=>t(s.result.modelArtifactsInfo),n.onerror=e=>r(s.error)};n.onsuccess=a,n.onerror=e=>(a(),o.close(),r(s.error))}},s.onerror=e=>(o.close(),r(s.error)),a.oncomplete=()=>{null==p?o.close():p.oncomplete=()=>o.close()}},n.onerror=e=>r(n.error)}))}}const Ui="/",$i="tensorflowjs_models",Hi="info",Vi="model_topology",Ki="weight_specs",Yi="weight_data",Xi="model_metadata";function qi(e){return{info:[$i,e,Hi].join(Ui),topology:[$i,e,Vi].join(Ui),weightSpecs:[$i,e,Ki].join(Ui),weightData:[$i,e,Yi].join(Ui),modelMetadata:[$i,e,Xi].join(Ui)}}function Ji(e){for(const t of Object.values(e))window.localStorage.removeItem(t)}function Qi(e){const t=e.split(Ui);if(t.length<3)throw new Error(`Invalid key format: ${e}`);return t.slice(1,t.length-1).join(Ui)}class Zi{constructor(e){if(!It().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=qi(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const t=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),n=Ci(e);try{this.LS.setItem(this.keys.info,JSON.stringify(n)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(e){if(Oi)return Sa.from(e).toString("base64");const t=new Uint8Array(e);let r="";for(let e=0,n=t.length;e<n;e++)r+=String.fromCharCode(t[e]);return btoa(r)}(e.weightData));const o={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:null!=e.signature?e.signature:void 0,userDefinedMetadata:null!=e.userDefinedMetadata?e.userDefinedMetadata:void 0,modelInitializer:null!=e.modelInitializer?e.modelInitializer:void 0,initializerSignature:null!=e.initializerSignature?e.initializerSignature:void 0,trainingConfig:null!=e.trainingConfig?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),{modelArtifactsInfo:n}}catch(e){throw Ji(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${n.modelTopologyBytes}, weightSpecsBytes=${n.weightSpecsBytes}, weightDataBytes=${n.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(null==e)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const t={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(null==r)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);t.modelTopology=r;const n=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==n)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);t.weightSpecs=n;const o=this.LS.getItem(this.keys.modelMetadata);if(null!=o){const e=JSON.parse(o);t.format=e.format,t.generatedBy=e.generatedBy,t.convertedBy=e.convertedBy,null!=e.signature&&(t.signature=e.signature),null!=e.userDefinedMetadata&&(t.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(t.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(t.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(t.trainingConfig=e.trainingConfig)}const a=this.LS.getItem(this.keys.weightData);if(null==a)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return t.weightData=function(e){if(Oi){const t=Sa.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}const t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;++e)r.set([t.charCodeAt(e)],e);return r.buffer}(a),t}}Zi.URL_SCHEME="localstorage://";const es=e=>{return It().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Zi.URL_SCHEME)?(t=e.slice(Zi.URL_SCHEME.length),new Zi(t)):null;var t};Bi.registerSaveRouter(es),Bi.registerLoadRouter(es);class ts{constructor(){et(It().getBool("IS_BROWSER"),(()=>"Current environment is not a web browser")),et("undefined"==typeof window||void 0!==window.localStorage,(()=>"Current browser does not appear to support localStorage")),this.LS=window.localStorage}async listModels(){const e={},t=$i+Ui,r=Ui+Hi;for(let n=0;n<this.LS.length;++n){const o=this.LS.key(n);o.startsWith(t)&&o.endsWith(r)&&(e[Qi(o)]=JSON.parse(this.LS.getItem(o)))}return e}async removeModel(e){var t;const r=qi(e=(t=e).startsWith(Zi.URL_SCHEME)?t.slice(Zi.URL_SCHEME.length):t);if(null==this.LS.getItem(r.info))throw new Error(`Cannot find model at path '${e}'`);const n=JSON.parse(this.LS.getItem(r.info));return Ji(r),n}}function rs(e){return new Promise((e=>setTimeout(e))).then(e)}class ns{constructor(e){if(!It().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(ns.URL_SCHEME)&&(e=e.slice(ns.URL_SCHEME.length)),null!=e&&0!==e.length||(e="model"),this.modelJsonFileName=e+".json",this.weightDataFileName=e+".weights.bin"}async save(e){if("undefined"==typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");const t=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const r=Fi(e,[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}]),n=window.URL.createObjectURL(new Blob([JSON.stringify(r)],{type:"application/json"})),o=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor;if(o.download=this.modelJsonFileName,o.href=n,await rs((()=>o.dispatchEvent(new MouseEvent("click")))),null!=e.weightData){const e=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;e.download=this.weightDataFileName,e.href=t,await rs((()=>e.dispatchEvent(new MouseEvent("click"))))}return{modelArtifactsInfo:Ci(e)}}}}ns.URL_SCHEME="downloads://";class os{constructor(e){if(null==e||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise(((e,t)=>{const r=new FileReader;r.onload=r=>{const n=JSON.parse(r.target.result),o=n.modelTopology;if(null==o)return void t(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));if(null==n.weightsManifest)return void t(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));if(0===this.weightsFiles.length)return void e({modelTopology:o});const a=Ri(n,(e=>this.loadWeights(e)));e(a)},r.onerror=e=>t(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),r.readAsText(this.jsonFile)}))}loadWeights(e){const t=[],r=[];for(const n of e)t.push(...n.weights),r.push(...n.paths);const n=this.checkManifestAndWeightFiles(e),o=r.map((e=>this.loadWeightsFile(e,n[e])));return Promise.all(o).then((e=>[t,Si(e)]))}loadWeightsFile(e,t){return new Promise(((r,n)=>{const o=new FileReader;o.onload=e=>{const t=e.target.result;r(t)},o.onerror=t=>n(`Failed to weights data from file of path '${e}'.`),o.readAsArrayBuffer(t)}))}checkManifestAndWeightFiles(e){const t=[],r=this.weightsFiles.map((e=>Ei(e.name))),n={};for(const o of e)o.paths.forEach((e=>{const o=Ei(e);if(-1!==t.indexOf(o))throw new Error(`Duplicate file basename found in weights manifest: '${o}'`);if(t.push(o),-1===r.indexOf(o))throw new Error(`Weight file with basename '${o}' is not provided.`);n[e]=this.weightsFiles[r.indexOf(o)]}));if(t.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${t.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return n}}function as(e,t,r,n){!function(e){et(null!=e&&Array.isArray(e)&&e.length>0,(()=>"promises must be a none empty array"))}(e),function(e,t){et(e>=0&&e<=1,(()=>`Progress fraction must be in range [0, 1], but got startFraction ${e}`)),et(t>=0&&t<=1,(()=>`Progress fraction must be in range [0, 1], but got endFraction ${t}`)),et(t>=e,(()=>`startFraction must be no more than endFraction, but got startFraction ${e} and endFraction ${t}`))}(r=null==r?0:r,n=null==n?1:n);let o=0;return Promise.all(e.map((a=>(a.then((a=>{const i=r+ ++o/e.length*(n-r);return t(i),a})),a))))}async function is(e,t){null==t&&(t={});const r=null==t.fetchFunc?It().platform.fetch:t.fetchFunc,n=e.map((e=>r(e,t.requestInit,{isBinary:!0}))),o=(null==t.onProgress?await Promise.all(n):await as(n,t.onProgress,0,.5)).map((e=>e.arrayBuffer()));return null==t.onProgress?await Promise.all(o):await as(o,t.onProgress,.5,1)}function ss(e){return async(t,r="",n)=>{const o=t.map((()=>!1)),a={},i=null!=n?n.map((()=>!1)):[],s=[];if(t.forEach(((e,t)=>{let r=0;e.weights.forEach((e=>{const p="quantization"in e?e.quantization.dtype:e.dtype,l=vi[p]*nt(e.shape),u=()=>{o[t]=!0,null==a[t]&&(a[t]=[]),a[t].push({manifestEntry:e,groupOffset:r,sizeBytes:l})};null!=n?n.forEach(((t,r)=>{t===e.name&&(u(),i[r]=!0)})):u(),s.push(e.name),r+=l}))})),!i.every((e=>e))){const e=n.filter(((e,t)=>!i[t]));throw new Error(`Could not find weights in manifest with names: ${e.join(", ")}. \nManifest JSON has weights with names: ${s.join(", ")}.`)}const p=o.reduce(((e,t,r)=>(t&&e.push(r),e)),[]),l=[];p.forEach((e=>{t[e].paths.forEach((e=>{const t=r+(r.endsWith("/")?"":"/")+e;l.push(t)}))}));const u=await e(l),d={};let c=0;return p.forEach((e=>{const r=t[e].paths.length;let n=0;for(let e=0;e<r;e++)n+=u[c+e].byteLength;const o=new ArrayBuffer(n),i=new Uint8Array(o);let s=0;for(let e=0;e<r;e++){const t=new Uint8Array(u[c+e]);i.set(t,s),s+=t.byteLength}a[e].forEach((e=>{const t=ki(o.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(const e in t)d[e]=t[e]})),c+=r})),d}}Bi.registerSaveRouter((e=>It().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(ns.URL_SCHEME)?function(e="model"){return new ns(e)}(e.slice(ns.URL_SCHEME.length)):null));class ps{constructor(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,this.weightUrlConverter=t.weightUrlConverter,null!=t.fetchFunc?(et("function"==typeof t.fetchFunc,(()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)")),this.fetch=t.fetchFunc):this.fetch=It().platform.fetch,et(null!=e&&e.length>0,(()=>"URL path for http must not be null, undefined or empty.")),Array.isArray(e)&&et(2===e.length,(()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`)),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;const r=Fi(e,[{paths:["./model.weights.bin"],weights:e.weightSpecs}]);t.body.append("model.json",new Blob([JSON.stringify(r)],{type:"application/json"}),"model.json"),null!=e.weightData&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin");const n=await this.fetch(this.path,t);if(n.ok)return{modelArtifactsInfo:Ci(e),responses:[n]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${n.status}.`)}async load(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let t;try{t=await e.json()}catch(e){let t=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?t+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":t+=" Please make sure the server is serving valid JSON for this request.",new Error(t)}const r=t.modelTopology,n=t.weightsManifest;if(null==r&&null==n)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return Ri(t,(e=>this.loadWeights(e)))}async loadWeights(e){const t=Array.isArray(this.path)?this.path[1]:this.path,[r,n]=function(e){const t=e.lastIndexOf("/"),r=e.lastIndexOf("?");return[e.substring(0,t)+"/",r>t?e.substring(r):""]}(t),o=this.weightPathPrefix||r,a=Ii(e),i=[],s=[];for(const t of e)for(const e of t.paths)null!=this.weightUrlConverter?s.push(this.weightUrlConverter(e)):i.push(o+e+n);return this.weightUrlConverter&&i.push(...await Promise.all(s)),[a,Si(await is(i,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress}))]}}function ls(e){return null!=e.match(ps.URL_SCHEME_REGEX)}ps.URL_SCHEME_REGEX=/^https?:\/\//;const us=(e,t)=>{if("undefined"==typeof fetch&&(null==t||null==t.fetchFunc))return null;{let r=!0;if(r=Array.isArray(e)?e.every((e=>ls(e))):ls(e),r)return ds(e,t)}return null};function ds(e,t){return new ps(e,t)}Bi.registerSaveRouter(us),Bi.registerLoadRouter(us);class cs{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class gs{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class hs{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=t=>Promise.resolve(e.save(t)))}}function fs(e,t,r,n){return 1===arguments.length?null!=e.modelTopology||null!=e.weightSpecs?new cs(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new cs({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new cs({modelTopology:e,weightSpecs:t,weightData:r,trainingConfig:n}))}const ms="://";class ys{constructor(){this.managers={}}static getInstance(){return null==ys.instance&&(ys.instance=new ys),ys.instance}static registerManager(e,t){et(null!=e,(()=>"scheme must not be undefined or null.")),e.endsWith(ms)&&(e=e.slice(0,e.indexOf(ms))),et(e.length>0,(()=>"scheme must not be an empty string."));const r=ys.getInstance();et(null==r.managers[e],(()=>`A model store manager is already registered for scheme '${e}'.`)),r.managers[e]=t}static getManager(e){const t=ys.getInstance().managers[e];if(null==t)throw new Error(`Cannot find model manager for scheme '${e}'`);return t}static getSchemes(){return Object.keys(ys.getInstance().managers)}}function bs(e){if(-1===e.indexOf(ms))throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${ys.getSchemes().join(",")}`);return{scheme:e.split(ms)[0],path:e.split(ms)[1]}}async function _s(e,t,r=!1){et(e!==t,(()=>`Old path and new path are the same: '${e}'`));const n=Bi.getLoadHandlers(e);et(n.length>0,(()=>`Copying failed because no load handler is found for source URL ${e}.`)),et(n.length<2,(()=>`Copying failed because more than one (${n.length}) load handlers for source URL ${e}.`));const o=n[0],a=Bi.getSaveHandlers(t);et(a.length>0,(()=>`Copying failed because no save handler is found for destination URL ${t}.`)),et(a.length<2,(()=>`Copying failed because more than one (${n.length}) save handlers for destination URL ${t}.`));const i=a[0],s=bs(e).scheme,p=bs(e).path,l=s===bs(e).scheme,u=await o.load();r&&l&&await ys.getManager(s).removeModel(p);const d=await i.save(u);return r&&!l&&await ys.getManager(s).removeModel(p),d.modelArtifactsInfo}var vs=Object.freeze({__proto__:null,browserFiles:function(e){return new os(e)},browserHTTPRequest:function(e,t){return ds(e,t)},concatenateArrayBuffers:Si,decodeWeights:ki,encodeWeights:async function(e,t){const r=[],n=[],o=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);for(let a=0;a<o.length;++a){const i=o[a],s=Array.isArray(e)?e[a].tensor:e[i];if("float32"!==s.dtype&&"int32"!==s.dtype&&"bool"!==s.dtype&&"string"!==s.dtype&&"complex64"!==s.dtype)throw new Error(`Unsupported dtype in weight '${i}': ${s.dtype}`);const p={name:i,shape:s.shape,dtype:s.dtype};if("string"===s.dtype){const e=new Promise((async e=>{const t=await s.bytes(),r=t.reduce(((e,t)=>e+t.length),0)+wi*t.length,n=new Uint8Array(r);let o=0;for(let e=0;e<t.length;e++){const r=t[e],a=new Uint8Array(new Uint32Array([r.length]).buffer);n.set(a,o),o+=wi,n.set(r,o),o+=r.length}e(n)}));n.push(e)}else n.push(s.data());null!=t&&(p.group=t),r.push(p)}return{data:Ti(await Promise.all(n)),specs:r}},fromMemory:function(e,t,r,n){return new hs(fs(...arguments))},fromMemorySync:fs,getLoadHandlers:(e,t)=>Bi.getLoadHandlers(e,t),getModelArtifactsForJSON:Ri,getModelArtifactsForJSONSync:Mi,getModelArtifactsInfoForJSON:Ci,getSaveHandlers:e=>Bi.getSaveHandlers(e),getWeightSpecs:Ii,http:ds,isHTTPScheme:ls,loadWeights:async function(e,t="",r,n){return ss((e=>is(e,{requestInit:n})))(e,t,r)},registerLoadRouter:e=>Bi.registerLoadRouter(e),registerSaveRouter:e=>Bi.registerSaveRouter(e),weightsLoaderFactory:ss,withSaveHandler:function(e){return new gs(e)},withSaveHandlerSync:function(e){return new gs(e)},copyModel:async function(e,t){return _s(e,t,!1)},listModels:async function(){const e=ys.getSchemes(),t={};for(const r of e){const e=await ys.getManager(r).listModels();for(const n in e)t[r+ms+n]=e[n]}return t},moveModel:async function(e,t){return _s(e,t,!0)},removeModel:async function(e){const t=bs(e);return ys.getManager(t.scheme).removeModel(t.path)}});const ws=mi({cast_:function(e,t){const r=gi(e,"x","cast");if(!function(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}(t))throw new Error(`Failed to cast to unknown dtype ${t}`);if("string"===t&&"string"!==r.dtype||"string"!==t&&"string"===r.dtype)throw new Error("Only strings can be casted to strings");const n={x:r},o={dtype:t};return pa.runKernel(Ht,n,o)}}),ks=mi({matMul_:function(e,t,r=!1,n=!1){let o=gi(e,"a","matMul"),a=gi(t,"b","matMul");[o,a]=ta(o,a);const i={a:o,b:a},s={transposeA:r,transposeB:n};return pa.runKernel(Ut,i,s)}}),Ts=mi({oneHot_:function(e,t,r=1,n=0,o="int32"){if(t<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${t}`);const a={indices:gi(e,"indices","oneHot","int32")},i={dtype:o,depth:t,onValue:r,offValue:n};return pa.runKernel(Pr,a,i)}});function Os(){return pa}function xs(e,t){return pa.tidy(e,t)}function Ss(e){ra(e).forEach((e=>e.dispose()))}function Es(e){return pa.keep(e)}function Fs(e){return pa.setBackend(e)}function Ms(){return pa.backendName}function Rs(e,t,r=1){return pa.registerBackend(e,t,r)}const Cs=mi({imag_:function(e){const t={input:gi(e,"input","imag")};return pa.runKernel("Imag",t)}}),Is=mi({neg_:function(e){const t={x:gi(e,"x","neg")};return pa.runKernel("Neg",t)}}),As=mi({real_:function(e){const t={input:gi(e,"input","real")};return pa.runKernel("Real",t)}}),Bs=mi({transpose_:function(e,t,r){const n=gi(e,"x","transpose");if(null==t&&(t=n.shape.map(((e,t)=>t)).reverse()),et(n.rank===t.length,(()=>`Error in transpose: rank of input ${n.rank} must match length of perm ${t}.`)),t.forEach((e=>{et(e>=0&&e<n.rank,(()=>"All entries in 'perm' must be between 0 and "+(n.rank-1)+` but got ${t}`))})),n.rank<=1)return n.clone();const o={x:n},a={perm:t};return"complex64"===n.dtype?xs((()=>{let e=As(n),t=Cs(n);return e=pa.runKernel(Tn,{x:e},a),t=pa.runKernel(Tn,{x:t},a),r&&(t=Is(t)),yi(e,t)})):pa.runKernel(Tn,o,a)}});function Ds(e,t){const r=e.length,n=[];for(let o=0;o<r;o++){const a=r-1-o,i=e[a]||1;(t[t.length-1-o]||1)>1&&1===i&&n.unshift(a)}return n}function Ls(e,t){const r=[];for(let n=0;n<t.length;n++){const o=e[e.length-n-1],a=t.length-n-1,i=t[a];(null==o||1===o&&i>1)&&r.unshift(a)}return r}function Ns(e,t){const r=[],n=Math.max(e.length,t.length);for(let o=0;o<n;o++){let n=e[e.length-o-1];null==n&&(n=1);let a=t[t.length-o-1];if(null==a&&(a=1),1===n)r.unshift(a);else if(1===a)r.unshift(n);else{if(n!==a)throw Error(`Operands could not be broadcast together with shapes ${e} and ${t}.`);r.unshift(n)}}return r}function Ps(e,t,r){if(rt(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");const n=ui(e,r);if(3!==n.length&&1!==n.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===n.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return bi(e,t,n,r)}let js;const Gs=mi({fromPixels_:function(e,t=3){if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let r=!1,n=!1,o=!1,a=!1,i=!1,s=!1;if(e.data instanceof Uint8Array)r=!0;else if("undefined"!=typeof ImageData&&e instanceof ImageData)n=!0;else if("undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement)o=!0;else if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement)a=!0;else if(null!=e.getContext)i=!0;else{if(!("undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap))throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${e.constructor.name}`);s=!0}if(null!=Dn(En,pa.backendName)){const r={pixels:e},n={numChannels:t};return pa.runKernel(En,r,n)}const[p,l]=o?[e.videoWidth,e.videoHeight]:[e.width,e.height];let u,d;if(i)u=e.getContext("2d").getImageData(0,0,p,l).data;else if(n||r)u=e.data;else if(a||o||s){if(null==js)if("undefined"==typeof document){if("undefined"==typeof OffscreenCanvas||"undefined"==typeof OffscreenCanvasRenderingContext2D)throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");js=new OffscreenCanvas(1,1).getContext("2d")}else js=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});js.canvas.width=p,js.canvas.height=l,js.drawImage(e,0,0,p,l),u=js.getImageData(0,0,p,l).data}if(4===t)d=new Int32Array(u);else{const e=p*l;d=new Int32Array(e*t);for(let r=0;r<e;r++)for(let e=0;e<t;++e)d[r*t+e]=u[4*r+e]}return Ps(d,[l,p,t],"int32")}});function Ws(e,t){const r=e.shape.length,n=t.shape.length;if(r<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${r}.`);if(n<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${n}.`);if("int32"!==t.dtype)throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.shape[n-1]>r)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${t.shape[n-1]} vs. ${r}`);if(0===nt(e.shape))throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${e.shape}.`);const o=t.shape,a=o[o.length-1];let i=1;for(let e=0;e<o.length-1;++e)i*=o[e];const s=e.shape,p=o.slice();p.pop();let l=1;for(let e=a;e<r;++e)l*=s[e],p.push(s[e]);const u=[...vt(e.shape).map((e=>e/l)),1].slice(0,a);return[p,i,l,u]}function zs(e,t,r){const n=t.rank>1?t.shape[t.rank-1]:1,o=t.rank>1?t.rank-1:1,a=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${r.shape}, indices.shape: ${t.shape}, shape: ${e}, sliceDim: ${n}, and batchDim: ${o}.`;if(r.rank<o)throw new Error(a+` update.rank < ${o}. `);if(e.length<n+(r.rank-o))throw new Error(a+` Output shape length < ${n+(r.rank-o)}`);if(r.rank!==o+e.length-n)throw new Error(a+" update.rank != "+(o+e.length-n));for(let e=0;e<o;++e)if(r.shape[e]!==t.shape[e])throw new Error(a+` updates.shape[${e}] (${r.shape[e]}) != indices.shape[${e}] (${t.shape[e]}).`);for(let t=0;t<r.rank-o;++t)if(r.shape[t+o]!==e[t+n])throw new Error(a+` updates.shape[${t+o}] (${r.shape[t+o]}) != shape[${t+o}] (${e[t+o]})`)}function Us(e,t,r){if(t.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${e.rank}.`);if("int32"!==t.dtype)throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${t.dtype}`);if(r.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${r}`);if(0===r.length){if(0===t.size)throw new Error(`Indices specified for empty output. indices shape: ${t.shape}`);if(0===e.size)throw new Error(`Updates specified for empty output. updates shape: ${e.shape}`)}zs(r,t,e)}function $s(e,t,r){const n=t.shape.length,o=n>1?t.shape[n-1]:1,a=r.length;let i=1;for(let e=o;e<a;++e)i*=r[e];const s=o<1?1:o;return{sliceRank:o,numUpdates:nt(t.shape)/s,sliceSize:i,strides:[...vt(r.slice(0,o)),1],outputSize:nt(r)}}function Hs(e,t,r){const n=e.shape.length;et(n===t.length,(()=>`Error in slice${n}D: Length of begin ${t} must match the rank of the array (${n}).`)),et(n===r.length,(()=>`Error in slice${n}D: Length of size ${r} must match the rank of the array (${n}).`));for(let o=0;o<n;++o)et(t[o]+r[o]<=e.shape[o],(()=>`Error in slice${n}D: begin[${o}] + size[${o}] (${t[o]+r[o]}) would overflow input.shape[${o}] (${e.shape[o]})`))}function Vs(e,t,r){const n=[];for(let o=0;o<e.length;o++)n[o]=Math.ceil((t[o]-e[o])/r[o]);return n}function Ks(e,t,r,n){const o=[...e];for(let e=o.length;e<n.length;e++)o.push(1);for(let e=0;e<r;e++)0===e?o[t]=1:(o.splice(t,0,1),o.pop());return o}function Ys(e,t,r){return r<=e?r:r-(t-1)}function Xs(e,t){const r=[];for(let n=0;n<e;n++)r.push(t+n);return r}function qs(e,t,r,n,o){const a=[...o],i=Xs(r,t);for(let o=0;o<a.length;o++)if(i.indexOf(o)>-1)a[o]=0;else{const i=Ys(t,r,o);let s=n[i];e&1<<i&&(s=0),a[o]=s}return a}function Js(e,t,r,n,o){const a=[...o],i=Xs(r,t);for(let o=0;o<a.length;o++)if(i.indexOf(o)>-1)a[o]=Number.MAX_SAFE_INTEGER;else{const i=Ys(t,r,o);let s=n[i];e&1<<i&&(s=Number.MAX_SAFE_INTEGER),a[o]=s}for(let e=0;e<a.length;e++){const t=o[e];a[e]<0&&(a[e]+=t),a[e]=Je(0,a[e],o[e])}return a}function Qs(e,t,r){let n=e[t];return(r&1<<t||null==n)&&(n=1),n}function Zs(e,t,r,n,o,a){let i=t[o];const s=r[o]||1;(e&1<<o||a&1<<o||null==i)&&(i=s>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);const p=n[o];return i<0&&(i+=p),i=Je(0,i,p-1),i}function ep(e,t,r,n,o,a){let i=t[o];const s=r[o]||1;(e&1<<o||a&1<<o||null==i)&&(i=s>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);const p=n[o];return i<0&&(i+=p),i=s>0?Je(0,i,p):Je(-1,i,p-1),i}function tp(e,t,r){let n=r.length;for(let e=0;e<r.length;e++)if(r[e]>1){n=e;break}for(let o=n+1;o<r.length;o++)if(t[o]>0||r[o]!==e[o])return!1;return!0}function rp(e,t){let r=e.length>0?e[e.length-1]:1;for(let n=0;n<e.length-1;n++)r+=e[n]*t[n];return r}function np(e,t,r){let n;const o=e.shape.length;let a;return n="number"==typeof t?[t,...new Array(o-1).fill(0)]:t.length<o?t.concat(new Array(o-t.length).fill(0)):t.slice(),n.forEach((e=>{et(-1!==e,(()=>"slice() does not support negative begin indexing."))})),a=null==r?new Array(o).fill(-1):"number"==typeof r?[r,...new Array(o-1).fill(-1)]:r.length<o?r.concat(new Array(o-r.length).fill(-1)):r,a=a.map(((t,r)=>t>=0?t:(et(-1===t,(()=>`Negative size values should be exactly -1 but got ${t} for the slice() size at index ${r}.`)),e.shape[r]-n[r]))),[n,a]}function op(e,t,r,n,o,a,i,s,p){let l;if(null==n?(l=new Array(t.length),l.fill(1)):l=n,null!=i&&0!=(i&i-1))throw new Error("Multiple ellipses in slice is not allowed.");let u=!1;const d={dims:l.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:r.slice(),strides:l.slice(),beginMask:o,endMask:a,ellipsisMask:i,newAxisMask:s,shrinkAxisMask:p};for(let e=0;e<d.dims;e++)u&&0!=(1<<e&s)&&d.numAddAxisAfterEllipsis++,1<<e&i&&(u=!0);u||(d.ellipsisMask|=1<<d.dims,d.dims++);const c={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;let r=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(let n=0;n<e.dims;n++)if(1<<n&e.ellipsisMask){const o=Math.min(t.dims-(e.dims-n)+1+e.numAddAxisAfterEllipsis,t.dims);for(;r<o;r++)t.begin[r]=0,t.end[r]=0,t.strides[r]=1,t.beginMask|=1<<r,t.endMask|=1<<r,t.finalShapeGatherIndices.push(r),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[r]=n}else if(1<<n&e.newAxisMask)t.finalShapeGatherIndices.push(-2),t.finalShapeGatherIndicesSparse.push(-1);else{if(r===t.begin.length)throw Error(`Index out of range using input dim ${r}; input has only ${t.dims} dims, ${t.begin.length}.`);null!=e.begin&&(t.begin[r]=e.begin[n]),null!=e.end&&(t.end[r]=e.end[n]),t.strides[r]=e.strides[n],e.beginMask&1<<n&&(t.beginMask|=1<<r),e.endMask&1<<n&&(t.endMask|=1<<r),e.shrinkAxisMask&1<<n?(t.finalShapeGatherIndices.push(-1),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<r):(t.finalShapeGatherIndices.push(r),t.finalShapeGatherIndicesSparse.push(n)),t.inputShapeGatherIndicesSparse[r]=n,r++}}(d,c);let g=!0,h=!0,f=!0;const m=[],y=[];for(let t=0;t<e.length;++t){if(0===c.strides[t])throw Error(`strides[${t}] must be non-zero`);const r=!!(c.shrinkAxisMask&1<<t),n=e[t];if(-1===n){m.push(r?1:-1);continue}const o=[c.beginMask&1<<t,c.endMask&1<<t],a=[c.strides[t]>0?0:-1,c.strides[t]>0?n:n-1];if(r&&c.strides[t]<=0)throw Error("only stride 1 allowed on non-range indexing.");f=f&&1===c.strides[t];const i=!!(c.beginMask&1<<t&&c.endMask&1<<t);if(c.beginValid&&c.endValid){if(r){const e=c.begin[t]<0?n+c.begin[t]:c.begin[t];if(c.begin[t]=e,c.end[t]=c.begin[t]+1,e<0||e>=n)throw Error(`slice index ${c.begin[t]} of dimension ${t} out of bounds.`)}else c.begin[t]=ap(c.begin[t],0,c.strides[t],n,o,a),c.end[t]=ap(c.end[t],1,c.strides[t],n,o,a);const e=1===c.strides[t]&&0===c.begin[t]&&c.end[t]===n;g=g&&e,h=h&&(0===t&&1===c.strides[t]||e)}else g=g&&1===c.strides[t]&&i,h=h&&(0===t&&1===c.strides[t]||i);let s,p=!1;if(c.beginValid&&c.endValid?(s=c.end[t]-c.begin[t],p=!0):r?(s=1,p=!0):i&&n>=0&&(s=c.strides[t]<0?-n:n,p=!0),p){let e;e=0===s||s<0!=c.strides[t]<0?0:Math.trunc(s/c.strides[t])+(s%c.strides[t]!=0?1:0),m.push(e)}else m.push(-1)}for(let e=0;e<c.finalShapeGatherIndices.length;++e){const t=c.finalShapeGatherIndices[e];t>=0?y.push(m[t]):-2===t&&y.push(1)}const b=y.filter(((e,t)=>-2!==c.finalShapeGatherIndices[t]));return{finalShapeSparse:b,finalShape:y,isIdentity:g,sliceDim0:h,isSimpleSlice:f,begin:c.begin,end:c.end,strides:c.strides}}function ap(e,t,r,n,o,a){if(o[t])return r>0?a[t]:a[t+1&1];{const t=e<0?n+e:e;return t<a[0]?a[0]:t>a[1]?a[1]:t}}var ip=Object.freeze({__proto__:null,assertParamsValid:Hs,maskToAxes:function(e){const t=[];let r=0;for(;e>0;)1&e&&t.push(r),e/=2,r++;return t},computeOutShape:Vs,stridesWithElidedDims:Ks,getNormalizedAxes:function(e,t,r,n,o,a,i,s,p){const l=e.length;let u=new Array(l),d=new Array(l),c=new Array(l);if(t.length&&r>0){const p=t[0],l=r+1;u=qs(i,p,l,n,e),d=Js(s,p,l,o,e),c=Ks(a,p,l,e)}else for(let t=0;t<l;t++)u[t]=Zs(i,n,a,e,t,p),d[t]=ep(s,o,a,e,t,p),c[t]=Qs(a,t,p);return{begin:u,end:d,strides:c}},startIndicesWithElidedDims:qs,stopIndicesWithElidedDims:Js,stridesForAxis:Qs,startForAxis:Zs,stopForAxis:ep,isSliceContinous:tp,computeFlatOffset:rp,parseSliceParams:np,sliceInfo:op});const sp=mi({add_:function(e,t){let r=gi(e,"a","add"),n=gi(t,"b","add");[r,n]=ta(r,n);const o={a:r,b:n};return pa.runKernel(Nt,o)}}),pp=mi({floorDiv_:function(e,t){let r=gi(e,"a","floorDiv"),n=gi(t,"b","floorDiv");[r,n]=ta(r,n);const o={a:r,b:n};return pa.runKernel(dr,o)}}),lp=mi({div_:function(e,t){let r=gi(e,"a","div"),n=gi(t,"b","div");if([r,n]=ta(r,n),"int32"===r.dtype&&"int32"===n.dtype)return pp(r,n);const o={a:r,b:n};return pa.runKernel(nr,o,{})}}),up=mi({mul_:function(e,t){let r=gi(e,"a","mul"),n=gi(t,"b","mul");[r,n]=ta(r,n);const o={a:r,b:n};return pa.runKernel(Ir,o)}}),dp=mi({abs_:function(e){const t=gi(e,"x","abs");if("complex64"===t.dtype){const e={x:t};return pa.runKernel("ComplexAbs",e)}{const e={x:t};return pa.runKernel("Abs",e)}}}),cp=mi({acos_:function(e){const t={x:gi(e,"x","acos")};return pa.runKernel("Acos",t)}}),gp=mi({acosh_:function(e){const t={x:gi(e,"x","acosh")};return pa.runKernel("Acosh",t)}}),hp=mi({addN_:function(e){et(Array.isArray(e),(()=>"The argument passed to tf.addN() must be a list of tensors")),et(e.length>=1,(()=>`Must pass at least one tensor to tf.addN(), but got ${e.length}`));const t=e.map(((e,t)=>gi(e,`tensors${t}`,"addN"))),r=t[0];t.forEach((e=>{if(e.dtype!==r.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((e=>{if(!ot(e.shape,r.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));const n=t;return pa.runKernel(Pt,n)}}),fp=mi({all_:function(e,t=null,r=!1){const n={x:gi(e,"x","all","bool")},o={axis:t,keepDims:r};return pa.runKernel(jt,n,o)}}),mp=mi({any_:function(e,t=null,r=!1){const n={x:gi(e,"x","any","bool")},o={axis:t,keepDims:r};return pa.runKernel(Gt,n,o)}}),yp=mi({argMax_:function(e,t=0){const r={x:gi(e,"x","argMax")},n={axis:t};return pa.runKernel(Wt,r,n)}}),bp=mi({argMin_:function(e,t=0){const r={x:gi(e,"x","argMin")},n={axis:t};return pa.runKernel("ArgMin",r,n)}}),_p=mi({asin_:function(e){const t={x:gi(e,"x","asin")};return pa.runKernel("Asin",t)}}),vp=mi({asinh_:function(e){const t={x:gi(e,"x","asinh")};return pa.runKernel("Asinh",t)}}),wp=mi({atan_:function(e){const t={x:gi(e,"x","atan")};return pa.runKernel("Atan",t)}}),kp=mi({atan2_:function(e,t){let r=gi(e,"a","atan2"),n=gi(t,"b","atan2");[r,n]=ta(r,n);const o={a:r,b:n};return pa.runKernel("Atan2",o)}}),Tp=mi({atanh_:function(e){const t={x:gi(e,"x","atanh")};return pa.runKernel("Atanh",t)}});function Op(e,t,r,n,o,a,i="channelsLast"){const[s,p]=Fp(t);let l;if("channelsLast"===i)l=[s,p,e[3],e[3]];else{if("channelsFirst"!==i)throw new Error(`Unknown dataFormat ${i}`);l=[s,p,e[1],e[1]]}return xp(e,l,r,n,o,a,!1,i)}function xp(e,t,r,n,o,a,i=!1,s="channelsLast"){let[p,l,u,d]=[-1,-1,-1,-1];if("channelsLast"===s)[p,l,u,d]=e;else{if("channelsFirst"!==s)throw new Error(`Unknown dataFormat ${s}`);[p,d,l,u]=e}const[c,g,,h]=t,[f,m]=Fp(r),[y,b]=Fp(n),_=Rp(c,y),v=Rp(g,b),{padInfo:w,outHeight:k,outWidth:T}=function(e,t,r,n,o,a,i,s,p){let l,u,d;if("number"==typeof e){l={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};const o=function(e,t,r,n,o){null==n&&(n=Ep(e,t,r));const a=e[1];return[Cp((e[0]-t+2*n)/r+1,o),Cp((a-t+2*n)/r+1,o)]}([t,r],a,n,e,s);u=o[0],d=o[1]}else if("same"===e){u=Math.ceil(t/n),d=Math.ceil(r/o);const e=Math.max(0,(u-1)*n+a-t),s=Math.max(0,(d-1)*o+i-r),p=Math.floor(e/2),c=e-p,g=Math.floor(s/2);l={top:p,bottom:c,left:g,right:s-g,type:"SAME"}}else if("valid"===e)l={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((t-a+1)/n),d=Math.ceil((r-i+1)/o);else{if("object"!=typeof e)throw Error(`Unknown padding parameter: ${e}`);{const c="channelsLast"===p?e[1][0]:e[2][0],g="channelsLast"===p?e[1][1]:e[2][1],h="channelsLast"===p?e[2][0]:e[3][0],f="channelsLast"===p?e[2][1]:e[3][1];l={top:c,bottom:g,left:h,right:f,type:0===c&&0===g&&0===h&&0===f?"VALID":"EXPLICIT"},u=Cp((t-a+c+g)/n+1,s),d=Cp((r-i+h+f)/o+1,s)}}return{padInfo:l,outHeight:u,outWidth:d}}(o,l,u,f,m,_,v,a,s),O=i?h*d:h;let x;return"channelsFirst"===s?x=[p,O,k,T]:"channelsLast"===s&&(x=[p,k,T,O]),{batchSize:p,dataFormat:s,inHeight:l,inWidth:u,inChannels:d,outHeight:k,outWidth:T,outChannels:O,padInfo:w,strideHeight:f,strideWidth:m,filterHeight:c,filterWidth:g,effectiveFilterHeight:_,effectiveFilterWidth:v,dilationHeight:y,dilationWidth:b,inShape:e,outShape:x,filterShape:t}}function Sp(e,t,r,n,o,a=!1,i="channelsLast",s){let[p,l,u,d,c]=[-1,-1,-1,-1,-1];if("channelsLast"===i)[p,l,u,d,c]=e;else{if("channelsFirst"!==i)throw new Error(`Unknown dataFormat ${i}`);[p,c,l,u,d]=e}const[g,h,f,,m]=t,[y,b,_]=Mp(r),[v,w,k]=Mp(n),T=Rp(g,v),O=Rp(h,w),x=Rp(f,k),{padInfo:S,outDepth:E,outHeight:F,outWidth:M}=function(e,t,r,n,o,a,i,s,p,l,u){let d,c,g,h;if("valid"===e&&(e=0),"number"==typeof e){d={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};const f=function(e,t,r,n,o,a){null==o&&(o=Ep(e,t[0],n[0]));const i=[0,0,0,1];for(let r=0;r<3;r++)e[r]+2*o>=t[r]&&(i[r]=Cp((e[r]-t[r]+2*o)/n[r]+1,a));return i}([t,r,n,1],[s,p,l],0,[o,a,i],e,u);c=f[0],g=f[1],h=f[2]}else{if("same"!==e)throw Error(`Unknown padding parameter: ${e}`);{c=Math.ceil(t/o),g=Math.ceil(r/a),h=Math.ceil(n/i);const e=(c-1)*o+s-t,u=(g-1)*a+p-r,f=(h-1)*i+l-n,m=Math.floor(e/2),y=e-m,b=Math.floor(u/2),_=u-b,v=Math.floor(f/2);d={top:b,bottom:_,left:v,right:f-v,front:m,back:y,type:"SAME"}}}return{padInfo:d,outDepth:c,outHeight:g,outWidth:h}}(o,l,u,d,y,b,_,T,O,x,s),R=a?m*c:m;let C;return"channelsFirst"===i?C=[p,R,E,F,M]:"channelsLast"===i&&(C=[p,E,F,M,R]),{batchSize:p,dataFormat:i,inDepth:l,inHeight:u,inWidth:d,inChannels:c,outDepth:E,outHeight:F,outWidth:M,outChannels:R,padInfo:S,strideDepth:y,strideHeight:b,strideWidth:_,filterDepth:g,filterHeight:h,filterWidth:f,effectiveFilterDepth:T,effectiveFilterHeight:O,effectiveFilterWidth:x,dilationDepth:v,dilationHeight:w,dilationWidth:k,inShape:e,outShape:C,filterShape:t}}function Ep(e,t,r,n=1){const o=Rp(t,n);return Math.floor((e[0]*(r-1)-r+o)/2)}function Fp(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function Mp(e){return"number"==typeof e?[e,e,e]:e}function Rp(e,t){return t<=1?e:e+(e-1)*(t-1)}function Cp(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error(`Unknown roundingMode ${t}`)}}function Ip(e){const[t,r,n]=Fp(e);return 1===t&&1===r&&1===n}function Ap(e,t){return Ip(e)||Ip(t)}function Bp(e){return Fp(e).every((e=>e>0))}function Dp(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error(`Unknown dataFormat ${e}`)}function Lp(e,t,r){if(null!=r){if("string"==typeof t)throw Error(`Error in ${e}: pad must be an integer when using dimRoundingMode ${r} but got pad ${t}.`);if("number"==typeof t)et(at(t),(()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${r} but got pad ${t}.`));else{if("object"!=typeof t)throw Error(`Error in ${e}: Unknown padding parameter: ${t}`);t.forEach((t=>{t.forEach((t=>{et(at(t),(()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${r} but got pad ${t}.`))}))}))}}}const Np=mi({reshape_:function(e,t){const r={x:gi(e,"x","reshape","string_or_numeric")},n={shape:t};return pa.runKernel(Vr,r,n)}}),Pp=mi({avgPool_:function(e,t,r,n,o){const a=gi(e,"x","avgPool","float32");et(Ap(r,1),(()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${r} and dilations '1'`));let i=a,s=!1;3===a.rank&&(s=!0,i=Np(a,[1,a.shape[0],a.shape[1],a.shape[2]])),et(4===i.rank,(()=>`Error in avgPool: x must be rank 4 but got rank ${i.rank}.`)),Lp("avgPool",n,o);const p={x:i},l={filterSize:t,strides:r,pad:n,dimRoundingMode:o};let u=pa.runKernel(zt,p,l);return u=ws(u,a.dtype),s?Np(u,[u.shape[1],u.shape[2],u.shape[3]]):u}}),jp=mi({avgPool3d_:function(e,t,r,n,o,a="NDHWC"){const i=gi(e,"x","avgPool3d","float32");let s=i,p=!1;4===i.rank&&(p=!0,s=Np(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),et(5===s.rank,(()=>`Error in avgPool3d: x must be rank 5 but got rank ${s.rank}.`)),et("NDHWC"===a,(()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${a}`)),et("number"==typeof r&&r>0||Array.isArray(r)&&r[0]>0&&r[1]>0&&r[2]>0,(()=>`Error in avgPool3d: Stride must be > 0, but got '${r}'`)),Lp("avgPool3d",n,o);const l={x:s},u={filterSize:t,strides:r,pad:n,dimRoundingMode:o,dataFormat:a};let d=pa.runKernel("AvgPool3D",l,u);return d=ws(d,s.dtype),p?Np(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}}),Gp=mi({clone_:function(e){const t={x:gi(e,"x","clone","string_or_numeric")};return pa.runKernel(yr,t)}}),Wp=mi({concat_:function(e,t=0){et(e.length>=1,(()=>"Pass at least one tensor to concat"));const r=hi(e,"tensors","concat","string_or_numeric");if("complex64"===r[0].dtype&&r.forEach((e=>{if("complex64"!==e.dtype)throw new Error(`Cannot concatenate complex64 tensors with a tensor\n          with dtype ${e.dtype}. `)})),1===r.length)return Gp(r[0]);const n=r,o={axis:t};return pa.runKernel(Yt,n,o)}}),zp=mi({sigmoid_:function(e){const t={x:gi(e,"x","sigmoid","float32")};return pa.runKernel(rn,t)}}),Up=mi({slice_:function(e,t,r){const n=gi(e,"x","slice","string_or_numeric");if(0===n.rank)throw new Error("Slicing scalar is not possible");const o={x:n},a={begin:t,size:r};return pa.runKernel(tn,o,a)}}),$p=mi({tanh_:function(e){const t={x:gi(e,"x","tanh","float32")};return pa.runKernel(_n,t)}}),Hp=mi({basicLSTMCell_:function(e,t,r,n,o,a){const i=gi(e,"forgetBias","basicLSTMCell"),s=gi(t,"lstmKernel","basicLSTMCell"),p=gi(r,"lstmBias","basicLSTMCell"),l=gi(n,"data","basicLSTMCell"),u=gi(o,"c","basicLSTMCell"),d=gi(a,"h","basicLSTMCell"),c=Wp([l,d],1),g=ks(c,s),h=sp(g,p),f=h.shape[0],m=h.shape[1]/4,y=[f,m],b=Up(h,[0,0],y),_=Up(h,[0,m],y),v=Up(h,[0,2*m],y),w=Up(h,[0,3*m],y),k=sp(up(zp(b),$p(_)),up(u,zp(sp(i,v))));return[k,up($p(k),zp(w))]}}),Vp=mi({batchToSpaceND_:function(e,t,r){const n=gi(e,"x","batchToSpaceND"),o=t.reduce(((e,t)=>e*t));et(n.rank>=1+t.length,(()=>`input rank is ${n.rank} but should be > than blockShape.length ${t.length}`)),et(r.length===t.length,(()=>`crops.length is ${r.length} but should be equal to blockShape.length  ${t.length}`)),et(n.shape[0]%o==0,(()=>`input tensor batch is ${n.shape[0]} but is not divisible by the product of the elements of blockShape ${t.join(" * ")} === ${o}`));const a={x:n},i={blockShape:t,crops:r};return pa.runKernel($t,a,i)}}),Kp=mi({batchNorm_:function(e,t,r,n,o,a){null==a&&(a=.001);const i=gi(e,"x","batchNorm"),s=gi(t,"mean","batchNorm"),p=gi(r,"variance","batchNorm");let l,u;null!=o&&(l=gi(o,"scale","batchNorm")),null!=n&&(u=gi(n,"offset","batchNorm")),et(s.rank===p.rank,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),et(null==u||s.rank===u.rank,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),et(null==l||s.rank===l.rank,(()=>"Batch normalization gradient requires mean and scale to have equal ranks."));const d=function(e){let t;return t=0===e.rank||1===e.rank?Np(e,[1,1,1,e.size]):2===e.rank?Np(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?Np(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e,t}(i),c={x:d,scale:l,offset:u,mean:s,variance:p},g={varianceEpsilon:a},h=pa.runKernel(cr,c,g);return Np(h,i.shape)}}),Yp=mi({batchNorm2d_:function(e,t,r,n,o,a){const i=gi(e,"x","batchNorm"),s=gi(t,"mean","batchNorm"),p=gi(r,"variance","batchNorm");let l,u;return null!=o&&(l=gi(o,"scale","batchNorm")),null!=n&&(u=gi(n,"offset","batchNorm")),et(2===i.rank,(()=>`Error in batchNorm2D: x must be rank 2 but got rank ${i.rank}.`)),et(2===s.rank||1===s.rank,(()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${s.rank}.`)),et(2===p.rank||1===p.rank,(()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${p.rank}.`)),null!=l&&et(2===l.rank||1===l.rank,(()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${l.rank}.`)),null!=u&&et(2===u.rank||1===u.rank,(()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${u.rank}.`)),Kp(i,s,p,u,l,a)}}),Xp=mi({batchNorm3d_:function(e,t,r,n,o,a){const i=gi(e,"x","batchNorm"),s=gi(t,"mean","batchNorm"),p=gi(r,"variance","batchNorm");let l,u;return null!=o&&(l=gi(o,"scale","batchNorm")),null!=n&&(u=gi(n,"offset","batchNorm")),et(3===i.rank,(()=>`Error in batchNorm3D: x must be rank 3 but got rank ${i.rank}.`)),et(3===s.rank||1===s.rank,(()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${s.rank}.`)),et(3===p.rank||1===p.rank,(()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${p.rank}.`)),null!=l&&et(3===l.rank||1===l.rank,(()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${l.rank}.`)),null!=u&&et(3===u.rank||1===u.rank,(()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${u.rank}.`)),Kp(i,s,p,u,l,a)}}),qp=mi({batchNorm4d_:function(e,t,r,n,o,a){const i=gi(e,"x","batchNorm"),s=gi(t,"mean","batchNorm"),p=gi(r,"variance","batchNorm");let l,u;return null!=o&&(l=gi(o,"scale","batchNorm")),null!=n&&(u=gi(n,"offset","batchNorm")),et(4===i.rank,(()=>`Error in batchNorm4D: x must be rank 4 but got rank ${i.rank}.`)),et(4===s.rank||1===s.rank,(()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${s.rank}.`)),et(4===p.rank||1===p.rank,(()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${p.rank}.`)),null!=l&&et(4===l.rank||1===l.rank,(()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${l.rank}.`)),null!=u&&et(4===u.rank||1===u.rank,(()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${u.rank}.`)),Kp(i,s,p,u,l,a)}}),Jp=mi({bincount_:function(e,t,r){const n=gi(e,"x","bincount"),o=gi(t,"weights","bincount");et("int32"===n.dtype,(()=>`Error in bincount: input dtype must be int32, but got ${n.dtype}`)),et(r>=0,(()=>`size must be non-negative, but got ${r}.`)),et(o.size===n.size||0===o.size,(()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${n.shape}, weights shape: ${o.shape}.`));const a={x:n,weights:o},i={size:r};return pa.runKernel("Bincount",a,i)}}),Qp=mi({broadcastArgs_:function(e,t){const r=gi(e,"s0","broadcastArgs","int32"),n=gi(t,"s1","broadcastArgs","int32");if(1!==r.rank)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${r.rank}`);if(1!==n.rank)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${n.rank}`);const o={s0:r,s1:n};return pa.runKernel("BroadcastArgs",o)}}),Zp=mi({broadcastTo_:function(e,t){let r=gi(e,"broadcastTo","x");const n=r.shape;if(xt(t),t.length<r.rank)throw new Error(`broadcastTo(): shape.length=${t.length} < input.rank=${r.rank}.`);if(t.length>r.rank){const e=r.shape.slice();for(;e.length<t.length;)e.unshift(1);r=Np(r,e)}const o=r.shape,a=Array.from(t);for(let e=t.length-1;e>=0;e--)if(o[e]===t[e])a[e]=1;else if(1!==r.shape[e])throw new Error(`broadcastTo(): [${n}] cannot be broadcast to [${t}].`);const i=a.map(((e,t)=>e>1?t:-1)).filter((e=>e>=0));if(0===i.length)return Gp(r);const s={x:r},p={reps:a};return pa.runKernel(vn,s,p)}});function el(e,t="float32",r){return t=t||"float32",xt(e),new Uo(e,t,r)}const tl=mi({ceil_:function(e){const t={x:gi(e,"x","ceil","float32")};return pa.runKernel(Vt,t)}});function rl(e,t,r){xt(e);const n={shape:e,value:t,dtype:r};return pa.runKernel(pr,{},n)}const nl=mi({clipByValue_:function(e,t,r){const n=gi(e,"x","clipByValue");if(et(t<=r,(()=>`Error in clip: min (${t}) must be less than or equal to max (${r}).`)),t===r)return rl(n.shape,t,n.dtype);const o={x:n},a={clipValueMin:t,clipValueMax:r};return pa.runKernel(Kt,o,a)}}),ol=mi({concat1d_:function(e){return Wp(e,0)}}),al=mi({concat2d_:function(e,t){return Wp(e,t)}}),il=mi({concat3d_:function(e,t){return Wp(e,t)}}),sl=mi({concat4d_:function(e,t){return Wp(e,t)}}),pl=mi({conv2d_:function(e,t,r,n,o="NHWC",a=[1,1],i){const s=gi(e,"x","conv2d","float32"),p=gi(t,"filter","conv2d","float32");let l=s,u=!1;3===s.rank&&(u=!0,l=Np(s,[1,s.shape[0],s.shape[1],s.shape[2]])),et(4===l.rank,(()=>`Error in conv2d: input must be rank 4, but got rank ${l.rank}.`)),et(4===p.rank,(()=>`Error in conv2d: filter must be rank 4, but got rank ${p.rank}.`)),Lp("conv2d",n,i);const d="NHWC"===o?l.shape[3]:l.shape[1];et(d===p.shape[2],(()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${p.shape[2]}.`)),et(Ap(r,a),(()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${r} and dilations '${a}'`)),et(Bp(a),(()=>"Error in conv2D: Dilated rates should be larger than 0.")),et(Bp(r),(()=>"Error in conv2D: Strides should be larger than 0."));const c={x:l,filter:p},g={strides:r,pad:n,dataFormat:o,dilations:a,dimRoundingMode:i},h=pa.runKernel(Xt,c,g);return u?Np(h,[h.shape[1],h.shape[2],h.shape[3]]):h}}),ll=mi({conv1d_:function(e,t,r,n,o="NWC",a=1,i){const s=gi(e,"x","conv1d"),p=gi(t,"filter","conv1d");let l=s,u=!1;2===s.rank&&(u=!0,l=Np(s,[1,s.shape[0],s.shape[1]])),et(3===l.rank,(()=>`Error in conv1d: input must be rank 3, but got rank ${l.rank}.`)),et(3===p.rank,(()=>`Error in conv1d: filter must be rank 3, but got rank ${p.rank}.`)),Lp("conv1d",n,i),et(l.shape[2]===p.shape[1],(()=>`Error in conv1d: depth of input (${l.shape[2]}) must match input depth for filter ${p.shape[1]}.`)),et(Ap(r,a),(()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${r} and dilation '${a}'`)),et(Bp(a),(()=>"Error in conv1D: Dilated rates should be larger than 0.")),et(Bp(r),(()=>"Error in conv1D: Stride should be larger than 0.")),et("NWC"===o,(()=>`Error in conv1d: got dataFormat of ${o} but only NWC is currently supported.`));const d=Np(p,[1,p.shape[0],p.shape[1],p.shape[2]]),c=Np(l,[l.shape[0],1,l.shape[1],l.shape[2]]),g=pl(c,d,[1,r],n,"NHWC",[1,a],i);return Np(g,u?[g.shape[2],g.shape[3]]:[g.shape[0],g.shape[2],g.shape[3]])}}),ul=mi({conv2DBackpropInput_:function(e,t,r,n,o,a="NHWC",i){et(e.length===t.rank,(()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`));let s=e,p=t,l=!1;3===t.rank&&(l=!0,p=Np(t,[1,t.shape[0],t.shape[1],t.shape[2]]),s=[1,e[0],e[1],e[2]]),et(4===s.length,(()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${s.length}.`)),et(4===p.rank,(()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${p.rank}`)),et(4===r.rank,(()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${r.rank}`));const u="NHWC"===a?s[3]:s[1],d="NHWC"===a?p.shape[3]:p.shape[1];et(u===r.shape[2],(()=>`Error in conv2dDerInput: depth of input (${u}) must match input depth for filter ${r.shape[2]}.`)),et(d===r.shape[3],(()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${r.shape[3]}.`)),Lp("conv2dDerInput",o,i);const c={dy:p,filter:r},g={strides:n,pad:o,dataFormat:a,dimRoundingMode:i,inputShape:s},h=pa.runKernel(qt,c,g);return l?Np(h,[h.shape[1],h.shape[2],h.shape[3]]):h}}),dl=mi({conv2dTranspose_:function(e,t,r,n,o,a){const i=gi(e,"x","conv2dTranspose"),s=gi(t,"filter","conv2dTranspose");return ul(r,i,s,n,o,"NHWC",a)}}),cl=mi({conv3d_:function(e,t,r,n,o="NDHWC",a=[1,1,1]){const i=gi(e,"x","conv3d"),s=gi(t,"filter","conv3d");let p=i,l=!1;4===i.rank&&(l=!0,p=Np(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),et(5===p.rank,(()=>`Error in conv3d: input must be rank 5, but got rank ${p.rank}.`)),et(5===s.rank,(()=>`Error in conv3d: filter must be rank 5, but got rank ${s.rank}.`)),et(p.shape[4]===s.shape[3],(()=>`Error in conv3d: depth of input (${p.shape[4]}) must match input depth for filter ${s.shape[3]}.`)),et(Ap(r,a),(()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${r} and dilations '${a}'`)),et("NDHWC"===o,(()=>`Error in conv3d: got dataFormat of ${o} but only NDHWC is currently supported.`)),et(Bp(a),(()=>"Error in conv3D: Dilated rates should be larger than 0.")),et(Bp(r),(()=>"Error in conv3D: Strides should be larger than 0."));const u={x:p,filter:s},d={strides:r,pad:n,dataFormat:o,dilations:a},c=pa.runKernel("Conv3D",u,d);return l?Np(c,[c.shape[1],c.shape[2],c.shape[3],c.shape[4]]):c}}),gl=mi({conv3DBackpropInput_:function(e,t,r,n,o){et(e.length===t.rank,(()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`));let a=e,i=t,s=!1;4===t.rank&&(s=!0,i=Np(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),a=[1,e[0],e[1],e[2],e[3]]);const p=a[4],l=i.shape[4];et(5===a.length,(()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${a.length}.`)),et(5===i.rank,(()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${i.rank}`)),et(5===r.rank,(()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${r.rank}`)),et(p===r.shape[3],(()=>`Error in conv3dDerInput: depth of input (${p}) must match input depth for filter ${r.shape[3]}.`)),et(l===r.shape[4],(()=>`Error in conv3dDerInput: depth of output (${l}) must match output depth for filter ${r.shape[4]}.`));const u={dy:i,filter:r},d={pad:o,strides:n,inputShape:a},c=pa.runKernel("Conv3DBackpropInputV2",u,d);return s?Np(c,[c.shape[1],c.shape[2],c.shape[3],c.shape[4]]):c}}),hl=mi({conv3dTranspose_:function(e,t,r,n,o){const a=gi(e,"x","conv3dTranspose"),i=gi(t,"filter","conv3dTranspose");return gl(r,a,i,n,o)}}),fl=mi({cos_:function(e){const t={x:gi(e,"x","cos","float32")};return pa.runKernel("Cos",t)}}),ml=mi({cosh_:function(e){const t={x:gi(e,"x","cosh","float32")};return pa.runKernel(Jt,t)}}),yl=mi({cumprod_:function(e,t=0,r=!1,n=!1){const o={x:gi(e,"x","cumprod")},a={axis:t,exclusive:r,reverse:n};return pa.runKernel(Qt,o,a)}}),bl=mi({cumsum_:function(e,t=0,r=!1,n=!1){const o={x:gi(e,"x","cumsum")},a={axis:t,exclusive:r,reverse:n};return pa.runKernel(Zt,o,a)}}),_l=mi({denseBincount_:function(e,t,r,n=!1){const o=gi(e,"x","denseBincount"),a=gi(t,"weights","denseBincount");et("int32"===o.dtype,(()=>`Error in denseBincount: input dtype must be int32, but got ${o.dtype}`)),et(o.rank<=2,(()=>`Error in denseBincount: input must be at most rank 2, but got rank ${o.rank}.`)),et(r>=0,(()=>`size must be non-negative, but got ${r}.`)),et(a.size===o.size||0===a.size,(()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${o.shape}, weights shape: ${a.shape}.`));const i={x:o,weights:a},s={size:r,binaryOutput:n};return pa.runKernel("DenseBincount",i,s)}}),vl=mi({depthToSpace_:function(e,t,r="NHWC"){const n=gi(e,"x","depthToSpace","float32"),o="NHWC"===r?n.shape[1]:n.shape[2],a="NHWC"===r?n.shape[2]:n.shape[3],i="NHWC"===r?n.shape[3]:n.shape[1];et(t>1,(()=>`blockSize should be > 1 for depthToSpace, but was: ${t}`)),et(o*t>=0,(()=>`Negative dimension size caused by overflow when multiplying\n    ${o} and ${t}  for depthToSpace with input shape\n    ${n.shape}`)),et(a*t>=0,(()=>`Negative dimension size caused by overflow when multiplying\n    ${a} and ${t} for depthToSpace with input shape\n        ${n.shape}`)),et(i%(t*t)==0,(()=>`Dimension size must be evenly divisible by ${t*t} but is ${i} for depthToSpace with input shape ${n.shape}`));const s={x:n},p={blockSize:t,dataFormat:r};return pa.runKernel(tr,s,p)}}),wl=mi({depthwiseConv2d_:function(e,t,r,n,o="NHWC",a=[1,1],i){const s=gi(e,"x","depthwiseConv2d","float32"),p=gi(t,"filter","depthwiseConv2d","float32");let l=s,u=!1;3===s.rank&&(u=!0,l=Np(s,[1,s.shape[0],s.shape[1],s.shape[2]])),et(4===l.rank,(()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${l.rank}.`)),et(4===p.rank,(()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${p.rank}.`));const d="NHWC"===o?l.shape[3]:l.shape[1];et(d===p.shape[2],(()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${p.shape[2]}.`)),Lp("depthwiseConv2d",n,i);const c={x:l,filter:p},g={strides:r,pad:n,dataFormat:o,dilations:a,dimRoundingMode:i},h=pa.runKernel(rr,c,g);return u?Np(h,[h.shape[1],h.shape[2],h.shape[3]]):h}}),kl=mi({diag_:function(e){const t={x:gi(e,"x","diag")};return pa.runKernel("Diag",t)}}),Tl=mi({dilation2d_:function(e,t,r,n,o=[1,1],a="NHWC"){const i=gi(e,"x","dilation2d"),s=gi(t,"filter","dilation2d");et(3===i.rank||4===i.rank,(()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${i.rank}.`)),et(3===s.rank,(()=>`Error in dilation2d: filter must be rank 3, but got rank ${s.rank}.`)),et("NHWC"===a,(()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${a}`));let p=i,l=!1;3===i.rank&&(p=Np(i,[1,i.shape[0],i.shape[1],i.shape[2]]),l=!0),et(p.shape[3]===s.shape[2],(()=>`Error in dilation2d:  input and filter must have the same depth: ${p.shape[3]} vs ${s.shape[2]}`));const u={x:p,filter:s},d={strides:r,pad:n,dilations:o},c=pa.runKernel("Dilation2D",u,d);return l?Np(c,[c.shape[1],c.shape[2],c.shape[3]]):c}}),Ol=mi({equal_:function(e,t){let r=gi(e,"a","equal","string_or_numeric"),n=gi(t,"b","equal","string_or_numeric");[r,n]=ta(r,n),Ns(r.shape,n.shape);const o={a:r,b:n};return pa.runKernel(ar,o)}}),xl=mi({where_:function(e,t,r){const n=gi(t,"a","where"),o=gi(r,"b","where"),a=gi(e,"condition","where","bool"),i=Ns(Ns(a.shape,n.shape),o.shape),s={condition:Zp(a,i),t:Zp(n,i),e:Zp(o,i)};return pa.runKernel(en,s)}}),Sl=mi({zerosLike_:function(e){const t={x:gi(e,"x","zerosLike")};return pa.runKernel(xn,t)}}),El=mi({divNoNan_:function(e,t){let r=gi(e,"a","div"),n=gi(t,"b","div");[r,n]=ta(r,n);const o=lp(r,n),a=Sl(o),i=Ol(n,a);return xl(i,a,o)}}),Fl=mi({dot_:function(e,t){const r=gi(e,"t1","dot"),n=gi(t,"t2","dot");et(!(1!==r.rank&&2!==r.rank||1!==n.rank&&2!==n.rank),(()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${r.rank} and ${n.rank}.`));const o=1===r.rank?r.size:r.shape[1],a=1===n.rank?n.size:n.shape[0];if(et(o===a,(()=>`Error in dot: inner dimensions of inputs must match, but got ${o} and ${a}.`)),1===r.rank&&1===n.rank){const e=Np(r,[1,-1]),t=Np(n,[-1,1]),o=ks(e,t);return Np(o,[])}if(1===r.rank&&2===n.rank){const e=Np(r,[1,-1]),t=Np(n,[n.shape[0],n.shape[1]]),o=ks(e,t);return Np(o,[o.size])}if(2===r.rank&&1===n.rank){const e=Np(n,[-1,1]),t=ks(r,e);return Np(t,[t.size])}{const e=Np(n,[n.shape[0],n.shape[1]]);return ks(r,e)}}}),Ml=mi({einsum_:function(e,...t){const r=t.map(((e,t)=>gi(e,`tensors${t}`,"einsum"))),n={equation:e};return pa.runKernel("Einsum",r,n)}}),Rl=mi({elu_:function(e){const t={x:gi(e,"x","elu","float32")};return pa.runKernel(or,t)}}),Cl=mi({erf_:function(e){let t=gi(e,"x","erf");et("int32"===t.dtype||"float32"===t.dtype,(()=>"Input dtype must be `int32` or `float32`.")),"int32"===t.dtype&&(t=ws(t,"float32"));const r={x:t};return pa.runKernel("Erf",r)}});function Il(e,t){for(let r=0;r<e.length;++r)if(e[e.length-r-1]!==t-1-r)return!1;return!0}function Al(e,t,r){const n=e.length+t.length,o=[];let a=0,i=0;for(let s=0;s<n;s++)-1===r.indexOf(s)?o.push(e[a++]):o.push(t[i++]);return o}function Bl(e,t){const r=[],n=e.length;for(let o=0;o<n;o++)-1===t.indexOf(o)&&r.push(e[o]);return[r,t.map((t=>e[t]))]}function Dl(e,t){return Al(e,t.map((e=>1)),t)}function Ll(e,t,r){et(Il(t,r),(()=>`${e} supports only inner-most axes for now. Got axes ${t} and rank-${r} input.`))}function Nl(e,t){if(Il(e,t))return null;const r=[];for(let n=0;n<t;++n)-1===e.indexOf(n)&&r.push(n);return e.forEach((e=>r.push(e))),r}function Pl(e){return e.map(((e,t)=>[t,e])).sort(((e,t)=>e[1]-t[1])).map((e=>e[0]))}function jl(e,t){const r=[];for(let n=t-e;n<t;++n)r.push(n);return r}const Gl=mi({max_:function(e,t=null,r=!1){const n={x:gi(e,"x","max")},o={reductionIndices:t,keepDims:r};return pa.runKernel(xr,n,o)}}),Wl=mi({min_:function(e,t=null,r=!1){const n={x:gi(e,"x","min")},o={axis:t,keepDims:r};return pa.runKernel(Mr,n,o)}}),zl=mi({pow_:function(e,t){let r=gi(e,"base","pow"),n=gi(t,"exp","pow");[r,n]=ta(r,n);const o={a:r,b:n};return pa.runKernel("Pow",o)}});function Ul(e,t){if((Ro(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&Ro(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return bi(e,[],[],t)}const $l=mi({sqrt_:function(e){const t={x:gi(e,"x","sqrt","float32")};return pa.runKernel(nn,t)}}),Hl=mi({square_:function(e){const t=gi(e,"x","square");return pa.runKernel("Square",{x:t},{})}}),Vl=mi({sum_:function(e,t=null,r=!1){let n=gi(e,"x","sum");"bool"===n.dtype&&(n=ws(n,"int32"));const o={x:n},a={axis:t,keepDims:r};return pa.runKernel(on,o,a)}});function Kl(e,t,r=null){if(0===e.rank)return dp(e);if(1!==e.rank&&null===r)return Kl(Np(e,[-1]),t,r);if(1===e.rank||"number"==typeof r||Array.isArray(r)&&1===r.length){if(1===t)return Vl(dp(e),r);if(t===1/0)return Gl(dp(e),r);if(t===-1/0)return Wl(dp(e),r);if("euclidean"===t||2===t)return $l(Vl(zl(dp(e),Ul(2,"int32")),r));throw new Error(`Error in norm: invalid ord value: ${t}`)}if(Array.isArray(r)&&2===r.length){if(1===t)return Gl(Vl(dp(e),r[0]),r[1]-1);if(t===1/0)return Gl(Vl(dp(e),r[1]),r[0]);if(t===-1/0)return Wl(Vl(dp(e),r[1]),r[0]);if("fro"===t||"euclidean"===t)return $l(Vl(Hl(e),r));throw new Error(`Error in norm: invalid ord value: ${t}`)}throw new Error(`Error in norm: invalid axis: ${r}`)}const Yl=mi({norm_:function(e,t="euclidean",r=null,n=!1){const o=Kl(e=gi(e,"x","norm"),t,r);let a=o.shape;if(n){const t=ut(r,e.shape);a=Dl(o.shape,t)}return Np(o,a)}}),Xl=mi({euclideanNorm_:function(e,t=null,r=!1){return Yl(e,"euclidean",t,r)}}),ql=mi({exp_:function(e){const t={x:gi(e,"x","exp")};return pa.runKernel(ir,t)}}),Jl=mi({expandDims_:function(e,t=0){const r=gi(e,"x","expandDims","string_or_numeric");et(t<=r.rank,(()=>"Axis must be <= rank of the tensor"));const n={input:r},o={dim:t};return pa.runKernel(sr,n,o)}}),Ql=mi({expm1_:function(e){const t={x:gi(e,"x","expm1")};return pa.runKernel("Expm1",t)}}),Zl=mi({tile_:function(e,t){const r=gi(e,"x","tile","string_or_numeric");et(r.rank===t.length,(()=>`Error in transpose: rank of input ${r.rank} must match length of reps ${t}.`));const n={x:r},o={reps:t};return pa.runKernel(vn,n,o)}}),eu=mi({eye_:function(e,t,r,n="float32"){null==t&&(t=e);const o=el([e,t],n),a=e<=t?e:t;for(let e=0;e<a;++e)o.set(1,e,e);const i=Np(o.toTensor(),[e,t]);if(null==r)return i;if(1===r.length)return Zl(Jl(i,0),[r[0],1,1]);if(2===r.length)return Zl(Jl(Jl(i,0),0),[r[0],r[1],1,1]);if(3===r.length)return Zl(Jl(Jl(Jl(i,0),0),0),[r[0],r[1],r[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${r.length}D.`)}}),tu=mi({floor_:function(e){const t={x:gi(e,"x","floor","float32")};return pa.runKernel(ur,t)}}),ru=mi({gather_:function(e,t,r=0,n=0){const o={x:gi(e,"x","gather"),indices:gi(t,"indices","gather","int32")},a={axis:r,batchDims:n};return pa.runKernel(gr,o,a)}}),nu=mi({greater_:function(e,t){let r=gi(e,"a","greater","string_or_numeric"),n=gi(t,"b","greater","string_or_numeric");[r,n]=ta(r,n),Ns(r.shape,n.shape);const o={a:r,b:n};return pa.runKernel(fr,o)}}),ou=mi({greaterEqual_:function(e,t){let r=gi(e,"a","greaterEqual","string_or_numeric"),n=gi(t,"b","greaterEqual","string_or_numeric");[r,n]=ta(r,n),Ns(r.shape,n.shape);const o={a:r,b:n};return pa.runKernel(mr,o)}}),au=mi({isFinite_:function(e){const t={x:gi(e,"x","isFinite")};return pa.runKernel("IsFinite",t)}}),iu=mi({isInf_:function(e){const t={x:gi(e,"x","isInf")};return pa.runKernel("IsInf",t)}}),su=mi({isNaN_:function(e){const t={x:gi(e,"x","isNaN")};return pa.runKernel(br,t)}}),pu=mi({leakyRelu_:function(e,t=.2){const r={x:gi(e,"x","leakyRelu")},n={alpha:t};return pa.runKernel(_r,r,n)}}),lu=mi({less_:function(e,t){let r=gi(e,"a","less","string_or_numeric"),n=gi(t,"b","less","string_or_numeric");[r,n]=ta(r,n),Ns(r.shape,n.shape);const o={a:r,b:n};return pa.runKernel(vr,o)}}),uu=mi({lessEqual_:function(e,t){let r=gi(e,"a","lessEqual","string_or_numeric"),n=gi(t,"b","lessEqual","string_or_numeric");[r,n]=ta(r,n),Ns(r.shape,n.shape);const o={a:r,b:n};return pa.runKernel(wr,o)}}),du=mi({localResponseNormalization_:function(e,t=5,r=1,n=1,o=.5){const a=gi(e,"x","localResponseNormalization");et(4===a.rank||3===a.rank,(()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ${a.rank}.`)),et(at(t),(()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${t}.`));let i=a,s=!1;3===a.rank&&(s=!0,i=Np(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const p={x:i},l={depthRadius:t,bias:r,alpha:n,beta:o},u=pa.runKernel("LRN",p,l);return s?Np(u,[u.shape[1],u.shape[2],u.shape[3]]):u}}),cu=mi({log_:function(e){const t={x:gi(e,"x","log","float32")};return pa.runKernel("Log",t)}}),gu=mi({log1p_:function(e){const t={x:gi(e,"x","log1p")};return pa.runKernel("Log1p",t)}});function hu(e){return pa.customGrad(e)}const fu=mi({softplus_:function(e){const t={x:gi(e,"x","softplus")};return pa.runKernel("Softplus",t)}}),mu=mi({logSigmoid_:function(e){const t=gi(e,"x","logSigmoid"),r=hu((e=>({value:Is(fu(Is(e))),gradFunc:t=>up(t,zp(Is(e)))})));return r(t)}}),yu=mi({sub_:function(e,t){let r=gi(e,"a","sub"),n=gi(t,"b","sub");[r,n]=ta(r,n);const o={a:r,b:n};return pa.runKernel(bn,o)}}),bu=mi({logSoftmax_:function(e,t=-1){const r=gi(e,"logits","logSoftmax");if(-1===t&&(t=r.rank-1),t!==r.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${r.rank} and axis was ${t}`);const n=hu(((e,r)=>{const n=Gl(e,t,!0),o=yu(e,n),a=yu(ws(o,"float32"),cu(Vl(ql(o),t,!0)));return r([a]),{value:a,gradFunc:(e,r)=>{const[n]=r,o=ql(n);return yu(e,up(Vl(e,t,!0),o))}}}));return n(r)}}),_u=mi({logSumExp_:function(e,t=null,r=!1){const n=gi(e,"x","logSumExp"),o=ut(t,n.shape),a=Gl(n,o,!0),i=yu(n,a),s=ql(i),p=Vl(s,o),l=cu(p),u=sp(Np(a,l.shape),l);if(r){const e=Dl(u.shape,o);return Np(u,e)}return u}}),vu=mi({logicalAnd_:function(e,t){const r=gi(e,"a","logicalAnd","bool"),n=gi(t,"b","logicalAnd","bool");Ns(r.shape,n.shape);const o={a:r,b:n};return pa.runKernel(kr,o)}}),wu=mi({logicalNot_:function(e){const t={x:gi(e,"x","logicalNot","bool")};return pa.runKernel(Tr,t)}}),ku=mi({logicalOr_:function(e,t){const r=gi(e,"a","logicalOr","bool"),n=gi(t,"b","logicalOr","bool");Ns(r.shape,n.shape);const o={a:r,b:n};return pa.runKernel(Or,o)}}),Tu=mi({logicalXor_:function(e,t){const r=gi(e,"a","logicalXor","bool"),n=gi(t,"b","logicalXor","bool");return Ns(r.shape,n.shape),vu(ku(e,t),wu(vu(e,t)))}}),Ou=2147483648,xu=mi({searchSorted_:function(e,t,r="left"){const n=gi(e,"sortedSequence","searchSorted"),o=gi(t,"values","searchSorted"),a=n.shape[n.shape.length-1],i=o.shape[o.shape.length-1],s=Np(n,[-1,a]),p=Np(o,[-1,i]);if(s.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(s.shape[0]!==p.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(nt(p.shape)>=Ou)throw new Error("values tensor size must less than 2147483648");if(s.shape[1]>=Ou)throw new Error(`trailing dim_size must less than 2147483648 for int32 output type, was ${s.shape[1]}`);const l={sortedSequence:s,values:p},u={side:r};return pa.runKernel("SearchSorted",l,u)}}),Su=mi({maxPool_:function(e,t,r,n,o){const a=gi(e,"x","maxPool");let i=a,s=!1;3===a.rank&&(s=!0,i=Np(a,[1,a.shape[0],a.shape[1],a.shape[2]])),et(4===i.rank,(()=>`Error in maxPool: input must be rank 4 but got rank ${i.rank}.`)),et(Ap(r,1),(()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${r} and dilations '1'`)),Lp("maxPool",n,o);const p={x:i},l={filterSize:t,strides:r,pad:n,dimRoundingMode:o},u=pa.runKernel(Er,p,l);return s?Np(u,[u.shape[1],u.shape[2],u.shape[3]]):u}}),Eu=mi({maxPool3d_:function(e,t=[1,1,1],r,n,o,a="NDHWC"){const i=gi(e,"x","maxPool3d");let s=i,p=!1;4===i.rank&&(p=!0,s=Np(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),et(5===s.rank,(()=>`Error in maxPool3d: x must be rank 5 but got rank ${s.rank}.`)),et("NDHWC"===a,(()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${a}`)),Lp("maxPool3d",n,o);const l={x:s},u={filterSize:t,strides:r,pad:n,dimRoundingMode:o,dataFormat:a},d=pa.runKernel("MaxPool3D",l,u);return p?Np(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}}),Fu=mi({maxPoolWithArgmax_:function(e,t,r,n,o=!1){const a={x:gi(e,"x","maxPoolWithArgmax")},i={filterSize:t,strides:r,pad:n,includeBatchInIndex:o},s=pa.runKernel("MaxPoolWithArgmax",a,i);return{result:s[0],indexes:s[1]}}}),Mu=mi({maximum_:function(e,t){let r=gi(e,"a","maximum"),n=gi(t,"b","maximum");[r,n]=ta(r,n),"bool"===r.dtype&&(r=ws(r,"int32"),n=ws(n,"int32")),Ns(r.shape,n.shape);const o={a:r,b:n};return pa.runKernel(Sr,o)}}),Ru=mi({mean_:function(e,t=null,r=!1){const n={x:gi(e,"x","mean")},o={axis:t,keepDims:r};return pa.runKernel(Fr,n,o)}});function Cu(e,t="float32"){if(xt(e),"complex64"===t){const t=Cu(e,"float32"),r=Cu(e,"float32");return yi(t,r)}const r=Ot(nt(e),t);return pa.makeTensor(r,e,t)}function Iu(e,t="float32"){if(xt(e),"complex64"===t){const t=Iu(e,"float32"),r=Cu(e,"float32");return yi(t,r)}const r=Tt(nt(e),t);return pa.makeTensor(r,e,t)}const Au=mi({minimum_:function(e,t){let r=gi(e,"a","minimum"),n=gi(t,"b","minimum");[r,n]=ta(r,n),"bool"===r.dtype&&(r=ws(r,"int32"),n=ws(n,"int32")),Ns(r.shape,n.shape);const o={a:r,b:n};return pa.runKernel(Rr,o)}}),Bu=mi({mirrorPad_:function(e,t,r){et("reflect"===r||"symmetric"===r,(()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${r}.`));const n=gi(e,"x","mirrorPad");if(0===n.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");et(t.length===n.rank,(()=>`Padding doesn't match input. Must be ${n.rank}. Got ${t.length}.`));const o="reflect"===r?1:0;for(let e=0;e<n.rank;e++)et(2===t[e].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),et(t[e][0]>=0&&t[e][0]<=n.shape[e]-o&&t[e][1]>=0&&t[e][1]<=n.shape[e]-o,(()=>`Padding in dimension ${e} cannot be greater than or equal to ${n.shape[e]-o} or less than 0 for input of shape ${n.shape}`));const a={paddings:t,mode:r},i={x:n};return pa.runKernel(Cr,i,a)}}),Du=mi({mod_:function(e,t){let r=gi(e,"a","mod"),n=gi(t,"b","mod");[r,n]=ta(r,n);const o={a:r,b:n};return pa.runKernel("Mod",o)}}),Lu=mi({moments_:function(e,t=null,r=!1){const n=ut(t,(e=gi(e,"x","moments")).shape),o=Ru(e,n,r);let a=o.shape;r||(a=Dl(o.shape,n));const i=Hl(yu(ws(e,"float32"),Np(o,a)));return{mean:o,variance:Ru(i,n,r)}}}),Nu=mi({multiRNNCell_:function(e,t,r,n){const o=gi(t,"data","multiRNNCell"),a=hi(r,"c","multiRNNCell"),i=hi(n,"h","multiRNNCell");let s=o;const p=[];for(let t=0;t<e.length;t++){const r=e[t](s,a[t],i[t]);p.push(r[0]),p.push(r[1]),s=r[1]}const l=[],u=[];for(let e=0;e<p.length;e+=2)l.push(p[e]),u.push(p[e+1]);return[l,u]}}),Pu=mi({multinomial_:function(e,t,r,n=!1){const o=gi(e,"logits","multinomial"),a=o.size,i=o.rank;if(a<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${a}.`);if(i>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${i}`);r=r||Math.random();const s={logits:1===i?Np(o,[1,-1]):o},p={numSamples:t,seed:r,normalized:n},l=pa.runKernel("Multinomial",s,p);return 1===i?Np(l,[l.size]):l}}),ju=mi({notEqual_:function(e,t){let r=gi(e,"a","notEqual","string_or_numeric"),n=gi(t,"b","notEqual","string_or_numeric");[r,n]=ta(r,n),Ns(r.shape,n.shape);const o={a:r,b:n};return pa.runKernel(Ar,o)}}),Gu=mi({onesLike_:function(e){const t={x:gi(e,"x","onesLike")};return pa.runKernel(Nr,t)}}),Wu=mi({outerProduct_:function(e,t){const r=gi(e,"v1","outerProduct"),n=gi(t,"v2","outerProduct");et(1===r.rank&&1===n.rank,(()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${r.rank} and ${n.rank}.`));const o=Np(r,[-1,1]),a=Np(n,[1,-1]);return ks(o,a)}}),zu=mi({pad_:function(e,t,r=0){const n=gi(e,"x","pad");if(0===n.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const o={paddings:t,constantValue:r},a={x:n};return pa.runKernel(Gr,a,o)}}),Uu=mi({pad1d_:function(e,t,r=0){return et(2===t.length,(()=>"Invalid number of paddings. Must be length of 2.")),zu(e,[t],r)}}),$u=mi({pad2d_:function(e,t,r=0){return et(2===t.length&&2===t[0].length&&2===t[1].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),zu(e,t,r)}}),Hu=mi({pad3d_:function(e,t,r=0){return et(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),zu(e,t,r)}}),Vu=mi({pad4d_:function(e,t,r=0){return et(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),zu(e,t,r)}}),Ku=mi({spaceToBatchND_:function(e,t,r){const n=gi(e,"x","spaceToBatchND");et(n.rank>=1+t.length,(()=>`input rank ${n.rank} should be > than [blockShape] ${t.length}`)),et(r.length===t.length,(()=>`paddings.shape[0] ${r.length} must be equal to [blockShape] ${t.length}`)),et(n.shape.reduce(((e,n,o)=>o>0&&o<=t.length?e&&(n+r[o-1][0]+r[o-1][1])%t[o-1]==0:e),!0),(()=>`input spatial dimensions ${n.shape.slice(1)} with paddings ${r.toString()} must be divisible by blockShapes ${t.toString()}`));const o={x:n},a={blockShape:t,paddings:r};return pa.runKernel(an,o,a)}}),Yu=mi({pool_:function(e,t,r,n,o,a,i){null==o&&(o=[1,1]),null==a&&(a=1),0===n&&(n="valid");const s=gi(e,"x","maxPool");let p=s,l=!1;3===s.rank&&(l=!0,p=Np(s,[1,s.shape[0],s.shape[1],s.shape[2]])),et(Ap(a,o),(()=>`Error in pool: Either strides or dilations must be 1. Got strides ${a} and dilations '${o}'`));const u=Op(p.shape,t,a,o,n),d=[u.dilationHeight,u.dilationWidth];let c;c="same"===n?function(e,t){const r=e.map(((e,r)=>e+(e-1)*(t[r]-1))).map((e=>e-1)),n=r.map((e=>Math.floor(e/2))),o=r.map(((e,t)=>e-n[t]));return r.map(((e,t)=>[n[t],o[t]]))}([u.filterHeight,u.filterWidth],d):[[0,0],[0,0]];const g=1===d[0]&&1===d[1],[h,f]=function(e,t,r){const n=r.map((e=>e[0])),o=r.map((e=>e[1])),a=e.concat(n,o),i=t.map(((e,t)=>(e-a[t]%e)%e)),s=o.map(((e,t)=>e+i[t]));return[t.map(((e,t)=>[n[t],s[t]])),t.map(((e,t)=>[0,i[t]]))]}([u.inHeight,u.inWidth],d,c),m=g?n:"valid",y=g?p:Ku(p,d,h),b=("avg"===r?()=>Pp(y,t,a,m,i):()=>Su(y,t,a,m,i))(),_=g?b:Vp(b,d,f);return l?Np(_,[_.shape[1],_.shape[2],_.shape[3]]):_}}),Xu=mi({prelu_:function(e,t){const r={x:gi(e,"x","prelu"),alpha:gi(t,"alpha","prelu")};return pa.runKernel(Wr,r)}});function qu(e,t=!1){console.log(e.toString(t))}const Ju=mi({prod_:function(e,t=null,r=!1){let n=gi(e,"x","prod");"bool"===n.dtype&&(n=ws(n,"int32"));const o={x:n},a={axis:t,keepDims:r};return pa.runKernel(zr,o,a)}}),Qu=mi({raggedGather_:function(e,t,r,n){const o=e.map(((e,t)=>gi(e,`tensors${t}`,"raggedGather","int32"))),a={paramsNestedSplits:o,paramsDenseValues:gi(t,"paramsDenseValues","raggedGather"),indices:gi(r,"indices","raggedGather","int32")},i={outputRaggedRank:n},s=pa.runKernel("RaggedGather",a,i);return{outputNestedSplits:s.slice(0,s.length-1),outputDenseValues:s[s.length-1]}}}),Zu=mi({raggedRange_:function(e,t,r){const n=gi(e,"starts","raggedRange"),o={starts:n,limits:gi(t,"limits","raggedRange",n.dtype),deltas:gi(r,"deltas","raggedRange",n.dtype)},a=pa.runKernel("RaggedRange",o);return{rtNestedSplits:a[0],rtDenseValues:a[1]}}}),ed=mi({raggedTensorToTensor_:function(e,t,r,n,o){const a=gi(e,"shape","raggedTensorToTensor","int32"),i=gi(t,"values","raggedTensorToTensor"),s=gi(r,"defaultValue","raggedTensorToTensor",i.dtype),p=n.map(((e,t)=>gi(e,`tensors${t}`,"raggedTensorToTensor","int32"))),l={shape:a,values:i,defaultValue:s,rowPartitionTensors:p},u={rowPartitionTypes:o};return pa.runKernel("RaggedTensorToTensor",l,u)}}),td=mi({rand_:function(e,t,r){xt(e);const n=nt(e);let o=null;if(null==r||"float32"===r)o=new Float32Array(n);else if("int32"===r)o=new Int32Array(n);else{if("bool"!==r)throw new Error(`Unknown data type ${r}`);o=new Uint8Array(n)}for(let e=0;e<n;e++)o[e]=t();return pa.makeTensor(o,e,r)}});var rd="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:{};function nd(e){var t={exports:{}};return e(t,t.exports),t.exports}var od=nd((function(e){!function(e,t,r){function n(e){var t=this,r=function(){var e=4022871197;return function(t){t=String(t);for(var r=0;r<t.length;r++){var n=.02519603282416938*(e+=t.charCodeAt(r));n-=e=n>>>0,e=(n*=e)>>>0,e+=4294967296*(n-=e)}return 2.3283064365386963e-10*(e>>>0)}}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=r(" "),t.s1=r(" "),t.s2=r(" "),t.s0-=r(e),t.s0<0&&(t.s0+=1),t.s1-=r(e),t.s1<0&&(t.s1+=1),t.s2-=r(e),t.s2<0&&(t.s2+=1),r=null}function o(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function a(e,t){var r=new n(e),a=t&&t.state,i=r.next;return i.int32=function(){return 4294967296*r.next()|0},i.double=function(){return i()+11102230246251565e-32*(2097152*i()|0)},i.quick=i,a&&("object"==typeof a&&o(a,r),i.state=function(){return o(r,{})}),i}t&&t.exports?t.exports=a:this.alea=a}(0,e)})),ad=nd((function(e){!function(e,t,r){function n(e){var t=this,r="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:r+=e;for(var n=0;n<r.length+64;n++)t.x^=0|r.charCodeAt(n),t.next()}function o(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function a(e,t){var r=new n(e),a=t&&t.state,i=function(){return(r.next()>>>0)/4294967296};return i.double=function(){do{var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=r.next,i.quick=i,a&&("object"==typeof a&&o(a,r),i.state=function(){return o(r,{})}),i}t&&t.exports?t.exports=a:this.xor128=a}(0,e)})),id=nd((function(e){!function(e,t,r){function n(e){var t=this,r="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:r+=e;for(var n=0;n<r.length+64;n++)t.x^=0|r.charCodeAt(n),n==r.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function o(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function a(e,t){var r=new n(e),a=t&&t.state,i=function(){return(r.next()>>>0)/4294967296};return i.double=function(){do{var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=r.next,i.quick=i,a&&("object"==typeof a&&o(a,r),i.state=function(){return o(r,{})}),i}t&&t.exports?t.exports=a:this.xorwow=a}(0,e)})),sd=nd((function(e){!function(e,t,r){function n(e){var t=this;t.next=function(){var e,r,n=t.x,o=t.i;return e=n[o],r=(e^=e>>>7)^e<<24,r^=(e=n[o+1&7])^e>>>10,r^=(e=n[o+3&7])^e>>>3,r^=(e=n[o+4&7])^e<<7,e=n[o+7&7],r^=(e^=e<<13)^e<<9,n[o]=r,t.i=o+1&7,r},function(e,t){var r,n=[];if(t===(0|t))n[0]=t;else for(t=""+t,r=0;r<t.length;++r)n[7&r]=n[7&r]<<15^t.charCodeAt(r)+n[r+1&7]<<13;for(;n.length<8;)n.push(0);for(r=0;r<8&&0===n[r];++r);for(8==r?n[7]=-1:n[r],e.x=n,e.i=0,r=256;r>0;--r)e.next()}(t,e)}function o(e,t){return t.x=e.x.slice(),t.i=e.i,t}function a(e,t){null==e&&(e=+new Date);var r=new n(e),a=t&&t.state,i=function(){return(r.next()>>>0)/4294967296};return i.double=function(){do{var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=r.next,i.quick=i,a&&(a.x&&o(a,r),i.state=function(){return o(r,{})}),i}t&&t.exports?t.exports=a:this.xorshift7=a}(0,e)})),pd=nd((function(e){!function(e,t,r){function n(e){var t=this;t.next=function(){var e,r,n=t.w,o=t.X,a=t.i;return t.w=n=n+1640531527|0,r=o[a+34&127],e=o[a=a+1&127],r^=r<<13,e^=e<<17,r^=r>>>15,e^=e>>>12,r=o[a]=r^e,t.i=a,r+(n^n>>>16)|0},function(e,t){var r,n,o,a,i,s=[],p=128;for(t===(0|t)?(n=t,t=null):(t+="\0",n=0,p=Math.max(p,t.length)),o=0,a=-32;a<p;++a)t&&(n^=t.charCodeAt((a+32)%t.length)),0===a&&(i=n),n^=n<<10,n^=n>>>15,n^=n<<4,n^=n>>>13,a>=0&&(i=i+1640531527|0,o=0==(r=s[127&a]^=n+i)?o+1:0);for(o>=128&&(s[127&(t&&t.length||0)]=-1),o=127,a=512;a>0;--a)n=s[o+34&127],r=s[o=o+1&127],n^=n<<13,r^=r<<17,n^=n>>>15,r^=r>>>12,s[o]=n^r;e.w=i,e.X=s,e.i=o}(t,e)}function o(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function a(e,t){null==e&&(e=+new Date);var r=new n(e),a=t&&t.state,i=function(){return(r.next()>>>0)/4294967296};return i.double=function(){do{var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=r.next,i.quick=i,a&&(a.X&&o(a,r),i.state=function(){return o(r,{})}),i}t&&t.exports?t.exports=a:this.xor4096=a}(0,e)})),ld=nd((function(e){!function(e,t,r){function n(e){var t=this,r="";t.next=function(){var e=t.b,r=t.c,n=t.d,o=t.a;return e=e<<25^e>>>7^r,r=r-n|0,n=n<<24^n>>>8^o,o=o-e|0,t.b=e=e<<20^e>>>12^r,t.c=r=r-n|0,t.d=n<<16^r>>>16^o,t.a=o-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):r+=e;for(var n=0;n<r.length+20;n++)t.b^=0|r.charCodeAt(n),t.next()}function o(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function a(e,t){var r=new n(e),a=t&&t.state,i=function(){return(r.next()>>>0)/4294967296};return i.double=function(){do{var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=r.next,i.quick=i,a&&("object"==typeof a&&o(a,r),i.state=function(){return o(r,{})}),i}t&&t.exports?t.exports=a:this.tychei=a}(0,e)})),ud=function(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})})),t}(Object.freeze({__proto__:null,default:{}})),dd=nd((function(e){!function(t,r,n){var o,a=256,i="random",s=n.pow(a,6),p=n.pow(2,52),l=2*p,u=a-1;function d(e,u,d){var y=[],b=f(h((u=1==u?{entropy:!0}:u||{}).entropy?[e,m(r)]:null==e?function(){try{var e;return o&&(e=o.randomBytes)?e=e(a):(e=new Uint8Array(a),(t.crypto||t.msCrypto).getRandomValues(e)),m(e)}catch(e){var n=t.navigator,i=n&&n.plugins;return[+new Date,t,i,t.screen,m(r)]}}():e,3),y),_=new c(y),v=function(){for(var e=_.g(6),t=s,r=0;e<p;)e=(e+r)*a,t*=a,r=_.g(1);for(;e>=l;)e/=2,t/=2,r>>>=1;return(e+r)/t};return v.int32=function(){return 0|_.g(4)},v.quick=function(){return _.g(4)/4294967296},v.double=v,f(m(_.S),r),(u.pass||d||function(e,t,r,o){return o&&(o.S&&g(o,_),e.state=function(){return g(_,{})}),r?(n[i]=e,t):e})(v,b,"global"in u?u.global:this==n,u.state)}function c(e){var t,r=e.length,n=this,o=0,i=n.i=n.j=0,s=n.S=[];for(r||(e=[r++]);o<a;)s[o]=o++;for(o=0;o<a;o++)s[o]=s[i=u&i+e[o%r]+(t=s[o])],s[i]=t;(n.g=function(e){for(var t,r=0,o=n.i,i=n.j,s=n.S;e--;)t=s[o=u&o+1],r=r*a+s[u&(s[o]=s[i=u&i+t])+(s[i]=t)];return n.i=o,n.j=i,r})(a)}function g(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function h(e,t){var r,n=[],o=typeof e;if(t&&"object"==o)for(r in e)try{n.push(h(e[r],t-1))}catch(e){}return n.length?n:"string"==o?e:e+"\0"}function f(e,t){for(var r,n=e+"",o=0;o<n.length;)t[u&o]=u&(r^=19*t[u&o])+n.charCodeAt(o++);return m(t)}function m(e){return String.fromCharCode.apply(0,e)}if(f(n.random(),r),e.exports){e.exports=d;try{o=ud}catch(e){}}else n["seed"+i]=d}("undefined"!=typeof self?self:rd,[],Math)}));dd.alea=od,dd.xor128=ad,dd.xorwow=id,dd.xorshift7=sd,dd.xor4096=pd,dd.tychei=ld;var cd=dd;class gd{constructor(e,t,r,n,o){this.mean=e,this.stdDev=t,this.dtype=r,this.nextVal=NaN,this.truncated=n,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);const a=o||Math.random();this.random=cd.alea(a.toString())}nextValue(){if(!isNaN(this.nextVal)){const e=this.nextVal;return this.nextVal=NaN,e}let e,t,r=!1;for(;!r;){let n,o,a;do{n=2*this.random()-1,o=2*this.random()-1,a=n*n+o*o}while(a>=1||0===a);const i=Math.sqrt(-2*Math.log(a)/a);e=this.mean+this.stdDev*n*i,t=this.mean+this.stdDev*o*i,this.truncated&&!this.isValidTruncated(e)||(r=!0)}return this.truncated&&!this.isValidTruncated(t)||(this.nextVal=this.convertValue(t)),this.convertValue(e)}convertValue(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class hd{constructor(e,t,r,n){this.alpha=e,this.beta=1/t,this.dtype=r;const o=n||Math.random();this.randu=cd.alea(o.toString()),this.randn=new gd(0,1,r,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,t,r,n,o,a;for(;;){do{n=this.randn.nextValue(),a=1+this.c*n}while(a<=0);if(a*=a*a,e=n*n,t=1-.331*e*e,r=.5*e+this.d*(1-a+Math.log(a)),o=this.randu(),o<t||Math.log(o)<r)break}return a=1/this.beta*this.d*a,this.alpha<1&&(a*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(a)}convertValue(e){return"float32"===this.dtype?e:Math.round(e)}}class fd{constructor(e=0,t=1,r,n){if(this.canReturnFloat=()=>null==this.dtype||"float32"===this.dtype,this.min=e,this.range=t-e,this.dtype=r,null==n&&(n=Math.random()),"number"==typeof n&&(n=n.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${t} <= 1 and dtype is not float`);this.random=cd.alea(n)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}const md=mi({randomGamma_:function(e,t,r=1,n="float32",o){if(xt(e),null==r&&(r=1),null==n&&(n="float32"),"float32"!==n&&"int32"!==n)throw new Error(`Unsupported data type ${n}`);const a=new hd(t,r,n,o),i=el(e,n);for(let e=0;e<i.values.length;e++)i.values[e]=a.nextValue();return i.toTensor()}}),yd=mi({randomNormal_:function(e,t=0,r=1,n,o){if(xt(e),null!=n&&"bool"===n)throw new Error(`Unsupported data type ${n}`);const a=new gd(t,r,n,!1,o),i=el(e,n);for(let e=0;e<i.values.length;e++)i.values[e]=a.nextValue();return i.toTensor()}}),bd=mi({randomStandardNormal_:function(e,t,r){if(null!=t&&"bool"===t)throw new Error(`Unsupported data type ${t}`);return yd(e,0,1,t,r)}}),_d=mi({randomUniform_:function(e,t=0,r=1,n="float32",o){xt(e);const a=el(e,n),i=new fd(t,r,null,o);for(let e=0;e<a.values.length;e++)a.values[e]=i.nextValue();return a.toTensor()}});function vd(e,t,r=1,n="float32"){if(0===r)throw new Error("Cannot have a step of zero");const o={start:e,stop:t,step:r,dtype:n};return pa.runKernel(Ur,{},o)}const wd=mi({reciprocal_:function(e){const t={x:gi(e,"x","reciprocal")};return pa.runKernel($r,t)}}),kd=mi({relu_:function(e){const t={x:gi(e,"x","relu")};return pa.runKernel(Hr,t)}}),Td=mi({relu6_:function(e){const t={x:gi(e,"x","relu6")};return pa.runKernel(Xr,t)}}),Od=mi({reverse_:function(e,t){const r={x:gi(e,"x","reverse")},n={dims:t};return pa.runKernel(qr,r,n)}}),xd=mi({reverse1d_:function(e){const t=gi(e,"x","reverse");return et(1===t.rank,(()=>`Error in reverse1D: x must be rank 1 but got rank ${t.rank}.`)),Od(t,0)}}),Sd=mi({reverse2d_:function(e,t){const r=gi(e,"x","reverse");return et(2===r.rank,(()=>`Error in reverse2D: x must be rank 2 but got rank ${r.rank}.`)),Od(r,t)}}),Ed=mi({reverse3d_:function(e,t){const r=gi(e,"x","reverse");return et(3===r.rank,(()=>`Error in reverse3D: x must be rank 3 but got rank ${r.rank}.`)),Od(r,t)}}),Fd=mi({reverse4d_:function(e,t){const r=gi(e,"x","reverse");return et(4===r.rank,(()=>`Error in reverse4D: x must be rank 4 but got rank ${r.rank}.`)),Od(r,t)}}),Md=mi({round_:function(e){const t={x:gi(e,"x","round")};return pa.runKernel(Jr,t)}}),Rd=mi({rsqrt_:function(e){const t={x:gi(e,"x","rsqrt","float32")};return pa.runKernel(Qr,t)}}),Cd=mi({selu_:function(e){const t={x:gi(e,"x","selu")};return pa.runKernel("Selu",t)}}),Id=mi({separableConv2d_:function(e,t,r,n,o,a=[1,1],i="NHWC"){const s=gi(e,"x","separableConv2d"),p=gi(t,"depthwiseFilter","separableConv2d"),l=gi(r,"pointwiseFilter","separableConv2d");let u=s,d=!1;if(3===s.rank&&(d=!0,u=Np(s,[1,s.shape[0],s.shape[1],s.shape[2]])),"NCHW"===i)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");et(4===u.rank,(()=>`Error in separableConv2d: input must be rank 4, but got rank ${u.rank}.`)),et(4===p.rank,(()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${p.rank}.`)),et(4===l.rank,(()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${p.rank}.`)),et(1===l.shape[0],(()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${l.shape[0]}.`)),et(1===l.shape[1],(()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${l.shape[1]}.`));const c=p.shape[2],g=p.shape[3];et(l.shape[2]===c*g,(()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${c*g}, but got ${l.shape[2]}.`));const h=wl(u,p,n,o,i,a),f=pl(h,l,1,"valid",i);return d?Np(f,[f.shape[1],f.shape[2],f.shape[3]]):f}}),Ad=mi({sign_:function(e){const t={x:gi(e,"x","sign")};return pa.runKernel("Sign",t)}}),Bd=mi({sin_:function(e){const t={x:gi(e,"x","sin","float32")};return pa.runKernel("Sin",t)}}),Dd=mi({sinh_:function(e){const t={x:gi(e,"x","sinh")};return pa.runKernel("Sinh",t)}}),Ld=mi({slice1d_:function(e,t,r){const n=gi(e,"x","slice1d");return et(1===n.rank,(()=>`slice1d expects a rank-1 tensor, but got a rank-${n.rank} tensor`)),Up(n,[t],[r])}}),Nd=mi({slice2d_:function(e,t,r){const n=gi(e,"x","slice2d");return et(2===n.rank,(()=>`slice2d expects a rank-2 tensor, but got a rank-${n.rank} tensor`)),Up(n,t,r)}}),Pd=mi({slice3d_:function(e,t,r){const n=gi(e,"x","slice3d");return et(3===n.rank,(()=>`slice3d expects a rank-3 tensor, but got a rank-${n.rank} tensor`)),Up(n,t,r)}}),jd=mi({slice4d_:function(e,t,r){const n=gi(e,"x","slice4d");return et(4===n.rank,(()=>`slice4d expects a rank-4 tensor, but got a rank-${n.rank} tensor`)),Up(n,t,r)}}),Gd=mi({softmax_:function(e,t=-1){const r=gi(e,"logits","softmax","float32");if(-1===t&&(t=r.rank-1),t!==r.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${r.rank} and dim was ${t}`);const n={logits:r},o={dim:t};return pa.runKernel(pn,n,o)}}),Wd=mi({fft_:function(e){et("complex64"===e.dtype,(()=>`The dtype for tf.spectral.fft() must be complex64 but got ${e.dtype}.`));const t={input:e};return pa.runKernel("FFT",t)}}),zd=mi({ifft_:function(e){et("complex64"===e.dtype,(()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${e.dtype}.`));const t={input:e};return pa.runKernel("IFFT",t)}}),Ud=mi({irfft_:function(e){const t=e.shape[e.shape.length-1],r=e.size/t;let n;if(t<=2){const o=Np(e,[r,t]);n=zd(o)}else{const o=[r,2*(t-1)],a=Np(As(e),[r,t]),i=Np(Cs(e),[r,t]),s=Od(Up(a,[0,1],[r,t-2]),1),p=up(Od(Up(i,[0,1],[r,t-2]),1),Ul(-1)),l=Wp([a,s],1),u=Wp([i,p],1),d=Np(yi(l,u),[o[0],o[1]]);n=zd(d)}if(n=As(n),3===e.rank&&0!==e.shape[0]){const t=n,r=e.shape[0];n=Np(n,[r,n.shape[0]/r,n.shape[1]]),t.dispose()}return n}}),$d=mi({split_:function(e,t,r=0){const n={x:gi(e,"x","split")},o={numOrSizeSplits:t,axis:r};return pa.runKernel(sn,n,o)}}),Hd=mi({rfft_:function(e,t){et("float32"===e.dtype,(()=>`The dtype for rfft() must be real value but got ${e.dtype}`));let r=e.shape[e.shape.length-1];const n=e.size/r;let o;if(null!=t&&t<r){const n=e.shape.map((e=>0)),a=e.shape.map((e=>e));a[e.shape.length-1]=t,o=Up(e,n,a),r=t}else if(null!=t&&t>r){const n=e.shape.map((e=>e));n[e.shape.length-1]=t-r,o=Wp([e,Cu(n)],e.shape.length-1),r=t}else o=e;const a=Sl(o),i=Np(yi(o,a),[n,r]),s=Wd(i),p=Math.floor(r/2)+1,l=As(s),u=Cs(s),d=$d(l,[p,r-p],l.shape.length-1),c=$d(u,[p,r-p],u.shape.length-1),g=o.shape.slice();return g[o.shape.length-1]=p,Np(yi(d[0],c[0]),g)}}),Vd=mi({squaredDifference_:function(e,t){let r=gi(e,"a","squaredDifference"),n=gi(t,"b","squaredDifference");[r,n]=ta(r,n),Ns(r.shape,n.shape);const o={a:r,b:n};return pa.runKernel(gn,o,{})}}),Kd=mi({squeeze_:function(e,t){const r=gi(e,"x","squeeze","string_or_numeric");return Np(r,dt(r.shape,t).newShape)}}),Yd=mi({stack_:function(e,t=0){const r=hi(e,"tensors","stack","string_or_numeric");et(r.length>=1,(()=>"Pass at least one tensor to tf.stack")),r.length>0&&et(t<=r[0].rank,(()=>"Axis must be <= rank of the tensor"));const n=r,o={axis:t};return pa.runKernel(jr,n,o)}}),Xd=mi({step_:function(e,t=0){const r={x:gi(e,"x","step")},n={alpha:t};return pa.runKernel(Sn,r,n)}}),qd=mi({stridedSlice_:function(e,t,r,n,o=0,a=0,i=0,s=0,p=0){const l={x:gi(e,"x","stridedSlice","string_or_numeric")},u={begin:t,end:r,strides:n,beginMask:o,endMask:a,ellipsisMask:i,newAxisMask:s,shrinkAxisMask:p};return pa.runKernel(hn,l,u)}}),Jd=mi({tan_:function(e){const t={x:gi(e,"x","tan","float32")};return pa.runKernel("Tan",t)}});function Qd(e,t){rt(e);const r=ui(e,t);if(1!==r.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return bi(e,null,r,t)}function Zd(e,t,r){if(rt(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");const n=ui(e,r);if(2!==n.length&&1!==n.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===n.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return bi(e,t,n,r)}const ec=mi({topk_:function(e,t=1,r=!0){const n=gi(e,"x","topk");if(0===n.rank)throw new Error("topk() expects the input to be of rank 1 or higher");const o=n.shape[n.shape.length-1];if(t<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${t}`);if(t>o)throw new Error(`'k' passed to topk() must be <= the last dimension (${o}) but got ${t}`);const a={x:n},i={k:t,sorted:r},[s,p]=pa.runKernel(wn,a,i);return{values:s,indices:p}}}),tc=mi({truncatedNormal_:function(e,t=0,r=1,n,o){if(xt(e),null!=n&&"bool"===n)throw new Error("Unsupported data type $ { dtype }");const a=new gd(t,r,n,!0,o),i=el(e,n);for(let e=0;e<i.values.length;e++)i.values[e]=a.nextValue();return i.toTensor()}}),rc=mi({unique_:function(e,t=0){const r=gi(e,"x","unique","string_or_numeric");et(r.rank>0,(()=>"The input tensor must be at least 1D"));const n={x:r},o={axis:t},[a,i]=pa.runKernel("Unique",n,o);return{values:a,indices:i}}}),nc=mi({unsortedSegmentSum_:function(e,t,r){const n=gi(e,"x","unsortedSegmentSum"),o=gi(t,"segmentIds","unsortedSegmentSum","int32");et(at(r),(()=>"numSegments must be of dtype int"));const a={x:n,segmentIds:o},i={numSegments:r};return pa.runKernel("UnsortedSegmentSum",a,i)}}),oc=mi({unstack_:function(e,t=0){const r=gi(e,"x","unstack","string_or_numeric");et(t>=-r.shape.length&&t<r.shape.length,(()=>`Axis = ${t} is not in [-${r.shape.length}, ${r.shape.length})`));const n={value:r},o={axis:t};return pa.runKernel(On,n,o)}});function ac(e,t){const r=[];for(let e=0;e<t.length;e++)t[e]&&r.push(e);const n=el(e,"int32"),o=el([r.length,e.length],"int32");for(let t=0;t<r.length;t++){const a=n.indexToLoc(r[t]),i=t*e.length;o.values.set(a,i)}return o.toTensor()}const ic=async function(e){const t=gi(e,"condition","whereAsync","bool"),r=await t.data(),n=ac(t.shape,r);return e!==t&&t.dispose(),n},sc=mi({movingAverage_:function(e,t,r,n,o=!0){const a=gi(e,"v","movingAverage"),i=gi(t,"x","movingAverage"),s=gi(r,"decay","movingAverage");var p,l;l=i,et((p=a).dtype===l.dtype,(()=>`The dtypes of the first(${p.dtype}) and second(${l.dtype}) input must match`)),et(ot(a.shape,i.shape),(()=>"Shape mismatch in v and x"));const u=Ul(1),d=yu(u,s);let c=up(yu(i,a),d);if(o){et(null!=n,(()=>"When using zeroDebias: true, step is required."));const e=gi(n,"step","movingAverage");c=lp(c,yu(u,zl(s,e)))}return sp(a,c)}}),pc=mi({scatterND_:function(e,t,r){xt(r);const n=gi(e,"indices","scatterND","int32"),o=gi(t,"updates","scatterND");Us(o,n,r);const a={indices:n,updates:o},i={shape:r};return pa.runKernel(Zr,a,i)}}),lc=mi({sparseToDense_:function(e,t,r,n=0){xt(r);const o=gi(e,"sparseIndices","sparseToDense","int32"),a=gi(t,"sparseValues","sparseToDense","string_or_numeric"),i=gi(n,"defaultValue","sparseToDense",a.dtype);!function(e,t,r,n){if("int32"!==e.dtype)throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${e.shape}.`);const o=e.rank>0?e.shape[0]:1,a=e.rank>1?e.shape[1]:1;if(r.length!==a)throw new Error(`outputShape has incorrect number of elements:, ${r.length}, should be: ${a}.`);const i=t.size;if(0!==t.rank&&(1!==t.rank||i!==o))throw new Error(`sparseValues has incorrect shape ${t.shape}, should be [] or [${o}]`);if(t.dtype!==n.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(o,a,r,i);const s={sparseIndices:o,sparseValues:a,defaultValue:i},p={outputShape:r};return pa.runKernel("SparseToDense",s,p)}}),uc=mi({gatherND_:function(e,t){const r=gi(t,"indices","gatherND","int32"),n={params:gi(e,"x","gatherND","string_or_numeric"),indices:r};return pa.runKernel(hr,n)}}),dc=mi({dropout_:function(e,t,r,n){const o=gi(e,"x","dropout");if(et("float32"===o.dtype,(()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${o.dtype} tensor instead.`)),et(t>=0&&t<1,(()=>`rate must be a float in the range [0, 1), but got ${t}.`)),0===t)return e instanceof Vo?o.clone():o;const a=function(e,t){if(null==t)return e.shape.slice();if(ot(e.shape,t))return t;if(e.shape.length===t.length){const r=[];for(let n=0;n<e.shape.length;n++)null==t[n]&&null!=e.shape[n]?r.push(e.shape[n]):r.push(t[n]);return r}return t}(o,r),i=1-t,s=lp(tu(sp(_d(a,0,1,"float32",n),i)),i);return up(o,s)}});function cc(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function gc(e,t,r){const n=1-e%2,o=new Float32Array(e);for(let a=0;a<e;++a){const i=2*Math.PI*a/(e+n-1);o[a]=t-r*Math.cos(i)}return Qd(o,"float32")}const hc=mi({conv2DBackpropFilter_:function(e,t,r,n,o,a="NHWC",i){let s=e;3===e.rank&&(s=Np(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let p=t;3===p.rank&&(p=Np(t,[1,t.shape[0],t.shape[1],t.shape[2]])),et(4===s.rank,(()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${s.shape}.`)),et(4===p.rank,(()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${p.shape}.`)),et(4===r.length,(()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${r}.`));const l="NHWC"===a?s.shape[3]:s.shape[1],u="NHWC"===a?p.shape[3]:p.shape[1];et(l===r[2],(()=>`Error in conv2dDerFilter: depth of input ${l}) must match input depth in filter (${r[2]}.`)),et(u===r[3],(()=>`Error in conv2dDerFilter: depth of dy (${u}) must match output depth for filter (${r[3]}).`)),Lp("conv2dDerFilter",o,i);const d={x:s,dy:p},c={strides:n,pad:o,dataFormat:a,dimRoundingMode:i,filterShape:r};return pa.runKernel("Conv2DBackpropFilter",d,c)}});function fc(e,t,r){if(null==r||"linear"===r)return e;if("relu"===r)return up(e,Xd(t));throw new Error(`Cannot compute gradient for fused activation ${r}.`)}function mc(e,t){let r=t;const n=Ls(e.shape,t.shape);return n.length>0&&(r=Vl(r,n)),Np(r,e.shape)}function yc(e,t,r,n){if("linear"===t)return e;if("relu"===t)return kd(e);if("elu"===t)return Rl(e);if("relu6"===t)return Td(e);if("prelu"===t)return Xu(e,r);if("leakyrelu"===t)return pu(e,n);if("sigmoid"===t)return zp(e);throw new Error(`Unknown fused activation ${t}.`)}const bc=(e,t)=>!(e>0)||"linear"===t,_c=mi({fusedConv2d_:function({x:e,filter:t,strides:r,pad:n,dataFormat:o="NHWC",dilations:a=[1,1],dimRoundingMode:i,bias:s,activation:p="linear",preluActivationWeights:l,leakyreluAlpha:u}){if(p=p||"linear",!1===bc(pa.state.gradientDepth,p)){et("NHWC"===o,(()=>`Error in fused conv2d: got dataFormat of ${o} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`));let d=pl(e,t,r,n,o,a,i);return null!=s&&(d=sp(d,s)),yc(d,p,l,u)}const d=gi(e,"x","conv2d","float32"),c=gi(t,"filter","conv2d","float32");let g=d,h=!1;3===d.rank&&(h=!0,g=Np(d,[1,d.shape[0],d.shape[1],d.shape[2]])),et(4===g.rank,(()=>`Error in fused conv2d: input must be rank 4, but got rank ${g.rank}.`)),et(4===c.rank,(()=>`Error in fused conv2d: filter must be rank 4, but got rank ${c.rank}.`)),Lp("fused conv2d",n,i);const f="NHWC"===o?g.shape[3]:g.shape[1];et(c.shape[2]===f,(()=>`Error in conv2d: depth of input (${f}) must match input depth for filter ${c.shape[2]}.`)),et(Ap(r,a),(()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${r} and dilations '${a}'`));const m=xp(g.shape,c.shape,r,a,n,i);let y,b;if(null!=s&&(y=gi(s,"bias","fused conv2d"),[y]=ta(y,d),"NHWC"===o?Ns(m.outShape,y.shape):(et(y.shape.length<=1,(()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${y.shape.length}.`)),et(0===y.shape.length||y.shape[0]===m.outChannels||1===y.shape[0],(()=>`Error in fused conv2d: bias shape (${y.shape}) is not compatible with the number of output channels (${m.outChannels})`)))),null!=l){const e=l.shape;if(et(e.length<=1||3===e.length,(()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${e.length}.`)),1===e.length)et(1===e[0]||e[0]===m.outChannels,(()=>`Error in fused conv2d: PReLU activation weights (${e}) is not compatible with the number of output channels (${m.outChannels}).`));else if(3===e.length)try{Ns(e,m.outShape)}catch(t){const r=`Error in fused conv2d: PReLU activation weights (${e}) is not compatible with the output shape of the conv2d (${m.outShape}).`;throw Error(r)}b=gi(l,"prelu weights","fused conv2d")}const _=(e,t)=>{et("NHWC"===o,(()=>`Error in gradient of fused conv2D: got dataFormat of ${o} but only NHWC is currently supported.`));const[i,s,l,u]=t,d=fc(e,l,p);et(Ip(a),(()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${a}'`));const c=[ul(s.shape,d,i,r,n),hc(s,d,i.shape,r,n)];if(null!=u){const e=mc(u,d);c.push(e)}return c},v={x:g,filter:c,bias:y,preluActivationWeights:b},w={strides:r,pad:n,dataFormat:o,dilations:a,dimRoundingMode:i,activation:p,leakyreluAlpha:u};if(null==s){const e=hu(((e,t,r)=>{let n=pa.runKernel(Rn,v,w);return r([t,e,n]),h&&(n=Np(n,[n.shape[1],n.shape[2],n.shape[3]])),{value:n,gradFunc:_}}));return e(g,c)}{const e=hu(((e,t,r,n)=>{let o=pa.runKernel(Rn,v,w);return n([t,e,o,r]),h&&(o=Np(o,[o.shape[1],o.shape[2],o.shape[3]])),{value:o,gradFunc:_}}));return e(g,c,y)}}}),vc=mi({depthwiseConv2dNativeBackpropFilter_:function(e,t,r,n,o,a=[1,1],i){let s=e;3===e.rank&&(s=Np(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let p=t;3===p.rank&&(p=Np(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const l={x:s,dy:p},u={strides:n,pad:o,dimRoundingMode:i,dilations:a,filterShape:r};return pa.runKernel("DepthwiseConv2dNativeBackpropFilter",l,u)}}),wc=mi({depthwiseConv2dNativeBackpropInput_:function(e,t,r,n,o,a=[1,1],i){let s=t,p=!1;3===t.rank&&(p=!0,s=Np(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const l={dy:s,filter:r},u={strides:n,pad:o,dimRoundingMode:i,dilations:a,inputShape:e},d=pa.runKernel("DepthwiseConv2dNativeBackpropInput",l,u);return p?Np(d,[d.shape[1],d.shape[2],d.shape[3]]):d}}),kc=mi({fusedDepthwiseConv2d_:function({x:e,filter:t,strides:r,pad:n,dataFormat:o="NHWC",dilations:a=[1,1],dimRoundingMode:i,bias:s,activation:p="linear",preluActivationWeights:l,leakyreluAlpha:u}){if(!1===bc(pa.state.gradientDepth,p)){let d=wl(e,t,r,n,o,a,i);return null!=s&&(d=sp(d,s)),yc(d,p,l,u)}const d=gi(e,"x","depthwiseConv2d","float32"),c=gi(t,"filter","depthwiseConv2d","float32");let g=d,h=!1;3===d.rank&&(h=!0,g=Np(d,[1,d.shape[0],d.shape[1],d.shape[2]])),et(4===g.rank,(()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${g.rank}.`)),et(4===c.rank,(()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${c.rank}.`)),et(g.shape[3]===c.shape[2],(()=>`Error in fused depthwiseConv2d: number of input channels (${g.shape[3]}) must match the inChannels dimension in filter ${c.shape[2]}.`)),null==a&&(a=[1,1]),et(Ap(r,a),(()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${r} and dilations '${a}'`)),Lp("fused depthwiseConv2d",n,i);const f=xp(g.shape,c.shape,r,a,n,i,!0);let m,y;null!=s&&(m=gi(s,"bias","fused conv2d"),[m]=ta(m,d),Ns(f.outShape,m.shape)),null!=l&&(y=gi(l,"prelu weights","fused depthwiseConv2d"));const b=(e,t)=>{et(Ip(a),(()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`));const[o,s,l,u]=t,d=fc(e,l,p),c=wc(s.shape,d,o,r,n,a,i),g=vc(s,d,o.shape,r,n,a,i);return null!=u?[c,g,mc(m,d)]:[c,g]},_={x:g,filter:c,bias:m,preluActivationWeights:y},v={strides:r,pad:n,dataFormat:o,dilations:a,dimRoundingMode:i,activation:p,leakyreluAlpha:u};if(null==s){const e=hu(((e,t,r)=>{let n=pa.runKernel(Cn,_,v);return r([t,e,n]),h&&(n=Np(n,[n.shape[1],n.shape[2],n.shape[3]])),{value:n,gradFunc:b}}));return e(g,c)}{const e=hu(((e,t,r,n)=>{let o=pa.runKernel(Cn,_,v);return n([t,e,o,r]),h&&(o=Np(o,[o.shape[1],o.shape[2],o.shape[3]])),{value:o,gradFunc:b}}));return e(g,c,m)}}}),Tc=mi({fusedMatMul_:function({a:e,b:t,transposeA:r=!1,transposeB:n=!1,bias:o,activation:a="linear",preluActivationWeights:i,leakyreluAlpha:s=.2}){if(!1===bc(pa.state.gradientDepth,a)){let p=ks(e,t,r,n);return null!=o&&(p=sp(p,o)),yc(p,a,i,s)}let p=gi(e,"a","fused matMul"),l=gi(t,"b","fused matMul");[p,l]=ta(p,l);const u=r?p.shape[p.rank-2]:p.shape[p.rank-1],d=n?l.shape[l.rank-1]:l.shape[l.rank-2],c=r?p.shape[p.rank-1]:p.shape[p.rank-2],g=n?l.shape[l.rank-2]:l.shape[l.rank-1],h=p.shape.slice(0,-2),f=l.shape.slice(0,-2),m=nt(h),y=nt(f);et(u===d,(()=>`Error in fused matMul: inner shapes (${u}) and (${d}) of Tensors with shapes ${p.shape} and ${l.shape} and transposeA=${r} and transposeB=${n} must match.`));const b=Ns(p.shape.slice(0,-2),l.shape.slice(0,-2)).concat([c,g]),_=Np(p,r?[m,u,c]:[m,c,u]),v=Np(l,n?[y,g,d]:[y,d,g]);let w,k;null!=o&&(w=gi(o,"bias","fused matMul"),[w]=ta(w,p),Ns(b,w.shape)),null!=i&&(k=gi(i,"prelu weights","fused matMul"));const T=(e,t)=>{const[i,s,p,l]=t,u=fc(Np(e,p.shape),p,a);let d,c;return r||n?!r&&n?(d=ks(u,s,!1,!1),c=ks(u,i,!0,!1)):r&&!n?(d=ks(s,u,!1,!0),c=ks(i,u,!1,!1)):(d=ks(s,u,!0,!0),c=ks(u,i,!0,!0)):(d=ks(u,s,!1,!0),c=ks(i,u,!0,!1)),null!=o?[d,c,mc(l,u)]:[d,c]},O={a:_,b:v,bias:w,preluActivationWeights:k},x={transposeA:r,transposeB:n,activation:a,leakyreluAlpha:s};if(null==o){const e=hu(((e,t,r)=>{const n=pa.runKernel(Mn,O,x);return r([e,t,n]),{value:Np(n,b),gradFunc:T}}));return e(_,v)}{const e=hu(((e,t,r,n)=>{const o=pa.runKernel(Mn,O,x);return n([e,t,o,r]),{value:Np(o,b),gradFunc:T}}));return e(_,v,w)}}});var Oc=Object.freeze({__proto__:null,conv2d:_c,depthwiseConv2d:kc,matMul:Tc});const xc=mi({hammingWindow_:function(e){return gc(e,.54,.46)}}),Sc=mi({hannWindow_:function(e){return gc(e,.5,.5)}}),Ec=mi({frame_:function(e,t,r,n=!1,o=0){let a=0;const i=[];for(;a+t<=e.size;)i.push(Up(e,a,t)),a+=r;if(n)for(;a<e.size;){const n=a+t-e.size,s=Wp([Up(e,a,t-n),rl([n],o)]);i.push(s),a+=r}return 0===i.length?Zd([],[0,t]):Np(Wp(i),[i.length,t])}}),Fc=mi({stft_:function(e,t,r,n,o=Sc){null==n&&(n=cc(t));const a=Ec(e,t,r),i=up(a,o(t));return Hd(i,n)}}),Mc=mi({cropAndResize_:function(e,t,r,n,o="bilinear",a=0){const i=gi(e,"image","cropAndResize"),s=gi(t,"boxes","cropAndResize","float32"),p=gi(r,"boxInd","cropAndResize","int32"),l=s.shape[0];et(4===i.rank,(()=>`Error in cropAndResize: image must be rank 4,but got rank ${i.rank}.`)),et(2===s.rank&&4===s.shape[1],(()=>`Error in cropAndResize: boxes must be have size [${l},4] but had shape ${s.shape}.`)),et(1===p.rank&&p.shape[0]===l,(()=>`Error in cropAndResize: boxInd must be have size [${l}] but had shape ${s.shape}.`)),et(2===n.length,(()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${n.length}.`)),et(n[0]>=1&&n[1]>=1,(()=>`cropSize must be atleast [1,1], but was ${n}`)),et("bilinear"===o||"nearest"===o,(()=>`method must be bilinear or nearest, but was ${o}`));const u={image:i,boxes:s,boxInd:p},d={method:o,extrapolationValue:a,cropSize:n};return pa.runKernel(er,u,d)}}),Rc=mi({flipLeftRight_:function(e){const t=gi(e,"image","flipLeftRight","float32");et(4===t.rank,(()=>`Error in flipLeftRight: image must be rank 4,but got rank ${t.rank}.`));const r={image:t};return pa.runKernel(lr,r,{})}}),Cc=mi({grayscaleToRGB_:function(e){const t=gi(e,"image","grayscaleToRGB"),r=t.rank-1,n=t.shape[r];et(t.rank>=2,(()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${t.rank}.`)),et(1===n,(()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${n}.`));const o=new Array(t.rank);return o.fill(1,0,r),o[r]=3,Zl(t,o)}}),Ic=mi({rotateWithOffset_:function(e,t,r=0,n=.5){const o=gi(e,"image","rotateWithOffset","float32");et(4===o.rank,(()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${o.rank}.`));const a={image:o},i={radians:t,fillValue:r,center:n};return pa.runKernel(Fn,a,i)}});function Ac(e,t,r,n,o,a){null==n&&(n=.5),null==o&&(o=Number.NEGATIVE_INFINITY),null==a&&(a=0);const i=e.shape[0];return r=Math.min(r,i),et(0<=n&&n<=1,(()=>`iouThreshold must be in [0, 1], but was '${n}'`)),et(2===e.rank,(()=>`boxes must be a 2D tensor, but was of rank '${e.rank}'`)),et(4===e.shape[1],(()=>`boxes must have 4 columns, but 2nd dimension was ${e.shape[1]}`)),et(1===t.rank,(()=>"scores must be a 1D tensor")),et(t.shape[0]===i,(()=>`scores has incompatible shape with boxes. Expected ${i}, but was ${t.shape[0]}`)),et(0<=a&&a<=1,(()=>`softNmsSigma must be in [0, 1], but was '${a}'`)),{maxOutputSize:r,iouThreshold:n,scoreThreshold:o,softNmsSigma:a}}const Bc=mi({nonMaxSuppression_:function(e,t,r,n=.5,o=Number.NEGATIVE_INFINITY){const a=gi(e,"boxes","nonMaxSuppression","float32"),i=gi(t,"scores","nonMaxSuppression","float32"),s=Ac(a,i,r,n,o),p={maxOutputSize:r=s.maxOutputSize,iouThreshold:n=s.iouThreshold,scoreThreshold:o=s.scoreThreshold};return pa.runKernel(Br,{boxes:a,scores:i},p)}});function Dc(e,t,r){const n=function(e,t,r){return function(e,t,r){let n=0,o=e.length,a=0,i=!1;for(;n<o;){a=n+(o-n>>>1);const s=r(t,e[a]);s>0?n=a+1:(o=a,i=!s)}return i?n:-n-1}(e,t,r||Lc)}(e,t,r),o=n<0?-(n+1):n;e.splice(o,0,t)}function Lc(e,t){return e>t?1:e<t?-1:0}function Nc(e,t,r,n,o,a,i=!1,s=!1,p=!1){const l=[];for(let e=0;e<t.length;e++)t[e]>o&&l.push({score:t[e],boxIndex:e,suppressBeginIndex:0});l.sort(Gc);const u=a>0?-.5/a:0,d=[],c=[];for(;d.length<r&&l.length>0;){const t=l.pop(),{score:r,boxIndex:a,suppressBeginIndex:i}=t;if(r<o)break;let s=!1;for(let r=d.length-1;r>=i;--r){const i=Pc(e,a,d[r]);if(i>=n){s=!0;break}if(t.score=t.score*jc(n,u,i),t.score<=o)break}t.suppressBeginIndex=d.length,s||(t.score===r?(d.push(a),c.push(t.score)):t.score>o&&Dc(l,t,Gc))}const g=d.length,h=r-g;s&&h>0&&(d.push(...new Array(h).fill(0)),c.push(...new Array(h).fill(0)));const f={selectedIndices:d};return i&&(f.selectedScores=c),p&&(f.validOutputs=g),f}function Pc(e,t,r){const n=e.subarray(4*t,4*t+4),o=e.subarray(4*r,4*r+4),a=Math.min(n[0],n[2]),i=Math.min(n[1],n[3]),s=Math.max(n[0],n[2]),p=Math.max(n[1],n[3]),l=Math.min(o[0],o[2]),u=Math.min(o[1],o[3]),d=Math.max(o[0],o[2]),c=Math.max(o[1],o[3]),g=(s-a)*(p-i),h=(d-l)*(c-u);if(g<=0||h<=0)return 0;const f=Math.max(a,l),m=Math.max(i,u),y=Math.min(s,d),b=Math.min(p,c),_=Math.max(y-f,0)*Math.max(b-m,0);return _/(g+h-_)}function jc(e,t,r){const n=Math.exp(t*r*r);return r<=e?n:0}function Gc(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}const Wc=mi({nonMaxSuppressionWithScore_:function(e,t,r,n=.5,o=Number.NEGATIVE_INFINITY,a=0){const i=gi(e,"boxes","nonMaxSuppression"),s=gi(t,"scores","nonMaxSuppression"),p=Ac(i,s,r,n,o,a),l={boxes:i,scores:s},u={maxOutputSize:r=p.maxOutputSize,iouThreshold:n=p.iouThreshold,scoreThreshold:o=p.scoreThreshold,softNmsSigma:a=p.softNmsSigma},d=pa.runKernel(Lr,l,u);return{selectedIndices:d[0],selectedScores:d[1]}}}),zc=mi({nonMaxSuppressionPadded_:function(e,t,r,n=.5,o=Number.NEGATIVE_INFINITY,a=!1){const i=gi(e,"boxes","nonMaxSuppression"),s=gi(t,"scores","nonMaxSuppression"),p=Ac(i,s,r,n,o,null),l={boxes:i,scores:s},u={maxOutputSize:p.maxOutputSize,iouThreshold:p.iouThreshold,scoreThreshold:p.scoreThreshold,padToMaxOutputSize:a},d=pa.runKernel(Dr,l,u);return{selectedIndices:d[0],validOutputs:d[1]}}}),Uc=mi({resizeBilinear_:function(e,t,r=!1,n=!1){const o=gi(e,"images","resizeBilinear");et(3===o.rank||4===o.rank,(()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${o.rank}.`)),et(2===t.length,(()=>`Error in resizeBilinear: new shape must 2D, but got shape ${t}.`)),et(!1===n||!1===r,(()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."));let a=o,i=!1;3===o.rank&&(i=!0,a=Np(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const s={images:a},p={alignCorners:r,halfPixelCenters:n,size:t},l=pa.runKernel(Yr,s,p);return i?Np(l,[l.shape[1],l.shape[2],l.shape[3]]):l}}),$c=mi({resizeNearestNeighbor_:function(e,t,r=!1,n=!1){const o=gi(e,"images","resizeNearestNeighbor");et(3===o.rank||4===o.rank,(()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${o.rank}.`)),et(2===t.length,(()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${t}.`)),et("float32"===o.dtype||"int32"===o.dtype,(()=>"`images` must have `int32` or `float32` as dtype")),et(!1===n||!1===r,(()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."));let a=o,i=!1;3===o.rank&&(i=!0,a=Np(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const s={images:a},p={alignCorners:r,halfPixelCenters:n,size:t},l=pa.runKernel(Kr,s,p);return i?Np(l,[l.shape[1],l.shape[2],l.shape[3]]):l}}),Hc=mi({threshold_:function(e,t="binary",r=!1,n=.5){const o=gi(e,"image","threshold"),a=o.shape[0]*o.shape[1];let i,s,p,l,u=up(Qd([n]),255);if(et(3===o.rank,(()=>`Error in threshold: image must be rank 3,but got rank ${o.rank}.`)),et(3===o.shape[2]||1===o.shape[2],(()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${o.shape[2]}.`)),et("int32"===o.dtype||"float32"===o.dtype,(()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${o.dtype}.`)),et("otsu"===t||"binary"===t,(()=>`Method must be binary or otsu, but was ${t}`)),3===o.shape[2]){[i,s,p]=$d(o,[1,1,1],-1);const e=up(i,.2989),t=up(s,.587),r=up(p,.114);l=sp(sp(e,t),r)}else l=e;"otsu"===t&&(u=function(e,t){let r,n,o,a,i,s,p=Qd([-1]),l=Qd([0]),u=Qd([0]);for(let d=0;d<e.size-1;d++){r=Up(e,0,d+1),n=Up(e,d+1),i=lp(Vl(r),t),s=lp(Vl(n),t);const c=Vl(up(r,vd(0,r.size)));o=lp(c,Vl(r));const g=rl(n.shape,r.size),h=sp(vd(0,n.size),g),f=up(n,h);a=lp(Vl(f),Vl(n));const m=yu(o,a),y=yu(o,a),b=up(i,s);u=up(up(b,m),y);const _=nu(u,l);l=xl(_,u,l),p=xl(_,Qd([d]),p)}return p}(Jp(ws(Md(l),"int32"),_i([]),256),a));const d=r?uu(l,u):nu(l,u);return ws(up(d,255),"int32")}}),Vc=mi({transform_:function(e,t,r="nearest",n="constant",o=0,a){const i=gi(e,"image","transform","float32"),s=gi(t,"transforms","transform","float32");et(4===i.rank,(()=>`Error in transform: image must be rank 4,but got rank ${i.rank}.`)),et(2===s.rank&&(s.shape[0]===i.shape[0]||1===s.shape[0])&&8===s.shape[1],(()=>"Error in transform: Input transform should be batch x 8 or 1 x 8")),et(null==a||2===a.length,(()=>`Error in transform: outputShape must be [height, width] or null, but got ${a}.`));const p={image:i,transforms:s},l={interpolation:r,fillMode:n,fillValue:o,outputShape:a};return pa.runKernel(kn,p,l)}}),Kc=mi({bandPart_:function(e,t,r){et(t%1==0,(()=>`bandPart(): numLower must be an integer, got ${t}.`)),et(r%1==0,(()=>`bandPart(): numUpper must be an integer, got ${r}.`));const n=gi(e,"a","bandPart");et(n.rank>=2,(()=>`bandPart(): Rank must be at least 2, got ${n.rank}.`));const o=n.shape,[a,i]=n.shape.slice(-2);if(!(t<=a))throw new Error(`bandPart(): numLower (${t}) must not be greater than the number of rows (${a}).`);if(!(r<=i))throw new Error(`bandPart(): numUpper (${r}) must not be greater than the number of columns (${i}).`);t<0&&(t=a),r<0&&(r=i);const s=Np(vd(0,a,1,"int32"),[-1,1]),p=vd(0,i,1,"int32"),l=yu(s,p),u=vu(uu(l,Ul(+t,"int32")),ou(l,Ul(-r,"int32"))),d=Cu([a,i],n.dtype);return Np(Yd(oc(Np(n,[-1,a,i])).map((e=>xl(u,e,d)))),o)}}),Yc=mi({gramSchmidt_:function(e){let t;if(Array.isArray(e)){t=!1,et(null!=e&&e.length>0,(()=>"Gram-Schmidt process: input must not be null, undefined, or empty"));const r=e[0].shape[0];for(let t=1;t<e.length;++t)et(e[t].shape[0]===r,(()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${e[t].shape[0]} vs. ${r})`))}else t=!0,e=$d(e,e.shape[0],0).map((e=>Kd(e,[0])));et(e.length<=e[0].shape[0],(()=>`Gram-Schmidt: Number of vectors (${e.length}) exceeds number of dimensions (${e[0].shape[0]}).`));const r=[],n=e;for(let t=0;t<e.length;++t)r.push(pa.tidy((()=>{let e=n[t];if(t>0)for(let n=0;n<t;++n){const t=up(Vl(up(r[n],e)),r[n]);e=yu(e,t)}return lp(e,Yl(e,"euclidean"))})));return t?Yd(r,0):r}});function Xc(e,t=!1){return pa.tidy((()=>{et(2===e.shape.length,(()=>`qr2d() requires a 2D Tensor, but got a ${e.shape.length}D Tensor.`));const r=e.shape[0],n=e.shape[1];let o=eu(r),a=Gp(e);const i=Zd([[1]],[1,1]);let s=Gp(i);const p=r>=n?n:r;for(let e=0;e<p;++e){const t=a,p=s,l=o;[s,a,o]=pa.tidy((()=>{const t=Up(a,[e,e],[r-e,1]),p=Yl(t),l=Up(a,[e,e],[1,1]),u=xl(nu(l,0),Zd([[-1]]),Zd([[1]])),d=yu(l,up(u,p)),c=lp(t,d);s=1===c.shape[0]?Gp(i):Wp([i,Up(c,[1,0],[c.shape[0]-1,c.shape[1]])],0);const g=Is(lp(ks(u,d),p)),h=Up(a,[e,0],[r-e,n]),f=up(g,s),m=Bs(s);if(0===e)a=yu(h,ks(f,ks(m,h)));else{const t=yu(h,ks(f,ks(m,h)));a=Wp([Up(a,[0,0],[e,n]),t],0)}const y=Bs(f),b=Up(o,[0,e],[r,o.shape[1]-e]);if(0===e)o=yu(b,ks(ks(b,s),y));else{const t=yu(b,ks(ks(b,s),y));o=Wp([Up(o,[0,0],[r,e]),t],1)}return[s,a,o]})),Ss([t,p,l])}return!t&&r>n&&(o=Up(o,[0,0],[r,n]),a=Up(a,[0,0],[n,n])),[o,a]}))}const qc=mi({qr_:function(e,t=!1){if(et(e.rank>=2,(()=>`qr() requires input tensor to have a rank >= 2, but got rank ${e.rank}`)),2===e.rank)return Xc(e,t);{const r=e.shape.slice(0,e.shape.length-2).reduce(((e,t)=>e*t)),n=oc(Np(e,[r,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),o=[],a=[];return n.forEach((e=>{const[r,n]=Xc(e,t);o.push(r),a.push(n)})),[Np(Yd(o,0),e.shape),Np(Yd(a,0),e.shape)]}}});var Jc;!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(Jc||(Jc={}));const Qc=mi({computeWeightedLoss_:function(e,t,r=Jc.SUM_BY_NONZERO_WEIGHTS){const n=gi(e,"losses","computeWeightedLoss");let o=null;null!=t&&(o=gi(t,"weights","computeWeightedLoss"));const a=null==o?n:up(n,o);if(r===Jc.NONE)return a;if(r===Jc.SUM)return Vl(a);if(r===Jc.MEAN){if(null==o)return Ru(a);{const e=n.size/o.size,t=lp(Vl(a),Vl(o));return e>1?lp(t,Ul(e)):t}}if(r===Jc.SUM_BY_NONZERO_WEIGHTS){if(null==o)return lp(Vl(a),Ul(n.size));{const e=up(o,Iu(n.shape)),t=ws(Vl(ju(e,Ul(0))),"float32");return lp(Vl(a),t)}}throw Error(`Unknown reduction: ${r}`)}}),Zc=mi({absoluteDifference_:function(e,t,r,n=Jc.SUM_BY_NONZERO_WEIGHTS){const o=gi(e,"labels","absoluteDifference"),a=gi(t,"predictions","absoluteDifference");let i=null;null!=r&&(i=gi(r,"weights","absoluteDifference")),tt(o.shape,a.shape,"Error in absoluteDifference: ");const s=dp(yu(o,a));return Qc(s,i,n)}}),eg=mi({cosineDistance_:function(e,t,r,n,o=Jc.SUM_BY_NONZERO_WEIGHTS){const a=gi(e,"labels","cosineDistance"),i=gi(t,"predictions","cosineDistance");let s=null;null!=n&&(s=gi(n,"weights","cosineDistance")),tt(a.shape,i.shape,"Error in cosineDistance: ");const p=Ul(1),l=yu(p,Vl(up(a,i),r,!0));return Qc(l,s,o)}}),tg=mi({hingeLoss_:function(e,t,r,n=Jc.SUM_BY_NONZERO_WEIGHTS){let o=gi(e,"labels","hingeLoss");const a=gi(t,"predictions","hingeLoss");let i=null;null!=r&&(i=gi(r,"weights","hingeLoss")),tt(o.shape,a.shape,"Error in hingeLoss: ");const s=Ul(1);o=yu(up(Ul(2),o),s);const p=kd(yu(s,up(o,a)));return Qc(p,i,n)}}),rg=mi({huberLoss_:function(e,t,r,n=1,o=Jc.SUM_BY_NONZERO_WEIGHTS){const a=gi(e,"labels","huberLoss"),i=gi(t,"predictions","huberLoss");let s=null;null!=r&&(s=gi(r,"weights","huberLoss")),tt(a.shape,i.shape,"Error in huberLoss: ");const p=Ul(n),l=dp(yu(i,a)),u=Au(l,p),d=yu(l,u),c=sp(up(Ul(.5),Hl(u)),up(p,d));return Qc(c,s,o)}}),ng=mi({logLoss_:function(e,t,r,n=1e-7,o=Jc.SUM_BY_NONZERO_WEIGHTS){const a=gi(e,"labels","logLoss"),i=gi(t,"predictions","logLoss");let s=null;null!=r&&(s=gi(r,"weights","logLoss")),tt(a.shape,i.shape,"Error in logLoss: ");const p=Ul(1),l=Ul(n),u=Is(up(a,cu(sp(i,l)))),d=up(yu(p,a),cu(sp(yu(p,i),l))),c=yu(u,d);return Qc(c,s,o)}}),og=mi({meanSquaredError_:function(e,t,r,n=Jc.SUM_BY_NONZERO_WEIGHTS){const o=gi(e,"labels","meanSquaredError"),a=gi(t,"predictions","meanSquaredError");let i=null;null!=r&&(i=gi(r,"weights","meanSquaredError")),tt(o.shape,a.shape,"Error in meanSquaredError: ");const s=Vd(o,a);return Qc(s,i,n)}}),ag=mi({sigmoidCrossEntropy_:function(e,t,r,n=0,o=Jc.SUM_BY_NONZERO_WEIGHTS){let a=gi(e,"multiClassLabels","sigmoidCrossEntropy");const i=gi(t,"logits","sigmoidCrossEntropy");let s=null;if(null!=r&&(s=gi(r,"weights","sigmoidCrossEntropy")),tt(a.shape,i.shape,"Error in sigmoidCrossEntropy: "),n>0){const e=Ul(n),t=Ul(1),r=Ul(.5);a=sp(up(a,yu(t,e)),up(r,e))}const p=function(e,t){const r=gi(e,"labels","sigmoidCrossEntropyWithLogits"),n=gi(t,"logits","sigmoidCrossEntropyWithLogits");tt(r.shape,n.shape,"Error in sigmoidCrossEntropyWithLogits: ");const o=kd(n),a=up(n,r),i=gu(ql(Is(dp(n))));return sp(yu(o,a),i)}(a,i);return Qc(p,s,o)}}),ig=mi({softmaxCrossEntropy_:function(e,t,r,n=0,o=Jc.SUM_BY_NONZERO_WEIGHTS){let a=gi(e,"onehotLabels","softmaxCrossEntropy");const i=gi(t,"logits","softmaxCrossEntropy");let s=null;if(null!=r&&(s=gi(r,"weights","softmaxCrossEntropy")),tt(a.shape,i.shape,"Error in softmaxCrossEntropy: "),n>0){const e=Ul(n),t=Ul(1),r=Ul(a.shape[1]);a=sp(up(a,yu(t,e)),lp(e,r))}const p=function(e,t,r=-1){if(-1===r&&(r=t.rank-1),r!==t.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${t.rank} and dim was ${r}`);const n=hu(((e,t,n)=>{const o=_u(t,[r],!0),a=yu(ws(t,"float32"),o);n([e,a]);const i=Is(up(a,e));return{value:Vl(i,[r]),gradFunc:(e,t)=>{const[n,o]=t,a=Dl(e.shape,[r]);return[up(Np(e,a),yu(ws(n,"float32"),ql(o))),up(Np(e,a),yu(ql(o),ws(n,"float32")))]}}}));return n(e,t)}(a,i);return Qc(p,s,o)}}),sg=mi({sparseFillEmptyRows_:function(e,t,r,n){const o=gi(e,"indices","sparseFillEmptyRows","int32"),a=gi(t,"values","sparseFillEmptyRows"),i=gi(r,"denseShape","sparseFillEmptyRows","int32"),s=gi(n,"defaultValue","sparseFillEmptyRows",a.dtype);if(2!==o.rank)throw new Error(`Indices should be Tensor2D but received shape\n        ${o.shape}`);if(1!==a.rank)throw new Error(`Values should be Tensor1D but received shape ${a.shape}`);if(1!==i.rank)throw new Error(`Dense shape should be Tensor1D but received shape ${i.shape}`);if(0!==s.rank)throw new Error(`Default value should be a scalar but received shape ${s.shape}`);const p={indices:o,values:a,denseShape:i,defaultValue:s},l=pa.runKernel(ln,p);return{outputIndices:l[0],outputValues:l[1],emptyRowIndicator:l[2],reverseIndexMap:l[3]}}}),pg=mi({sparseReshape_:function(e,t,r){const n=gi(e,"inputIndices","sparseReshape","int32"),o=gi(t,"inputShape","sparseReshape","int32"),a=gi(r,"newShape","sparseReshape","int32");if(2!==n.rank)throw new Error(`Input indices should be Tensor2D but received shape\n        ${n.shape}`);if(1!==o.rank)throw new Error(`Input shape should be Tensor1D but received shape ${o.shape}`);if(1!==a.rank)throw new Error(`New shape should be Tensor1D but received shape ${a.shape}`);const i={inputIndices:n,inputShape:o,newShape:a},s=pa.runKernel(un,i);return{outputIndices:s[0],outputShape:s[1]}}}),lg=mi({sparseSegmentMean_:function(e,t,r){const n=gi(e,"data","sparseSegmentMean"),o=gi(t,"indices","sparseSegmentMean","int32"),a=gi(r,"segmentIds","sparseSegmentMean","int32");if(n.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==o.rank)throw new Error(`Indices should be Tensor1D but received shape\n          ${o.shape}`);if(1!==a.rank)throw new Error(`Segment ids should be Tensor1D but received shape\n          ${a.shape}`);const i={data:n,indices:o,segmentIds:a};return pa.runKernel(dn,i)}}),ug=mi({sparseSegmentSum_:function(e,t,r){const n=gi(e,"data","sparseSegmentSum"),o=gi(t,"indices","sparseSegmentSum","int32"),a=gi(r,"segmentIds","sparseSegmentSum","int32");if(n.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==o.rank)throw new Error(`Indices should be Tensor1D but received shape\n         ${o.shape}`);if(1!==a.rank)throw new Error(`Segment ids should be Tensor1D but received shape\n         ${a.shape}`);const i={data:n,indices:o,segmentIds:a};return pa.runKernel(cn,i)}}),dg=mi({stringNGrams_:function(e,t,r,n,o,a,i,s){const p=gi(e,"data","stringNGrams","string");if("string"!==p.dtype)throw new Error("Data must be of datatype string");if(1!==p.shape.length)throw new Error(`Data must be a vector, saw: ${p.shape}`);const l=gi(t,"dataSplits","stringNGrams");if("int32"!==l.dtype)throw new Error("Data splits must be of datatype int32");const u={separator:r,nGramWidths:n,leftPad:o,rightPad:a,padWidth:i,preserveShortSequences:s},d={data:p,dataSplits:l},c=pa.runKernel(fn,d,u);return{nGrams:c[0],nGramsSplits:c[1]}}}),cg={fft:Wd,ifft:zd,rfft:Hd,irfft:Ud},gg={hammingWindow:xc,hannWindow:Sc,frame:Ec,stft:Fc},hg={flipLeftRight:Rc,grayscaleToRGB:Cc,resizeNearestNeighbor:$c,resizeBilinear:Uc,rotateWithOffset:Ic,cropAndResize:Mc,nonMaxSuppression:Bc,nonMaxSuppressionAsync:async function(e,t,r,n=.5,o=Number.NEGATIVE_INFINITY){const a=gi(e,"boxes","nonMaxSuppressionAsync"),i=gi(t,"scores","nonMaxSuppressionAsync"),s=Ac(a,i,r,n,o);r=s.maxOutputSize,n=s.iouThreshold,o=s.scoreThreshold;const p=await Promise.all([a.data(),i.data()]),l=p[0],u=p[1],{selectedIndices:d}=function(e,t,r,n,o){return Nc(e,t,r,n,o,0)}(l,u,r,n,o);return a!==e&&a.dispose(),i!==t&&i.dispose(),Qd(d,"int32")},nonMaxSuppressionWithScore:Wc,nonMaxSuppressionWithScoreAsync:async function(e,t,r,n=.5,o=Number.NEGATIVE_INFINITY,a=0){const i=gi(e,"boxes","nonMaxSuppressionAsync"),s=gi(t,"scores","nonMaxSuppressionAsync"),p=Ac(i,s,r,n,o,a);r=p.maxOutputSize,n=p.iouThreshold,o=p.scoreThreshold,a=p.softNmsSigma;const l=await Promise.all([i.data(),s.data()]),u=l[0],d=l[1],{selectedIndices:c,selectedScores:g}=function(e,t,r,n,o,a){return Nc(e,t,r,n,o,a,!0)}(u,d,r,n,o,a);return i!==e&&i.dispose(),s!==t&&s.dispose(),{selectedIndices:Qd(c,"int32"),selectedScores:Qd(g)}},nonMaxSuppressionPadded:zc,nonMaxSuppressionPaddedAsync:async function(e,t,r,n=.5,o=Number.NEGATIVE_INFINITY,a=!1){const i=gi(e,"boxes","nonMaxSuppressionAsync"),s=gi(t,"scores","nonMaxSuppressionAsync"),p=Ac(i,s,r,n,o,null),l=p.maxOutputSize,u=p.iouThreshold,d=p.scoreThreshold,[c,g]=await Promise.all([i.data(),s.data()]),{selectedIndices:h,validOutputs:f}=function(e,t,r,n,o,a){return Nc(e,t,r,n,o,0,!1,a,!0)}(c,g,l,u,d,a);return i!==e&&i.dispose(),s!==t&&s.dispose(),{selectedIndices:Qd(h,"int32"),validOutputs:Ul(f,"int32")}},threshold:Hc,transform:Vc},fg={bandPart:Kc,gramSchmidt:Yc,qr:qc},mg={absoluteDifference:Zc,computeWeightedLoss:Qc,cosineDistance:eg,hingeLoss:tg,huberLoss:rg,logLoss:ng,meanSquaredError:og,sigmoidCrossEntropy:ag,softmaxCrossEntropy:ig},yg={sparseFillEmptyRows:sg,sparseReshape:pg,sparseSegmentMean:lg,sparseSegmentSum:ug},bg={stringNGrams:dg,stringSplit:mi({stringSplit_:function(e,t,r=!0){const n=gi(e,"input","stringSplit","string"),o=gi(t,"delimiter","stringSplit","string");if(1!==n.rank)throw new Error(`Input should be Tensor1D but received shape ${n.shape}`);if(0!==o.rank)throw new Error(`Delimiter should be a scalar but received shape ${o.shape}`);const a={skipEmpty:r},i={input:n,delimiter:o},s=pa.runKernel(mn,i,a);return{indices:s[0],values:s[1],shape:s[2]}}}),stringToHashBucketFast:mi({stringToHashBucketFast_:function(e,t){const r=gi(e,"input","stringToHashBucketFast","string"),n={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");const o={input:r};return pa.runKernel(yn,o,n)}})},_g="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof setImmediate?setImmediate:e=>e();function vg(e,t){const r=e[0].length;e.forEach(((e,t)=>{et(e.length===r,(()=>`Error in concat${r}D: rank of tensors[${t}] must be the same as the rank of the rest (${r})`))})),et(t>=0&&t<r,(()=>`Error in concat${r}D: axis must be between 0 and ${r-1}.`));const n=e[0];e.forEach(((e,o)=>{for(let a=0;a<r;a++)et(a===t||e[a]===n[a],(()=>`Error in concat${r}D: Shape of tensors[${o}] (${e}) does not match the shape of the rest (${n}) along the non-concatenated axis ${o}.`))}))}function wg(e,t){const r=e[0].slice();for(let n=1;n<e.length;n++)r[t]+=e[n][t];return r}var kg;function Tg(e,t,r){let n=new Array;if(null==r&&null==t)return n;if(null==t)for(;n.length<e+r.length;)n.push(-1);else n=t.slice();if(null==r)return n;if(e+r.length!==n.length)throw new Error(`rt input.shape and shape=${t} are incompatible: rt input.rank = ${e+r.length}, but shape.rank = ${n.length}`);for(let o=1;o<r.length;++o){const a=r[o],i=n[n.length-r.length+o],s=n[i];if(a>=0)if(s>=0){if(s!==a)throw new Error(`rt input.shape and shape=${t} are incompatible: rt input.shape[${o+e}] = ${a} but shape[${o+e}] = ${s}`)}else n[i]=a}return n}function Og(e){const t={FIRST_DIM_SIZE:kg.FIRST_DIM_SIZE,VALUE_ROWIDS:kg.VALUE_ROWIDS,ROW_LENGTHS:kg.ROW_LENGTHS,ROW_SPLITS:kg.ROW_SPLITS,ROW_LIMITS:kg.ROW_LIMITS,ROW_STARTS:kg.ROW_STARTS},r=[];for(const n of e){if(!(n in t))break;r.push(t[n])}return r}function xg(e){return 0===e.length?0:e[0]===kg.FIRST_DIM_SIZE?e.length-1:e.length}function Sg(e,t){if(null==e||null==t)return;const r=e.length,n=t.length;if(r>=n)throw new Error(`defaultValue.shape=${e} and ragged tensor flatValues.shape=${t}, are incompatible: defaultValue.rank = ${r} must be less than ragged tensor input flatValues.rank = ${n})`);for(let o=0;o<Math.min(r,n-1);++o){const r=e[o],n=t[o+1];if(r>=0&&n>=0&&1!==r&&r!==n)throw new Error(`defaultValue.shape=${e}, and ragged tensor input flatValues.shape=${t} are incompatible: defaultValue.shape[${o-e.length}] = ${r} but ragged tensor input.flatValues.shape[${o-e.length}] = ${n}`)}}!function(e){e[e.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",e[e.VALUE_ROWIDS=1]="VALUE_ROWIDS",e[e.ROW_LENGTHS=2]="ROW_LENGTHS",e[e.ROW_SPLITS=3]="ROW_SPLITS",e[e.ROW_LIMITS=4]="ROW_LIMITS",e[e.ROW_STARTS=5]="ROW_STARTS"}(kg||(kg={}));const Eg=30;function Fg(e){return e<=Eg?e:_t(e,Math.floor(Math.sqrt(e)))}function Mg(e,t,r){return[r*("number"==typeof e?e:e[0]),t*("number"==typeof e?e:e[1])]}function Rg(e,t,r,n=!0){let o=[];if(n)o=o.concat(t.slice(0)),o.push(e[0]/r),o=o.concat(e.slice(1));else{o=o.concat(e[0]);const r=t.length;for(let n=0;n<r;++n)o=o.concat([e[n+1]/t[n],t[n]]);o=o.concat(e.slice(r+1))}return o}function Cg(e,t,r=!0){const n=[];if(r){n.push(t);for(let r=t+1;r<e;++r)r<=2*t?(n.push(r),n.push(r-(t+1))):n.push(r)}else{const r=[],o=[];for(let n=1;n<e;++n)n>=2*t+1||n%2==1?o.push(n):r.push(n);n.push(...r),n.push(0),n.push(...o)}return n}function Ig(e,t,r,n=!0){const o=[];n?o.push(e[0]/r):o.push(e[0]*r);for(let r=1;r<e.length;++r)r<=t.length?n?o.push(t[r-1]*e[r]):o.push(e[r]/t[r-1]):o.push(e[r]);return o}function Ag(e,t){const r=[0];for(let n=0;n<t;++n)r.push(e[n][0]);return r}function Bg(e,t,r){const n=e.slice(0,1);for(let o=0;o<r;++o)n.push(e[o+1]-t[o][0]-t[o][1]);return n}function Dg(e,t){if(e.length!==t.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${e.length}, imag: ${t.length}.`);const r=new Float32Array(2*e.length);for(let n=0;n<r.length;n+=2)r[n]=e[n/2],r[n+1]=t[n/2];return r}const Lg=/->/g;function Ng(e,t){const r=[];for(let n=0;n<e.length;++n)0!==e[n].length&&-1===e[n].indexOf(t)&&-1!==t||r.push(n);return r}function Pg(e,t,r=0){let n=[];if("number"==typeof t)et(e.shape[r]%t==0,(()=>"Number of splits must evenly divide the axis.")),n=new Array(t).fill(e.shape[r]/t);else{et(t.reduce(((e,t)=>(-1===t&&(e+=1),e)),0)<=1,(()=>"There should be only one negative value in split array."));const o=t.indexOf(-1);if(-1!==o){const n=t.reduce(((e,t)=>t>0?e+t:e));t[o]=e.shape[r]-n}et(e.shape[r]===t.reduce(((e,t)=>e+t)),(()=>"The sum of sizes must match the size of the axis dimension.")),n=t}return n}function jg(e){return`Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ${e}`}function Gg(e,t){return`indices(${e}, 0) is invalid: ${t} < 0`}function Wg(e,t,r){return`indices(${e}, 0) is invalid: ${t} >= ${r}`}function zg(e,t){return`only one output dimension may be -1, not both ${e} and ${t}`}function Ug(e,t){return`size ${e} must be non-negative, not ${t}`}function $g(e,t){return`Input to reshape is a SparseTensor with ${nt(e)}\n  dense values, but the requested shape requires a multiple of ${nt(t)}. inputShape=${e} outputShape= ${t}`}function Hg(e,t){return`Input to reshape is a tensor with ${nt(e)} dense values, but the requested shape has ${nt(t)}. inputShape=${e} outputShape=${t}`}function Vg(e,t){return`Segment id ${e} out of range [0, ${t}), possibly because segmentIds input is not sorted.`}function Kg(e,t,r){return`Bad: indices[${e}] == ${t} out of range [0, ${r})`}function Yg(e,t,r,n){const o=t.shape.length,a=e.shape.length;if(0!==n&&(n<-o||n>o))throw new Error(`Expect batchDims in the range of [-${o}, ${o}], but got ${n}`);if(n<0&&(n+=o),n>a)throw new Error(`batchDims (${n}) must be less than rank(x) (\n    ${a}).`);if(r<n)throw new Error(`batchDims (${n}) must be less than or equal to axis (${r}).`);for(let r=0;r<n;++r)if(e.shape[r]!==t.shape[r])throw new Error(`x.shape[${r}]: ${e.shape[r]} should be equal to indices.shape[${r}]: ${t.shape[r]}.`);const i=e.shape[r],s=[];let p=1,l=1,u=1;for(let t=0;t<n;++t)s.push(e.shape[t]),p*=e.shape[t];for(let t=n;t<r;t++)s.push(e.shape[t]),l*=e.shape[t];for(let e=n;e<o;e++)s.push(t.shape[e]);for(let t=r+1;t<a;t++)s.push(e.shape[t]),u*=e.shape[t];return{batchSize:p,sliceSize:u,outerSize:l,dimSize:i,outputShape:s}}var Xg=Object.freeze({__proto__:null,segOpComputeOptimalWindowSize:function(e,t){let r,n=!1;for(e<=Eg?(r=e,n=!0):r=_t(e,Math.floor(Math.sqrt(e)));!n;)r>t||r===e?n=!0:r=_t(e,r+1);return r},computeOutShape:function(e,t,r){const n=[],o=e.length;for(let a=0;a<o;a++)a!==t?n.push(e[a]):n.push(r);return n},collectGatherOpShapeInfo:Yg});function qg(e){try{return e.map((e=>Mo(e)))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function Jg(e){return e.map((e=>Fo(e)))}var Qg=Object.freeze({__proto__:null,slice_util:ip,segment_util:Xg,fromUint8ToStringArray:qg,fromStringArrayToUint8:Jg,upcastType:ea,axesAreInnerMostDims:Il,combineLocations:Al,computeOutAndReduceShapes:Bl,expandShapeToKeepDim:Dl,assertAxesAreInnerMostDims:Ll,getAxesPermutation:Nl,getUndoAxesPermutation:Pl,getInnerMostAxes:jl,getBroadcastDims:Ds,getReductionAxes:Ls,assertAndGetBroadcastShape:Ns,assertParamsConsistent:vg,computeOutShape:wg,computeDilation2DInfo:function(e,t,r,n,o="NHWC",a){return xp(e,[...t,e[3]],r,a,n,null,null,Dp(o))},computePool2DInfo:Op,computePool3DInfo:function(e,t,r,n,o,a,i="NDHWC"){const[s,p,l]=Mp(t);let u,d;if("NDHWC"===i)d="channelsLast",u=[s,p,l,e[4],e[4]];else{if("NCDHW"!==i)throw new Error(`Unknown dataFormat ${i}`);d="channelsFirst",u=[s,p,l,e[1],e[1]]}return Sp(e,u,r,n,o,!1,d,a)},computeConv2DInfo:xp,computeConv3DInfo:Sp,computeDefaultPad:Ep,tupleValuesAreOne:Ip,eitherStridesOrDilationsAreOne:Ap,stridesOrDilationsArePositive:Bp,convertConv2DDataFormat:Dp,checkPadOnDimRoundingMode:Lp,getFusedDyActivation:fc,getFusedBiasGradient:mc,applyActivation:yc,shouldFuse:bc,get RowPartitionType(){return kg},combineRaggedTensorToTensorShapes:Tg,getRowPartitionTypesHelper:Og,getRaggedRank:xg,validateDefaultValueShape:Sg,PARALLELIZE_THRESHOLD:Eg,computeOptimalWindowSize:Fg,getImageCenter:Mg,getReshaped:Rg,getPermuted:Cg,getReshapedPermuted:Ig,getSliceBeginCoords:Ag,getSliceSize:Bg,prepareAndValidate:Ws,validateUpdateShape:zs,validateInput:Us,calculateShapes:$s,SELU_SCALEALPHA:1.7580993408473768,SELU_SCALE:1.0507009873554805,ERF_P:.3275911,ERF_A1:.254829592,ERF_A2:-.284496736,ERF_A3:1.421413741,ERF_A4:-1.453152027,ERF_A5:1.061405429,warn:In,log:function(...e){It().getBool("IS_TEST")||It().getBool("PROD")||console.log(...e)},mergeRealAndImagArrays:Dg,splitRealAndImagArrays:function(e){const t=new Float32Array(e.length/2),r=new Float32Array(e.length/2);for(let n=0;n<e.length;n+=2)t[n/2]=e[n],r[n/2]=e[n+1];return{real:t,imag:r}},complexWithEvenIndex:function(e){const t=Math.ceil(e.length/4),r=new Float32Array(t),n=new Float32Array(t);for(let t=0;t<e.length;t+=4)r[Math.floor(t/4)]=e[t],n[Math.floor(t/4)]=e[t+1];return{real:r,imag:n}},complexWithOddIndex:function(e){const t=Math.floor(e.length/4),r=new Float32Array(t),n=new Float32Array(t);for(let t=2;t<e.length;t+=4)r[Math.floor(t/4)]=e[t],n[Math.floor(t/4)]=e[t+1];return{real:r,imag:n}},getComplexWithIndex:function(e,t){return{real:e[2*t],imag:e[2*t+1]}},assignToTypedArray:function(e,t,r,n){e[2*n]=t,e[2*n+1]=r},exponents:function(e,t){const r=new Float32Array(e/2),n=new Float32Array(e/2);for(let o=0;o<Math.ceil(e/2);o++){const a=(t?2:-2)*Math.PI*(o/e);r[o]=Math.cos(a),n[o]=Math.sin(a)}return{real:r,imag:n}},exponent:function(e,t,r){const n=(r?2:-2)*Math.PI*(e/t);return{real:Math.cos(n),imag:Math.sin(n)}},decodeEinsumEquation:function(e,t){const r=((e=e.replace(/\s/g,"")).length-e.replace(Lg,"").length)/2;if(r<1)throw new Error("Equations without an arrow are not supported.");if(r>1)throw new Error('Equation must contain exactly one arrow ("->").');const[n,o]=e.split("->");et(-1===n.indexOf("..."),(()=>'The ellipsis notation ("...") is not supported yet.'));const a=n.split(","),i=a.length;if(t!==i)throw new Error(`Expected ${i} input tensors, received ${t}`);if(i>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const s=[];for(let e=0;e<o.length;++e){const t=o[e];if(!a.some((e=>-1!==e.indexOf(t))))throw new Error(`Output subscripts contain the label ${t} not present in the input subscripts.`);-1===s.indexOf(t)&&s.push(t)}for(let e=0;e<n.length;++e){const t=n[e];-1===s.indexOf(t)&&","!==t&&s.push(t)}const p=new Array(a.length);for(let e=0;e<i;++e){if(new Set(a[e].split("")).size!==a[e].length)throw new Error(`Found duplicate axes in input component ${a[e]}. Support for duplicate axes in input is not implemented yet.`);p[e]=[];for(let t=0;t<a[e].length;++t)p[e].push(s.indexOf(a[e][t]))}const l=s.length,u=[];for(let e=o.length;e<l;++e)u.push(e);return{allDims:s,summedDims:u,idDims:p}},getEinsumPermutation:function(e,t){let r=new Array(e);r.fill(-1);for(let e=0;e<t.length;++e)r[t[e]]=e;const n=[];for(let t=0;t<e;++t)-1===r[t]&&n.push(t);return r=r.filter((e=>-1!==e)),{permutationIndices:r,expandDims:n}},checkEinsumDimSizes:function(e,t,r){const n=new Array(e);for(let e=0;e<r.length;++e){const o=r[e].shape;for(let r=0;r<t[e].length;++r)void 0===n[t[e][r]]?n[t[e][r]]=o[r]:et(n[t[e][r]]===o[r],(()=>`Expected dimension ${n[t[e][r]]} at axis ${r} of input shaped ${JSON.stringify(o)}, but got dimension ${o[r]}`))}},getEinsumComputePath:function(e,t){const r=e,n=[];let o=0;0===e.length&&r.push(-1),o=e.length+1;for(let e=0;e<o;++e)n.push([]);const a=[];for(let e=0;e<r.length;++e){const o=Ng(t,r[e]);for(const t of o)-1===a.indexOf(t)&&(n[e].push(t),a.push(t))}return{path:r,steps:n}},isIdentityPermutation:function(e){return e.every(((e,t)=>e===t))},prepareSplitSize:Pg,getSparseFillEmptyRowsIndicesDenseShapeMismatch:jg,getSparseFillEmptyRowsNegativeIndexErrorMessage:Gg,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:Wg,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:zg,getSparseReshapeNegativeOutputDimErrorMessage:Ug,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:function(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"},getSparseReshapeInputOutputMultipleErrorMessage:$g,getSparseReshapeInputOutputMismatchErrorMessage:Hg,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:function(){return"segment ids must be >= 0"},getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:function(){return"segment ids are not increasing"},getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:Vg,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:Kg});class Zg{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,t){return fetch(e,t)}now(){return performance.now()}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error(`Browser's encoder only supports utf-8, but got ${t}`);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,t){return new TextDecoder(t).decode(e)}setTimeoutCustom(e,t){"undefined"!=typeof window&&It().getBool("USE_SETTIMEOUTCUSTOM")?(this.functionRefs.push(e),setTimeout((()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")}),t),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",(e=>{e.source===window&&e.data.name===this.messageName&&(e.stopPropagation(),(0,this.functionRefs[e.data.index])(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0))}),!0))):setTimeout(e,t)}isTypedArray(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}}if(It().get("IS_BROWSER")){It().setPlatform("browser",new Zg);try{ys.registerManager(Zi.URL_SCHEME,new ts)}catch(a){}try{ys.registerManager(Gi.URL_SCHEME,new zi)}catch(a){}}let eh;var th,rh;It().get("IS_NODE")&&!It().get("IS_BROWSER")&&It().setPlatform("node",new class{constructor(){this.util=__webpack_require__(345),this.textEncoder=new this.util.TextEncoder}fetch(e,t){return null!=It().global.fetch?It().global.fetch(e,t):(null==eh&&(eh=__webpack_require__(683)),eh(e,t))}now(){const e=Ke.hrtime();return 1e3*e[0]+e[1]/1e6}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error(`Node built-in encoder only supports utf-8, but got ${t}`);return this.textEncoder.encode(e)}decode(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}),sa(),Ho={buffer:el,cast:ws,clone:Gp,print:qu},It().registerFlag("KEEP_INTERMEDIATE_TENSORS",(()=>!1),(e=>{e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")})),function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"}(th||(th={})),function(e){var t;(t=e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))[t.LEGACY=0]="LEGACY",t[t.V1=1]="V1",t[t.V2=2]="V2"}(rh||(rh={}));const nh={};function oh(e){return nh[e]}function ah(e,t,r,n,o){const a=t.inputParams[e];if(a&&void 0!==a.inputIndexStart){const e=a.inputIndexStart,i=0===a.inputIndexEnd?void 0:void 0===a.inputIndexEnd?e+1:a.inputIndexEnd;if("tensor"===a.type)return ih(t.inputNames[a.inputIndexStart],r,n,o);if("tensors"===a.type)return t.inputNames.slice(e,i).map((e=>ih(e,r,n,o)));const s=ih(t.inputNames.slice(e)[0],r,n,o),p=s.dataSync();return"number"===a.type?p[0]:kt(s.shape,p)}const i=t.attrParams[e];return i&&i.value}function ih(e,t,r,n){const[o,a]=lh(e);if(null!=n){const e=n.getHashTableHandleByName(o);if(null!=e)return e}const i=r.currentContextIds.find((e=>!!t[ph(o,e)]));return void 0!==i?t[ph(o,i)][a]:void 0}function sh(e,t){const[r,n,o]=lh(e);return[ph(r,t&&t.currentContextId),n,o]}function ph(e,t){return t?`${e}-${t}`:e}function lh(e){const t=e.split(":");if(1===t.length)return[e,0,void 0];const r=t[0],n=3===t.length?t[1]:void 0;return[r,Number(t[t.length-1]),n]}function uh(e,t,r){let n=ah("pad",e,t,r);if("explicit"===n){n=ah("explicitPaddings",e,t,r);const o=[[0,0],[0,0],[0,0],[0,0]];for(let e=0;e<4;e++)o[e][0]=n[2*e],o[e][1]=n[2*e+1];return o}return n}function dh(e){return e.kept?e:Gp(e)}var ch=Object.freeze({__proto__:null,json:[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]}),gh=Object.freeze({__proto__:null,json:[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]}),hh=Object.freeze({__proto__:null,json:[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}]}),fh=Object.freeze({__proto__:null,json:[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}]}),mh=Object.freeze({__proto__:null,json:[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}]}),yh=Object.freeze({__proto__:null,json:[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]}),bh=Object.freeze({__proto__:null,json:[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}]}),_h=Object.freeze({__proto__:null,json:[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}]}),vh=Object.freeze({__proto__:null,json:[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}]}),wh=Object.freeze({__proto__:null,json:[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}]}),kh=Object.freeze({__proto__:null,json:[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]}),Th=Object.freeze({__proto__:null,json:[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]}]}),Oh=Object.freeze({__proto__:null,json:[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}]}),xh=Object.freeze({__proto__:null,json:[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}]}),Sh=Object.freeze({__proto__:null,json:[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}]}),Eh=Object.freeze({__proto__:null,json:[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}]}),Fh=Object.freeze({__proto__:null,json:[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}]}),Mh=Object.freeze({__proto__:null,json:[{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}]}),Rh=Object.freeze({__proto__:null,json:[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}]});class Ch{constructor(){const e=[].concat(...[ch,gh,hh,fh,mh,yh,bh,_h,vh,wh,kh,Th,Oh,xh,Sh,Eh,Fh,Mh,Rh].map((e=>e.json)));this.opMappers=e.reduce(((e,t)=>(e[t.tfOpName]=t,e)),{})}static get Instance(){return this._instance||(this._instance=new this)}transformGraph(e,t={}){const r=e.node,n=[],o=[],a=[],i=r.reduce(((e,t)=>(e[t.name]=this.mapNode(t),t.op.startsWith("Placeholder")?n.push(e[t.name]):"Const"===t.op?o.push(e[t.name]):null!=t.input&&0!==t.input.length||a.push(e[t.name]),e)),{});let s=[];const p=[];let l={},u={};null!=t&&(l=this.mapSignatureEntries(t.inputs),u=this.mapSignatureEntries(t.outputs));const d=Object.keys(i);d.forEach((e=>{const t=i[e];t.inputNames.forEach(((e,r)=>{const[n,,o]=sh(e),a=i[n];if(null!=a.outputs){const e=a.outputs.indexOf(o);if(-1!==e){const o=`${n}:${e}`;t.inputNames[r]=o}}t.inputs.push(a),a.children.push(t)}))})),0===Object.keys(u).length?d.forEach((e=>{const t=i[e];0===t.children.length&&p.push(t)})):Object.keys(u).forEach((e=>{const[t]=sh(e),r=i[t];null!=r&&(r.signatureKey=u[e],p.push(r))})),Object.keys(l).length>0?Object.keys(l).forEach((e=>{const[t]=sh(e),r=i[t];r&&(r.signatureKey=l[e],s.push(r))})):s=n;let c={};null!=e.library&&null!=e.library.function&&(c=e.library.function.reduce(((e,t)=>(e[t.signature.name]=this.mapFunction(t),e)),{}));const g={nodes:i,inputs:s,outputs:p,weights:o,placeholders:n,signature:t,functions:c};return a.length>0&&(g.initNodes=a),g}mapSignatureEntries(e){return Object.keys(e||{}).reduce(((t,r)=>(t[e[r].name]=r,t)),{})}mapNode(e){const t=oh(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});const r={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map((e=>e.startsWith("^")?e.slice(1):e)),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return null!=t.inputs&&(r.inputParams=t.inputs.reduce(((e,t)=>(e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e)),{})),null!=t.attrs&&(r.attrParams=t.attrs.reduce(((t,r)=>{const n=r.type;let o;switch(r.type){case"string":o=Ah(e.attr,r.tfName,r.defaultValue),void 0===o&&r.tfDeprecatedName&&(o=Ah(e.attr,r.tfDeprecatedName,r.defaultValue));break;case"string[]":o=Uh(e.attr,r.tfName,r.defaultValue),void 0===o&&r.tfDeprecatedName&&(o=Uh(e.attr,r.tfDeprecatedName,r.defaultValue));break;case"number":o=Dh(e.attr,r.tfName,r.defaultValue||0),void 0===o&&r.tfDeprecatedName&&(o=Dh(e.attr,r.tfDeprecatedName,r.defaultValue));break;case"number[]":o=zh(e.attr,r.tfName,r.defaultValue),void 0===o&&r.tfDeprecatedName&&(o=zh(e.attr,r.tfDeprecatedName,r.defaultValue));break;case"bool":o=Bh(e.attr,r.tfName,r.defaultValue),void 0===o&&r.tfDeprecatedName&&(o=Bh(e.attr,r.tfDeprecatedName,r.defaultValue));break;case"bool[]":o=Hh(e.attr,r.tfName,r.defaultValue),void 0===o&&r.tfDeprecatedName&&(o=Hh(e.attr,r.tfDeprecatedName,r.defaultValue));break;case"shape":o=Wh(e.attr,r.tfName,r.defaultValue),void 0===o&&r.tfDeprecatedName&&(o=Wh(e.attr,r.tfDeprecatedName,r.defaultValue));break;case"shape[]":o=$h(e.attr,r.tfName,r.defaultValue),void 0===o&&r.tfDeprecatedName&&(o=$h(e.attr,r.tfDeprecatedName,r.defaultValue));break;case"dtype":o=Ph(e.attr,r.tfName,r.defaultValue),void 0===o&&r.tfDeprecatedName&&(o=Ph(e.attr,r.tfDeprecatedName,r.defaultValue));break;case"dtype[]":o=jh(e.attr,r.tfName,r.defaultValue),void 0===o&&r.tfDeprecatedName&&(o=jh(e.attr,r.tfDeprecatedName,r.defaultValue));break;case"func":o=Nh(e.attr,r.tfName,r.defaultValue),void 0===o&&r.tfDeprecatedName&&(o=Nh(e.attr,r.tfDeprecatedName,r.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${r.type} for op: ${e.op}`)}return t[r.name]={value:o,type:n},t}),{})),r}mapFunction(e){const t=e.nodeDef,r=[];let n={};null!=t&&(n=t.reduce(((e,t)=>(e[t.name]=this.mapNode(t),"Const"===t.op&&r.push(e[t.name]),e)),{}));const o=[],a=[];e.signature.inputArg.forEach((e=>{const[t]=sh(e.name),r={name:t,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:Lh(e.type),type:"dtype"}},children:[]};r.signatureKey=e.name,o.push(r),n[t]=r})),Object.keys(n).forEach((e=>{const t=n[e];t.inputNames.forEach(((e,r)=>{const[o,,a]=sh(e),i=n[o];if(null!=i.outputs){const e=i.outputs.indexOf(a);if(-1!==e){const n=`${o}:${e}`;t.inputNames[r]=n}}t.inputs.push(i),i.children.push(t)}))}));const i=e.ret;e.signature.outputArg.forEach((e=>{const[t,r]=sh(i[e.name]),o=n[t];null!=o&&(o.defaultOutput=r,a.push(o))}));const s=this.mapArgsToSignature(e);return{nodes:n,inputs:o,outputs:a,weights:r,placeholders:[],signature:s}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce(((e,t)=>(e[t.name]=this.mapArgToTensorInfo(t),e)),{}),outputs:e.signature.outputArg.reduce(((t,r)=>(t[r.name]=this.mapArgToTensorInfo(r,e.ret),t)),{})}}mapArgToTensorInfo(e,t){let r=e.name;return null!=t&&(r=t[r]),{name:r,dtype:e.type}}}function Ih(e,t){const r=Array.isArray(e)?String.fromCharCode.apply(null,e):function(e){const t=It().global;if(void 0!==t.atob)return t.atob(e);if(void 0!==Sa)return new Sa(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(e);return t?r:r.toLowerCase()}function Ah(e,t,r,n=!1){const o=e[t];return null!=o?Ih(o.s,n):r}function Bh(e,t,r){const n=e[t];return n?n.b:r}function Dh(e,t,r){const n=e[t]||{},o=null!=n.i?n.i:null!=n.f?n.f:r;return"number"==typeof o?o:parseInt(o,10)}function Lh(e){switch("string"==typeof e&&(e=th[e]),e){case th.DT_FLOAT:case th.DT_HALF:return"float32";case th.DT_INT32:case th.DT_INT64:case th.DT_INT8:case th.DT_UINT8:return"int32";case th.DT_BOOL:return"bool";case th.DT_DOUBLE:return"float32";case th.DT_STRING:return"string";default:return null}}function Nh(e,t,r){const n=e[t];return n&&n.func?n.func.name:r}function Ph(e,t,r){const n=e[t];return n&&n.type?Lh(n.type):r}function jh(e,t,r){const n=e[t];return n&&n.list&&n.list.type?n.list.type.map((e=>Lh(e))):r}function Gh(e){if(!e.unknownRank)return null!=e.dim?e.dim.map((e=>"number"==typeof e.size?e.size:parseInt(e.size,10))):[]}function Wh(e,t,r){const n=e[t];return n&&n.shape?Gh(n.shape):r}function zh(e,t,r){const n=e[t];return n?((n.list.f&&n.list.f.length?n.list.f:n.list.i)||[]).map((e=>"number"==typeof e?e:parseInt(e,10))):r}function Uh(e,t,r,n=!1){const o=e[t];return o&&o.list&&o.list.s?o.list.s.map((e=>Ih(e,n))):r}function $h(e,t,r){const n=e[t];return n&&n.list&&n.list.shape?n.list.shape.map((e=>Gh(e))):r}function Hh(e,t,r){const n=e[t];return n&&n.list&&n.list.b?n.list.b:r}class Vh{constructor(e,t,r){this.node=e,this.tensorMap=t,this.context=r,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map((e=>this.getInput(e))),null!=e.rawAttrs&&(this.attrs=Object.keys(e.rawAttrs).reduce(((e,t)=>(e[t]=this.getAttr(t),e)),{}))}getInput(e){return ih(e,this.tensorMap,this.context)}getAttr(e,t){const r=this.node.rawAttrs[e];if(null!=r.tensor)return ih(e,this.tensorMap,this.context);if(null!=r.i||null!=r.f)return Dh(this.node.rawAttrs,e,t);if(null!=r.s)return Ah(this.node.rawAttrs,e,t);if(null!=r.b)return Bh(this.node.rawAttrs,e,t);if(null!=r.shape)return Wh(this.node.rawAttrs,e,t);if(null!=r.type)return Ph(this.node.rawAttrs,e,t);if(null!=r.list){if(null!=r.list.i||null!=r.list.f)return zh(this.node.rawAttrs,e,t);if(null!=r.list.s)return Uh(this.node.rawAttrs,e,t);if(null!=r.list.shape)return $h(this.node.rawAttrs,e,t);if(null!=r.list.b)return Hh(this.node.rawAttrs,e,t);if(null!=r.list.type)return jh(this.node.rawAttrs,e,t)}return t}}var Kh=Object.freeze({__proto__:null,abs:dp,acos:cp,acosh:gp,add:sp,addN:hp,all:fp,any:mp,argMax:yp,argMin:bp,asin:_p,asinh:vp,atan:wp,atan2:kp,atanh:Tp,avgPool:Pp,avgPool3d:jp,basicLSTMCell:Hp,batchToSpaceND:Vp,batchNorm:Kp,batchNorm2d:Yp,batchNorm3d:Xp,batchNorm4d:qp,bincount:Jp,broadcastArgs:Qp,broadcastTo:Zp,buffer:el,cast:ws,ceil:tl,clipByValue:nl,clone:Gp,complex:yi,concat:Wp,concat1d:ol,concat2d:al,concat3d:il,concat4d:sl,conv1d:ll,conv2d:pl,conv2dTranspose:dl,conv3d:cl,conv3dTranspose:hl,cos:fl,cosh:ml,cumprod:yl,cumsum:bl,denseBincount:_l,depthToSpace:vl,depthwiseConv2d:wl,diag:kl,dilation2d:Tl,div:lp,divNoNan:El,dot:Fl,einsum:Ml,elu:Rl,equal:Ol,erf:Cl,euclideanNorm:Xl,exp:ql,expandDims:Jl,expm1:Ql,eye:eu,fill:rl,floor:tu,floorDiv:pp,gather:ru,greater:nu,greaterEqual:ou,imag:Cs,isFinite:au,isInf:iu,isNaN:su,leakyRelu:pu,less:lu,lessEqual:uu,linspace:function(e,t,r){if(r<=0)throw new Error("The number of values should be positive.");const n={start:e,stop:t,num:r};return pa.runKernel("LinSpace",{},n)},localResponseNormalization:du,log:cu,log1p:gu,logSigmoid:mu,logSoftmax:bu,logSumExp:_u,logicalAnd:vu,logicalNot:wu,logicalOr:ku,logicalXor:Tu,lowerBound:function(e,t){return xu(e,t,"left")},matMul:ks,max:Gl,maxPool:Su,maxPool3d:Eu,maxPoolWithArgmax:Fu,maximum:Mu,mean:Ru,meshgrid:function(e,t,{indexing:r="xy"}={}){if("xy"!==r&&"ij"!==r)throw new TypeError(`${r} is not a valid third argument to meshgrid`);if(void 0===e)return[];let n=gi(e,"x","meshgrid",e instanceof Vo?e.dtype:"float32");if(void 0===t)return[n];let o=gi(t,"y","meshgrid",t instanceof Vo?t.dtype:"float32");const a=nt(n.shape),i=nt(o.shape);return"xy"===r?(n=Np(n,[1,-1]),o=Np(o,[-1,1]),[ks(Iu([i,1],n.dtype),n),ks(o,Iu([1,a],o.dtype))]):(n=Np(n,[-1,1]),o=Np(o,[1,-1]),[ks(n,Iu([1,i],n.dtype)),ks(Iu([a,1],o.dtype),o)])},min:Wl,minimum:Au,mirrorPad:Bu,mod:Du,moments:Lu,mul:up,multiRNNCell:Nu,multinomial:Pu,neg:Is,notEqual:ju,oneHot:Ts,ones:Iu,onesLike:Gu,outerProduct:Wu,pad:zu,pad1d:Uu,pad2d:$u,pad3d:Hu,pad4d:Vu,pool:Yu,pow:zl,prelu:Xu,print:qu,prod:Ju,raggedGather:Qu,raggedRange:Zu,raggedTensorToTensor:ed,rand:td,randomGamma:md,randomNormal:yd,randomStandardNormal:bd,randomUniform:_d,range:vd,real:As,reciprocal:wd,relu:kd,relu6:Td,reshape:Np,reverse:Od,reverse1d:xd,reverse2d:Sd,reverse3d:Ed,reverse4d:Fd,round:Md,rsqrt:Rd,scalar:Ul,selu:Cd,separableConv2d:Id,setdiff1dAsync:async function(e,t){const r=gi(e,"x","setdiff1d"),n=gi(t,"y","setdiff1d");et(r.dtype===n.dtype,(()=>`x and y should have the same dtype, but got x (${r.dtype}) and y (${n.dtype}).`)),et(1===r.rank,(()=>`x should be 1D tensor, but got x (${r.shape}).`)),et(1===n.rank,(()=>`y should be 1D tensor, but got y (${n.shape}).`));const o=await r.data(),a=await n.data(),i=new Set(a);let s=0;for(let e=0;e<o.length;e++)i.has(o[e])||s++;const p=new Uo([s],r.dtype),l=new Uo([s],"int32");for(let e=0,t=0;e<o.length;e++)i.has(o[e])||(p.values[t]=o[e],l.values[t]=e,t++);return[p.toTensor(),l.toTensor()]},sigmoid:zp,sign:Ad,sin:Bd,sinh:Dd,slice:Up,slice1d:Ld,slice2d:Nd,slice3d:Pd,slice4d:jd,softmax:Gd,softplus:fu,spaceToBatchND:Ku,fft:Wd,ifft:zd,irfft:Ud,rfft:Hd,split:$d,sqrt:$l,square:Hl,squaredDifference:Vd,squeeze:Kd,stack:Yd,step:Xd,stridedSlice:qd,sub:yu,sum:Vl,tan:Jd,tanh:$p,tensor:_i,tensor1d:Qd,tensor2d:Zd,tensor3d:Ps,tensor4d:function(e,t,r){if(rt(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");const n=ui(e,r);if(4!==n.length&&1!==n.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===n.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return bi(e,t,n,r)},tensor5d:function(e,t,r){if(rt(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");const n=ui(e,r);if(5!==n.length&&1!==n.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===n.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return bi(e,t,n,r)},tensor6d:function(e,t,r){if(rt(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");const n=ui(e,r);if(6!==n.length&&1!==n.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===n.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return bi(e,t=t||n,n,r)},tile:Zl,topk:ec,truncatedNormal:tc,unique:rc,unsortedSegmentSum:nc,unstack:oc,upperBound:function(e,t){return xu(e,t,"right")},variable:function(e,t=!0,r,n){return pa.makeVariable(e,t,r,n)},where:xl,whereAsync:ic,zeros:Cu,zerosLike:Sl,op:mi,OP_SCOPE_SUFFIX:fi,booleanMaskAsync:async function(e,t,r){const n=gi(e,"tensor","boolMask"),o=gi(t,"mask","boolMask","bool"),a=null==r?0:r,i=o.rank,s=n.shape;et(i>0,(()=>"mask cannot be scalar")),tt(s.slice(a,a+i),o.shape,"mask's shape must match the first K dimensions of tensor's shape,");let p=1;for(let e=a;e<a+i;e++)p*=s[e];const l=s.slice(0,a).concat([p],s.slice(a+i)),u=Np(n,l),d=Np(o,[-1]),c=await ic(d),g=Kd(c,[1]),h=ru(u,g,a);return e!==n&&n.dispose(),t!==o&&o.dispose(),g.dispose(),u.dispose(),d.dispose(),c.dispose(),h},transpose:Bs,norm:Yl,movingAverage:sc,scatterND:pc,searchSorted:xu,sparseToDense:lc,gatherND:uc,dropout:dc,enclosingPowerOfTwo:cc,cosineWindow:gc,inTopKAsync:async function(e,t,r=1){const n=gi(e,"predictions","inTopK"),o=gi(t,"targets","inTopK");et(n.rank>1,(()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${n.rank}`)),et(n.rank-1===o.rank,(()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${n.rank} and targets rank ${o.rank}`)),tt(n.shape.slice(0,n.shape.length-1),o.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const a=n.shape[n.shape.length-1];et(r>0&&r<=a,(()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${a}), but got ${r}`));const i=await n.data(),s=await o.data(),[p,l]=[i.length/a,a],u=ct("bool",p);for(let e=0;e<p;e++){const t=e*l,n=i.subarray(t,t+l),o=[];for(let e=0;e<n.length;e++)o.push({value:n[e],index:e});o.sort(((e,t)=>t.value-e.value)),u[e]=0;for(let t=0;t<r;t++)if(o[t].index===s[e]){u[e]=1;break}}return e!==n&&n.dispose(),t!==o&&o.dispose(),_i(u,o.shape,"bool")},image:hg,linalg:fg,losses:mg,spectral:cg,fused:Oc,signal:gg,sparse:yg,string:bg});function Yh(e,t,r=""){if("number"!=typeof e&&"number"!=typeof t){et(e.length===t.length,(()=>r+` Shapes ${e} and ${t} must match`));for(let n=0;n<e.length;n++){const o=e[n],a=t[n];et(o<0||a<0||o===a,(()=>r+` Shapes ${e} and ${t} must match`))}}}function Xh(e){return"number"!=typeof e&&!e.some((e=>e<0))}function qh(e,t,r){let n=Jh(e,r);const o=!Xh(n);if(o&&0===t.length)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${n}`);if(o&&t.forEach((e=>{n=Jh(e.shape,n)})),!Xh(n))throw new Error(`Non-fully-defined elementShape: ${n}`);return n}function Jh(e,t){if("number"==typeof e)return t;if("number"==typeof t)return e;if(e.length!==t.length)throw new Error(`Incompatible ranks during merge: ${e} vs. ${t}`);const r=[];for(let n=0;n<e.length;++n){const o=e[n],a=t[n];if(o>=0&&a>=0&&o!==a)throw new Error(`Incompatible shape during merge: ${e} vs. ${t}`);r[n]=o>=0?o:a}return r}class Qh{constructor(e,t,r,n,o,a,i){this.name=e,this.dtype=t,this.maxSize=r,this.elementShape=n,this.identicalElementShapes=o,this.dynamicSize=a,this.clearAfterRead=i,this.tensors=[],this.closed_=!1,this.idTensor=Ul(0),Es(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach((t=>{null!=e&&e.has(t.tensor.id)||t.tensor.dispose()})),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const t=this.tensors[e];if(t.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}readMany(e){return e.map((e=>this.read(e)))}write(e,t){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const r=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},\n          because the value dtype is ${t.dtype}, but TensorArray dtype is ${this.dtype}.`);if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=t.shape),Yh(this.elementShape,t.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),r.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(r.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);r.tensor=t,Es(t),r.written=!0,this.tensors[e]=r}writeMany(e,t){if(e.length!==t.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${t.length}.`);e.forEach(((e,r)=>this.write(e,t[r])))}gather(e,t){if(t&&t!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${t}`);if(e)e=e.slice(0,this.size());else{e=[];for(let t=0;t<this.size();t++)e.push(t)}if(0===e.length)return _i([],[0].concat(this.elementShape));const r=this.readMany(e);return Yh(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),Yd(r,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(0===this.size())return _i([],[0].concat(this.elementShape));const t=[];for(let e=0;e<this.size();e++)t.push(e);const r=this.readMany(t);return Yh(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),Wp(r,0)}scatter(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const r=Math.max(...e);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(e,oc(t,0))}split(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);let r=0;const n=e.map((e=>(r+=e,r)));if(r!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${r}, and tensor's shape is: ${t.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);const o=0===r?0:t.size/r,a=[];xs((()=>{t=Np(t,[1,r,o]);for(let r=0;r<e.length;++r){const i=[0,0===r?0:n[r-1],0],s=[1,e[r],o];a[r]=Np(Up(t,i,s),this.elementShape)}return a}));const i=[];for(let t=0;t<e.length;t++)i[t]=t;this.writeMany(i,a)}}class Zh{constructor(e,t,r,n=-1){this.tensors=e,this.elementShape=t,this.elementDtype=r,null!=e&&e.forEach((e=>{if(r!==e.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${e.dtype}`);Yh(t,e.shape,"TensorList shape mismatch: "),Es(e)})),this.idTensor=Ul(0),this.maxNumElements=n,Es(this.idTensor)}get id(){return this.idTensor.id}copy(){return new Zh([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach((t=>{null!=e&&e.has(t.id)||t.dispose()})),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,t,r=-1){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(-1!==r&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);Yh(e,this.elementShape,"TensorList shape mismatch: ");const n=qh(this.elementShape,this.tensors,e);return xs((()=>{const e=this.tensors.map((e=>Np(e,n)));return Yd(e,0)}))}popBack(e,t){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(0===this.size())throw new Error("Trying to pop from an empty list.");const r=qh(this.elementShape,this.tensors,e),n=this.tensors.pop();return n.kept=!1,Yh(n.shape,e,"TensorList shape mismatch: "),Np(n,r)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(Yh(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Es(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(-1!==this.maxNumElements&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);const t=new Zh([],this.elementShape,this.elementDtype,this.maxNumElements);t.tensors.length=e;for(let r=0;r<Math.min(this.tensors.length,e);++r)t.tensors[r]=this.tensors[r];return t}getItem(e,t,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(null==this.tensors[e])throw new Error(`element at index ${e} is null.`);Yh(this.tensors[e].shape,t,"TensorList shape mismatch: ");const n=qh(this.elementShape,this.tensors,t);return Np(this.tensors[e],n)}setItem(e,t){if(t.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${this.elementDtype}`);if(e<0||-1!==this.maxNumElements&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);Yh(this.elementShape,t.shape,"TensorList shape mismatch: "),Es(t),null!=this.tensors[e]&&(this.tensors[e].kept=!1),this.tensors[e]=t}gather(e,t,r){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);Yh(this.elementShape,r,"TensorList shape mismatch: "),e=e.slice(0,this.size());const n=qh(this.elementShape,this.tensors,r);return 0===e.length?_i([],[0].concat(n)):xs((()=>{const t=e.map((e=>Np(this.tensors[e],n)));return Yd(t,0)}))}concat(e,t){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);Yh(this.elementShape,t,"TensorList shape mismatch: ");const r=qh(this.elementShape,this.tensors,t);return 0===this.size()?_i([],[0].concat(r)):xs((()=>{const e=this.tensors.map((e=>Np(e,r)));return Wp(e,0)}))}}function ef(e,t,r){const[n,o]=ah("fusedOps",e,t,r),a="biasadd"===n,i=!a,s="prelu"===o,p="fusedbatchnorm"===n,l=ah("numArgs",e,t,r);if(a){if(s&&2!==l)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&a&&1!==l)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(p)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const u=ah("strides",e,t,r),d=uh(e,t,r),c=ah("dataFormat",e,t,r).toUpperCase(),g=ah("dilations",e,t,r);let[h,f]=ah("args",e,t,r);return i&&(f=h,h=void 0),{stride:u,pad:d,dataFormat:c,dilations:g,biasArg:h,preluArg:f,activationFunc:o,leakyreluAlpha:ah("leakyreluAlpha",e,t,r)}}function tf(e,t,r){return{boxes:ah("boxes",e,t,r),scores:ah("scores",e,t,r),maxOutputSize:ah("maxOutputSize",e,t,r),iouThreshold:ah("iouThreshold",e,t,r),scoreThreshold:ah("scoreThreshold",e,t,r),softNmsSigma:ah("softNmsSigma",e,t,r)}}class rf{constructor(e,t){this.keyDType=e,this.valueDType=t,this.handle=Ul(0),this.tensorMap=new Map,Es(this.handle)}get id(){return this.handle.id}clearAndClose(){this.tensorMap.forEach((e=>e.dispose())),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return Ul(this.size(),"int32")}async import(e,t){this.checkKeyAndValueTensor(e,t);const r=await e.data();return this.tensorMap.forEach((e=>e.dispose())),this.tensorMap.clear(),xs((()=>{const e=oc(t),n=r.length,o=e.length;et(n===o,(()=>`The number of elements doesn't match, keys has ${n} elements, the values has ${o} elements.`));for(let t=0;t<n;t++){const n=r[t],o=e[t];Es(o),this.tensorMap.set(n,o)}return this.handle}))}async find(e,t){this.checkKeyAndValueTensor(e,t);const r=await e.data();return xs((()=>{const e=[];for(let n=0;n<r.length;n++){const o=r[n],a=this.findWithDefault(o,t);e.push(a)}return Yd(e)}))}findWithDefault(e,t){const r=this.tensorMap.get(e);return null!=r?r:t}checkKeyAndValueTensor(e,t){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(t.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${t.dtype}`)}}function nf(e,t,r,n,o=xs){const a=((e,t,r)=>{switch(e.category){case"arithmetic":return o((()=>((e,t,r,n=Kh)=>{switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[n.add(ah("a",e,t,r),ah("b",e,t,r))];case"AddN":return[n.addN(ah("tensors",e,t,r))];case"FloorMod":case"Mod":return[n.mod(ah("a",e,t,r),ah("b",e,t,r))];case"Mul":return[n.mul(ah("a",e,t,r),ah("b",e,t,r))];case"RealDiv":case"Div":return[n.div(ah("a",e,t,r),ah("b",e,t,r))];case"DivNoNan":return[n.divNoNan(ah("a",e,t,r),ah("b",e,t,r))];case"FloorDiv":return[n.floorDiv(ah("a",e,t,r),ah("b",e,t,r))];case"Sub":return[n.sub(ah("a",e,t,r),ah("b",e,t,r))];case"Minimum":return[n.minimum(ah("a",e,t,r),ah("b",e,t,r))];case"Maximum":return[n.maximum(ah("a",e,t,r),ah("b",e,t,r))];case"Pow":return[n.pow(ah("a",e,t,r),ah("b",e,t,r))];case"SquaredDifference":return[n.squaredDifference(ah("a",e,t,r),ah("b",e,t,r))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,r)));case"basic_math":return o((()=>((e,t,r,n=Kh)=>{switch(e.op){case"Abs":case"ComplexAbs":return[n.abs(ah("x",e,t,r))];case"Acos":return[n.acos(ah("x",e,t,r))];case"Acosh":return[n.acosh(ah("x",e,t,r))];case"Asin":return[n.asin(ah("x",e,t,r))];case"Asinh":return[n.asinh(ah("x",e,t,r))];case"Atan":return[n.atan(ah("x",e,t,r))];case"Atan2":return[n.atan2(ah("x",e,t,r),ah("y",e,t,r))];case"Atanh":return[n.atanh(ah("x",e,t,r))];case"Ceil":return[n.ceil(ah("x",e,t,r))];case"Complex":return[n.complex(ah("real",e,t,r),ah("imag",e,t,r))];case"Cos":return[n.cos(ah("x",e,t,r))];case"Cosh":return[n.cosh(ah("x",e,t,r))];case"Elu":return[n.elu(ah("x",e,t,r))];case"Erf":return[n.erf(ah("x",e,t,r))];case"Exp":return[n.exp(ah("x",e,t,r))];case"Expm1":return[n.expm1(ah("x",e,t,r))];case"Floor":return[n.floor(ah("x",e,t,r))];case"Log":return[n.log(ah("x",e,t,r))];case"Log1p":return[n.log1p(ah("x",e,t,r))];case"Imag":return[n.imag(ah("x",e,t,r))];case"Neg":return[n.neg(ah("x",e,t,r))];case"Reciprocal":return[n.reciprocal(ah("x",e,t,r))];case"Real":return[n.real(ah("x",e,t,r))];case"Relu":return[n.relu(ah("x",e,t,r))];case"Round":return[n.round(ah("x",e,t,r))];case"Selu":return[n.selu(ah("x",e,t,r))];case"Sigmoid":return[n.sigmoid(ah("x",e,t,r))];case"Sin":return[n.sin(ah("x",e,t,r))];case"Sign":return[n.sign(ah("x",e,t,r))];case"Sinh":return[n.sinh(ah("x",e,t,r))];case"Softplus":return[n.softplus(ah("x",e,t,r))];case"Sqrt":return[n.sqrt(ah("x",e,t,r))];case"Square":return[n.square(ah("x",e,t,r))];case"Tanh":return[n.tanh(ah("x",e,t,r))];case"Tan":return[n.tan(ah("x",e,t,r))];case"ClipByValue":return[n.clipByValue(ah("x",e,t,r),ah("clipValueMin",e,t,r),ah("clipValueMax",e,t,r))];case"Relu6":return[n.relu6(ah("x",e,t,r))];case"Rsqrt":return[n.rsqrt(ih(e.inputNames[0],t,r))];case"Prod":return[n.prod(ah("x",e,t,r),ah("axes",e,t,r))];case"LeakyRelu":return[n.leakyRelu(ah("x",e,t,r),ah("alpha",e,t,r))];case"Prelu":return[n.prelu(ah("x",e,t,r),ah("alpha",e,t,r))];case"IsNan":return[n.isNaN(ih(e.inputNames[0],t,r))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,r)));case"control":return(async(e,t,r)=>{switch(e.op){case"If":case"StatelessIf":{const n=ah("thenBranch",e,t,r),o=ah("elseBranch",e,t,r),a=ah("cond",e,t,r),i=ah("args",e,t,r);return(await a.data())[0]?r.functionMap[n].executeFunctionAsync(i,r.tensorArrayMap,r.tensorListMap):r.functionMap[o].executeFunctionAsync(i,r.tensorArrayMap,r.tensorListMap)}case"While":case"StatelessWhile":{const n=ah("body",e,t,r),o=ah("cond",e,t,r),a=ah("args",e,t,r),i=await r.functionMap[o].executeFunctionAsync(a,r.tensorArrayMap,r.tensorListMap),s=a.map((e=>e.id));let p=await i[0].data();i.forEach((e=>{e.kept||-1!==s.indexOf(e.id)||e.dispose()}));let l=a;for(;p[0];){const e=l;l=await r.functionMap[n].executeFunctionAsync(l,r.tensorArrayMap,r.tensorListMap);const t=l.map((e=>e.id));e.forEach((e=>{e.kept||-1!==s.indexOf(e.id)||-1!==t.indexOf(e.id)||e.dispose()}));const a=await r.functionMap[o].executeFunctionAsync(l,r.tensorArrayMap,r.tensorListMap);p=await a[0].data(),a.forEach((e=>{e.kept||-1!==s.indexOf(e.id)||-1!==t.indexOf(e.id)||e.dispose()}))}return l}case"LoopCond":return[dh(ah("pred",e,t,r))];case"Switch":{const n=ah("pred",e,t,r);let o=ah("data",e,t,r);return o.kept||(o=dh(o)),(await n.data())[0]?[void 0,o]:[o,void 0]}case"Merge":{const n=e.inputNames.find((e=>void 0!==ih(e,t,r)));return n?[dh(ih(n,t,r))]:void 0}case"Enter":{const n=ah("frameName",e,t,r),o=ah("tensor",e,t,r);return r.enterFrame(n),[dh(o)]}case"Exit":{const n=ah("tensor",e,t,r);return r.exitFrame(),[dh(n)]}case"NextIteration":{const n=ah("tensor",e,t,r);return r.nextIteration(),[dh(n)]}case"TensorArrayV3":{const n=ah("size",e,t,r),o=ah("dtype",e,t,r),a=ah("elementShape",e,t,r),i=ah("dynamicSize",e,t,r),s=ah("clearAfterRead",e,t,r),p=ah("identicalElementShapes",e,t,r),l=ah("name",e,t,r),u=new Qh(l,o,n,a,p,i,s);return r.addTensorArray(u),[u.idTensor,Ul(1)]}case"TensorArrayWriteV3":{const n=ah("tensorArrayId",e,t,r),o=ah("index",e,t,r),a=ah("tensor",e,t,r),i=r.getTensorArray(n.id);return i.write(o,a),[i.idTensor]}case"TensorArrayReadV3":{const n=ah("tensorArrayId",e,t,r),o=ah("index",e,t,r);return[r.getTensorArray(n.id).read(o)]}case"TensorArrayGatherV3":{const n=ah("tensorArrayId",e,t,r),o=ah("indices",e,t,r),a=ah("dtype",e,t,r);return[r.getTensorArray(n.id).gather(o,a)]}case"TensorArrayScatterV3":{const n=ah("tensorArrayId",e,t,r),o=ah("indices",e,t,r),a=ah("tensor",e,t,r),i=r.getTensorArray(n.id);return i.scatter(o,a),[i.idTensor]}case"TensorArrayConcatV3":{const n=ah("tensorArrayId",e,t,r),o=r.getTensorArray(n.id),a=ah("dtype",e,t,r);return[o.concat(a)]}case"TensorArraySplitV3":{const n=ah("tensorArrayId",e,t,r),o=ah("tensor",e,t,r),a=ah("lengths",e,t,r),i=r.getTensorArray(n.id);return i.split(a,o),[i.idTensor]}case"TensorArraySizeV3":{const n=ah("tensorArrayId",e,t,r);return[Ul(r.getTensorArray(n.id).size(),"int32")]}case"TensorArrayCloseV3":{const n=ah("tensorArrayId",e,t,r),o=r.getTensorArray(n.id);return o.clearAndClose(),[o.idTensor]}case"TensorListSetItem":{const n=ah("tensorListId",e,t,r),o=ah("index",e,t,r),a=ah("tensor",e,t,r),i=r.getTensorList(n.id);return i.setItem(o,a),[i.idTensor]}case"TensorListGetItem":{const n=ah("tensorListId",e,t,r),o=ah("index",e,t,r),a=ah("elementShape",e,t,r),i=ah("elementDType",e,t,r);return[r.getTensorList(n.id).getItem(o,a,i)]}case"TensorListScatterV2":case"TensorListScatter":{const n=ah("indices",e,t,r),o=function(e,t,r,n){if(t.length!==e.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${e.shape[0]}`);const o=Math.max(...t);if(null!=n&&-1!==n&&o>=n)throw new Error(`Max index must be < array size (${o}  vs. ${n})`);const a=new Zh([],r,e.dtype,n),i=oc(e,0);return t.forEach(((e,t)=>{a.setItem(e,i[t])})),a}(ah("tensor",e,t,r),n,ah("elementShape",e,t,r),ah("numElements",e,t,r));return r.addTensorList(o),[o.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const n=ah("elementShape",e,t,r),o=ah("elementDType",e,t,r);let a;a="TensorListReserve"===e.op?"numElements":"maxNumElements";const i=ah(a,e,t,r),s=function(e,t,r,n){return new Zh([],e,t,n)}(n,o,0,"TensorListReserve"===e.op?-1:i);return r.addTensorList(s),[s.idTensor]}case"TensorListGather":{const n=ah("tensorListId",e,t,r),o=ah("indices",e,t,r),a=ah("elementShape",e,t,r),i=ah("elementDType",e,t,r);return[r.getTensorList(n.id).gather(o,i,a)]}case"TensorListStack":{const n=ah("tensorListId",e,t,r),o=ah("elementShape",e,t,r),a=ah("elementDType",e,t,r),i=ah("numElements",e,t,r);return[r.getTensorList(n.id).stack(o,a,i)]}case"TensorListFromTensor":{const n=function(e,t,r){const n=e.dtype;if(e.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${e.shape}`);if(e.dtype!==r)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${r}`);Yh(e.shape.slice(1),t,"TensorList shape mismatch: ");const o=oc(e);return new Zh(o,t,n)}(ah("tensor",e,t,r),ah("elementShape",e,t,r),ah("elementDType",e,t,r));return r.addTensorList(n),[n.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const n=ah("tensorListId",e,t,r),o=r.getTensorList(n.id),a=ah("dtype",e,t,r),i=ah("elementShape",e,t,r);return[o.concat(a,i)]}case"TensorListPushBack":{const n=ah("tensorListId",e,t,r),o=ah("tensor",e,t,r),a=r.getTensorList(n.id);return a.pushBack(o),[a.idTensor]}case"TensorListPopBack":{const n=ah("tensorListId",e,t,r),o=ah("elementShape",e,t,r),a=ah("elementDType",e,t,r);return[r.getTensorList(n.id).popBack(o,a)]}case"TensorListSplit":{const n=ah("tensor",e,t,r),o=ah("elementShape",e,t,r),a=function(e,t,r){let n=0;const o=t.map((e=>(n+=e,n)));if(n!==e.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${n}, and tensor's shape is: ${e.shape}`);const a=Jh(e.shape.slice(1),r),i=0===n?0:e.size/n,s=xs((()=>{const r=[];e=Np(e,[1,n,i]);for(let n=0;n<t.length;++n){const s=[0,0===n?0:o[n-1],0],p=[1,t[n],i];r[n]=Np(Up(e,s,p),a)}return e.dispose(),r})),p=new Zh([],r,e.dtype,t.length);for(let e=0;e<s.length;e++)p.setItem(e,s[e]);return p}(n,ah("lengths",e,t,r),o);return r.addTensorList(a),[a.idTensor]}case"TensorListLength":{const n=ah("tensorListId",e,t,r);return[Ul(r.getTensorList(n.id).size(),"int32")]}case"TensorListResize":{const n=ah("tensorListId",e,t,r),o=ah("size",e,t,r),a=r.getTensorList(n.id).resize(o);return r.addTensorList(a),[a.idTensor]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,r);case"convolution":return o((()=>((e,t,r,n=Kh)=>{switch(e.op){case"Conv1D":{const o=ah("stride",e,t,r),a=ah("pad",e,t,r),i=ah("dataFormat",e,t,r).toUpperCase(),s=ah("dilation",e,t,r);return[n.conv1d(ah("x",e,t,r),ah("filter",e,t,r),o,a,i,s)]}case"Conv2D":{const o=ah("strides",e,t,r),a=uh(e,t,r),i=ah("dataFormat",e,t,r).toUpperCase(),s=ah("dilations",e,t,r);return[n.conv2d(ah("x",e,t,r),ah("filter",e,t,r),[o[1],o[2]],a,i,[s[1],s[2]])]}case"_FusedConv2D":{const{stride:o,pad:a,dataFormat:i,dilations:s,biasArg:p,preluArg:l,activationFunc:u,leakyreluAlpha:d}=ef(e,t,r);return[n.fused.conv2d({x:ah("x",e,t,r),filter:ah("filter",e,t,r),strides:[o[1],o[2]],pad:a,dataFormat:i,dilations:[s[1],s[2]],bias:p,activation:u,preluActivationWeights:l,leakyreluAlpha:d})]}case"FusedDepthwiseConv2dNative":{const{stride:o,pad:a,dataFormat:i,dilations:s,biasArg:p,preluArg:l,activationFunc:u,leakyreluAlpha:d}=ef(e,t,r);return[n.fused.depthwiseConv2d({x:ah("x",e,t,r),filter:ah("filter",e,t,r),strides:[o[1],o[2]],pad:a,dataFormat:i,dilations:[s[1],s[2]],bias:p,activation:u,preluActivationWeights:l,leakyreluAlpha:d})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const o=ah("outputShape",e,t,r),a=ah("strides",e,t,r),i=uh(e,t,r);return[n.conv2dTranspose(ah("x",e,t,r),ah("filter",e,t,r),o,[a[1],a[2]],i)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const o=ah("strides",e,t,r),a=uh(e,t,r),i=ah("dilations",e,t,r),s=ah("dataFormat",e,t,r).toUpperCase();return[n.depthwiseConv2d(ah("input",e,t,r),ah("filter",e,t,r),[o[1],o[2]],a,s,[i[1],i[2]])]}case"Conv3D":{const o=ah("strides",e,t,r),a=ah("pad",e,t,r),i=ah("dataFormat",e,t,r).toUpperCase(),s=ah("dilations",e,t,r);return[n.conv3d(ah("x",e,t,r),ah("filter",e,t,r),[o[1],o[2],o[3]],a,i,[s[1],s[2],s[3]])]}case"AvgPool":{const o=ah("strides",e,t,r),a=ah("pad",e,t,r),i=ah("kernelSize",e,t,r);return[n.avgPool(ah("x",e,t,r),[i[1],i[2]],[o[1],o[2]],a)]}case"MaxPool":{const o=ah("strides",e,t,r),a=ah("pad",e,t,r),i=ah("kernelSize",e,t,r);return[n.maxPool(ah("x",e,t,r),[i[1],i[2]],[o[1],o[2]],a)]}case"MaxPoolWithArgmax":{const o=ah("strides",e,t,r),a=ah("pad",e,t,r),i=ah("kernelSize",e,t,r),s=ah("includeBatchInIndex",e,t,r),{result:p,indexes:l}=n.maxPoolWithArgmax(ah("x",e,t,r),[i[1],i[2]],[o[1],o[2]],a,s);return[p,l]}case"AvgPool3D":{const o=ah("strides",e,t,r),a=ah("pad",e,t,r),i=ah("kernelSize",e,t,r);return[n.avgPool3d(ah("x",e,t,r),[i[1],i[2],i[3]],[o[1],o[2],o[3]],a)]}case"MaxPool3D":{const o=ah("strides",e,t,r),a=ah("pad",e,t,r),i=ah("kernelSize",e,t,r);return[n.maxPool3d(ah("x",e,t,r),[i[1],i[2],i[3]],[o[1],o[2],o[3]],a)]}case"Dilation2D":{const o=ah("strides",e,t,r),a=ah("pad",e,t,r),i=ah("dilations",e,t,r),s=o[1],p=o[2],l=i[1],u=i[2];return[n.dilation2d(ah("x",e,t,r),ah("filter",e,t,r),[s,p],a,[l,u],"NHWC")]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,r)));case"creation":return o((()=>((e,t,r,n=Kh)=>{switch(e.op){case"Fill":{const o=ah("shape",e,t,r),a=ah("dtype",e,t,r),i=ah("value",e,t,r);return[n.fill(o,i,a)]}case"LinSpace":{const o=ah("start",e,t,r),a=ah("stop",e,t,r),i=ah("num",e,t,r);return[n.linspace(o,a,i)]}case"Multinomial":{const o=ah("logits",e,t,r),a=ah("numSamples",e,t,r),i=ah("seed",e,t,r);return[n.multinomial(o,a,i)]}case"OneHot":{const o=ah("indices",e,t,r),a=ah("depth",e,t,r),i=ah("onValue",e,t,r),s=ah("offValue",e,t,r),p=ah("dtype",e,t,r);return[n.oneHot(o,a,i,s,p)]}case"Ones":return[n.ones(ah("shape",e,t,r),ah("dtype",e,t,r))];case"OnesLike":return[n.onesLike(ah("x",e,t,r))];case"RandomStandardNormal":return[n.randomStandardNormal(ah("shape",e,t,r),ah("dtype",e,t,r),ah("seed",e,t,r))];case"RandomUniform":return[n.randomUniform(ah("shape",e,t,r),ah("minval",e,t,r),ah("maxval",e,t,r),ah("dtype",e,t,r))];case"Range":{const o=ah("start",e,t,r),a=ah("stop",e,t,r),i=ah("step",e,t,r);return[n.range(o,a,i,ah("dtype",e,t,r))]}case"TruncatedNormal":{const o=ah("shape",e,t,r),a=ah("mean",e,t,r),i=ah("stdDev",e,t,r),s=ah("seed",e,t,r);return[n.truncatedNormal(o,a,i,ah("dtype",e,t,r),s)]}case"Zeros":return[n.zeros(ah("shape",e,t,r),ah("dtype",e,t,r))];case"ZerosLike":return[n.zerosLike(ah("x",e,t,r))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,r)));case"dynamic":return(async(e,t,r,n,o=Kh)=>{switch(e.op){case"NonMaxSuppressionV5":{const{boxes:n,scores:a,maxOutputSize:i,iouThreshold:s,scoreThreshold:p,softNmsSigma:l}=tf(e,t,r),u=await o.image.nonMaxSuppressionWithScoreAsync(n,a,i,s,p,l);return[u.selectedIndices,u.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:n,scores:a,maxOutputSize:i,iouThreshold:s,scoreThreshold:p}=tf(e,t,r),l=ah("padToMaxOutputSize",e,t,r),u=await o.image.nonMaxSuppressionPaddedAsync(n,a,i,s,p,l);return[u.selectedIndices,u.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:n,scores:a,maxOutputSize:i,iouThreshold:s,scoreThreshold:p}=tf(e,t,r);return[await o.image.nonMaxSuppressionAsync(n,a,i,s,p)]}case"Where":{const n=o.cast(ah("condition",e,t,r),"bool"),a=[await o.whereAsync(n)];return n.dispose(),a}case"ListDiff":return o.setdiff1dAsync(ah("x",e,t,r),ah("y",e,t,r));default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,r);case"evaluation":return o((()=>((e,t,r,n=Kh)=>{switch(e.op){case"LowerBound":{const o=ah("sortedSequence",e,t,r),a=ah("values",e,t,r);return[n.lowerBound(o,a)]}case"TopKV2":{const o=ah("x",e,t,r),a=ah("k",e,t,r),i=ah("sorted",e,t,r),s=n.topk(o,a,i);return[s.values,s.indices]}case"UpperBound":{const o=ah("sortedSequence",e,t,r),a=ah("values",e,t,r);return[n.upperBound(o,a)]}case"Unique":{const o=ah("x",e,t,r),a=n.unique(o);return[a.values,a.indices]}case"UniqueV2":{const o=ah("x",e,t,r),a=ah("axis",e,t,r),i=n.unique(o,a);return[i.values,i.indices]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,r)));case"image":return o((()=>((e,t,r,n=Kh)=>{switch(e.op){case"ResizeBilinear":{const o=ah("images",e,t,r),a=ah("size",e,t,r),i=ah("alignCorners",e,t,r),s=ah("halfPixelCenters",e,t,r);return[n.image.resizeBilinear(o,[a[0],a[1]],i,s)]}case"ResizeNearestNeighbor":{const o=ah("images",e,t,r),a=ah("size",e,t,r),i=ah("alignCorners",e,t,r),s=ah("halfPixelCenters",e,t,r);return[n.image.resizeNearestNeighbor(o,[a[0],a[1]],i,s)]}case"CropAndResize":{const o=ah("image",e,t,r),a=ah("boxes",e,t,r),i=ah("boxInd",e,t,r),s=ah("cropSize",e,t,r),p=ah("method",e,t,r),l=ah("extrapolationValue",e,t,r);return[n.image.cropAndResize(o,a,i,s,p,l)]}case"ImageProjectiveTransformV3":{const o=ah("images",e,t,r),a=ah("transforms",e,t,r),i=ah("outputShape",e,t,r),s=ah("fillValue",e,t,r),p=ah("interpolation",e,t,r),l=ah("fillMode",e,t,r);return[n.image.transform(o,a,p.toLowerCase(),l.toLowerCase(),s,i)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,r)));case"graph":return o((()=>((e,t,r,n=Kh)=>{switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":const o=ah("default",e,t,r);return[ih(e.name,t,r)||o];case"Placeholder":return[ih(e.name,t,r)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":case"Snapshot":return[dh(ah("x",e,t,r))];case"IdentityN":return ah("x",e,t,r).map((e=>dh(e)));case"Shape":return[n.tensor1d(ah("x",e,t,r).shape,"int32")];case"ShapeN":return ah("x",e,t,r).map((e=>n.tensor1d(e.shape)));case"Size":return[n.scalar(ah("x",e,t,r).size,"int32")];case"Rank":return[n.scalar(ah("x",e,t,r).rank,"int32")];case"NoOp":return[n.scalar(1)];case"Print":const a=ah("x",e,t,r),i=ah("data",e,t,r),s=ah("message",e,t,r),p=ah("summarize",e,t,r);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(s);for(let e=0;e<i.length;e++)console.log(Array.prototype.slice.call(i[e].dataSync()).slice(0,p));return[a];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,r)));case"logical":return o((()=>((e,t,r,n=Kh)=>{switch(e.op){case"Equal":return[n.equal(ah("a",e,t,r),ah("b",e,t,r))];case"NotEqual":return[n.notEqual(ah("a",e,t,r),ah("b",e,t,r))];case"Greater":return[n.greater(ah("a",e,t,r),ah("b",e,t,r))];case"GreaterEqual":return[n.greaterEqual(ah("a",e,t,r),ah("b",e,t,r))];case"Less":return[n.less(ah("a",e,t,r),ah("b",e,t,r))];case"LessEqual":return[n.lessEqual(ah("a",e,t,r),ah("b",e,t,r))];case"LogicalAnd":return[n.logicalAnd(ah("a",e,t,r),ah("b",e,t,r))];case"LogicalNot":return[n.logicalNot(ah("a",e,t,r))];case"LogicalOr":return[n.logicalOr(ah("a",e,t,r),ah("b",e,t,r))];case"Select":case"SelectV2":return[n.where(ah("condition",e,t,r),ah("a",e,t,r),ah("b",e,t,r))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,r)));case"matrices":return o((()=>((e,t,r,n=Kh)=>{switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[n.matMul(ah("a",e,t,r),ah("b",e,t,r),ah("transposeA",e,t,r),ah("transposeB",e,t,r))];case"Einsum":return[n.einsum(ah("equation",e,t,r),...ah("tensors",e,t,r))];case"Transpose":return[n.transpose(ah("x",e,t,r),ah("perm",e,t,r))];case"_FusedMatMul":const[o,a]=ah("fusedOps",e,t,r),i="biasadd"===o,s="prelu"===a,p=ah("numArgs",e,t,r),l=ah("leakyreluAlpha",e,t,r);if(i){if(s&&2!==p)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&1!==p)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[u,d]=ah("args",e,t,r);return[n.fused.matMul({a:ah("a",e,t,r),b:ah("b",e,t,r),transposeA:ah("transposeA",e,t,r),transposeB:ah("transposeB",e,t,r),bias:u,activation:a,preluActivationWeights:d,leakyreluAlpha:l})];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,r)));case"normalization":return o((()=>((e,t,r,n=Kh)=>{switch(e.op){case"EuclideanNorm":return[n.euclideanNorm(ah("x",e,t,r),ah("axis",e,t,r),ah("keepDims",e,t,r))];case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[n.batchNorm(ah("x",e,t,r),ah("mean",e,t,r),ah("variance",e,t,r),ah("offset",e,t,r),ah("scale",e,t,r),ah("epsilon",e,t,r))];case"LRN":return[n.localResponseNormalization(ah("x",e,t,r),ah("radius",e,t,r),ah("bias",e,t,r),ah("alpha",e,t,r),ah("beta",e,t,r))];case"Softmax":return[n.softmax(ah("x",e,t,r))];case"LogSoftmax":return[n.logSoftmax(ah("x",e,t,r))];case"SparseToDense":return[n.sparseToDense(ah("sparseIndices",e,t,r),ah("outputShape",e,t,r),ah("sparseValues",e,t,r),ah("defaultValue",e,t,r))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,r)));case"ragged":return o((()=>((e,t,r,n=Kh)=>{switch(e.op){case"RaggedGather":{const{outputNestedSplits:o,outputDenseValues:a}=n.raggedGather(ah("paramsNestedSplits",e,t,r),ah("paramsDenseValues",e,t,r),ah("indices",e,t,r),ah("outputRaggedRank",e,t,r));return o.concat(a)}case"RaggedRange":{const{rtNestedSplits:o,rtDenseValues:a}=n.raggedRange(ah("starts",e,t,r),ah("limits",e,t,r),ah("splits",e,t,r));return[o,a]}case"RaggedTensorToTensor":return[n.raggedTensorToTensor(ah("shape",e,t,r),ah("values",e,t,r),ah("defaultValue",e,t,r),ah("rowPartitionTensors",e,t,r),ah("rowPartitionTypes",e,t,r))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,r)));case"reduction":return o((()=>((e,t,r,n=Kh)=>{switch(e.op){case"Max":{const o=ah("axis",e,t,r),a=ah("keepDims",e,t,r);return[n.max(ah("x",e,t,r),o,a)]}case"Mean":{const o=ah("axis",e,t,r),a=ah("keepDims",e,t,r);return[n.mean(ah("x",e,t,r),o,a)]}case"Min":{const o=ah("axis",e,t,r),a=ah("keepDims",e,t,r);return[n.min(ah("x",e,t,r),o,a)]}case"Sum":{const o=ah("axis",e,t,r),a=ah("keepDims",e,t,r);return[n.sum(ah("x",e,t,r),o,a)]}case"All":{const o=ah("axis",e,t,r),a=ah("keepDims",e,t,r);return[n.all(ah("x",e,t,r),o,a)]}case"Any":{const o=ah("axis",e,t,r),a=ah("keepDims",e,t,r);return[n.any(ah("x",e,t,r),o,a)]}case"ArgMax":{const o=ah("axis",e,t,r);return[n.argMax(ah("x",e,t,r),o)]}case"ArgMin":{const o=ah("axis",e,t,r);return[n.argMin(ah("x",e,t,r),o)]}case"Prod":{const o=ah("axis",e,t,r),a=ah("keepDims",e,t,r);return[n.prod(ah("x",e,t,r),o,a)]}case"Cumprod":{const o=ah("axis",e,t,r),a=ah("exclusive",e,t,r),i=ah("reverse",e,t,r);return[n.cumprod(ah("x",e,t,r),o,a,i)]}case"Cumsum":{const o=ah("axis",e,t,r),a=ah("exclusive",e,t,r),i=ah("reverse",e,t,r);return[n.cumsum(ah("x",e,t,r),o,a,i)]}case"Bincount":const o=ah("x",e,t,r),a=ah("weights",e,t,r),i=ah("size",e,t,r);return[n.bincount(o,a,i)];case"DenseBincount":{const o=ah("x",e,t,r),a=ah("weights",e,t,r),i=ah("size",e,t,r),s=ah("binaryOutput",e,t,r);return[n.denseBincount(o,a,i,s)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,r)));case"slice_join":return o((()=>((e,t,r,n=Kh)=>{switch(e.op){case"ConcatV2":case"Concat":{const o=ah("n",e,t,r),a=ah("axis",e,t,r);let i=ah("tensors",e,t,r);return i=i.slice(0,o),[n.concat(i,a)]}case"Gather":{const o=ah("x",e,t,r),a=ah("indices",e,t,r);return[n.gather(o,n.cast(a,"int32"),0)]}case"GatherV2":{const o=ah("axis",e,t,r),a=ah("batchDims",e,t,r),i=ah("x",e,t,r),s=ah("indices",e,t,r);return[n.gather(i,n.cast(s,"int32"),o,a)]}case"Reverse":{const o=ah("dims",e,t,r),a=[];for(let e=0;e<o.length;e++)o[e]&&a.push(e);const i=ah("x",e,t,r);return[n.reverse(i,a)]}case"ReverseV2":{const o=ah("axis",e,t,r),a=ah("x",e,t,r);return[n.reverse(a,o)]}case"Slice":{const o=ah("begin",e,t,r),a=ah("size",e,t,r);return[n.slice(ah("x",e,t,r),o,a)]}case"StridedSlice":{const o=ah("begin",e,t,r),a=ah("end",e,t,r),i=ah("strides",e,t,r),s=ah("beginMask",e,t,r),p=ah("endMask",e,t,r),l=ah("ellipsisMask",e,t,r),u=ah("newAxisMask",e,t,r),d=ah("shrinkAxisMask",e,t,r),c=ah("x",e,t,r);return[n.stridedSlice(c,o,a,i,s,p,l,u,d)]}case"Pack":return xs((()=>{const o=ah("axis",e,t,r),a=ah("tensors",e,t,r),i=a[0].shape,s=n.squeeze(a[0]).shape,p=a.map((e=>{const t=ot(e.shape,i);if(!t&&!ot(n.squeeze(e).shape,s))throw new Error("the input tensors shape does not match");return t?e:n.reshape(e,i)}));return[n.stack(p,o)]}));case"Unpack":{const o=ah("axis",e,t,r),a=ah("tensor",e,t,r);return n.unstack(a,o)}case"Tile":{const o=ah("reps",e,t,r);return[n.tile(ah("x",e,t,r),o)]}case"Split":case"SplitV":{const o=ah("axis",e,t,r),a=ah("numOrSizeSplits",e,t,r),i=ah("x",e,t,r);return n.split(i,a,o)}case"ScatterNd":{const o=ah("indices",e,t,r),a=ah("values",e,t,r),i=ah("shape",e,t,r);return[n.scatterND(o,a,i)]}case"GatherNd":{const o=ah("x",e,t,r),a=ah("indices",e,t,r);return[n.gatherND(o,a)]}case"SparseToDense":{const o=ah("sparseIndices",e,t,r),a=ah("outputShape",e,t,r),i=ah("sparseValues",e,t,r),s=ah("defaultValue",e,t,r);return[n.sparseToDense(o,i,a,i.dtype===s.dtype?s:n.cast(s,i.dtype))]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,r)));case"sparse":return o((()=>((e,t,r,n=Kh)=>{switch(e.op){case"SparseFillEmptyRows":{const{outputIndices:o,outputValues:a,emptyRowIndicator:i,reverseIndexMap:s}=n.sparse.sparseFillEmptyRows(ah("indices",e,t,r),ah("values",e,t,r),ah("denseShape",e,t,r),ah("defaultValue",e,t,r));return[o,a,i,s]}case"SparseReshape":{const{outputIndices:o,outputShape:a}=n.sparse.sparseReshape(ah("inputIndices",e,t,r),ah("inputShape",e,t,r),ah("newShape",e,t,r));return[o,a]}case"SparseSegmentMean":return[n.sparse.sparseSegmentMean(ah("data",e,t,r),ah("indices",e,t,r),ah("segmentIds",e,t,r))];case"SparseSegmentSum":return[n.sparse.sparseSegmentSum(ah("data",e,t,r),ah("indices",e,t,r),ah("segmentIds",e,t,r))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,r)));case"spectral":return o((()=>((e,t,r,n=Kh)=>{switch(e.op){case"FFT":return[n.fft(ah("x",e,t,r))];case"IFFT":return[n.ifft(ah("x",e,t,r))];case"RFFT":return[n.rfft(ah("x",e,t,r))];case"IRFFT":return[n.irfft(ah("x",e,t,r))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,r)));case"string":return o((()=>((e,t,r,n=Kh)=>{switch(e.op){case"StringNGrams":{const{nGrams:o,nGramsSplits:a}=n.string.stringNGrams(ah("data",e,t,r),ah("dataSplits",e,t,r),ah("separator",e,t,r),ah("nGramWidths",e,t,r),ah("leftPad",e,t,r),ah("rightPad",e,t,r),ah("padWidth",e,t,r),ah("preserveShortSequences",e,t,r));return[o,a]}case"StringSplit":{const{indices:o,values:a,shape:i}=n.string.stringSplit(ah("input",e,t,r),ah("delimiter",e,t,r),ah("skipEmpty",e,t,r));return[o,a,i]}case"StringToHashBucketFast":return[n.string.stringToHashBucketFast(ah("input",e,t,r),ah("numBuckets",e,t,r))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,r)));case"transformation":return o((()=>((e,t,r,n=Kh)=>{switch(e.op){case"Cast":return[n.cast(ah("x",e,t,r),ah("dtype",e,t,r))];case"ExpandDims":{const o=ah("axis",e,t,r);return[n.expandDims(ah("x",e,t,r),o)]}case"Squeeze":{const o=ah("axis",e,t,r);return[n.squeeze(ah("x",e,t,r),o)]}case"Reshape":return[n.reshape(ah("x",e,t,r),ah("shape",e,t,r))];case"MirrorPad":return[n.mirrorPad(ah("x",e,t,r),ah("padding",e,t,r),ah("mode",e,t,r))];case"PadV2":case"Pad":return[n.pad(ah("x",e,t,r),ah("padding",e,t,r),ah("constantValue",e,t,r))];case"SpaceToBatchND":{const o=ah("blockShape",e,t,r),a=ah("paddings",e,t,r);return[n.spaceToBatchND(ah("x",e,t,r),o,a)]}case"BatchToSpaceND":{const o=ah("blockShape",e,t,r),a=ah("crops",e,t,r);return[n.batchToSpaceND(ah("x",e,t,r),o,a)]}case"DepthToSpace":{const o=ah("blockSize",e,t,r),a=ah("dataFormat",e,t,r).toUpperCase();return[n.depthToSpace(ah("x",e,t,r),o,a)]}case"BroadcastTo":return[n.broadcastTo(ah("x",e,t,r),ah("shape",e,t,r))];case"BroadcastArgs":return[n.broadcastArgs(ah("s0",e,t,r),ah("s1",e,t,r))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,r)));case"hash_table":return(async(e,t,r,n)=>{switch(e.op){case"HashTable":case"HashTableV2":{const o=n.getHashTableHandleByName(e.name);if(null!=o)return[o];{const o=ah("keyDType",e,t,r),a=ah("valueDType",e,t,r),i=new rf(o,a);return n.addHashTable(e.name,i),[i.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{const o=ah("tableHandle",e,t,r,n),a=ah("keys",e,t,r),i=ah("values",e,t,r),s=n.getHashTableById(o.id);return[await s.import(a,i)]}case"LookupTableFind":case"LookupTableFindV2":{const o=ah("tableHandle",e,t,r,n),a=ah("keys",e,t,r),i=ah("defaultValue",e,t,r),s=n.getHashTableById(o.id);return[await s.find(a,i)]}case"LookupTableSize":case"LookupTableSizeV2":{const o=ah("tableHandle",e,t,r,n);return[n.getHashTableById(o.id).tensorSize()]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,r,n);case"custom":const a=oh(e.op);if(a&&a.customExecutor)return a.customExecutor(new Vh(e,t,r));throw TypeError(`Custom op ${e.op} is not registered.`);default:throw TypeError(`Unknown op '${e.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(e,t,r);return Ft(a)?a.then((e=>[].concat(e))):[].concat(a)}class of{constructor(e={},t={},r={},n={}){this.weightMap=e,this.tensorArrayMap=t,this.tensorListMap=r,this.functionMap=n,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,t){return{id:e,frameName:t,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let t=0;t<this.contexts.length-1;t++){const r=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(r))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map((e=>0===e.id&&0===e.iterationId?"":`${e.frameName}-${e.iterationId}`)).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}nextIteration(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");{this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(const t in this.tensorListMap)this.tensorListMap[t].clearAndClose(e)}}function af(e,t,r,n){const o=new Set,a=[];let i=null,s=null;const p=new Set,l=Object.keys(e).map((e=>lh(e)[0]));let u=[];null!=n&&(u=n.map((e=>lh(e.name)[0])));const d=[...t];for(;d.length>0;){const e=d.pop();(uf(e)||df(e)||cf(e))&&null==i&&(i=e,s=i.children.map((e=>e.name)).filter((e=>o.has(e)))),o.add(e.name),null==r[e.name]&&-1===l.indexOf(e.name)&&-1===u.indexOf(e.name)&&(0!==e.inputs.length?e.inputs.forEach((e=>{p.has(e.name)||(p.add(e.name),d.push(e))})):a.push(e.name))}return{inputs:e,outputs:t,usedNodes:o,missingInputs:a,dynamicNode:i,syncInputs:s}}const sf=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],pf=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"],lf=["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"];function uf(e){return sf.indexOf(e.op)>=0}function df(e){return pf.indexOf(e.op)>=0}function cf(e){return lf.indexOf(e.op)>=0}class gf{constructor(e,t){this.graph=e,this.parent=t,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,null!=e.functions&&Object.keys(e.functions).forEach((t=>{this._functionExecutorMap[t]=new gf(e.functions[t],this)}))}get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const t=Object.keys(e).map((t=>e[t].map((e=>e.id))));this._weightIds=[].concat(...t),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map((e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0})))}get outputs(){return this._outputs.map((e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0})))}get inputNodes(){return this._inputs.map((e=>e.signatureKey||e.name))}get outputNodes(){return this._outputs.map((e=>{const t=e.signatureKey||e.name;return e.defaultOutput?`${t}:${e.defaultOutput}`:t}))}get functions(){return Object.keys(this._functions).reduce(((e,t)=>(e[t]=this._functions[t].signature,e)),{})}getCompilationKey(e,t){const r=e.map((e=>e.name)).sort(),n=t.map((e=>e.name)).sort();return r.join(this.SEPERATOR)+"--"+n.join(this.SEPERATOR)}compile(e,t){const r=af(e,t,this.weightMap,this._initNodes),{missingInputs:n,dynamicNode:o,syncInputs:a}=r;if(null!=o)throw new Error(`This execution contains the node '${o.name}', which has the dynamic op '${o.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${a}]`);if(n.length>0){const r=t.map((e=>e.name)),o=Object.keys(e);throw new Error(`Cannot compute the outputs [${r}] from the provided inputs [${o}]. Missing the following inputs: [${n}]`)}return function(e,t,r){const{usedNodes:n,inputs:o}=r,a=[],i=Object.keys(o).map((e=>lh(e)[0])).map((t=>e.nodes[t])),s=e.initNodes;i.forEach((e=>{n.has(e.name)&&a.push(e)})),e.weights.forEach((e=>{n.has(e.name)&&a.push(e)})),null!=s&&s.forEach((e=>{n.has(e.name)&&a.push(e)}));const p=new Set,l=[];for(;a.length>0;){const e=a.pop();p.add(e.name),t[e.name]||l.push(e),e.children.forEach((e=>{!p.has(e.name)&&n.has(e.name)&&e.inputs.every((e=>p.has(e.name)))&&a.push(e)}))}return l}(this.graph,this.weightMap,r)}cloneAndKeepTensor(e){if(null==e)return null;const t=e.clone();return Es(t),t}cloneTensorList(e){return e?e.map((e=>this.cloneAndKeepTensor(e))):null}cloneTensorMap(e){return Object.fromEntries(Object.entries(e).map((([e,t])=>[e,this.cloneTensorList(t)])))}execute(e,t){this.disposeIntermediateTensors(),e=this.mapInputs(e);const r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);const n=r.map((e=>this.graph.nodes[lh(e)[0]])),o=t.map((e=>lh(e)[0]));let a=o.map((e=>this.graph.nodes[e]));0===a.length&&(a=this._outputs);const i=this.getCompilationKey(n,a);let s=this.compiledMap.get(i);null==s&&(s=this.compile(e,a),this.compiledMap.set(i,s));try{this.keepIntermediateTensors=It().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(e){this.keepIntermediateTensors=!1,console.warn(e.message)}const p={},l={};return xs((()=>{const r=new of(this.weightMap,p,l,this.functionExecutorMap),n=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(e).forEach((t=>{const[r,o]=lh(t),a=[];a[o]=e[t],n[r]=a,this.keepIntermediateTensors&&(this.clonedTensorsMap[r]=this.cloneTensorList(a))}));const a=this.getFrozenTensorIds(n),i={};for(let e=0;e<s.length;e++){const t=s[e];if(!n[t.name]){const e=nf(t,n,r,this._resourceManager);if(Ft(e))throw new Error(`The execution of the op '${t.op}' returned a promise. Please use model.executeAsync() instead.`);n[t.name]=e,this.keepIntermediateTensors&&(this.clonedTensorsMap[t.name]=this.cloneTensorList(e)),this.checkTensorForDisposal(t.name,t,n,r,a,o,i)}}return null==this.parent&&r.dispose(a),t.map((e=>ih(e,n,r)))}))}getFrozenTensorIds(e){const t=[].concat.apply([],Object.keys(e).map((t=>e[t])).map((e=>e.map((e=>e.id)))));return new Set(t)}checkTensorForDisposal(e,t,r,n,o,a,i){"control"!==t.category&&-1===a.indexOf(e)&&(r[e].forEach((e=>{null!=e&&(i[e.id]=(i[e.id]||0)+t.children.length)})),t.inputs.forEach((e=>{if("control"!==e.category){const t=function(e,t,r){return t[ph(e,r.currentContextId)]}(e.name,r,n);null!=t&&t.forEach((e=>{if(e&&!e.kept&&!o.has(e.id)){const t=i[e.id];1===t?(e.dispose(),delete i[e.id]):null!=t&&i[e.id]--}}))}})))}async executeAsync(e,t){return this._executeAsync(e,t)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach((e=>{for(const t of e)t&&!t.isDisposed&&t.dispose()})),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(e,t,r=!1,n={},o={}){this.disposeIntermediateTensors(),r||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t));try{this.keepIntermediateTensors=It().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(e){this.keepIntermediateTensors=!1,console.warn(e.message)}const a=new of(this.weightMap,n,o,this.functionExecutorMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));const i=await this.executeWithControlFlow(e,a,t,r),s=t.map((e=>ih(e,i,a))),p=s.map((e=>e.id)),l=Object.keys(e).map((t=>e[t].id)),u=new Set([...p,...l,...this.weightIds]);return Object.values(i).forEach((e=>{e.forEach((e=>{!e||e.isDisposed||u.has(e.id)||e.dispose()}))})),null==this.parent&&a.dispose(u),s}async executeFunctionAsync(e,t,r){const n=e.reduce(((e,t,r)=>(e[this.inputs[r].name]=t,e)),{});return this._executeAsync(n,this.outputNodes,!0,t,r)}async executeWithControlFlow(e,t,r,n){const o=Object.keys(e),a=o.map((e=>this.graph.nodes[lh(e)[0]])),i=r.map((e=>lh(e)[0]));let s=i.map((e=>this.graph.nodes[e]));0===s.length&&(s=this._outputs);const{usedNodes:p,missingInputs:l,dynamicNode:u,syncInputs:d}=af(e,s,this.weightMap,this._initNodes),c=[...a,...this.graph.weights,...this._initNodes||[]].map((e=>({node:e,contexts:t.currentContext}))),g=Object.assign({},this.weightMap);Object.keys(e).forEach((t=>{const[r,n]=lh(t),o=[];o[n]=e[t],g[r]=o}));const h={},f=this.getFrozenTensorIds(g),m={};for(;c.length>0;){const e=this.processStack(a,c,t,g,m,f,i,h,p);await Promise.all(e)}null!=u||n||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const y=s.filter((e=>!uf(e)&&!ih(e.name,g,t))).map((e=>e.name));if(y.length>0){let e="";throw null!=u&&(e=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${d}]`),new Error(`Cannot compute the outputs [${y}] from the provided inputs [${o}]. Consider providing the following inputs: [${l}]. ${e}`)}return g}processStack(e,t,r,n,o,a,i,s,p){const l=[];for(;t.length>0;){const e=t.pop();r.currentContext=e.contexts;let u="";if("Enter"===e.node.op&&ah("isConstant",e.node,n,r)&&([u]=sh(e.node.name,r)),null==n[e.node.name]){const d=nf(e.node,n,r,this._resourceManager);u||([u]=sh(e.node.name,r));const c=r.currentContext;Ft(d)?l.push(d.then((l=>(n[u]=l,this.keepIntermediateTensors&&(this.clonedTensorsMap[u]=this.cloneTensorList(l)),r.currentContext=c,this.checkTensorForDisposal(u,e.node,n,r,a,i,s),this.processChildNodes(e.node,t,r,n,o,p),l)))):(n[u]=d,this.keepIntermediateTensors&&(this.clonedTensorsMap[u]=this.cloneTensorList(d)),this.checkTensorForDisposal(u,e.node,n,r,a,i,s),this.processChildNodes(e.node,t,r,n,o,p))}else this.processChildNodes(e.node,t,r,n,o,p)}return l}processChildNodes(e,t,r,n,o,a){e.children.forEach((e=>{const[i]=sh(e.name,r);!o[i]&&a.has(e.name)&&("Merge"===e.op?e.inputNames.some((e=>!!ih(e,n,r)))&&(o[i]=!0,t.push({contexts:r.currentContext,node:e})):e.inputNames.every((e=>!!ih(e,n,r)))&&(o[i]=!0,t.push({contexts:r.currentContext,node:e})))}))}dispose(){Object.keys(this.weightMap).forEach((e=>this.weightMap[e].forEach((e=>e.dispose()))))}checkInputShapeAndType(e){Object.keys(e).forEach((t=>{const r=e[t],[n]=lh(t),o=this.graph.nodes[n];if(o.attrParams.shape&&o.attrParams.shape.value){const e=o.attrParams.shape.value;et(e.length===r.shape.length&&r.shape.every(((t,r)=>-1===e[r]||e[r]===t)),(()=>`The shape of dict['${o.name}'] provided in model.execute(dict) must be [${e}], but was [${r.shape}]`))}o.attrParams.dtype&&o.attrParams.dtype.value&&et(r.dtype===o.attrParams.dtype.value,(()=>`The dtype of dict['${o.name}'] provided in model.execute(dict) must be ${o.attrParams.dtype.value}, but was ${r.dtype}`))}))}mapInputs(e){var t,r;const n={};for(const o in e){const a=null===(r=null===(t=this._signature)||void 0===t?void 0:t.inputs)||void 0===r?void 0:r[o];null!=a?n[a.name]=e[o]:n[o]=e[o]}return n}checkInputs(e){const t=Object.keys(e).filter((e=>{const[t]=lh(e);return null==this.graph.nodes[t]}));if(t.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${t}] that are not part of graph`)}mapOutputs(e){return e.map((e=>{var t,r;const n=null===(r=null===(t=this._signature)||void 0===t?void 0:t.outputs)||void 0===r?void 0:r[e];return null!=n?n.name:e}),{})}checkOutputs(e){e.forEach((e=>{const[t]=lh(e);if(!this.graph.nodes[t])throw new Error(`The output '${e}' is not found in the graph`)}))}}class hf{constructor(e={},t={}){this.hashTableNameToHandle=e,this.hashTableMap=t}addHashTable(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}const ff="?tfjs-format=file",mf="model.json";class yf{constructor(e,t={},r=vs){this.modelUrl=e,this.loadOptions=t,this.version="n/a",this.io=r,null==t&&(this.loadOptions={}),this.resourceManager=new hf}get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}findIOHandler(){const e=this.modelUrl;if(null!=e.load)this.handler=e;else if(null!=this.loadOptions.requestInit)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{const t=this.io.getLoadHandlers(e,this.loadOptions);if(0===t.length)t.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error(`Found more than one (${t.length}) load handlers for URL '${[e]}'`);this.handler=t[0]}}load(){if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=this.handler.load();return Ft(e)?e.then((e=>this.loadSync(e))):this.loadSync(e)}loadSync(e){this.artifacts=e;const t=this.artifacts.modelTopology;let r=this.artifacts.signature;if(null!=this.artifacts.userDefinedMetadata){const e=this.artifacts.userDefinedMetadata;null!=e.signature&&(r=e.signature),null!=e.structuredOutputKeys&&(this.structuredOutputKeys=e.structuredOutputKeys)}this.signature=r,this.version=`${t.versions.producer}.${t.versions.minConsumer}`;const n=this.io.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new gf(Ch.Instance.transformGraph(t,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(n),this.executor.resourceManager=this.resourceManager,null!=e.modelInitializer&&null!=e.modelInitializer.node){const t=Ch.Instance.transformGraph(e.modelInitializer);this.initializer=new gf(t),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}async save(e,t){if("string"==typeof e){const t=this.io.getSaveHandlers(e);if(0===t.length)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(t.length>1)throw new Error(`Found more than one (${t.length}) save handlers for URL '${e}'`);e=t[0]}if(null==e.save)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}addStructuredOutputNames(e){if(this.structuredOutputKeys){const t={};return(e instanceof Vo?[e]:e).forEach(((e,r)=>t[this.structuredOutputKeys[r]]=e)),t}return e}predict(e,t){const r=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(r)}async predictAsync(e,t){const r=await this.executeAsync(e,this.outputNodes);return this.addStructuredOutputNames(r)}normalizeInputs(e){var t;if(!(e instanceof Vo||Array.isArray(e))){const r=null===(t=this.signature)||void 0===t?void 0:t.inputs;if(null!=r)for(const t in r){const n=r[t];null!=n.resourceId&&(e[t]=this.resourceIdToCapturedInput[n.resourceId])}return e}e=Array.isArray(e)?e:[e];const r=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+r!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-r} non-resource placeholders, while there are ${e.length} input tensors provided.`);let n=0;return this.inputNodes.reduce(((t,r)=>{var o,a,i;const s=null===(i=null===(a=null===(o=this.signature)||void 0===o?void 0:o.inputs)||void 0===a?void 0:a[r])||void 0===i?void 0:i.resourceId;return t[r]=null!=s?this.resourceIdToCapturedInput[s]:e[n++],t}),{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}executeInitializerGraph(){return null==this.initializer?[]:null==this.initializerSignature?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return null==this.initializer?[]:null==this.initializerSignature?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(e){if(this.resourceIdToCapturedInput={},this.initializerSignature){const t=this.initializerSignature.outputs,r=Object.keys(t);for(let n=0;n<r.length;n++){const o=t[r[n]];this.resourceIdToCapturedInput[o.resourceId]=e[n]}}}execute(e,t){null==this.resourceIdToCapturedInput&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const r=this.executor.execute(e,t);return r.length>1?r:r[0]}async executeAsync(e,t){null==this.resourceIdToCapturedInput&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const r=await this.executor.executeAsync(e,t);return r.length>1?r:r[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce(((t,r)=>(t[r]=[e[r]],t)),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&Ss(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}async function bf(e,t={},r=vs){if(null==e)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");null==t&&(t={}),t.fromTFHub&&"string"==typeof e&&(e=function(e){return e.endsWith("/")||(e+="/"),`${e}${mf}${ff}`}(e));const n=new yf(e,t,r);return await n.load(),n}function _f(e,t){Array.isArray(e)||(e=[e]),e.forEach((e=>{null!=e&&et("complex64"!==e.dtype,(()=>`${t} does not support complex64 tensors in the CPU backend.`))}))}const vf=ac;class wf extends Xe{constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new Ye(this,Os())}nextDataId(){return wf.nextDataId++}write(e,t,r){this.firstUse&&(this.firstUse=!1,It().get("IS_NODE")&&In("\n============================\nHi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. \n============================"));const n={id:this.nextDataId()};return this.data.set(n,{values:e,dtype:r,refCount:1}),n}makeTensorInfo(e,t,r){let n;if("string"===t&&null!=r&&r.length>0&&mt(r[0])){const o=r.map((e=>Fo(e)));n=this.write(o,e,t)}else n=this.write(r,e,t);return{dataId:n,shape:e,dtype:t}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){this.data.get(e).refCount++}decRef(e){this.data.has(e)&&this.data.get(e).refCount--}move(e,t,r,n,o){this.data.set(e,{values:t,dtype:n,refCount:o})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:t,complexTensorInfos:r}=this.data.get(e);return"complex64"===t?Dg(this.readSync(r.real.dataId),this.readSync(r.imag.dataId)):function(e,t){if(Array.isArray(e))return e;if("float32"===t)return e instanceof Float32Array?e:new Float32Array(e);if("int32"===t)return e instanceof Int32Array?e:new Int32Array(e);if("bool"===t||"string"===t)return Uint8Array.from(new Int32Array(e));throw new Error(`Unknown dtype ${t}`)}(this.data.get(e).values,t)}bufferSync(e){const t=this.readSync(e.dataId);if("string"===e.dtype)try{const r=t.map((e=>Mo(e)));return el(e.shape,e.dtype,r)}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8")}return el(e.shape,e.dtype,t)}makeOutput(e,t,r){return Os().makeTensorFromTensorInfo(this.makeTensorInfo(t,r,e),this)}disposeData(e,t=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(e);null!=r&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const t=Eo();return e(),{kernelMs:Eo()-t}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){_f([e],"where");const t=this.readSync(e.dataId);return vf(e.shape,t)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}function kf(e){return(t,r,n,o,a)=>{const i=Ns(t,r),s=i.length,p=vt(i),l=ct(a,nt(i)),u=t.length,d=r.length,c=vt(t),g=vt(r),h=Ds(t,i),f=Ds(r,i);if(h.length+f.length===0)for(let t=0;t<l.length;++t)l[t]=e(n[t%n.length],o[t%o.length]);else for(let t=0;t<l.length;++t){const r=Et(t,s,p),a=r.slice(-u);h.forEach((e=>a[e]=0));const i=St(a,u,c),m=r.slice(-d);f.forEach((e=>m[e]=0));const y=St(m,d,g);l[t]=e(n[i],o[y])}return[l,i]}}function Tf(e){const{inputs:t,backend:r}=e,{real:n,imag:o}=t,a=r.data.get(n.dataId).values,i=r.data.get(o.dataId).values,s=r.makeTensorInfo(n.shape,"complex64");return r.data.get(s.dataId).complexTensorInfos={real:r.makeTensorInfo(n.shape,"float32",a),imag:r.makeTensorInfo(o.shape,"float32",i)},s}function Of(e,t,r="float32"){if("complex64"===r)return Tf({inputs:{real:Of(e,t,"float32"),imag:Of(e,t,"float32")},backend:e});const n=Ot(nt(t),r);return e.makeTensorInfo(t,r,n)}function xf(e){const{inputs:t,backend:r}=e,{x:n}=t;return r.incRef(n.dataId),{dataId:n.dataId,shape:n.shape,dtype:n.dtype}}wf.nextDataId=0;const Sf={kernelName:yr,backendName:"cpu",kernelFunc:xf};function Ef(e){const{inputs:t,backend:r}=e,{input:n}=t,o=r.data.get(n.dataId).complexTensorInfos.real,a=r.data.get(o.dataId).values;return r.makeTensorInfo(o.shape,o.dtype,a)}function Ff(e,t,r,n){if("int32"===n)return[t,"int32",Int32Array.from(e)];if("bool"===n){const n=So([0],r),[o,a]=kf(((e,t)=>e!==t?1:0))(t,[],e,n,"bool");return[a,"bool",o]}throw new Error(`Error in Cast: failed to cast ${r} to ${n}`)}function Mf(e){const{inputs:t,backend:r,attrs:n}=e,{x:o}=t,{dtype:a}=n;if("complex64"===a){if("complex64"===o.dtype)return xf({inputs:{x:o},backend:r});const e=Of(r,o.shape,o.dtype),t=Mf({inputs:{x:o},backend:r,attrs:{dtype:"float32"}}),n=Tf({inputs:{real:t,imag:e},backend:r});return r.disposeIntermediateTensorInfo(e),r.disposeIntermediateTensorInfo(t),n}if("complex64"===o.dtype){const e=Ef({inputs:{input:o},backend:r}),t=Mf({inputs:{x:e},backend:r,attrs:{dtype:a}});return r.disposeIntermediateTensorInfo(e),t}if(!ht(o.dtype,a)){const e=xf({inputs:{x:o},backend:r});return{dataId:e.dataId,shape:e.shape,dtype:a}}const i=r.data.get(o.dataId).values,[s,p,l]=Ff(i,o.shape,o.dtype,a);return r.makeTensorInfo(s,p,l)}const Rf={kernelName:Ht,backendName:"cpu",kernelFunc:Mf};function Cf(e,t,r,n){return null==r?({inputs:r,backend:o})=>{const{a,b:i}=r,s=o;_f([a,i],e);const p=s.data.get(a.dataId).values,l=s.data.get(i.dataId).values,u="string"===a.dtype?qg(p):p,d="string"===a.dtype?qg(l):l,c=n||a.dtype,[g,h]=t(a.shape,i.shape,u,d,c);return s.makeTensorInfo(h,c,g)}:({inputs:e,backend:o})=>{const{a,b:i}=e,s=o;if("complex64"===a.dtype||"complex64"===i.dtype){const e=Mf({inputs:{x:a},backend:s,attrs:{dtype:"complex64"}}),t=s.data.get(e.dataId),n=t.complexTensorInfos.real,o=t.complexTensorInfos.imag,p=s.data.get(n.dataId).values,l=s.data.get(o.dataId).values,u=Mf({inputs:{x:i},backend:s,attrs:{dtype:"complex64"}}),d=s.data.get(u.dataId),c=d.complexTensorInfos.real,g=d.complexTensorInfos.imag,h=s.data.get(c.dataId).values,f=s.data.get(g.dataId).values,[m,y,b]=r(a.shape,i.shape,p,l,h,f),_=s.makeTensorInfo(b,"float32",m),v=s.makeTensorInfo(b,"float32",y),w=Tf({inputs:{real:_,imag:v},backend:s});return s.disposeIntermediateTensorInfo(e),s.disposeIntermediateTensorInfo(u),s.disposeIntermediateTensorInfo(_),s.disposeIntermediateTensorInfo(v),w}{const e=s.data.get(a.dataId).values,r=s.data.get(i.dataId).values,o=n||a.dtype,[p,l]=t(a.shape,i.shape,e,r,o);return s.makeTensorInfo(l,o,p)}}}function If(e){return(t,r,n,o,a,i)=>{const s=Ns(t,r),p=nt(s),l=s.length,u=vt(s),d=ct("float32",p),c=ct("float32",p),g=Ds(t,s),h=Ds(r,s),f=Dg(n,o),m=Dg(a,i),y=t.length,b=vt(t),_=r.length,v=vt(r);if(g.length+h.length===0)for(let t=0;t<d.length;t++){const r=t%f.length,n=t%m.length,o=e(f[2*r],f[2*r+1],m[2*n],m[2*n+1]);d[t]=o.real,c[t]=o.imag}else for(let t=0;t<d.length;t++){const r=Et(t,l,u),n=r.slice(-y);g.forEach((e=>n[e]=0));const o=St(n,y,b),a=r.slice(-_);h.forEach((e=>a[e]=0));const i=St(a,_,v),s=e(f[2*o],f[2*o+1],m[2*i],m[2*i+1]);d[t]=s.real,c[t]=s.imag}return[d,c,s]}}const Af=kf(((e,t)=>e+t)),Bf=If(((e,t,r,n)=>({real:e+r,imag:t+n}))),Df=Cf(Nt,Af,Bf),Lf={kernelName:Nt,backendName:"cpu",kernelFunc:Df};function Nf(e){return(t,r,n)=>{const o=ct(r,t.length);for(let r=0;r<t.length;++r)o[r]=e(t[r],n);return o}}function Pf(e,t,r){return({inputs:n,attrs:o,backend:a})=>{const{x:i}=n;if(_f(i,e),"string"===i.dtype||"string"===r)throw new Error("unaryKernelFunc does not support string input/output");const s=a,p=s.data.get(i.dataId).values,l=nt(i.shape),u=r||i.dtype,d=gt(u,l);for(let e=0;e<l;++e)d[e]=t(p[e],o);return s.makeTensorInfo(i.shape,u,d)}}const jf=Nf((e=>Math.ceil(e)));function Gf(e,t,r,n){const o=gt(r,nt(t));if(n&&"string"!==r){let t=0;e.forEach((e=>{const r=nt(e.shape);o.set(e.vals,t),t+=r}))}else{let n=0;e.forEach((e=>{const a="string"===r?qg(e.vals):e.vals;let i=0;for(let r=0;r<e.shape[0];++r){const s=r*t[1]+n;for(let t=0;t<e.shape[1];++t)o[s+t]=a[i++]}n+=e.shape[1]}))}return o}const Wf=kf(((e,t)=>e===t?1:0)),zf=Nf((e=>Math.exp(e))),Uf=($f=ir,Hf=zf,"float32",({inputs:e,attrs:t,backend:r})=>{const{x:n}=e;if(_f(n,$f),"string"===n.dtype)throw new Error("unaryKernelFunc does not support string input/output");const o=r,a=o.data.get(n.dataId).values,i="float32",s=Hf(a,i,t);return o.makeTensorInfo(n.shape,i,s)});var $f,Hf;const Vf=Nf((e=>Math.expm1(e))),Kf=Nf((e=>Math.floor(e))),Yf=kf(((e,t)=>e>t?1:0)),Xf=kf(((e,t)=>e>=t?1:0)),qf=kf(((e,t)=>e<t?1:0)),Jf=kf(((e,t)=>e<=t?1:0)),Qf=Nf((e=>Math.log(e)));function Zf(e,t,r,n){const o=ct(n,nt(r));for(let r=0;r<o.length;++r){const n=r*t;let a=e[n];for(let r=0;r<t;++r){const t=e[n+r];(Number.isNaN(t)||t>a)&&(a=t)}o[r]=a}return o}const em=kf(((e,t)=>Math.max(e,t))),tm=kf(((e,t)=>Math.min(e,t))),rm=kf(((e,t)=>e*t)),nm=If(((e,t,r,n)=>({real:e*r-t*n,imag:e*n+t*r}))),om=Cf(Ir,rm,nm),am={kernelName:Ir,backendName:"cpu",kernelFunc:om},im=kf(((e,t)=>e!==t?1:0));function sm(e,t,r,n,o){const a=t.length,i=nt(t),s=vt(t),p=vt(o),l=ct(r,nt(o));for(let t=0;t<i;++t){const r=Et(t,a,s),o=new Array(r.length);for(let e=0;e<o.length;e++)o[e]=r[n[e]];l[St(o,a,p)]=e[t]}return l}function pm(e){const{inputs:t,attrs:r,backend:n}=e,{x:o}=t,{perm:a}=r;_f(o,"transpose");const i=o.shape.length,s=new Array(i);for(let e=0;e<s.length;e++)s[e]=o.shape[a[e]];const p=sm(n.data.get(o.dataId).values,o.shape,o.dtype,a,s);return{dataId:n.write(p,s,o.dtype),shape:s,dtype:o.dtype}}function lm(e,t){const r=e.slice(0,t);for(;r.length<t;)r.push(1);for(let n=t;n<e.length;n++)r[t-1]*=e[n];return r}var um=kg;class dm{constructor(e,t,r,n,o,a,i,s,p,l){this.shape=e,this.shapeShape=t,this.values=r,this.valuesShape=n,this.valuesDType=o,this.defaultValue=a,this.defaultValueShape=i,this.rowPartitionValues=s,this.rowPartitionValuesShapes=p,this.rowPartitionTypes=Og(l),this.raggedRank=xg(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===um.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===um.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const t=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case um.VALUE_ROWIDS:return dm.getMaxWidthValueRowID(t);case um.ROW_SPLITS:return dm.getMaxWidthRowSplit(t);default:throw new Error(`Cannot handle partition type ${um[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const t=e.length;if(0===t||1===t)return 0;let r=0;for(let n=0;n<t-1;++n){const t=e[n+1]-e[n];t>r&&(r=t)}return r}static getMaxWidthValueRowID(e){const t=e.length;if(0===t)return 0;let r=0,n=e[0],o=0;for(let a=1;a<t;++a){const t=e[a];t!==n&&(n=t,o=Math.max(a-r,o),r=a)}return Math.max(t-r,o)}tensorShapeFromTensor(e,t,r=!0){if(0===t.length){if(-1===e[0])return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return gm(e,r)}calculateOutputSize(e){const t=this.valuesShape;Sg(this.defaultValueShape,t);const r=this.tensorShapeFromTensor(this.shape,this.shapeShape),n=Tg(this.raggedRank,r,t);n[0]<0&&(n[0]=e);for(let e=1;e<=this.raggedRank;++e)n[e]<0&&(n[e]=this.getMaxWidth(e));return n}calculateFirstParentOutputIndex(e,t,r){const n=Math.min(e,r),o=[];let a=0;for(let e=0;e<n;++e,a+=t)o.push(a);for(let t=n;t<e;++t)o.push(-1);return et(o.length===e,(()=>"Final length of result must be equal to firstDimension.")),o}calculateOutputIndexRowSplit(e,t,r,n){const o=e.length,a=[];for(let i=0;i<o-1;++i){const o=e[i+1]-e[i];let s=Math.min(n,o),p=t[i];-1===p&&(s=0);for(let e=0;e<s;++e)a.push(p),p+=r;for(let e=0;e<o-s;++e)a.push(-1)}if(o>0&&a.length!==e[o-1])throw new Error("Invalid row split size.");return a}calculateOutputIndexValueRowID(e,t,r,n){const o=e.length,a=[];if(0===o)return[];let i=0,s=e[0];if(s>=t.length)throw new Error(`Got currentValueRowId=${s}, which is not less than ${t.length}`);let p=t[s];a.push(p);for(let l=1;l<o;++l){const o=e[l];if(o===s)p>=0&&(++i,i<n?p+=r:p=-1);else{if(i=0,s=o,o>=t.length)throw new Error(`Got nextValueRowId=${o} which is not less than ${t.length}`);p=t[o]}a.push(p)}if(a.length!==e.length)throw new Error("Invalid row ids.");return a}calculateOutputIndex(e,t,r,n){const o=this.getRowPartitionTensor(e),a=this.getRowPartitionTypeByDimension(e);switch(a){case um.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(o,t,r,n);case um.ROW_SPLITS:if(o.length-1>t.length)throw new Error(`Row partition size is greater than output size: ${o.length-1} > ${t.length}`);return this.calculateOutputIndexRowSplit(o,t,r,n);default:throw new Error(`Unsupported partition type: ${um[a]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(0===this.rowPartitionTypes.length)throw new Error("No row_partition_types given.");const t=this.rowPartitionTypes[0];switch(t){case um.FIRST_DIM_SIZE:return e[0];case um.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case um.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${um[t]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const e=this.getFirstDimensionSize(),t=this.calculateOutputSize(e),r=new Array(this.raggedRank+1);r[r.length-1]=1;for(let e=r.length-2;e>=0;--e)r[e]=r[e+1]*t[e+1];const n=gm(t,!1),o=gt(this.valuesDType,nt(n));if(r[0]*t[0]>0){let a=this.calculateFirstParentOutputIndex(e,r[0],t[0]);for(let e=1;e<=this.raggedRank;++e)a=this.calculateOutputIndex(e-1,a,r[e],t[e]);this.setOutput(this.raggedRank,a,o,n)}return[n,o]}setOutput(e,t,r,n){if(0===r.length)return;const o=this.values,a=r;let i=n.slice();i=i.slice(e+1);const s=nt(i),p=t.length;let l=this.defaultValue;if(l.length!==s&&1!==l.length){const e=this.defaultValueShape;xs((()=>{const t=Np(l,e),r=Zp(t,i);l=r.dataSync()}))}let u=0,d=0,c=0;for(let e=0;e<=p;++e){let n=e<p?t[e]:-1;if(n!==c){if(d<c){const e=o.subarray(u*s);cm(a.subarray(d*s),e,(c-d)*s)}if(e>=p){const e=r.length;n=Math.floor(e/s)}if(n>c)if(1===this.defaultValue.length)a.subarray(c*s,n*s).fill(this.defaultValue[0]),c=n;else for(;n>c;)cm(a.slice(c*s),l,s),++c;n<0?(u=e+1,d=c):(u=e,d=c,c=d+1)}else++c}}}function cm(e,t,r){for(let n=0;n<r;n++)e[n]=t[n]}function gm(e,t){const r=[];for(let n of e){if(n<0){if(!t)throw new Error(`Dimension ${n} must be >= 0`);if(n<-1)throw new Error(`Dimension ${n} must be >= -1`);n=-1}r.push(n)}return r}function hm(e,t,r,n){if(e===t||e<t&&r<0||t<e&&r>1)return Ot(0,n);const o=Ot(Math.abs(Math.ceil((t-e)/r)),n);t<e&&1===r&&(r=-1),o[0]=e;for(let e=1;e<o.length;e++)o[e]=o[e-1]+r;return o}const fm=Nf((e=>1/Math.sqrt(e))),mm=Nf((e=>1/(1+Math.exp(-e)))),ym=Pf(rn,(e=>1/(1+Math.exp(-e)))),bm={kernelName:rn,backendName:"cpu",kernelFunc:ym};function _m(e,t,r,n,o){const a=tp(n,t,r),i=nt(r),s=vt(n);if(a){const r=rp(t,s);return"string"===o?e.slice(r,r+i):e.subarray(r,r+i)}const p=el(n,o,"string"===o?qg(e):e),l=el(r,o);for(let e=0;e<l.size;++e){const r=l.indexToLoc(e),n=r.map(((e,r)=>e+t[r]));l.set(p.get(...n),...r)}return"string"===o?Jg(l.values):l.values}function vm(e){const{inputs:t,backend:r,attrs:n}=e,{x:o}=t,{begin:a,size:i}=n;_f(o,"slice");const[s,p]=np(o,a,i);Hs(o,s,p);const l=_m(r.data.get(o.dataId).values,s,p,o.shape,o.dtype);return r.makeTensorInfo(p,o.dtype,l)}const wm={kernelName:tn,backendName:"cpu",kernelFunc:vm},km=Nf((e=>Math.sqrt(e))),Tm=kf(((e,t)=>{const r=e-t;return r*r}));function Om(e,t,r,n){const o=el(e,t.dtype);for(let e=0;e<o.size;e++){const a=o.indexToLoc(e),i=new Array(a.length);for(let e=0;e<i.length;e++)i[e]=a[e]*r[e]+n[e];o.set(t.get(...i),...a)}return o}class xm{constructor(e,t,r,n,o,a){this.separator=Fo(e),this.nGramWidths=t,this.leftPad=Fo(r),this.rightPad=Fo(n),this.padWidth=o,this.preserveShort=a}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,t){const r=this.getPadWidth(t);return Math.max(0,e+2*r-t+1)}createNGrams(e,t,r,n,o,a){for(let i=0;i<o;++i){const s=this.getPadWidth(a),p=Math.max(0,s-i),l=Math.max(0,s-(o-(i+1))),u=a-(p+l),d=t+(p>0?0:i-s);let c=0;c+=p*this.leftPad.length;for(let t=0;t<u;++t)c+=e[d+t].length;c+=l*this.rightPad.length,c+=(p+l+u-1)*this.separator.length,r[n+i]=new Uint8Array(c);const g=r[n+i];let h=0;const f=e=>e.forEach((e=>g[h++]=e));for(let e=0;e<p;++e)f(this.leftPad),f(this.separator);for(let t=0;t<u-1;++t)f(e[d+t]),f(this.separator);if(u>0){f(e[d+u-1]);for(let e=0;e<l;++e)f(this.separator),f(this.rightPad)}else{for(let e=0;e<l-1;++e)f(this.rightPad),f(this.separator);f(this.rightPad)}}}compute(e,t){const r=e.length,n=t.length;if(n>0){let e=t[0];if(0!==e)throw new Error(`First split value must be 0, got ${e}`);for(let o=1;o<n;++o){let n=t[o]>=e;if(n=n&&t[o]<=r,!n)throw new Error(`Invalid split value ${t[o]}, must be in [${e}, ${r}]`);e=t[o]}if(e!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${e}`)}const o=n-1,a=gt("int32",n);if(0===r||0===n){const e=new Array(r);for(let e=0;e<=o;++e)a[e]=0;return[e,a]}a[0]=0;for(let e=1;e<=o;++e){const r=t[e]-t[e-1];let n=0;this.nGramWidths.forEach((e=>{n+=this.getNumNGrams(r,e)})),this.preserveShort&&r>0&&0===n&&(n=1),a[e]=a[e-1]+n}const i=new Array(a[o]);for(let r=0;r<o;++r){const n=t[r];let o=a[r];if(this.nGramWidths.forEach((a=>{const s=t[r+1]-t[r],p=this.getNumNGrams(s,a);this.createNGrams(e,n,i,o,p,a),o+=p})),this.preserveShort&&o===a[r]){const a=t[r+1]-t[r];if(0===a)continue;const s=a+2*this.padWidth,p=1;this.createNGrams(e,n,i,o,p,s)}}return[i,a]}}function Sm(e,t,r,n,o,a,i,s){return new xm(r,n,o,a,i,s).compute(e,t)}function Em(e,t,r,n){if(!e.length)return;if(0===t.length){for(let t=0;t<e.length;++t)n.push(e.subarray(t,t+1));return}if(1===t.length){const o=t[0];let a=e.indexOf(o);for(;-1!==a;){const t=e.subarray(0,a);r&&0===t.length||n.push(t),a=(e=e.subarray(a+1)).indexOf(o)}return void(r&&0===e.length||n.push(e))}let o=0;for(let a=0;a<e.length+1;a++)if(a===e.length||-1!==t.indexOf(e[a])){const t=e.subarray(o,a);r&&0===t.length||n.push(t),o=a+1}}function Fm(e,t,r){const n=e.length,o=[];let a=0,i=0;const s=new Array(n);for(let p=0;p<n;++p){const n=o.length;Em(e[p],t,r,o);const l=o.length-n;s[p]=l,a+=l,i=Math.max(i,l)}const p=gt("int32",2*a),l=new Array(a),u=[n,i];let d=0;for(let e=0;e<n;++e)for(let t=0;t<s[e];++t)p[2*d]=e,p[2*d+1]=t,l[d]=o[d],++d;return[p,l,u]}function Mm(e,t){const r=gt("int32",e.length);for(let n=0;n<e.length;++n)r[n]=Oo(e[n]).modulo(t).getLowBitsUnsigned();return r}const Rm=kf(((e,t)=>e-t)),Cm=If(((e,t,r,n)=>({real:e-r,imag:t-n}))),Im=Cf(bn,Rm,Cm),Am={kernelName:bn,backendName:"cpu",kernelFunc:Im},Bm=(e,t)=>{const r=t.value-e.value;return 0===r?e.index-t.index:r};function Dm(e,t,r=0,n=e.length-1){for(;n>r;){if(n-r>600){const o=n-r+1,a=t-r+1,i=Math.log(o),s=.5*Math.exp(2*i/3),p=.5*Math.sqrt(i*s*(o-s)/o)*Math.sign(a-o/2);Dm(e,t,Math.max(r,Math.floor(t-a*s/o+p)),Math.min(n,Math.floor(t+(o-a)*s/o+p)))}const o=e[t];let a=r,i=n;for(Ze(e,r,t),Bm(e[n],o)>0&&Ze(e,r,n);a<i;){for(Ze(e,a,i),a++,i--;Bm(e[a],o)<0;)a+=1;for(;Bm(e[i],o)>0;)i-=1}0===Bm(e[r],o)?Ze(e,r,i):(i+=1,Ze(e,i,n)),i<=t&&(r=i+1),t<=i&&(n=i-1)}}var Lm=Object.freeze({__proto__:null,simpleAbsImpl:function(e){const t=new Float32Array(e.length);for(let r=0;r<e.length;++r)t[r]=Math.abs(e[r]);return t},addImpl:Af,bincountImpl:function(e,t,r,n,o){const a=nt(n),i=Ot(o,r);for(let r=0;r<e.length;r++){const n=e[r];if(n<0)throw new Error("Input x must be non-negative!");n>=o||(i[n]+=a>0?t[r]:1)}return i},bincountReduceImpl:function(e,t,r,n=!1){const o=e.shape[0],a=e.shape[1],i=el([o,r],t.dtype);for(let s=0;s<o;s++)for(let o=0;o<a;o++){const a=e.get(s,o);if(a<0)throw new Error("Input x must be non-negative!");a>=r||(n?i.set(1,s,a):t.size>0?i.set(i.get(s,a)+t.get(s,o),s,a):i.set(i.get(s,a)+1,s,a))}return i},castImpl:Ff,ceilImpl:jf,concatImpl:Gf,equalImpl:Wf,expImpl:zf,expm1Impl:Vf,floorImpl:Kf,gatherNdImpl:function(e,t,r,n,o,a,i,s,p){const l=el([n,a],r);for(let r=0;r<n;r++){const n=[];let u=0;for(let t=0;t<o;t++){const a=e[r*o+t];u+=a*i[t],n.push(a)}if(u<0||u>=p/a)throw new Error(`Invalid indices: ${n} does not index into ${s}`);for(let e=0;e<a;e++)l.values[r*a+e]=t.get(...t.indexToLoc(u*a+e))}return l},gatherV2Impl:function(e,t,r){const n=el(r,e.dtype);for(let r=0;r<n.size;++r){const o=n.indexToLoc(r).slice(),a=o[0],i=o[2],s=t.locToIndex([a,i]);o[2]=t.values[s];const p=e.locToIndex(o);0<=p&&p<e.values.length&&(n.values[r]=e.values[p])}return n},greaterImpl:Yf,greaterEqualImpl:Xf,lessImpl:qf,lessEqualImpl:Jf,linSpaceImpl:function(e,t,r){const n=(t-e)/(r-1),o=Ot(r,"float32");o[0]=e;for(let e=1;e<o.length;e++)o[e]=o[e-1]+n;return o},logImpl:Qf,maxImpl:Zf,maximumImpl:em,minimumImpl:tm,multiplyImpl:rm,negImpl:function(e,t,r){const n=xo(-1,r);return rm([],t,n,e,r)},notEqualImpl:im,prodImpl:function(e,t,r,n){const[o,a]=Bl(e,n),i=ea(t,"int32"),s=Ot(nt(o),i),p=nt(a);for(let e=0;e<s.length;++e){const t=e*p;let n=1;for(let e=0;e<p;++e)n*=r[t+e];s[e]=n}return{outVals:s,outShape:o,outDtype:i}},raggedGatherImpl:function(e,t,r,n,o,a,i,s){if(0===e.length)throw new Error("paramsNestedSplits must be non empty");if(0===t[0].length)throw new Error("Split tensors must not be scalars");if(function(e,t,r){e.forEach(((e,n)=>{if(e<0||e>=r){const o=Et(n,t.length,vt(t)).join(",");throw new Error(`indices[${o}] = ${e} is not in [0, ${r})`)}}))}(a,i,t[0][0]-1),0===n.length)throw new Error("params.rank must be nonzero");const p=n[0],{outSplits:l,valueSlices:u,numValues:d}=function(e,t,r,n){const o=[];let a=0;const i=t.length-1+r.length,s=new Array(i).fill(null).map((()=>[0]));!function(e,t){for(let r=0;r<e.length;++r){const n=e[r],o=r===e.length-1?t:e[r+1].length;if(0===n.length)throw new Error("Ragged splits may not be empty");if(n[0]<0)throw new Error("Ragged splits must be non-negative");if(n[n.length-1]>o)throw new Error("Ragged splits must not point past values");for(let e=1;e<n.length;++e)if(n[e-1]>n[e])throw new Error("Ragged splits must be sorted in ascending order")}}(r,n);let p=1;for(let e=0;e<t.length-1;++e){p*=t[e];const r=t[e+1];for(let t=1;t<p+1;++t)s[e].push(t*r)}for(let n=0;n<e.length;++n){let i=e[n],p=e[n]+1;for(let e=0;e<r.length;++e){const n=r[e],o=e+t.length-1;if(o>=0){const e=s[o],t=e[e.length-1]-n[i];for(let e=i;e<p;++e)s[o].push(n[e+1]+t)}i=n[i],p=n[p]}p!==i&&(o.push([i,p]),a+=p-i)}return{outSplits:s,valueSlices:o,numValues:a}}(a,i,e,p),c=function(e){const t=[];for(let r=0;r<e.length;++r){const n=gt("int32",e[r].length);t.push(n),e[r].forEach(((e,t)=>n[t]=e))}return t}(l),g=function(e,t,r,n,o){const a=t.slice();a[0]=o;const i=gt(r,nt(a)),s=e.length;return function(e,t,r,n,o,a){const i=lm(t,2)[1],s=lm(a,2)[1];let p=0;for(const t of r)for(let r=t[0];r<t[1];++r){for(let t=0;t<n;++t)o[p*s+t]=e[r*i+t];++p}}(e,t,n,0===s?0:s/t[0],i,a),[i,a]}(r,n,o,u,d);return[c,g[0],g[1]]},raggedRangeImpl:function(e,t,r,n,o,a,i){if(t.length>1)throw new Error("starts must be a scalar or vector");if(o.length>1)throw new Error("limits must be a scalar or vector");if(i.length>1)throw new Error("deltas must be a scalar or vector");const s=0===t.length,p=0===o.length,l=0===i.length,u=[];s||u.push(t[0]),p||u.push(o[0]),l||u.push(i[0]);for(let e=1;e<u.length;++e)if(u[e]!==u[e-1])throw new Error("starts, limits, and deltas must have the same shape");const d=0===u.length?1:u[0],c=gt("int32",d+1);c[0]=0;for(let t=0;t<d;++t){const r=s?e[0]:e[t],o=p?n[0]:n[t],i=l?a[0]:a[t];if(0===i)throw new Error("Requires delta != 0");let u;if(i>0&&o<r||i<0&&o>r)u=0;else if(u=Math.ceil(Math.abs((o-r)/i)),u>2147483647)throw new Error("Requires ((limit - start) / delta) <= 2147483647");c[t+1]=c[t]+u}const g=gt(r,c[d]);let h=0;for(let t=0;t<d;++t){const r=c[t+1]-c[t];let n=s?e[0]:e[t];const o=l?a[0]:a[t];for(let e=0;e<r;++e)g[h++]=n,n+=o}return[c,g]},raggedTensorToTensorImpl:function(e,t,r,n,o,a,i,s,p,l){return new dm(e,t,r,n,o,a,i,s,p,l).compute()},rangeImpl:hm,rsqrtImpl:fm,scatterImpl:function(e,t,r,n,o,a,i,s,p,l){const u=[n/o,o],d=e.values,c=t.values;if(0===n)return el(r,t.dtype);const g=el(u,t.dtype);"string"==typeof p||"number"==typeof p?g.values.fill(p):"boolean"==typeof p&&g.values.fill(+p);for(let e=0;e<a;e++){const a=[];let p=0;for(let t=0;t<i;t++){const r=d[e*i+t];a.push(r),p+=r*s[t]}if(p<0||p>=n/o)throw new Error(`Invalid indices: ${a} does not index into ${r}`);for(let r=0;r<o;r++)l?g.values[p*o+r]+=c[e*o+r]:g.values[p*o+r]=0===t.rank?c[0]:c[e*o+r]}return g},sigmoidImpl:mm,sliceImpl:_m,sparseFillEmptyRowsImpl:function(e,t,r,n,o,a,i){const s=t[0],p=a[0],l=new Array(p),u=new Array(s),d=t[1];if(0===p){if(0!==s)throw new Error(jg(s));return[gt(r,0),[0,d],gt(o,0),l,u]}let c=!0,g=0;const h=new Array(p).fill(0);for(let t=0;t<s;++t){const r=e[t*d];if(r<0)throw new Error(Gg(t,r));if(r>=p)throw new Error(Wg(t,r,p));++h[r],c=c&&r>=g,g=r}let f=!0;for(let e=0;e<p;++e){const t=0===h[e];l[e]=t,f=f&&!t,h[e]=Math.max(h[e],1),e>0&&(h[e]+=h[e-1])}if(f&&c){const t=e,r=n;for(let e=0;e<s;++e)u[e]=e;return[t,[s,d],r,l,u]}{const t=h[p-1],a=gt(r,t*d),c=gt(o,t),g=new Array(p).fill(0);for(let t=0;t<s;++t){const r=e[t*d],o=g[r],i=(0===r?0:h[r-1])+o;g[r]++;for(let r=0;r<d;++r)a[i*d+r]=e[t*d+r];c[i]=n[t],u[t]=i}for(let e=0;e<p;++e)if(0===g[e]){const t=0===e?0:h[e-1];a[t*d+0]=e;for(let e=1;e<d;++e)a[t*d+e]=0;c[t]=i}return[a,[t,d],c,l,u]}},sparseReshapeImpl:function(e,t,r,n,o){const a=nt(n),i=t[0],s=o.length,p=[];let l=1,u=-1;for(let e=0;e<s;++e){const t=o[e];if(-1===t){if(-1!==u)throw new Error(zg(u,e));u=e,p.push(1)}else{if(t<0)throw new Error(Ug(e,t));l*=t,p.push(t)}}if(-1!==u){if(l<=0)throw new Error("reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero");const e=Math.trunc(a/l);if(l*e!==a)throw new Error($g(n,p));p[u]=e}if(nt(p)!==a)throw new Error(Hg(n,p));const d=n.length,c=[];if(d>0){c[d-1]=1;for(let e=d-2;e>=0;--e)c[e]=c[e+1]*n[e+1]}const g=[];if(s>0){g[s-1]=1;for(let e=s-2;e>=0;--e)g[e]=g[e+1]*p[e+1]}const h=gt(r,i*s);for(let t=0;t<i;++t){let r=0;for(let n=0;n<d;++n)r+=e[t*d+n]*c[n];for(let e=0;e<s;++e)h[t*s+e]=Math.trunc(r/g[e]),r%=g[e]}return[h,[i,s],p]},sparseSegmentReductionImpl:function(e,t,r,n,o,a=!1,i=0){const s=n.length,p=[t[0],e.length/t[0]],l=p[1],u=s>0?o[s-1]+1:0;if(u<0)throw new Error("segment ids must be >= 0");const d=t.slice();d[0]=u;const c=gt(r,d.reduce(((e,t)=>e*t),1));if(0===s)return u>0&&c.fill(i),[c,d];if(u<=0)throw new Error("segment ids must be >= 0");let g=0,h=1,f=0,m=o[g];for(;;){let t=0;if(h<s){if(t=o[h],m===t){++h;continue}if(m>=t)throw new Error("segment ids are not increasing")}if(m<0||m>=u)throw new Error(Vg(m,u));m>f&&c.fill(i,f*l,m*l);for(let t=g;t<h;++t){const r=n[t];if(r<0||r>=p[0])throw new Error(Kg(t,n[t],p[0]));for(let t=0;t<l;t++)c[m*l+t]+=e[r*l+t]}if(a)for(let e=0;e<l;e++)c[m*l+e]/=h-g;if(g=h,++h,f=m+1,m=t,h>s)break}return f<u&&c.fill(i,f*l,u*l),[c,d]},sqrtImpl:km,squaredDifferenceImpl:Tm,stridedSliceImpl:Om,stringNGramsImpl:Sm,stringSplitImpl:Fm,stringToHashBucketFastImpl:Mm,subImpl:Rm,tileImpl:function(e,t){const r=new Array(e.rank);for(let n=0;n<r.length;n++)r[n]=e.shape[n]*t[n];const n=el(r,e.dtype);for(let t=0;t<n.values.length;++t){const r=n.indexToLoc(t),o=new Array(e.rank);for(let t=0;t<o.length;t++)o[t]=r[t]%e.shape[t];const a=e.locToIndex(o);n.values[t]=e.values[a]}return n},topKImpl:function(e,t,r,n,o){const a=t[t.length-1],[i,s]=[e.length/a,a],p=ct(r,i*n),l=ct("int32",i*n);for(let t=0;t<i;t++){const r=t*s,a=e.subarray(r,r+s);let i=new Array(a.length);a.forEach(((e,t)=>i[t]={value:e,index:t})),n<i.length&&(Dm(i,n),i=i.slice(0,n)),o&&i.sort(Bm);const u=t*n,d=p.subarray(u,u+n),c=l.subarray(u,u+n);for(let e=0;e<n;e++)d[e]=i[e].value,c[e]=i[e].index}const u=t.slice();return u[u.length-1]=n,[el(u,r,p),el(u,"int32",l)]},transposeImpl:sm,uniqueImpl:function(e,t,r,n){const o=ut(t,r)[0],a=[1,r[0],1];for(let e=0;e<o;e++)a[0]*=r[e];a[1]=r[o];for(let e=o+1;e<r.length;e++)a[2]*=r[e];const i={},s=new Int32Array(r[o]),p=new Uo(a,n,e),l=[],u=1===a[0]&&1===a[2];for(let t=0;t<r[o];t++){let r;if(u)r=e[t].toString();else{const e=[];for(let r=0;r<a[0];r++)for(let n=0;n<a[2];n++)e.push(p.get(r,t,n));r=e.join(",")}if(void 0!==i[r])s[t]=i[r];else{const e=Object.keys(i).length;i[r]=e,s[t]=e,l.push(t)}}const d=a.slice();d[1]=Object.keys(i).length;const c=new Uo(d,n);l.forEach(((e,t)=>{for(let r=0;r<a[0];r++)for(let n=0;n<a[2];n++)c.set(p.get(r,e,n),r,t,n)}));const g=r.slice();return g[o]=d[1],{outputValues:c.values,outputShape:g,indices:s}}});function Nm(e){const{inputs:t,backend:r,attrs:n}=e,{x:o}=t,{shape:a}=n,i=nt(o.shape),s=lt(a,i),p=nt(s);et(i===p,(()=>`The new shape (${s}) has ${p} elements and the old shape (${o.shape}) has ${i} elements. The new shape and old shape must have the same number of elements.`)),r.incRef(o.dataId);const l=r.data.get(o.dataId);if(null!=l.complexTensorInfos){const e=l.complexTensorInfos.real,t=l.complexTensorInfos.imag;e.shape=s,t.shape=s}return{dataId:o.dataId,shape:s,dtype:o.dtype}}Rs("cpu",(()=>new wf),1);const Pm={kernelName:Vr,backendName:"cpu",kernelFunc:Nm},jm={kernelName:Yr,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:r,attrs:n}=e,{images:o}=t,{alignCorners:a,halfPixelCenters:i,size:s}=n;_f(o,"resizeBilinear");const p=vt(o.shape),[l,u]=s,[d,c,g,h]=o.shape,f=r.data.get(o.dataId).values,m=new Float32Array(nt([d,l,u,h])),y=[a&&l>1?c-1:c,a&&u>1?g-1:g],b=[a&&l>1?l-1:l,a&&u>1?u-1:u];let _=0;const v=y[0]/b[0],w=y[1]/b[1];for(let e=0;e<d;e++)for(let t=0;t<l;t++){let r;r=i?v*(t+.5)-.5:v*t;const n=Math.max(0,Math.floor(r)),o=r-n,a=Math.min(c-1,Math.ceil(r)),s=e*p[0]+n*p[1],l=e*p[0]+a*p[1];for(let e=0;e<u;e++){let t;t=i?w*(e+.5)-.5:w*e;const r=Math.max(0,Math.floor(t)),n=t-r,a=Math.min(g-1,Math.ceil(t)),u=s+r*p[2],d=l+r*p[2],c=s+a*p[2],y=l+a*p[2];for(let e=0;e<h;e++){const t=f[u+e],r=f[d+e],a=t+(f[c+e]-t)*n,i=a+(r+(f[y+e]-r)*n-a)*o;m[_++]=i}}}return r.makeTensorInfo([d,l,u,h],"float32",m)}},Gm=kf(((e,t)=>e/t)),Wm=Cf(nr,Gm),zm={kernelName:nr,backendName:"cpu",kernelFunc:Wm},Um={kernelName:Gr,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:r,attrs:n}=e,{x:o}=t,{paddings:a,constantValue:i}=n;_f(o,"pad");const s=a.map(((e,t)=>e[0]+o.shape[t]+e[1])),p=a.map((e=>e[0])),l=r.data.get(o.dataId).values,u=nt(o.shape),d=o.shape.length,c=vt(o.shape),g=nt(s),h=s.length,f=vt(s),m=ct(o.dtype,g);0!==i&&m.fill(i);for(let e=0;e<u;e++)m[St(Et(e,d,c).map(((e,t)=>e+p[t])),h,f)]=l[e];return{dataId:r.write(m,s,o.dtype),shape:s,dtype:o.dtype}}};function $m(e){const{inputs:t,backend:r,attrs:n}=e,{x:o,filter:a}=t,{strides:i,pad:s,dataFormat:p,dilations:l,dimRoundingMode:u}=n;_f([o,a],"conv2d");const d=Dp(p),c=xp(o.shape,a.shape,i,l,s,u,!1,d),g=c.filterHeight,h=c.filterWidth,f=c.dilationHeight,m=c.dilationWidth,y=c.padInfo.left,b=c.padInfo.top,_="channelsLast"===c.dataFormat,v=new Uo(c.outShape,o.dtype),w=vt(o.shape),k=vt(a.shape),T=w[0],O=_?w[1]:w[2],x=_?w[2]:1,S=_?1:w[1],E=v.strides[0],F=_?v.strides[1]:v.strides[2],M=_?v.strides[2]:1,R=_?1:v.strides[1],C=r.data.get(o.dataId).values,I=r.data.get(a.dataId).values,A=v.values;for(let e=0;e<c.batchSize;++e){const t=e*T,r=e*E;for(let e=0;e<c.outHeight;++e){const n=r+e*F,o=e*c.strideHeight-b;for(let e=0;e<g;++e){const r=o+e*f;if(r<0||r>=c.inHeight)continue;const a=e*k[0],i=t+r*O;for(let e=0;e<c.outWidth;++e){const t=n+e*M,r=e*c.strideWidth-y;for(let e=0;e<h;++e){const n=r+e*m;if(n<0||n>=c.inWidth)continue;const o=i+n*x;let s=a+e*k[1];for(let e=0;e<c.inChannels;++e){const r=C[o+e*S];for(let e=0;e<c.outChannels;++e)A[t+e*R]+=r*I[s+e];s+=c.outChannels}}}}}}return r.makeTensorInfo(v.shape,v.dtype,A)}const Hm={kernelName:Xt,backendName:"cpu",kernelFunc:$m},Vm=Pf(or,(e=>e>=0?e:Math.exp(e)-1)),Km=kf(((e,t)=>e<0?t*e:e)),Ym=Pf(Hr,(e=>Math.max(0,e))),Xm={kernelName:Hr,backendName:"cpu",kernelFunc:Ym},qm=Pf(Xr,(e=>Math.min(Math.max(0,e),6))),Jm={kernelName:Xr,backendName:"cpu",kernelFunc:qm};function Qm(e,t,r,n,o){if("linear"===r)return xf({inputs:{x:t},backend:e});if("relu"===r)return Ym({inputs:{x:t},backend:e});if("elu"===r)return Vm({inputs:{x:t},backend:e});if("relu6"===r)return qm({inputs:{x:t},backend:e});if("prelu"===r)return function(e){const{inputs:t,backend:r}=e,{x:n,alpha:o}=t;_f([n,o],"prelu");const a=r.data.get(n.dataId).values,i=r.data.get(o.dataId).values,[s,p]=Km(n.shape,o.shape,a,i,"float32");return r.makeTensorInfo(p,"float32",s)}({inputs:{x:t,alpha:n},backend:e});if("leakyrelu"===r)return function(e){const{inputs:t,backend:r,attrs:n}=e,{x:o}=t,{alpha:a}=n;_f([o],"leakyRelu");const i=nt(o.shape),s=r.data.get(o.dataId).values,p=ct("float32",i);for(let e=0;e<s.length;e++)p[e]=s[e]<0?a*s[e]:s[e];return r.makeTensorInfo(o.shape,"float32",p)}({inputs:{x:t},backend:e,attrs:{alpha:o}});if("sigmoid"===r)return ym({inputs:{x:t},backend:e});throw new Error(`Activation ${r} has not been implemented for the CPU backend.`)}const Zm={kernelName:Rn,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:r,attrs:n}=e,{x:o,filter:a,bias:i,preluActivationWeights:s}=t,{strides:p,pad:l,dataFormat:u,dilations:d,dimRoundingMode:c,activation:g,leakyreluAlpha:h}=n;let f=$m({inputs:{x:o,filter:a},backend:r,attrs:{strides:p,pad:l,dataFormat:u,dilations:d,dimRoundingMode:c}});if(i){const e=f;if("NCHW"===u&&1===i.shape.length&&1!==i.shape[0]){const e=Nm({inputs:{x:i},backend:r,attrs:{shape:[i.shape[0],1,1]}});f=Df({inputs:{a:f,b:e},backend:r}),r.disposeIntermediateTensorInfo(e)}else f=Df({inputs:{a:f,b:i},backend:r});r.disposeIntermediateTensorInfo(e)}if(g){const e=f;if("NCHW"===u&&"prelu"===g&&1===s.shape.length&&1!==s.shape[0]){const e=Nm({inputs:{x:s},backend:r,attrs:{shape:[s.shape[0],1,1]}});f=Qm(r,f,g,e,h),r.disposeIntermediateTensorInfo(e)}else f=Qm(r,f,g,s,h);r.disposeIntermediateTensorInfo(e)}return f}};function ey(e){const{inputs:t,backend:r,attrs:n}=e,{x:o,filter:a}=t,{strides:i,pad:s,dilations:p,dimRoundingMode:l}=n;_f([o,a],"depthwiseConv2DNative");const u=vt(o.shape),d=vt(a.shape);let c=p;null==c&&(c=[1,1]),et(Ap(i,c),(()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`));const g=xp(o.shape,a.shape,i,c,s,l,!0),{filterHeight:h,filterWidth:f,dilationHeight:m,dilationWidth:y,padInfo:b}=g,_=b.left,v=b.top,w=g.outChannels/g.inChannels,k=new Uo(g.outShape,o.dtype),T=r.data.get(o.dataId).values,O=r.data.get(a.dataId).values,x=k.values;for(let e=0;e<g.batchSize;++e){const t=e*u[0],r=e*k.strides[0];for(let e=0;e<g.outHeight;++e){const n=r+e*k.strides[1],o=e*g.strideHeight-v;for(let e=0;e<h;++e){const r=o+e*m;if(r<0||r>=g.inHeight)continue;const a=e*d[0],i=t+r*u[1];for(let e=0;e<g.outWidth;++e){const t=n+e*k.strides[2],r=e*g.strideWidth-_;for(let e=0;e<f;++e){const n=r+e*y;if(n<0||n>=g.inWidth)continue;const o=a+e*d[1],s=i+n*g.inChannels;let p=t,l=o;for(let e=0;e<g.inChannels;++e){const t=T[s+e];for(let e=0;e<w;++e)x[p+e]+=t*O[l+e];p+=w,l+=w}}}}}}return r.makeTensorInfo(k.shape,k.dtype,k.values)}const ty={kernelName:rr,backendName:"cpu",kernelFunc:ey},ry={kernelName:Cn,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:r,attrs:n}=e,{x:o,filter:a,bias:i,preluActivationWeights:s}=t,{strides:p,pad:l,dataFormat:u,dilations:d,dimRoundingMode:c,activation:g,leakyreluAlpha:h}=n;let f=ey({inputs:{x:o,filter:a},backend:r,attrs:{strides:p,pad:l,dataFormat:u,dilations:d,dimRoundingMode:c}});if(i){const e=f;f=Df({inputs:{a:f,b:i},backend:r}),r.disposeIntermediateTensorInfo(e)}if(g){const e=f;f=Qm(r,f,g,s,h),r.disposeIntermediateTensorInfo(e)}return f}},ny={kernelName:an,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:r,attrs:n}=e,{x:o}=t,{blockShape:a,paddings:i}=n;_f([o],"spaceToBatchND");const s=nt(a),p=[[0,0]];p.push(...i);for(let e=1+a.length;e<o.shape.length;++e)p.push([0,0]);const l=Um.kernelFunc({inputs:{x:o},backend:r,attrs:{paddings:p,constantValue:0}}),u=Rg(l.shape,a,s,!1),d=Cg(u.length,a.length,!1),c=Ig(l.shape,a,s,!1),g=Nm({inputs:{x:l},backend:r,attrs:{shape:u}}),h=pm({inputs:{x:g},backend:r,attrs:{perm:d}}),f=Nm({inputs:{x:h},backend:r,attrs:{shape:c}});return r.disposeIntermediateTensorInfo(l),r.disposeIntermediateTensorInfo(g),r.disposeIntermediateTensorInfo(h),f}},oy={kernelName:$t,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:r,attrs:n}=e,{x:o}=t,{blockShape:a,crops:i}=n;_f([o],"batchToSpaceND");const s=a.reduce(((e,t)=>e*t)),p=Rg(o.shape,a,s),l=Cg(p.length,a.length),u=Ig(o.shape,a,s),d=Ag(i,a.length),c=Bg(u,i,a.length),g=Nm({inputs:{x:o},backend:r,attrs:{shape:p}}),h=pm({inputs:{x:g},backend:r,attrs:{perm:l}}),f=Nm({inputs:{x:h},backend:r,attrs:{shape:u}}),m=vm({inputs:{x:f},backend:r,attrs:{begin:d,size:c}});return r.disposeIntermediateTensorInfo(g),r.disposeIntermediateTensorInfo(h),r.disposeIntermediateTensorInfo(f),m}},ay={kernelName:hn,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:r,attrs:n}=e,{x:o}=t,{begin:a,end:i,strides:s,beginMask:p,endMask:l,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:c}=n;_f(o,"stridedSlice");const{finalShapeSparse:g,finalShape:h,isIdentity:f,sliceDim0:m,isSimpleSlice:y,begin:b,end:_,strides:v}=op(o.shape,a,i,s,p,l,u,d,c);let w;if(f)w=Nm({inputs:{x:o},backend:r,attrs:{shape:h}});else if(m||y){et(o.shape.length>=1,(()=>`Input must have rank at least 1, got: ${o.shape.length}`));const e=Vs(b,_,v),t=vm({inputs:{x:o},backend:r,attrs:{begin:b,size:e}});w=Nm({inputs:{x:t},backend:r,attrs:{shape:h}}),r.disposeIntermediateTensorInfo(t)}else{const e=Om(g,r.bufferSync(o),v,b);w=r.makeTensorInfo(h,e.dtype,e.values)}return w}};function iy(e){const{inputs:t,backend:r,attrs:n}=e,{axis:o}=n,a=ut(o,t[0].shape)[0];vg(t.map((e=>e.shape)),a);let i=wg(t.map((e=>e.shape)),a);if(0===nt(i))return r.makeTensorInfo(i,t[0].dtype,[]);const s=t.filter((e=>nt(e.shape)>0));if(1===s.length)return xf({inputs:{x:s[0]},backend:r});if("complex64"===s[0].dtype){const e=s.map((e=>Ef({inputs:{input:e},backend:r}))),t=s.map((e=>function(e){const{inputs:t,backend:r}=e,{input:n}=t,o=r.data.get(n.dataId).complexTensorInfos.imag,a=r.data.get(o.dataId).values;return r.makeTensorInfo(o.shape,o.dtype,a)}({inputs:{input:e},backend:r}))),n=iy({inputs:e,backend:r,attrs:{axis:a}}),o=iy({inputs:t,backend:r,attrs:{axis:a}}),i=Tf({inputs:{real:n,imag:o},backend:r});return e.forEach((e=>r.disposeIntermediateTensorInfo(e))),t.forEach((e=>r.disposeIntermediateTensorInfo(e))),r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(o),i}const p=s.map((e=>{const t=nt(e.shape.slice(a));return Nm({inputs:{x:e},backend:r,attrs:{shape:[-1,t]}})})),l=p.map((e=>({vals:r.data.get(e.dataId).values,shape:e.shape})));i=wg(p.map((e=>e.shape)),1);const u=1===p[0].shape[0],d=Gf(l,i,t[0].dtype,u),c=wg(s.map((e=>e.shape)),a),g=r.makeTensorInfo(c,t[0].dtype,d);return p.forEach((e=>r.disposeIntermediateTensorInfo(e))),g}const sy={kernelName:Yt,backendName:"cpu",kernelFunc:iy};function py(e){const{inputs:t,backend:r,attrs:n}=e,{input:o}=t,{dim:a}=n,i=o.shape.length,s=o.shape.slice();let p=a;return a<0&&(et(-(i+1)<=a,(()=>`Axis must be in the interval [${-(i+1)}, ${i}]`)),p=i+a+1),s.splice(p,0,1),Nm({inputs:{x:o},backend:r,attrs:{shape:s}})}const ly={kernelName:jr,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:r,attrs:n}=e,{axis:o}=n;if(1===t.length)return py({inputs:{input:t[0]},backend:r,attrs:{dim:o}});const a=t[0].shape,i=t[0].dtype;t.forEach((e=>{tt(a,e.shape,"All tensors passed to stack must have matching shapes"),et(i===e.dtype,(()=>"All tensors passed to stack must have matching dtypes"))}));const s=[],p=iy({inputs:t.map((e=>{const t=py({inputs:{input:e},backend:r,attrs:{dim:o}});return s.push(t),t})),backend:r,attrs:{axis:o}});return s.forEach((e=>r.disposeIntermediateTensorInfo(e))),p}},uy={kernelName:qt,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:r,attrs:n}=e,{dy:o,filter:a}=t,{inputShape:i,strides:s,pad:p,dataFormat:l,dimRoundingMode:u}=n;_f([o,a],"conv2dBackpropInput");const d=vt(a.shape),c=vt(o.shape);let g=Dp(l);const h=xp(i,a.shape,s,1,p,u,!1,g),f=new Uo(h.inShape,"float32"),m=f.values,y=r.data.get(o.dataId).values,b=r.data.get(a.dataId).values,[_,v,w]=d,{batchSize:k,filterHeight:T,filterWidth:O,inChannels:x,inHeight:S,inWidth:E,outChannels:F,outHeight:M,outWidth:R,strideHeight:C,strideWidth:I}=h;g=h.dataFormat;const A=T-1-h.padInfo.top,B=O-1-h.padInfo.left,D="channelsLast"===g,L=f.strides[0],N=D?f.strides[1]:f.strides[2],P=D?f.strides[2]:1,j=D?1:f.strides[1],G=c[0],W=D?c[1]:c[2],z=D?c[2]:1,U=D?1:c[1];for(let e=0;e<k;++e)for(let t=0;t<x;++t)for(let r=0;r<S;++r){const n=r-A,o=Math.max(0,Math.ceil(n/C)),a=Math.min(M,(T+n)/C);for(let i=0;i<E;++i){const s=i-B,p=Math.max(0,Math.ceil(s/I)),l=Math.min(R,(O+s)/I);let u=0;for(let r=o;r<a;++r){const o=r*C-n;for(let n=p;n<l;++n){const a=G*e+W*r+z*n,i=_*(T-1-o)+v*(O-1-(n*I-s))+w*t;for(let e=0;e<F;++e)u+=y[a+U*e]*b[i+e]}}m[L*e+N*r+P*i+j*t]=u}}return r.makeTensorInfo(f.shape,f.dtype,f.values)}},dy={kernelName:er,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:r,attrs:n}=e,{image:o,boxes:a,boxInd:i}=t,{cropSize:s,method:p,extrapolationValue:l}=n,[u,d,c,g]=o.shape,h=a.shape[0],[f,m]=s,y=el([h,f,m,g],"float32"),b=r.data.get(a.dataId).values,_=r.data.get(i.dataId).values,v=r.data.get(o.dataId).values,w=vt(o.shape),k=vt(y.shape);for(let e=0;e<h;e++){const t=4*e,r=b[t],n=b[t+1],o=b[t+2],a=b[t+3],i=_[e];if(i>=u)continue;const s=f>1?(o-r)*(d-1)/(f-1):0,h=m>1?(a-n)*(c-1)/(m-1):0;for(let t=0;t<f;t++){const u=f>1?r*(d-1)+t*s:.5*(r+o)*(d-1);if(u<0||u>d-1)for(let r=0;r<m;r++)for(let n=0;n<g;n++){const o=n+r*k[2]+t*k[1]+e*k[0];y.values[o]=l}else if("bilinear"===p){const r=Math.floor(u),o=Math.ceil(u),s=u-r;for(let p=0;p<m;p++){const u=m>1?n*(c-1)+p*h:.5*(n+a)*(c-1);if(u<0||u>c-1){for(let r=0;r<g;r++){const n=r+p*k[2]+t*k[1]+e*k[0];y.values[n]=l}continue}const d=Math.floor(u),f=Math.ceil(u),b=u-d;for(let n=0;n<g;n++){let a=n+d*w[2]+r*w[1]+i*w[0];const l=v[a];a=n+f*w[2]+r*w[1]+i*w[0];const u=v[a];a=n+d*w[2]+o*w[1]+i*w[0];const c=v[a];a=n+f*w[2]+o*w[1]+i*w[0];const g=l+(u-l)*b,h=c+(v[a]-c)*b;a=n+p*k[2]+t*k[1]+e*k[0],y.values[a]=g+(h-g)*s}}}else for(let r=0;r<m;++r){const o=m>1?n*(c-1)+r*h:.5*(n+a)*(c-1);if(o<0||o>c-1){for(let n=0;n<g;n++){const o=n+r*k[2]+t*k[1]+e*k[0];y.values[o]=l}continue}const s=Math.round(o),p=Math.round(u);for(let n=0;n<g;n++){const o=n+s*w[2]+p*w[1]+i*w[0],a=n+r*k[2]+t*k[1]+e*k[0];y.values[a]=v[o]}}}}return r.makeTensorInfo(y.shape,y.dtype,y.values)}},cy={kernelName:qr,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:r,attrs:n}=e,{x:o}=t,{dims:a}=n;_f(o,"reverse");const i=o.shape.length,s=ut(a,o.shape);if(0===i)return xf({inputs:{x:o},backend:r});const p=new Uo(o.shape,o.dtype),l=r.bufferSync(o);for(let e=0;e<p.size;e++){const t=p.indexToLoc(e),r=t.slice();s.forEach((e=>r[e]=o.shape[e]-1-r[e])),p.set(l.get(...r),...t)}return r.makeTensorInfo(p.shape,p.dtype,p.values)}},gy={kernelName:On,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:r,attrs:n}=e,{value:o}=t;let{axis:a}=n;a<0&&(a+=o.shape.length);const i=o.shape.length,s=o.shape[a],p=new Array(i-1);let l=0;for(let e=0;e<i;e++)e!==a&&(p[l++]=o.shape[e]);const u=new Array(i).fill(0),d=o.shape.slice();d[a]=1;const c=new Array(s);for(let e=0;e<c.length;e++){u[a]=e;const t=vm({inputs:{x:o},backend:r,attrs:{begin:u,size:d}});c[e]=Nm({inputs:{x:t},backend:r,attrs:{shape:p}}),r.disposeIntermediateTensorInfo(t)}return c}},hy={kernelName:Wt,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:r,attrs:n}=e,{x:o}=t,{axis:a}=n;_f(o,"argMax");let i=ut(a,o.shape);const s=Nl(i,o.shape.length);let p=o;const l=[];null!=s&&(p=pm({inputs:{x:o},backend:r,attrs:{perm:s}}),l.push(p),i=jl(i.length,p.shape.length)),i=[i[0]],Ll("argMax",i,p.shape.length);const[u,d]=Bl(p.shape,i),c=Ot(nt(u),"int32"),g=nt(d),h=r.data.get(p.dataId).values;for(let e=0;e<c.length;++e){const t=e*g;let r=h[t],n=0;for(let e=0;e<g;++e){const o=h[t+e];o>r&&(r=o,n=e)}c[e]=n}return l.forEach((e=>r.disposeIntermediateTensorInfo(e))),r.makeTensorInfo(u,"int32",c)}};function fy(e){const{inputs:t,backend:r,attrs:n}=e,{x:o}=t,{axis:a,keepDims:i}=n;let s;_f(o,"sum"),s="bool"===o.dtype?Mf({inputs:{x:o},backend:r,attrs:{dtype:"int32"}}):xf({inputs:{x:o},backend:r});const p=s.shape.length,l=ut(a,s.shape),u=Nl(l,p);let d=l,c=s;null!=u&&(c=pm({inputs:{x:s},backend:r,attrs:{perm:u}}),d=jl(d.length,p)),Ll("sum",d,c.shape.length);const[g,h]=Bl(c.shape,d);let f=Of(r,g,ea(c.dtype,"int32"));const m=nt(h),y=r.data.get(f.dataId).values,b=r.data.get(c.dataId).values;for(let e=0;e<y.length;++e){const t=e*m;let r=0;for(let e=0;e<m;++e)r+=b[t+e];y[e]=r}if(i){const e=f;f=Nm({inputs:{x:f},backend:r,attrs:{shape:Dl(f.shape,l)}}),r.disposeIntermediateTensorInfo(e)}return r.disposeIntermediateTensorInfo(s),null!=u&&r.disposeIntermediateTensorInfo(c),f}const my={kernelName:Fr,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:r,attrs:n}=e,{x:o}=t,{axis:a,keepDims:i}=n,s=ut(a,o.shape),p=nt(Bl(o.shape,s)[1]),l=[],u=r.makeTensorInfo([],"float32",new Float32Array([p]));l.push(u);const d=Mf({inputs:{x:o},backend:r,attrs:{dtype:"float32"}});l.push(d);const c=Wm({inputs:{a:d,b:u},backend:r});l.push(c);const g=fy({inputs:{x:c},backend:r,attrs:{axis:a,keepDims:i}});return l.forEach((e=>r.disposeIntermediateTensorInfo(e))),g}},yy={kernelName:pn,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:r,attrs:n}=e,{logits:o}=t,{dim:a}=n,i=o.shape.length;let s=a;if(-1===s&&(s=i-1),s!==i-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${i} and dim was ${s}`);const p=ut([s],o.shape),l=function(e){const{inputs:t,backend:r,attrs:n}=e,{x:o}=t,{reductionIndices:a,keepDims:i}=n,s=r;let p=o.shape;const l=p.length,u=ut(a,p);let d=u;const c=Nl(d,l);let g=s.data.get(o.dataId).values;if(null!=c){const e=new Array(l);for(let t=0;t<e.length;t++)e[t]=p[c[t]];g=sm(g,p,o.dtype,c,e),d=jl(d.length,l),p=e}_f(o,"max"),Ll("max",d,l);const[h,f]=Bl(p,d),m=Zf(g,nt(f),h,o.dtype),y=s.write(m,h,o.dtype);let b=h;return i&&(b=Dl(h,u)),{dataId:y,shape:b,dtype:o.dtype}}({inputs:{x:o},backend:r,attrs:{reductionIndices:p,keepDims:!1}}),u=Dl(l.shape,p),d=Nm({inputs:{x:l},backend:r,attrs:{shape:u}}),c=Im({inputs:{a:o,b:d},backend:r}),g=Uf({inputs:{x:c},backend:r}),h=fy({inputs:{x:g},backend:r,attrs:{axis:p,keepDims:!1}}),f=Nm({inputs:{x:h},backend:r,attrs:{shape:u}}),m=Wm({inputs:{a:g,b:f},backend:r});return r.disposeIntermediateTensorInfo(l),r.disposeIntermediateTensorInfo(d),r.disposeIntermediateTensorInfo(c),r.disposeIntermediateTensorInfo(g),r.disposeIntermediateTensorInfo(h),r.disposeIntermediateTensorInfo(f),m}},by=Pf(Kt,((e,t)=>{const r=t;return e>r.clipValueMax?r.clipValueMax:e<r.clipValueMin?r.clipValueMin:e})),_y={kernelName:Kt,backendName:"cpu",kernelFunc:by},vy={kernelName:zt,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:r,attrs:n}=e,{x:o}=t;_f(o,"avgPool");const{filterSize:a,strides:i,pad:s,dimRoundingMode:p}=n;et(Ap(i,1),(()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '1'`));const l=Op(o.shape,a,i,1,s,p);let u;if(1===l.filterWidth&&1===l.filterHeight&&ot(l.inShape,l.outShape))u=xf({inputs:{x:o},backend:r});else{const e=r.data.get(o.dataId).values,t=vt(o.shape),n=function(e,t,r,n,o,a){const i=o.strideHeight,s=o.strideWidth,p=o.dilationHeight,l=o.dilationWidth,u=o.effectiveFilterHeight,d=o.effectiveFilterWidth,c=o.padInfo.top,g=o.padInfo.left,h=Number.POSITIVE_INFINITY,f=el(o.outShape,r),m=f.values,y=o.outShape[1]*o.outShape[2]*o.outShape[3],b=o.outShape[2]*o.outShape[3],_=o.outShape[3];for(let t=0;t<o.batchSize;++t){const r=t*y,a=t*n[0];for(let t=0;t<o.inChannels;++t)for(let f=0;f<o.outHeight;++f){const y=f*i-c,v=Math.max(0,y),w=Math.min(o.inHeight,u+y),k=r+f*b;for(let r=0;r<o.outWidth;++r){const i=r*s-g,u=Math.max(0,i),c=Math.min(o.inWidth,d+i);let f=h,y=0,b=0;for(let r=v;r<w;r+=p){const o=a+r*n[1];for(let r=u;r<c;r+=l){const a=e[o+r*n[2]+t];y+=a,b++}if(isNaN(f))break}m[k+r*_+t]=y/b}}}return f}(e,o.shape,o.dtype,t,l);u=r.makeTensorInfo(l.outShape,o.dtype,n.values)}return u}},wy={kernelName:Ut,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:r,attrs:n}=e,{a:o,b:a}=t,{transposeA:i,transposeB:s}=n;_f([o,a],"matMul");const p=o.shape.length,l=a.shape.length,u=i?o.shape[p-2]:o.shape[p-1],d=s?a.shape[l-1]:a.shape[l-2],c=i?o.shape[p-1]:o.shape[p-2],g=s?a.shape[l-2]:a.shape[l-1],h=o.shape.slice(0,-2),f=a.shape.slice(0,-2),m=nt(h),y=nt(f),b=Ns(o.shape.slice(0,-2),a.shape.slice(0,-2)).concat([c,g]);et(u===d,(()=>`Error in matMul: inner shapes (${u}) and (${d}) of Tensors with shapes ${o.shape} and ${a.shape} and transposeA=${i} and transposeB=${s} must match.`));const _=s?[y,g,d]:[y,d,g],v=Nm({inputs:{x:o},backend:r,attrs:{shape:i?[m,u,c]:[m,c,u]}}),w=Nm({inputs:{x:a},backend:r,attrs:{shape:_}}),k=i?v.shape[1]:v.shape[2],T=i?v.shape[2]:v.shape[1],O=s?w.shape[1]:w.shape[2],x=Math.max(m,y),S=r.data.get(v.dataId).values,E=r.data.get(w.dataId).values,F=vt(v.shape),M=vt(w.shape),[R,C,I]=i?[F[0],1,F[1]]:[F[0],F[1],1],[A,B,D]=s?[1,M[1],M[0]]:[M[1],1,M[0]],L=T*O,N=el([x,T,O],v.dtype),P=N.values,j=r.blockSize;for(let e=0;e<x;e++){const t=e%m,r=e%y;for(let n=0;n<T;n+=j){const o=Math.min(n+j,T);for(let a=0;a<O;a+=j){const i=Math.min(a+j,O);for(let s=0;s<k;s+=j){const p=Math.min(s+j,k);for(let l=n;l<o;l++)for(let n=a;n<i;n++){let o=0;for(let e=s;e<p;e++)o+=S[t*R+l*C+e*I]*E[e*A+n*B+r*D];P[e*L+(l*O+n)]+=o}}}}}return r.disposeIntermediateTensorInfo(v),r.disposeIntermediateTensorInfo(w),r.makeTensorInfo(b,N.dtype,N.values)}},ky={},Ty={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function Oy(e,t){if(!(e in ky)||null!=t){const r=function(e,t){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const r=null==t?function(e){if("undefined"!=typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e):t;return r.addEventListener("webglcontextlost",(t=>{t.preventDefault(),delete ky[e]}),!1),It().getBool("SOFTWARE_WEBGL_ENABLED")&&(Ty.failIfMajorPerformanceCaveat=!1),1===e?r.getContext("webgl",Ty)||r.getContext("experimental-webgl",Ty):r.getContext("webgl2",Ty)}(e,t);if(null===r)return console.log("Could not get context for WebGL version",e),null;ky[e]=r}const r=ky[e];return null==r||r.isContextLost()?(delete ky[e],Oy(e)):(r.disable(r.DEPTH_TEST),r.disable(r.STENCIL_TEST),r.disable(r.BLEND),r.disable(r.DITHER),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SAMPLE_COVERAGE),r.enable(r.SCISSOR_TEST),r.enable(r.CULL_FACE),r.cullFace(r.BACK),ky[e])}var xy,Sy,Ey;function Fy(e,t){return[t,e]}function My(e){const t=nt(e);return it(Math.ceil(t/4))}function Ry(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function Cy(e,t){const r=e;let n,o,a,i,s,p,l,u,d,c;return 2===It().getNumber("WEBGL_VERSION")?(n=r.R32F,o=r.R16F,a=r.RGBA16F,i=r.RGBA32F,s=r.RED,l=4,u=1,d=r.HALF_FLOAT,c=r.FLOAT,p=r.RGBA8):(n=e.RGBA,o=e.RGBA,a=e.RGBA,i=r.RGBA,s=e.RGBA,l=4,u=4,d=null!=t?t.HALF_FLOAT_OES:null,c=e.FLOAT,p=e.RGBA),{internalFormatFloat:n,internalFormatHalfFloat:o,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:i,textureFormatFloat:s,downloadTextureFormat:p,downloadUnpackNumChannels:l,defaultNumChannels:u,textureTypeHalfFloat:d,textureTypeFloat:c}}function Iy(e,t){const r=t();return It().getBool("DEBUG")&&function(e){const t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${t}`}}(e,t))}(e),r}function Ay(e){return!!(It().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function By(e,t){return zy(e,(()=>e.getExtension(t)),'Extension "'+t+'" not supported on this browser.')}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(xy||(xy={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(Sy||(Sy={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(Ey||(Ey={}));const Dy=/ERROR: [0-9]+:([0-9]+):/g;function Ly(e,t){const r=Dy.exec(t);if(null==r)return console.log(`Couldn't parse line number in error: ${t}`),void console.log(e);const n=+r[1],o=e.split("\n"),a=o.length.toString().length+2,i=o.map(((e,t)=>st((t+1).toString(),a)+e));let s=0;for(let e=0;e<i.length;e++)s=Math.max(i[e].length,s);const p=i.slice(0,n-1),l=i.slice(n-1,n),u=i.slice(n);console.log(p.join("\n")),console.log(t.split("\n")[0]),console.log(`%c ${st(l[0],s)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(u.join("\n"))}function Ny(e,t){if(Iy(e,(()=>e.validateProgram(t))),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function Py(e,t,r,n,o,a,i){const s=e.getAttribLocation(t,r);return-1!==s&&(Iy(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,n))),Iy(e,(()=>e.vertexAttribPointer(s,o,e.FLOAT,!1,a,i))),Iy(e,(()=>e.enableVertexAttribArray(s))),!0)}function jy(e,t,r){Iy(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,r))),Iy(e,(()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)))}function Gy(e,t){Iy(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,t))),Iy(e,(()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)))}function Wy(e){const t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${t}`}}(e,t))}function zy(e,t,r){const n=Iy(e,(()=>t()));if(null==n)throw new Error(r);return n}function Uy(e,t=2){return nt(e.slice(0,e.length-t))}function $y(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function Hy(e){let t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[Uy(e),...$y(e)]),t}function Vy(e){return e%2==0}function Ky(e,t){if(ot(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){const r=e.slice(-1)[0],n=t.slice(-1)[0];if(r===n)return!0;if(Vy(r)&&Vy(n)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&Vy(e[0])&&Vy(t[0])}let Yy,Xy;function qy(e,t){return null!=e.getExtension(t)}function Jy(e){try{if(null!=Oy(e))return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function Qy(e){const t=Cy(e),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);const n=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,n),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);const o=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(n),o}const Zy=It();function eb(){let e,t,r,n,o,a,i,s,p,l;return 2===It().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",r="out",n="in",o="texture",a="outputColor",i="out vec4 outputColor;",s=It().getBool("WEBGL2_ISNAN_CUSTOM")?"\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ":"",p="",l="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",r="varying",n="varying",o="texture2D",a="gl_FragColor",i="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",p="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",l="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:r,varyingFs:n,texture2D:o,output:a,defineOutput:i,defineSpecialNaN:s,defineSpecialInf:p,defineRound:l}}function tb(e,t,r="index"){const n=vt(t);return n.map(((t,o)=>`int ${e[o]} = ${r} / ${t}; ${o===n.length-1?`int ${e[o+1]} = ${r} - ${e[o]} * ${t}`:`index -= ${e[o]} * ${t}`};`)).join("")}function rb(e,t,r="index"){const n=vt(t);return n.map(((t,o)=>`int ${e[o]} = ${r} / outShapeStrides[${o}]; ${o===n.length-1?`int ${e[o+1]} = ${r} - ${e[o]} * outShapeStrides[${o}]`:`index -= ${e[o]} * outShapeStrides[${o}]`};`)).join("")}function nb(e){const t=vt(e).map((e=>e.toString()));return`\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ${t[0]} + coords.y * ${t[1]} + coords.z;\n  }\n`}Zy.registerFlag("HAS_WEBGL",(()=>Zy.getNumber("WEBGL_VERSION")>0)),Zy.registerFlag("WEBGL_VERSION",(()=>Jy(2)?2:Jy(1)?1:0)),Zy.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(()=>!1)),Zy.registerFlag("WEBGL_BUFFER_SUPPORTED",(()=>2===Zy.get("WEBGL_VERSION"))),Zy.registerFlag("WEBGL_CPU_FORWARD",(()=>!0)),Zy.registerFlag("WEBGL_FORCE_F16_TEXTURES",(()=>!1)),Zy.registerFlag("WEBGL_PACK",(()=>Zy.getBool("HAS_WEBGL"))),Zy.registerFlag("WEBGL_PACK_NORMALIZATION",(()=>Zy.getBool("WEBGL_PACK"))),Zy.registerFlag("WEBGL_PACK_CLIP",(()=>Zy.getBool("WEBGL_PACK"))),Zy.registerFlag("WEBGL_PACK_DEPTHWISECONV",(()=>Zy.getBool("WEBGL_PACK"))),Zy.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(()=>Zy.getBool("WEBGL_PACK"))),Zy.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(()=>Zy.getBool("WEBGL_PACK"))),Zy.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(()=>Zy.getBool("WEBGL_PACK"))),Zy.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(()=>Zy.getBool("WEBGL_PACK"))),Zy.registerFlag("WEBGL_PACK_REDUCE",(()=>Zy.getBool("WEBGL_PACK"))),Zy.registerFlag("WEBGL_LAZILY_UNPACK",(()=>Zy.getBool("WEBGL_PACK"))),Zy.registerFlag("WEBGL_CONV_IM2COL",(()=>Zy.getBool("WEBGL_PACK"))),Zy.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(()=>function(e){if(null==Yy){const t=Oy(e);Yy=t.getParameter(t.MAX_TEXTURE_SIZE)}return Yy}(Zy.getNumber("WEBGL_VERSION")))),Zy.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(()=>function(e){if(null==Xy){const t=Oy(e);Xy=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,Xy)}(Zy.getNumber("WEBGL_VERSION")))),Zy.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(()=>{const e=Zy.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;let t;const r=Oy(e);return t=qy(r,"EXT_disjoint_timer_query_webgl2")&&2===e?2:qy(r,"EXT_disjoint_timer_query")?1:0,t}(e)})),Zy.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(()=>Zy.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!ua())),Zy.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(()=>function(e){if(0===e)return!1;const t=Oy(e);if(1===e){if(!qy(t,"OES_texture_float"))return!1}else if(!qy(t,"EXT_color_buffer_float"))return!1;return Qy(t)}(Zy.getNumber("WEBGL_VERSION")))),Zy.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(()=>!Zy.getBool("WEBGL_FORCE_F16_TEXTURES")&&Zy.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))),Zy.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(()=>function(e){if(0===e)return!1;const t=Oy(e);if(1!==e){if(qy(t,"EXT_color_buffer_float"))return Qy(t);const e="EXT_color_buffer_half_float";if(qy(t,e)){const r=t.getExtension(e);return function(e,t){const r=Cy(e,t),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,r.internalFormatHalfFloat,1,1,0,r.textureFormatFloat,r.textureTypeHalfFloat,null);const o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);const a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(o),a}(t,r)}return!1}return!!qy(t,"OES_texture_float")&&!!qy(t,"WEBGL_color_buffer_float")&&Qy(t)}(Zy.getNumber("WEBGL_VERSION")))),Zy.registerFlag("WEBGL_FENCE_API_ENABLED",(()=>{return 2===(e=Zy.getNumber("WEBGL_VERSION"))&&null!=Oy(e).fenceSync;var e})),Zy.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(()=>Zy.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0)),Zy.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(()=>-1),(e=>{if(e<0&&-1!==e)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${e}.`)})),Zy.registerFlag("WEBGL_FLUSH_THRESHOLD",(()=>ua()?1:-1),(e=>{if(e<0&&-1!==e)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${e}.`)})),Zy.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",(()=>128)),Zy.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",(()=>!1)),Zy.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",(()=>1e5)),Zy.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",(()=>128)),Zy.registerFlag("WEBGL_EXP_CONV",(()=>!1)),Zy.registerFlag("SOFTWARE_WEBGL_ENABLED",(()=>Zy.getBool("IS_TEST"))),Zy.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",(()=>1/0)),Zy.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",(()=>!1)),Zy.registerFlag("WEBGL2_ISNAN_CUSTOM",(()=>!1)),Zy.registerFlag("ENGINE_COMPILE_ONLY",(()=>!1));const ob="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",{getBroadcastDims:ab}=Qg;function ib(e,t,r){const n=[];if(e.forEach((e=>{const t=nt(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?n.push(`uniform float ${e.name}${t>1?`[${t}]`:""};`):(n.push(`uniform sampler2D ${e.name};`),n.push(`uniform int offset${e.name};`)),r.enableShapeUniforms){const{uniformShape:t}=mb(r.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape);switch(t.length){case 1:n.push(`uniform int ${e.name}Shape;`);break;case 2:n.push(`uniform ivec2 ${e.name}Shape;`);break;case 3:n.push(`uniform ivec3 ${e.name}Shape;`);break;case 4:n.push(`uniform ivec4 ${e.name}Shape;`)}n.push(`uniform ivec2 ${e.name}TexShape;`)}})),r.enableShapeUniforms){switch(t.logicalShape.length){case 1:n.push("uniform int outShape;");break;case 2:n.push("uniform ivec2 outShape;"),n.push("uniform int outShapeStrides;");break;case 3:n.push("uniform ivec3 outShape;"),n.push("uniform ivec2 outShapeStrides;");break;case 4:n.push("uniform ivec4 outShape;"),n.push("uniform ivec3 outShapeStrides;")}n.push("uniform ivec2 outTexShape;")}r.customUniforms&&r.customUniforms.forEach((e=>{n.push(`uniform ${e.type} ${e.name}${e.arrayIndex?`[${e.arrayIndex}]`:""};`)}));const o=n.join("\n"),a=e.map((e=>function(e,t,r=!1,n){let o="";o+=r?pb(e,n):sb(e,n);const a=e.shapeInfo.logicalShape,i=t.logicalShape;return a.length<=i.length&&(o+=r?function(e,t){const r=e.name,n=r.charAt(0).toUpperCase()+r.slice(1),o="get"+n+"AtOutCoords",a=e.shapeInfo.logicalShape.length,i=t.logicalShape.length,s=ab(e.shapeInfo.logicalShape,t.logicalShape),p=fb(i),l=i-a;let u;const d=["x","y","z","w","u","v"];u=0===a?"":i<2&&s.length>=1?"coords = 0;":s.map((e=>`coords.${d[e+l]} = 0;`)).join("\n");let c="";c=i<2&&a>0?"coords":e.shapeInfo.logicalShape.map(((e,t)=>`coords.${d[t+l]}`)).join(", ");let g="return outputValue;";const h=1===nt(e.shapeInfo.logicalShape),f=1===nt(t.logicalShape);if(1!==a||h||f){if(h&&!f)g=1===i?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(s.length){const e=a-2,t=a-1;s.indexOf(e)>-1&&s.indexOf(t)>-1?g="return vec4(outputValue.x);":s.indexOf(e)>-1?g="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":s.indexOf(t)>-1&&(g="return vec4(outputValue.xx, outputValue.zz);")}}else g="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return`\n    vec4 ${o}() {\n      ${p} coords = getOutputCoords();\n      ${u}\n      vec4 outputValue = get${n}(${c});\n      ${g}\n    }\n  `}(e,t):function(e,t){const r=e.name,n=r.charAt(0).toUpperCase()+r.slice(1),o="get"+n+"AtOutCoords",a=t.texShape,i=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,p=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===p&&null==e.shapeInfo.flatOffset&&ot(i,a))return`\n      float ${o}() {\n        return sampleTexture(${r}, resultUV);\n      }\n    `;const l=fb(p),u=ab(e.shapeInfo.logicalShape,t.logicalShape),d=p-s;let c;const g=["x","y","z","w","u","v"];c=0===s?"":p<2&&u.length>=1?"coords = 0;":u.map((e=>`coords.${g[e+d]} = 0;`)).join("\n");let h="";return h=p<2&&s>0?"coords":e.shapeInfo.logicalShape.map(((e,t)=>`coords.${g[t+d]}`)).join(", "),`\n    float ${o}() {\n      ${l} coords = getOutputCoords();\n      ${c}\n      return get${n}(${h});\n    }\n  `}(e,t)),o}(e,t,r.packedInputs,r.enableShapeUniforms))).join("\n"),i=t.texShape,s=eb(),p=function(e){return`\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ${e.texture2D}(textureSampler, uv).r;\n    }\n  `}(s);let l,u,d=function(e){return`${e.version}\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ${e.varyingFs} vec2 resultUV;\n    ${e.defineOutput}\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ${e.defineSpecialNaN}\n    ${e.defineSpecialInf}\n    ${e.defineRound}\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ${lb}\n    ${ub}\n    ${db}\n  `}(s);return t.isPacked?(l=function(e,t,r){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,r){const n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return 1===n[0]?r?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":`\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ${n[1]}.0);\n      }\n    `:1===n[1]?r?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":`\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ${n[0]}.0);\n      }\n    `:r?"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ":`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n      return 2 * (resTexRC.x * ${n[1]} + resTexRC.y);\n    }\n  `}(0,t,r);case 2:return function(e,t,r){const n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(ot(e,t))return r?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(${n[0]}, ${n[1]}));\n      }\n    `;const o=Math.ceil(e[1]/2);return r?"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ":`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n      int r = 2 * (index / ${o});\n      int c = imod(index, ${o}) * 2;\n\n      return ivec2(r, c);\n    }\n  `}(e,t,r);case 3:return function(e,t,r){if(r)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";const n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],o=Math.ceil(e[2]/2),a=o*Math.ceil(e[1]/2);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n\n      int b = index / ${a};\n      index -= b * ${a};\n\n      int r = 2 * (index / ${o});\n      int c = imod(index, ${o}) * 2;\n\n      return ivec3(b, r, c);\n    }\n  `}(e,t,r);default:return function(e,t,r){if(r)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";const n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],o=Math.ceil(e[e.length-1]/2),a=o*Math.ceil(e[e.length-2]/2);let i=a,s="",p="b, r, c";for(let t=2;t<e.length-1;t++)i*=e[e.length-t-1],s=`\n      int b${t} = index / ${i};\n      index -= b${t} * ${i};\n    `+s,p=`b${t}, `+p;return`\n    ivec${e.length} getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n\n      ${s}\n\n      int b = index / ${a};\n      index -= b * ${a};\n\n      int r = 2 * (index / ${o});\n      int c = imod(index, ${o}) * 2;\n\n      return ivec${e.length}(${p});\n    }\n  `}(e,t,r)}}(t.logicalShape,i,r.enableShapeUniforms),u=function(e){return`\n    void setOutput(vec4 val) {\n      ${e.output} = val;\n    }\n  `}(s)):(l=function(e,t,r){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,r){return 1===t[0]?r?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":`\n      int getOutputCoords() {\n        return int(resultUV.x * ${t[1]}.0);\n      }\n    `:1===t[1]?r?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":`\n      int getOutputCoords() {\n        return int(resultUV.y * ${t[0]}.0);\n      }\n    `:r?"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ":`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      return resTexRC.x * ${t[1]} + resTexRC.y;\n    }\n  `}(0,t,r);case 2:return function(e,t,r){return ot(e,t)?r?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(${t[0]}, ${t[1]}));\n      }\n    `:1===e[1]?r?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${t[0]}, ${t[1]}));\n        int index = resTexRC.x * ${t[1]} + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    `:1===e[0]?r?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${t[0]}, ${t[1]}));\n        int index = resTexRC.x * ${t[1]} + resTexRC.y;\n        return ivec2(0, index);\n      }\n    `:r?"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ":`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      int r = index / ${e[1]};\n      int c = index - r * ${e[1]};\n      return ivec2(r, c);\n    }\n  `}(e,t,r);case 3:return function(e,t,r){if(r)return`\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ${rb(["r","c","d"],e)}\n    return ivec3(r, c, d);\n  }\n`;const n=tb(["r","c","d"],e);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      ${n}\n      return ivec3(r, c, d);\n    }\n  `}(e,t,r);case 4:return function(e,t,r){if(r)return`\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ${rb(["r","c","d","d2"],e)}\n      return ivec4(r, c, d, d2);\n    }\n  `;const n=tb(["r","c","d","d2"],e);return`\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      ${n}\n      return ivec4(r, c, d, d2);\n    }\n  `}(e,t,r);case 5:return function(e,t){const r=tb(["r","c","d","d2","d3"],e);return`\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${t[0]},\n                             ${t[1]}));\n\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n\n      ${r}\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  `}(e,t);case 6:return function(e,t){const r=tb(["r","c","d","d2","d3","d4"],e);return`\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n\n      ${r}\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  `}(e,t);default:throw new Error(`${e.length}-D output sampling is not yet supported`)}}(t.logicalShape,i,r.enableShapeUniforms),u=function(e){return`\n    void setOutput(float val) {\n      ${e.output} = vec4(val, 0, 0, 0);\n    }\n  `}(s)),r.packedInputs&&(d+=cb),[d,p,u,o,l,a,r.userCode].join("\n")}function sb(e,t=!1){const r=e.shapeInfo.logicalShape;switch(r.length){case 0:return function(e,t){const r=e.name,n="get"+r.charAt(0).toUpperCase()+r.slice(1);if(e.shapeInfo.isUniform)return`float ${n}() {return ${r};}`;const[o,a]=e.shapeInfo.texShape;if(1===o&&1===a)return`\n      float ${n}() {\n        return sampleTexture(${r}, halfCR);\n      }\n    `;const i=gb(r);if(t)return`\n    float ${n}() {\n      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], ${i});\n      return sampleTexture(${r}, uv);\n    }\n  `;const[s,p]=e.shapeInfo.texShape;return`\n    float ${n}() {\n      vec2 uv = uvFromFlat(${s}, ${p}, ${i});\n      return sampleTexture(${r}, uv);\n    }\n  `}(e,t);case 1:return function(e,t){const r=e.name,n="get"+r.charAt(0).toUpperCase()+r.slice(1);if(e.shapeInfo.isUniform)return`\n      float ${n}(int index) {\n        ${hb(e)}\n      }\n    `;const o=e.shapeInfo.texShape,a=o[0],i=o[1];if(1===i&&1===a)return`\n      float ${n}(int index) {\n        return sampleTexture(${r}, halfCR);\n      }\n    `;const s=gb(r);return 1===i?t?`\n      float ${n}(int index) {\n        vec2 uv = vec2(0.5, (float(index + ${s}) + 0.5) / float(${r}TexShape[0]));\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n      float ${n}(int index) {\n        vec2 uv = vec2(0.5, (float(index + ${s}) + 0.5) / ${a}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `:1===a?t?`\n      float ${n}(int index) {\n        vec2 uv = vec2((float(index + ${s}) + 0.5) / float(${r}TexShape[1]), 0.5);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n      float ${n}(int index) {\n        vec2 uv = vec2((float(index + ${s}) + 0.5) / ${i}.0, 0.5);\n        return sampleTexture(${r}, uv);\n      }\n    `:t?`\n    float ${n}(int index) {\n      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${s});\n      return sampleTexture(${r}, uv);\n    }\n  `:`\n    float ${n}(int index) {\n      vec2 uv = uvFromFlat(${a}, ${i}, index + ${s});\n      return sampleTexture(${r}, uv);\n    }\n  `}(e,t);case 2:return function(e,t){const r=e.shapeInfo.logicalShape,n=e.name,o="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape;if(null!=a&&ot(r,a)){if(t)return`\n      float ${o}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${n}TexShape[1], ${n}TexShape[0]);\n        return sampleTexture(${n}, uv);\n      }\n    `;const e=a[0];return`\n    float ${o}(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(${a[1]}.0, ${e}.0);\n      return sampleTexture(${n}, uv);\n    }\n  `}const{newShape:i,keptDims:s}=dt(r),p=i;if(p.length<r.length){const r=["row","col"];return`\n      ${sb(yb(e,p),t)}\n      float ${o}(int row, int col) {\n        return ${o}(${bb(r,s)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${o}(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(${r[1]}, 1)));\n        ${hb(e)}\n      }\n    `;const l=a[0],u=a[1],d=gb(n);return 1===u?t?`\n      float ${o}(int row, int col) {\n        float index = dot(vec3(row, col, ${d}), vec3(${n}Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(${n}TexShape[0]));\n        return sampleTexture(${n}, uv);\n      }\n    `:`\n    float ${o}(int row, int col) {\n      float index = dot(vec3(row, col, ${d}), vec3(${r[1]}, 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ${l}.0);\n      return sampleTexture(${n}, uv);\n    }\n  `:1===l?t?`\n      float ${o}(int row, int col) {\n        float index = dot(vec3(row, col, ${d}), vec3(${n}Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(${n}TexShape[1]), 0.5);\n        return sampleTexture(${n}, uv);\n      }\n    `:`\n    float ${o}(int row, int col) {\n      float index = dot(vec3(row, col, ${d}), vec3(${r[1]}, 1, 1));\n      vec2 uv = vec2((index + 0.5) / ${u}.0, 0.5);\n      return sampleTexture(${n}, uv);\n    }\n  `:t?`\n      float ${o}(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ${n}Shape[1] + col + ${d};\n        vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index);\n        return sampleTexture(${n}, uv);\n      }\n    `:`\n  float ${o}(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ${r[1]} + col + ${d};\n    vec2 uv = uvFromFlat(${l}, ${u}, index);\n    return sampleTexture(${n}, uv);\n  }\n`}(e,t);case 3:return function(e,t){const r=e.shapeInfo.logicalShape,n=e.name,o="get"+n.charAt(0).toUpperCase()+n.slice(1),a=r[1]*r[2],i=r[2],{newShape:s,keptDims:p}=dt(r),l=s;if(l.length<r.length){const r=["row","col","depth"];return`\n        ${sb(yb(e,l),t)}\n        float ${o}(int row, int col, int depth) {\n          return ${o}(${bb(r,p)});\n        }\n      `}if(e.shapeInfo.isUniform)return`\n      float ${o}(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(${a}, ${i}, 1)));\n        ${hb(e)}\n      }\n    `;const u=e.shapeInfo.texShape,d=u[0],c=u[1],g=e.shapeInfo.flatOffset;if(c===a&&null==g)return t?`\n      float ${o}(int row, int col, int depth) {\n        int stride1 = ${n}Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${n}TexShape[1], ${n}TexShape[0]);\n        return sampleTexture(${n}, uv);\n      }\n    `:`\n        float ${o}(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(${i}, 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(${c}.0, ${d}.0);\n          return sampleTexture(${n}, uv);\n        }\n      `;if(c===i&&null==g)return t?`\n      float ${o}(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(${n}Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${n}TexShape[1], ${n}TexShape[0]);\n        return sampleTexture(${n}, uv);\n      }\n    `:`\n    float ${o}(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(${r[1]}, 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${c}.0, ${d}.0);\n      return sampleTexture(${n}, uv);\n    }\n  `;const h=gb(n);return t?`\n    float ${o}(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ${n}Shape[1] * ${n}Shape[2];\n      int stride1 = ${n}Shape[2];\n      int index = row * stride0 + col * stride1 + depth + ${h};\n      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index);\n      return sampleTexture(${n}, uv);\n    }\n    `:`\n      float ${o}(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ${a} + col * ${i} + depth + ${h};\n        vec2 uv = uvFromFlat(${d}, ${c}, index);\n        return sampleTexture(${n}, uv);\n      }\n  `}(e,t);case 4:return function(e,t){const r=e.shapeInfo.logicalShape,n=e.name,o="get"+n.charAt(0).toUpperCase()+n.slice(1),a=r[3],i=r[2]*a,s=r[1]*i,{newShape:p,keptDims:l}=dt(r);if(p.length<r.length){const r=["row","col","depth","depth2"];return`\n      ${sb(yb(e,p),t)}\n      float ${o}(int row, int col, int depth, int depth2) {\n        return ${o}(${bb(r,l)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${o}(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(${s}, ${i}, ${a}, 1)));\n        ${hb(e)}\n      }\n    `;const u=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,c=d[0],g=d[1],h=`int stride2 = ${n}Shape[3];`,f=`int stride1 = ${n}Shape[2] * stride2;`,m=`int stride0 = ${n}Shape[1] * stride1;`;if(g===s&&null==u)return t?`\n      float ${o}(int row, int col, int depth, int depth2) {\n        ${h}\n        ${f}\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${n}TexShape[1], ${n}TexShape[0]);\n        return sampleTexture(${n}, uv);\n      }\n    `:`\n      float ${o}(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(${i}, ${a}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${g}.0, ${c}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;if(g===a&&null==u)return t?`\n      float ${o}(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(${n}Shape[1] * ${n}Shape[2], ${n}Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${n}TexShape[1], ${n}TexShape[0]);\n        return sampleTexture(${n}, uv);\n      }\n    `:`\n      float ${o}(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(${r[1]*r[2]}, ${r[2]}, 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${g}.0, ${c}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;const y=gb(n);return t?`\n    float ${o}(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ${h}\n      ${f}\n      ${m}\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${y});\n      return sampleTexture(${n}, uv);\n    }\n  `:`\n    float ${o}(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${s} + col * ${i} +\n          depth * ${a} + depth2;\n      vec2 uv = uvFromFlat(${c}, ${g}, index + ${y});\n      return sampleTexture(${n}, uv);\n    }\n  `}(e,t);case 5:return function(e){const t=e.shapeInfo.logicalShape,r=e.name,n="get"+r.charAt(0).toUpperCase()+r.slice(1),o=t[4],a=t[3]*o,i=t[2]*a,s=t[1]*i,{newShape:p,keptDims:l}=dt(t);if(p.length<t.length){const t=["row","col","depth","depth2","depth3"];return`\n      ${sb(yb(e,p))}\n      float ${n}(int row, int col, int depth, int depth2, int depth3) {\n        return ${n}(${bb(t,l)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${n}(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${s}, ${i}, ${a}, ${o})) +\n          depth3;\n        ${hb(e)}\n      }\n    `;const u=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,c=d[0],g=d[1];return g===s&&null==u?`\n      float ${n}(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(${i}, ${a}, ${o}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${g}.0, ${c}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `:g===o&&null==u?`\n      float ${n}(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${t[1]*t[2]*t[3]},\n               ${t[2]*t[3]}, ${t[3]}, 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${g}.0, ${c}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${n}(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${s} + col * ${i} + depth * ${a} +\n          depth2 * ${o} + depth3 + ${gb(r)};\n      vec2 uv = uvFromFlat(${c}, ${g}, index);\n      return sampleTexture(${r}, uv);\n    }\n  `}(e);case 6:return function(e){const t=e.shapeInfo.logicalShape,r=e.name,n="get"+r.charAt(0).toUpperCase()+r.slice(1),{newShape:o,keptDims:a}=dt(t);if(o.length<t.length){const t=["row","col","depth","depth2","depth3","depth4"];return`\n      ${sb(yb(e,o))}\n      float ${n}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ${n}(${bb(t,a)});\n      }\n    `}const i=t[5],s=t[4]*i,p=t[3]*s,l=t[2]*p,u=t[1]*l;if(e.shapeInfo.isUniform)return`\n      float ${n}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(${u}, ${l}, ${p}, ${s})) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(${i}, 1)));\n        ${hb(e)}\n      }\n    `;const d=e.shapeInfo.flatOffset,c=e.shapeInfo.texShape,g=c[0],h=c[1];return h===u&&null==d?`\n      float ${n}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(${l}, ${p}, ${s}, ${i})) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${h}.0, ${g}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `:h===i&&null==d?`\n      float ${n}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(${t[1]*t[2]*t[3]*t[4]},\n               ${t[2]*t[3]*t[4]},\n               ${t[3]*t[4]},\n               ${t[4]})) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${h}.0, ${g}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${n}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${u} + col * ${l} + depth * ${p} +\n          depth2 * ${s} + depth3 * ${i} + depth4 + ${gb(r)};\n      vec2 uv = uvFromFlat(${g}, ${h}, index);\n      return sampleTexture(${r}, uv);\n    }\n  `}(e);default:throw new Error(`${r.length}-D input sampling is not yet supported`)}}function pb(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){const t=e.name;return`\n    vec4 ${"get"+t.charAt(0).toUpperCase()+t.slice(1)}() {\n      return ${eb().texture2D}(${t}, halfCR);\n    }\n  `}(e);case 1:return function(e,t){const r=e.name,n="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape,a=eb();if(t)return`\n    vec4 ${n}(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ${a.texture2D}(${r}, uv);\n    }\n  `;const i=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];return`\n    vec4 ${n}(int index) {\n      vec2 uv = packedUVfrom1D(\n        ${i[0]}, ${i[1]}, index);\n      return ${a.texture2D}(${r}, uv);\n    }\n  `}(e,t);case 2:return function(e,t){const r=e.shapeInfo.logicalShape,n=e.name,o="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,i=a[0],s=a[1],p=eb();if(null!=a&&ot(r,a))return t?`\n      vec4 ${o}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${n}TexShape[1], ${n}TexShape[0]);\n\n        return ${p.texture2D}(${n}, uv);\n      }\n    `:`\n      vec4 ${o}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${s}.0, ${i}.0);\n\n        return ${p.texture2D}(${n}, uv);\n      }\n    `;if(t)return`\n    vec4 ${o}(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(${n}Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ${p.texture2D}(${n}, uv);\n    }\n  `;const l=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return`\n    vec4 ${o}(int row, int col) {\n      vec2 uv = packedUVfrom2D(${Math.ceil(r[1]/2)}, ${l[0]}, ${l[1]}, row, col);\n      return ${p.texture2D}(${n}, uv);\n    }\n  `}(e,t);case 3:return function(e,t){const r=e.shapeInfo.logicalShape,n=e.name,o="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,i=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];if(1===r[0]){const n=[1,2],a=["b","row","col"];return`\n        ${pb(yb(e,r.slice(1)),t)}\n        vec4 ${o}(int b, int row, int col) {\n          return ${o}(${bb(a,n)});\n        }\n      `}const s=eb();if(t)return`\n    vec4 ${o}(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(${n}Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ${s.texture2D}(${n}, uv);\n    }\n  `;const p=i[0],l=i[1],u=Math.ceil(r[2]/2);return`\n    vec4 ${o}(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ${p}, ${l}, ${u*Math.ceil(r[1]/2)}, ${u}, b, row, col);\n      return ${s.texture2D}(${n}, uv);\n    }\n  `}(e,t);default:return function(e,t){const r=e.name,n="get"+r.charAt(0).toUpperCase()+r.slice(1),o=eb();if(t)return`\n    vec4 ${n}(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(${r}Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ${r}Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${o.texture2D}(${r}, uv);\n    }\n  `;const a=e.shapeInfo.logicalShape,i=a.length,s=e.shapeInfo.texShape,p=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],l=p[0],u=p[1],d=Math.ceil(a[i-1]/2);let c=d*Math.ceil(a[i-2]/2),g="int b, int row, int col",h=`b * ${c} + (row / 2) * ${d} + (col / 2)`;for(let e=2;e<i-1;e++)g=`int b${e}, `+g,c*=a[i-e-1],h=`b${e} * ${c} + `+h;return`\n    vec4 ${n}(${g}) {\n      int index = ${h};\n      int texR = index / ${u};\n      int texC = index - texR * ${u};\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${u}, ${l});\n      return ${o.texture2D}(${r}, uv);\n    }\n  `}(e,t)}}const lb="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",ub="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",db="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",cb="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function gb(e){return`offset${e}`}function hb(e){const t=e.name,r=nt(e.shapeInfo.logicalShape);return r<2?`return ${t};`:`\n    for (int i = 0; i < ${r}; i++) {\n      if (i == index) {\n        return ${t}[i];\n      }\n    }\n  `}function fb(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error(`GPU for rank ${e} is not yet supported`)}function mb(e,t,r){const{newShape:n,keptDims:o}=dt(t),a=t.length,i=e&&3===a&&1===t[0],s=i?t.slice(1):n,p=!e&&a>1&&!ot(t,r)&&n.length<a||i;return{useSqueezeShape:p,uniformShape:p?s:t,keptDims:o}}function yb(e,t){const r=JSON.parse(JSON.stringify(e));return r.shapeInfo.logicalShape=t,r}function bb(e,t){return t.map((t=>e[t])).join(", ")}function _b(e,t,r){const n={},o={},a={},i=[];let s,p,l,u=null,d=null;d=e.getUniformLocation(r,"NAN",!1),1===It().getNumber("WEBGL_VERSION")&&(u=e.getUniformLocation(r,"INFINITY",!1));const c=!1;for(let i=0;i<t.variableNames.length;i++){const s=t.variableNames[i];n[s]=e.getUniformLocation(r,s,c),n[`offset${s}`]=e.getUniformLocation(r,`offset${s}`,c),t.enableShapeUniforms&&(o[`${s}Shape`]=e.getUniformLocation(r,`${s}Shape`,c),a[`${s}TexShape`]=e.getUniformLocation(r,`${s}TexShape`,c))}return t.enableShapeUniforms&&(s=e.getUniformLocation(r,"outShape",c),l=e.getUniformLocation(r,"outShapeStrides",c),p=e.getUniformLocation(r,"outTexShape",c)),t.customUniforms&&t.customUniforms.forEach(((t,n)=>{i[n]=e.getUniformLocation(r,t.name,c)})),{uniformLocations:n,customUniformLocations:i,infLoc:u,nanLoc:d,inShapesLocations:o,inTexShapesLocations:a,outShapeLocation:s,outShapeStridesLocation:l,outTexShapeLocation:p}}function vb(e,t){if(e.length!==t.length)throw Error(`Binary was compiled with ${e.length} inputs, but was executed with ${t.length} inputs`);e.forEach(((e,r)=>{const n=e.logicalShape,o=t[r],a=o.shape;if(!ot(n,a))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${n} and ${a} must match`);if(e.isUniform&&o.isUniform)return;const i=e.texShape,s=o.isUniform?null:o.texData.texShape;if(!ot(i,s))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${i} and ${s} must match`)}))}function wb(e){return It().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}class kb{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=xy.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=eb();this.outputShape=e,this.enableShapeUniforms=wb(this.outputShape.length),this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${this.enableShapeUniforms?rb(["r","c","d"],e):tb(["r","c","d"],e)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ${t.output} = result;\n      }\n    `}}class Tb{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=xy.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=eb();this.outputShape=e,this.enableShapeUniforms=wb(this.outputShape.length),this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${this.enableShapeUniforms?rb(["r","c","d"],e):tb(["r","c","d"],e)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ${t.output} = result;\n      }\n    `}}class Ob{constructor(e){this.variableNames=["A"],this.outTexUsage=Sy.DOWNLOAD;const t=eb();this.outputShape=e,this.userCode=`\n      ${ob}\n\n      void main() {\n        float x = getAAtOutCoords();\n        ${t.output} = encode_float(x);\n      }\n    `}}class xb{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Sy.DOWNLOAD;const t=eb();this.outputShape=e,this.userCode=`\n      ${ob}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ${t.output} = encode_float(x);\n      }\n    `}}const Sb={R:0,G:1,B:2,A:3};class Eb{constructor(e,t=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=eb();this.outputShape=e,this.enableShapeUniforms=wb(this.outputShape.length);let o="result";t&&(o="floor(result * 255. + 0.5)");let a="";for(let e=0;e<r.length;e++){const t=r[e];a+=`\n          if(offset == ${e}) {\n            result = values[${Sb[t]}];\n          }`}this.userCode=`\n      ${this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":nb(e)}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int flatIndex = getFlatIndex(coords);\n        float result = 0.;\n        int offset = imod(flatIndex, ${r.length});\n\n        flatIndex = idiv(flatIndex, ${r.length}, 1.);\n\n        int r = flatIndex / texShape[1];\n        if (r < texShape[0]) {\n          int c = imod(flatIndex, texShape[1]);\n          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n          vec4 values = ${n.texture2D}(A, uv);\n          ${a}\n        }\n        ${n.output} = vec4(${o}, 0., 0., 0.);\n      }\n    `}}class Fb{constructor(e,t=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=eb();this.outputShape=e,this.enableShapeUniforms=wb(this.outputShape.length);let n="",o="result";t&&(o="floor(result * 255. + 0.5)");for(let t=0;t<=1;t++)for(let o=0;o<=1;o++){const a=2*t+o;n+=`\n          localCoords = coords;\n          if(localCoords[2] + ${o} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {\n          localCoords[2] += ${o};\n          if (localCoords[1] + ${t} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {\n            localCoords[1] += ${t};\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ${r.texture2D}(A, uv);\n\n            if (offset == 0) {\n              result[${a}] = values[0];\n            } else if (offset == 1) {\n              result[${a}] = values[1];\n            } else if (offset == 2) {\n              result[${a}] = values[2];\n            } else {\n              result[${a}] = values[3];\n            }\n          }\n        }\n        `}this.userCode=`\n        ${this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":nb(e)}\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ${n}\n\n          ${r.output} = ${o};\n        }\n    `}}function Mb(e,t,r,n,o,a){!function(e,t){const r=It().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0)throw new Error(`Requested texture size [${e}x${t}] is invalid.`);if(e>r||t>r)throw new Error(`Requested texture size [${e}x${t}] greater than WebGL maximum on this browser / GPU [${r}x${r}].`)}(t,r);const i=function(e){return zy(e,(()=>e.createTexture()),"Unable to create WebGLTexture.")}(e),s=e.TEXTURE_2D;return Iy(e,(()=>e.bindTexture(s,i))),Iy(e,(()=>e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE))),Iy(e,(()=>e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE))),Iy(e,(()=>e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST))),Iy(e,(()=>e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST))),1===It().getNumber("WEBGL_VERSION")?Iy(e,(()=>e.texImage2D(s,0,n,t,r,0,o,a,null))):Iy(e,(()=>e.texStorage2D(s,1,n,t,r))),Iy(e,(()=>e.bindTexture(e.TEXTURE_2D,null))),{texture:i,texShape:[r,t]}}function Rb(e){return e.internalFormatFloat}function Cb(e){return e.internalFormatHalfFloat}function Ib(e){return e.downloadTextureFormat}function Ab(e){return e.internalFormatPackedFloat}function Bb(e){return e.internalFormatPackedHalfFloat}class Db{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const t=It().getNumber("WEBGL_VERSION");if(null!=e?(this.gl=e,function(e,t){ky[e]=t}(t,e)):this.gl=Oy(t),e=this.gl,2===It().getNumber("WEBGL_VERSION")){const t=e;this.createVertexArray=()=>Iy(t,(()=>t.createVertexArray())),this.bindVertexArray=e=>Iy(t,(()=>t.bindVertexArray(e))),this.deleteVertexArray=e=>Iy(t,(()=>t.deleteVertexArray(e))),this.getVertexArray=()=>Iy(t,(()=>t.getParameter(t.VERTEX_ARRAY_BINDING)))}else if(null!=e){const t=e.getExtension("OES_vertex_array_object");if(null==t)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>Iy(e,(()=>t.createVertexArrayOES())),this.bindVertexArray=r=>Iy(e,(()=>t.bindVertexArrayOES(r))),this.deleteVertexArray=r=>Iy(e,(()=>t.deleteVertexArrayOES(r))),this.getVertexArray=()=>Iy(e,(()=>e.getParameter(t.VERTEX_ARRAY_BINDING_OES)))}let r="WEBGL_color_buffer_float";const n="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),1===It().getNumber("WEBGL_VERSION")){const e="OES_texture_float",t="OES_texture_half_float";if(this.textureFloatExtension=By(this.gl,e),qy(this.gl,t))this.textureHalfFloatExtension=By(this.gl,t);else if(It().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),qy(this.gl,n))this.colorBufferHalfFloatExtension=By(this.gl,n);else if(It().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",qy(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!qy(this.gl,n))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(n)}this.vertexBuffer=function(e){return function(e,t){const r=zy(e,(()=>e.createBuffer()),"Unable to create WebGLBuffer");return Iy(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,r))),Iy(e,(()=>e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW))),r}(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}(this.gl),this.indexBuffer=function(e){return function(e,t){const r=zy(e,(()=>e.createBuffer()),"Unable to create WebGLBuffer");return Iy(e,(()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r))),Iy(e,(()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW))),r}(e,new Uint16Array([0,1,2,2,1,3]))}(this.gl),this.framebuffer=function(e){return zy(e,(()=>e.createFramebuffer()),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=Cy(this.gl,this.textureHalfFloatExtension)}get debug(){return It().getBool("DEBUG")}dispose(){if(this.disposed)return;null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;Iy(e,(()=>e.finish())),Iy(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,null))),Iy(e,(()=>e.deleteFramebuffer(this.framebuffer))),Iy(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,null))),Iy(e,(()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null))),Iy(e,(()=>e.deleteBuffer(this.indexBuffer))),this.disposed=!0}createFloat32MatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,r,n){const[o,a]=Fy(t,r);return Mb(e,o,a,Rb(n),n.textureFormatFloat,e.FLOAT)}(this.gl,e,t,this.textureConfig)}createFloat16MatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,r,n){const[o,a]=Fy(t,r);return Mb(e,o,a,Cb(n),n.textureFormatFloat,n.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}createUnsignedBytesMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,r,n){const[o,a]=Fy(t,r);return Mb(e,o,a,Ib(n),e.RGBA,e.UNSIGNED_BYTE)}(this.gl,e,t,this.textureConfig)}uploadPixelDataToTexture(e,t){this.throwIfDisposed(),function(e,t,r){Iy(e,(()=>e.bindTexture(e.TEXTURE_2D,t))),r.data instanceof Uint8Array?2===It().getNumber("WEBGL_VERSION")?Iy(e,(()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,r.width,r.height,e.RGBA,e.UNSIGNED_BYTE,r.data))):Iy(e,(()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r.width,r.height,0,e.RGBA,e.UNSIGNED_BYTE,r.data))):2===It().getNumber("WEBGL_VERSION")?Iy(e,(()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,r))):Iy(e,(()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r))),Iy(e,(()=>e.bindTexture(e.TEXTURE_2D,null)))}(this.gl,e,t)}uploadDenseMatrixToTexture(e,t,r,n){this.throwIfDisposed(),function(e,t,r,n,o,a){let i,s,p;Iy(e,(()=>e.bindTexture(e.TEXTURE_2D,t))),o instanceof Uint8Array?(i=new Uint8Array(r*n*4),s=e.UNSIGNED_BYTE,p=e.RGBA):(i=new Float32Array(r*n*4),s=e.FLOAT,p=a.internalFormatPackedFloat),i.set(o),2===It().getNumber("WEBGL_VERSION")?Iy(e,(()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,r,n,e.RGBA,s,i))):Iy(e,(()=>e.texImage2D(e.TEXTURE_2D,0,p,r,n,0,e.RGBA,s,i))),Iy(e,(()=>e.bindTexture(e.TEXTURE_2D,null)))}(this.gl,e,t,r,n,this.textureConfig)}createFloat16PackedMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,r,n){const[o,a]=Ry(t,r);return Mb(e,o,a,Bb(n),e.RGBA,n.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}createPackedMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,r,n){const[o,a]=Ry(t,r);return Mb(e,o,a,Ab(n),e.RGBA,e.FLOAT)}(this.gl,e,t,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(Gy(this.gl,this.framebuffer),this.outputTexture=null),Iy(this.gl,(()=>this.gl.deleteTexture(e)))}downloadByteEncodedFloatMatrixFromOutputTexture(e,t,r){return this.downloadMatrixDriver(e,(()=>function(e,t,r,n){const[o,a]=Fy(t,r),i=new Uint8Array(t*r*4);return Iy(e,(()=>e.readPixels(0,0,o,a,n.downloadTextureFormat,e.UNSIGNED_BYTE,i))),new Float32Array(i.buffer)}(this.gl,t,r,this.textureConfig)))}downloadPackedMatrixFromBuffer(e,t,r,n,o,a){return function(e,t,r,n,o,a,i,s){const p=e,l=new Float32Array(function(e,t){const[r,n]=Ry(e,t);return r*n*4}(a,i));return p.bindBuffer(p.PIXEL_PACK_BUFFER,t),p.getBufferSubData(p.PIXEL_PACK_BUFFER,0,l),p.bindBuffer(p.PIXEL_PACK_BUFFER,null),l}(this.gl,e,0,0,0,o,a,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,t){return function(e,t,r){const n=e,o=new Float32Array(r);return n.bindBuffer(n.PIXEL_PACK_BUFFER,t),n.getBufferSubData(n.PIXEL_PACK_BUFFER,0,o),n.bindBuffer(n.PIXEL_PACK_BUFFER,null),o}(this.gl,e,t)}createBufferFromTexture(e,t,r){this.bindTextureToFrameBuffer(e);const n=function(e,t,r,n){const o=e.createBuffer();Iy(e,(()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,o)));const a=16*t*r;return Iy(e,(()=>e.bufferData(e.PIXEL_PACK_BUFFER,a,e.STREAM_READ))),Iy(e,(()=>e.readPixels(0,0,r,t,e.RGBA,e.FLOAT,0))),Iy(e,(()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null))),o}(this.gl,t,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),n}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let t,r;if(It().getBool("WEBGL_FENCE_API_ENABLED")){const n=e,o=n.fenceSync(n.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const e=n.clientWaitSync(o,0,0);return e===n.ALREADY_SIGNALED||e===n.CONDITION_SATISFIED},t=o}else It().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(t,It().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:t,isFencePassed:r}}downloadMatrixFromPackedTexture(e,t,r){return this.downloadMatrixDriver(e,(()=>function(e,t,r){const n=new Float32Array(t*r*4);return Iy(e,(()=>e.readPixels(0,0,r,t,e.RGBA,e.FLOAT,n))),n}(this.gl,t,r)))}createProgram(e){this.throwIfDisposed();const t=this.gl;null==this.vertexShader&&(this.vertexShader=function(e){const t=eb();return function(e,t){const r=zy(e,(()=>e.createShader(e.VERTEX_SHADER)),"Unable to create vertex WebGLShader.");if(Iy(e,(()=>e.shaderSource(r,t))),Iy(e,(()=>e.compileShader(r))),!1===e.getShaderParameter(r,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}(e,`${t.version}\n    precision highp float;\n    ${t.attribute} vec3 clipSpacePos;\n    ${t.attribute} vec2 uv;\n    ${t.varyingVs} vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }`)}(t));const r=function(e){return zy(e,(()=>e.createProgram()),"Unable to create WebGLProgram.")}(t);let n;return Iy(t,(()=>t.attachShader(r,this.vertexShader))),Iy(t,(()=>t.attachShader(r,e))),function(e,t){if(Iy(e,(()=>e.linkProgram(t))),!It().get("ENGINE_COMPILE_ONLY")&&!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}(t,r),n=Object.assign(r,{vao:this.createVertexArray()}),this.bindVertexArray(n.vao),Iy(t,(()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer))),console.assert(function(e,t,r){return Iy(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,r))),Py(e,t,"clipSpacePos",r,3,20,0)&&Py(e,t,"uv",r,2,20,12)}(t,n,this.vertexBuffer),"gpgpu_util.bindVertexProgramAttributeStreams not fully successful."),this.debug&&Ny(t,n),this.setProgram(n),n}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&(Iy(this.gl,(()=>this.gl.deleteProgram(e))),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,null!=this.program&&(this.bindVertexArray(this.program.vao),this.debug&&Ny(this.gl,this.program)),Iy(this.gl,(()=>this.gl.useProgram(e)))}getUniformLocation(e,t,r=!0){return this.throwIfDisposed(),r?function(e,t,r){return zy(e,(()=>e.getUniformLocation(t,r)),'uniform "'+r+'" not present in program.')}(this.gl,e,t):function(e,t,r){return e.getUniformLocation(t,r)}(this.gl,e,t)}getAttributeLocation(e,t){return this.throwIfDisposed(),Iy(this.gl,(()=>this.gl.getAttribLocation(e,t)))}getUniformLocationNoThrow(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}setInputMatrixTexture(e,t,r){this.throwIfDisposed(),this.throwIfNoProgram(),function(e,t,r,n){Iy(e,(()=>function(e,t,r){!function(e,t){const r=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,n=t+e.TEXTURE0;if(n<e.TEXTURE0||n>r)throw new Error(`textureUnit must be in [gl.TEXTURE0, gl.TEXTURE${r}].`)}(e,r),Iy(e,(()=>e.activeTexture(e.TEXTURE0+r))),Iy(e,(()=>e.bindTexture(e.TEXTURE_2D,t)))}(e,t,n))),Iy(e,(()=>e.uniform1i(r,n)))}(this.gl,e,t,r)}setOutputMatrixTexture(e,t,r){this.setOutputMatrixTextureDriver(e,r,t)}setOutputPackedMatrixTexture(e,t,r){this.throwIfDisposed();const[n,o]=Ry(t,r);this.setOutputMatrixTextureDriver(e,n,o)}setOutputMatrixWriteRegion(e,t,r,n){this.setOutputMatrixWriteRegionDriver(r,e,n,t)}setOutputPackedMatrixWriteRegion(e,t,r,n){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){null!=this.program&&Ny(this.gl,this.program),Wy(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const e=this.getVertexArray();console.assert(e===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}Iy(e,(()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Iy(this.gl,(()=>this.gl.finish()))}getQueryTimerExtension(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=By(this.gl,2===It().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(2===It().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2(),r=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,r),r}const e=this.getQueryTimerExtensionWebGL1(),t=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,t),t}endQuery(){if(2===It().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2();return void e.endQuery(t.TIME_ELAPSED_EXT)}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await pt((()=>this.disposed||this.isQueryAvailable(e,It().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")))),this.getQueryTime(e,It().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,t){if(0===t)return null;if(2===t){const t=this.gl;return t.getQueryParameter(e,t.QUERY_RESULT)/1e6}{const t=this.getQueryTimerExtensionWebGL1();return t.getQueryObjectEXT(e,t.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,t){if(0===t)return!0;if(2===t){const t=this.gl,r=this.getQueryTimerExtensionWebGL2(),n=t.getQueryParameter(e,t.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),n&&!this.disjoint}{const t=this.getQueryTimerExtensionWebGL1(),r=t.getQueryObjectEXT(e,t.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(t.GPU_DISJOINT_EXT)),r&&!this.disjoint}}pollFence(e){return new Promise((t=>{this.addItemToPoll((()=>e.isFencePassed()),(()=>t()))}))}pollItems(){const e=function(e){let t=0;for(;t<e.length&&e[t]();++t);return t-1}(this.itemsToPoll.map((e=>e.isDoneFn)));for(let t=0;t<=e;++t){const{resolveFn:e}=this.itemsToPoll[t];e()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,t){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in It().platform&&(r=It().platform.setTimeoutCustom.bind(It().platform)),pt((()=>(this.pollItems(),0===this.itemsToPoll.length)),(()=>0),null,r)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),jy(this.gl,e,this.framebuffer),this.debug&&Wy(this.gl)}unbindTextureToFrameBuffer(){null!=this.outputTexture?(jy(this.gl,this.outputTexture,this.framebuffer),this.debug&&Wy(this.gl)):Gy(this.gl,this.framebuffer)}downloadMatrixDriver(e,t){this.bindTextureToFrameBuffer(e);const r=t();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,t,r){this.throwIfDisposed();const n=this.gl;jy(n,e,this.framebuffer),this.debug&&Wy(n),this.outputTexture=e,Iy(n,(()=>n.viewport(0,0,t,r))),Iy(n,(()=>n.scissor(0,0,t,r)))}setOutputMatrixWriteRegionDriver(e,t,r,n){this.throwIfDisposed(),Iy(this.gl,(()=>this.gl.scissor(e,t,r,n)))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(null==this.program)throw new Error("No GPU program is currently set.")}}const{addImpl:Lb,bincountImpl:Nb,bincountReduceImpl:Pb,castImpl:jb,ceilImpl:Gb,concatImpl:Wb,equalImpl:zb,expImpl:Ub,expm1Impl:$b,floorImpl:Hb,gatherNdImpl:Vb,gatherV2Impl:Kb,greaterImpl:Yb,greaterEqualImpl:Xb,lessImpl:qb,lessEqualImpl:Jb,linSpaceImpl:Qb,logImpl:Zb,maxImpl:e_,maximumImpl:t_,minimumImpl:r_,multiplyImpl:n_,negImpl:o_,notEqualImpl:a_,prodImpl:i_,raggedGatherImpl:s_,raggedRangeImpl:p_,raggedTensorToTensorImpl:l_,rangeImpl:u_,rsqrtImpl:d_,scatterImpl:c_,sigmoidImpl:g_,simpleAbsImpl:h_,sliceImpl:f_,sparseFillEmptyRowsImpl:m_,sparseReshapeImpl:y_,sparseSegmentReductionImpl:b_,sqrtImpl:__,stridedSliceImpl:v_,stringNGramsImpl:w_,stringSplitImpl:k_,stringToHashBucketFastImpl:T_,subImpl:O_,tileImpl:x_,topKImpl:S_,transposeImpl:E_,uniqueImpl:F_}=Lm;function M_(e,t){return["x","y","z","w","u","v"].slice(0,t).map((t=>`${e}.${t}`))}function R_(e,t){return 1===t?[e]:M_(e,t)}class C_{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=wb(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{const e=R_("rc",this.rank),t=fb(this.rank),r=this.getOutOfBoundsCondition(e),n=this.getSetup(e),o=this.getOutput(e);this.userCode=`\n        void main() {\n          ${t} rc = getOutputCoords();\n\n          if(${r}) {\n            setOutput(vec4(0));\n          } else {\n            ${n}\n\n            setOutput(vec4(${o}));\n          }\n        }\n      `}}getSourceCoordsArr(e){const t=[];for(let r=0;r<=1;r++)for(let n=0;n<=1;n++){let o=`${0===r?"r":"rp1"}, ${0===n?"c":"cp1"}`;for(let t=2;t<this.rank;t++)o=`${e[e.length-1-t]},`+o;t.push(o)}return t}getOutOfBoundsCondition(e){if(1===this.rank)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let t="";for(let r=this.rank-2;r<this.rank;r++)t+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(t+="||");return t}getSetup(e){if(1===this.rank)return"";const t=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],n=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`\n      int r = ${t[0]};\n      int c = ${t[1]};\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ${r};\n      bool rEdge = rp1 >= ${n};\n    `}getOutput(e){const t=this.getSourceCoordsArr(e);return 1===this.rank?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${t[0]}),\n            cEdge ? 0. : getA(${t[1]}),\n            rEdge ? 0. : getA(${t[2]}),\n            rEdge || cEdge ? 0. : getA(${t[3]})`}}class I_{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=wb(this.outputShape.length);let r="";for(let e=0;e<4;e++){let t="thisRC = rc;";e%2==1&&(t+="thisRC.z += 1;"),e>1&&(t+="thisRC.y += 1;"),r+=`\n        ${t}\n        ${e>0?"if(thisRC.y < rows && thisRC.z < cols){":""}\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[${e}] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ${e>0?"}":""}\n      `}var n,o;this.userCode=`\n      ${n=t,o=this.enableShapeUniforms,`\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ${o?function(e,t,r="index"){const n=e.map(((e,t)=>t)),o=function(e,t){const r=e.length,n=e.map((e=>`${t}[${e}]`)),o=new Array(r-1);o[r-2]=n[r-1];for(let e=r-3;e>=0;--e)o[e]=`(${o[e+1]} * ${n[e+1]})`;return o}(n,t);return o.map(((t,n)=>`int ${e[n]} = ${r} / ${o[n]}; ${n===o.length-1?`int ${e[n+1]} = ${r} - ${e[n]} * ${o[n]}`:`index -= ${e[n]} * ${o[n]}`};`)).join("")}(["r","c","d"],"inputShape"):tb(["r","c","d"],n)}\n      return ivec3(r, c, d);\n    }\n  `}\n      ${this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":nb(e)}\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};\n        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};\n\n        ${r}\n\n        setOutput(result);\n      }\n    `}}class A_{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}acquireTexture(e,t,r){const n=D_(t,r),o=L_(e,n,r);o in this.freeTextures||(this.freeTextures[o]=[]),o in this.usedTextures||(this.usedTextures[o]=[]);const a=B_(e,n,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[o].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=a,this.log();const e=this.freeTextures[o].shift();return this.usedTextures[o].push(e),e}let i;return n===Ey.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):n===Ey.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):n===Ey.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):n===Ey.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):n===Ey.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[o].push(i),this.numUsedTextures++,this._numBytesAllocated+=a,this.log(),i}releaseTexture(e,t,r,n){if(null==this.freeTextures)return;const o=D_(r,n),a=L_(t,o,n);a in this.freeTextures||(this.freeTextures[a]=[]);const i=B_(t,o,this.gpgpu.gl,this.gpgpu.textureConfig,n),s=It().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==s&&this._numBytesAllocated>s?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=i):(this.freeTextures[a].push(e),this.numFreeTextures++,this._numBytesFree+=i),this.numUsedTextures--;const p=this.usedTextures[a],l=p.indexOf(e);if(l<0)throw new Error("Cannot release a texture that was never provided by this texture manager");p.splice(l,1),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const t=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*t)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(null!=this.freeTextures){for(const e in this.freeTextures)this.freeTextures[e].forEach((e=>{this.gpgpu.deleteMatrixTexture(e.texture)}));for(const e in this.usedTextures)this.usedTextures[e].forEach((e=>{this.gpgpu.deleteMatrixTexture(e.texture)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function B_(e,t,r,n,o){const a=function(e,t){switch(e){case Ey.PACKED_2X2_FLOAT32:return Ab(t);case Ey.PACKED_2X2_FLOAT16:return Bb(t);case Ey.UNPACKED_FLOAT32:return Rb(t);case Ey.UNPACKED_FLOAT16:return Cb(t);case Ey.PACKED_4X1_UNSIGNED_BYTE:return Ib(t);default:throw new Error(`Unknown physical texture type ${e}`)}}(t,n);let i;if(o){const[t,r]=Ry(e[0],e[1]);i=t*r}else{const[t,r]=Fy(e[0],e[1]);i=t*r}const s=function(e,t){const r=e;if(t===r.R32F)return 4;if(t===r.R16F)return 2;if(t===r.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===r.RGBA16F)return 8;if(t===r.RGBA8)return 4;throw new Error(`Unknown internal format ${t}`)}(r,a);return i*s}function D_(e,t){if(e===Sy.UPLOAD)return Ey.PACKED_2X2_FLOAT32;if(e===Sy.RENDER||null==e)return function(e){return It().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?Ey.PACKED_2X2_FLOAT32:Ey.UNPACKED_FLOAT32:e?Ey.PACKED_2X2_FLOAT16:Ey.UNPACKED_FLOAT16}(t);if(e===Sy.DOWNLOAD||e===Sy.PIXELS)return Ey.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${e}`)}function L_(e,t,r){return`${e[0]}_${e[1]}_${t}_${r}`}class N_{constructor(e,t){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=wb(this.outputShape.length),this.userCode=`\n      float unaryOperation(float x) {\n        ${t}\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}const P_="if (isnan(x)) return x;",j_="return x;",G_="return abs(x);",W_="return (x >= 0.0) ? x : (exp(x) - 1.0);",z_=P_+"\n  return (x < 0.0) ? 0.0 : x;\n",U_=P_+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",$_="return x;",H_="return 1.0 / (1.0 + exp(-1.0 * x));",V_="return x;",K_="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",Y_="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",X_="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",q_="return 1.0 / (1.0 + exp(-1.0 * x));";class J_{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=wb(this.outputShape.length),this.userCode=`\n      vec4 unaryOperation(vec4 x) {\n        ${t}\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}class Q_{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=wb(this.outputShape.length);const t=e.length,r=R_("rc",t),n=fb(t),o=function(e,t){if(1===e)return"rc";let r="";for(let n=0;n<e;n++)r+=t[n],n<e-1&&(r+=",");return r}(t,r),a=r.slice(-2),i=t<=1?"rc":`vec2(${a.join(",")})`;this.userCode=`\n      void main() {\n        ${n} rc = getOutputCoords();\n        vec4 packedInput = getA(${o});\n\n        setOutput(getChannel(packedInput, ${i}));\n      }\n    `}}const Z_=ac,ev={},tv=It().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");class rv extends Xe{constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!It().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let t;if(null!=e){if(e instanceof Db)t=e;else{const r=Oy(It().getNumber("WEBGL_VERSION"),e);t=new Db(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const e=Oy(It().getNumber("WEBGL_VERSION"));t=new Db(e),this.binaryCache=((r=It().getNumber("WEBGL_VERSION"))in ev||(ev[r]={}),ev[r]),this.gpgpuCreatedLocally=!0}var r;this.gpgpu=t,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new A_(this.gpgpu),this.numMBBeforeWarning=null==It().global.screen?1024:It().global.screen.height*It().global.screen.width*window.devicePixelRatio*600/1024/1024,this.texData=new Ye(this,Os())}nextDataId(){return rv.nextDataId++}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,t,r,n,o,a){const i=this.makeTensorInfo(t,r),s=this.texData.get(i.dataId);s.isPacked=!1,s.texture={texture:e,texShape:[n,o]},s.texShape=[n,o];const p=Hy(t),l=new Eb(p,!1,a),u=this.runWebGLProgram(l,[i],r,[[n,o]]);return u.shape=t,s.texture=null,this.disposeIntermediateTensorInfo(i),u.dataId}write(e,t,r){if((It().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||It().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===r&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const n={id:this.nextDataId()};return this.texData.set(n,{shape:t,dtype:r,values:e,usage:Sy.UPLOAD,refCount:1}),n}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){this.texData.get(e).refCount++}decRef(e){this.texData.has(e)&&this.texData.get(e).refCount--}move(e,t,r,n,o){if(It().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===n)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:n,values:t,usage:Sy.UPLOAD,refCount:o})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const t=this.texData.get(e),{values:r,dtype:n,complexTensorInfos:o,slice:a,shape:i,isPacked:s}=t;if(null!=a){let t;t=s?new J_(i,$_):new N_(i,$_);const r=this.runWebGLProgram(t,[{dataId:e,shape:i,dtype:n}],n),o=this.readSync(r.dataId);return this.disposeIntermediateTensorInfo(r),o}if(null!=r)return this.convertAndCacheOnCPU(e);if("string"===n)return r;const p=null!=this.activeTimers;let l,u;return p&&(l=Eo()),u="complex64"===n?Dg(this.readSync(o.real.dataId),this.readSync(o.imag.dataId)):this.getValuesFromTexture(e),p&&(this.downloadWaitMs+=Eo()-l),this.convertAndCacheOnCPU(e,u)}async read(e){if(this.pendingRead.has(e)){const t=this.pendingRead.get(e);return new Promise((e=>t.push(e)))}const t=this.texData.get(e),{values:r,shape:n,slice:o,dtype:a,complexTensorInfos:i,isPacked:s}=t;if(null!=o){let t;t=s?new J_(n,$_):new N_(n,$_);const r=this.runWebGLProgram(t,[{dataId:e,shape:n,dtype:a}],a),o=this.read(r.dataId);return this.disposeIntermediateTensorInfo(r),o}if(null!=r)return this.convertAndCacheOnCPU(e);if(It().getBool("DEBUG")&&!It().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===It().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let p,l,u=null;if("complex64"!==a&&It().get("WEBGL_BUFFER_SUPPORTED")){p=this.decode(e);const t=this.texData.get(p.dataId);u=this.gpgpu.createBufferFromTexture(t.texture.texture,...My(n))}if(this.pendingRead.set(e,[]),"complex64"!==a&&await this.gpgpu.createAndWaitForFence(),"complex64"===a){const e=await Promise.all([this.read(i.real.dataId),this.read(i.imag.dataId)]);l=Dg(e[0],e[1])}else if(null==u)l=this.getValuesFromTexture(e);else{const e=nt(n);l=this.gpgpu.downloadFloat32MatrixFromBuffer(u,e)}if(null!=p&&this.disposeIntermediateTensorInfo(p),null!=u){const e=this.gpgpu.gl;Iy(e,(()=>e.deleteBuffer(u)))}const d=this.convertAndCacheOnCPU(e,l),c=this.pendingRead.get(e);return this.pendingRead.delete(e),c.forEach((e=>e(d))),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&Os().removeDataId(e,this),this.pendingDeletes--),d}readToGPU(e,t={}){const r=this.texData.get(e),{values:n,shape:o,slice:a,dtype:i,isPacked:s,texture:p}=r;if("complex64"===i)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=a){let r;r=s?new J_(o,$_):new N_(o,$_);const n=this.runWebGLProgram(r,[{dataId:e,shape:o,dtype:i}],i),a=this.readToGPU(n,t);return this.disposeIntermediateTensorInfo(n),a}if(null==p)throw null!=n?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const l=this.decode(e,t.customTexShape),u=Os().makeTensorFromTensorInfo(l),d=this.texData.get(l.dataId);return Object.assign({tensorRef:u},d.texture)}bufferSync(e){const t=this.readSync(e.dataId);if("string"===e.dtype)try{const r=t.map((e=>Mo(e)));return el(e.shape,e.dtype,r)}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8")}return el(e.shape,e.dtype,t)}checkNumericalProblems(e){if(null!=e)for(let t=0;t<e.length;t++){const r=e[t];if(!Ay(r)){if(It().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`);throw Error(`The value ${r} cannot be represented on this device.`)}}}getValuesFromTexture(e){const{shape:t,dtype:r,isPacked:n}=this.texData.get(e),o=nt(t);if(It().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const r=this.decode(e),n=this.texData.get(r.dataId),a=this.gpgpu.downloadMatrixFromPackedTexture(n.texture.texture,...My(t)).subarray(0,o);return this.disposeIntermediateTensorInfo(r),a}const a=It().getBool("WEBGL_PACK")&&!0===n,i=a?Hy(t):t,s=a?new xb(i):new Ob(i),p=this.runWebGLProgram(s,[{shape:i,dtype:r,dataId:e}],"float32"),l=this.texData.get(p.dataId),u=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(l.texture.texture,l.texShape[0],l.texShape[1]).subarray(0,o);return this.disposeIntermediateTensorInfo(p),u}timerAvailable(){return It().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const t=this.activeTimers,r=[];let n=!1;null==this.programTimersStack?(this.programTimersStack=r,n=!0):this.activeTimers.push(r),this.activeTimers=r,e();const o=Co(this.activeTimers.map((e=>e.query))).filter((e=>null!=e)),a=Co(this.activeTimers.map((e=>e.name))).filter((e=>null!=e));this.activeTimers=t,n&&(this.programTimersStack=null);const i={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(It().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const e=await Promise.all(o);i.kernelMs=function(e){let t=0;for(let r=0;r<e.length;r++)t+=e[r];return t}(e),i.getExtraProfileInfo=()=>e.map(((e,t)=>({name:a[t],ms:e}))).map((e=>`${e.name}: ${e.ms}`)).join(", ")}else i.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,i})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return It().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Eo(),endMs:null}}endTimer(e){return It().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Eo(),e)}async getQueryTime(e){if(It().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const t=e;return t.endMs-t.startMs}disposeData(e,t=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return null!=r&&(this.disposeData(r.real.dataId,t),this.disposeData(r.imag.dataId,t)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:t,dtype:r,texShape:n,usage:o,isPacked:a,slice:i}=this.texData.get(e),s=i&&i.origDataId||e,p=this.dataRefCount.get(s);p>1?this.dataRefCount.set(s,p-1):(this.dataRefCount.delete(s),null!=t&&(this.numBytesInGPU-=this.computeBytes(n,r),this.textureManager.releaseTexture(t,n,o,a)));const l=this.texData.get(e);l.texture=null,l.texShape=null,l.isPacked=!1,l.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,t=tv){return It().getBool("WEBGL_CPU_FORWARD")&&e.every((e=>null==this.texData.get(e.dataId).texture&&nt(e.shape)<t))}getGPGPUContext(){return this.gpgpu}where(e){In("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const t=e.dataSync();return Z_(e.shape,t)}packedUnaryOp(e,t,r){const n=new J_(e.shape,t),o=this.compileAndRun(n,[e],r);return Os().makeTensorFromTensorInfo(o)}abs(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){const t=h_(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(It().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,G_,e.dtype);const t=new N_(e.shape,G_),r=this.compileAndRun(t,[e]);return Os().makeTensorFromTensorInfo(r)}makeTensorInfo(e,t,r){let n;if("string"===t&&null!=r&&r.length>0&&mt(r[0])){const o=r.map((e=>Fo(e)));n=this.write(o,e,t)}else n=this.write(r,e,t);return this.texData.get(n).usage=null,{dataId:n,shape:e,dtype:t}}makeOutput(e,t,r){return Os().makeTensorFromTensorInfo(this.makeTensorInfo(e,t,r),this)}unpackTensor(e){const t=new Q_(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}packTensor(e){const t=new C_(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}packedReshape(e,t){const r=[Uy(e.shape),...$y(e.shape)],n={dtype:e.dtype,shape:r,dataId:e.dataId},o=[Uy(t),...$y(t)],a=new I_(o,r),i=[r],s=this.runWebGLProgram(a,[n],e.dtype,i,!0);return{dataId:s.dataId,shape:t,dtype:s.dtype}}decode(e,t){const r=this.texData.get(e),{isPacked:n,shape:o,dtype:a}=r;null!=t&&et(nt(o)<=t[0]*t[1]*4,(()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data."));const i=Hy(o);let s;s=n?new Tb(i):new kb(i);const p=[null!=t?t:My(i)];return{dtype:a,shape:o,dataId:this.runWebGLProgram(s,[{shape:i,dtype:a,dataId:e}],a,p,!0,t).dataId}}runWebGLProgram(e,t,r,n,o=!1,a){const i=this.makeTensorInfo(e.outputShape,r),s=this.texData.get(i.dataId);if(e.packedOutput&&(s.isPacked=!0),e.outPackingScheme===xy.DENSE){const t=null!=a?a:My(e.outputShape);s.texShape=t.map((e=>2*e))}if(null!=e.outTexUsage&&(s.usage=e.outTexUsage),0===nt(i.shape))return s.values=ct(i.dtype,0),i;const p=[],l=t.map((t=>{if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let r=this.texData.get(t.dataId);if(null==r.texture){if(!e.packedInputs&&nt(t.shape)<=It().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:r.values};e.packedInputs&&(r.isPacked=!0,r.shape=t.shape)}if(this.uploadToGPU(t.dataId),!!r.isPacked!=!!e.packedInputs)t=r.isPacked?this.unpackTensor(t):this.packTensor(t),p.push(t),r=this.texData.get(t.dataId);else if(r.isPacked&&!Ky(r.shape,t.shape)){const e=t,n=t.shape;t.shape=r.shape,t=this.packedReshape(t,n),p.push(t),r=this.texData.get(t.dataId),e.shape=n}return{shape:t.shape,texData:r,isUniform:!1}}));this.uploadToGPU(i.dataId);const u={shape:i.shape,texData:s,isUniform:!1},d=function(e,t,r){let n="";t.concat(r).forEach((t=>{const o=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){const a=t.texData.texShape,{useSqueezeShape:i,uniformShape:s,keptDims:p}=mb(e.packedInputs,t.shape,a);let l="",u="",d="";if(1===s.length&&e.packedInputs){const e=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];l=`${e[0]>1}_${e[1]>1}`}else if(2!==s.length||e.packedInputs){if(s.length>2&&!e.packedInputs){const e=vt(s);d=`${e[0]===a[1]}_${e[e.length-1]===a[1]}`}}else u=`${s[0]>1}_${s[1]>1}`;const c=t.shape.length,g=2===s.length&&ot(t.shape,a),h=1===nt(t.shape),f=Ds(t.shape,r.shape),m=!e.packedInputs&&c===r.shape.length&&ot(a,r.texData.texShape),y=e.packedInputs||s.length>2?"":`${a[0]>1}_${a[1]>1}`;n+=`${c}_${m}_${i?p:""}_${s.length}_${h}_${f}_${g}_${l}_${u}_${d}_${y}_${o}`}else{const e=t.isUniform?"uniform":t.texData.texShape;n+=`${t.shape}_${e}_${o}`}}));const o=e.userCode;let a=e.constructor.name;return a+="_"+n+"_"+o+`${It().getNumber("WEBGL_VERSION")}`,a}(e,l,u),c=this.getAndSaveBinary(d,(()=>function(e,t,r,n){const o=r.map(((e,r)=>{const n={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(n.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[r],shapeInfo:n}})),a=o.map((e=>e.shapeInfo)),i={logicalShape:n.shape,texShape:n.texData.texShape,isUniform:!1,isPacked:n.texData.isPacked,flatOffset:null},s=ib(o,i,t),p=function(e,t){const r=zy(e,(()=>e.createShader(e.FRAGMENT_SHADER)),"Unable to create fragment WebGLShader.");if(Iy(e,(()=>e.shaderSource(r,t))),Iy(e,(()=>e.compileShader(r))),It().get("ENGINE_COMPILE_ONLY"))return r;if(!1===e.getShaderParameter(r,e.COMPILE_STATUS))throw Ly(t,e.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}(e.gl,s),l=e.createProgram(p);return It().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:p,source:s,webGLProgram:l,inShapeInfos:a,outShapeInfo:i,uniformLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,inShapesLocations:null,inTexShapesLocations:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:Object.assign({program:t,fragmentShader:p,source:s,webGLProgram:l,inShapeInfos:a,outShapeInfo:i},_b(e,t,l))}(this.gpgpu,e,l,u))),g=null!=this.activeTimers;let h;g&&(h=this.startTimer()),It().get("ENGINE_COMPILE_ONLY")||function(e,t,r,n,o){t.program.enableShapeUniforms||(vb(t.inShapeInfos,r),vb([t.outShapeInfo],[n]));const a=n.texData.texture,i=n.texData.texShape;n.texData.isPacked?e.setOutputPackedMatrixTexture(a.texture,i[0],i[1]):e.setOutputMatrixTexture(a.texture,i[0],i[1]),e.setProgram(t.webGLProgram),1===It().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),r.forEach(((r,n)=>{const o=t.program.variableNames[n],a=t.uniformLocations[o],i=t.uniformLocations[`offset${o}`],s=t.inShapesLocations[`${o}Shape`],p=t.inTexShapesLocations[`${o}TexShape`];if(s){const{uniformShape:n}=mb(t.program.packedInputs,r.shape,r.texData.texShape);switch(n.length){case 1:e.gl.uniform1iv(s,new Int32Array(n));break;case 2:e.gl.uniform2iv(s,new Int32Array(n));break;case 3:e.gl.uniform3iv(s,new Int32Array(n));break;case 4:e.gl.uniform4iv(s,new Int32Array(n))}}if(p&&e.gl.uniform2i(p,r.texData.texShape[0],r.texData.texShape[1]),null!=a)if(r.isUniform)if(nt(r.shape)<2)e.gl.uniform1f(a,r.uniformValues[0]);else{let t=r.uniformValues;t instanceof Float32Array||(t=new Float32Array(t)),e.gl.uniform1fv(a,t)}else null!=r.texData.slice&&null!=i&&e.gl.uniform1i(i,r.texData.slice.flatOffset),e.setInputMatrixTexture(r.texData.texture.texture,a,n)}));const s=t.outShapeLocation;if(s)switch(n.shape.length){case 1:e.gl.uniform1iv(s,new Int32Array(n.shape));break;case 2:e.gl.uniform2iv(s,new Int32Array(n.shape));break;case 3:e.gl.uniform3iv(s,new Int32Array(n.shape));break;case 4:e.gl.uniform4iv(s,new Int32Array(n.shape))}if(t.outShapeStridesLocation){const r=vt(n.shape);switch(n.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(r));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(r));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(r))}}t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,n.texData.texShape[0],n.texData.texShape[1]),t.program.customUniforms&&o&&t.program.customUniforms.forEach(((r,n)=>{const a=t.customUniformLocations[n],i=o[n];if("float"===r.type)e.gl.uniform1fv(a,i);else if("vec2"===r.type)e.gl.uniform2fv(a,i);else if("vec3"===r.type)e.gl.uniform3fv(a,i);else if("vec4"===r.type)e.gl.uniform4fv(a,i);else if("int"===r.type)e.gl.uniform1iv(a,i);else if("ivec2"===r.type)e.gl.uniform2iv(a,i);else if("ivec3"===r.type)e.gl.uniform3iv(a,i);else{if("ivec4"!==r.type)throw Error(`uniform type ${r.type} is not supported yet.`);e.gl.uniform4iv(a,i)}})),e.executeProgram()}(this.gpgpu,c,l,u,n),p.forEach((e=>this.disposeIntermediateTensorInfo(e))),g&&(h=this.endTimer(h),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(h)}));const f=It().get("WEBGL_FLUSH_THRESHOLD");if(f>0){const e=Eo();e-this.lastGlFlushTime>f&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=e)}if(!It().getBool("WEBGL_LAZILY_UNPACK")&&s.isPacked&&!1===o){const e=this.unpackTensor(i);return this.disposeIntermediateTensorInfo(i),e}return i}compileAndRun(e,t,r,n,o=!1){return r=r||t[0].dtype,this.runWebGLProgram(e,t,r,n,o)}getAndSaveBinary(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(It().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach((e=>{this.gpgpu.deleteProgram(this.binaryCache[e].webGLProgram),delete this.binaryCache[e]})),this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return null==this.floatPrecisionValue&&(this.floatPrecisionValue=xs((()=>{if(!It().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=It().getBool("DEBUG");It().set("DEBUG",!1);const t=this.abs(Ul(1e-8)).dataSync()[0];if(It().set("DEBUG",e),t>0)return 32}return 16}))),this.floatPrecisionValue}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}uploadToGPU(e){const t=this.texData.get(e),{shape:r,dtype:n,values:o,texture:a,usage:i,isPacked:s}=t;if(null!=a)return;const p=null!=this.activeTimers;let l;p&&(l=Eo());let u=t.texShape;if(null==u&&(u=function(e,t=!1){let r=It().getNumber("WEBGL_MAX_TEXTURE_SIZE"),n=It().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");if(n===1/0&&It().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(n=r/2),t&&(r*=2,n*=2,e=e.map(((t,r)=>r>=e.length-2?Qe(e[r]):e[r])),1===e.length&&(e=[2,e[0]])),2!==e.length){const t=dt(e);e=t.newShape}let o=nt(e),a=null;e.length<=1&&o<=r?a=[1,o]:2===e.length&&e[0]<=r&&e[1]<=r?a=e:3===e.length&&e[0]*e[1]<=r&&e[2]<=r?a=[e[0]*e[1],e[2]]:3===e.length&&e[0]<=r&&e[1]*e[2]<=r?a=[e[0],e[1]*e[2]]:4===e.length&&e[0]*e[1]*e[2]<=r&&e[3]<=r?a=[e[0]*e[1]*e[2],e[3]]:4===e.length&&e[0]<=r&&e[1]*e[2]*e[3]<=r&&(a=[e[0],e[1]*e[2]*e[3]]);const i=null!=a&&Math.max(...a)>n&&Math.min(...a)<=(t?2:1)&&Math.min(...a)>0;if(null==a||i)if(t){const t=Uy(e);let r=2,n=2;e.length&&([r,n]=$y(e)),o=t*(r/2)*(n/2),a=it(o).map((e=>2*e))}else a=it(o);return a}(r,s),t.texShape=u),null!=o){const e=Hy(r);let a,i=u[1],d=u[0];const c=o instanceof Uint8Array||o instanceof Uint8ClampedArray;!s&&c||([i,d]=Ry(u[0],u[1])),a=s?new Fb(e,c):new Eb(e,c);const g=c?[d,i]:u,h=this.makeTensorInfo(g,n),f=this.texData.get(h.dataId);f.usage=c?Sy.PIXELS:Sy.UPLOAD,f.texShape=g,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(h.dataId),i,d,o);const m=[[d,i]],y=!0,b=this.runWebGLProgram(a,[h],n,m,y),_=this.texData.get(b.dataId);t.texShape=_.texShape,t.isPacked=_.isPacked,t.usage=_.usage,It().get("ENGINE_COMPILE_ONLY")?this.disposeData(b.dataId):(t.texture=_.texture,t.values=null,this.texData.delete(b.dataId)),this.disposeIntermediateTensorInfo(h),p&&(this.uploadWaitMs+=Eo()-l)}else{const e=this.acquireTexture(u,i,n,s);t.texture=e}}convertAndCacheOnCPU(e,t){const r=this.texData.get(e),{dtype:n}=r;return null!=t&&(r.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){const r="int32"===t?new Int32Array(e.length):new Uint8Array(e.length);for(let t=0;t<r.length;++t)r[t]=Math.round(e[t]);return r}throw new Error(`Unknown dtype ${t}`)}(t,n)),r.values}acquireTexture(e,t,r,n){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){const e=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${e} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,t,n)}computeBytes(e,t){return e[0]*e[1]*ft(t)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,t]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(t));return Promise.all(e)}for(const[,t]of Object.entries(this.binaryCache)){const r=new Promise((e=>{try{this.checkCompletion_(t),e(!0)}catch(e){throw e}}));e.push(r)}return Promise.all(e)}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await new Promise((e=>_g((()=>e())))),this.checkCompletionAsync_(e))}checkCompletion_(e){if(!1===this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)){if(console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),!1===this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS))throw Ly(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.");throw new Error("Failed to link vertex and fragment shaders.")}return!0}getUniformLocations(){for(const[,e]of Object.entries(this.binaryCache)){const{uniformLocations:t,customUniformLocations:r,infLoc:n,nanLoc:o,inShapesLocations:a,inTexShapesLocations:i,outShapeLocation:s,outShapeStridesLocation:p,outTexShapeLocation:l}=_b(this.gpgpu,e.program,e.webGLProgram);e.uniformLocations=t,e.customUniformLocations=r,e.infLoc=n,e.nanLoc=o,e.inShapesLocations=a,e.inTexShapesLocations=i,e.outShapeLocation=s,e.outShapeStridesLocation=p,e.outTexShapeLocation=l}}createTensorFromGPUData(e,t,r){e.channels=e.channels||"RGBA";const{texture:n,height:o,width:a,channels:i}=e,s=Os().backend;if(!s.gpgpu.gl.isTexture(n))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const p=s.writeTexture(n,t,r,o,a,i);return Os().makeTensorFromDataId(p,t,r,s)}}rv.nextDataId=0,da()&&Rs("webgl",(()=>new rv),2);class nv{constructor(e){this.variableNames=["A"];const t=eb(),[r,n]=e;this.outputShape=e,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${n}.0, ${r}.0);\n\n        vec4 values = ${t.texture2D}(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    `}}class ov{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const t=eb(),[r,n]=e;this.outputShape=e,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(${n}.0, ${r}.0);\n            vec4 values = ${t.texture2D}(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ${t.output} = result;\n      }\n    `}}const av={kernelName:En,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:r,attrs:n}=e;let{pixels:o}=t;const{numChannels:a}=n,i="undefined"!=typeof HTMLVideoElement&&o instanceof HTMLVideoElement,s="undefined"!=typeof HTMLImageElement&&o instanceof HTMLImageElement,[p,l]=i?[o.videoWidth,o.videoHeight]:[o.width,o.height],u=[l,p],d=[l,p,a];if(s||i){const e=It().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");null!=iv&&e===sv||(sv=e,iv=document.createElement("canvas").getContext("2d",{willReadFrequently:sv})),iv.canvas.width=p,iv.canvas.height=l,iv.drawImage(o,0,0,p,l),o=iv.canvas}const c=r.makeTensorInfo(u,"int32");r.texData.get(c.dataId).usage=Sy.PIXELS,r.gpgpu.uploadPixelDataToTexture(r.getTexture(c.dataId),o);const g=It().getBool("WEBGL_PACK")?new ov(d):new nv(d),h=r.runWebGLProgram(g,[c],"int32");return r.disposeData(c.dataId),h}};let iv,sv=It().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function pv(e){const{inputs:t,backend:r,attrs:n}=e,{x:o}=t,{shape:a}=n,i=r,s=nt(o.shape),p=lt(a,s),l=nt(p);et(s===l,(()=>`The new shape (${p}) has ${l} elements and the old shape (${o.shape}) has ${s} elements. The new shape and old shape must have the same number of elements.`));const u=i.texData.get(o.dataId);return!u.isPacked||Ky(o.shape,p)||null!==u.texture&&Ky(u.shape,p)?(i.incRef(o.dataId),{dataId:o.dataId,shape:p,dtype:o.dtype}):function(e,t,r){const n=[Uy(e.shape),...$y(e.shape)],o={dtype:e.dtype,shape:n,dataId:e.dataId},a=[Uy(t),...$y(t)],i=new I_(a,n),s=[n],p=r.runWebGLProgram(i,[o],e.dtype,s,!0);return{dataId:p.dataId,shape:t,dtype:p.dtype}}(o,p,i)}const lv={kernelName:Vr,backendName:"webgl",kernelFunc:pv};function uv(e){const{inputs:t,attrs:r,backend:n}=e,{dim:o}=r,{input:a}=t,i=a.shape.length,s=a.shape.slice();let p=o;return o<0&&(et(-(i+1)<=o,(()=>`Axis must be in the interval [${-(i+1)}, ${i}]`)),p=i+o+1),s.splice(p,0,1),pv({inputs:{x:a},backend:n,attrs:{shape:s}})}const dv={kernelName:sr,backendName:"webgl",kernelFunc:uv};class cv{constructor(e,t,r,n,o){this.variableNames=["A"],this.outputShape=[];const[a,i,s,p]=e;this.outputShape=[a,t,r,p];const l=[n&&t>1?i-1:i,n&&r>1?s-1:s],u=[n&&t>1?t-1:t,n&&r>1?r-1:r];let d;d=o?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${l[0]/u[0]},\n          ${l[1]/u[1]});\n      const vec2 inputShapeRC = vec2(${i}.0, ${s}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ${d};\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    `}}class gv{constructor(e,t,r,n,o){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[a,i,s,p]=e;this.outputShape=[a,t,r,p];const l=[n&&t>1?i-1:i,n&&r>1?s-1:s],u=[n&&t>1?t-1:t,n&&r>1?r-1:r];let d;d=o?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ${l[0]/u[0]},\n          ${l[1]/u[1]},\n          ${l[1]/u[1]});\n      const vec3 inputShapeRC = vec3(${i}.0, ${s}.0,\n                                     ${s}.0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ${d};\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ${p-1};\n        bool hasNextRow = coords.z < ${r-1};\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    `}}const hv={kernelName:Yr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:r,attrs:n}=e,{images:o}=t,{alignCorners:a,halfPixelCenters:i,size:s}=n,[p,l]=s,u=It().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new gv(o.shape,p,l,a,i):new cv(o.shape,p,l,a,i);return r.runWebGLProgram(u,[o],"float32")}};function fv(e){const{inputs:t,backend:r}=e,{x:n}=t;return r.incRef(n.dataId),{dataId:n.dataId,shape:n.shape,dtype:n.dtype}}const mv={kernelName:yr,backendName:"webgl",kernelFunc:fv};function yv(e){const{inputs:t,backend:r}=e,{real:n,imag:o}=t,a=r.makeTensorInfo(n.shape,"complex64"),i=r.texData.get(a.dataId),s=fv({inputs:{x:n},backend:r}),p=fv({inputs:{x:o},backend:r});return i.complexTensorInfos={real:s,imag:p},a}class bv{constructor(e,t,r){this.variableNames=["A","B"],this.outputShape=Ns(t,r),this.enableShapeUniforms=wb(this.outputShape.length),this.userCode=`\n      float binaryOperation(float a, float b) {\n        ${e}\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    `}}class _v{constructor(e,t,r,n=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Ns(t,r);const o=this.outputShape.length;this.enableShapeUniforms=wb(o);let a="";if(n)if(0===o||1===nt(this.outputShape))a="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(a=`\n          ${fb(o)} coords = getOutputCoords();\n        `,1===o)this.enableShapeUniforms?a+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":a+=`\n            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          `;else{const e=R_("coords",o);this.enableShapeUniforms?a+=`\n            bool nextRowOutOfBounds =\n              (${e[o-2]} + 1) >= outShape[${o} - 2];\n            bool nextColOutOfBounds =\n              (${e[o-1]} + 1) >= outShape[${o} - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          `:a+=`\n            bool nextRowOutOfBounds =\n              (${e[o-2]} + 1) >= ${this.outputShape[o-2]};\n            bool nextColOutOfBounds =\n              (${e[o-1]} + 1) >= ${this.outputShape[o-1]};\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          `}this.userCode=`\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ${e}\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ${a}\n\n        setOutput(result);\n      }\n    `}}const vv="return (a < 0.) ? b * a : a;",wv="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",kv="return (a < 0.) ? b * a : a;",Tv="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",Ov="if (isnan(x)) return x;";function xv({opSnippet:e,packedOpSnippet:t,cpuKernelImpl:r,dtype:n}){return({inputs:o,backend:a})=>{const{x:i}=o,s=a,p=n||i.dtype;if(s.shouldExecuteOnCPU([i])&&null!=r){const e=s.texData.get(i.dataId),t=r(e.values,p);return s.makeTensorInfo(i.shape,p,t)}let l;return l=It().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=t?new J_(i.shape,t):new N_(i.shape,e),s.runWebGLProgram(l,[i],p)}}function Sv({opSnippet:e,packedOpSnippet:t,checkOutOfBounds:r=!1,supportsComplex:n=!1,cpuKernelImpl:o,dtype:a}){return({inputs:i,backend:s})=>{const{a:p,b:l}=i,u=s;if(n&&"complex64"===p.dtype){const t=u.texData.get(p.dataId),r=u.texData.get(l.dataId),[n,o]=[[t.complexTensorInfos.real,r.complexTensorInfos.real],[t.complexTensorInfos.imag,r.complexTensorInfos.imag]].map((t=>{const[r,n]=t,o={dataId:r.dataId,dtype:r.dtype,shape:p.shape},a={dataId:n.dataId,dtype:n.dtype,shape:l.shape},i=new bv(e,p.shape,l.shape);return u.runWebGLProgram(i,[o,a],ea(r.dtype,n.dtype))})),a=yv({inputs:{real:n,imag:o},backend:u});return u.disposeIntermediateTensorInfo(n),u.disposeIntermediateTensorInfo(o),a}const d=a||ea(p.dtype,l.dtype);if(("string"===p.dtype||"string"===l.dtype||u.shouldExecuteOnCPU([p,l]))&&null!=o){const e=u.texData.get(p.dataId).values,t=u.texData.get(l.dataId).values,r="string"===p.dtype?qg(e):e,n="string"===p.dtype?qg(t):t,[a,i]=o(p.shape,l.shape,r,n,d),s=u.makeTensorInfo(i,d);return u.texData.get(s.dataId).values=a,s}let c;return c=It().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=t?new _v(t,p.shape,l.shape,r):new bv(e,p.shape,l.shape),u.runWebGLProgram(c,[p,l],d)}}function Ev(e,t=!1){if("linear"===e)return t?V_:j_;if("relu"===e)return t?Y_:z_;if("elu"===e)return t?K_:W_;if("relu6"===e)return t?X_:U_;if("prelu"===e)return t?Tv:kv;if("leakyrelu"===e)return t?wv:vv;if("sigmoid"===e)return t?q_:H_;throw new Error(`Activation ${e} has not been implemented for the WebGL backend.`)}const Fv=Sv({opSnippet:"return float(a != b);",cpuKernelImpl:a_,dtype:"bool"});function Mv(e){const{inputs:t,backend:r}=e,{input:n}=t;return fv({inputs:{x:r.texData.get(n.dataId).complexTensorInfos.real},backend:r})}const Rv={kernelName:Ht,backendName:"webgl",kernelFunc:function e(t){const{inputs:r,backend:n,attrs:o}=t,{x:a}=r,{dtype:i}=o;if("complex64"===i){if("complex64"===a.dtype)return fv({inputs:{x:a},backend:n});const t=Cu(a.shape),r=e({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),o=yv({inputs:{real:r,imag:t},backend:n});return t.dispose(),n.disposeIntermediateTensorInfo(r),o}if("complex64"===a.dtype){const t=Mv({inputs:{input:a},backend:n}),r=e({inputs:{x:t},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(t),r}if(!ht(a.dtype,i)){const e=fv({inputs:{x:a},backend:n});return{dataId:e.dataId,shape:e.shape,dtype:i}}if(n.shouldExecuteOnCPU([a])){const e=n.texData.get(a.dataId).values,[t,r,o]=jb(e,a.shape,a.dtype,i);return n.makeTensorInfo(t,r,o)}if("int32"===i)return function(e,t){const r=new N_(e.shape,"return float(int(x));"),n=t.runWebGLProgram(r,[e],"int32");return{dataId:n.dataId,shape:n.shape,dtype:n.dtype}}(a,n);if("bool"===i){const e=n.makeTensorInfo([],"bool",ct("bool",1)),t=Fv({inputs:{a,b:e},backend:n});return n.disposeIntermediateTensorInfo(e),t}throw new Error(`Error in Cast: failed to cast ${a.dtype} to ${i}`)}},Cv=Sv({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),Iv={kernelName:nr,backendName:"webgl",kernelFunc:Cv};class Av{constructor(e,t,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map(((t,r)=>t[0]+e[r]+t[1]));const n=e.length,o=fb(n),a=t.map((e=>e[0])).join(","),i=t.map(((t,r)=>t[0]+e[r])).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,n);this.userCode=1!==n?`\n      ${o} start = ${o}(${a});\n      ${o} end = ${o}(${i});\n\n      void main() {\n        ${o} outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ${o} coords = outC - start;\n          setOutput(getX(${s}));\n        }\n      }\n    `:`\n        int start = ${a};\n        int end = ${i};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      `}}class Bv{constructor(e,t,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map(((t,r)=>t[0]+e[r]+t[1]));const n=e.length,o=fb(n),a=t.map((e=>e[0])).join(","),i=t.map(((t,r)=>t[0]+e[r])).join(","),s=R_("rc",n),p=R_("source",n),l=`${s[n-1]} < ${this.outputShape[n-1]}`,u=1===n?"source":`vec2(${p.slice(-2).join()})`,d=[`${o} rc = outputLoc;`,`${s[n-1]} += 1;\n       if(${l}) {\n      `,1===n?"":`}\n       rc = outputLoc;\n       ${s[n-2]} += 1;\n       if(${s[n-2]} < ${this.outputShape[n-2]}) {`,1===n?"":`  ${s[n-1]} += 1;\n         if(${l}) {`],c=1===n?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let g="";for(let e=0,t=1===n?2:4;e<t;e++)g+=`\n        ${d[e]}\n        if (${c}) {\n          result[${e}] = float(value);\n        } else {\n          ${o} source = rc - start;\n          result[${e}] = getChannel(getX(${p.join()}), ${u});\n        }\n      `;g+=1===n?"} ":"}}",this.userCode=`\n      const ${o} start = ${o}(${a});\n      const ${o} end = ${o}(${i});\n\n      void main() {\n        ${o} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${g}\n        setOutput(result);\n      }\n    `}}class Dv{constructor(e,t){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}}const Lv=e=>{const{inputs:t,backend:r,attrs:n}=e,{x:o}=t,{paddings:a,constantValue:i}=n;if(0===nt(o.shape)){const e=a.map(((e,t)=>e[0]+o.shape[t]+e[1]));return function(e){const{backend:t,attrs:r}=e,{shape:n,value:o}=r;let{dtype:a}=r;if(a=a||yt(o),"string"===a){const e=gt(a,nt(n));return e.fill(o),t.makeTensorInfo(n,a,e)}{const e=new Dv(n,o),r=[[o]];return t.runWebGLProgram(e,[],a,r)}}({backend:r,attrs:{shape:e,value:i,dtype:o.dtype}})}const s=It().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Bv(o.shape,a,i):new Av(o.shape,a,i),p=[[i]];return r.runWebGLProgram(s,[o],o.dtype,p)},Nv={kernelName:Gr,backendName:"webgl",kernelFunc:Lv};class Pv{constructor(e,t=!1,r=null,n=!1,o=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const a=e.padInfo.top,i=e.padInfo.left,s=e.strideHeight,p=e.strideWidth,l=e.dilationHeight,u=e.dilationWidth,d=e.filterHeight,c=e.filterWidth,g=4*Math.floor(e.inChannels/4),h=e.inChannels%4,f="channelsLast"===e.dataFormat,m=f?1:2,y=f?2:3,b=f?3:1;let _="",v="";r&&(_=n?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${r}\n        }`:o?`float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ${r}\n        }`:`\n          float activation(float x) {\n            ${r}\n          }\n        `,v="result = activation(result);");const w=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),n&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${_}\n\n      const ivec2 strides = ivec2(${s}, ${p});\n      const ivec2 pads = ivec2(${a}, ${i});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[${b}];\n\n        ivec2 xRCCorner =\n            ivec2(coords[${m}], coords[${y}]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${d}; wR++) {\n          int xR = xRCorner + wR * ${l};\n\n          if (xR < 0 || xR >= ${e.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${c}; wC++) {\n            int xC = xCCorner + wC * ${u};\n\n            if (xC < 0 || xC >= ${e.inWidth}) {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ${g}; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (${f}) {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (${1===h}) {\n\n              if (${f}) {\n                dotProd +=\n                    getX(batch, xR, xC, ${g}) *\n                    getW(wR, wC, ${g}, d2);\n              } else {\n                dotProd +=\n                    getX(batch, ${g}, xR, xC) *\n                    getW(wR, wC, ${g}, d2);\n              }\n\n            } else if (${2===h}) {\n              vec2 wValues = vec2(\n                getW(wR, wC, ${g}, d2),\n                getW(wR, wC, ${g} + 1, d2)\n              );\n\n              if (${f}) {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ${g}),\n                  getX(batch, xR, xC, ${g} + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ${g}, xR, xC),\n                  getX(batch, ${g} + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (${3===h}) {\n              vec3 wValues = vec3(\n                getW(wR, wC, ${g}, d2),\n                getW(wR, wC, ${g} + 1, d2),\n                getW(wR, wC, ${g} + 2, d2)\n              );\n\n              if (${f}) {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ${g}),\n                  getX(batch, xR, xC, ${g} + 1),\n                  getX(batch, xR, xC, ${g} + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ${g}, xR, xC),\n                  getX(batch, ${g} + 1, xR, xC),\n                  getX(batch, ${g} + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ${w}\n        ${v}\n        setOutput(result);\n      }\n    `}}class jv{constructor(e,t=!1,r=null,n=!1,o=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=wb(this.outputShape.length);const a=e.padInfo.left,i=e.strideWidth,s=e.dilationWidth,p=e.filterHeight,l=e.filterWidth,u=l;let d="\n       int xR; int xC; int xCOffset;\n       vec4 wTexel; vec4 previous; vec4 final;";for(let e=0;e<l;e++)d+=`\n           vec4 xTexelC${2*e};\n           int xTexelC${2*e}Ready;\n           vec4 xTexelC${2*e+1};\n           int xTexelC${2*e+1}Ready;\n           vec4 xC${e};`;d+=`\n     for (int r = 0; r < ${p}; r++) {\n      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {\n       `;for(let e=0;e<l;e++)d+=`\n           xTexelC${2*e} = vec4(0.0);\n           xTexelC${2*e}Ready = 0;\n           xTexelC${2*e+1} = vec4(0.0);\n           xTexelC${2*e+1}Ready = 0;\n           xC${e} = vec4(0.0);`;d+="\n         xR = xRCorner + r * dilations[0];\n         if (xR >=0 && xR < inDims[0]) {\n       ";for(let t=0;t<(u+1)/2;t++){const r=2*t;if(d+=`\n           xC = xCCorner + ${r*s};\n           `,1===i){if(r<l&&(a%2==1?(d+=`\n                 xCOffset = xC + 1;\n                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${r}Ready == 0) {\n                   xTexelC${r} = getX(batch, xR, xCOffset, d1);\n\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC${r}.zw = vec2(0.0);\n                   }\n                   xTexelC${r}Ready = 1;\n                 }\n               `,d+=1===s&&r>0?`\n                 xC${r} = vec4(xTexelC${r-2}.zw, xTexelC${r}.xy);\n                 `:`\n                   xCOffset = xC + 1 - 2;\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       previous.zw = vec2(0.0);\n                     }\n\n                     xC${r} = vec4(previous.zw, xTexelC${r}.xy);\n                   } else {\n                     xC${r} = vec4(0.0, 0.0, xTexelC${r}.xy);\n                   }\n                   `):d+=`\n                 if (xC >= 0 && xC < inDims[1] && xTexelC${r}Ready == 0) {\n                   xTexelC${r} = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC${r}.zw = vec2(0.0);\n                   }\n                   xTexelC${r}Ready = 1;\n                 }\n\n                 xC${r} = xTexelC${r};\n                 `,r+1<l)){const e=a%2==0?Qe(s):s;s%2==0&&a%2==1||s%2!=0&&a%2!=1?(d+=`\n                   xCOffset = xC + imod(pads[1], 2) + ${e};\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${r+1}Ready == 0) {\n                     xTexelC${r+1} = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       xTexelC${r+1}.zw = vec2(0.0);\n                     }\n                     xTexelC${r+1}Ready = 1;\n                   }\n                   `,d+=s>1?`\n                     xCOffset -= 2;\n                     if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                      previous = getX(batch, xR, xCOffset, d1);\n                      xC${r+1} = vec4(previous.zw, xTexelC${r+1}.xy);\n                     } else {\n                      xC${r+1} = vec4(0.0, 0.0, xTexelC${r+1}.xy);\n                     }\n                     `:`\n                     xC${r+1} = vec4(xTexelC${r}.zw, xTexelC${r+1}.xy);\n                     `):d+=1===e?`\n                     xC${r+1} = xTexelC${r};\n                     `:`\n                     xCOffset = xC + ${e};\n\n                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${r+1}Ready == 0) {\n                       xTexelC${r+1} = getX(batch, xR, xCOffset, d1);\n                       if (xCOffset + 1 >= inDims[1]) {\n                         xTexelC${r+1}.zw = vec2(0.0);\n                       }\n                       xTexelC${r+1}Ready = 1;\n                     }\n\n                     xC${r+1} = xTexelC${r+1};\n                     `}}else r<l&&(a%2==1?(d+=`\n                 xCOffset = xC + 1 - strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${r}Ready == 0) {\n                   xTexelC${r} = getX(batch, xR, xCOffset, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC${r}.zw = vec2(0.0);\n                   }\n                   xTexelC${r}Ready = 1;\n                 }\n\n                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${r+1}Ready == 0) {\n                   xTexelC${r+1} = getX(batch, xR, xC + 1, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xC + 2 >= inDims[1]) {\n                     xTexelC${r+1}.zw = vec2(0.0);\n                   }\n                   xTexelC${r+1}Ready = 1;\n                 }\n\n                 xC${r} = vec4(xTexelC${r}.zw, xTexelC${r+1}.zw);\n               `,r+1<l&&(d+=`\n                   final = vec4(0.0);\n                   xCOffset = xC + 1 + strides[1];\n                   if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                     final = getX(batch, xR, xCOffset, d1);\n                   }\n                   xC${r+1} = vec4(xTexelC${r+1}.xy, final.xy);\n                 `)):(d+=`\n                 if(xC >= 0 && xC < inDims[1] && xTexelC${r}Ready == 0) {\n                   xTexelC${r} = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC${r}.zw = vec2(0.0);\n                   }\n                   xTexelC${r}Ready = 1;\n                 }\n\n                 xCOffset = xC + strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${r+1}Ready == 0) {\n                   xTexelC${r+1} = getX(batch, xR, xCOffset, d1);\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC${r+1}.zw = vec2(0.);\n                   }\n                   xTexelC${r+1}Ready = 1;\n                 }\n\n                 xC${r} = vec4(\n                   xTexelC${r}.xy, xTexelC${r+1}.xy);\n               `,r+1<l&&(d+=`\n                   xC${r+1} = vec4(xTexelC${r}.zw, xTexelC${r+1}.zw);\n                 `)));r<l&&(d+=`\n             wTexel = getW(r, ${r}, d1, d2);\n             dotProd += xC${r}.xxzz * vec4(wTexel.xy, wTexel.xy);\n             if(d1 + 1 < ${e.inChannels}) {\n               dotProd += xC${r}.yyww * vec4(wTexel.zw, wTexel.zw);\n             }\n           `,r+1<l&&(d+=`\n               wTexel = getW(r, ${r+1}, d1, d2);\n               dotProd += xC${r+1}.xxzz * vec4(wTexel.xy, wTexel.xy);\n               if(d1 + 1 < ${e.inChannels}) {\n                 dotProd += xC${r+1}.yyww * vec4(wTexel.zw, wTexel.zw);\n               }\n             `))}d+="\n     }\n   ",d+="\n     }\n   ",d+="\n     }\n   ";let c="",g="";r&&(c=n?`vec4 activation(vec4 a) {\n           vec4 b = getPreluActivationWeightsAtOutCoords();\n           ${r}\n         }`:o?`vec4 activation(vec4 a) {\n           vec4 b = getLeakyreluAlphaAtOutCoords();\n           ${r}\n         }`:`vec4 activation(vec4 x) {\n           ${r}\n         }`,g="result = activation(result);");const h=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),n&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n       ${c}\n\n       void main() {\n         ivec4 coords = getOutputCoords();\n         int batch = coords.x;\n         ivec2 xRCCorner = coords.yz * strides - pads;\n         int d2 = coords.w;\n         int xRCorner = xRCCorner.x;\n         int xCCorner = xRCCorner.y;\n\n         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n         vec4 dotProd = vec4(0.000000000000001);\n\n         ${d}\n\n         vec4 result = dotProd - vec4(0.000000000000001);\n         ${h}\n         ${g}\n         setOutput(result);\n       }\n     `}}class Gv{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=wb(this.outputShape.length);const{dataFormat:r}=t,n=eb(),o="channelsLast"===r,a=o?1:2,i=o?2:3,s=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let p="";for(let e=0;e<=1;e++)for(let t=0;t<=1;t++)p+=`\n          blockIndex = rc.z + ${t};\n          pos = rc.y + ${e};\n\n          ${s}\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[${a}] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[${i}] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (${o}) {\n                  innerDims = vec2(d1, ch);\n                  result[${2*e+t}] = getChannel(\n                    getA(rc.x, d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[${2*e+t}] = getChannel(\n                    getA(rc.x, ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        `;this.userCode=`\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ${p}\n\n        ${n.output} = result;\n      }\n    `}}class Wv{constructor(e,t,r,n=!1,o=!1,a=!1,i=null,s=!1,p=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=wb(this.outputShape.length);const l=n?e[1]:e[2],u=Math.ceil(l/2),d=n?"i * 2, rc.y":"rc.y, i * 2",c=o?"rc.z, i * 2":"i * 2, rc.z",g=n?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],h=o?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let f="",m="";i&&(f=s?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${i}\n        }`:p?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${i}\n        }`:`vec4 activation(vec4 x) {\n          ${i}\n        }`,m="result = activation(result);");const y=a?"result += getBiasAtOutCoords();":"";a&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),p&&this.variableNames.push("leakyreluAlpha");let b="rc.x",_="rc.x";e[0]<t[0]?b=`imod(rc.x, ${e[0]})`:t[0]<e[0]&&(_=`imod(rc.x, ${t[0]})`),this.userCode=`\n      ${f}\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ${u}.0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        int batchA = ${b};\n        int batchB = ${_};\n        for (int i = 0; i < ${u}; i++) {\n          vec4 a = getMatrixA(batchA, ${d});\n          vec4 b = getMatrixB(batchB, ${c});\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (${g[0]} * ${h[0]});\n          result += (${g[1]} * ${h[1]});\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ${y}\n\n        ${m}\n\n        setOutput(result);\n      }\n    `}}const zv={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class Uv{constructor(e,t,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Ns(t,r),this.userCode=`\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ${e}\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    `}}const $v="return a * b;";function Hv(e){const{inputs:t,backend:r}=e,{a:n,b:o}=t,a=ea(n.dtype,o.dtype);if("complex64"===n.dtype){const e=r.texData.get(n.dataId),t=r.texData.get(o.dataId),a=new Uv(zv.REAL,n.shape,o.shape),i=new Uv(zv.IMAG,n.shape,o.shape),s=[{dataId:e.complexTensorInfos.real.dataId,dtype:e.complexTensorInfos.real.dtype,shape:n.shape},{dataId:e.complexTensorInfos.imag.dataId,dtype:e.complexTensorInfos.imag.dtype,shape:n.shape},{dataId:t.complexTensorInfos.real.dataId,dtype:t.complexTensorInfos.real.dtype,shape:o.shape},{dataId:t.complexTensorInfos.imag.dataId,dtype:t.complexTensorInfos.imag.dtype,shape:o.shape}],p=r.runWebGLProgram(a,s,"float32"),l=r.runWebGLProgram(i,s,"float32"),u=yv({inputs:{real:p,imag:l},backend:r});return r.disposeIntermediateTensorInfo(p),r.disposeIntermediateTensorInfo(l),u}if(r.shouldExecuteOnCPU([n,o])){const e=r.texData.get(n.dataId),t=r.texData.get(o.dataId),[i,s]=n_(n.shape,o.shape,e.values,t.values,a),p=r.makeTensorInfo(s,a);return r.texData.get(p.dataId).values=i,p}let i;return i=It().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new _v($v,n.shape,o.shape):new bv($v,n.shape,o.shape),r.runWebGLProgram(i,[n,o],a)}const Vv={kernelName:Ir,backendName:"webgl",kernelFunc:Hv};class Kv{constructor(e,t){this.variableNames=["x"];const{windowSize:r,batchSize:n,inSize:o,outSize:a}=e;this.outputShape=[n,a];const i=4*Math.floor(r/4),s=r%4;let p="sumValue += dot(values, ones);";if(null!=t){const e=1/t;p=`sumValue += dot(values * ${at(e)?e.toPrecision(2):e}, ones);`}let l="";o%r>0&&(l=`\n        if (inIdx < 0 || inIdx >= ${o}) {\n          return 0.0;\n        }\n      `),this.userCode=`\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${l}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${r};\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${i}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${p}\n        }\n\n        int inIdx = inOffset + ${i};\n        if (${1===s}) {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ${p}\n        } else if (${2===s}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ${p}\n        } else if (${3===s}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ${p}\n        }\n        setOutput(sumValue);\n      }\n    `}}class Yv{constructor(e,t){this.variableNames=["x"];const{windowSize:r,batchSize:n,inSize:o,outSize:a}=e;this.outputShape=[n,a];let i="0.0",s="";"prod"===t?i="1.0":"min"===t?(i="1.0 / 1e-20",s="min"):"max"===t&&(i="-1.0 / 1e-20",s="max");let p=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"sum"===t?p="sumValue":"prod"===t?p="prodValue":"all"===t?p="allValue":"any"===t&&(p="anyValue");const l=4*Math.floor(r/4),u=r%4;let d=`\n      if (${"sum"===t}) {\n        sumValue += dot(values, ones);\n      } else if (${"prod"===t}) {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ${s}(values, minMaxValue);\n        if (${"min"===t} || ${"max"===t}) {\n          minMaxValue = ${s}(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    `,c="vec4";"all"===t?(i="1.0",d="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",c="bvec4"):"any"===t&&(i="0.0",d="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",c="bvec4");let g="";o%r>0&&(g=`\n        if (inIdx < 0 || inIdx >= ${o}) {\n          return initializationValue;\n        }\n      `),this.userCode=`\n      const float initializationValue = ${i};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${g}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${r};\n\n        vec4 minMaxValue = vec4(${i});\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ${l}; i += 4) {\n          int inIdx = inOffset + i;\n          ${c} values = ${c}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${d}\n        }\n\n        int inIdx = inOffset + ${l};\n        if (${1===u}) {\n          ${c} values = ${c}(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ${d}\n        } else if (${2===u}) {\n          ${c} values = ${c}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ${d}\n        } else if (${3===u}) {\n          ${c} values = ${c}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ${d}\n        }\n        setOutput(${p});\n      }\n    `}}function Xv(e,t,r,n){const o=function(e){const t=[];for(;0===t.length||1!==t[t.length-1].outSize;){const r=t.length?t[t.length-1].outSize:e[1],n=Fg(r);t.push({inSize:r,windowSize:n,outSize:Math.ceil(r/n)})}return t}(e.shape);let a=e;for(let i=0;i<o.length;i++){const{inSize:s,windowSize:p,outSize:l}=o[i];let u,d;u="mean"===r?0===i?new Kv({windowSize:p,inSize:s,batchSize:e.shape[0],outSize:l},s):new Kv({windowSize:p,inSize:s,batchSize:e.shape[0],outSize:l}):new Yv({windowSize:p,inSize:s,batchSize:e.shape[0],outSize:l},r),d=a,a=n.runWebGLProgram(u,[a],t),d.dataId!==e.dataId&&n.disposeIntermediateTensorInfo(d)}return a}class qv{constructor(e,t){this.variableNames=["A"];const r=new Array(e.length);for(let n=0;n<r.length;n++)r[n]=e[t[n]];this.outputShape=r,this.rank=r.length;const n=fb(this.rank),o=function(e){const t=e.length;if(t>6)throw Error(`Transpose for rank ${t} is not yet supported`);const r=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],n=new Array(t);for(let t=0;t<e.length;t++)n[e[t]]=r[t];return n.join()}(t);this.userCode=`\n    void main() {\n      ${n} resRC = getOutputCoords();\n      setOutput(getA(${o}));\n    }\n    `}}class Jv{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let n=0;n<r.length;n++)r[n]=e[t[n]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const n=fb(this.rank),o=M_("rc",this.rank),a=new Array(this.rank);for(let e=0;e<t.length;e++)a[t[e]]=o[e];const i=`vec2(${a.slice(-2).join()})`,s=`++${o[this.rank-1]} < ${r[this.rank-1]}`,p=`getChannel(getA(${a.join()}), ${i})`;this.userCode=`\n    void main() {\n      ${n} rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ${p};\n      if(${s}) {\n        result[1] = ${p};\n      }\n      --${o[this.rank-1]};\n      if(++${o[this.rank-2]} < ${r[this.rank-2]}) {\n        result[2] = ${p};\n        if(${s}) {\n          result[3] = ${p};\n        }\n      }\n      setOutput(result);\n    }\n    `}}function Qv(e,t,r){const n=It().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Jv(e.shape,t):new qv(e.shape,t);return r.runWebGLProgram(n,[e],e.dtype)}function Zv(e){const{inputs:t,backend:r,attrs:n}=e,{x:o}=t,{axis:a,keepDims:i}=n;return function(e,t,r,n){const o=t,a=e.shape.length,i=ut(o,e.shape);let s=i;const p=Nl(s,a),l=null!=p;let u=e;l&&(u=Qv(e,p,n),s=jl(s.length,a)),Ll("sum",s,a);const[d,c]=Bl(u.shape,s);let g=d;r&&(g=Dl(d,i));const h=nt(c),f=pv({inputs:{x:u},attrs:{shape:[nt(e.shape)/h,h]},backend:n}),m=Xv(f,ea(e.dtype,"int32"),"sum",n),y=pv({inputs:{x:m},attrs:{shape:g},backend:n});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),l&&n.disposeIntermediateTensorInfo(u),y}(o,a,i,r)}function ew(e){const{inputs:t,backend:r,attrs:n}=e,{x:o}=t,{perm:a}=n,i=r,s=o.shape.length,p=new Array(s);for(let e=0;e<p.length;e++)p[e]=o.shape[a[e]];let l;if(i.shouldExecuteOnCPU([o])){const e=i.texData.get(o.dataId).values,t=E_(e,o.shape,o.dtype,a,p);l=i.makeTensorInfo(p,o.dtype),i.texData.get(l.dataId).values=t}else l=Qv(o,a,i);return l}const tw=1e3;function rw({a:e,b:t,transposeA:r,transposeB:n,backend:o,bias:a=null,preluActivationWeights:i=null,leakyreluAlpha:s=0,activation:p=null}){const l=e.shape.length,u=t.shape.length,d=r?e.shape[l-2]:e.shape[l-1],c=n?t.shape[u-1]:t.shape[u-2],g=r?e.shape[l-1]:e.shape[l-2],h=n?t.shape[u-2]:t.shape[u-1],f=e.shape.slice(0,-2),m=t.shape.slice(0,-2),y=nt(f),b=nt(m),_=Ns(e.shape.slice(0,-2),t.shape.slice(0,-2)).concat([g,h]);et(d===c,(()=>`Error in matMul: inner shapes (${d}) and (${c}) of Tensors with shapes ${e.shape} and ${t.shape} and transposeA=${r} and transposeB=${n} must match.`));const v=r?[y,d,g]:[y,g,d],w=n?[b,h,c]:[b,c,h],k=pv({inputs:{x:e},backend:o,attrs:{shape:v}}),T=pv({inputs:{x:t},backend:o,attrs:{shape:w}}),O=[k,T],x=Math.max(y,b),S=r?k.shape[1]:k.shape[2],E=null!=a,F=null!=i,M="leakyrelu"===p,R=null!=p?Ev(p,!0):null;let C;if((1===g||1===h)&&S>tw&&!1===(E||F||M||null!=R)){let e=k,t=T;r&&(e=ew({inputs:{x:k},backend:o,attrs:{perm:[0,2,1]}}),O.push(e)),n&&(t=ew({inputs:{x:T},backend:o,attrs:{perm:[0,2,1]}}),O.push(t));const a=1===h;let i=e;1!==h&&(i=pv({inputs:{x:e},backend:o,attrs:{shape:[x,S,1]}}),O.push(i));const s=1===h?2:1;let p=t;a&&(p=pv({inputs:{x:t},backend:o,attrs:{shape:[x,1,S]}}),O.push(p));const l=Hv({inputs:{a:i,b:p},backend:o});C=Zv({inputs:{x:l},backend:o,attrs:{axis:s,keepDims:!0}}),O.push(l)}else{const p=ea(e.dtype,t.dtype),l=new Wv(v,w,[x,g,h],r,n,E,R,F,M),u=[k,T];if(null!=a&&u.push(a),F&&u.push(i),M){const e=o.makeTensorInfo([],"float32",xo(s,"float32"));u.push(e),O.push(e)}C=o.runWebGLProgram(l,u,p)}const I=pv({inputs:{x:C},backend:o,attrs:{shape:_}});O.push(C);for(const e of O)o.disposeIntermediateTensorInfo(e);return I}function nw(e,t){const r=e.length;return r>=3?t?[...e.slice(0,-3),e[r-3]*e[r-2],e[r-1]]:[...e.slice(0,-3),e[r-3],e[r-2]*e[r-1]]:!t&&1===r&&e[0]>1?[e[0],1]:null}function ow({x:e,filter:t,convInfo:r,backend:n,bias:o=null,preluActivationWeights:a=null,leakyreluAlpha:i=0,activation:s=null}){const p=e.shape,l=n.texData.get(e.dataId),u=r.inChannels,d=p[0]*p[1]*p[2],c=r.outChannels,g="channelsLast"===r.dataFormat;let h;const f=[];if(null!=a){const e=nw(a.shape,g);null!=e&&(a=pv({inputs:{x:a},backend:n,attrs:{shape:e}}),f.push(a))}if(null!=o){const e=nw(o.shape,g);null!=e&&(o=pv({inputs:{x:o},backend:n,attrs:{shape:e}}),f.push(o))}if((1!==d&&1!==c||!(u>tw))&&l.isPacked&&g&&null!=l.texture&&p[2]%2!=0&&ot(l.shape.slice(-3),p.slice(-3))){const u=p[0]*p[1]*(p[2]+1),d={dataId:e.dataId,shape:[1,u,r.inChannels],dtype:e.dtype},c=l.shape;l.shape=l.shape.slice(),l.shape[l.shape.length-2]++,et(Ky(l.shape,d.shape),(()=>`packed reshape ${l.shape} to ${d.shape} isn't free`));const g=pv({inputs:{x:t},backend:n,attrs:{shape:[1,r.inChannels,r.outChannels]}});f.push(g);const m=rw({a:d,b:g,backend:n,transposeA:!1,transposeB:!1,bias:o,activation:s,preluActivationWeights:a,leakyreluAlpha:i}),y=n.texData.get(m.dataId);et(y.isPacked,(()=>"batchMatMul result is expected to be packed")),l.shape=c,y.shape=r.outShape,h=fv({inputs:{x:m},backend:n}),h.shape=r.outShape,f.push(m)}else{const p=r.outHeight*r.outWidth,l=pv({inputs:{x:e},backend:n,attrs:{shape:g?[r.batchSize,p,r.inChannels]:[r.batchSize,r.inChannels,p]}}),u=pv({inputs:{x:t},backend:n,attrs:{shape:[1,r.inChannels,r.outChannels]}}),d=rw({a:g?l:u,b:g?u:l,transposeA:!g,transposeB:!1,backend:n,bias:o,activation:s,preluActivationWeights:a,leakyreluAlpha:i});h=pv({inputs:{x:d},backend:n,attrs:{shape:r.outShape}}),f.push(l),f.push(u),f.push(d)}for(const e of f)n.disposeIntermediateTensorInfo(e);return h}function aw({x:e,filter:t,convInfo:r,backend:n,bias:o=null,preluActivationWeights:a=null,leakyreluAlpha:i=0,activation:s=null}){const{filterWidth:p,filterHeight:l,inChannels:u,outWidth:d,outHeight:c,dataFormat:g}=r,h="channelsLast"===g,f=p*l*u,m=c*d,y=[r.batchSize,f,m],b=[];if(null!=a){const e=nw(a.shape,h);null!=e&&(a=pv({inputs:{x:a},backend:n,attrs:{shape:e}}),b.push(a))}if(null!=o){const e=nw(o.shape,h);null!=e&&(o=pv({inputs:{x:o},backend:n,attrs:{shape:e}}),b.push(o))}const _=pv({inputs:{x:t},backend:n,attrs:{shape:[1,f,nt(t.shape)/f]}});b.push(_);const v=new Gv(y,r),w=[e.shape,[r.padInfo.top,r.padInfo.left],[r.strideHeight,r.strideWidth],[r.dilationHeight,r.dilationWidth],[r.inChannels],[r.filterWidth*r.inChannels],[r.outWidth]],k=n.runWebGLProgram(v,[e],"float32",w),T=pv({inputs:{x:k},backend:n,attrs:{shape:y}});b.push(k),b.push(T);const O=null!=o,x=null!=a,S="leakyrelu"===s,E=s?Ev(s,!0):null,F=new Wv(h?T.shape:_.shape,h?_.shape:T.shape,h?[r.batchSize,m,r.outChannels]:[r.batchSize,r.outChannels,m],!0,!1,O,E,x,S),M=h?[T,_]:[_,T];if(o&&M.push(o),x&&M.push(a),S){const e=n.makeTensorInfo([],"float32",xo(i,"float32"));M.push(e),b.push(e)}const R=n.runWebGLProgram(F,M,"float32"),C=pv({inputs:{x:R},backend:n,attrs:{shape:r.outShape}});b.push(R);for(const e of b)n.disposeIntermediateTensorInfo(e);return C}const iw={kernelName:Xt,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:r,attrs:n}=e,{x:o,filter:a}=t,{strides:i,pad:s,dataFormat:p,dilations:l,dimRoundingMode:u}=n,d=Dp(p),c=xp(o.shape,a.shape,i,l,s,u,!1,d);let g;if(1!==c.filterHeight||1!==c.filterWidth||1!==c.dilationHeight||1!==c.dilationWidth||1!==c.strideHeight||1!==c.strideWidth||"SAME"!==c.padInfo.type&&"VALID"!==c.padInfo.type)if(c.strideWidth<=2&&"channelsLast"===d&&It().getBool("WEBGL_EXP_CONV")){const e=new jv(c),t=[[c.padInfo.top,c.padInfo.left],[c.strideHeight,c.strideWidth],[c.dilationHeight,c.dilationWidth],[c.inHeight,c.inWidth]];g=r.runWebGLProgram(e,[o,a],"float32",t)}else if(It().getBool("WEBGL_CONV_IM2COL"))g=aw({x:o,filter:a,convInfo:c,backend:r});else{const e=new Pv(c);g=r.runWebGLProgram(e,[o,a],"float32")}else g=ow({x:o,filter:a,convInfo:c,backend:r});const h=pv({inputs:{x:g},backend:r,attrs:{shape:c.outShape}});return r.disposeIntermediateTensorInfo(g),h}},sw={kernelName:Rn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:r,attrs:n}=e,{x:o,filter:a,bias:i,preluActivationWeights:s}=t,{strides:p,pad:l,dataFormat:u,dilations:d,dimRoundingMode:c,activation:g,leakyreluAlpha:h}=n,f=Dp(u),m=xp(o.shape,a.shape,p,d,l,c,!1,f);let y;const b=[],_=null!=i,v=null!=s,w="leakyrelu"===g,k=()=>{const e=[o,a],t=(e,t)=>{if("NCHW"===t&&1===e.shape.length&&1!==e.shape[0]){const t=pv({inputs:{x:e},backend:r,attrs:{shape:[e.shape[0],1,1]}});return b.push(t),t}return e};if(_&&e.push(t(i,u)),v&&e.push(t(s,u)),w){const t=r.makeTensorInfo([],"float32",xo(h,"float32"));e.push(t),b.push(t)}return e};if(1!==m.filterHeight||1!==m.filterWidth||1!==m.dilationHeight||1!==m.dilationWidth||1!==m.strideHeight||1!==m.strideWidth||"SAME"!==m.padInfo.type&&"VALID"!==m.padInfo.type)if(m.strideWidth<=2&&"channelsLast"===f&&It().getBool("WEBGL_EXP_CONV")){const e=g?Ev(g,!0):null,t=new jv(m,_,e,v,w),n=[[m.padInfo.top,m.padInfo.left],[m.strideHeight,m.strideWidth],[m.dilationHeight,m.dilationWidth],[m.inHeight,m.inWidth]],o=k();y=r.runWebGLProgram(t,o,"float32",n)}else if(It().getBool("WEBGL_CONV_IM2COL"))y=aw({x:o,filter:a,convInfo:m,backend:r,bias:i,activation:g,preluActivationWeights:s,leakyreluAlpha:h});else{const e=g?Ev(g,!1):null,t=new Pv(m,_,e,v,w),n=k();y=r.runWebGLProgram(t,n,"float32")}else y=ow({x:o,filter:a,convInfo:m,backend:r,bias:i,activation:g,preluActivationWeights:s,leakyreluAlpha:h});const T=pv({inputs:{x:y},backend:r,attrs:{shape:m.outShape}});return b.push(y),b.forEach((e=>r.disposeIntermediateTensorInfo(e))),T}};class pw{constructor(e,t=!1,r=null,n=!1,o=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=wb(this.outputShape.length);const a=e.filterHeight,i=e.filterWidth,s=e.outChannels/e.inChannels;let p="",l="";r&&(p=n?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${r}\n        }`:o?`float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ${r}\n        }`:`\n          float activation(float x) {\n            ${r}\n          }\n        `,l="result = activation(result);");const u=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),n&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${p}\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${s};\n        int q = d2 - d1 * ${s};\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ${a}; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${i}; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ${u}\n        ${l}\n        setOutput(result);\n      }\n    `}}class lw{constructor(e,t=!1,r=null,n=!1,o=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=wb(this.outputShape.length);const a=e.outChannels/e.inChannels,i=e.padInfo.left,s=e.strideWidth,p=e.dilationWidth,l=e.filterHeight,u=e.filterWidth,d=u;let c="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;";for(let e=0;e<u;e++)c+=`\n          vec4 xTexelC${2*e};\n          int xTexelC${2*e}Ready;\n          vec4 xTexelC${2*e+1};\n          int xTexelC${2*e+1}Ready;\n          vec4 xC${e};`;c+=`\n    for (int r = 0; r < ${l}; r++) {\n      `;for(let e=0;e<u;e++)c+=`\n          xTexelC${2*e} = vec4(0.0);\n          xTexelC${2*e}Ready = 0;\n          xTexelC${2*e+1} = vec4(0.0);\n          xTexelC${2*e+1}Ready = 0;\n          xC${e} = vec4(0.0);`;c+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(let e=0;e<(d+1)/2;e++){const t=2*e;if(c+=`\n          xC = xCCorner + ${t*p};\n          `,1===s){if(t<u&&(i%2==1?(c+=`\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t}Ready == 0) {\n                  xTexelC${t} = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${t}.zw = vec2(0.0);\n                  }\n                  xTexelC${t}Ready = 1;\n                }\n              `,c+=1===p&&t>0?`\n                xC${t} = vec4(xTexelC${t-2}.zw, xTexelC${t}.xy);\n                `:`\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC${t} = vec4(previous.zw, xTexelC${t}.xy);\n                  } else {\n                    xC${t} = vec4(0.0, 0.0, xTexelC${t}.xy);\n                  }\n                  `):c+=`\n                if (xC >= 0 && xC < inDims[1] && xTexelC${t}Ready == 0) {\n                  xTexelC${t} = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC${t}.zw = vec2(0.0);\n                  }\n                  xTexelC${t}Ready = 1;\n                }\n\n                xC${t} = xTexelC${t};\n                `,t+1<u)){const e=i%2==0?Qe(p):p;p%2==0&&i%2==1||p%2!=0&&i%2!=1?(c+=`\n                  xCOffset = xC + imod(pads[1], 2) + ${e};\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t+1}Ready == 0) {\n                    xTexelC${t+1} = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC${t+1}.zw = vec2(0.0);\n                    }\n                    xTexelC${t+1}Ready = 1;\n                  }\n                  `,c+=p>1?`\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n                     xC${t+1} = vec4(previous.zw, xTexelC${t+1}.xy);\n                    } else {\n                     xC${t+1} = vec4(0.0, 0.0, xTexelC${t+1}.xy);\n                    }\n                    `:`\n                    xC${t+1} = vec4(xTexelC${t}.zw, xTexelC${t+1}.xy);\n                    `):c+=1===e?`\n                    xC${t+1} = xTexelC${t};\n                    `:`\n                    xCOffset = xC + ${e};\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t+1}Ready == 0) {\n                      xTexelC${t+1} = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC${t+1}.zw = vec2(0.0);\n                      }\n                      xTexelC${t+1}Ready = 1;\n                    }\n\n                    xC${t+1} = xTexelC${t+1};\n                    `}}else t<u&&(i%2==1?(c+=`\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t}Ready == 0) {\n                  xTexelC${t} = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${t}.zw = vec2(0.0);\n                  }\n                  xTexelC${t}Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${t+1}Ready == 0) {\n                  xTexelC${t+1} = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC${t+1}.zw = vec2(0.0);\n                  }\n                  xTexelC${t+1}Ready = 1;\n                }\n\n                xC${t} = vec4(xTexelC${t}.zw, xTexelC${t+1}.zw);\n              `,t+1<u&&(c+=`\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC${t+1} = vec4(xTexelC${t+1}.xy, final.xy);\n                `)):(c+=`\n                if(xC >= 0 && xC < inDims[1] && xTexelC${t}Ready == 0) {\n                  xTexelC${t} = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC${t}.zw = vec2(0.0);\n                  }\n                  xTexelC${t}Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t+1}Ready == 0) {\n                  xTexelC${t+1} = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${t+1}.zw = vec2(0.);\n                  }\n                  xTexelC${t+1}Ready = 1;\n                }\n\n                xC${t} = vec4(\n                  xTexelC${t}.xy, xTexelC${t+1}.xy);\n              `,t+1<u&&(c+=`\n                  xC${t+1} = vec4(xTexelC${t}.zw, xTexelC${t+1}.zw);\n                `)));t<u&&(c+=`\n            wTexel = getW(r, ${t}, d1, q);\n            dotProd += xC${t} * vec4(wTexel.xz, wTexel.xz);\n          `,t+1<u&&(c+=`\n              wTexel = getW(r, ${t+1}, d1, q);\n              dotProd += xC${t+1} * vec4(wTexel.xz, wTexel.xz);\n            `))}c+="\n    }\n  ",c+="\n      }\n    ";let g="",h="";r&&(g=n?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${r}\n        }`:o?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${r}\n        }`:`vec4 activation(vec4 x) {\n          ${r}\n        }`,h="result = activation(result);");const f=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),n&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${g}\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${a};\n        int q = d2 - d1 * ${a};\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ${c}\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ${f}\n        ${h}\n        setOutput(result);\n      }\n    `}}const uw={kernelName:Cn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:r,attrs:n}=e,{x:o,filter:a,bias:i,preluActivationWeights:s}=t,{strides:p,pad:l,dilations:u,dimRoundingMode:d,activation:c,leakyreluAlpha:g}=n,h=[];let f=u;null==f&&(f=[1,1]),et(Ap(p,f),(()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${p} and dilations '${f}'`));const m=xp(o.shape,a.shape,p,f,l,d,!0),y=It().getBool("WEBGL_PACK_DEPTHWISECONV")&&m.strideWidth<=2&&m.outChannels/m.inChannels==1,b=c?Ev(c,y):null,_=[o,a],v=null!=i,w=null!=s,k="leakyrelu"===c;if(v&&_.push(i),w&&_.push(s),k){const e=r.makeTensorInfo([],"float32",xo(g,"float32"));_.push(e),h.push(e)}let T;T=y?new lw(m,v,b,w,k):new pw(m,v,b,w,k);const O=[[m.padInfo.top,m.padInfo.left],[m.strideHeight,m.strideWidth],[m.dilationHeight,m.dilationWidth],[m.inHeight,m.inWidth]],x=r.runWebGLProgram(T,_,"float32",O);return h.forEach((e=>r.disposeIntermediateTensorInfo(e))),x}},dw="return a + b;",cw=Sv({opSnippet:dw,packedOpSnippet:dw,supportsComplex:!0,cpuKernelImpl:Lb}),gw={kernelName:Nt,backendName:"webgl",kernelFunc:cw},hw={kernelName:an,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:r,attrs:n}=e,{x:o}=t,{blockShape:a,paddings:i}=n;et(o.shape.length<=4,(()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"));const s=a.reduce(((e,t)=>e*t)),p=[[0,0]];p.push(...i);for(let e=1+a.length;e<o.shape.length;++e)p.push([0,0]);const l=[],u=Lv({inputs:{x:o},backend:r,attrs:{paddings:p,constantValue:0}}),d=Rg(u.shape,a,s,!1),c=Cg(d.length,a.length,!1),g=Ig(u.shape,a,s,!1),h=pv({inputs:{x:u},backend:r,attrs:{shape:d}}),f=ew({inputs:{x:h},backend:r,attrs:{perm:c}}),m=pv({inputs:{x:f},backend:r,attrs:{shape:g}});return l.push(u),l.push(h),l.push(f),l.forEach((e=>r.disposeIntermediateTensorInfo(e))),m}},fw={kernelName:rr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:r,attrs:n}=e,{x:o,filter:a}=t,{strides:i,pad:s,dilations:p,dimRoundingMode:l}=n;let u=p;null==u&&(u=[1,1]),et(Ap(i,u),(()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`));const d=xp(o.shape,a.shape,i,u,s,l,!0);let c;c=It().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels==1?new lw(d):new pw(d);const g=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return r.runWebGLProgram(c,[o,a],"float32",g)}};class mw{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const t=fb(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=function(e){if(1===e)return"sourceLoc";if(e<=6)return yw.slice(0,e).map((e=>"sourceLoc."+e)).join(",");throw Error(`Slicing for rank ${e} is not yet supported`)}(this.rank);let n;const o=e.map(((e,t)=>`sourceLoc.${yw[t]} = start[${t}] + coords.${yw[t]};`));n=`\n        ${t} sourceLoc;\n        ${t} coords = getOutputCoords();\n        ${o.join("\n")}\n      `,this.userCode=`\n      void main() {\n        ${n}\n        setOutput(getSource(${r}));\n      }\n    `}}const yw=["x","y","z","w","u","v"];class bw{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const t=fb(this.rank),r=R_("coords",this.rank),n=R_("sourceLoc",this.rank),o=1===this.rank?"sourceLoc":`vec2(${n.slice(-2).join()})`,a=`getChannel(getSource(${n.join()}), ${o})`,i=`\n      result.x = ${a};\n      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {\n        ++${n[this.rank-1]};\n        result.y = ${a};\n        --${n[this.rank-1]};\n      }\n    `,s=1===this.rank?"":`\n      --${r[this.rank-1]};\n      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {\n        ++${n[this.rank-2]};\n        result.z = ${a};\n        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {\n          ++${n[this.rank-1]};\n          result.w = ${a};\n        }\n      }\n    `,p=this.rank<=4?`sourceLoc = coords +\n            ${t}(${e.map(((e,t)=>`start[${t}]`)).join()});`:e.map(((e,t)=>`${n[t]} = ${r[t]} + start[${t}];`)).join("\n");this.userCode=`\n      void main() {\n        ${t} coords = getOutputCoords();\n        ${t} sourceLoc;\n        ${p}\n        vec4 result = vec4(0.);\n        ${i}\n        ${s}\n        setOutput(result);\n      }\n    `}}function _w(e){const{inputs:t,backend:r,attrs:n}=e,{x:o}=t,{begin:a,size:i}=n,[s,p]=np(o,a,i);if(Hs(o,s,p),0===nt(p))return r.makeTensorInfo(p,o.dtype,[]);if(r.shouldExecuteOnCPU([o])||"string"===o.dtype){const e=r.texData.get(o.dataId),t=f_(e.values,s,p,o.shape,o.dtype);return r.makeTensorInfo(p,o.dtype,t)}const{isPacked:l}=r.texData.get(o.dataId),u=tp(o.shape,s,p);if(l||!u){const e=It().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new bw(p):new mw(p),t=[s];return r.runWebGLProgram(e,[o],o.dtype,t)}return r.uploadToGPU(o.dataId),function(e,t,r,n){const o=n.texData.get(e.dataId),a=n.makeTensorInfo(r,e.dtype),i=n.texData.get(a.dataId);Object.assign(i,o),i.refCount=1,i.shape=r,i.dtype=e.dtype;let s=rp(t,vt(e.shape));o.slice&&(s+=o.slice.flatOffset),i.slice={flatOffset:s,origDataId:o.slice&&o.slice.origDataId||e.dataId};const p=n.dataRefCount.get(i.slice.origDataId)||1;return n.dataRefCount.set(i.slice.origDataId,p+1),a}(o,s,p,r)}const vw={kernelName:tn,backendName:"webgl",kernelFunc:_w},ww={kernelName:$t,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:r,attrs:n}=e,{x:o}=t,{blockShape:a,crops:i}=n;et(o.shape.length<=4,(()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"));const s=a.reduce(((e,t)=>e*t)),p=Rg(o.shape,a,s),l=Cg(p.length,a.length),u=Ig(o.shape,a,s),d=Ag(i,a.length),c=Bg(u,i,a.length),g=[],h=pv({inputs:{x:o},backend:r,attrs:{shape:p}}),f=ew({inputs:{x:h},backend:r,attrs:{perm:l}}),m=pv({inputs:{x:f},backend:r,attrs:{shape:u}}),y=_w({inputs:{x:m},backend:r,attrs:{begin:d,size:c}});return g.push(h),g.push(f),g.push(m),g.forEach((e=>r.disposeIntermediateTensorInfo(e))),y}},kw=xv({opSnippet:P_+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),Tw={kernelName:Xr,backendName:"webgl",kernelFunc:kw};class Ow{constructor(e,t,r){this.variableNames=["x"],this.outputShape=r;const n=r.length,o=fb(r.length),a=fb(r.length);let i="";if(1===n)i="coords * strides + begin";else{let e=0;i=r.map(((t,n)=>(e++,1===r.length?`coords * strides[${n}] + begin[${n}]`:`coords[${e-1}] * strides[${n}] + begin[${n}]`))).join(",")}this.userCode=`\n      ${o} begin = ${o}(${e});\n      ${o} strides = ${o}(${t});\n\n      void main() {\n        ${a} coords = getOutputCoords();\n        setOutput(getX(${i}));\n      }\n    `}}const xw={kernelName:hn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:r,attrs:n}=e,{x:o}=t,{begin:a,end:i,strides:s,beginMask:p,endMask:l,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:c}=n,{finalShapeSparse:g,finalShape:h,isIdentity:f,sliceDim0:m,isSimpleSlice:y,begin:b,end:_,strides:v}=op(o.shape,a,i,s,p,l,u,d,c);let w;if(f)w=pv({inputs:{x:o},backend:r,attrs:{shape:h}});else if(m||y){et(o.shape.length>=1,(()=>`Input must have rank at least 1, got: ${o.shape.length}`));const e=Vs(b,_,v),t=_w({inputs:{x:o},backend:r,attrs:{begin:b,size:e}});w=pv({inputs:{x:t},backend:r,attrs:{shape:h}}),r.disposeIntermediateTensorInfo(t)}else if(r.shouldExecuteOnCPU([o])){const e=r.readSync(o.dataId),t=el(o.shape,o.dtype,e),n=v_(g,t,v,b);w=r.makeTensorInfo(h,o.dtype,n.values)}else{const e=new Ow(b,v,g);w=r.runWebGLProgram(e,[o],o.dtype)}const k=pv({inputs:{x:w},backend:r,attrs:{shape:h}});return r.disposeIntermediateTensorInfo(w),k}};class Sw{constructor(e){this.outputShape=[],this.outputShape=wg(e,1),this.variableNames=e.map(((e,t)=>`T${t}`));const t=new Array(e.length-1);t[0]=e[0][1];for(let r=1;r<t.length;r++)t[r]=t[r-1]+e[r][1];const r=[`if (yC < ${t[0]}) setOutput(getT0(yR, yC));`];for(let e=1;e<t.length;e++){const n=t[e-1];r.push(`else if (yC < ${t[e]}) setOutput(getT${e}(yR, yC-${n}));`)}const n=t.length,o=t[t.length-1];r.push(`else setOutput(getT${n}(yR, yC-${o}));`),this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ${r.join("\n        ")}\n      }\n    `}}class Ew{constructor(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=wg(e,t);const r=this.outputShape,n=r.length,o=fb(n),a=R_("coords",n),i=["x","y","z","w","u","v"].slice(0,n);this.variableNames=e.map(((e,t)=>`T${t}`));const s=new Array(e.length-1);s[0]=e[0][t];for(let r=1;r<s.length;r++)s[r]=s[r-1]+e[r][t];const p=i[t],l=i.slice(-2),u=i.join();let d=`if (${p} < ${s[0]}) {\n        return getChannel(\n            getT0(${u}), vec2(${l.join()}));\n        }`;for(let e=1;e<s.length;e++){const t=s[e-1];d+=`\n        if (${p} < ${s[e]}  && ${p} >= ${s[e-1]}) {\n          return getChannel(\n            getT${e}(${Fw(i,p,t)}),\n            vec2(${Fw(l,p,t)}));\n        }`}const c=s.length,g=s[s.length-1];d+=`\n        return getChannel(\n          getT${c}(${Fw(i,p,g)}),\n          vec2(${Fw(l,p,g)}));`,this.userCode=`\n      float getValue(${i.map((e=>"int "+e))}) {\n        ${d}\n      }\n\n      void main() {\n        ${o} coords = getOutputCoords();\n        vec4 result = vec4(getValue(${a}), 0., 0., 0.);\n\n        ${a[n-1]} = ${a[n-1]} + 1;\n        if (${a[n-1]} < ${r[n-1]}) {\n          result.g = getValue(${a});\n        }\n\n        ${a[n-2]} = ${a[n-2]} + 1;\n        if (${a[n-2]} < ${r[n-2]}) {\n          result.a = getValue(${a});\n        }\n\n        ${a[n-1]} = ${a[n-1]} - 1;\n        if (${a[n-2]} < ${r[n-2]} &&\n            ${a[n-1]} < ${r[n-1]}) {\n          result.b = getValue(${a});\n        }\n        setOutput(result);\n      }\n    `}}function Fw(e,t,r){const n=e.indexOf(t);return e.map(((e,t)=>t===n?`${e} - ${r}`:e)).join()}function Mw(e,t,r){const n=e[0].dtype;if("complex64"===n){const n=e.map((e=>Mv({inputs:{input:e},backend:r}))),o=e.map((e=>function(e){const{inputs:t,backend:r}=e,{input:n}=t;return fv({inputs:{x:r.texData.get(n.dataId).complexTensorInfos.imag},backend:r})}({inputs:{input:e},backend:r}))),a=Mw(n,t,r),i=Mw(o,t,r),s=yv({inputs:{real:a,imag:i},backend:r});return n.forEach((e=>r.disposeIntermediateTensorInfo(e))),o.forEach((e=>r.disposeIntermediateTensorInfo(e))),r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(i),s}let o=r.shouldExecuteOnCPU(e);if("string"===n&&(o=!0),o){const o=e.map((e=>{const n=nt(e.shape.slice(t));return pv({inputs:{x:e},backend:r,attrs:{shape:[-1,n]}})})),a=o.map((e=>({vals:r.readSync(e.dataId),shape:e.shape}))),i=wg(o.map((e=>e.shape)),1),s=1===o[0].shape[0],p=Wb(a,i,n,s),l=wg(e.map((e=>e.shape)),t),u=r.makeTensorInfo(l,n,p);return o.forEach((e=>r.disposeIntermediateTensorInfo(e))),u}const a=e.filter((e=>nt(e.shape)>0)),i=It().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&a[0].shape.length>1;if(1===a.length){const t=i?new N_(e[0].shape,$_):new J_(e[0].shape,$_);return r.runWebGLProgram(t,e,n)}const s=It().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(a.length>s){const e=[];for(let n=0;n<a.length;n+=s){const o=a.slice(n,n+s);e.push(Mw(o,t,r))}const n=Mw(e,t,r);for(const t of e)r.disposeIntermediateTensorInfo(t);return n}if(i){const e=new Ew(a.map((e=>e.shape)),t);return r.runWebGLProgram(e,a,n)}const{tensors2D:p,outShape:l}=function(e,t,r){const n=wg(e.map((e=>e.shape)),t),o=e.map((e=>pv({inputs:{x:e},attrs:{shape:[-1,nt(e.shape.slice(t))]},backend:r})));return{tensors2D:o,outShape:n}}(a,t,r),u=new Sw(p.map((e=>e.shape))),d=r.runWebGLProgram(u,p,n);p.forEach((e=>r.disposeIntermediateTensorInfo(e)));const c=pv({inputs:{x:d},attrs:{shape:l},backend:r});return r.disposeIntermediateTensorInfo(d),c}function Rw(e){const{inputs:t,backend:r,attrs:n}=e,{axis:o}=n,a=ut(o,t[0].shape)[0];vg(t.map((e=>e.shape)),a);const i=wg(t.map((e=>e.shape)),a);if(0===nt(i))return r.makeTensorInfo(i,t[0].dtype,[]);const s=t.filter((e=>nt(e.shape)>0));return 1===s.length?fv({inputs:{x:s[0]},backend:r}):Mw(s,a,r)}const Cw={kernelName:Yt,backendName:"webgl",kernelFunc:Rw},Iw={kernelName:jr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:r,attrs:n}=e,{axis:o}=n;if(1===t.length)return uv({inputs:{input:t[0]},backend:r,attrs:{dim:o}});const a=t[0].shape,i=t[0].dtype;t.forEach((e=>{tt(a,e.shape,"All tensors passed to stack must have matching shapes"),et(i===e.dtype,(()=>"All tensors passed to stack must have matching dtypes"))}));const s=[],p=Rw({inputs:t.map((e=>{const t=uv({inputs:{input:e},backend:r,attrs:{dim:o}});return s.push(t),t})),backend:r,attrs:{axis:o}});return s.forEach((e=>r.disposeIntermediateTensorInfo(e))),p}};class Aw{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,r=e.filterWidth,n=e.strideHeight,o=e.strideWidth,a="channelsLast"===e.dataFormat,i=t-1-e.padInfo.top,s=r-1-e.padInfo.left,p=a?1:2,l=a?2:3,u=a?3:1;this.userCode=`\n      const ivec2 pads = ivec2(${i}, ${s});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[${u}];\n\n        ivec2 dyCorner = ivec2(coords[${p}], coords[${l}]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${t}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${n}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${t} - 1 - wR;\n\n          for (int wC = 0; wC < ${r}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${o}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${r} - 1 - wC;\n\n            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {\n\n              if (${a}) {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const Bw={kernelName:qt,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:r,attrs:n}=e,{dy:o,filter:a}=t,{inputShape:i,strides:s,pad:p,dataFormat:l,dimRoundingMode:u}=n,d=Dp(l),c=xp(i,a.shape,s,1,p,u,!1,d),g=new Aw(c);return r.runWebGLProgram(g,[o,a],"float32")}},Dw=xv({opSnippet:P_+"\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),Lw={kernelName:Hr,backendName:"webgl",kernelFunc:Dw},Nw=xv({opSnippet:Ov+"\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",packedOpSnippet:"\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:g_}),Pw={kernelName:rn,backendName:"webgl",kernelFunc:Nw};class jw{constructor(e,t,r,n,o){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[a,i,s,p]=e,[l]=t,[u,d]=r;this.outputShape=[l,u,d,p];const c="bilinear"===n?1:0,[g,h]=[i-1+".0",s-1+".0"],[f,m,y]=u>1?[""+(i-1)/(u-1),"(y2-y1) * height_ratio",`y1*${g} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${g}`],[b,_,v]=d>1?[""+(s-1)/(d-1),"(x2-x1) * width_ratio",`x1*${h} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${h}`];this.userCode=`\n      const float height_ratio = float(${f});\n      const float width_ratio = float(${b});\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ${a}) {\n          return;\n        }\n\n        float height_scale = ${m};\n        float width_scale = ${_};\n\n        float in_y = ${y};\n        if( in_y < 0.0 || in_y > ${g} ) {\n          setOutput(float(${o}));\n          return;\n        }\n        float in_x = ${v};\n        if( in_x < 0.0 || in_x > ${h} ) {\n          setOutput(float(${o}));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(${c} == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    `}}const Gw={kernelName:er,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:r,attrs:n}=e,{image:o,boxes:a,boxInd:i}=t,{cropSize:s,method:p,extrapolationValue:l}=n,u=new jw(o.shape,a.shape,s,p,l);return r.runWebGLProgram(u,[o,a,i],"float32")}};class Ww{constructor(e,t){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,1===r)return void(this.userCode=`\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(${e[0]} - coord - 1));\n        }\n      `);const n=e.map(((r,n)=>(r=>-1!==t.indexOf(r)&&1!==e[r]?`${e[r]} - coords[${r}] - 1`:`coords[${r}]`)(n))).join(","),o=fb(r);this.userCode=`\n      void main() {\n        ${o} coords = getOutputCoords();\n        setOutput(getX(${n}));\n      }\n    `}}class zw{constructor(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const n=R_("rc",r),o=`${n[r-1]} + 1 < ${this.outputShape[r-1]}`,a=`${n[r-2]} + 1 < ${this.outputShape[r-2]}`,i=fb(r);function s(r){const n=e.map(((n,o)=>function(r,n){return-1!==t.indexOf(r)&&1!==e[r]?`${e[r]} - ${n[r]} - 1`:`${n[r]}`}(o,r)));return`getChannel(getX(${n.join(",")}), vec2(${n.slice(-2).join(",")}))`}this.userCode=1===r?`\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(${e[0]} - rc - 1),\n            ${e[0]} - rc - 1);\n          if(${o}){\n              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),\n                ${e[0]} - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      `:`\n        void main() {\n          ${i} rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ${function(e){return s(e)}(n.slice())};\n          if(${o}){\n            result.g = ${function(e){return e[r-1]="("+e[r-1]+" + 1)",s(e)}(n.slice())};\n          }\n          if(${a}) {\n            result.b = ${function(e){return e[r-2]="("+e[r-2]+" + 1)",s(e)}(n.slice())};\n            if(${o}) {\n              result.a = ${function(e){return e[r-1]="("+e[r-1]+" + 1)",e[r-2]="("+e[r-2]+" + 1)",s(e)}(n.slice())};\n            }\n          }\n          setOutput(result);\n        }\n    `}}const Uw={kernelName:qr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:r,attrs:n}=e,{x:o}=t,{dims:a}=n,i=o.shape.length,s=ut(a,o.shape);if(0===i)return fv({inputs:{x:o},backend:r});const p=It().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new zw(o.shape,s):new Ww(o.shape,s);return r.runWebGLProgram(p,[o],o.dtype)}},$w="return a - b;",Hw=Sv({opSnippet:$w,packedOpSnippet:$w,supportsComplex:!0,cpuKernelImpl:O_}),Vw={kernelName:bn,backendName:"webgl",kernelFunc:Hw},Kw={kernelName:On,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:r,attrs:n}=e,{value:o}=t;let{axis:a}=n;a<0&&(a+=o.shape.length);const i=o,s=i.shape.length,p=o.shape[a],l=new Array(s-1);let u=0;for(let e=0;e<s;e++)e!==a&&(l[u++]=i.shape[e]);const d=[],c=new Array(s).fill(0),g=i.shape.slice();g[a]=1;const h=new Array(p);for(let e=0;e<h.length;e++){c[a]=e;const t=_w({inputs:{x:i},backend:r,attrs:{begin:c,size:g}}),n=pv({inputs:{x:t},backend:r,attrs:{shape:l}});h[e]=n,d.push(t)}return d.forEach((e=>r.disposeIntermediateTensorInfo(e))),h}};class Yw{constructor(e,t,r){this.variableNames=["A"];const{windowSize:n,batchSize:o,outSize:a}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[o,a];const i="max"===t?">":"<",s=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${n};\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ${n}; i++) {\n          int inIdx = ${s};\n          float candidate = getA(batch, inIdx);\n          if (candidate ${i} bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    `}}class Xw{constructor(e,t,r,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,et(e.length>2,(()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`));const o=e[e.length-1],a=Math.ceil(o/t);this.outputShape=e.slice(0,-1),a>1&&this.outputShape.push(a),n||this.variableNames.push("bestIndicesA");const i=this.outputShape,s=i.length,p=fb(s),l=R_("coords",s);let u,d;if(1===a){d=s+1;const e=fb(d);u=`\n        ${e} sourceLocR = ${e}(${l.join()}, 0);\n        ++${l[s-1]};\n        ${e} sourceLocG = ${e}(${l.join()}, 0);\n        ++${l[s-2]};\n        ${e} sourceLocA = ${e}(${l.join()}, 0);\n        --${l[s-1]};\n        ${e} sourceLocB = ${e}(${l.join()}, 0);\n        --${l[s-2]};`}else d=s,u=`\n        ${p} sourceLocR = coords;\n        ++${l[s-1]};\n        ${p} sourceLocG = coords;\n        ++${l[s-2]};\n        ${p} sourceLocA = coords;\n        --${l[s-1]};\n        ${p} sourceLocB = coords;\n        --${l[s-2]};`;const c=["x","y","z","w","u","v"].slice(0,d),g="."+c[d-1],h=c.map((e=>"int "+e)),f=R_("sourceLocR",d-1).concat("inIdx.r"),m=R_("sourceLocG",d-1).concat("inIdx.g"),y=R_("sourceLocB",d-1).concat("inIdx.b"),b=R_("sourceLocA",d-1).concat("inIdx.a"),_="max"===r?"greaterThan":"lessThan",v=n?"":`\n          inIdx = round(vec4(getBestIndicesAChannel(${f.join()}),\n                             getBestIndicesAChannel(${m.join()}),\n                             getBestIndicesAChannel(${y.join()}),\n                             getBestIndicesAChannel(${b.join()})));`,w=`vec4(\n            getAChannel(${f.join()}),\n            hasNextCol ? getAChannel(${m.join()}) : 0.,\n            hasNextRow ? getAChannel(${y.join()}) : 0.,\n            hasNextRow && hasNextCol ? getAChannel(${b.join()}) : 0.)`,k=n?"":`\n      float getBestIndicesAChannel(${h.join()}) {\n        return getChannel(getBestIndicesA(${c.join()}),\n                                          vec2(${c.slice(-2).join()}));\n      }`;this.userCode=`\n      float getAChannel(${h.join()}) {\n        return getChannel(getA(${c.join()}),\n                               vec2(${c.slice(-2).join()}));\n      }\n      ${k}\n      void main() {\n        ${p} coords = getOutputCoords();\n        bool hasNextCol = ${l[s-1]} < ${i[s-1]-1};\n        bool hasNextRow = ${l[s-2]} < ${i[s-2]-1};\n        ${u}\n        ivec4 srcIdx = ivec4(sourceLocR${g}, sourceLocG${g},\n          sourceLocB${g}, sourceLocA${g}) * ${t};\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ${w};\n\n        for (int i = 0; i < ${t}; i++) {\n          inIdx = srcIdx;\n          ${v}\n          vec4 candidate = ${w};\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(${_}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    `}}function qw(e,t,r,n=null){let o=t.shape[0],a=t.shape[1];null!=n&&(o=n.shape[0],a=n.shape[1]);const i=Fg(a),s={windowSize:i,inSize:a,batchSize:o,outSize:Math.ceil(a/i)},p=new Yw(s,r,null==n),l=[t];null!=n&&l.push(n);const u=e.runWebGLProgram(p,l,"int32");if(1===u.shape[1])return u;const d=qw(e,t,r,u);return e.disposeIntermediateTensorInfo(u),d}function Jw(e,t,r,n=null){const o=null!=n?n.shape:t.shape,a=Fg(o[o.length-1]),i=new Xw(o,a,r,null==n),s=null==n?[t]:[t,n],p=e.runWebGLProgram(i,s,"int32");if(p.shape.length===t.shape.length){const n=Jw(e,t,r,p);return e.disposeIntermediateTensorInfo(p),n}return p}function Qw(e,t,r,n){const o=[r];if(Ll("arg"+n.charAt(0).toUpperCase()+n.slice(1),o,t.shape.length),!It().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){const r=[],a=e.texData.get(t.dataId);let i=t;null!==a&&a.isPacked&&(i=e.unpackTensor(t),r.push(i));const[s,p]=Bl(i.shape,o),l=nt(p),u=pv({inputs:{x:i},backend:e,attrs:{shape:[-1,l]}});r.push(u);const d=qw(e,u,n);r.push(d);const c=pv({inputs:{x:d},backend:e,attrs:{shape:s}});return r.forEach((t=>e.disposeIntermediateTensorInfo(t))),c}return Jw(e,t,n)}const Zw={kernelName:Wt,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:r,attrs:n}=e,{x:o}=t,{axis:a}=n;let i=ut(a,o.shape);const s=Nl(i,o.shape.length);let p=o;const l=[];null!=s&&(p=ew({inputs:{x:o},backend:r,attrs:{perm:s}}),l.push(p),i=jl(i.length,p.shape.length)),Ll("argMax",[i[0]],p.shape.length);const u=Qw(r,p,i[0],"max");return l.forEach((e=>r.disposeIntermediateTensorInfo(e))),u}},ek={kernelName:Fr,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:r})=>{const{x:n}=e,{keepDims:o,axis:a}=t,i=r,s=n.shape.length,p=ut(a,n.shape);let l=p;const u=Nl(l,s),d=null!=u,c=i.shouldExecuteOnCPU([n]),g=[];let h=n;if(d){if(c){const e=i.texData.get(h.dataId).values,t=new Array(s);for(let e=0;e<t.length;e++)t[e]=n.shape[u[e]];const r=E_(e,n.shape,n.dtype,u,t);h=i.makeTensorInfo(t,n.dtype),i.texData.get(h.dataId).values=r}else h=Qv(n,u,i);g.push(h),l=jl(l.length,s)}Ll("sum",l,s);const[f,m]=Bl(h.shape,l);let y=f;o&&(y=Dl(f,p));const b=function(e,t,r,n){const o=nt(t),a=pv({inputs:{x:e},attrs:{shape:[nt(e.shape)/o,o]},backend:n}),i=Xv(a,"float32","mean",n),s=pv({inputs:{x:i},attrs:{shape:r},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),s}(h,m,y,i);for(const e of g)i.disposeIntermediateTensorInfo(e);return b}},tk=xv({opSnippet:Ov+"\n  return exp(x);\n",packedOpSnippet:"\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:Ub,dtype:"float32"}),rk={kernelName:pn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:r,attrs:n}=e,{logits:o}=t,{dim:a}=n,i=ut([a],o.shape),s=function(e){const{inputs:t,backend:r,attrs:n}=e,{x:o}=t,{reductionIndices:a,keepDims:i}=n,s=o.shape.length,p=ut(a,o.shape);let l=p;const u=Nl(l,s),d=null!=u,c=r.shouldExecuteOnCPU([o]);let g=o;if(d){if(c){const e=r.texData.get(g.dataId).values,t=new Array(s);for(let e=0;e<t.length;e++)t[e]=o.shape[u[e]];const n=E_(e,o.shape,o.dtype,u,t);g=r.makeTensorInfo(t,o.dtype),r.texData.get(g.dataId).values=n}else g=Qv(o,u,r);l=jl(l.length,s)}Ll("max",l,s);const[h,f]=Bl(g.shape,l);let m,y=h;if(i&&(y=Dl(h,p)),c){const e=r.texData.get(g.dataId).values,t=e_(e,nt(f),y,o.dtype);m=r.makeTensorInfo(y,o.dtype),r.texData.get(m.dataId).values=t}else m=function(e,t,r,n){const o=nt(t),a=pv({inputs:{x:e},attrs:{shape:[nt(e.shape)/o,o]},backend:n}),i=Xv(a,e.dtype,"max",n),s=pv({inputs:{x:i},attrs:{shape:r},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),s}(g,f,y,r);return d&&r.disposeIntermediateTensorInfo(g),m}({inputs:{x:o},backend:r,attrs:{reductionIndices:i,keepDims:!1}}),p=Dl(s.shape,i),l=pv({inputs:{x:s},backend:r,attrs:{shape:p}}),u=Hw({inputs:{a:o,b:l},backend:r}),d=tk({inputs:{x:u},backend:r}),c=Zv({inputs:{x:d},backend:r,attrs:{axis:i,keepDims:!1}}),g=pv({inputs:{x:c},backend:r,attrs:{shape:p}}),h=Cv({inputs:{a:d,b:g},backend:r});return r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(l),r.disposeIntermediateTensorInfo(u),r.disposeIntermediateTensorInfo(d),r.disposeIntermediateTensorInfo(c),r.disposeIntermediateTensorInfo(g),h}};class nk{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}}class ok{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}}const ak={kernelName:Kt,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:r,attrs:n}=e,{x:o}=t,{clipValueMin:a,clipValueMax:i}=n;let s;s=It().getBool("WEBGL_PACK_CLIP")?new ok(o.shape):new nk(o.shape);const p=[[a],[i]];return r.runWebGLProgram(s,[o],o.dtype,p)}};class ik{constructor(e,t,r,n=!1,o=!1){if(this.variableNames=["x"],"avg"===t&&r)throw new Error("Cannot compute positions for average pool.");const a=e.filterWidth,i=e.strideHeight,s=e.strideWidth,p=e.dilationHeight,l=e.dilationWidth,u=e.effectiveFilterHeight,d=e.effectiveFilterWidth,c=e.padInfo.top,g=e.padInfo.left;this.outputShape=e.outShape;const h="avg"===t,f=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,m=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let y="0.0";if(h||(y="-1.0 / 1e-20"),r){const t=">=";return void(this.userCode=`\n        const ivec2 strides = ivec2(${i}, ${s});\n        const ivec2 pads = ivec2(${c}, ${g});\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ${u};\n              wR += ${p}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${d};\n                wC += ${l}) {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ${t} currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ${n?o?f:m:`wR * ${d} + wC`};\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `)}let b=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===t&&(b="avgValue / max(count, 1.0)");const _=4*Math.floor(a/4),v=a%4,w=`\n      if (${h}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec2 strides = ivec2(${i}, ${s});\n      const ivec2 pads = ivec2(${c}, ${g});\n      const float initializationValue = ${y};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ${e.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${y});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ${u};\n            wR += ${p}) {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ${e.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${_}; wC += 4) {\n            int xC = xCCorner + wC * ${l};\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${l}, d),\n              getValue(batch, xR, xC + 2 * ${l}, d),\n              getValue(batch, xR, xC + 3 * ${l}, d)\n            );\n\n            ${w}\n          }\n\n          int xC = xCCorner + ${_};\n          if (${1===v}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ${w}\n          } else if (${2===v}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${l}, d),\n              initializationValue,\n              initializationValue\n            );\n\n            ${w}\n          } else if (${3===v}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${l}, d),\n              getValue(batch, xR, xC + 2 * ${l}, d),\n              initializationValue\n            );\n\n            ${w}\n          }\n        }\n        setOutput(${b});\n      }\n    `}}const sk={kernelName:zt,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:r,attrs:n}=e,{x:o}=t;!function(e,t){Array.isArray(e)||(e=[e]),e.forEach((e=>{null!=e&&et("complex64"!==e.dtype,(()=>"avgPool does not support complex64 tensors in the WebGL backend."))}))}(o);const{filterSize:a,strides:i,pad:s,dimRoundingMode:p}=n;et(Ap(i,1),(()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '1'`));const l=Op(o.shape,a,i,1,s,p);if(1===l.filterWidth&&1===l.filterHeight&&ot(l.inShape,l.outShape))return fv({inputs:{x:o},backend:r});const u=new ik(l,"avg",!1);return r.runWebGLProgram(u,[o],"float32")}},pk={kernelName:Ut,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:r,attrs:n}=e,{a:o,b:a}=t,{transposeA:i,transposeB:s}=n;return rw({a:o,b:a,transposeA:i,transposeB:s,backend:r})}},lk={kernelName:Mn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:r,attrs:n}=e,{a:o,b:a,bias:i,preluActivationWeights:s}=t,{transposeA:p,transposeB:l,activation:u,leakyreluAlpha:d}=n;return rw({a:o,b:a,transposeA:p,transposeB:l,backend:r,bias:i,preluActivationWeights:s,leakyreluAlpha:d,activation:u})}};Pn(Pm),Pn(jm),Pn(Rf),Pn(zm),Pn(Um),Pn(Hm),Pn(Zm),Pn(ry),Pn(Lf),Pn(ny),Pn(ty),Pn(oy),Pn(am),Pn(Jm),Pn(ay),Pn(ly),Pn(uy),Pn(Xm),Pn(bm),Pn(Sf),Pn(dy),Pn(cy),Pn(sy),Pn(Am),Pn(gy),Pn(hy),Pn(my),Pn(wm),Pn(yy),Pn(_y),Pn(vy),Pn(wy),Pn(av),Pn(lv),Pn(dv),Pn(hv),Pn(Rv),Pn(Iv),Pn(Nv),Pn(iw),Pn(sw),Pn(uw),Pn(gw),Pn(hw),Pn(fw),Pn(ww),Pn(Vv),Pn(Tw),Pn(xw),Pn(Iw),Pn(Bw),Pn(Lw),Pn(Pw),Pn(mv),Pn(Gw),Pn(Uw),Pn(Cw),Pn(Vw),Pn(Kw),Pn(Zw),Pn(ek),Pn(vw),Pn(rk),Pn(ak),Pn(sk),Pn(pk),Pn(lk);var uk={filename:""};function dk(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var r=e[0];if(b(r))return ck(r,null);if(_(r)&&Object.getPrototypeOf(r)===Object.prototype){var n=Object.keys(r);return ck(n.map((function(e){return r[e]})),n)}}if("function"==typeof e[e.length-1]){var o=e.pop();return ck(e=1===e.length&&b(e[0])?e[0]:e,null).pipe(q((function(e){return o.apply(void 0,e)})))}return ck(e,null)}function ck(e,t){return new M((function(r){var n=e.length;if(0!==n)for(var o=new Array(n),a=0,i=0,s=function(s){var p=Y(e[s]),l=!1;r.add(p.subscribe({next:function(e){l||(l=!0,i++),o[s]=e},error:function(e){return r.error(e)},complete:function(){++a!==n&&l||(i===n&&r.next(t?t.reduce((function(e,t,r){return e[t]=o[r],e}),{}):o),r.complete())}}))},p=0;p<n;p++)s(p);else r.complete()}))}var gk="undefined"!=typeof window&&window,hk="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,fk=gk||void 0!==ke&&ke||hk;function mk(e,t){return void 0===t&&(t=null),new Tk({method:"GET",url:e,headers:t})}function yk(e,t,r){return new Tk({method:"POST",url:e,body:t,headers:r})}function bk(e,t){return new Tk({method:"DELETE",url:e,headers:t})}function _k(e,t,r){return new Tk({method:"PUT",url:e,body:t,headers:r})}function vk(e,t,r){return new Tk({method:"PATCH",url:e,body:t,headers:r})}var wk=q((function(e,t){return e.response}));function kk(e,t){return wk(new Tk({method:"GET",url:e,responseType:"json",headers:t}))}var Tk=function(e){function t(t){var r=e.call(this)||this,n={async:!0,createXHR:function(){return this.crossDomain?function(){if(fk.XMLHttpRequest)return new fk.XMLHttpRequest;if(fk.XDomainRequest)return new fk.XDomainRequest;throw new Error("CORS is not supported by your browser")}():function(){if(fk.XMLHttpRequest)return new fk.XMLHttpRequest;var e=void 0;try{for(var t=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],r=0;r<3;r++)try{if(e=t[r],new fk.ActiveXObject(e))break}catch(e){}return new fk.ActiveXObject(e)}catch(e){throw new Error("XMLHttpRequest is not supported by your browser")}}()},crossDomain:!0,withCredentials:!1,headers:{},method:"GET",responseType:"json",timeout:0};if("string"==typeof t)n.url=t;else for(var o in t)t.hasOwnProperty(o)&&(n[o]=t[o]);return r.request=n,r}var r;return c(t,e),t.prototype._subscribe=function(e){return new Ok(e,this.request)},t.create=((r=function(e){return new t(e)}).get=mk,r.post=yk,r.delete=bk,r.put=_k,r.patch=vk,r.getJSON=kk,r),t}(M),Ok=function(e){function t(t,r){var n=e.call(this,t)||this;n.request=r,n.done=!1;var o=r.headers=r.headers||{};return r.crossDomain||n.getHeader(o,"X-Requested-With")||(o["X-Requested-With"]="XMLHttpRequest"),n.getHeader(o,"Content-Type")||fk.FormData&&r.body instanceof fk.FormData||void 0===r.body||(o["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8"),r.body=n.serializeBody(r.body,n.getHeader(r.headers,"Content-Type")),n.send(),n}return c(t,e),t.prototype.next=function(e){this.done=!0;var t,r=this,n=r.xhr,o=r.request,a=r.destination;try{t=new xk(e,n,o)}catch(e){return a.error(e)}a.next(t)},t.prototype.send=function(){var e=this.request,t=this.request,r=t.user,n=t.method,o=t.url,a=t.async,i=t.password,s=t.headers,p=t.body;try{var l=this.xhr=e.createXHR();this.setupEvents(l,e),r?l.open(n,o,a,r,i):l.open(n,o,a),a&&(l.timeout=e.timeout,l.responseType=e.responseType),"withCredentials"in l&&(l.withCredentials=!!e.withCredentials),this.setHeaders(l,s),p?l.send(p):l.send()}catch(e){this.error(e)}},t.prototype.serializeBody=function(e,t){if(!e||"string"==typeof e)return e;if(fk.FormData&&e instanceof fk.FormData)return e;if(t){var r=t.indexOf(";");-1!==r&&(t=t.substring(0,r))}switch(t){case"application/x-www-form-urlencoded":return Object.keys(e).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])})).join("&");case"application/json":return JSON.stringify(e);default:return e}},t.prototype.setHeaders=function(e,t){for(var r in t)t.hasOwnProperty(r)&&e.setRequestHeader(r,t[r])},t.prototype.getHeader=function(e,t){for(var r in e)if(r.toLowerCase()===t.toLowerCase())return e[r]},t.prototype.setupEvents=function(e,t){var r,n,o=t.progressSubscriber;function a(e){var t,r=a,n=r.subscriber,o=r.progressSubscriber,i=r.request;o&&o.error(e);try{t=new Fk(this,i)}catch(e){t=e}n.error(t)}function i(e){}function s(e){var t=s,r=t.subscriber,n=t.progressSubscriber,o=t.request;if(4===this.readyState){var a=1223===this.status?204:this.status,i="text"===this.responseType?this.response||this.responseText:this.response;if(0===a&&(a=i?200:0),a<400)n&&n.complete(),r.next(e),r.complete();else{n&&n.error(e);var p=void 0;try{p=new Sk("ajax error "+a,this,o)}catch(e){p=e}r.error(p)}}}e.ontimeout=a,a.request=t,a.subscriber=this,a.progressSubscriber=o,e.upload&&"withCredentials"in e&&(o&&(r=function(e){r.progressSubscriber.next(e)},fk.XDomainRequest?e.onprogress=r:e.upload.onprogress=r,r.progressSubscriber=o),n=function(e){var t,r=n,o=r.progressSubscriber,a=r.subscriber,i=r.request;o&&o.error(e);try{t=new Sk("ajax error",this,i)}catch(e){t=e}a.error(t)},e.onerror=n,n.request=t,n.subscriber=this,n.progressSubscriber=o),e.onreadystatechange=i,i.subscriber=this,i.progressSubscriber=o,i.request=t,e.onload=s,s.subscriber=this,s.progressSubscriber=o,s.request=t},t.prototype.unsubscribe=function(){var t=this.done,r=this.xhr;!t&&r&&4!==r.readyState&&"function"==typeof r.abort&&r.abort(),e.prototype.unsubscribe.call(this)},t}(x),xk=function(e,t,r){this.originalEvent=e,this.xhr=t,this.request=r,this.status=t.status,this.responseType=t.responseType||r.responseType,this.response=Ek(this.responseType,t)},Sk=function(){function e(e,t,r){return Error.call(this),this.message=e,this.name="AjaxError",this.xhr=t,this.request=r,this.status=t.status,this.responseType=t.responseType||r.responseType,this.response=Ek(this.responseType,t),this}return e.prototype=Object.create(Error.prototype),e}();function Ek(e,t){switch(e){case"json":return function(e){return"response"in e?e.responseType?e.response:JSON.parse(e.response||e.responseText||"null"):JSON.parse(e.responseText||"null")}(t);case"xml":return t.responseXML;default:return"response"in t?t.response:t.responseText}}var Fk=function(e,t){return Sk.call(this,"ajax timeout",e,t),this.name="AjaxTimeoutError",this},Mk=Tk.create,Rk=Uint8Array,Ck=Uint16Array,Ik=Uint32Array,Ak=new Rk([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Bk=new Rk([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Dk=new Rk([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Lk=function(e,t){for(var r=new Ck(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];var o=new Ik(r[30]);for(n=1;n<30;++n)for(var a=r[n];a<r[n+1];++a)o[a]=a-r[n]<<5|n;return[r,o]},Nk=Lk(Ak,2),Pk=Nk[0],jk=Nk[1];Pk[28]=258,jk[258]=28;for(var Gk=Lk(Bk,0)[0],Wk=new Ck(32768),zk=0;zk<32768;++zk){var Uk=(43690&zk)>>>1|(21845&zk)<<1;Uk=(61680&(Uk=(52428&Uk)>>>2|(13107&Uk)<<2))>>>4|(3855&Uk)<<4,Wk[zk]=((65280&Uk)>>>8|(255&Uk)<<8)>>>1}var $k=function(e,t,r){for(var n=e.length,o=0,a=new Ck(t);o<n;++o)++a[e[o]-1];var i,s=new Ck(t);for(o=0;o<t;++o)s[o]=s[o-1]+a[o-1]<<1;if(r){i=new Ck(1<<t);var p=15-t;for(o=0;o<n;++o)if(e[o])for(var l=o<<4|e[o],u=t-e[o],d=s[e[o]-1]++<<u,c=d|(1<<u)-1;d<=c;++d)i[Wk[d]>>>p]=l}else for(i=new Ck(n),o=0;o<n;++o)e[o]&&(i[o]=Wk[s[e[o]-1]++]>>>15-e[o]);return i},Hk=new Rk(288);for(zk=0;zk<144;++zk)Hk[zk]=8;for(zk=144;zk<256;++zk)Hk[zk]=9;for(zk=256;zk<280;++zk)Hk[zk]=7;for(zk=280;zk<288;++zk)Hk[zk]=8;var Vk=new Rk(32);for(zk=0;zk<32;++zk)Vk[zk]=5;var Kk=$k(Hk,9,1),Yk=$k(Vk,5,1),Xk=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},qk=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(7&t)&r},Jk=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(7&t)},Qk=function(e,t,r){(null==t||t<0)&&(t=0),(null==r||r>e.length)&&(r=e.length);var n=new(e instanceof Ck?Ck:e instanceof Ik?Ik:Rk)(r-t);return n.set(e.subarray(t,r)),n},Zk=function(e,t,r){var n=e.length;if(!n||r&&!r.l&&n<5)return t||new Rk(0);var o=!t||r,a=!r||r.i;r||(r={}),t||(t=new Rk(3*n));var i,s=function(e){var r=t.length;if(e>r){var n=new Rk(Math.max(2*r,e));n.set(t),t=n}},p=r.f||0,l=r.p||0,u=r.b||0,d=r.l,c=r.d,g=r.m,h=r.n,f=8*n;do{if(!d){r.f=p=qk(e,l,1);var m=qk(e,l+1,3);if(l+=3,!m){var y=e[(F=((i=l)/8|0)+(7&i&&1)+4)-4]|e[F-3]<<8,b=F+y;if(b>n){if(a)throw"unexpected EOF";break}o&&s(u+y),t.set(e.subarray(F,b),u),r.b=u+=y,r.p=l=8*b;continue}if(1==m)d=Kk,c=Yk,g=9,h=5;else{if(2!=m)throw"invalid block type";var _=qk(e,l,31)+257,v=qk(e,l+10,15)+4,w=_+qk(e,l+5,31)+1;l+=14;for(var k=new Rk(w),T=new Rk(19),O=0;O<v;++O)T[Dk[O]]=qk(e,l+3*O,7);l+=3*v;var x=Xk(T),S=(1<<x)-1,E=$k(T,x,1);for(O=0;O<w;){var F,M=E[qk(e,l,S)];if(l+=15&M,(F=M>>>4)<16)k[O++]=F;else{var R=0,C=0;for(16==F?(C=3+qk(e,l,3),l+=2,R=k[O-1]):17==F?(C=3+qk(e,l,7),l+=3):18==F&&(C=11+qk(e,l,127),l+=7);C--;)k[O++]=R}}var I=k.subarray(0,_),A=k.subarray(_);g=Xk(I),h=Xk(A),d=$k(I,g,1),c=$k(A,h,1)}if(l>f){if(a)throw"unexpected EOF";break}}o&&s(u+131072);for(var B=(1<<g)-1,D=(1<<h)-1,L=l;;L=l){var N=(R=d[Jk(e,l)&B])>>>4;if((l+=15&R)>f){if(a)throw"unexpected EOF";break}if(!R)throw"invalid length/literal";if(N<256)t[u++]=N;else{if(256==N){L=l,d=null;break}var P=N-254;if(N>264){var j=Ak[O=N-257];P=qk(e,l,(1<<j)-1)+Pk[O],l+=j}var G=c[Jk(e,l)&D],W=G>>>4;if(!G)throw"invalid distance";if(l+=15&G,A=Gk[W],W>3&&(j=Bk[W],A+=Jk(e,l)&(1<<j)-1,l+=j),l>f){if(a)throw"unexpected EOF";break}o&&s(u+131072);for(var z=u+P;u<z;u+=4)t[u]=t[u-A],t[u+1]=t[u+1-A],t[u+2]=t[u+2-A],t[u+3]=t[u+3-A];u=z}}r.l=d,r.p=L,r.b=u,d&&(p=1,r.m=g,r.d=c,r.n=h)}while(!p);return u==t.length?t:Qk(t,0,u)},eT=new Rk(0),tT=function(e,t){return e[t]|e[t+1]<<8},rT=function(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0},nT=function(e,t){return rT(e,t)+4294967296*rT(e,t+4)};function oT(e,t){return Zk(e,t)}var aT="undefined"!=typeof TextDecoder&&new TextDecoder;try{aT.decode(eT,{stream:!0})}catch(a){}var iT=function(e){for(var t="",r=0;;){var n=e[r++],o=(n>127)+(n>223)+(n>239);if(r+o>e.length)return[t,Qk(e,r-1)];o?3==o?(n=((15&n)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++])-65536,t+=String.fromCharCode(55296|n>>10,56320|1023&n)):t+=1&o?String.fromCharCode((31&n)<<6|63&e[r++]):String.fromCharCode((15&n)<<12|(63&e[r++])<<6|63&e[r++]):t+=String.fromCharCode(n)}};function sT(e,t){if(t){for(var r="",n=0;n<e.length;n+=16384)r+=String.fromCharCode.apply(null,e.subarray(n,n+16384));return r}if(aT)return aT.decode(e);var o=iT(e),a=o[0];if(o[1].length)throw"invalid utf-8 data";return a}var pT=function(e,t){return t+30+tT(e,t+26)+tT(e,t+28)},lT=function(e,t,r){var n=tT(e,t+28),o=sT(e.subarray(t+46,t+46+n),!(2048&tT(e,t+8))),a=t+46+n,i=rT(e,t+20),s=r&&4294967295==i?uT(e,a):[i,rT(e,t+24),rT(e,t+42)],p=s[0],l=s[1],u=s[2];return[tT(e,t+10),p,l,o,a+tT(e,t+30)+tT(e,t+32),u]},uT=function(e,t){for(;1!=tT(e,t);t+=4+tT(e,t+2));return[nT(e,t+12),nT(e,t+4),nT(e,t+20)]};function dT(e){for(var t={},r=e.length-22;101010256!=rT(e,r);--r)if(!r||e.length-r>65558)throw"invalid zip file";var n=tT(e,r+8);if(!n)return{};var o=rT(e,r+16),a=4294967295==o;if(a){if(r=rT(e,r-12),101075792!=rT(e,r))throw"invalid zip file";n=rT(e,r+32),o=rT(e,r+48)}for(var i=0;i<n;++i){var s=lT(e,o,a),p=s[0],l=s[1],u=s[2],d=s[3],c=s[4],g=s[5],h=pT(e,g);if(o=c,p){if(8!=p)throw"unknown compression type "+p;t[d]=oT(e.subarray(h,h+l),new Rk(u))}else t[d]=Qk(e,h,h+l)}return t}function cT(e){if(e)for(var t=0;t<e.length;t++)e[t]=~e[t];return e}var gT=function(){function e(e,t){this.jsonModel=e,this.weights=t}return e.prototype.load=function(){return s(this,void 0,void 0,(function(){var e,t,r,n;return p(this,(function(o){switch(o.label){case 0:return e={modelTopology:this.jsonModel.modelTopology,format:this.jsonModel.format,generatedBy:this.jsonModel.generatedBy,convertedBy:this.jsonModel.convertedBy},null==this.jsonModel.weightsManifest?[3,2]:[4,this.loadWeights()];case 1:t=o.sent(),r=t[0],n=t[1],e.weightSpecs=r,e.weightData=n,o.label=2;case 2:return null!=this.jsonModel.trainingConfig&&(e.trainingConfig=this.jsonModel.trainingConfig),null!=this.jsonModel.userDefinedMetadata&&(e.userDefinedMetadata=this.jsonModel.userDefinedMetadata),[2,e]}}))}))},e.prototype.loadWeights=function(){return s(this,void 0,void 0,(function(){var e,t,r,n,o,a,i,s;return p(this,(function(p){for(e=[],t=[],r=0,n=this.jsonModel.weightsManifest;r<n.length;r++){for(o=n[r],a=0,i=o.paths;a<i.length;a++){if(s=i[a],!this.weights[s])throw new Error("Error loading weights: cannot find ".concat(s));e.push(this.weights[s])}t.push.apply(t,o.weights)}return[2,[t,this.toArrayBuffer(e)]]}))}))},e.prototype.toArrayBuffer=function(e){if(Array.isArray(e)){for(var t=0,r=0,n=e;r<n.length;r++)t+=n[r].length;for(var o=new ArrayBuffer(t),a=new Uint8Array(o),i=0,s=0,p=e;s<p.length;s++)i+=p[s].copy(a,i);return o}return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)},e}(),hT=[],fT=[],mT="undefined"!=typeof Uint8Array?Uint8Array:Array,yT=!1;function bT(){yT=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0;t<64;++t)hT[t]=e[t],fT[e.charCodeAt(t)]=t;fT["-".charCodeAt(0)]=62,fT["_".charCodeAt(0)]=63}function _T(e,t,r){for(var n,o,a=[],i=t;i<r;i+=3)n=(e[i]<<16)+(e[i+1]<<8)+e[i+2],a.push(hT[(o=n)>>18&63]+hT[o>>12&63]+hT[o>>6&63]+hT[63&o]);return a.join("")}function vT(e){var t;yT||bT();for(var r=e.length,n=r%3,o="",a=[],i=16383,s=0,p=r-n;s<p;s+=i)a.push(_T(e,s,s+i>p?p:s+i));return 1===n?(t=e[r-1],o+=hT[t>>2],o+=hT[t<<4&63],o+="=="):2===n&&(t=(e[r-2]<<8)+e[r-1],o+=hT[t>>10],o+=hT[t>>4&63],o+=hT[t<<2&63],o+="="),a.push(o),a.join("")}function wT(e,t,r,n,o){var a,i,s=8*o-n-1,p=(1<<s)-1,l=p>>1,u=-7,d=r?o-1:0,c=r?-1:1,g=e[t+d];for(d+=c,a=g&(1<<-u)-1,g>>=-u,u+=s;u>0;a=256*a+e[t+d],d+=c,u-=8);for(i=a&(1<<-u)-1,a>>=-u,u+=n;u>0;i=256*i+e[t+d],d+=c,u-=8);if(0===a)a=1-l;else{if(a===p)return i?NaN:1/0*(g?-1:1);i+=Math.pow(2,n),a-=l}return(g?-1:1)*i*Math.pow(2,a-n)}function kT(e,t,r,n,o,a){var i,s,p,l=8*a-o-1,u=(1<<l)-1,d=u>>1,c=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,g=n?0:a-1,h=n?1:-1,f=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,i=u):(i=Math.floor(Math.log(t)/Math.LN2),t*(p=Math.pow(2,-i))<1&&(i--,p*=2),(t+=i+d>=1?c/p:c*Math.pow(2,1-d))*p>=2&&(i++,p/=2),i+d>=u?(s=0,i=u):i+d>=1?(s=(t*p-1)*Math.pow(2,o),i+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,o),i=0));o>=8;e[r+g]=255&s,g+=h,s/=256,o-=8);for(i=i<<o|s,l+=o;l>0;e[r+g]=255&i,g+=h,i/=256,l-=8);e[r+g-h]|=128*f}var TT={}.toString,OT=Array.isArray||function(e){return"[object Array]"==TT.call(e)};function xT(){return ET.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function ST(e,t){if(xT()<t)throw new RangeError("Invalid typed array length");return ET.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=ET.prototype:(null===e&&(e=new ET(t)),e.length=t),e}function ET(e,t,r){if(!(ET.TYPED_ARRAY_SUPPORT||this instanceof ET))return new ET(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return RT(this,e)}return FT(this,e,t,r)}function FT(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n),ET.TYPED_ARRAY_SUPPORT?(e=t).__proto__=ET.prototype:e=CT(e,t),e}(e,t,r,n):"string"==typeof t?function(e,t,r){if("string"==typeof r&&""!==r||(r="utf8"),!ET.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|BT(t,r),o=(e=ST(e,n)).write(t,r);return o!==n&&(e=e.slice(0,o)),e}(e,t,r):function(e,t){if(AT(t)){var r=0|IT(t.length);return 0===(e=ST(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?ST(e,0):CT(e,t);if("Buffer"===t.type&&OT(t.data))return CT(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function MT(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function RT(e,t){if(MT(t),e=ST(e,t<0?0:0|IT(t)),!ET.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function CT(e,t){var r=t.length<0?0:0|IT(t.length);e=ST(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function IT(e){if(e>=xT())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+xT().toString(16)+" bytes");return 0|e}function AT(e){return!(null==e||!e._isBuffer)}function BT(e,t){if(AT(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return sO(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return pO(e).length;default:if(n)return sO(e).length;t=(""+t).toLowerCase(),n=!0}}function DT(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return qT(this,t,r);case"utf8":case"utf-8":return VT(this,t,r);case"ascii":return YT(this,t,r);case"latin1":case"binary":return XT(this,t,r);case"base64":return HT(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return JT(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function LT(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function NT(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=ET.from(t,n)),AT(t))return 0===t.length?-1:PT(e,t,r,n,o);if("number"==typeof t)return t&=255,ET.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):PT(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function PT(e,t,r,n,o){var a,i=1,s=e.length,p=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;i=2,s/=2,p/=2,r/=2}function l(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(o){var u=-1;for(a=r;a<s;a++)if(l(e,a)===l(t,-1===u?0:a-u)){if(-1===u&&(u=a),a-u+1===p)return u*i}else-1!==u&&(a-=a-u),u=-1}else for(r+p>s&&(r=s-p),a=r;a>=0;a--){for(var d=!0,c=0;c<p;c++)if(l(e,a+c)!==l(t,c)){d=!1;break}if(d)return a}return-1}function jT(e,t,r,n){r=Number(r)||0;var o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");n>a/2&&(n=a/2);for(var i=0;i<n;++i){var s=parseInt(t.substr(2*i,2),16);if(isNaN(s))return i;e[r+i]=s}return i}function GT(e,t,r,n){return lO(sO(t,e.length-r),e,r,n)}function WT(e,t,r,n){return lO(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function zT(e,t,r,n){return WT(e,t,r,n)}function UT(e,t,r,n){return lO(pO(t),e,r,n)}function $T(e,t,r,n){return lO(function(e,t){for(var r,n,o,a=[],i=0;i<e.length&&!((t-=2)<0);++i)n=(r=e.charCodeAt(i))>>8,o=r%256,a.push(o),a.push(n);return a}(t,e.length-r),e,r,n)}function HT(e,t,r){return 0===t&&r===e.length?vT(e):vT(e.slice(t,r))}function VT(e,t,r){r=Math.min(e.length,r);for(var n=[],o=t;o<r;){var a,i,s,p,l=e[o],u=null,d=l>239?4:l>223?3:l>191?2:1;if(o+d<=r)switch(d){case 1:l<128&&(u=l);break;case 2:128==(192&(a=e[o+1]))&&(p=(31&l)<<6|63&a)>127&&(u=p);break;case 3:a=e[o+1],i=e[o+2],128==(192&a)&&128==(192&i)&&(p=(15&l)<<12|(63&a)<<6|63&i)>2047&&(p<55296||p>57343)&&(u=p);break;case 4:a=e[o+1],i=e[o+2],s=e[o+3],128==(192&a)&&128==(192&i)&&128==(192&s)&&(p=(15&l)<<18|(63&a)<<12|(63&i)<<6|63&s)>65535&&p<1114112&&(u=p)}null===u?(u=65533,d=1):u>65535&&(u-=65536,n.push(u>>>10&1023|55296),u=56320|1023&u),n.push(u),o+=d}return function(e){var t=e.length;if(t<=KT)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=KT));return r}(n)}ET.TYPED_ARRAY_SUPPORT=void 0===ke.TYPED_ARRAY_SUPPORT||ke.TYPED_ARRAY_SUPPORT,xT(),ET.poolSize=8192,ET._augment=function(e){return e.__proto__=ET.prototype,e},ET.from=function(e,t,r){return FT(null,e,t,r)},ET.TYPED_ARRAY_SUPPORT&&(ET.prototype.__proto__=Uint8Array.prototype,ET.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&ET[Symbol.species]),ET.alloc=function(e,t,r){return function(e,t,r,n){return MT(t),t<=0?ST(e,t):void 0!==r?"string"==typeof n?ST(e,t).fill(r,n):ST(e,t).fill(r):ST(e,t)}(null,e,t,r)},ET.allocUnsafe=function(e){return RT(null,e)},ET.allocUnsafeSlow=function(e){return RT(null,e)},ET.isBuffer=function(e){return null!=e&&(!!e._isBuffer||uO(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&uO(e.slice(0,0))}(e))},ET.compare=function(e,t){if(!AT(e)||!AT(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,o=0,a=Math.min(r,n);o<a;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},ET.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},ET.concat=function(e,t){if(!OT(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return ET.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=ET.allocUnsafe(t),o=0;for(r=0;r<e.length;++r){var a=e[r];if(!AT(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,o),o+=a.length}return n},ET.byteLength=BT,ET.prototype._isBuffer=!0,ET.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)LT(this,t,t+1);return this},ET.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)LT(this,t,t+3),LT(this,t+1,t+2);return this},ET.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)LT(this,t,t+7),LT(this,t+1,t+6),LT(this,t+2,t+5),LT(this,t+3,t+4);return this},ET.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?VT(this,0,e):DT.apply(this,arguments)},ET.prototype.equals=function(e){if(!AT(e))throw new TypeError("Argument must be a Buffer");return this===e||0===ET.compare(this,e)},ET.prototype.inspect=function(){var e="";return this.length>0&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(e+=" ... ")),"<Buffer "+e+">"},ET.prototype.compare=function(e,t,r,n,o){if(!AT(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return-1;if(t>=r)return 1;if(this===e)return 0;for(var a=(o>>>=0)-(n>>>=0),i=(r>>>=0)-(t>>>=0),s=Math.min(a,i),p=this.slice(n,o),l=e.slice(t,r),u=0;u<s;++u)if(p[u]!==l[u]){a=p[u],i=l[u];break}return a<i?-1:i<a?1:0},ET.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},ET.prototype.indexOf=function(e,t,r){return NT(this,e,t,r,!0)},ET.prototype.lastIndexOf=function(e,t,r){return NT(this,e,t,r,!1)},ET.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var a=!1;;)switch(n){case"hex":return jT(this,e,t,r);case"utf8":case"utf-8":return GT(this,e,t,r);case"ascii":return WT(this,e,t,r);case"latin1":case"binary":return zT(this,e,t,r);case"base64":return UT(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $T(this,e,t,r);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},ET.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var KT=4096;function YT(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}function XT(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function qT(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var o="",a=t;a<r;++a)o+=iO(e[a]);return o}function JT(e,t,r){for(var n=e.slice(t,r),o="",a=0;a<n.length;a+=2)o+=String.fromCharCode(n[a]+256*n[a+1]);return o}function QT(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function ZT(e,t,r,n,o,a){if(!AT(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<a)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function eO(e,t,r,n){t<0&&(t=65535+t+1);for(var o=0,a=Math.min(e.length-r,2);o<a;++o)e[r+o]=(t&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function tO(e,t,r,n){t<0&&(t=4294967295+t+1);for(var o=0,a=Math.min(e.length-r,4);o<a;++o)e[r+o]=t>>>8*(n?o:3-o)&255}function rO(e,t,r,n,o,a){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function nO(e,t,r,n,o){return o||rO(e,0,r,4),kT(e,t,r,n,23,4),r+4}function oO(e,t,r,n,o){return o||rO(e,0,r,8),kT(e,t,r,n,52,8),r+8}ET.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),ET.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=ET.prototype;else{var o=t-e;r=new ET(o,void 0);for(var a=0;a<o;++a)r[a]=this[a+e]}return r},ET.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||QT(e,t,this.length);for(var n=this[e],o=1,a=0;++a<t&&(o*=256);)n+=this[e+a]*o;return n},ET.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||QT(e,t,this.length);for(var n=this[e+--t],o=1;t>0&&(o*=256);)n+=this[e+--t]*o;return n},ET.prototype.readUInt8=function(e,t){return t||QT(e,1,this.length),this[e]},ET.prototype.readUInt16LE=function(e,t){return t||QT(e,2,this.length),this[e]|this[e+1]<<8},ET.prototype.readUInt16BE=function(e,t){return t||QT(e,2,this.length),this[e]<<8|this[e+1]},ET.prototype.readUInt32LE=function(e,t){return t||QT(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},ET.prototype.readUInt32BE=function(e,t){return t||QT(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},ET.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||QT(e,t,this.length);for(var n=this[e],o=1,a=0;++a<t&&(o*=256);)n+=this[e+a]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*t)),n},ET.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||QT(e,t,this.length);for(var n=t,o=1,a=this[e+--n];n>0&&(o*=256);)a+=this[e+--n]*o;return a>=(o*=128)&&(a-=Math.pow(2,8*t)),a},ET.prototype.readInt8=function(e,t){return t||QT(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},ET.prototype.readInt16LE=function(e,t){t||QT(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},ET.prototype.readInt16BE=function(e,t){t||QT(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},ET.prototype.readInt32LE=function(e,t){return t||QT(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},ET.prototype.readInt32BE=function(e,t){return t||QT(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},ET.prototype.readFloatLE=function(e,t){return t||QT(e,4,this.length),wT(this,e,!0,23,4)},ET.prototype.readFloatBE=function(e,t){return t||QT(e,4,this.length),wT(this,e,!1,23,4)},ET.prototype.readDoubleLE=function(e,t){return t||QT(e,8,this.length),wT(this,e,!0,52,8)},ET.prototype.readDoubleBE=function(e,t){return t||QT(e,8,this.length),wT(this,e,!1,52,8)},ET.prototype.writeUIntLE=function(e,t,r,n){e=+e,t|=0,r|=0,n||ZT(this,e,t,r,Math.pow(2,8*r)-1,0);var o=1,a=0;for(this[t]=255&e;++a<r&&(o*=256);)this[t+a]=e/o&255;return t+r},ET.prototype.writeUIntBE=function(e,t,r,n){e=+e,t|=0,r|=0,n||ZT(this,e,t,r,Math.pow(2,8*r)-1,0);var o=r-1,a=1;for(this[t+o]=255&e;--o>=0&&(a*=256);)this[t+o]=e/a&255;return t+r},ET.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||ZT(this,e,t,1,255,0),ET.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},ET.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||ZT(this,e,t,2,65535,0),ET.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):eO(this,e,t,!0),t+2},ET.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||ZT(this,e,t,2,65535,0),ET.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):eO(this,e,t,!1),t+2},ET.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||ZT(this,e,t,4,4294967295,0),ET.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):tO(this,e,t,!0),t+4},ET.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||ZT(this,e,t,4,4294967295,0),ET.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):tO(this,e,t,!1),t+4},ET.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var o=Math.pow(2,8*r-1);ZT(this,e,t,r,o-1,-o)}var a=0,i=1,s=0;for(this[t]=255&e;++a<r&&(i*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/i>>0)-s&255;return t+r},ET.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var o=Math.pow(2,8*r-1);ZT(this,e,t,r,o-1,-o)}var a=r-1,i=1,s=0;for(this[t+a]=255&e;--a>=0&&(i*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/i>>0)-s&255;return t+r},ET.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||ZT(this,e,t,1,127,-128),ET.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},ET.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||ZT(this,e,t,2,32767,-32768),ET.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):eO(this,e,t,!0),t+2},ET.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||ZT(this,e,t,2,32767,-32768),ET.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):eO(this,e,t,!1),t+2},ET.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||ZT(this,e,t,4,2147483647,-2147483648),ET.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):tO(this,e,t,!0),t+4},ET.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||ZT(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),ET.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):tO(this,e,t,!1),t+4},ET.prototype.writeFloatLE=function(e,t,r){return nO(this,e,t,!0,r)},ET.prototype.writeFloatBE=function(e,t,r){return nO(this,e,t,!1,r)},ET.prototype.writeDoubleLE=function(e,t,r){return oO(this,e,t,!0,r)},ET.prototype.writeDoubleBE=function(e,t,r){return oO(this,e,t,!1,r)},ET.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var o,a=n-r;if(this===e&&r<t&&t<n)for(o=a-1;o>=0;--o)e[o+t]=this[o+r];else if(a<1e3||!ET.TYPED_ARRAY_SUPPORT)for(o=0;o<a;++o)e[o+t]=this[o+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+a),t);return a},ET.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!ET.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var a;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(a=t;a<r;++a)this[a]=e;else{var i=AT(e)?e:sO(new ET(e,n).toString()),s=i.length;for(a=0;a<r-t;++a)this[a+t]=i[a%s]}return this};var aO=/[^+\/0-9A-Za-z-_]/g;function iO(e){return e<16?"0"+e.toString(16):e.toString(16)}function sO(e,t){var r;t=t||1/0;for(var n=e.length,o=null,a=[],i=0;i<n;++i){if((r=e.charCodeAt(i))>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(i+1===n){(t-=3)>-1&&a.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&a.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&a.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function pO(e){return function(e){var t,r,n,o,a,i;yT||bT();var s=e.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");a="="===e[s-2]?2:"="===e[s-1]?1:0,i=new mT(3*s/4-a),n=a>0?s-4:s;var p=0;for(t=0,r=0;t<n;t+=4,r+=3)o=fT[e.charCodeAt(t)]<<18|fT[e.charCodeAt(t+1)]<<12|fT[e.charCodeAt(t+2)]<<6|fT[e.charCodeAt(t+3)],i[p++]=o>>16&255,i[p++]=o>>8&255,i[p++]=255&o;return 2===a?(o=fT[e.charCodeAt(t)]<<2|fT[e.charCodeAt(t+1)]>>4,i[p++]=255&o):1===a&&(o=fT[e.charCodeAt(t)]<<10|fT[e.charCodeAt(t+1)]<<4|fT[e.charCodeAt(t+2)]>>2,i[p++]=o>>8&255,i[p++]=255&o),i}(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(aO,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function lO(e,t,r,n){for(var o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}function uO(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function dO(e,t){var r=new ue(0),n=new ue(0),o=new ue(0),a=new ue(0),i=H([r,n,o,a]).pipe(q((function(e){return e.reduce((function(t,r){return t+r/e.length}),0)})));if("string"==typeof e){var s=function(e,t){return Mk({url:e,method:"GET",responseType:"arraybuffer",async:!0,progressSubscriber:new x((function(e){return t.next(e.loaded/e.total)}),(function(e){}),(function(){return t.next(1)}))}).pipe(de(2))}(e,r).pipe(he((function(e){return cO(e.response)})),he((function(e){return gO(e,t,n).pipe(q((function(t){return{jszip:e,config:t}})))})),he((function(e){var t=e.jszip,r=e.config;return hO(t,r,o).pipe(q((function(e){return{jszip:t,config:r,jsonModel:e}})))})),he((function(e){var t=e.jszip,r=e.config,n=e.jsonModel;return fO(t,n,a).pipe(q((function(e){return{config:r,jsonModel:n,weights:e}})))})),he((function(e){var t=e.config,r=e.jsonModel,n=e.weights;return Y(bf(new gT(r,n))).pipe(q((function(e){return{config:t,graphModel:e}})))})));return{model$:s,progress$:i}}return s=cO(e).pipe(he((function(e){return gO(e,t,n).pipe(q((function(t){return{jszip:e,config:t}})))})),he((function(e){var t=e.jszip,r=e.config;return hO(t,r,o).pipe(q((function(e){return{jszip:t,config:r,jsonModel:e}})))})),he((function(e){var t=e.jszip,r=e.config,n=e.jsonModel;return fO(t,n,a).pipe(q((function(e){return{config:r,jsonModel:n,weights:e}})))})),he((function(e){var t=e.config,r=e.jsonModel,n=e.weights;return Y(bf(new gT(r,n))).pipe(q((function(e){return{config:t,graphModel:e}})))}))),{model$:s,progress$:i}}function cO(e){return X(dT(new Uint8Array(e)))}function gO(e,t,r){return e[t]||(t=t.substring(0,t.lastIndexOf("."))+".json",e[t])?we((function(){return r.next(1),t.includes(".bin")?X(JSON.parse(sT(cT(e[t])))):X(JSON.parse(sT(e[t])))})):ee("Unable to retrieve model config: ".concat(t," is missing"))}function hO(e,t,r){return t?e[t.filename]?we((function(){return r.next(1),X(JSON.parse(sT(cT(e[t.filename]))))})):ee("Error extracting model: ".concat(t.filename," is missing")):ee("Invalid model config")}function fO(e,t,r){if(!t)return ee("Unable to extract weights: model is undefined");if(!t.weightsManifest)return r.next(1),X({});for(var n=0,o=0,a=t.weightsManifest;o<a.length;o++){var i=a[o];n+=i.paths.length}for(var s=new Array(n).fill(0),p={},l=0,u=0,d=t.weightsManifest;u<d.length;u++)for(var c=function(t){if(!e[t])return{value:ee("Error extracting weight: ".concat(t," is missing"))};p[t]=we((function(){var o=e[t];return s[l]=1,r.next(s.reduce((function(e,t){return e+t}),0)/n),X(cT(ET.from(o,o.byteOffset,o.byteLength)))})),l++},g=0,h=(i=d[u]).paths;g<h.length;g++){var f=c(h[g]);if("object"==typeof f)return f.value}return dk(p)}Bt.set("DEPRECATION_WARNINGS_ENABLED",!1),Bt.global.Math=Math,Bt.global.Float32Array=Float32Array,It().set("WEBGL_FORCE_F16_TEXTURES",!0);var mO,yO,bO,_O=function(){function e(){this._initialized=!1}return e.prototype.getWidth=function(){return this._modelConfig?this._modelConfig.inWidth:0},e.prototype.getHeight=function(){return this._modelConfig?this._modelConfig.inHeight:0},e.prototype.isInitialized=function(){return this._initialized},e.prototype.getOutput=function(){return this._cnnOutputData},e.prototype.initialize=function(e,t,r){return s(this,void 0,void 0,(function(){var n,o,a,s,l=this;return p(this,(function(p){switch(p.label){case 0:if(null==e)throw"Invalid parameter";return this.release(),this._videoManager=e,this._config=t?i(i({},uk),t):uk,n=dO(this._config.filename,"config.json"),o=n.model$,a=n.progress$,s=a.pipe(q((function(e){return r&&r(e)}))).subscribe(),[4,o.pipe(q((function(e){var t=e.config,r=e.graphModel;l._modelConfig=t,l._model=r;var n=Cu([1,l._modelConfig.inHeight,l._modelConfig.inWidth,l._modelConfig.inChannels]),o=l._model.predict(n,{batchSize:1,verbose:!0});Array.isArray(o)?o.forEach((function(e){e.dispose()})):o.dispose(),l._cnnOutput=Cu([1,l._modelConfig.inHeight,l._modelConfig.inWidth,1]),n.dispose(),l._initialized=!0})),re((function(){return s.unsubscribe()}))).toPromise()];case 1:return p.sent(),[2]}}))}))},e.prototype.processSync=function(){var e;if(this._initialized){var t=this._videoManager.getLastBuffer();if(null!=t){var r,n=Gs(t),o=hg.resizeBilinear(n,[this._modelConfig.inHeight,this._modelConfig.inWidth]),a=ws(o,"float32"),i=Np(a,[1,this._modelConfig.inHeight,this._modelConfig.inWidth,3]),s=Ul(255);if(4==this._modelConfig.inChannels){var p=Np(this._cnnOutput,[1,this._modelConfig.inHeight,this._modelConfig.inWidth,1]),l=lp(i,s);r=Wp([l,p],3),l.dispose(),p.dispose()}else r=lp(i,s);var u,d=this._model.predict(r);u=Array.isArray(d)?d[2]:d,null===(e=this._cnnOutput)||void 0===e||e.dispose();var c=u.shape;if(c&&c[3]>1){var g=Gd(u);this._cnnOutput=Up(g,[0,0,0,1],[-1,-1,-1,1]),g.dispose(),this._cnnOutputData=this._cnnOutput.dataSync()}else this._cnnOutput=nl(u,0,1),this._cnnOutputData=this._cnnOutput.dataSync();Array.isArray(d)?d.forEach((function(e){e.dispose()})):d.dispose(),n.dispose(),o.dispose(),a.dispose(),i.dispose(),s.dispose(),r.dispose()}else console.error("No video frame to process")}else console.error("Foot must be initialized to track")},e.prototype.release=function(){var e,t;null===(e=this._cnnOutput)||void 0===e||e.dispose(),null===(t=this._model)||void 0===t||t.dispose(),this._initialized=!1},e}(),vO=(mO="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,function(e={}){var t,r,n;t||(t=void 0!==e?e:{}),t.ready=new Promise((function(e,t){r=e,n=t}));var o=Object.assign({},t),a="./this.program",i="";"undefined"!=typeof document&&document.currentScript&&(i=document.currentScript.src),mO&&(i=mO),i=0!==i.indexOf("blob:")?i.substr(0,i.replace(/[?#].*/,"").lastIndexOf("/")+1):"";var s,p=t.print||console.log.bind(console),l=t.printErr||console.warn.bind(console);Object.assign(t,o),o=null,t.thisProgram&&(a=t.thisProgram),t.wasmBinary&&(s=t.wasmBinary),t.noExitRuntime,"object"!=typeof WebAssembly&&A("no native wasm support detected");var u,d,c,g,h,f,m,y,b=!1,_="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function v(e,t){for(var r=t+NaN,n=t;e[n]&&!(n>=r);)++n;if(16<n-t&&e.buffer&&_)return _.decode(e.subarray(t,n));for(r="";t<n;){var o=e[t++];if(128&o){var a=63&e[t++];if(192==(224&o))r+=String.fromCharCode((31&o)<<6|a);else{var i=63&e[t++];65536>(o=224==(240&o)?(15&o)<<12|a<<6|i:(7&o)<<18|a<<12|i<<6|63&e[t++])?r+=String.fromCharCode(o):(o-=65536,r+=String.fromCharCode(55296|o>>10,56320|1023&o))}}else r+=String.fromCharCode(o)}return r}function w(e){return e?v(c,e):""}function k(e,t,r,n){if(!(0<n))return 0;var o=r;n=r+n-1;for(var a=0;a<e.length;++a){var i=e.charCodeAt(a);if(55296<=i&&57343>=i&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++a)),127>=i){if(r>=n)break;t[r++]=i}else{if(2047>=i){if(r+1>=n)break;t[r++]=192|i>>6}else{if(65535>=i){if(r+2>=n)break;t[r++]=224|i>>12}else{if(r+3>=n)break;t[r++]=240|i>>18,t[r++]=128|i>>12&63}t[r++]=128|i>>6&63}t[r++]=128|63&i}}return t[r]=0,r-o}function T(){var e=u.buffer;t.HEAP8=d=new Int8Array(e),t.HEAP16=g=new Int16Array(e),t.HEAP32=h=new Int32Array(e),t.HEAPU8=c=new Uint8Array(e),t.HEAPU16=new Uint16Array(e),t.HEAPU32=f=new Uint32Array(e),t.HEAPF32=m=new Float32Array(e),t.HEAPF64=y=new Float64Array(e)}var O=[],x=[],S=[];function E(){var e=t.preRun.shift();O.unshift(e)}var F,M,R,C=0,I=null;function A(e){throw t.onAbort&&t.onAbort(e),l(e="Aborted("+e+")"),b=!0,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),n(e),e}function B(e){return e.startsWith("data:application/octet-stream;base64,")}if(!B(F="libxzimgPoseEstimation.wasm")){var D=F;F=t.locateFile?t.locateFile(D,i):i+D}function L(e){try{if(e==F&&s)return new Uint8Array(s);throw"both async and sync fetching of the wasm failed"}catch(e){A(e)}}function N(e,t,r){return function(e){return s||"function"!=typeof fetch?Promise.resolve().then((function(){return L(e)})):fetch(e,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at '"+e+"'";return t.arrayBuffer()})).catch((function(){return L(e)}))}(e).then((function(e){return WebAssembly.instantiate(e,t)})).then((function(e){return e})).then(r,(function(e){l("failed to asynchronously prepare wasm: "+e),A(e)}))}function P(e){for(;0<e.length;)e.shift()(t)}function j(e){this.F=e-24,this.ta=function(e){f[this.F+4>>2]=e},this.oa=function(e){f[this.F+8>>2]=e},this.pa=function(){h[this.F>>2]=0},this.ma=function(){d[this.F+12>>0]=0},this.qa=function(){d[this.F+13>>0]=0},this.I=function(e,t){this.la(),this.ta(e),this.oa(t),this.pa(),this.ma(),this.qa()},this.la=function(){f[this.F+16>>2]=0}}var G=(e,t)=>{for(var r=0,n=e.length-1;0<=n;n--){var o=e[n];"."===o?e.splice(n,1):".."===o?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r;r--)e.unshift("..");return e},W=e=>{var t="/"===e.charAt(0),r="/"===e.substr(-1);return(e=G(e.split("/").filter((e=>!!e)),!t).join("/"))||t||(e="."),e&&r&&(e+="/"),(t?"/":"")+e},z=e=>{var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1);return e=t[0],t=t[1],e||t?(t&&(t=t.substr(0,t.length-1)),e+t):"."},U=e=>{if("/"===e)return"/";var t=(e=(e=W(e)).replace(/\/$/,"")).lastIndexOf("/");return-1===t?e:e.substr(t+1)};function $(){for(var e="",t=!1,r=arguments.length-1;-1<=r&&!t;r--){if("string"!=typeof(t=0<=r?arguments[r]:"/"))throw new TypeError("Arguments to path.resolve must be strings");if(!t)return"";e=t+"/"+e,t="/"===t.charAt(0)}return(t?"/":"")+(e=G(e.split("/").filter((e=>!!e)),!t).join("/"))||"."}function H(e,t){for(var r=0,n=0;n<e.length;++n){var o=e.charCodeAt(n);127>=o?r++:2047>=o?r+=2:55296<=o&&57343>=o?(r+=4,++n):r+=3}return e=k(e,r=Array(r+1),0,r.length),t&&(r.length=e),r}var V=[];function K(e,t){V[e]={input:[],m:[],J:t},we(e,Q)}var Y,X,q,J,Q={open:function(e){var t=V[e.node.P];if(!t)throw new pe(43);e.l=t,e.seekable=!1},close:function(e){e.l.J.M(e.l)},M:function(e){e.l.J.M(e.l)},read:function(e,t,r,n){if(!e.l||!e.l.J.ca)throw new pe(60);for(var o=0,a=0;a<n;a++){try{var i=e.l.J.ca(e.l)}catch(e){throw new pe(29)}if(void 0===i&&0===o)throw new pe(6);if(null==i)break;o++,t[r+a]=i}return o&&(e.node.timestamp=Date.now()),o},write:function(e,t,r,n){if(!e.l||!e.l.J.V)throw new pe(60);try{for(var o=0;o<n;o++)e.l.J.V(e.l,t[r+o])}catch(e){throw new pe(29)}return n&&(e.node.timestamp=Date.now()),o}},Z={ca:function(e){if(!e.input.length){var t=null;if("undefined"!=typeof window&&"function"==typeof window.prompt?null!==(t=window.prompt("Input: "))&&(t+="\n"):"function"==typeof readline&&null!==(t=readline())&&(t+="\n"),!t)return null;e.input=H(t,!0)}return e.input.shift()},V:function(e,t){null===t||10===t?(p(v(e.m,0)),e.m=[]):0!=t&&e.m.push(t)},M:function(e){e.m&&0<e.m.length&&(p(v(e.m,0)),e.m=[])}},ee={V:function(e,t){null===t||10===t?(l(v(e.m,0)),e.m=[]):0!=t&&e.m.push(t)},M:function(e){e.m&&0<e.m.length&&(l(v(e.m,0)),e.m=[])}},te={o:null,v:function(){return te.createNode(null,"/",16895,0)},createNode:function(e,t,r,n){if(24576==(61440&r)||4096==(61440&r))throw new pe(63);return te.o||(te.o={dir:{node:{B:te.h.B,s:te.h.s,K:te.h.K,N:te.h.N,ha:te.h.ha,ja:te.h.ja,ia:te.h.ia,ga:te.h.ga,R:te.h.R},stream:{D:te.i.D}},file:{node:{B:te.h.B,s:te.h.s},stream:{D:te.i.D,read:te.i.read,write:te.i.write,Y:te.i.Y,da:te.i.da,fa:te.i.fa}},link:{node:{B:te.h.B,s:te.h.s,L:te.h.L},stream:{}},Z:{node:{B:te.h.B,s:te.h.s},stream:ve}}),16384==(61440&(r=he(e,t,r,n)).mode)?(r.h=te.o.dir.node,r.i=te.o.dir.stream,r.g={}):32768==(61440&r.mode)?(r.h=te.o.file.node,r.i=te.o.file.stream,r.j=0,r.g=null):40960==(61440&r.mode)?(r.h=te.o.link.node,r.i=te.o.link.stream):8192==(61440&r.mode)&&(r.h=te.o.Z.node,r.i=te.o.Z.stream),r.timestamp=Date.now(),e&&(e.g[t]=r,e.timestamp=r.timestamp),r},Ga:function(e){return e.g?e.g.subarray?e.g.subarray(0,e.j):new Uint8Array(e.g):new Uint8Array(0)},$:function(e,t){var r=e.g?e.g.length:0;r>=t||(t=Math.max(t,r*(1048576>r?2:1.125)>>>0),0!=r&&(t=Math.max(t,256)),r=e.g,e.g=new Uint8Array(t),0<e.j&&e.g.set(r.subarray(0,e.j),0))},ua:function(e,t){if(e.j!=t)if(0==t)e.g=null,e.j=0;else{var r=e.g;e.g=new Uint8Array(t),r&&e.g.set(r.subarray(0,Math.min(t,e.j))),e.j=t}},h:{B:function(e){var t={};return t.Fa=8192==(61440&e.mode)?e.id:1,t.Ia=e.id,t.mode=e.mode,t.Ka=1,t.uid=0,t.Ha=0,t.P=e.P,16384==(61440&e.mode)?t.size=4096:32768==(61440&e.mode)?t.size=e.j:40960==(61440&e.mode)?t.size=e.link.length:t.size=0,t.Ca=new Date(e.timestamp),t.Ja=new Date(e.timestamp),t.Ea=new Date(e.timestamp),t.ka=4096,t.Da=Math.ceil(t.size/t.ka),t},s:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&te.ua(e,t.size)},K:function(){throw le[44]},N:function(e,t,r,n){return te.createNode(e,t,r,n)},ha:function(e,t,r){if(16384==(61440&e.mode)){try{var n=ge(t,r)}catch(e){}if(n)for(var o in n.g)throw new pe(55)}delete e.parent.g[e.name],e.parent.timestamp=Date.now(),e.name=r,t.g[r]=e,t.timestamp=e.parent.timestamp,e.parent=t},ja:function(e,t){delete e.g[t],e.timestamp=Date.now()},ia:function(e,t){var r,n=ge(e,t);for(r in n.g)throw new pe(55);delete e.g[t],e.timestamp=Date.now()},ga:function(e){var t,r=[".",".."];for(t in e.g)e.g.hasOwnProperty(t)&&r.push(t);return r},R:function(e,t,r){return(e=te.createNode(e,t,41471,0)).link=r,e},L:function(e){if(40960!=(61440&e.mode))throw new pe(28);return e.link}},i:{read:function(e,t,r,n,o){var a=e.node.g;if(o>=e.node.j)return 0;if(8<(e=Math.min(e.node.j-o,n))&&a.subarray)t.set(a.subarray(o,o+e),r);else for(n=0;n<e;n++)t[r+n]=a[o+n];return e},write:function(e,t,r,n,o,a){if(t.buffer===d.buffer&&(a=!1),!n)return 0;if((e=e.node).timestamp=Date.now(),t.subarray&&(!e.g||e.g.subarray)){if(a)return e.g=t.subarray(r,r+n),e.j=n;if(0===e.j&&0===o)return e.g=t.slice(r,r+n),e.j=n;if(o+n<=e.j)return e.g.set(t.subarray(r,r+n),o),n}if(te.$(e,o+n),e.g.subarray&&t.subarray)e.g.set(t.subarray(r,r+n),o);else for(a=0;a<n;a++)e.g[o+a]=t[r+a];return e.j=Math.max(e.j,o+n),n},D:function(e,t,r){if(1===r?t+=e.position:2===r&&32768==(61440&e.node.mode)&&(t+=e.node.j),0>t)throw new pe(28);return t},Y:function(e,t,r){te.$(e.node,t+r),e.node.j=Math.max(e.node.j,t+r)},da:function(e,t,r,n,o){if(32768!=(61440&e.node.mode))throw new pe(43);if(e=e.node.g,2&o||e.buffer!==d.buffer){if((0<r||r+t<e.length)&&(e=e.subarray?e.subarray(r,r+t):Array.prototype.slice.call(e,r,r+t)),r=!0,A(),!(t=void 0))throw new pe(48);d.set(e,t)}else r=!1,t=e.byteOffset;return{F:t,Ba:r}},fa:function(e,t,r,n){return te.i.write(e,t,0,n,r,!1),0}}},re=null,ne={},oe=[],ae=1,ie=null,se=!0,pe=null,le={},ue=(e,t={})=>{if(!(e=$(e)))return{path:"",node:null};if(8<(t=Object.assign({ba:!0,W:0},t)).W)throw new pe(32);e=e.split("/").filter((e=>!!e));for(var r=re,n="/",o=0;o<e.length;o++){var a=o===e.length-1;if(a&&t.parent)break;if(r=ge(r,e[o]),n=W(n+"/"+e[o]),r.O&&(!a||a&&t.ba)&&(r=r.O.root),!a||t.aa)for(a=0;40960==(61440&r.mode);)if(r=Se(n),n=$(z(n),r),r=ue(n,{W:t.W+1}).node,40<a++)throw new pe(32)}return{path:n,node:r}},de=e=>{for(var t;;){if(e===e.parent)return e=e.v.ea,t?"/"!==e[e.length-1]?e+"/"+t:e+t:e;t=t?e.name+"/"+t:e.name,e=e.parent}},ce=(e,t)=>{for(var r=0,n=0;n<t.length;n++)r=(r<<5)-r+t.charCodeAt(n)|0;return(e+r>>>0)%ie.length},ge=(e,t)=>{var r;if(r=(r=ye(e,"x"))?r:e.h.K?0:2)throw new pe(r,e);for(r=ie[ce(e.id,t)];r;r=r.sa){var n=r.name;if(r.parent.id===e.id&&n===t)return r}return e.h.K(e,t)},he=(e,t,r,n)=>(e=new ze(e,t,r,n),t=ce(e.parent.id,e.name),e.sa=ie[t],ie[t]=e),fe={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},me=e=>{var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t},ye=(e,t)=>se?0:!t.includes("r")||292&e.mode?t.includes("w")&&!(146&e.mode)||t.includes("x")&&!(73&e.mode)?2:0:2,be=(e,t)=>{try{return ge(e,t),20}catch(e){}return ye(e,"wx")},_e=(e,t)=>(q||((q=function(){this.I={}}).prototype={},Object.defineProperties(q.prototype,{object:{get:function(){return this.node},set:function(e){this.node=e}},flags:{get:function(){return this.I.flags},set:function(e){this.I.flags=e}},position:{get:function(){return this.I.position},set:function(e){this.I.position=e}}})),e=Object.assign(new q,e),t=((e=0)=>{for(;4096>=e;e++)if(!oe[e])return e;throw new pe(33)})(t),e.A=t,oe[t]=e),ve={open:e=>{e.i=ne[e.node.P].i,e.i.open&&e.i.open(e)},D:()=>{throw new pe(70)}},we=(e,t)=>{ne[e]={i:t}},ke=(e,t)=>{var r="/"===t,n=!t;if(r&&re)throw new pe(10);if(!r&&!n){var o=ue(t,{ba:!1});if(t=o.path,(o=o.node).O)throw new pe(10);if(16384!=(61440&o.mode))throw new pe(54)}t={type:e,La:{},ea:t,ra:[]},(e=e.v(t)).v=t,t.root=e,r?re=e:o&&(o.O=t,o.v&&o.v.ra.push(t))},Te=(e,t,r)=>{var n=ue(e,{parent:!0}).node;if(!(e=U(e))||"."===e||".."===e)throw new pe(28);var o=be(n,e);if(o)throw new pe(o);if(!n.h.N)throw new pe(63);return n.h.N(n,e,t,r)},Oe=(e,t,r)=>{void 0===r&&(r=t,t=438),Te(e,8192|t,r)},xe=(e,t)=>{if(!$(e))throw new pe(44);var r=ue(t,{parent:!0}).node;if(!r)throw new pe(44);t=U(t);var n=be(r,t);if(n)throw new pe(n);if(!r.h.R)throw new pe(63);r.h.R(r,t,e)},Se=e=>{if(!(e=ue(e).node))throw new pe(44);if(!e.h.L)throw new pe(28);return $(de(e.parent),e.h.L(e))},Ee=(e,r,n)=>{if(""===e)throw new pe(44);if("string"==typeof r){var o=fe[r];if(void 0===o)throw Error("Unknown file open mode: "+r);r=o}if(n=64&r?4095&(void 0===n?438:n)|32768:0,"object"==typeof e)var a=e;else{e=W(e);try{a=ue(e,{aa:!(131072&r)}).node}catch(e){}}if(o=!1,64&r)if(a){if(128&r)throw new pe(20)}else a=Te(e,n,0),o=!0;if(!a)throw new pe(44);if(8192==(61440&a.mode)&&(r&=-513),65536&r&&16384!=(61440&a.mode))throw new pe(54);if(!o&&(n=a?40960==(61440&a.mode)?32:16384==(61440&a.mode)&&("r"!==me(r)||512&r)?31:ye(a,me(r)):44))throw new pe(n);if(512&r&&!o){if(!(n="string"==typeof(n=a)?ue(n,{aa:!0}).node:n).h.s)throw new pe(63);if(16384==(61440&n.mode))throw new pe(31);if(32768!=(61440&n.mode))throw new pe(28);if(o=ye(n,"w"))throw new pe(o);n.h.s(n,{size:0,timestamp:Date.now()})}return r&=-131713,(a=_e({node:a,path:de(a),flags:r,seekable:!0,position:0,i:a.i,Aa:[],error:!1})).i.open&&a.i.open(a),!t.logReadFiles||1&r||(J||(J={}),e in J||(J[e]=1)),a},Fe=(e,t,r)=>{if(null===e.A)throw new pe(8);if(!e.seekable||!e.i.D)throw new pe(70);if(0!=r&&1!=r&&2!=r)throw new pe(28);e.position=e.i.D(e,t,r),e.Aa=[]},Me=()=>{pe||((pe=function(e,t){this.name="ErrnoError",this.node=t,this.va=function(e){this.C=e},this.va(e),this.message="FS error"}).prototype=Error(),pe.prototype.constructor=pe,[44].forEach((e=>{le[e]=new pe(e),le[e].stack="<generic error, no stack>"})))},Re=(e,t,r)=>{e=W("/dev/"+e);var n=((e,t)=>{var r=0;return e&&(r|=365),t&&(r|=146),r})(!!t,!!r);X||(X=64);var o=X++<<8|0;we(o,{open:e=>{e.seekable=!1},close:()=>{r&&r.buffer&&r.buffer.length&&r(10)},read:(e,r,n,o)=>{for(var a=0,i=0;i<o;i++){try{var s=t()}catch(e){throw new pe(29)}if(void 0===s&&0===a)throw new pe(6);if(null==s)break;a++,r[n+i]=s}return a&&(e.node.timestamp=Date.now()),a},write:(e,t,n,o)=>{for(var a=0;a<o;a++)try{r(t[n+a])}catch(e){throw new pe(29)}return o&&(e.node.timestamp=Date.now()),a}}),Oe(e,n,o)},Ce={},Ie=void 0;function Ae(){return h[(Ie+=4)-4>>2]}function Be(e){if(!(e=oe[e]))throw new pe(8);return e}var De,Le={};function Ne(){if(!De){var e,t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:a||"./this.program"};for(e in Le)void 0===Le[e]?delete t[e]:t[e]=Le[e];var r=[];for(e in t)r.push(e+"="+t[e]);De=r}return De}function Pe(e){return 0==e%4&&(0!=e%100||0==e%400)}var je=[31,29,31,30,31,30,31,31,30,31,30,31],Ge=[31,28,31,30,31,30,31,31,30,31,30,31];function We(e,r,n,o){var a={string:e=>{var t=0;if(null!=e&&0!==e){var r=1+(e.length<<2);t=Ye(r),k(e,c,t,r)}return t},array:e=>{var t=Ye(e.length);return d.set(e,t),t}};e=t["_"+e];var i,s=[],p=0;if(o)for(var l=0;l<o.length;l++){var u=a[n[l]];u?(0===p&&(p=Ve()),s[l]=u(o[l])):s[l]=o[l]}return i=n=e.apply(null,s),0!==p&&Ke(p),"string"===r?w(i):"boolean"===r?!!i:i}function ze(e,t,r,n){e||(e=this),this.parent=e,this.v=e.v,this.O=null,this.id=ae++,this.name=t,this.mode=r,this.h={},this.i={},this.P=n}Object.defineProperties(ze.prototype,{read:{get:function(){return 365==(365&this.mode)},set:function(e){e?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146==(146&this.mode)},set:function(e){e?this.mode|=146:this.mode&=-147}}}),Me(),ie=Array(4096),ke(te,"/"),Te("/tmp",16895,0),Te("/home",16895,0),Te("/home/web_user",16895,0),(()=>{Te("/dev",16895,0),we(259,{read:()=>0,write:(e,t,r,n)=>n}),Oe("/dev/null",259),K(1280,Z),K(1536,ee),Oe("/dev/tty",1280),Oe("/dev/tty1",1536);var e=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var e=new Uint8Array(1);return()=>(crypto.getRandomValues(e),e[0])}return()=>A("randomDevice")}();Re("random",e),Re("urandom",e),Te("/dev/shm",16895,0),Te("/dev/shm/tmp",16895,0)})(),(()=>{Te("/proc",16895,0);var e=Te("/proc/self",16895,0);Te("/proc/self/fd",16895,0),ke({v:()=>{var t=he(e,"fd",16895,73);return t.h={K:(e,t)=>{var r=oe[+t];if(!r)throw new pe(8);return(e={parent:null,v:{ea:"fake"},h:{L:()=>r.path}}).parent=e}},t}},"/proc/self/fd")})();var Ue,$e={__assert_fail:function(e,t,r,n){A("Assertion failed: "+w(e)+", at: "+[t?w(t):"unknown filename",r,n?w(n):"unknown function"])},__cxa_throw:function(e,t,r){throw new j(e).I(t,r),e},__syscall_fcntl64:function(e,t,r){Ie=r;try{var n=Be(e);switch(t){case 0:var o=Ae();return 0>o?-28:_e(n,o).A;case 1:case 2:case 6:case 7:return 0;case 3:return n.flags;case 4:return o=Ae(),n.flags|=o,0;case 5:return o=Ae(),g[o+0>>1]=2,0;case 16:case 8:default:return-28;case 9:return h[He()>>2]=28,-1}}catch(e){if(void 0===Ce||"ErrnoError"!==e.name)throw e;return-e.C}},__syscall_ioctl:function(e,t,r){Ie=r;try{var n=Be(e);switch(t){case 21509:case 21505:case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:case 21523:case 21524:return n.l?0:-59;case 21519:if(!n.l)return-59;var o=Ae();return h[o>>2]=0;case 21520:return n.l?-28:-59;case 21531:if(e=o=Ae(),!n.i.na)throw new pe(59);return n.i.na(n,t,e);default:return-28}}catch(e){if(void 0===Ce||"ErrnoError"!==e.name)throw e;return-e.C}},__syscall_openat:function(e,t,r,n){Ie=n;try{var o=t=w(t);if("/"===o.charAt(0))t=o;else{var a=-100===e?"/":Be(e).path;if(0==o.length)throw new pe(44);t=W(a+"/"+o)}var i=n?Ae():0;return Ee(t,r,i).A}catch(e){if(void 0===Ce||"ErrnoError"!==e.name)throw e;return-e.C}},abort:function(){A("")},emscripten_memcpy_big:function(e,t,r){c.copyWithin(e,t,t+r)},emscripten_resize_heap:function(e){var t=c.length;if(2147483648<(e>>>=0))return!1;for(var r=1;4>=r;r*=2){var n=t*(1+.2/r);n=Math.min(n,e+100663296);var o=Math,a=o.min;n=Math.max(e,n),n+=(65536-n%65536)%65536;e:{var i=u.buffer;try{u.grow(a.call(o,2147483648,n)-i.byteLength+65535>>>16),T();var s=1;break e}catch(e){}s=void 0}if(s)return!0}return!1},environ_get:function(e,t){var r=0;return Ne().forEach((function(n,o){var a=t+r;for(o=f[e+4*o>>2]=a,a=0;a<n.length;++a)d[o++>>0]=n.charCodeAt(a);d[o>>0]=0,r+=n.length+1})),0},environ_sizes_get:function(e,t){var r=Ne();f[e>>2]=r.length;var n=0;return r.forEach((function(e){n+=e.length+1})),f[t>>2]=n,0},fd_close:function(e){try{var t=Be(e);if(null===t.A)throw new pe(8);t.U&&(t.U=null);try{t.i.close&&t.i.close(t)}catch(e){throw e}finally{oe[t.A]=null}return t.A=null,0}catch(e){if(void 0===Ce||"ErrnoError"!==e.name)throw e;return e.C}},fd_read:function(e,t,r,n){try{e:{var o=Be(e);e=t;for(var a,i=t=0;i<r;i++){var s=f[e>>2],p=f[e+4>>2];e+=8;var l=o,u=s,c=p,g=a,h=d;if(0>c||0>g)throw new pe(28);if(null===l.A)throw new pe(8);if(1==(2097155&l.flags))throw new pe(8);if(16384==(61440&l.node.mode))throw new pe(31);if(!l.i.read)throw new pe(28);var m=void 0!==g;if(m){if(!l.seekable)throw new pe(70)}else g=l.position;var y=l.i.read(l,h,u,c,g);m||(l.position+=y);var b=y;if(0>b){var _=-1;break e}if(t+=b,b<p)break;void 0!==a&&(a+=b)}_=t}return f[n>>2]=_,0}catch(e){if(void 0===Ce||"ErrnoError"!==e.name)throw e;return e.C}},fd_seek:function(e,t,r,n,o){try{if(t=r+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*r:NaN,isNaN(t))return 61;var a=Be(e);return Fe(a,t,n),R=[a.position>>>0,(M=a.position,1<=+Math.abs(M)?0<M?(0|Math.min(+Math.floor(M/4294967296),4294967295))>>>0:~~+Math.ceil((M-+(~~M>>>0))/4294967296)>>>0:0)],h[o>>2]=R[0],h[o+4>>2]=R[1],a.U&&0===t&&0===n&&(a.U=null),0}catch(e){if(void 0===Ce||"ErrnoError"!==e.name)throw e;return e.C}},fd_write:function(e,t,r,n){try{e:{var o=Be(e);e=t;for(var a,i=t=0;i<r;i++){var s=f[e>>2],p=f[e+4>>2];e+=8;var l=o,u=s,c=p,g=a,h=d;if(0>c||0>g)throw new pe(28);if(null===l.A)throw new pe(8);if(0==(2097155&l.flags))throw new pe(8);if(16384==(61440&l.node.mode))throw new pe(31);if(!l.i.write)throw new pe(28);l.seekable&&1024&l.flags&&Fe(l,0,2);var m=void 0!==g;if(m){if(!l.seekable)throw new pe(70)}else g=l.position;var y=l.i.write(l,h,u,c,g,void 0);m||(l.position+=y);var b=y;if(0>b){var _=-1;break e}t+=b,void 0!==a&&(a+=b)}_=t}return f[n>>2]=_,0}catch(e){if(void 0===Ce||"ErrnoError"!==e.name)throw e;return e.C}},strftime_l:function(e,t,r,n){return function(e,t,r,n){function o(e,t,r){for(e="number"==typeof e?e.toString():e||"";e.length<t;)e=r[0]+e;return e}function a(e,t){return o(e,t,"0")}function i(e,t){function r(e){return 0>e?-1:0<e?1:0}var n;return 0===(n=r(e.getFullYear()-t.getFullYear()))&&0===(n=r(e.getMonth()-t.getMonth()))&&(n=r(e.getDate()-t.getDate())),n}function s(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function p(e){var t=e.G;for(e=new Date(new Date(e.H+1900,0,1).getTime());0<t;){var r=e.getMonth(),n=(Pe(e.getFullYear())?je:Ge)[r];if(!(t>n-e.getDate())){e.setDate(e.getDate()+t);break}t-=n-e.getDate()+1,e.setDate(1),11>r?e.setMonth(r+1):(e.setMonth(0),e.setFullYear(e.getFullYear()+1))}return r=new Date(e.getFullYear()+1,0,4),t=s(new Date(e.getFullYear(),0,4)),r=s(r),0>=i(t,e)?0>=i(r,e)?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1}var l=h[n+40>>2];for(var u in n={ya:h[n>>2],xa:h[n+4>>2],S:h[n+8>>2],X:h[n+12>>2],T:h[n+16>>2],H:h[n+20>>2],u:h[n+24>>2],G:h[n+28>>2],Ma:h[n+32>>2],wa:h[n+36>>2],za:l?w(l):""},r=w(r),l={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})r=r.replace(new RegExp(u,"g"),l[u]);var c="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),g="January February March April May June July August September October November December".split(" ");for(u in l={"%a":function(e){return c[e.u].substring(0,3)},"%A":function(e){return c[e.u]},"%b":function(e){return g[e.T].substring(0,3)},"%B":function(e){return g[e.T]},"%C":function(e){return a((e.H+1900)/100|0,2)},"%d":function(e){return a(e.X,2)},"%e":function(e){return o(e.X,2," ")},"%g":function(e){return p(e).toString().substring(2)},"%G":function(e){return p(e)},"%H":function(e){return a(e.S,2)},"%I":function(e){return 0==(e=e.S)?e=12:12<e&&(e-=12),a(e,2)},"%j":function(e){for(var t=0,r=0;r<=e.T-1;t+=(Pe(e.H+1900)?je:Ge)[r++]);return a(e.X+t,3)},"%m":function(e){return a(e.T+1,2)},"%M":function(e){return a(e.xa,2)},"%n":function(){return"\n"},"%p":function(e){return 0<=e.S&&12>e.S?"AM":"PM"},"%S":function(e){return a(e.ya,2)},"%t":function(){return"\t"},"%u":function(e){return e.u||7},"%U":function(e){return a(Math.floor((e.G+7-e.u)/7),2)},"%V":function(e){var t=Math.floor((e.G+7-(e.u+6)%7)/7);if(2>=(e.u+371-e.G-2)%7&&t++,t)53==t&&(4==(r=(e.u+371-e.G)%7)||3==r&&Pe(e.H)||(t=1));else{t=52;var r=(e.u+7-e.G-1)%7;(4==r||5==r&&Pe(e.H%400-1))&&t++}return a(t,2)},"%w":function(e){return e.u},"%W":function(e){return a(Math.floor((e.G+7-(e.u+6)%7)/7),2)},"%y":function(e){return(e.H+1900).toString().substring(2)},"%Y":function(e){return e.H+1900},"%z":function(e){var t=0<=(e=e.wa);return e=Math.abs(e)/60,(t?"+":"-")+String("0000"+(e/60*100+e%60)).slice(-4)},"%Z":function(e){return e.za},"%%":function(){return"%"}},r=r.replace(/%%/g,"\0\0"),l)r.includes(u)&&(r=r.replace(new RegExp(u,"g"),l[u](n)));return(u=H(r=r.replace(/\0\0/g,"%"),!1)).length>t?0:(d.set(u,e),u.length-1)}(e,t,r,n)}};function He(){return(He=t.asm.__errno_location).apply(null,arguments)}function Ve(){return(Ve=t.asm.stackSave).apply(null,arguments)}function Ke(){return(Ke=t.asm.stackRestore).apply(null,arguments)}function Ye(){return(Ye=t.asm.stackAlloc).apply(null,arguments)}function Xe(){function e(){if(!Ue&&(Ue=!0,t.calledRun=!0,!b)){if(t.noFSInit||Y||(Y=!0,Me(),t.stdin=t.stdin,t.stdout=t.stdout,t.stderr=t.stderr,t.stdin?Re("stdin",t.stdin):xe("/dev/tty","/dev/stdin"),t.stdout?Re("stdout",null,t.stdout):xe("/dev/tty","/dev/stdout"),t.stderr?Re("stderr",null,t.stderr):xe("/dev/tty1","/dev/stderr"),Ee("/dev/stdin",0),Ee("/dev/stdout",1),Ee("/dev/stderr",1)),se=!1,P(x),r(t),t.onRuntimeInitialized&&t.onRuntimeInitialized(),t.postRun)for("function"==typeof t.postRun&&(t.postRun=[t.postRun]);t.postRun.length;){var e=t.postRun.shift();S.unshift(e)}P(S)}}if(!(0<C)){if(t.preRun)for("function"==typeof t.preRun&&(t.preRun=[t.preRun]);t.preRun.length;)E();P(O),0<C||(t.setStatus?(t.setStatus("Running..."),setTimeout((function(){setTimeout((function(){t.setStatus("")}),1),e()}),1)):e())}}if(function(){function e(e){if(e=e.exports,t.asm=e,u=t.asm.memory,T(),x.unshift(t.asm.__wasm_call_ctors),C--,t.monitorRunDependencies&&t.monitorRunDependencies(C),0==C&&I){var r=I;I=null,r()}return e}var r={env:$e,wasi_snapshot_preview1:$e};if(C++,t.monitorRunDependencies&&t.monitorRunDependencies(C),t.instantiateWasm)try{return t.instantiateWasm(r,e)}catch(e){l("Module.instantiateWasm callback failed with error: "+e),n(e)}(function(e,t){var r=F;return s||"function"!=typeof WebAssembly.instantiateStreaming||B(r)||"function"!=typeof fetch?N(r,e,t):fetch(r,{credentials:"same-origin"}).then((function(n){return WebAssembly.instantiateStreaming(n,e).then(t,(function(n){return l("wasm streaming compile failed: "+n),l("falling back to ArrayBuffer instantiation"),N(r,e,t)}))}))})(r,(function(t){e(t.instance)})).catch(n)}(),t._malloc=function(){return(t._malloc=t.asm.malloc).apply(null,arguments)},t._free=function(){return(t._free=t.asm.free).apply(null,arguments)},t._xzimgInitializeCamera=function(){return(t._xzimgInitializeCamera=t.asm.xzimgInitializeCamera).apply(null,arguments)},t._xzimgPoseEstimationInitializeFacePose=function(){return(t._xzimgPoseEstimationInitializeFacePose=t.asm.xzimgPoseEstimationInitializeFacePose).apply(null,arguments)},t._xzimgPoseEstimationInitialize=function(){return(t._xzimgPoseEstimationInitialize=t.asm.xzimgPoseEstimationInitialize).apply(null,arguments)},t._xzimgPoseEstimationRelease=function(){return(t._xzimgPoseEstimationRelease=t.asm.xzimgPoseEstimationRelease).apply(null,arguments)},t._xzimgPoseEstimationPrepareCrop=function(){return(t._xzimgPoseEstimationPrepareCrop=t.asm.xzimgPoseEstimationPrepareCrop).apply(null,arguments)},t._xzimgPoseEstimationEstimateFacePose=function(){return(t._xzimgPoseEstimationEstimateFacePose=t.asm.xzimgPoseEstimationEstimateFacePose).apply(null,arguments)},t._xzimgGetHeatmapsLocations=function(){return(t._xzimgGetHeatmapsLocations=t.asm.xzimgGetHeatmapsLocations).apply(null,arguments)},t._xzimgEstimateRigidPose=function(){return(t._xzimgEstimateRigidPose=t.asm.xzimgEstimateRigidPose).apply(null,arguments)},t._xzimgEstimateGetSimilarity=function(){return(t._xzimgEstimateGetSimilarity=t.asm.xzimgEstimateGetSimilarity).apply(null,arguments)},t._xzimgWarpAffine=function(){return(t._xzimgWarpAffine=t.asm.xzimgWarpAffine).apply(null,arguments)},t._xzimgMatchRecKeypsInit=function(){return(t._xzimgMatchRecKeypsInit=t.asm.xzimgMatchRecKeypsInit).apply(null,arguments)},t._xzimgMatchRecKeyps=function(){return(t._xzimgMatchRecKeyps=t.asm.xzimgMatchRecKeyps).apply(null,arguments)},t._xzimgEstimateInitNonRigidPose=function(){return(t._xzimgEstimateInitNonRigidPose=t.asm.xzimgEstimateInitNonRigidPose).apply(null,arguments)},t._xzimgEstimateNonRigidPose=function(){return(t._xzimgEstimateNonRigidPose=t.asm.xzimgEstimateNonRigidPose).apply(null,arguments)},t._xzimgEstimateBodyNonRigidPose=function(){return(t._xzimgEstimateBodyNonRigidPose=t.asm.xzimgEstimateBodyNonRigidPose).apply(null,arguments)},t._xzimgEstimateNonRigidPoseBase=function(){return(t._xzimgEstimateNonRigidPoseBase=t.asm.xzimgEstimateNonRigidPoseBase).apply(null,arguments)},t._xzimgEstimateGetNumVertices=function(){return(t._xzimgEstimateGetNumVertices=t.asm.xzimgEstimateGetNumVertices).apply(null,arguments)},t._xzimgEstimateGetDenseVertices=function(){return(t._xzimgEstimateGetDenseVertices=t.asm.xzimgEstimateGetDenseVertices).apply(null,arguments)},t.dynCall_jiji=function(){return(t.dynCall_jiji=t.asm.dynCall_jiji).apply(null,arguments)},t.dynCall_viijii=function(){return(t.dynCall_viijii=t.asm.dynCall_viijii).apply(null,arguments)},t.dynCall_iiiiij=function(){return(t.dynCall_iiiiij=t.asm.dynCall_iiiiij).apply(null,arguments)},t.dynCall_iiiiijj=function(){return(t.dynCall_iiiiijj=t.asm.dynCall_iiiiijj).apply(null,arguments)},t.dynCall_iiiiiijj=function(){return(t.dynCall_iiiiiijj=t.asm.dynCall_iiiiiijj).apply(null,arguments)},t.ccall=We,t.cwrap=function(e,r,n,o){var a=!n||n.every((e=>"number"===e||"boolean"===e));return"string"!==r&&a&&!o?t["_"+e]:function(){return We(e,r,n,arguments)}},t.setValue=function(e,t,r="i8"){switch(r.endsWith("*")&&(r="*"),r){case"i1":case"i8":d[e>>0]=t;break;case"i16":g[e>>1]=t;break;case"i32":h[e>>2]=t;break;case"i64":R=[t>>>0,(M=t,1<=+Math.abs(M)?0<M?(0|Math.min(+Math.floor(M/4294967296),4294967295))>>>0:~~+Math.ceil((M-+(~~M>>>0))/4294967296)>>>0:0)],h[e>>2]=R[0],h[e+4>>2]=R[1];break;case"float":m[e>>2]=t;break;case"double":y[e>>3]=t;break;case"*":f[e>>2]=t;break;default:A("invalid type for setValue: "+r)}},t.getValue=function(e,t="i8"){switch(t.endsWith("*")&&(t="*"),t){case"i1":case"i8":return d[e>>0];case"i16":return g[e>>1];case"i32":case"i64":return h[e>>2];case"float":return m[e>>2];case"double":return y[e>>3];case"*":return f[e>>2];default:A("invalid type for getValue: "+t)}},I=function e(){Ue||Xe(),Ue||(I=e)},t.preInit)for("function"==typeof t.preInit&&(t.preInit=[t.preInit]);0<t.preInit.length;)t.preInit.pop()();return Xe(),e.ready});let wO;!function(e){e[e.float32=0]="float32",e[e.int32=1]="int32",e[e.bool=2]="bool",e[e.string=3]="string",e[e.complex64=4]="complex64"}(yO||(yO={})),function(e){e[e.linear=0]="linear",e[e.relu=1]="relu",e[e.relu6=2]="relu6",e[e.prelu=3]="prelu",e[e.leakyrelu=4]="leakyrelu",e[e.sigmoid=5]="sigmoid",e[e.elu=6]="elu"}(bO||(bO={}));const kO={kernelName:Mn,backendName:"wasm",setupFunc:function(e){wO=e.wasm.cwrap(Mn,null,["number","array","number","number","array","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:r,attrs:n}=e,{a:o,b:a,bias:i,preluActivationWeights:s}=t;if("float32"!==o.dtype||"float32"!==a.dtype)throw new Error("_FusedMatMul for non non-float32 tensors not yet supported.");const{transposeA:p,transposeB:l,activation:u,leakyreluAlpha:d}=n,c=r.dataIdMap.get(o.dataId).id,g=r.dataIdMap.get(a.dataId).id;let h=0;if(null!=i){const e=r.dataIdMap.get(i.dataId);if(1!==e.shape.length)throw new Error(`_FusedMatMul only supports rank-1 bias but got rank ${e.shape.length}.`);h=e.id}const f=null==s?0:r.dataIdMap.get(s.dataId).id,m=bO[u];if(null==m)throw new Error(`${u} activation not yet supported for FusedConv2D in the wasm backend.`);const y=p?o.shape[2]:o.shape[1],b=l?a.shape[1]:a.shape[2],_=Ns(o.shape.slice(0,-2),a.shape.slice(0,-2)),v=r.makeOutput([..._,y,b],o.dtype),w=r.dataIdMap.get(v.dataId).id,k=new Uint8Array(new Int32Array(o.shape).buffer),T=new Uint8Array(new Int32Array(a.shape).buffer);return wO(c,k,o.shape.length,g,T,a.shape.length,p,l,m,h,f,d||0,w),v}};function TO(e,t){let r;return{kernelName:e,backendName:"wasm",setupFunc:function(t){r=t.wasm.cwrap(e,null,["number","number","number"])},kernelFunc:function(e){const{backend:n,inputs:{x:o}}=e,a=n.dataIdMap.get(o.dataId).id,i=n.makeOutput(o.shape,t||o.dtype),s=n.dataIdMap.get(i.dataId).id;return 0===nt(i.shape)||r(a,yO[o.dtype],s),i}}}const OO=TO("Abs");function xO(e,t,r){let n;return{kernelName:e,backendName:"wasm",setupFunc:function(t){n=t.wasm.cwrap(e,null,["number","array","number","number","array","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:o}=e,{a,b:i}=o,s=t.dataIdMap.get(a.dataId).id,p=t.dataIdMap.get(i.dataId).id,l=null!=r?r:a.dtype,u=Ns(a.shape,i.shape),d=t.makeOutput(u,l);if(0===nt(u))return d;const c=new Uint8Array(new Int32Array(a.shape).buffer),g=new Uint8Array(new Int32Array(i.shape).buffer),h=t.dataIdMap.get(d.dataId).id;return n(s,c,a.shape.length,p,g,i.shape.length,yO[a.dtype],h),d}}}const SO=xO(Nt);let EO;const FO={kernelName:Pt,backendName:"wasm",setupFunc:function(e){EO=e.wasm.cwrap(Pt,null,["array","number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:r}=e,n=r.makeOutput(t[0].shape,t[0].dtype);if(0===nt(n.shape))return n;const o=t.map((e=>r.dataIdMap.get(e.dataId).id)),a=new Uint8Array(new Int32Array(o).buffer),i=r.dataIdMap.get(n.dataId).id;return EO(a,o.length,yO[n.dtype],i),n}};function MO(e){const{inputs:{x:t},backend:r}=e;if("string"===t.dtype)return _i(r.readSync(t.dataId),t.shape,t.dtype);const n=r.makeOutput(t.shape,t.dtype),o=r.typedArrayFromHeap(t);return r.typedArrayFromHeap(n).set(o),n}const RO={kernelName:yr,backendName:"wasm",kernelFunc:MO};let CO;function IO(e){const{inputs:t,backend:r,attrs:n}=e,[o,a]=function(e,t){const r=[],n=[];for(let o=0;o<e.length;++o)1!==e[o]&&r.push(e[o]),1!==e[t[o]]&&n.push(t[o]);for(let e=0;e<n.length;++e){let t=-1;for(let r=0;r<n.length;++r)n[r]>=e&&(-1===t||n[t]>n[r])&&(t=r);n[t]=e}return[r,n]}(t.x.shape,n.perm);let i=!0;for(let e=0;e<a.length;e++)a[e]!==e&&(i=!1);const s=function(e,t){const r=new Array(e.length);for(let n=0;n<r.length;n++)r[n]=e[t[n]];return r}(t.x.shape,n.perm),p={dataId:t.x.dataId,shape:o,dtype:t.x.dtype};if(i){const e=MO({inputs:t,backend:r});return e.shape=s,e}const l=r.makeOutput(s,p.dtype),u=r.dataIdMap.get(p.dataId).id,d=r.dataIdMap.get(l.dataId).id,c=new Uint8Array(new Int32Array(a).buffer),g=new Uint8Array(new Int32Array(p.shape).buffer);return CO(u,g,p.shape.length,yO[p.dtype],d,c,a.length),l}const AO={kernelName:Tn,backendName:"wasm",kernelFunc:IO,setupFunc:function(e){CO=e.wasm.cwrap(Tn,null,["number","array","number","number","number","array","number"])}};function BO(e,t,r){const n=e.shape,o=e.shape.length,a=ut(t,n);let i=a;const s=Nl(i,o);let p=null,l=!1;if(null!=s){const t=new Array(o);for(let e=0;e<t.length;e++)t[e]=n[s[e]];i=jl(i.length,o),p=IO({inputs:{x:e},attrs:{perm:s},backend:r});const a=r.dataIdMap.get(e.dataId).id;r.dataIdMap.get(p.dataId).id!==a&&(l=!0)}return{transposed:p,originalAxes:a,axes:i,inputWasTransposed:l}}let DO;const LO={kernelName:jt,backendName:"wasm",setupFunc:function(e){DO=e.wasm.cwrap(jt,null,["number, number, number"])},kernelFunc:function(e){const{backend:t,inputs:r,attrs:n}=e,{axis:o,keepDims:a}=n,{x:i}=r;let s=t.dataIdMap.get(i.dataId).id,p=i;const{transposed:l,axes:u,originalAxes:d,inputWasTransposed:c}=BO(i,o,t);c&&(p=l,s=t.dataIdMap.get(l.dataId).id),Ll("all",u,p.shape.length);const[g,h]=Bl(p.shape,u),f=nt(h),m=t.makeOutput(g,i.dtype);if(0!==nt(p.shape)){const e=t.dataIdMap.get(m.dataId).id;DO(s,f,e)}if(c&&t.disposeData(l.dataId),a){const e=Dl(m.shape,d);m.shape=e}return m}};let NO;const PO={kernelName:Gt,backendName:"wasm",setupFunc:function(e){NO=e.wasm.cwrap(Gt,null,["number, number, number"])},kernelFunc:function(e){const{backend:t,inputs:r,attrs:n}=e,{axis:o,keepDims:a}=n,{x:i}=r;let s=t.dataIdMap.get(i.dataId).id,p=i;const{transposed:l,axes:u,originalAxes:d,inputWasTransposed:c}=BO(i,o,t);c&&(p=l,s=t.dataIdMap.get(l.dataId).id),Ll("any",u,p.shape.length);const[g,h]=Bl(p.shape,u),f=nt(h),m=t.makeOutput(g,i.dtype);if(0!==nt(p.shape)){const e=t.dataIdMap.get(m.dataId).id;NO(s,f,e)}if(c&&t.disposeData(l.dataId),a){const e=Dl(m.shape,d);m.shape=e}return m}};let jO;const GO={kernelName:Wt,backendName:"wasm",kernelFunc:function(e){const{backend:t,inputs:r,attrs:n}=e,{axis:o}=n,{x:a}=r,i=t.dataIdMap.get(a.dataId).id;let s=i,p=a;const{transposed:l,axes:u,inputWasTransposed:d}=BO(a,o,t);if(d){const e=t.dataIdMap.get(l.dataId).id;e!==i&&(p=l,s=e)}const c=p.shape.slice(0,-1),g=t.makeOutput(c,"int32"),h=t.dataIdMap.get(g.dataId).id,f=nt(g.shape),m=p.shape[u[0]];return jO(s,yO[p.dtype],f,m,h),d&&t.disposeData(l.dataId),g},setupFunc:function(e){jO=e.wasm.cwrap(Wt,null,["number","number","number","number","number"])}};let WO;const zO={kernelName:zt,backendName:"wasm",setupFunc:function(e){WO=e.wasm.cwrap(zt,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,attrs:r,backend:n}=e,o=t.x,a=n.dataIdMap.get(o.dataId).id,{filterSize:i,strides:s,pad:p,dimRoundingMode:l}=r,u=Op(o.shape,i,s,1,p,l),d=u.filterHeight,c=u.filterWidth,g=u.padInfo.top,h=u.padInfo.right,f=u.padInfo.bottom,m=u.padInfo.left,y=u.strideHeight,b=u.strideWidth,_=u.inChannels;if("channelsLast"!==u.dataFormat)throw new Error(`wasm backend does not support dataFormat:'${u.dataFormat}'. Please use 'channelsLast'.`);if(1!==u.dilationWidth||1!==u.dilationHeight)throw new Error(`was backend only supports average pooling with dilation = [1, 1], got [${u.dilationHeight}, ${u.dilationWidth}].`);const v=n.makeOutput(u.outShape,"float32"),w=n.dataIdMap.get(v.dataId).id;return WO(a,o.shape[0],o.shape[1],o.shape[2],d,c,g,h,f,m,y,b,_,w),v}};function UO(e){const{inputs:t,attrs:r}=e,{x:n}=t,{shape:o}=r,a=nt(n.shape),i=lt(o,a);return et(a===nt(i),(()=>`new shape: ${i}, old shape: ${n.shape}. New shape and old shape must have the same number of elements.`)),e.backend.incRef(n.dataId),{dataId:n.dataId,shape:i,dtype:n.dtype}}const $O={kernelName:Vr,backendName:"wasm",kernelFunc:UO};let HO;const VO={kernelName:Ut,backendName:"wasm",setupFunc:function(e){HO=e.wasm.cwrap(Ut,null,["number","array","number","number","array","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:r,attrs:n}=e,{a:o,b:a}=t,{transposeA:i,transposeB:s}=n;if("float32"!==o.dtype||"float32"!==a.dtype)throw new Error("BatchMatMul for non non-float32 tensors not yet supported.");const p=o.shape.length,l=a.shape.length,u=i?o.shape[p-2]:o.shape[p-1],d=s?a.shape[l-1]:a.shape[l-2],c=i?o.shape[p-1]:o.shape[p-2],g=s?a.shape[l-2]:a.shape[l-1],h=o.shape.slice(0,-2),f=a.shape.slice(0,-2),m=nt(h),y=nt(f),b=Ns(o.shape.slice(0,-2),a.shape.slice(0,-2)).concat([c,g]);et(u===d,(()=>`Error in matMul: inner shapes (${u}) and (${d}) of Tensors with shapes ${o.shape} and ${a.shape} and transposeA=${i} and transposeB=${s} must match.`));const _=s?[y,g,d]:[y,d,g],v=UO({inputs:{x:o},backend:r,attrs:{shape:i?[m,u,c]:[m,c,u]}}),w=UO({inputs:{x:a},backend:r,attrs:{shape:_}}),k=r.dataIdMap.get(v.dataId).id,T=r.dataIdMap.get(w.dataId).id,O=i?v.shape[2]:v.shape[1],x=s?w.shape[1]:w.shape[2],S=Math.max(m,y),E=r.makeOutput([S,O,x],v.dtype),F=r.dataIdMap.get(E.dataId).id,M=new Uint8Array(new Int32Array(v.shape).buffer),R=new Uint8Array(new Int32Array(w.shape).buffer);return HO(k,M,v.shape.length,T,R,w.shape.length,i,s,F),r.disposeData(v.dataId),r.disposeData(w.dataId),E.shape=b,E}};function KO(e){const{inputs:{x:t},attrs:{begin:r,size:n},backend:o}=e,[a,i]=np(t,r,n),s=tp(t.shape,a,i),p=o.readSync(t.dataId),l=o.makeOutput(i,t.dtype),u=vt(t.shape),d=o.dataIdMap.get(l.dataId);if(s){const e=rp(a,u);return"string"===t.dtype?d.stringBytes=p.slice(e,e+nt(i)):o.typedArrayFromHeap(l).set(p.subarray(e,e+nt(i))),l}if("string"===t.dtype){const e=_m(p,a,i,t.shape,t.dtype);return d.stringBytes=e,l}const c=o.typedArrayFromHeap(l),g=t.shape.length;if(2===g)!function(e,t,r,n,o){let a=0;const i=n[0],s=n[1],p=i+o[0];for(let n=i;n<p;n++){const i=n*t+s;r.set(e.subarray(i,i+o[1]),a),a+=o[1]}}(p,u[0],c,a,i);else if(3===g)!function(e,t,r,n,o,a){let i=0;const s=o[0],p=o[1],l=o[2],u=s+a[0],d=p+a[1];for(let o=s;o<u;o++)for(let s=p;s<d;s++){const p=o*t+s*r+l;n.set(e.subarray(p,p+a[2]),i),i+=a[2]}}(p,u[0],u[1],c,a,i);else if(4===g)!function(e,t,r,n,o,a,i){let s=0;const p=a[0],l=a[1],u=a[2],d=p+i[0],c=l+i[1],g=u+i[2],h=a[3];for(let a=p;a<d;a++)for(let p=l;p<c;p++)for(let l=u;l<g;l++){const u=a*t+p*r+l*n+h;o.set(e.subarray(u,u+i[3]),s),s+=i[3]}}(p,u[0],u[1],u[2],c,a,i);else{const e=_m(p,a,i,t.shape,t.dtype);c.set(e)}return l}const YO={kernelName:tn,backendName:"wasm",kernelFunc:KO},XO={kernelName:$t,backendName:"wasm",kernelFunc:function(e){const{inputs:t,backend:r,attrs:n}=e,{x:o}=t,{blockShape:a,crops:i}=n,s=a.reduce(((e,t)=>e*t)),p=Rg(o.shape,a,s),l=Cg(p.length,a.length),u=Ig(o.shape,a,s),d=Ag(i,a.length),c=Bg(u,i,a.length),g=UO({inputs:{x:o},backend:r,attrs:{shape:p}}),h=IO({inputs:{x:g},backend:r,attrs:{perm:l}}),f=KO({inputs:{x:UO({inputs:{x:h},backend:r,attrs:{shape:u}})},backend:r,attrs:{begin:d,size:c}});return r.disposeData(g.dataId),r.disposeData(h.dataId),r.disposeData(g.dataId),f}};function qO(e){const{inputs:{x:t},attrs:{dtype:r},backend:n}=e,o=n.makeOutput(t.shape,r),a=n.typedArrayFromHeap(t);return n.typedArrayFromHeap(o).set(a),o}const JO={kernelName:Ht,backendName:"wasm",kernelFunc:qO},QO=TO(Vt);let ZO;const ex={kernelName:Kt,backendName:"wasm",setupFunc:function(e){ZO=e.wasm.cwrap(Kt,null,["number","number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:r,attrs:n}=e,{x:o}=t,{clipValueMin:a,clipValueMax:i}=n,s=r.dataIdMap.get(o.dataId).id,p=r.makeOutput(o.shape,o.dtype),l=r.dataIdMap.get(p.dataId).id;return ZO(s,a,i,l),p}};function tx(e){const{inputs:t,backend:r}=e,n=ut(e.attrs.axis,t[0].shape)[0];vg(t.map((e=>e.shape)),n);let o=wg(t.map((e=>e.shape)),n);const a=t.filter((e=>nt(e.shape)>0));if(1===a.length)return MO({inputs:{x:a[0]},backend:r});const i=r.makeOutput(o,t[0].dtype);if(0===nt(o))return i;if("string"===a[0].dtype){const e=a.map((e=>{const t=nt(e.shape.slice(n));return UO({inputs:{x:e},backend:r,attrs:{shape:[-1,t]}})})),s=e.map((e=>({vals:r.readSync(e.dataId),shape:e.shape})));o=wg(e.map((e=>e.shape)),1);const p=1===e[0].shape[0],l=Gf(s,o,t[0].dtype,p),u=wg(a.map((e=>e.shape)),n);return i.shape=u,r.dataIdMap.get(i.dataId).stringBytes=Jg(l),e.forEach((e=>r.disposeData(e.dataId))),i}const s=nt(a[0].shape.slice(0,n));let p=0;const l=a.map((e=>{const t=nt(e.shape.slice(n));return p+=t,t})),u=a.map((e=>r.typedArrayFromHeap(e))),d=r.typedArrayFromHeap(i);for(let e=0;e<s;e++){let t=e*p;for(let r=0;r<u.length;r++){const n=l[r],o=e*n,a=u[r].subarray(o,o+n);d.set(a,t),t+=n}}return i}const rx={kernelName:Yt,backendName:"wasm",kernelFunc:tx};let nx;const ox={kernelName:Xt,backendName:"wasm",setupFunc:function(e){nx=e.wasm.cwrap(Xt,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,attrs:r,backend:n}=e,{x:o,filter:a}=t,i=n.dataIdMap.get(o.dataId).id,s=n.dataIdMap.get(a.dataId).id,{strides:p,dilations:l,pad:u,dimRoundingMode:d,dataFormat:c}=r,g=Dp(c),h=xp(o.shape,a.shape,p,l,u,d,!1,g),f=h.filterHeight,m=h.filterWidth,y=h.padInfo.top,b=h.padInfo.right,_=h.padInfo.bottom,v=h.padInfo.left,w=h.dilationHeight,k=h.dilationWidth,T=h.strideHeight,O=h.strideWidth,x=h.inChannels,S=h.outChannels,E="SAME"===h.padInfo.type?1:0;if("channelsLast"!==h.dataFormat)throw new Error(`wasm backend Conv2D does not support dataFormat:'${h.dataFormat}'. Please use 'channelsLast'.`);const F=n.makeOutput(h.outShape,"float32"),M=n.dataIdMap.get(F.dataId).id;return nx(i,o.shape[0],o.shape[1],o.shape[2],s,f,m,y,b,_,v,E,w,k,T,O,x,S,M),F}};let ax;const ix={kernelName:qt,backendName:"wasm",setupFunc:function(e){ax=e.wasm.cwrap(qt,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:r,attrs:n}=e,{dy:o,filter:a}=r,{strides:i,pad:s,dataFormat:p,dimRoundingMode:l,inputShape:u}=n,d=Dp(p),c=xp(u,a.shape,i,1,s,l,!1,d),{batchSize:g,filterHeight:h,filterWidth:f,inChannels:m,inHeight:y,inWidth:b,outChannels:_,outHeight:v,outWidth:w,strideHeight:k,strideWidth:T}=c,O=h-1-c.padInfo.top,x=f-1-c.padInfo.left,S="channelsLast"===c.dataFormat,E=vt(c.inShape),F=vt(o.shape),[M,R,C]=vt(a.shape),I=E[0],A=S?E[1]:E[2],B=S?E[2]:1,D=S?1:E[1],L=F[0],N=S?F[1]:F[2],P=S?F[2]:1,j=S?1:F[1],G=t.makeOutput(c.inShape,"float32"),W=t.dataIdMap.get(G.dataId).id,z=t.dataIdMap.get(o.dataId).id,U=t.dataIdMap.get(a.dataId).id;return ax(z,U,g,h,f,y,b,m,v,w,_,k,T,O,x,M,R,C,I,A,B,D,L,N,P,j,W),G}},sx=TO("Cos"),px=TO(Jt);var lx;let ux;!function(e){e[e.bilinear=0]="bilinear",e[e.nearest=1]="nearest"}(lx||(lx={}));const dx={kernelName:er,backendName:"wasm",setupFunc:function(e){ux=e.wasm.cwrap(er,null,["number","number","number","number","array","number","number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:r,attrs:n}=e,{method:o,extrapolationValue:a,cropSize:i}=n,{image:s,boxes:p,boxInd:l}=r,u=p.shape[0],[d,c]=i,g=[u,d,c,s.shape[3]];let h,f=t.dataIdMap.get(s.dataId);"float32"!==s.dtype&&(h=qO({backend:t,inputs:{x:s},attrs:{dtype:"float32"}}),f=t.dataIdMap.get(h.dataId));const m=f.id,y=t.dataIdMap.get(p.dataId).id,b=t.dataIdMap.get(l.dataId).id,_=t.makeOutput(g,"float32"),v=t.dataIdMap.get(_.dataId).id,w=new Uint8Array(new Int32Array(s.shape).buffer);return ux(m,y,b,u,w,d,c,lx[o],a,v),null!=h&&t.disposeData(h.dataId),_}};let cx;const gx={kernelName:Qt,backendName:"wasm",setupFunc:function(e){cx=e.wasm.cwrap(Qt,null,["number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:r,attrs:n}=e,{x:o}=t,{axis:a,exclusive:i,reverse:s}=n,p=o.shape.length;et("float32"===o.dtype||"int32"===o.dtype,(()=>`cumprod does not support ${o.dtype} tensors in the WASM backend`));const l=Nl([a],p);let u=o;null!==l&&(u=IO({inputs:{x:o},attrs:{perm:l},backend:r}));const d=jl(1,p)[0];Ll("cumprod",[d],p);const c=r.makeOutput(u.shape,u.dtype),g=u.shape[d],h=r.dataIdMap.get(u.dataId).id,f=r.dataIdMap.get(c.dataId).id;cx(h,i?1:0,s?1:0,g,f,yO[o.dtype]);let m=c;return null!==l&&(m=IO({inputs:{x:c},attrs:{perm:Pl(l)},backend:r}),r.disposeData(u.dataId),r.disposeData(c.dataId)),m}};let hx;const fx={kernelName:Zt,backendName:"wasm",setupFunc:function(e){hx=e.wasm.cwrap(Zt,null,["number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:r,attrs:n}=e,{x:o}=t,{axis:a,exclusive:i,reverse:s}=n,p=o.shape.length;et("float32"===o.dtype||"int32"===o.dtype,(()=>`cumsum does not support ${o.dtype} tensors in the WASM backend`));const l=Nl([a],p);let u=o;null!==l&&(u=IO({inputs:{x:o},attrs:{perm:l},backend:r}));const d=jl(1,p)[0];Ll("cumsum",[d],p);const c=r.makeOutput(u.shape,u.dtype),g=u.shape[d],h=r.dataIdMap.get(u.dataId).id,f=r.dataIdMap.get(c.dataId).id;hx(h,i?1:0,s?1:0,g,f,yO[o.dtype]);let m=c;return null!==l&&(m=IO({inputs:{x:c},attrs:{perm:Pl(l)},backend:r}),r.disposeData(u.dataId),r.disposeData(c.dataId)),m}};let mx;const yx={kernelName:tr,backendName:"wasm",setupFunc:function(e){mx=e.wasm.cwrap(tr,null,["number","number","number","array","number","array","array","number","number"])},kernelFunc:function(e){const{backend:t,inputs:r,attrs:n}=e,{x:o}=r,{blockSize:a,dataFormat:i}=n,s=o.shape[0],p=("NHWC"===i?o.shape[1]:o.shape[2])*a,l=("NHWC"===i?o.shape[2]:o.shape[3])*a,u=("NHWC"===i?o.shape[3]:o.shape[1])/(a*a),d="NHWC"===i?[s,p,l,u]:[s,u,p,l],c=t.makeOutput(d,"float32"),g=t.dataIdMap.get(o.dataId).id,h=new Uint8Array(new Int32Array(vt(o.shape)).buffer),f=new Uint8Array(new Int32Array(d).buffer),m=new Uint8Array(new Int32Array(vt(d)).buffer),y=t.dataIdMap.get(c.dataId).id;return mx(g,a,"NHWC"===i?1:0,h,o.shape.length-1,f,m,d.length,y),c}};let bx;const _x={kernelName:rr,backendName:"wasm",setupFunc:function(e){bx=e.wasm.cwrap(rr,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,attrs:r,backend:n}=e,{x:o,filter:a}=t,i=n.dataIdMap.get(o.dataId).id,s=n.dataIdMap.get(a.dataId).id,{strides:p,dilations:l,pad:u,dimRoundingMode:d}=r,c=null==l?[1,1]:l,g=xp(o.shape,a.shape,p,c,u,d,!0),h=g.filterHeight,f=g.filterWidth,m=g.padInfo.top,y=g.padInfo.right,b=g.padInfo.bottom,_=g.padInfo.left,v=g.dilationHeight,w=g.dilationWidth,k=g.strideHeight,T=g.strideWidth,O=g.inChannels,x=g.outChannels,S="SAME"===g.padInfo.type?1:0;if("channelsLast"!==g.dataFormat)throw new Error(`wasm backend DepthwiseConv2dNative does not support dataFormat:'${g.dataFormat}'. Please use 'channelsLast'.`);const E=n.makeOutput(g.outShape,"float32"),F=n.dataIdMap.get(E.dataId).id;return bx(i,o.shape[0],o.shape[1],o.shape[2],s,h,f,m,y,b,_,S,v,w,k,T,O,x,F),E}},vx=TO(or),wx=xO(ar,0,"bool"),kx=TO(ir,"float32");function Tx(e){const{inputs:t,attrs:r,backend:n}=e,{input:o}=t,{dim:a}=r,i=o.shape.length,s=o.shape.slice();let p=a;return a<0&&(et(-(i+1)<=a,(()=>`Axis must be in the interval [${-(i+1)}, ${i}]`)),p=i+a+1),s.splice(p,0,1),UO({inputs:{x:o},backend:n,attrs:{shape:s}})}const Ox={kernelName:sr,backendName:"wasm",kernelFunc:Tx};function xx(e){const{attrs:{shape:t,value:r,dtype:n},backend:o}=e,a=o.makeOutput(t,n);return o.typedArrayFromHeap(a).fill(r),a}const Sx={kernelName:pr,backendName:"wasm",kernelFunc:xx};let Ex;const Fx={kernelName:lr,backendName:"wasm",kernelFunc:function(e){const{inputs:t,backend:r}=e,{image:n}=t,o=r.makeOutput(n.shape,n.dtype),a=r.dataIdMap.get(n.dataId).id,i=r.dataIdMap.get(o.dataId).id,[s,p,l,u]=n.shape;return Ex(a,s,p,l,u,i),o},setupFunc:function(e){Ex=e.wasm.cwrap(lr,null,["number","number","number","number","number","number"])}},Mx=TO(ur),Rx=xO(dr);let Cx;const Ix={kernelName:cr,backendName:"wasm",setupFunc:function(e){Cx=e.wasm.cwrap(cr,null,["number","number","number","number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:r,attrs:n}=e,{varianceEpsilon:o}=n,{x:a,mean:i,variance:s,offset:p,scale:l}=r,u=t.dataIdMap.get(a.dataId).id,d=t.dataIdMap.get(i.dataId).id,c=t.dataIdMap.get(s.dataId).id,g=null!=p?t.dataIdMap.get(p.dataId).id:0,h=null!=l?t.dataIdMap.get(l.dataId).id:0,f=t.makeOutput(a.shape,a.dtype);if(0===nt(a.shape))return f;const m=t.dataIdMap.get(f.dataId).id;return Cx(u,d,c,g,h,o,m),f}};let Ax;const Bx={kernelName:Rn,backendName:"wasm",setupFunc:function(e){Ax=e.wasm.cwrap(Rn,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,attrs:r,backend:n}=e,{x:o,filter:a,bias:i,preluActivationWeights:s}=t,{strides:p,pad:l,dilations:u,dataFormat:d,dimRoundingMode:c,activation:g,leakyreluAlpha:h}=r,f=xp(o.shape,a.shape,p,u,l,c),m=bO[g];if(null==m)throw new Error(`${g} activation not yet supported for FusedConv2D in the wasm backend.`);const y=n.dataIdMap.get(o.dataId).id,b=n.dataIdMap.get(a.dataId).id,_=f.outChannels;let v=0;if(null!=i){const e=n.dataIdMap.get(i.dataId);if(1!==e.shape.length)throw new Error(`FusedConv2D only supports rank-1 bias but got rank ${e.shape.length}.`);if(e.shape[0]!==_)throw new Error(`FusedConv2D bias shape (${e.shape}) does not match the number of output channels (${_})`);v=e.id}const w=f.filterHeight,k=f.filterWidth,T=f.padInfo.top,O=f.padInfo.right,x=f.padInfo.bottom,S=f.padInfo.left,E=f.dilationHeight,F=f.dilationWidth,M=f.strideHeight,R=f.strideWidth,C=f.inChannels,I="SAME"===f.padInfo.type?1:0,A=f.batchSize,B=f.inHeight,D=f.inWidth;if("NHWC"!==d)throw new Error(`wasm backend FusedConv2D does not support dataFormat:'${d}'. Please use 'NHWC'.`);const L=n.makeOutput(f.outShape,"float32"),N=n.dataIdMap.get(L.dataId).id,P=null==s?0:n.dataIdMap.get(s.dataId).id;return Ax(y,A,B,D,b,w,k,v,T,O,x,S,I,E,F,M,R,C,_,m,P,h||0,N),L}};let Dx;const Lx={kernelName:Cn,backendName:"wasm",setupFunc:function(e){Dx=e.wasm.cwrap(Cn,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,attrs:r,backend:n}=e,{x:o,filter:a,bias:i,preluActivationWeights:s}=t,{strides:p,pad:l,dilations:u,dataFormat:d,dimRoundingMode:c,activation:g,leakyreluAlpha:h}=r,f=xp(o.shape,a.shape,p,u,l,c,!0),m=bO[g];if(null==m)throw new Error(`${g} activation not yet supported for FusedDepthwiseConv2D in the wasm backend.`);const y=n.dataIdMap.get(o.dataId).id,b=n.dataIdMap.get(a.dataId).id,_=f.outChannels;let v=0;if(null!=i){const e=n.dataIdMap.get(i.dataId);if(1!==e.shape.length)throw new Error(`FusedDepthwiseConv2D only supports rank-1 bias but got rank ${e.shape.length}.`);if(e.shape[0]!==_)throw new Error(`FusedDepthwiseConv2D bias shape (${e.shape}) does not match the number of output channels (${_})`);v=e.id}const w=f.filterHeight,k=f.filterWidth,T=f.padInfo.top,O=f.padInfo.right,x=f.padInfo.bottom,S=f.padInfo.left,E=f.dilationHeight,F=f.dilationWidth,M=f.strideHeight,R=f.strideWidth,C=f.inChannels,I="SAME"===f.padInfo.type?1:0,A=f.batchSize,B=f.inHeight,D=f.inWidth;if("NHWC"!==d)throw new Error(`wasm backend FusedDepthwiseConv2D does not support dataFormat:'${d}'. Please use 'NHWC'.`);const L=n.makeOutput(f.outShape,"float32"),N=n.dataIdMap.get(L.dataId).id,P=null==s?0:n.dataIdMap.get(s.dataId).id;return Dx(y,A,B,D,b,w,k,v,T,O,x,S,I,E,F,M,R,C,_,m,P,h||0,N),L}};let Nx;const Px={kernelName:hr,backendName:"wasm",setupFunc:function(e){Nx=e.wasm.cwrap(hr,null,["number","number","number","number","number","number","array","number"])},kernelFunc:function(e){const{backend:t,inputs:r}=e,{params:n,indices:o}=r,[a,i,s,p]=Ws(n,o),l=t.makeOutput(a,n.dtype);if(0===i)return l;const u=o.shape,d=u[u.length-1],c=t.dataIdMap.get(n.dataId).id,g=t.dataIdMap.get(o.dataId).id,h=new Uint8Array(new Int32Array(p).buffer),f=t.dataIdMap.get(l.dataId).id;return Nx(c,yO[n.dtype],g,i,d,s,h,f),l}};let jx;const Gx={kernelName:gr,backendName:"wasm",setupFunc:function(e){jx=e.wasm.cwrap("Gather",null,["number","number","array","number","number","number","array","number"])},kernelFunc:function(e){const{backend:t,inputs:r,attrs:n}=e,{x:o,indices:a}=r,{axis:i,batchDims:s}=n,p=ut(i,o.shape)[0],l=t.readSync(a.dataId),u=o.shape[p];for(let e=0;e<l.length;++e){const t=l[e];et(t<=u-1&&t>=0,(()=>`GatherV2: the index value ${t} is not in [0, ${u-1}]`))}const d=Yg(o,a,p,s),c=UO({inputs:{x:o},attrs:{shape:[d.batchSize,d.outerSize,d.dimSize,d.sliceSize]},backend:t}),g=nt(a.shape),h=UO({inputs:{x:a},attrs:{shape:[d.batchSize,g/d.batchSize]},backend:t}),f=[d.batchSize,d.outerSize,g/d.batchSize,d.sliceSize],m=t.makeOutput(f,o.dtype);if(0===nt(o.shape))return m;const y=c.shape.length-1,b=t.dataIdMap.get(c.dataId).id,_=t.dataIdMap.get(h.dataId).id,v=t.dataIdMap.get(m.dataId).id,w=new Uint8Array(new Int32Array(vt(c.shape)).buffer),k=new Uint8Array(new Int32Array(vt(f)).buffer);return jx(b,yO[o.dtype],w,y,_,d.batchSize,k,v),t.disposeData(c.dataId),t.disposeData(h.dataId),m.shape=d.outputShape,m}},Wx=xO(fr,0,"bool"),zx=xO(mr,0,"bool"),Ux=TO(br,"bool");let $x;const Hx={kernelName:_r,backendName:"wasm",setupFunc:function(e){$x=e.wasm.cwrap(_r,null,["number","number","number","number"])},kernelFunc:function(e){const{inputs:{x:t},attrs:{alpha:r},backend:n}=e,o=n.dataIdMap.get(t.dataId).id,a=n.makeOutput(t.shape,"float32");if(0!==nt(t.shape)){const e=n.dataIdMap.get(a.dataId).id;$x(o,yO[t.dtype],r,e)}return a}},Vx=xO(vr,0,"bool"),Kx=xO(wr,0,"bool"),Yx=TO("Log"),Xx=xO(kr,0,"bool"),qx=TO(Tr),Jx=xO(Or,0,"bool"),Qx=xO("LogicalXor",0,"bool");let Zx;const eS={kernelName:xr,backendName:"wasm",setupFunc:function(e){Zx=e.wasm.cwrap(xr,null,["number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:r,attrs:n}=e,{reductionIndices:o,keepDims:a}=n,{x:i}=r;let s=t.dataIdMap.get(i.dataId).id,p=i;const{transposed:l,axes:u,originalAxes:d,inputWasTransposed:c}=BO(i,o,t);c&&(p=l,s=t.dataIdMap.get(l.dataId).id),Ll("max",u,p.shape.length);const[g,h]=Bl(p.shape,u),f=nt(h),m=t.makeOutput(g,i.dtype);if(0!==nt(p.shape)){const e=t.dataIdMap.get(m.dataId).id;Zx(s,yO[i.dtype],f,e)}if(c&&t.disposeData(l.dataId),a){const e=Dl(m.shape,d);m.shape=e}return m}},tS=xO(Sr);let rS;const nS={kernelName:Er,backendName:"wasm",setupFunc:function(e){rS=e.wasm.cwrap(Er,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,attrs:r,backend:n}=e,o=t.x,a=n.dataIdMap.get(o.dataId).id;et("float32"===o.dtype,(()=>`Error in MaxPool: only float32 input is supported. Got ${o.dtype}.`));const{filterSize:i,strides:s,pad:p,dimRoundingMode:l}=r,u=Op(o.shape,i,s,1,p,l),d=u.filterHeight,c=u.filterWidth,g=u.padInfo.top,h=u.padInfo.right,f=u.padInfo.bottom,m=u.padInfo.left,y=u.dilationHeight,b=u.dilationWidth,_=u.strideHeight,v=u.strideWidth,w=u.inChannels,k=u.outChannels;if("channelsLast"!==u.dataFormat)throw new Error(`wasm backend does not support dataFormat:'${u.dataFormat}'. Please use 'channelsLast'.`);const T=n.makeOutput(u.outShape,"float32"),O=n.dataIdMap.get(T.dataId).id;return rS(a,o.shape[0],o.shape[1],o.shape[2],d,c,g,h,f,m,y,b,_,v,w,k,O),T}};let oS;const aS={kernelName:Fr,backendName:"wasm",setupFunc:function(e){oS=e.wasm.cwrap(Fr,null,["number, number, number"])},kernelFunc:function(e){const{backend:t,inputs:r,attrs:n}=e,{axis:o,keepDims:a}=n,{x:i}=r,s=t.dataIdMap.get(i.dataId).id;let p=s,l=i;const{transposed:u,axes:d,originalAxes:c,inputWasTransposed:g}=BO(i,o,t);let h=d;if(g){const e=t.dataIdMap.get(u.dataId).id;e!==s&&(l=u,p=e,h=jl(h.length,l.shape.length))}Ll("mean",h,l.shape.length);const[f,m]=Bl(l.shape,h),y=nt(m);let b=l;"float32"!==l.dtype&&(b=qO({backend:t,inputs:{x:l},attrs:{dtype:"float32"}}),p=t.dataIdMap.get(b.dataId).id);const _=t.makeOutput(f,"float32");if(0!==nt(l.shape)){const e=t.dataIdMap.get(_.dataId).id;oS(p,y,e)}if(g&&t.disposeData(u.dataId),a){const e=Dl(_.shape,c);_.shape=e}return"float32"!==l.dtype&&t.disposeData(b.dataId),_}};let iS;const sS={kernelName:Mr,backendName:"wasm",setupFunc:function(e){iS=e.wasm.cwrap(Mr,null,["number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:r,attrs:n}=e,{axis:o,keepDims:a}=n,{x:i}=r,s=t.dataIdMap.get(i.dataId).id;let p=s,l=i;const{transposed:u,axes:d,originalAxes:c,inputWasTransposed:g}=BO(i,o,t);if(g){const e=t.dataIdMap.get(u.dataId).id;e!==s&&(l=u,p=e)}Ll("min",d,l.shape.length);const[h,f]=Bl(l.shape,d),m=nt(f),y=t.makeOutput(h,l.dtype);if(0!==nt(l.shape)){const e=t.dataIdMap.get(y.dataId).id;iS(p,yO[i.dtype],m,e)}if(g&&t.disposeData(u.dataId),a){const e=Dl(y.shape,c);y.shape=e}return y}},pS=xO(Rr);var lS;let uS;!function(e){e[e.reflect=0]="reflect",e[e.symmetric=1]="symmetric"}(lS||(lS={}));const dS={kernelName:Cr,backendName:"wasm",kernelFunc:function(e){const{inputs:{x:t},backend:r,attrs:{paddings:n,mode:o}}=e,a=n.map(((e,r)=>e[0]+t.shape[r]+e[1])),i=r.dataIdMap.get(t.dataId).id,s=r.makeOutput(a,t.dtype),p=r.dataIdMap.get(s.dataId).id,l=new Uint8Array(new Int32Array(t.shape).buffer),u=n.map((e=>e[0])),d=n.map((e=>e[1])),c=new Uint8Array(new Int32Array(u).buffer),g=new Uint8Array(new Int32Array(d).buffer);return uS(i,l,t.shape.length,yO[t.dtype],c,g,lS[o],p),s},setupFunc:function(e){uS=e.wasm.cwrap(Cr,null,["number","array","number","number","array","array","number","number"])}},cS=xO(Ir),gS=TO("Neg");function hS(e,t){const r=new Int32Array(e.wasm.HEAPU8.buffer,t,4),n=r[0],o=r[1],a=r[2],i=r[3];return e.wasm._free(t),{pSelectedIndices:n,selectedSize:o,pSelectedScores:a,pValidOutputs:i}}let fS;const mS={kernelName:Br,backendName:"wasm",setupFunc:function(e){fS=e.wasm.cwrap(Br,"number",["number","number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:r,attrs:n}=e,{iouThreshold:o,maxOutputSize:a,scoreThreshold:i}=n,{boxes:s,scores:p}=r,l=t.dataIdMap.get(s.dataId).id,u=t.dataIdMap.get(p.dataId).id,d=fS(l,u,a,o,i),{pSelectedIndices:c,selectedSize:g,pSelectedScores:h,pValidOutputs:f}=hS(t,d);return t.wasm._free(h),t.wasm._free(f),t.makeOutput([g],"int32",c)}};let yS;const bS={kernelName:Dr,backendName:"wasm",setupFunc:function(e){yS=e.wasm.cwrap(Dr,"number",["number","number","number","number","number","bool"])},kernelFunc:function(e){const{backend:t,inputs:r,attrs:n}=e,{iouThreshold:o,maxOutputSize:a,scoreThreshold:i,padToMaxOutputSize:s}=n,{boxes:p,scores:l}=r,u=t.dataIdMap.get(p.dataId).id,d=t.dataIdMap.get(l.dataId).id,c=yS(u,d,a,o,i,s),{pSelectedIndices:g,selectedSize:h,pSelectedScores:f,pValidOutputs:m}=hS(t,c);return t.wasm._free(f),[t.makeOutput([h],"int32",g),t.makeOutput([],"int32",m)]}};let _S;const vS={kernelName:Lr,backendName:"wasm",setupFunc:function(e){_S=e.wasm.cwrap(Lr,"number",["number","number","number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:r,attrs:n}=e,{iouThreshold:o,maxOutputSize:a,scoreThreshold:i,softNmsSigma:s}=n,{boxes:p,scores:l}=r,u=t.dataIdMap.get(p.dataId).id,d=t.dataIdMap.get(l.dataId).id,c=_S(u,d,a,o,i,s),{pSelectedIndices:g,selectedSize:h,pSelectedScores:f,pValidOutputs:m}=hS(t,c);return t.wasm._free(m),[t.makeOutput([h],"int32",g),t.makeOutput([h],"float32",f)]}},wS=xO(Ar,0,"bool");let kS;const TS={kernelName:Pr,backendName:"wasm",setupFunc:function(e){kS=e.wasm.cwrap(Pr,null,["number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:r,attrs:n}=e,{indices:o}=t,{dtype:a,depth:i,onValue:s,offValue:p}=n,l=r.makeOutput([...o.shape,i],a),u=r.dataIdMap.get(l.dataId).id,d=r.dataIdMap.get(o.dataId).id;return kS(d,i,s,p,u),l}},OS={kernelName:Nr,backendName:"wasm",kernelFunc:function(e){const{inputs:{x:t},backend:r}=e,n=r.makeOutput(t.shape,t.dtype);return r.typedArrayFromHeap(n).fill(1),n}},xS={kernelName:jr,backendName:"wasm",kernelFunc:function(e){const{inputs:t,backend:r,attrs:n}=e,{axis:o}=n;if(1===t.length)return Tx({inputs:{input:t[0]},backend:r,attrs:{dim:o}});const a=t[0].shape,i=t[0].dtype;t.forEach((e=>{tt(a,e.shape,"All tensors passed to stack must have matching shapes"),et(i===e.dtype,(()=>"All tensors passed to stack must have matching dtypes"))}));const s=[],p=tx({inputs:t.map((e=>{const t=Tx({inputs:{input:e},backend:r,attrs:{dim:o}});return s.push(t),t})),backend:r,attrs:{axis:o}});return s.forEach((e=>r.disposeData(e.dataId))),p}};let SS;const ES={kernelName:Gr,backendName:"wasm",kernelFunc:function(e){const{inputs:{x:t},backend:r,attrs:{paddings:n,constantValue:o}}=e,a=n.map(((e,r)=>e[0]+t.shape[r]+e[1]));if(0===nt(t.shape))return xx({backend:r,attrs:{shape:a,value:o,dtype:t.dtype}});const i=r.dataIdMap.get(t.dataId).id,s=r.makeOutput(a,t.dtype),p=r.dataIdMap.get(s.dataId).id,l=new Uint8Array(new Int32Array(t.shape).buffer),u=n.map((e=>e[0])),d=n.map((e=>e[1])),c=new Uint8Array(new Int32Array(u).buffer),g=new Uint8Array(new Int32Array(d).buffer);return SS(i,l,t.shape.length,yO[t.dtype],c,g,o,p),s},setupFunc:function(e){SS=e.wasm.cwrap(Gr,null,["number","array","number","number","array","array","number","number"])}},FS=xO("Pow");let MS;const RS={kernelName:Wr,backendName:"wasm",setupFunc:function(e){MS=e.wasm.cwrap(Wr,null,["number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:r}=e,{x:n,alpha:o}=t,a=r.dataIdMap.get(n.dataId).id,i=r.dataIdMap.get(o.dataId).id;let s=a;const p=n;let l=p;"float32"!==p.dtype&&(l=qO({backend:r,inputs:{x:n},attrs:{dtype:"float32"}}),s=r.dataIdMap.get(l.dataId).id);const u=r.makeOutput(n.shape,"float32"),d=r.dataIdMap.get(u.dataId).id;return MS(s,i,d),"float32"!==p.dtype&&r.disposeData(l.dataId),u}};let CS;const IS={kernelName:zr,backendName:"wasm",setupFunc:function(e){CS=e.wasm.cwrap(zr,null,["number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:r,attrs:n}=e,{axis:o,keepDims:a}=n,{x:i}=r,s=t.dataIdMap.get(i.dataId).id;let p=s,l=i;const{transposed:u,axes:d,originalAxes:c,inputWasTransposed:g}=BO(i,o,t);let h=d;if(g){const e=t.dataIdMap.get(u.dataId).id;e!==s&&(l=u,p=e,h=jl(h.length,l.shape.length))}Ll("prod",h,l.shape.length);const[f,m]=Bl(l.shape,h),y=nt(m),b=t.makeOutput(f,l.dtype);if(0!==nt(l.shape)){const e=t.dataIdMap.get(b.dataId).id;CS(p,y,yO[b.dtype],e)}if(g&&t.disposeData(u.dataId),a){const e=Dl(b.shape,c);b.shape=e}return b}},AS={kernelName:Ur,backendName:"wasm",kernelFunc:e=>{const{backend:t,attrs:r}=e,{start:n,stop:o,step:a,dtype:i}=r,s=hm(n,o,a,i),p=t.makeOutput([s.length],i);return t.typedArrayFromHeap(p).set(s),p}},BS=xO(nr),DS=TO($r),LS=TO(Hr),NS=TO(Xr);let PS;const jS={kernelName:Yr,backendName:"wasm",setupFunc:function(e){PS=e.wasm.cwrap(Yr,null,["number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:r,attrs:n}=e,{images:o}=r,{alignCorners:a,halfPixelCenters:i,size:s}=n,[p,l]=s,[u,d,c,g]=o.shape,h=[u,p,l,g];let f,m=t.dataIdMap.get(o.dataId);"float32"!==m.dtype&&(f=qO({backend:t,inputs:{x:o},attrs:{dtype:"float32"}}),m=t.dataIdMap.get(f.dataId));const y=m.id,b=t.makeOutput(h,"float32");if(0===nt(o.shape))return b;const _=t.dataIdMap.get(b.dataId).id;return PS(y,u,d,c,g,p,l,a?1:0,i?1:0,_),null!=f&&t.disposeData(f.dataId),b}};let GS;const WS={kernelName:Kr,backendName:"wasm",setupFunc:function(e){GS=e.wasm.cwrap(Kr,null,["number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:r,attrs:n}=e,{images:o}=r,{alignCorners:a,halfPixelCenters:i,size:s}=n,[p,l]=s,[u,d,c,g]=o.shape,h=[u,p,l,g],f=t.makeOutput(h,"float32");if(0===nt(o.shape))return f;let m,y=t.dataIdMap.get(o.dataId);"float32"!==y.dtype&&(m=qO({backend:t,inputs:{x:o},attrs:{dtype:"float32"}}),y=t.dataIdMap.get(m.dataId));const b=y.id,_=t.dataIdMap.get(f.dataId).id;return GS(b,u,d,c,g,p,l,a?1:0,i?1:0,_),null!=m&&t.disposeData(m.dataId),f}};let zS;const US={kernelName:qr,backendName:"wasm",kernelFunc:function(e){const{inputs:t,backend:r,attrs:n}=e,{x:o}=t,{dims:a}=n,i=ut(a,o.shape);if(0===o.shape.length)return MO({inputs:{x:o},backend:r});const s=r.makeOutput(o.shape,o.dtype),p=r.dataIdMap.get(o.dataId).id,l=r.dataIdMap.get(s.dataId).id,u=new Uint8Array(new Int32Array(i).buffer),d=new Uint8Array(new Int32Array(o.shape).buffer);zS(p,u,i.length,d,o.shape.length,l);const c=UO({inputs:{x:s},attrs:{shape:o.shape},backend:r});return r.disposeData(s.dataId),c},setupFunc:function(e){zS=e.wasm.cwrap(qr,null,["number","array","number","array","number","number"])}};let $S;const HS={kernelName:Fn,backendName:"wasm",kernelFunc:function(e){const{inputs:t,backend:r,attrs:n}=e,{image:o}=t,{radians:a,fillValue:i,center:s}=n,p=r.makeOutput(o.shape,o.dtype),l=r.dataIdMap.get(o.dataId).id,u=r.dataIdMap.get(p.dataId).id,[d,c,g,h]=o.shape,[f,m]=Mg(s,c,g),y="number"==typeof i?[i,i,i,0===i?0:255]:[...i,255],b=new Uint8Array(new Int32Array(y).buffer);return $S(l,d,c,g,h,a,f,m,b,y.length,u),p},setupFunc:function(e){$S=e.wasm.cwrap(Fn,null,["number","number","number","number","number","number","number","number","array","number","number"])}},VS=TO(Jr),KS=TO(Qr);let YS;const XS={kernelName:Zr,backendName:"wasm",setupFunc:function(e){YS=e.wasm.cwrap(Zr,null,["number","number","number","number","number","number","array","number","number"])},kernelFunc:function(e){const{backend:t,inputs:r,attrs:n}=e,{indices:o,updates:a}=r,{shape:i}=n,s=t.makeOutput(i,a.dtype);if(0===nt(i))return s;const{sliceRank:p,numUpdates:l,sliceSize:u,strides:d,outputSize:c}=$s(0,o,i),g=t.dataIdMap.get(o.dataId).id,h=t.dataIdMap.get(a.dataId).id,f=new Uint8Array(new Int32Array(d).buffer),m=t.dataIdMap.get(s.dataId).id;return YS(g,h,yO[a.dtype],p,l,u,f,c,m),s}};let qS;const JS={kernelName:en,backendName:"wasm",kernelFunc:function(e){const{inputs:t,backend:r}=e,{condition:n,t:o,e:a}=t,i=r.dataIdMap.get(n.dataId).id,s=r.dataIdMap.get(o.dataId).id,p=r.dataIdMap.get(a.dataId).id,l=r.makeOutput(o.shape,o.dtype),u=r.dataIdMap.get(l.dataId).id,d=n.shape.length,c=o.shape.length,g=0===d||d>1||1===c?1:nt(o.shape.slice(1));return qS(i,s,p,g,u),l},setupFunc:function(e){qS=e.wasm.cwrap("SelectV2",null,["number","number","number","number","number"])}};let QS;const ZS={kernelName:"Sigmoid",backendName:"wasm",setupFunc:function(e){QS=e.wasm.cwrap(rn,null,["number","number"])},kernelFunc:function(e){const{backend:t,inputs:{x:r}}=e,n=t.dataIdMap.get(r.dataId).id,o=t.makeOutput(r.shape,r.dtype),a=t.dataIdMap.get(o.dataId).id;return 0===nt(o.shape)||QS(n,a),o}},eE=TO("Sin");let tE;const rE={kernelName:pn,backendName:"wasm",setupFunc:function(e){tE=e.wasm.cwrap(pn,null,["number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:{logits:r},attrs:{dim:n}}=e,o=t.dataIdMap.get(r.dataId).id,a=t.makeOutput(r.shape,r.dtype),i=t.dataIdMap.get(a.dataId).id,s=r.shape[n],p=nt(r.shape)/s;return 0===nt(a.shape)||tE(o,i,s,p),a}},nE={kernelName:an,backendName:"wasm",kernelFunc:function(e){const{inputs:t,backend:r,attrs:n}=e,{x:o}=t,{blockShape:a,paddings:i}=n,s=nt(a),p=[[0,0]];p.push(...i);for(let e=1+a.length;e<o.shape.length;++e)p.push([0,0]);const l=ES.kernelFunc({inputs:{x:o},backend:r,attrs:{paddings:p,constantValue:0}}),u=Rg(l.shape,a,s,!1),d=Cg(u.length,a.length,!1),c=Ig(l.shape,a,s,!1),g=UO({inputs:{x:l},backend:r,attrs:{shape:u}}),h=IO({inputs:{x:g},backend:r,attrs:{perm:d}}),f=UO({inputs:{x:h},backend:r,attrs:{shape:c}});return r.disposeData(l.dataId),r.disposeData(g.dataId),r.disposeData(h.dataId),f}};let oE;const aE={kernelName:ln,backendName:"wasm",setupFunc:function(e){oE=e.wasm.cwrap("SparseFillEmptyRows","number",["number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:r}=e,{indices:n,values:o,denseShape:a,defaultValue:i}=r,s=n.shape[0],p=n.shape[1],l=t.readSync(a.dataId)[0],u=[s+l,p],d=t.dataIdMap.get(n.dataId).id,c=t.dataIdMap.get(o.dataId).id,g=t.dataIdMap.get(i.dataId).id,h=t.makeOutput(u,n.dtype),f=t.dataIdMap.get(h.dataId).id,m=t.makeOutput(u.slice(0,1),o.dtype),y=t.dataIdMap.get(m.dataId).id,b=t.makeOutput([l],"bool"),_=t.dataIdMap.get(b.dataId).id,v=t.makeOutput([s],n.dtype),w=t.dataIdMap.get(v.dataId).id,k=t.makeOutput([4],"int32"),T=t.dataIdMap.get(k.dataId).id,O=oE(d,c,yO[o.dtype],s,l,p,g,f,y,_,w,T),x=t.readSync(k.dataId);let S;switch(x[0]){case 1:S=jg(x[1]);break;case 2:S=Gg(x[1],x[2]);break;case 3:S=Wg(x[1],x[2],x[3]);break;default:S=""}if(t.disposeData(k.dataId),S)throw t.disposeData(h.dataId),t.disposeData(m.dataId),t.disposeData(b.dataId),t.disposeData(v.dataId),new Error(S);let E=h,F=m;return O!==u[0]&&(E=KO({inputs:{x:h},attrs:{begin:0,size:[O,p]},backend:t}),F=KO({inputs:{x:m},attrs:{begin:0,size:O},backend:t}),t.disposeData(h.dataId),t.disposeData(m.dataId)),[E,F,b,v]}};let iE;const sE={kernelName:un,backendName:"wasm",setupFunc:function(e){iE=e.wasm.cwrap(un,null,["number","number","number","number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:r}=e,{inputIndices:n,inputShape:o,newShape:a}=r;if(2!==n.shape.length)throw new Error(`Input indices should be a matrix but received shape\n        ${n.shape}`);if(1!==o.shape.length)throw new Error(`Input shape should be a vector but received shape\n        ${o.shape}`);if(1!==a.shape.length)throw new Error(`Target shape should be a vector but received shape ${a.shape}`);const i=t.dataIdMap.get(n.dataId).id,s=t.dataIdMap.get(o.dataId).id,p=t.dataIdMap.get(a.dataId).id,l=n.shape[0],u=nt(a.shape),d=t.makeOutput([l,u],n.dtype),c=t.dataIdMap.get(d.dataId).id,g=t.makeOutput([u],a.dtype),h=t.dataIdMap.get(g.dataId).id,f=t.makeOutput([3],"int32"),m=t.dataIdMap.get(f.dataId).id;iE(i,s,p,l,c,h,m);const y=t.readSync(f.dataId);let b;switch(y[0]){case 0:b=zg(y[1],y[2]);break;case 1:b=Ug(y[1],y[2]);break;case 2:b="reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero";break;case 3:b=$g(Array.from(t.readSync(o.dataId)),Array.from(t.readSync(g.dataId)));break;case 4:b=Hg(Array.from(t.readSync(o.dataId)),Array.from(t.readSync(g.dataId)));break;default:b=""}if(t.disposeData(f.dataId),b)throw t.disposeData(d.dataId),t.disposeData(g.dataId),new Error(b);return[d,g]}};let pE;function lE(e){pE=e.wasm.cwrap("SparseSegmentReduction",null,["number","number","number","number","number","number","number","number","number"])}function uE(e,t){const{backend:r,inputs:n}=e,{data:o,indices:a,segmentIds:i}=n,s=a.shape[0],p=r.readSync(i.dataId,s-1,s)[0],l=s>0?p+1:0;if(l<0)throw new Error("segment ids must be >= 0");const u=o.shape.slice();u[0]=l;const d=r.dataIdMap.get(o.dataId).id,c=r.dataIdMap.get(a.dataId).id,g=r.dataIdMap.get(i.dataId).id,h=r.makeOutput(u,o.dtype),f=r.dataIdMap.get(h.dataId).id,m=r.makeOutput([4],"int32"),y=r.dataIdMap.get(m.dataId).id;pE(d,yO[o.dtype],o.shape[0],c,g,f,y,t,0);const b=r.readSync(m.dataId);let _;switch(b[0]){case 0:_="segment ids must be >= 0";break;case 1:_="segment ids are not increasing";break;case 2:_=Vg(b[1],b[2]);break;case 3:_=Kg(b[1],b[2],b[3]);break;default:_=""}if(r.disposeData(m.dataId),_)throw r.disposeData(h.dataId),new Error(_);return h}const dE={kernelName:dn,backendName:"wasm",setupFunc:lE,kernelFunc:function(e){return uE(e,!0)}},cE={kernelName:cn,backendName:"wasm",setupFunc:lE,kernelFunc:function(e){return uE(e,!1)}},gE={kernelName:sn,backendName:"wasm",kernelFunc:function(e){const{inputs:t,attrs:r,backend:n}=e,{x:o}=t,{numOrSizeSplits:a,axis:i}=r,s=ut(i,o.shape)[0],p=Pg(o,a,s),l=new Array(o.shape.length).fill(0),u=o.shape.slice();return p.map((e=>{const t=[...u];t[s]=e;const r=KO({inputs:{x:o},attrs:{begin:l,size:t},backend:n});return l[s]+=e,r}))}},hE=TO(nn),fE=TO("Square"),mE=xO(gn);let yE;const bE={kernelName:Sn,backendName:"wasm",setupFunc:function(e){yE=e.wasm.cwrap(Sn,null,["number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:r,attrs:n}=e,{alpha:o}=n,{x:a}=r,i=t.dataIdMap.get(a.dataId).id,s=t.makeOutput(a.shape,a.dtype),p=t.dataIdMap.get(s.dataId).id;return yE(i,o,yO[a.dtype],p),s}};let _E;const vE={kernelName:hn,backendName:"wasm",setupFunc:function(e){_E=e.wasm.cwrap(hn,null,["number","array","number","array","array","array","array","array","number","number"])},kernelFunc:function(e){const{backend:t,inputs:r,attrs:n}=e,{x:o}=r,{begin:a,end:i,strides:s,beginMask:p,endMask:l,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:c}=n,{finalShapeSparse:g,finalShape:h,isIdentity:f,sliceDim0:m,isSimpleSlice:y,begin:b,end:_,strides:v}=op(o.shape,a,i,s,p,l,u,d,c);let w;if(f)w=UO({inputs:{x:o},backend:t,attrs:{shape:h}});else if(m||y){et(o.shape.length>=1,(()=>`Input must have rank at least 1, got: ${o.shape.length}`));const e=Vs(b,_,v),r=KO({inputs:{x:o},backend:t,attrs:{begin:b,size:e}});w=UO({inputs:{x:r},backend:t,attrs:{shape:h}}),t.disposeData(r.dataId)}else{const e=t.makeOutput(g,"float32"),r=t.dataIdMap.get(o.dataId).id,n=new Uint8Array(new Int32Array(vt(o.shape)).buffer),a=new Uint8Array(new Int32Array(b).buffer),i=new Uint8Array(new Int32Array(_).buffer),s=new Uint8Array(new Int32Array(v).buffer),p=new Uint8Array(new Int32Array(g).buffer),l=new Uint8Array(new Int32Array(vt(g)).buffer),u=t.dataIdMap.get(e.dataId).id;_E(r,n,o.shape.length,a,i,s,p,l,g.length,u),w=UO({inputs:{x:e},backend:t,attrs:{shape:h}}),t.disposeData(e.dataId)}return w}},wE={kernelName:fn,backendName:"wasm",kernelFunc:function(e){const{backend:t,inputs:r,attrs:n}=e,{data:o,dataSplits:a}=r,{separator:i,nGramWidths:s,leftPad:p,rightPad:l,padWidth:u,preserveShortSequences:d}=n,c=t.readSync(o.dataId),g=t.readSync(a.dataId),[h,f]=Sm(c,g,i,s,p,l,u,d),m=t.makeOutput([h.length],"string");t.dataIdMap.get(m.dataId).stringBytes=h;const y=t.makeOutput(a.shape,"int32");return t.typedArrayFromHeap(y).set(f),[m,y]}},kE={kernelName:mn,backendName:"wasm",kernelFunc:function(e){const{backend:t,inputs:r,attrs:n}=e,{input:o,delimiter:a}=r,{skipEmpty:i}=n,s=t.readSync(o.dataId),p=t.readSync(a.dataId),[l,u,d]=Fm(s,p[0],i),c=u.length,g=t.makeOutput([c,2],"int32");t.typedArrayFromHeap(g).set(l);const h=t.makeOutput([c],"string");t.dataIdMap.get(h.dataId).stringBytes=u;const f=t.makeOutput([2],"int32");return t.typedArrayFromHeap(f).set(d),[g,h,f]}},TE={kernelName:yn,backendName:"wasm",kernelFunc:function(e){const{backend:t,inputs:r,attrs:n}=e,{input:o}=r,{numBuckets:a}=n,i=Mm(t.readSync(o.dataId),a),s=t.makeOutput(o.shape,"int32");return t.typedArrayFromHeap(s).set(i),s}},OE=xO(bn);let xE;const SE={kernelName:on,backendName:"wasm",setupFunc:function(e){xE=e.wasm.cwrap(on,null,["number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:r,attrs:n}=e,{axis:o,keepDims:a}=n,{x:i}=r,s=t.dataIdMap.get(i.dataId).id;let p=s,l=i;const{transposed:u,axes:d,originalAxes:c,inputWasTransposed:g}=BO(i,o,t);let h=d;if(g){const e=t.dataIdMap.get(u.dataId).id;e!==s&&(l=u,p=e,h=jl(h.length,l.shape.length))}Ll("sum",h,l.shape.length);const[f,m]=Bl(l.shape,h),y=nt(m),b=t.makeOutput(f,l.dtype);if(0!==nt(l.shape)){const e=t.dataIdMap.get(b.dataId).id;xE(p,y,yO[b.dtype],e)}if(g&&t.disposeData(u.dataId),a){const e=Dl(b.shape,c);b.shape=e}return b}},EE=TO("Tan"),FE=TO(_n);let ME;const RE={kernelName:vn,backendName:"wasm",setupFunc:function(e){ME=e.wasm.cwrap(vn,null,["number","array","number","array","number","number"])},kernelFunc:function(e){const{inputs:t,backend:r,attrs:n}=e,{x:o}=t,a=r.dataIdMap.get(o.dataId).id,{reps:i}=n,s=new Array(o.shape.length);for(let e=0;e<s.length;e++)s[e]=o.shape[e]*i[e];const p=new Uint8Array(new Int32Array(o.shape).buffer),l=new Uint8Array(new Int32Array(s).buffer),u=r.makeOutput(s,o.dtype),d=r.dataIdMap.get(u.dataId).id;return ME(a,p,o.shape.length,l,s.length,yO[u.dtype],d),u}};let CE;const IE={kernelName:wn,backendName:"wasm",setupFunc:function(e){CE=e.wasm.cwrap(wn,null,["number","array","number","number","number","bool","number","number"])},kernelFunc:({inputs:e,backend:t,attrs:r})=>{const{x:n}=e,{k:o,sorted:a}=r,i=t.dataIdMap.get(n.dataId).id,s=new Uint8Array(new Int32Array(n.shape).buffer),p=n.shape.slice();p[p.length-1]=o;const l=t.makeOutput(p,n.dtype),u=t.dataIdMap.get(l.dataId).id,d=t.makeOutput(p,"int32"),c=t.dataIdMap.get(d.dataId).id;return CE(i,s,n.shape.length,yO[n.dtype],o,a,u,c),[l,d]}};let AE;const BE={kernelName:kn,backendName:"wasm",setupFunc:function(e){AE=e.wasm.cwrap(kn,null,["number","number","bool","number","number","number","number","number","number","array","number","array","number","number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:r,attrs:n}=e,{image:o,transforms:a}=r,{interpolation:i,fillMode:s,fillValue:p,outputShape:l}=n,[u,d,c,g]=o.shape,[h,f]=null!=l?l:[d,c],m=[u,h,f,g],y=new Uint8Array(new Int32Array(vt(o.shape)).buffer),b=new Uint8Array(new Int32Array(vt(m)).buffer),_=t.makeOutput(m,o.dtype),v=t.dataIdMap.get(_.dataId).id,w=t.dataIdMap.get(o.dataId).id,k=t.dataIdMap.get(a.dataId).id,T="nearest"===i?1:2;let O;switch(s){case"constant":default:O=1;break;case"reflect":O=2;break;case"wrap":O=3;break;case"nearest":O=4}return AE(w,k,a.shape[0]>1,u,h,f,g,c,d,y,o.shape.length-1,b,m.length-1,T,O,p,v),_}},DE={kernelName:On,backendName:"wasm",kernelFunc:function(e){const{inputs:t,backend:r,attrs:n}=e,{value:o}=t;let{axis:a}=n;a<0&&(a+=o.shape.length);const i=o.shape[a],s=o.shape.length,p=new Array(s-1);let l=0;for(let e=0;e<s;e++)e!==a&&(p[l++]=o.shape[e]);const u=new Array(i),d=new Array(s).fill(0),c=o.shape.slice();c[a]=1;for(let e=0;e<u.length;e++)d[a]=e,u[e]=KO({inputs:{x:o},attrs:{begin:d,size:c},backend:r});return u.map((({dataId:e,dtype:t})=>({dataId:e,dtype:t,shape:p})))}},LE={kernelName:xn,backendName:"wasm",kernelFunc:function(e){const{inputs:{x:t},backend:r}=e,n=r.makeOutput(t.shape,t.dtype);return r.typedArrayFromHeap(n).fill(0),n}},NE=[kO,OO,SO,FO,LO,PO,GO,zO,VO,XO,JO,QO,ex,rx,ox,ix,sx,px,dx,gx,fx,yx,_x,vx,wx,kx,Ox,Sx,Fx,Mx,Rx,Ix,Bx,Lx,Px,Gx,Wx,zx,RO,Ux,Hx,Vx,Kx,Yx,Xx,qx,Jx,Qx,eS,tS,nS,aS,sS,pS,dS,cS,gS,mS,bS,vS,wS,TS,OS,xS,ES,FS,RS,IS,AS,BS,DS,LS,NS,$O,jS,WS,US,HS,VS,KS,XS,JS,ZS,eE,YO,rE,nE,aE,sE,dE,cE,gE,hE,fE,mE,bE,vE,wE,kE,TE,OE,SE,EE,FE,RE,IE,BE,AO,DE,LE];for(const e of NE)Pn(e);const PE=It();PE.registerFlag("WASM_HAS_SIMD_SUPPORT",(async()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]))}catch(e){return!1}})),PE.registerFlag("WASM_HAS_MULTITHREAD_SUPPORT",(async()=>{if(PE.get("IS_NODE"))return!1;try{return(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch(e){return!1}}));var jE=nd((function(e,t){var r=(()=>{var e="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0;return e=e||"/Users/djanekovic/Code/xzimg-web-sdk/node_modules/@tensorflow/tfjs-backend-wasm/wasm-out",function(t){function r(){return F.buffer!=I&&W(F.buffer),B}function n(){return F.buffer!=I&&W(F.buffer),D}function o(){return F.buffer!=I&&W(F.buffer),L}function a(){return F.buffer!=I&&W(F.buffer),N}var i,s,p,l=void 0!==(t=t||{})?t:{};l.ready=new Promise((function(e,t){i=e,s=t})),void 0!==Ke&&Ke.listeners&&(p={uncaughtException:Ke.listeners("uncaughtException"),unhandledRejection:Ke.listeners("unhandledRejection")});var u,d,c,g=Object.assign({},l),h=(e,t)=>{throw t},f="object"==typeof window,m="function"==typeof importScripts,y="object"==typeof Ke&&"object"==typeof Ke.versions&&"string"==typeof Ke.versions.node,b=l.ENVIRONMENT_IS_PTHREAD||!1,_="";function v(e){return l.locateFile?l.locateFile(e,_):_+e}if(y){var w=ud,k=ud;let e;_=m?k.dirname(_)+"/":"/Users/djanekovic/Code/xzimg-web-sdk/node_modules/@tensorflow/tfjs-backend-wasm/wasm-out/",u=(e,t)=>(e=ee(e)?new URL(e):k.normalize(e),w.readFileSync(e,t?void 0:"utf8")),c=e=>{var t=u(e,!0);return t.buffer||(t=new Uint8Array(t)),t},d=(e,t,r)=>{e=ee(e)?new URL(e):k.normalize(e),w.readFile(e,(function(e,n){e?r(e):t(n.buffer)}))},Ke.argv.length>1&&Ke.argv[1].replace(/\\/g,"/"),Ke.argv.slice(2),Ke.on("uncaughtException",(function(e){if(!(e instanceof ne))throw e})),Ke.on("unhandledRejection",(function(e){throw e})),h=(e,t)=>{if(K())throw Ke.exitCode=e,t;!function(e){e instanceof ne||E("exiting due to exception: "+e)}(t),Ke.exit(e)},l.inspect=function(){return"[Emscripten Module object]"};try{e=ud}catch(e){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),e}rd.Worker=e.Worker}else(f||m)&&(m?_=self.location.href:"undefined"!=typeof document&&document.currentScript&&(_=document.currentScript.src),void 0!==e&&e&&(_=e),_=0!==_.indexOf("blob:")?_.substr(0,_.replace(/[?#].*/,"").lastIndexOf("/")+1):"",y||(u=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},m&&(c=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),d=(e,t,r)=>{var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=()=>{200==n.status||0==n.status&&n.response?t(n.response):r()},n.onerror=r,n.send(null)}));y&&"undefined"==typeof performance&&(rd.performance=ud.performance);var T=console.log.bind(console),O=console.warn.bind(console);y&&(T=e=>w.writeSync(1,e+"\n"),O=e=>w.writeSync(2,e+"\n"));var x,S=l.print||T,E=l.printErr||O;Object.assign(l,g),g=null,l.arguments&&l.arguments,l.thisProgram&&l.thisProgram,l.quit&&(h=l.quit),l.wasmBinary&&(x=l.wasmBinary);var F,M,R=l.noExitRuntime||!0;"object"!=typeof WebAssembly&&Q("no native wasm support detected");var C,I,A,B,D,L,N,P=!1,j="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function G(e,t,r){for(var n=t+r,o=t;e[o]&&!(o>=n);)++o;if(o-t>16&&e.buffer&&j)return j.decode(e.buffer instanceof SharedArrayBuffer?e.slice(t,o):e.subarray(t,o));for(var a="";t<o;){var i=e[t++];if(128&i){var s=63&e[t++];if(192!=(224&i)){var p=63&e[t++];if((i=224==(240&i)?(15&i)<<12|s<<6|p:(7&i)<<18|s<<12|p<<6|63&e[t++])<65536)a+=String.fromCharCode(i);else{var l=i-65536;a+=String.fromCharCode(55296|l>>10,56320|1023&l)}}else a+=String.fromCharCode((31&i)<<6|s)}else a+=String.fromCharCode(i)}return a}function W(e){I=e,l.HEAP8=A=new Int8Array(e),l.HEAP16=new Int16Array(e),l.HEAP32=D=new Int32Array(e),l.HEAPU8=B=new Uint8Array(e),l.HEAPU16=new Uint16Array(e),l.HEAPU32=L=new Uint32Array(e),l.HEAPF32=new Float32Array(e),l.HEAPF64=N=new Float64Array(e)}b&&(I=l.buffer);var z,U=l.INITIAL_MEMORY||16777216;if(b)F=l.wasmMemory,I=l.buffer;else if(l.wasmMemory)F=l.wasmMemory;else if(!((F=new WebAssembly.Memory({initial:U/65536,maximum:32768,shared:!0})).buffer instanceof SharedArrayBuffer))throw E("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),y&&E("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");F&&(I=F.buffer),U=I.byteLength,W(I);var $=[],H=[],V=[];function K(){return R}function Y(){b||le(H)}var X,q=0,J=null;function Q(e){l.onAbort&&l.onAbort(e),E(e="Aborted("+e+")"),P=!0,C=1,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw s(t),t}function Z(e){return e.startsWith("data:application/octet-stream;base64,")}function ee(e){return e.startsWith("file://")}function te(e){try{if(e==X&&x)return new Uint8Array(x);if(c)return c(e);throw"both async and sync fetching of the wasm failed"}catch(e){Q(e)}}Z(X="tfjs-backend-wasm-threaded-simd.wasm")||(X=v(X));var re={};function ne(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function oe(e){var t=pe.pthreads[e];t||Q(void 0),pe.returnWorkerToPool(t)}function ae(e){var t=pe.getNewWorker();if(!t)return 6;pe.runningWorkers.push(t),pe.pthreads[e.pthread_ptr]=t,t.pthread_ptr=e.pthread_ptr;var r={cmd:"run",start_routine:e.startRoutine,arg:e.arg,pthread_ptr:e.pthread_ptr};return t.runPthread=()=>{y&&t.ref(),t.postMessage(r,e.transferList),delete t.runPthread},t.loaded&&t.runPthread(),0}function ie(e){if(b)return ye(1,1,e);C=e,K()||(pe.terminateAllThreads(),l.onExit&&l.onExit(e),P=!0),h(e,new ne(e))}var se=function(e,t){if(C=e,!t&&b)throw ue(e),"unwind";ie(e)},pe={unusedWorkers:[],runningWorkers:[],tlsInitFunctions:[],pthreads:{},init:function(){b?pe.initWorker():pe.initMainThread()},initMainThread:function(){for(var e=8;e--;)pe.allocateUnusedWorker()},initWorker:function(){R=!1},setExitStatus:function(e){C=e},terminateAllThreads:function(){for(var e of Object.values(pe.pthreads))pe.returnWorkerToPool(e);for(var e of pe.unusedWorkers)e.terminate();pe.unusedWorkers=[]},returnWorkerToPool:function(e){var t=e.pthread_ptr;delete pe.pthreads[t],pe.unusedWorkers.push(e),pe.runningWorkers.splice(pe.runningWorkers.indexOf(e),1),e.pthread_ptr=0,y&&e.unref(),Le(t)},receiveObjectTransfer:function(e){},threadInitTLS:function(){pe.tlsInitFunctions.forEach((e=>e()))},loadWasmModuleToWorker:function(t,r){t.onmessage=e=>{var n,o=e.data,a=o.cmd;if(t.pthread_ptr&&(pe.currentProxiedOperationCallerThread=t.pthread_ptr),o.targetThread&&o.targetThread!=Me()){var i=pe.pthreads[o.targetThread];return i?i.postMessage(o,o.transferList):E('Internal error! Worker sent a message "'+a+'" to target pthread '+o.targetThread+", but that thread no longer exists!"),void(pe.currentProxiedOperationCallerThread=void 0)}"processProxyingQueue"===a?fe(o.queue):"spawnThread"===a?ae(o):"cleanupThread"===a?oe(o.thread):"killThread"===a?function(e){var t=pe.pthreads[e];delete pe.pthreads[e],t.terminate(),Le(e),pe.runningWorkers.splice(pe.runningWorkers.indexOf(t),1),t.pthread_ptr=0}(o.thread):"cancelThread"===a?(n=o.thread,pe.pthreads[n].postMessage({cmd:"cancel"})):"loaded"===a?(t.loaded=!0,y&&t.unref(),r&&r(t),t.runPthread&&t.runPthread()):"print"===a?S("Thread "+o.threadId+": "+o.text):"printErr"===a?E("Thread "+o.threadId+": "+o.text):"alert"===a?alert("Thread "+o.threadId+": "+o.text):"setimmediate"===o.target?t.postMessage(o):"callHandler"===a?l[o.handler](...o.args):a&&E("worker sent an unknown command "+a),pe.currentProxiedOperationCallerThread=void 0},t.onerror=e=>{throw E("worker sent an error! "+e.filename+":"+e.lineno+": "+e.message),e},y&&(t.on("message",(function(e){t.onmessage({data:e})})),t.on("error",(function(e){t.onerror(e)})),t.on("detachedExit",(function(){})));var n=[];for(var o of["onExit","onAbort","print","printErr"])l.hasOwnProperty(o)&&n.push(o);t.postMessage({cmd:"load",handlers:n,urlOrBlob:l.mainScriptUrlOrBlob||e,wasmMemory:F,wasmModule:M})},allocateUnusedWorker:function(){var e,t=v("tfjs-backend-wasm-threaded-simd.worker.js");e=new Worker(t),pe.unusedWorkers.push(e)},getNewWorker:function(){return 0==pe.unusedWorkers.length&&(pe.allocateUnusedWorker(),pe.loadWasmModuleToWorker(pe.unusedWorkers[0])),pe.unusedWorkers.pop()}};function le(e){for(;e.length>0;)e.shift()(l)}function ue(e){if(b)return ye(2,0,e);try{se(e)}catch(e){!function(e){if(e instanceof ne||"unwind"==e)return C;h(1,e)}(e)}}l.PThread=pe,l.establishStackSpace=function(){var e=Me(),t=n()[e+52>>2],r=n()[e+56>>2];Pe(t,t-r),Ge(t)};var de,ce=[];function ge(e,t,r,n){return b?ye(3,1,e,t,r,n):he(e,t,r,n)}function he(e,t,r,n){if("undefined"==typeof SharedArrayBuffer)return E("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var o=[];if(b&&0===o.length)return ge(e,t,r,n);var a={startRoutine:r,pthread_ptr:e,arg:n,transferList:o};return b?(a.cmd="spawnThread",postMessage(a,o),0):ae(a)}function fe(e){Atomics.store(n(),e>>2,1),Me()&&De(e),Atomics.compareExchange(n(),e>>2,1,0)}function me(e){me.shown||(me.shown={}),me.shown[e]||(me.shown[e]=1,y&&(e="warning: "+e),E(e))}function ye(e,t){var r=arguments.length-2,n=arguments;return function(e){var t=je(),r=e();return Ge(t),r}((()=>{for(var o=r,i=We(8*o),s=i>>3,p=0;p<r;p++){var l=n[2+p];a()[s+p]=l}return Ce(e,o,i,t)}))}l.invokeEntryPoint=function(e,t){var r,n,o=((n=ce[r=e])||(r>=ce.length&&(ce.length=r+1),ce[r]=n=z.get(r)),n)(t);K()?pe.setExitStatus(o):Ne(o)},l.executeNotifiedProxyingQueue=fe,de=y?()=>{var e=Ke.hrtime();return 1e3*e[0]+e[1]/1e6}:()=>performance.timeOrigin+performance.now();var be=[];function _e(e){try{return F.grow(e-I.byteLength+65535>>>16),W(F.buffer),1}catch(e){}}function ve(e){return b?ye(4,1,e):52}function we(e,t,r,n,o){return b?ye(5,1,e,t,r,n,o):70}var ke=[null,[],[]];function Te(e,t){var r=ke[e];0===t||10===t?((1===e?S:E)(G(r,0)),r.length=0):r.push(t)}function Oe(e,t,n,a){if(b)return ye(6,1,e,t,n,a);for(var i=0,s=0;s<n;s++){var p=o()[t>>2],l=o()[t+4>>2];t+=8;for(var u=0;u<l;u++)Te(e,r()[p+u]);i+=l}return o()[a>>2]=i,0}function xe(e){return l["_"+e]}function Se(e,t,n,o,a){var i={string:e=>{var t=0;if(null!=e&&0!==e){var n=1+(e.length<<2);!function(e,t,n){!function(e,t,r,n){if(!(n>0))return 0;for(var o=r+n-1,a=0;a<e.length;++a){var i=e.charCodeAt(a);if(i>=55296&&i<=57343&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++a)),i<=127){if(r>=o)break;t[r++]=i}else if(i<=2047){if(r+1>=o)break;t[r++]=192|i>>6,t[r++]=128|63&i}else if(i<=65535){if(r+2>=o)break;t[r++]=224|i>>12,t[r++]=128|i>>6&63,t[r++]=128|63&i}else{if(r+3>=o)break;t[r++]=240|i>>18,t[r++]=128|i>>12&63,t[r++]=128|i>>6&63,t[r++]=128|63&i}}t[r]=0}(e,r(),t,n)}(e,t=We(n),n)}return t},array:e=>{var t=We(e.length);return function(e,t){(F.buffer!=I&&W(F.buffer),A).set(e,t)}(e,t),t}},s=xe(e),p=[],l=0;if(o)for(var u=0;u<o.length;u++){var d=i[n[u]];d?(0===l&&(l=je()),p[u]=d(o[u])):p[u]=o[u]}return function(e){return 0!==l&&Ge(l),function(e){return"string"===t?(n=e)?G(r(),n,void 0):"":"boolean"===t?Boolean(e):e;var n}(e)}(s.apply(null,p))}pe.init();var Ee=[null,ie,ue,ge,ve,we,Oe],Fe={__emscripten_init_main_thread_js:function(e){Re(e,!m,1,!f),pe.threadInitTLS()},__emscripten_thread_cleanup:function(e){b?postMessage({cmd:"cleanupThread",thread:e}):oe(e)},__pthread_create_js:he,_emscripten_default_pthread_stack_size:function(){return 65536},_emscripten_get_now_is_monotonic:function(){return!0},_emscripten_notify_task_queue:function(e,t,r,n){if(e==t)setTimeout((()=>fe(n)));else if(b)postMessage({targetThread:e,cmd:"processProxyingQueue",queue:n});else{var o=pe.pthreads[e];if(!o)return;o.postMessage({cmd:"processProxyingQueue",queue:n})}return 1},_emscripten_set_offscreencanvas_size:function(e,t,r){return-1},abort:function(){Q("")},emscripten_check_blocking_allowed:function(){y||m||me("Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread")},emscripten_date_now:function(){return Date.now()},emscripten_get_heap_max:function(){return 2147483648},emscripten_get_now:de,emscripten_memcpy_big:function(e,t,n){r().copyWithin(e,t,t+n)},emscripten_num_logical_cores:function(){return y?ud.cpus().length:navigator.hardwareConcurrency},emscripten_receive_on_main_thread_js:function(e,t,r){be.length=t;for(var n=r>>3,o=0;o<t;o++)be[o]=a()[n+o];return(e<0?re[-e-1]:Ee[e]).apply(null,be)},emscripten_resize_heap:function(e){var t=r().length;if((e>>>=0)<=t)return!1;var n=2147483648;if(e>n)return!1;let o=(e,t)=>e+(t-e%t)%t;for(var a=1;a<=4;a*=2){var i=t*(1+.2/a);if(i=Math.min(i,e+100663296),_e(Math.min(n,o(Math.max(e,i),65536))))return!0}return!1},emscripten_unwind_to_js_event_loop:function(){throw"unwind"},exit:se,fd_close:ve,fd_seek:we,fd_write:Oe,memory:F||l.wasmMemory};!function(){var e={env:Fe,wasi_snapshot_preview1:Fe};function t(e,t){var r,n,o=e.exports;if(l.asm=o,r=l.asm._emscripten_tls_init,pe.tlsInitFunctions.push(r),z=l.asm.__indirect_function_table,n=l.asm.__wasm_call_ctors,H.unshift(n),M=t,!b){var a=pe.unusedWorkers.length;pe.unusedWorkers.forEach((function(e){pe.loadWasmModuleToWorker(e,(function(){--a||function(e){if(q--,l.monitorRunDependencies&&l.monitorRunDependencies(q),0==q&&J){var t=J;J=null,t()}}()}))}))}}function r(e){t(e.instance,e.module)}function n(t){return function(){if(!x&&(f||m)){if("function"==typeof fetch&&!ee(X))return fetch(X,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+X+"'";return e.arrayBuffer()})).catch((function(){return te(X)}));if(d)return new Promise((function(e,t){d(X,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return te(X)}))}().then((function(t){return WebAssembly.instantiate(t,e)})).then((function(e){return e})).then(t,(function(e){E("failed to asynchronously prepare wasm: "+e),Q(e)}))}if(b||(q++,l.monitorRunDependencies&&l.monitorRunDependencies(q)),l.instantiateWasm)try{return l.instantiateWasm(e,t)}catch(e){E("Module.instantiateWasm callback failed with error: "+e),s(e)}(x||"function"!=typeof WebAssembly.instantiateStreaming||Z(X)||ee(X)||y||"function"!=typeof fetch?n(r):fetch(X,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(r,(function(e){return E("wasm streaming compile failed: "+e),E("falling back to ArrayBuffer instantiation"),n(r)}))}))).catch(s)}(),l.___wasm_call_ctors=function(){return(l.___wasm_call_ctors=l.asm.__wasm_call_ctors).apply(null,arguments)},l._init=function(){return(l._init=l.asm.init).apply(null,arguments)},l._init_with_threads_count=function(){return(l._init_with_threads_count=l.asm.init_with_threads_count).apply(null,arguments)},l._get_threads_count=function(){return(l._get_threads_count=l.asm.get_threads_count).apply(null,arguments)},l._register_tensor=function(){return(l._register_tensor=l.asm.register_tensor).apply(null,arguments)},l._dispose_data=function(){return(l._dispose_data=l.asm.dispose_data).apply(null,arguments)},l._dispose=function(){return(l._dispose=l.asm.dispose).apply(null,arguments)},l._Abs=function(){return(l._Abs=l.asm.Abs).apply(null,arguments)},l._Add=function(){return(l._Add=l.asm.Add).apply(null,arguments)},l._AddN=function(){return(l._AddN=l.asm.AddN).apply(null,arguments)},l._All=function(){return(l._All=l.asm.All).apply(null,arguments)},l._Any=function(){return(l._Any=l.asm.Any).apply(null,arguments)},l._ArgMax=function(){return(l._ArgMax=l.asm.ArgMax).apply(null,arguments)},l._AvgPool=function(){return(l._AvgPool=l.asm.AvgPool).apply(null,arguments)},l._BatchMatMul=function(){return(l._BatchMatMul=l.asm.BatchMatMul).apply(null,arguments)},l._Ceil=function(){return(l._Ceil=l.asm.Ceil).apply(null,arguments)},l._ClipByValue=function(){return(l._ClipByValue=l.asm.ClipByValue).apply(null,arguments)},l._Conv2D=function(){return(l._Conv2D=l.asm.Conv2D).apply(null,arguments)},l._Conv2DBackpropInput=function(){return(l._Conv2DBackpropInput=l.asm.Conv2DBackpropInput).apply(null,arguments)},l._Cos=function(){return(l._Cos=l.asm.Cos).apply(null,arguments)},l._Cosh=function(){return(l._Cosh=l.asm.Cosh).apply(null,arguments)},l._CropAndResize=function(){return(l._CropAndResize=l.asm.CropAndResize).apply(null,arguments)},l._Cumprod=function(){return(l._Cumprod=l.asm.Cumprod).apply(null,arguments)},l._Cumsum=function(){return(l._Cumsum=l.asm.Cumsum).apply(null,arguments)},l._DepthToSpace=function(){return(l._DepthToSpace=l.asm.DepthToSpace).apply(null,arguments)},l._DepthwiseConv2dNative=function(){return(l._DepthwiseConv2dNative=l.asm.DepthwiseConv2dNative).apply(null,arguments)},l._Elu=function(){return(l._Elu=l.asm.Elu).apply(null,arguments)},l._Equal=function(){return(l._Equal=l.asm.Equal).apply(null,arguments)},l._Exp=function(){return(l._Exp=l.asm.Exp).apply(null,arguments)},l._FlipLeftRight=function(){return(l._FlipLeftRight=l.asm.FlipLeftRight).apply(null,arguments)},l._Floor=function(){return(l._Floor=l.asm.Floor).apply(null,arguments)},l._FloorDiv=function(){return(l._FloorDiv=l.asm.FloorDiv).apply(null,arguments)},l._FusedBatchNorm=function(){return(l._FusedBatchNorm=l.asm.FusedBatchNorm).apply(null,arguments)},l._FusedConv2D=function(){return(l._FusedConv2D=l.asm.FusedConv2D).apply(null,arguments)},l._FusedDepthwiseConv2D=function(){return(l._FusedDepthwiseConv2D=l.asm.FusedDepthwiseConv2D).apply(null,arguments)},l._Gather=function(){return(l._Gather=l.asm.Gather).apply(null,arguments)},l._GatherNd=function(){return(l._GatherNd=l.asm.GatherNd).apply(null,arguments)},l._Greater=function(){return(l._Greater=l.asm.Greater).apply(null,arguments)},l._GreaterEqual=function(){return(l._GreaterEqual=l.asm.GreaterEqual).apply(null,arguments)},l._IsNan=function(){return(l._IsNan=l.asm.IsNan).apply(null,arguments)},l._LeakyRelu=function(){return(l._LeakyRelu=l.asm.LeakyRelu).apply(null,arguments)},l._Less=function(){return(l._Less=l.asm.Less).apply(null,arguments)},l._LessEqual=function(){return(l._LessEqual=l.asm.LessEqual).apply(null,arguments)},l._Log=function(){return(l._Log=l.asm.Log).apply(null,arguments)},l._LogicalAnd=function(){return(l._LogicalAnd=l.asm.LogicalAnd).apply(null,arguments)},l._LogicalNot=function(){return(l._LogicalNot=l.asm.LogicalNot).apply(null,arguments)},l._LogicalOr=function(){return(l._LogicalOr=l.asm.LogicalOr).apply(null,arguments)},l._LogicalXor=function(){return(l._LogicalXor=l.asm.LogicalXor).apply(null,arguments)},l._Max=function(){return(l._Max=l.asm.Max).apply(null,arguments)},l._MaxPool=function(){return(l._MaxPool=l.asm.MaxPool).apply(null,arguments)},l._Maximum=function(){return(l._Maximum=l.asm.Maximum).apply(null,arguments)},l._Mean=function(){return(l._Mean=l.asm.Mean).apply(null,arguments)},l._Min=function(){return(l._Min=l.asm.Min).apply(null,arguments)},l._Minimum=function(){return(l._Minimum=l.asm.Minimum).apply(null,arguments)},l._MirrorPad=function(){return(l._MirrorPad=l.asm.MirrorPad).apply(null,arguments)},l._Multiply=function(){return(l._Multiply=l.asm.Multiply).apply(null,arguments)},l._Neg=function(){return(l._Neg=l.asm.Neg).apply(null,arguments)},l._NonMaxSuppressionV3=function(){return(l._NonMaxSuppressionV3=l.asm.NonMaxSuppressionV3).apply(null,arguments)},l._NonMaxSuppressionV4=function(){return(l._NonMaxSuppressionV4=l.asm.NonMaxSuppressionV4).apply(null,arguments)},l._NonMaxSuppressionV5=function(){return(l._NonMaxSuppressionV5=l.asm.NonMaxSuppressionV5).apply(null,arguments)},l._NotEqual=function(){return(l._NotEqual=l.asm.NotEqual).apply(null,arguments)},l._OneHot=function(){return(l._OneHot=l.asm.OneHot).apply(null,arguments)},l._PadV2=function(){return(l._PadV2=l.asm.PadV2).apply(null,arguments)},l._Pow=function(){return(l._Pow=l.asm.Pow).apply(null,arguments)},l._Prelu=function(){return(l._Prelu=l.asm.Prelu).apply(null,arguments)},l._Prod=function(){return(l._Prod=l.asm.Prod).apply(null,arguments)},l._RealDiv=function(){return(l._RealDiv=l.asm.RealDiv).apply(null,arguments)},l._Reciprocal=function(){return(l._Reciprocal=l.asm.Reciprocal).apply(null,arguments)},l._Relu=function(){return(l._Relu=l.asm.Relu).apply(null,arguments)},l._Relu6=function(){return(l._Relu6=l.asm.Relu6).apply(null,arguments)},l._ResizeBilinear=function(){return(l._ResizeBilinear=l.asm.ResizeBilinear).apply(null,arguments)},l._ResizeNearestNeighbor=function(){return(l._ResizeNearestNeighbor=l.asm.ResizeNearestNeighbor).apply(null,arguments)},l._Reverse=function(){return(l._Reverse=l.asm.Reverse).apply(null,arguments)},l._RotateWithOffset=function(){return(l._RotateWithOffset=l.asm.RotateWithOffset).apply(null,arguments)},l._Round=function(){return(l._Round=l.asm.Round).apply(null,arguments)},l._Rsqrt=function(){return(l._Rsqrt=l.asm.Rsqrt).apply(null,arguments)},l._ScatterNd=function(){return(l._ScatterNd=l.asm.ScatterNd).apply(null,arguments)},l._SelectV2=function(){return(l._SelectV2=l.asm.SelectV2).apply(null,arguments)},l._Sigmoid=function(){return(l._Sigmoid=l.asm.Sigmoid).apply(null,arguments)},l._Sin=function(){return(l._Sin=l.asm.Sin).apply(null,arguments)},l._Softmax=function(){return(l._Softmax=l.asm.Softmax).apply(null,arguments)},l._SparseFillEmptyRows=function(){return(l._SparseFillEmptyRows=l.asm.SparseFillEmptyRows).apply(null,arguments)},l._SparseReshape=function(){return(l._SparseReshape=l.asm.SparseReshape).apply(null,arguments)},l._SparseSegmentReduction=function(){return(l._SparseSegmentReduction=l.asm.SparseSegmentReduction).apply(null,arguments)},l._Sqrt=function(){return(l._Sqrt=l.asm.Sqrt).apply(null,arguments)},l._Square=function(){return(l._Square=l.asm.Square).apply(null,arguments)},l._SquaredDifference=function(){return(l._SquaredDifference=l.asm.SquaredDifference).apply(null,arguments)},l._Step=function(){return(l._Step=l.asm.Step).apply(null,arguments)},l._StridedSlice=function(){return(l._StridedSlice=l.asm.StridedSlice).apply(null,arguments)},l._Sub=function(){return(l._Sub=l.asm.Sub).apply(null,arguments)},l._Sum=function(){return(l._Sum=l.asm.Sum).apply(null,arguments)},l._Tan=function(){return(l._Tan=l.asm.Tan).apply(null,arguments)},l._Tanh=function(){return(l._Tanh=l.asm.Tanh).apply(null,arguments)},l._Tile=function(){return(l._Tile=l.asm.Tile).apply(null,arguments)},l._TopK=function(){return(l._TopK=l.asm.TopK).apply(null,arguments)},l._Transform=function(){return(l._Transform=l.asm.Transform).apply(null,arguments)},l._Transpose=function(){return(l._Transpose=l.asm.Transpose).apply(null,arguments)},l.__FusedMatMul=function(){return(l.__FusedMatMul=l.asm._FusedMatMul).apply(null,arguments)},l._malloc=function(){return(l._malloc=l.asm.malloc).apply(null,arguments)},l._free=function(){return(l._free=l.asm.free).apply(null,arguments)},l.__emscripten_tls_init=function(){return(l.__emscripten_tls_init=l.asm._emscripten_tls_init).apply(null,arguments)};var Me=l._pthread_self=function(){return(Me=l._pthread_self=l.asm.pthread_self).apply(null,arguments)};l.___errno_location=function(){return(l.___errno_location=l.asm.__errno_location).apply(null,arguments)};var Re=l.__emscripten_thread_init=function(){return(Re=l.__emscripten_thread_init=l.asm._emscripten_thread_init).apply(null,arguments)};l.__emscripten_thread_crashed=function(){return(l.__emscripten_thread_crashed=l.asm._emscripten_thread_crashed).apply(null,arguments)},l._emscripten_main_thread_process_queued_calls=function(){return(l._emscripten_main_thread_process_queued_calls=l.asm.emscripten_main_thread_process_queued_calls).apply(null,arguments)},l._emscripten_main_browser_thread_id=function(){return(l._emscripten_main_browser_thread_id=l.asm.emscripten_main_browser_thread_id).apply(null,arguments)};var Ce=l._emscripten_run_in_main_runtime_thread_js=function(){return(Ce=l._emscripten_run_in_main_runtime_thread_js=l.asm.emscripten_run_in_main_runtime_thread_js).apply(null,arguments)};l._emscripten_dispatch_to_thread_=function(){return(l._emscripten_dispatch_to_thread_=l.asm.emscripten_dispatch_to_thread_).apply(null,arguments)};var Ie,Ae,Be,De=l.__emscripten_proxy_execute_task_queue=function(){return(De=l.__emscripten_proxy_execute_task_queue=l.asm._emscripten_proxy_execute_task_queue).apply(null,arguments)},Le=l.__emscripten_thread_free_data=function(){return(Le=l.__emscripten_thread_free_data=l.asm._emscripten_thread_free_data).apply(null,arguments)},Ne=l.__emscripten_thread_exit=function(){return(Ne=l.__emscripten_thread_exit=l.asm._emscripten_thread_exit).apply(null,arguments)},Pe=l._emscripten_stack_set_limits=function(){return(Pe=l._emscripten_stack_set_limits=l.asm.emscripten_stack_set_limits).apply(null,arguments)},je=l.stackSave=function(){return(je=l.stackSave=l.asm.stackSave).apply(null,arguments)},Ge=l.stackRestore=function(){return(Ge=l.stackRestore=l.asm.stackRestore).apply(null,arguments)},We=l.stackAlloc=function(){return(We=l.stackAlloc=l.asm.stackAlloc).apply(null,arguments)};function ze(e){if(!(q>0)){if(b)return i(l),Y(),void startWorker(l);!function(){if(l.preRun)for("function"==typeof l.preRun&&(l.preRun=[l.preRun]);l.preRun.length;)e=l.preRun.shift(),$.unshift(e);var e;le($)}(),q>0||(l.setStatus?(l.setStatus("Running..."),setTimeout((function(){setTimeout((function(){l.setStatus("")}),1),t()}),1)):t())}function t(){Ie||(Ie=!0,l.calledRun=!0,P||(Y(),i(l),l.onRuntimeInitialized&&l.onRuntimeInitialized(),function(){if(!b){if(l.postRun)for("function"==typeof l.postRun&&(l.postRun=[l.postRun]);l.postRun.length;)e=l.postRun.shift(),V.unshift(e);var e;le(V)}}()))}}if(l.dynCall_iijjiiii=function(){return(l.dynCall_iijjiiii=l.asm.dynCall_iijjiiii).apply(null,arguments)},l.dynCall_jiji=function(){return(l.dynCall_jiji=l.asm.dynCall_jiji).apply(null,arguments)},l.keepRuntimeAlive=K,l.wasmMemory=F,l.cwrap=function(e,t,r,n){var o=(r=r||[]).every((e=>"number"===e||"boolean"===e));return"string"!==t&&o&&!n?xe(e):function(){return Se(e,t,r,arguments)}},l.ExitStatus=ne,l.PThread=pe,J=function e(){Ie||ze(),Ie||(J=e)},l.preInit)for("function"==typeof l.preInit&&(l.preInit=[l.preInit]);l.preInit.length>0;)l.preInit.pop()();if(ze(),p&&(Ae={uncaughtException:Ke.listeners("uncaughtException").filter((function(e){return!p.uncaughtException.indexOf(e)>-1})),unhandledRejection:Ke.listeners("unhandledRejection").filter((function(e){return!p.unhandledRejection.indexOf(e)>-1}))}),"undefined"!=typeof WasmBackendModule)Be=WasmBackendModule;else{if(void 0===t)throw new Error("Could not find wasm module in post.js");Be=t}if(Ae){var Ue=Be._dispose;Be._dispose=function(){Ue(),Ae.uncaughtException.forEach((function(e){Ke.removeListener("uncaughtException",e)})),Ae.unhandledRejection.forEach((function(e){Ke.removeListener("unhandledRejection",e)}))}}return t.ready}})();e.exports=r})),GE=a({__proto__:null,default:jE},[jE]),WE=nd((function(e,t){var r=(()=>{var e="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0;return e=e||"/Users/djanekovic/Code/xzimg-web-sdk/node_modules/@tensorflow/tfjs-backend-wasm/wasm-out",function(t){var r,n,o,a=void 0!==(t=t||{})?t:{};a.ready=new Promise((function(e,t){r=e,n=t})),void 0!==Ke&&Ke.listeners&&(o={uncaughtException:Ke.listeners("uncaughtException"),unhandledRejection:Ke.listeners("unhandledRejection")});var i,s,p,l=Object.assign({},a),u="object"==typeof window,d="function"==typeof importScripts,c="object"==typeof Ke&&"object"==typeof Ke.versions&&"string"==typeof Ke.versions.node,g="";if(c){var h=ud,f=ud;g=d?f.dirname(g)+"/":"/Users/djanekovic/Code/xzimg-web-sdk/node_modules/@tensorflow/tfjs-backend-wasm/wasm-out/",i=(e,t)=>(e=N(e)?new URL(e):f.normalize(e),h.readFileSync(e,t?void 0:"utf8")),p=e=>{var t=i(e,!0);return t.buffer||(t=new Uint8Array(t)),t},s=(e,t,r)=>{e=N(e)?new URL(e):f.normalize(e),h.readFile(e,(function(e,n){e?r(e):t(n.buffer)}))},Ke.argv.length>1&&Ke.argv[1].replace(/\\/g,"/"),Ke.argv.slice(2),Ke.on("uncaughtException",(function(e){if(!(e instanceof j))throw e})),Ke.on("unhandledRejection",(function(e){throw e})),a.inspect=function(){return"[Emscripten Module object]"}}else(u||d)&&(d?g=self.location.href:"undefined"!=typeof document&&document.currentScript&&(g=document.currentScript.src),e&&(g=e),g=0!==g.indexOf("blob:")?g.substr(0,g.replace(/[?#].*/,"").lastIndexOf("/")+1):"",i=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},d&&(p=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),s=(e,t,r)=>{var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=()=>{200==n.status||0==n.status&&n.response?t(n.response):r()},n.onerror=r,n.send(null)});var m,y,b=a.print||console.log.bind(console),_=a.printErr||console.warn.bind(console);Object.assign(a,l),l=null,a.arguments&&a.arguments,a.thisProgram&&a.thisProgram,a.quit&&a.quit,a.wasmBinary&&(m=a.wasmBinary),a.noExitRuntime,"object"!=typeof WebAssembly&&D("no native wasm support detected");var v,w,k,T,O=!1,x="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function S(e,t,r){for(var n=t+r,o=t;e[o]&&!(o>=n);)++o;if(o-t>16&&e.buffer&&x)return x.decode(e.subarray(t,o));for(var a="";t<o;){var i=e[t++];if(128&i){var s=63&e[t++];if(192!=(224&i)){var p=63&e[t++];if((i=224==(240&i)?(15&i)<<12|s<<6|p:(7&i)<<18|s<<12|p<<6|63&e[t++])<65536)a+=String.fromCharCode(i);else{var l=i-65536;a+=String.fromCharCode(55296|l>>10,56320|1023&l)}}else a+=String.fromCharCode((31&i)<<6|s)}else a+=String.fromCharCode(i)}return a}function E(e){v=e,a.HEAP8=w=new Int8Array(e),a.HEAP16=new Int16Array(e),a.HEAP32=new Int32Array(e),a.HEAPU8=k=new Uint8Array(e),a.HEAPU16=new Uint16Array(e),a.HEAPU32=T=new Uint32Array(e),a.HEAPF32=new Float32Array(e),a.HEAPF64=new Float64Array(e)}a.INITIAL_MEMORY;var F,M,R=[],C=[],I=[],A=0,B=null;function D(e){a.onAbort&&a.onAbort(e),_(e="Aborted("+e+")"),O=!0,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw n(t),t}function L(e){return e.startsWith("data:application/octet-stream;base64,")}function N(e){return e.startsWith("file://")}function P(e){try{if(e==F&&m)return new Uint8Array(m);if(p)return p(e);throw"both async and sync fetching of the wasm failed"}catch(e){D(e)}}function j(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function G(e){for(;e.length>0;)e.shift()(a)}function W(e){try{return y.grow(e-v.byteLength+65535>>>16),E(y.buffer),1}catch(e){}}L(F="tfjs-backend-wasm.wasm")||(M=F,F=a.locateFile?a.locateFile(M,g):g+M);var z=[null,[],[]];function U(e,t){var r=z[e];0===t||10===t?((1===e?b:_)(S(r,0)),r.length=0):r.push(t)}function $(e){return a["_"+e]}var H={abort:function(){D("")},emscripten_get_heap_max:function(){return 2147483648},emscripten_memcpy_big:function(e,t,r){k.copyWithin(e,t,t+r)},emscripten_resize_heap:function(e){var t=k.length,r=2147483648;if((e>>>=0)>r)return!1;let n=(e,t)=>e+(t-e%t)%t;for(var o=1;o<=4;o*=2){var a=t*(1+.2/o);if(a=Math.min(a,e+100663296),W(Math.min(r,n(Math.max(e,a),65536))))return!0}return!1},fd_close:function(e){return 52},fd_seek:function(e,t,r,n,o){return 70},fd_write:function(e,t,r,n){for(var o=0,a=0;a<r;a++){var i=T[t>>2],s=T[t+4>>2];t+=8;for(var p=0;p<s;p++)U(e,k[i+p]);o+=s}return T[n>>2]=o,0}};!function(){var e={env:H,wasi_snapshot_preview1:H};function t(e,t){var r,n=e.exports;a.asm=n,E((y=a.asm.memory).buffer),a.asm.__indirect_function_table,r=a.asm.__wasm_call_ctors,C.unshift(r),function(e){if(A--,a.monitorRunDependencies&&a.monitorRunDependencies(A),0==A&&B){var t=B;B=null,t()}}()}function r(e){t(e.instance)}function o(t){return function(){if(!m&&(u||d)){if("function"==typeof fetch&&!N(F))return fetch(F,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+F+"'";return e.arrayBuffer()})).catch((function(){return P(F)}));if(s)return new Promise((function(e,t){s(F,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return P(F)}))}().then((function(t){return WebAssembly.instantiate(t,e)})).then((function(e){return e})).then(t,(function(e){_("failed to asynchronously prepare wasm: "+e),D(e)}))}if(A++,a.monitorRunDependencies&&a.monitorRunDependencies(A),a.instantiateWasm)try{return a.instantiateWasm(e,t)}catch(e){_("Module.instantiateWasm callback failed with error: "+e),n(e)}(m||"function"!=typeof WebAssembly.instantiateStreaming||L(F)||N(F)||c||"function"!=typeof fetch?o(r):fetch(F,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(r,(function(e){return _("wasm streaming compile failed: "+e),_("falling back to ArrayBuffer instantiation"),o(r)}))}))).catch(n)}(),a.___wasm_call_ctors=function(){return(a.___wasm_call_ctors=a.asm.__wasm_call_ctors).apply(null,arguments)},a._init=function(){return(a._init=a.asm.init).apply(null,arguments)},a._init_with_threads_count=function(){return(a._init_with_threads_count=a.asm.init_with_threads_count).apply(null,arguments)},a._get_threads_count=function(){return(a._get_threads_count=a.asm.get_threads_count).apply(null,arguments)},a._register_tensor=function(){return(a._register_tensor=a.asm.register_tensor).apply(null,arguments)},a._dispose_data=function(){return(a._dispose_data=a.asm.dispose_data).apply(null,arguments)},a._dispose=function(){return(a._dispose=a.asm.dispose).apply(null,arguments)},a._Abs=function(){return(a._Abs=a.asm.Abs).apply(null,arguments)},a._Add=function(){return(a._Add=a.asm.Add).apply(null,arguments)},a._AddN=function(){return(a._AddN=a.asm.AddN).apply(null,arguments)},a._All=function(){return(a._All=a.asm.All).apply(null,arguments)},a._Any=function(){return(a._Any=a.asm.Any).apply(null,arguments)},a._ArgMax=function(){return(a._ArgMax=a.asm.ArgMax).apply(null,arguments)},a._AvgPool=function(){return(a._AvgPool=a.asm.AvgPool).apply(null,arguments)},a._BatchMatMul=function(){return(a._BatchMatMul=a.asm.BatchMatMul).apply(null,arguments)},a._Ceil=function(){return(a._Ceil=a.asm.Ceil).apply(null,arguments)},a._ClipByValue=function(){return(a._ClipByValue=a.asm.ClipByValue).apply(null,arguments)},a._Conv2D=function(){return(a._Conv2D=a.asm.Conv2D).apply(null,arguments)},a._Conv2DBackpropInput=function(){return(a._Conv2DBackpropInput=a.asm.Conv2DBackpropInput).apply(null,arguments)},a._Cos=function(){return(a._Cos=a.asm.Cos).apply(null,arguments)},a._Cosh=function(){return(a._Cosh=a.asm.Cosh).apply(null,arguments)},a._CropAndResize=function(){return(a._CropAndResize=a.asm.CropAndResize).apply(null,arguments)},a._Cumprod=function(){return(a._Cumprod=a.asm.Cumprod).apply(null,arguments)},a._Cumsum=function(){return(a._Cumsum=a.asm.Cumsum).apply(null,arguments)},a._DepthToSpace=function(){return(a._DepthToSpace=a.asm.DepthToSpace).apply(null,arguments)},a._DepthwiseConv2dNative=function(){return(a._DepthwiseConv2dNative=a.asm.DepthwiseConv2dNative).apply(null,arguments)},a._Elu=function(){return(a._Elu=a.asm.Elu).apply(null,arguments)},a._Equal=function(){return(a._Equal=a.asm.Equal).apply(null,arguments)},a._Exp=function(){return(a._Exp=a.asm.Exp).apply(null,arguments)},a._FlipLeftRight=function(){return(a._FlipLeftRight=a.asm.FlipLeftRight).apply(null,arguments)},a._Floor=function(){return(a._Floor=a.asm.Floor).apply(null,arguments)},a._FloorDiv=function(){return(a._FloorDiv=a.asm.FloorDiv).apply(null,arguments)},a._FusedBatchNorm=function(){return(a._FusedBatchNorm=a.asm.FusedBatchNorm).apply(null,arguments)},a._FusedConv2D=function(){return(a._FusedConv2D=a.asm.FusedConv2D).apply(null,arguments)},a._FusedDepthwiseConv2D=function(){return(a._FusedDepthwiseConv2D=a.asm.FusedDepthwiseConv2D).apply(null,arguments)},a._Gather=function(){return(a._Gather=a.asm.Gather).apply(null,arguments)},a._GatherNd=function(){return(a._GatherNd=a.asm.GatherNd).apply(null,arguments)},a._Greater=function(){return(a._Greater=a.asm.Greater).apply(null,arguments)},a._GreaterEqual=function(){return(a._GreaterEqual=a.asm.GreaterEqual).apply(null,arguments)},a._IsNan=function(){return(a._IsNan=a.asm.IsNan).apply(null,arguments)},a._LeakyRelu=function(){return(a._LeakyRelu=a.asm.LeakyRelu).apply(null,arguments)},a._Less=function(){return(a._Less=a.asm.Less).apply(null,arguments)},a._LessEqual=function(){return(a._LessEqual=a.asm.LessEqual).apply(null,arguments)},a._Log=function(){return(a._Log=a.asm.Log).apply(null,arguments)},a._LogicalAnd=function(){return(a._LogicalAnd=a.asm.LogicalAnd).apply(null,arguments)},a._LogicalNot=function(){return(a._LogicalNot=a.asm.LogicalNot).apply(null,arguments)},a._LogicalOr=function(){return(a._LogicalOr=a.asm.LogicalOr).apply(null,arguments)},a._LogicalXor=function(){return(a._LogicalXor=a.asm.LogicalXor).apply(null,arguments)},a._Max=function(){return(a._Max=a.asm.Max).apply(null,arguments)},a._MaxPool=function(){return(a._MaxPool=a.asm.MaxPool).apply(null,arguments)},a._Maximum=function(){return(a._Maximum=a.asm.Maximum).apply(null,arguments)},a._Mean=function(){return(a._Mean=a.asm.Mean).apply(null,arguments)},a._Min=function(){return(a._Min=a.asm.Min).apply(null,arguments)},a._Minimum=function(){return(a._Minimum=a.asm.Minimum).apply(null,arguments)},a._MirrorPad=function(){return(a._MirrorPad=a.asm.MirrorPad).apply(null,arguments)},a._Multiply=function(){return(a._Multiply=a.asm.Multiply).apply(null,arguments)},a._Neg=function(){return(a._Neg=a.asm.Neg).apply(null,arguments)},a._NonMaxSuppressionV3=function(){return(a._NonMaxSuppressionV3=a.asm.NonMaxSuppressionV3).apply(null,arguments)},a._NonMaxSuppressionV4=function(){return(a._NonMaxSuppressionV4=a.asm.NonMaxSuppressionV4).apply(null,arguments)},a._NonMaxSuppressionV5=function(){return(a._NonMaxSuppressionV5=a.asm.NonMaxSuppressionV5).apply(null,arguments)},a._NotEqual=function(){return(a._NotEqual=a.asm.NotEqual).apply(null,arguments)},a._OneHot=function(){return(a._OneHot=a.asm.OneHot).apply(null,arguments)},a._PadV2=function(){return(a._PadV2=a.asm.PadV2).apply(null,arguments)},a._Pow=function(){return(a._Pow=a.asm.Pow).apply(null,arguments)},a._Prelu=function(){return(a._Prelu=a.asm.Prelu).apply(null,arguments)},a._Prod=function(){return(a._Prod=a.asm.Prod).apply(null,arguments)},a._RealDiv=function(){return(a._RealDiv=a.asm.RealDiv).apply(null,arguments)},a._Reciprocal=function(){return(a._Reciprocal=a.asm.Reciprocal).apply(null,arguments)},a._Relu=function(){return(a._Relu=a.asm.Relu).apply(null,arguments)},a._Relu6=function(){return(a._Relu6=a.asm.Relu6).apply(null,arguments)},a._ResizeBilinear=function(){return(a._ResizeBilinear=a.asm.ResizeBilinear).apply(null,arguments)},a._ResizeNearestNeighbor=function(){return(a._ResizeNearestNeighbor=a.asm.ResizeNearestNeighbor).apply(null,arguments)},a._Reverse=function(){return(a._Reverse=a.asm.Reverse).apply(null,arguments)},a._RotateWithOffset=function(){return(a._RotateWithOffset=a.asm.RotateWithOffset).apply(null,arguments)},a._Round=function(){return(a._Round=a.asm.Round).apply(null,arguments)},a._Rsqrt=function(){return(a._Rsqrt=a.asm.Rsqrt).apply(null,arguments)},a._ScatterNd=function(){return(a._ScatterNd=a.asm.ScatterNd).apply(null,arguments)},a._SelectV2=function(){return(a._SelectV2=a.asm.SelectV2).apply(null,arguments)},a._Sigmoid=function(){return(a._Sigmoid=a.asm.Sigmoid).apply(null,arguments)},a._Sin=function(){return(a._Sin=a.asm.Sin).apply(null,arguments)},a._Softmax=function(){return(a._Softmax=a.asm.Softmax).apply(null,arguments)},a._SparseFillEmptyRows=function(){return(a._SparseFillEmptyRows=a.asm.SparseFillEmptyRows).apply(null,arguments)},a._SparseReshape=function(){return(a._SparseReshape=a.asm.SparseReshape).apply(null,arguments)},a._SparseSegmentReduction=function(){return(a._SparseSegmentReduction=a.asm.SparseSegmentReduction).apply(null,arguments)},a._Sqrt=function(){return(a._Sqrt=a.asm.Sqrt).apply(null,arguments)},a._Square=function(){return(a._Square=a.asm.Square).apply(null,arguments)},a._SquaredDifference=function(){return(a._SquaredDifference=a.asm.SquaredDifference).apply(null,arguments)},a._Step=function(){return(a._Step=a.asm.Step).apply(null,arguments)},a._StridedSlice=function(){return(a._StridedSlice=a.asm.StridedSlice).apply(null,arguments)},a._Sub=function(){return(a._Sub=a.asm.Sub).apply(null,arguments)},a._Sum=function(){return(a._Sum=a.asm.Sum).apply(null,arguments)},a._Tan=function(){return(a._Tan=a.asm.Tan).apply(null,arguments)},a._Tanh=function(){return(a._Tanh=a.asm.Tanh).apply(null,arguments)},a._Tile=function(){return(a._Tile=a.asm.Tile).apply(null,arguments)},a._TopK=function(){return(a._TopK=a.asm.TopK).apply(null,arguments)},a._Transform=function(){return(a._Transform=a.asm.Transform).apply(null,arguments)},a._Transpose=function(){return(a._Transpose=a.asm.Transpose).apply(null,arguments)},a.__FusedMatMul=function(){return(a.__FusedMatMul=a.asm._FusedMatMul).apply(null,arguments)},a._malloc=function(){return(a._malloc=a.asm.malloc).apply(null,arguments)},a._free=function(){return(a._free=a.asm.free).apply(null,arguments)},a.___errno_location=function(){return(a.___errno_location=a.asm.__errno_location).apply(null,arguments)};var V,K,Y,X=a.stackSave=function(){return(X=a.stackSave=a.asm.stackSave).apply(null,arguments)},q=a.stackRestore=function(){return(q=a.stackRestore=a.asm.stackRestore).apply(null,arguments)},J=a.stackAlloc=function(){return(J=a.stackAlloc=a.asm.stackAlloc).apply(null,arguments)};function Q(e){function t(){V||(V=!0,a.calledRun=!0,O||(G(C),r(a),a.onRuntimeInitialized&&a.onRuntimeInitialized(),function(){if(a.postRun)for("function"==typeof a.postRun&&(a.postRun=[a.postRun]);a.postRun.length;)e=a.postRun.shift(),I.unshift(e);var e;G(I)}()))}A>0||(function(){if(a.preRun)for("function"==typeof a.preRun&&(a.preRun=[a.preRun]);a.preRun.length;)e=a.preRun.shift(),R.unshift(e);var e;G(R)}(),A>0||(a.setStatus?(a.setStatus("Running..."),setTimeout((function(){setTimeout((function(){a.setStatus("")}),1),t()}),1)):t()))}if(a.dynCall_iijjiiii=function(){return(a.dynCall_iijjiiii=a.asm.dynCall_iijjiiii).apply(null,arguments)},a.dynCall_jiji=function(){return(a.dynCall_jiji=a.asm.dynCall_jiji).apply(null,arguments)},a.cwrap=function(e,t,r,n){var o=(r=r||[]).every((e=>"number"===e||"boolean"===e));return"string"!==t&&o&&!n?$(e):function(){return function(e,t,r,n,o){var a={string:e=>{var t=0;if(null!=e&&0!==e){var r=1+(e.length<<2);!function(e,t,r){!function(e,t,r,n){if(!(n>0))return 0;for(var o=r+n-1,a=0;a<e.length;++a){var i=e.charCodeAt(a);if(i>=55296&&i<=57343&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++a)),i<=127){if(r>=o)break;t[r++]=i}else if(i<=2047){if(r+1>=o)break;t[r++]=192|i>>6,t[r++]=128|63&i}else if(i<=65535){if(r+2>=o)break;t[r++]=224|i>>12,t[r++]=128|i>>6&63,t[r++]=128|63&i}else{if(r+3>=o)break;t[r++]=240|i>>18,t[r++]=128|i>>12&63,t[r++]=128|i>>6&63,t[r++]=128|63&i}}t[r]=0}(e,k,t,r)}(e,t=J(r),r)}return t},array:e=>{var t=J(e.length);return function(e,t){w.set(e,t)}(e,t),t}},i=$(e),s=[],p=0;if(n)for(var l=0;l<n.length;l++){var u=a[r[l]];u?(0===p&&(p=X()),s[l]=u(n[l])):s[l]=n[l]}return function(e){return 0!==p&&q(p),function(e){return"string"===t?(r=e)?S(k,r,void 0):"":"boolean"===t?Boolean(e):e;var r}(e)}(i.apply(null,s))}(e,t,r,arguments)}},B=function e(){V||Q(),V||(B=e)},a.preInit)for("function"==typeof a.preInit&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.pop()();if(Q(),o&&(K={uncaughtException:Ke.listeners("uncaughtException").filter((function(e){return!o.uncaughtException.indexOf(e)>-1})),unhandledRejection:Ke.listeners("unhandledRejection").filter((function(e){return!o.unhandledRejection.indexOf(e)>-1}))}),void 0!==t)Y=t;else{if("undefined"==typeof WasmBackendModuleThreadedSimd)throw new Error("Could not find wasm module in post.js");Y=WasmBackendModuleThreadedSimd}if(K){var Z=Y._dispose;Y._dispose=function(){Z(),K.uncaughtException.forEach((function(e){Ke.removeListener("uncaughtException",e)})),K.unhandledRejection.forEach((function(e){Ke.removeListener("unhandledRejection",e)}))}}return t.ready}})();e.exports=r}));const zE=jE||GE,UE=WE||a({__proto__:null,default:WE},[WE]);class $E extends Xe{constructor(e){super(),this.wasm=e,this.dataIdNextNumber=1,this.wasm.tfjs.initWithThreadsCount(QE),ZE=this.wasm.tfjs.getThreadsCount(),this.dataIdMap=new Ye(this,Os())}write(e,t,r){const n={id:this.dataIdNextNumber++};return this.move(n,e,t,r,1),n}numDataIds(){return this.dataIdMap.numDataIds()}async time(e){const t=Eo();return e(),{kernelMs:Eo()-t}}move(e,t,r,n,o){const a=this.dataIdNextNumber++;if("string"===n){const i=t;return void this.dataIdMap.set(e,{id:a,stringBytes:i,shape:r,dtype:n,memoryOffset:null,refCount:o})}const i=nt(r),s=i*ft(n),p=this.wasm._malloc(s);this.dataIdMap.set(e,{id:a,memoryOffset:p,shape:r,dtype:n,refCount:o}),this.wasm.tfjs.registerTensor(a,i,p),null!=t&&this.wasm.HEAPU8.set(new Uint8Array(t.buffer,t.byteOffset,s),p)}async read(e){return this.readSync(e)}readSync(e,t,r){const{memoryOffset:n,dtype:o,shape:a,stringBytes:i}=this.dataIdMap.get(e);if("string"===o)return null!=t&&0!==t||!(null==r||r>=i.length)?i.slice(t,r):i;t=t||0,r=r||nt(a);const s=ft(o);return function(e,t){switch(t){case"float32":return new Float32Array(e);case"int32":return new Int32Array(e);case"bool":return new Uint8Array(e);default:throw new Error(`Unknown dtype ${t}`)}}(this.wasm.HEAPU8.slice(n+t*s,n+r*s).buffer,o)}disposeData(e,t=!1){if(this.dataIdMap.has(e)){const r=this.dataIdMap.get(e);if(r.refCount--,!t&&r.refCount>0)return!1;this.wasm._free(r.memoryOffset),this.wasm.tfjs.disposeData(r.id),this.dataIdMap.delete(e)}return!0}refCount(e){return this.dataIdMap.has(e)?this.dataIdMap.get(e).refCount:0}incRef(e){const t=this.dataIdMap.get(e);null!=t&&t.refCount++}floatPrecision(){return 32}getMemoryOffset(e){return this.dataIdMap.get(e).memoryOffset}dispose(){this.wasm.tfjs.dispose(),"PThread"in this.wasm&&this.wasm.PThread.terminateAllThreads(),this.wasm=null}memory(){return{unreliable:!1}}makeOutput(e,t,r){let n;if(null==r)n=this.write(null,e,t);else{const o=this.dataIdNextNumber++;n={id:o},this.dataIdMap.set(n,{id:o,memoryOffset:r,shape:e,dtype:t,refCount:1});const a=nt(e);this.wasm.tfjs.registerTensor(o,a,r)}return{dataId:n,shape:e,dtype:t}}typedArrayFromHeap({shape:e,dtype:t,dataId:r}){const n=this.wasm.HEAPU8.buffer,{memoryOffset:o}=this.dataIdMap.get(r),a=nt(e);switch(t){case"float32":return new Float32Array(n,o,a);case"int32":return new Int32Array(n,o,a);case"bool":return new Uint8Array(n,o,a);default:throw new Error(`Unknown dtype ${t}`)}}}function HE(e,t,r){let n="tfjs-backend-wasm.wasm";return e&&t?n="tfjs-backend-wasm-threaded-simd.wasm":e&&(n="tfjs-backend-wasm-simd.wasm"),null!=YE&&null!=YE[n]?YE[n]:r+n}const VE=["tfjs-backend-wasm.wasm","tfjs-backend-wasm-simd.wasm","tfjs-backend-wasm-threaded-simd.wasm"];let KE=null,YE={},XE=!1,qE=!1;function JE(e,t=!1){if(XE)throw new Error("The WASM backend was already initialized. Make sure you call `setWasmPaths()` before you call `tf.setBackend()` or `tf.ready()`");if("string"==typeof e)KE=e;else{YE=e;const t=VE.filter((e=>null==YE[e]));if(t.length>0)throw new Error(`There were no entries found for the following binaries: ${t.join(",")}. Please either call setWasmPaths with a map providing a path for each binary, or with a string indicating the directory where all the binaries can be found.`)}qE=t}let QE=-1,ZE=null;Rs("wasm",(async()=>{const{wasm:e}=await async function(){const[e,t]=await Promise.all([It().getAsync("WASM_HAS_SIMD_SUPPORT"),It().getAsync("WASM_HAS_MULTITHREAD_SUPPORT")]);return new Promise(((r,n)=>{const o={locateFile:(r,n)=>{if(r.endsWith(".worker.js")){const e='"use strict";var Module={};var ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads");var parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",data=>onmessage({data:data}));var fs=require("fs");Object.assign(global,{self:global,require:require,Module:Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:function(f){(0,eval)(fs.readFileSync(f,"utf8")+"//# sourceURL="+f)},postMessage:function(msg){parentPort.postMessage(msg)},performance:global.performance||{now:function(){return Date.now()}}})}var initializedJS=false;var pendingNotifiedProxyingQueues=[];function threadPrintErr(){var text=Array.prototype.slice.call(arguments).join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,text+"\n");return}console.error(text)}function threadAlert(){var text=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:text,threadId:Module["_pthread_self"]()})}var err=threadPrintErr;self.alert=threadAlert;Module["instantiateWasm"]=(info,receiveInstance)=>{var instance=new WebAssembly.Instance(Module["wasmModule"],info);receiveInstance(instance);Module["wasmModule"]=null;return instance.exports};self.onunhandledrejection=e=>{throw e.reason??e};self.startWorker=instance=>{Module=instance;postMessage({"cmd":"loaded"})};self.onmessage=e=>{try{if(e.data.cmd==="load"){Module["wasmModule"]=e.data.wasmModule;for(const handler of e.data.handlers){Module[handler]=function(){postMessage({cmd:"callHandler",handler:handler,args:[...arguments]})}}Module["wasmMemory"]=e.data.wasmMemory;Module["buffer"]=Module["wasmMemory"].buffer;Module["ENVIRONMENT_IS_PTHREAD"]=true;if(typeof e.data.urlOrBlob=="string"){importScripts(e.data.urlOrBlob)}else{var objectUrl=URL.createObjectURL(e.data.urlOrBlob);importScripts(objectUrl);URL.revokeObjectURL(objectUrl)}WasmBackendModuleThreadedSimd(Module)}else if(e.data.cmd==="run"){Module["__emscripten_thread_init"](e.data.pthread_ptr,0,0,1);Module["establishStackSpace"]();Module["PThread"].receiveObjectTransfer(e.data);Module["PThread"].threadInitTLS();if(!initializedJS){pendingNotifiedProxyingQueues.forEach(queue=>{Module["executeNotifiedProxyingQueue"](queue)});pendingNotifiedProxyingQueues=[];initializedJS=true}try{Module["invokeEntryPoint"](e.data.start_routine,e.data.arg)}catch(ex){if(ex!="unwind"){if(ex instanceof Module["ExitStatus"]){if(Module["keepRuntimeAlive"]()){}else{Module["__emscripten_thread_exit"](ex.status)}}else{throw ex}}}}else if(e.data.cmd==="cancel"){if(Module["_pthread_self"]()){Module["__emscripten_thread_exit"](-1)}}else if(e.data.target==="setimmediate"){}else if(e.data.cmd==="processProxyingQueue"){if(initializedJS){Module["executeNotifiedProxyingQueue"](e.data.queue)}else{pendingNotifiedProxyingQueues.push(e.data.queue)}}else if(e.data.cmd){err("worker.js received unknown command "+e.data.cmd);err(e.data)}}catch(ex){if(Module["__emscripten_thread_crashed"]){Module["__emscripten_thread_crashed"]()}throw ex}};'.replace(/\n/g,"\\n"),t=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(t)}return r.endsWith(".wasm")?HE(e,t,null!=KE?KE:n):n+r}};qE&&(o.instantiateWasm=function(e){return(t,r)=>(function(e,t){return It().platform.fetch(e,{credentials:"same-origin"})}(e).then((n=>{n.ok||t.env.a(`failed to load wasm binary file at '${e}'`),n.arrayBuffer().then((e=>{WebAssembly.instantiate(e,t).then((e=>{r(e.instance,e.module)}))}))})),{})}(HE(e,t,null!=KE?KE:"")));let a,i=!1;o.onAbort=()=>{i||XE||(XE=!0,n({message:"Make sure the server can serve the `.wasm` file relative to the bundled js file. For more details see https://github.com/tensorflow/tfjs/blob/master/tfjs-backend-wasm/README.md#using-bundlers"}))},t&&e?(o.mainScriptUrlOrBlob=new Blob(["var WasmBackendModuleThreadedSimd = "+zE.toString()],{type:"text/javascript"}),a=zE(o)):a=UE(o),a.then((e=>{i=!0,XE=!1,e.tfjs={init:e.cwrap("init",null,[]),initWithThreadsCount:e.cwrap("init_with_threads_count",null,["number"]),getThreadsCount:e.cwrap("get_threads_count","number",[]),registerTensor:e.cwrap("register_tensor",null,["number","number","number"]),disposeData:e.cwrap("dispose_data",null,["number"]),dispose:e.cwrap("dispose",null,[])},r({wasm:e})})).catch(n)}))}();return new $E(e)}),2);var eF={modelFilename:"",featuresFilename:"",objFilename:"",fovY:50,detectScoreThs:.2,trackScoreThs:.4,footToDetect:"RIGHT_FOOT",filteringLevel:2,filteringShift:.5,validTrackedKeypThs:.2,trackedNumKeypsThs:3,activeIds:new Int32Array};function tF(e){return!!(void 0===e.outputNames||e.outputNames.length<1||e.outputNames.includes("heatmaps"))}function rF(e,t){for(var r=1e4,n=1e4,o=-1e4,a=-1e4,i=0;i<t;i++){var s=e[i],p=e[t+i];s>o&&(o=s),p>a&&(a=p),s<r&&(r=s),p<n&&(n=p)}return[Math.floor(r),Math.floor(o+1),Math.floor(n),Math.floor(a+1)]}function nF(e,t,r){for(var n=1e4,o=1e4,a=-1e4,i=-1e4,s=0;s<r;s++)if(t[s]>0){var p=e[s],l=e[r+s];p>a&&(a=p),l>i&&(i=l),p<n&&(n=p),l<o&&(o=l)}return[Math.floor(n),Math.floor(a+1),Math.floor(o),Math.floor(i+1)]}function oF(e,t){void 0===t&&(t=.1);for(var r=e.length,n=0,o=0,a=new Int32Array(r),i=0;i<r;i++)e[i]>t?(o+=1,a[i]=1,n+=e[i]):a[i]=0;return o>0?n/=o:n=0,{globalScore:n,visibilty:a,totalVisible:o}}function aF(e,t){void 0===t&&(t=.1);for(var r=e.length,n=new Int32Array(r),o=0;o<r;o++)e[o]>t?n[o]=1:n[o]=0;return n}function iF(e,t,r,n){for(var o=new Uint8ClampedArray(e*t*4),a=e*t,i=0;i<a;i++){var s=i*r,p=4*i;o[p+0]=1*n[s+0],o[p+1]=1*n[s+1],o[p+2]=1*n[s+2],o[p+3]=255}return new ImageData(o,t,e)}function sF(e,t,r,n){var o=Float32Array.from(e),a=e.length/2;if(r)for(var i=0;i<a;i++)o[i+a]=n-1-o[i+a];for(i=0;i<a;i++){var s=o[i],p=o[i+a];o[i]=t[0]*s+t[1]*p+t[2],o[i+a]=t[3]*s+t[4]*p+t[5]}return o}function pF(e,t){if("UPPER-BODY"==e){if(15==t)return[13,14]}else if("FULL-BODY"==e){if(19==t)return[17,18]}else if("FACE"==e){if(68==t)return[36,45];if(19==t)return[8,13];if(21==t)return[10,15]}else{if(5==t)return[1,2];if(14==t)return[1,7];if(20==t)return[2,12];if(7==t)return[0,6];if(19==t)return[10,15];if(9==t)return[1,6];if(23==t)return[0,14];if(181==t)return[30,163];if(21==t)return[0,9];if(10==t)return[7,8];if(8==t)return[5,6];if(11==t)return[7,8]}return console.time("==> (E) Incorrect number of vertices"),[0,1]}function lF(e,t){var r=t.length/2,n=pF(e,r),o=n[0],a=n[1],i=[t[o],t[o+r]],s=[t[a],t[a+r]],p=[(i[0]+s[0])/2,(i[1]+s[1])/2],l=-Math.atan2(i[1]-s[1],s[0]-i[0]);return[p[0],p[1],l]}var uF,dF=function(){function e(e,t){this.x=e,this.y=t}return e.prototype.Dist=function(e){return Math.sqrt((e.x-this.x)*(e.x-this.x)+(e.y-this.y)*(e.y-this.y))},e}(),cF=function(){function e(e,t){this.x=e,this.y=t}return e.prototype.Dist=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},e.CreateFromPoints=function(t,r){return new e(r.x-t.x,r.y-t.y)},e}(),gF=function(){function e(e,t,r,n){this.x=e,this.y=t,this.w=r,this.h=n}return e.prototype.Centre=function(){return new dF(this.x+this.w/2,this.y+this.h/2)},e.prototype.isPointInside=function(e){return e.x>=this.x&&e.x>=this.x&&e.x<this.x+this.w&&e.y<this.y+this.h},e}();function hF(e,t,r,n,o){void 0===o&&(o=.5);for(var a=e.length/2,i=nF(e,t,a),s=Math.max(i[1]-i[0],i[3]-i[2])/6,p=0;p<a;p++)if(t[p]<=0&&n[p]>0)e[p]=r[p],e[p+a]=r[p+a];else if(t[p]>0&&n[p]<=0);else if(t[p]>0&&n[p]>0){var l=Math.sqrt((r[p]-e[p])*(r[p]-e[p])+(r[p+a]-e[p+a])*(r[p+a]-e[p+a])),u=(1-o)*Math.exp(-.5*l*l/s);e[p]=u*r[p]+(1-u)*e[p],e[p+a]=u*r[p+a]+(1-u)*e[p+a]}return e}function fF(e,t){e.length;var r=function(e,t){var r=e.length/2,n=bF(r,t),o=n[0],a=n[1],i=[e[o],e[o+r]],s=[e[a],e[a+r]],p=[(i[0]+s[0])/2,(i[1]+s[1])/2],l=-Math.atan2(i[1]-s[1],s[0]-i[0]),u=Math.sqrt((i[0]-s[0])*(i[0]-s[0])+(i[1]-s[1])*(i[1]-s[1]));return[p[0],p[1],l,u]}(e,t),n=r[0],o=r[1],a=r[2],i=r[3],s=[Math.cos(a),Math.sin(a)],p=[-s[1],s[0]],l=i/1,u=i/2;return[n+s[0]*l+p[0]*u,o+s[1]*l+p[1]*u,n+s[0]*l-p[0]*u,o+s[1]*l-p[1]*u,n-s[0]*l-p[0]*u,o-s[1]*l-p[1]*u,n-s[0]*l+p[0]*u,o-s[1]*l+p[1]*u]}function mF(e,t,r){if(void 0===r&&(r=.1),6==e.length){for(var n=0,o=new Int32Array(3),a=0,i="RIGHT_FOOT"==t?3:0,s=i;s<i+3;s++)n+=e[s],e[s]>r&&(a+=1,o[s]=1);return{globalScore:n/=3,visibilty:o,totalVisible:a}}return oF(e,r)}function yF(e,t,r,n){var o=Float32Array.from(e),a=e.length/2;if(r)for(var i=0;i<a;i++)o[i+a]=n-1-o[i+a];for(i=0;i<a;i++){var s=o[i],p=o[i+a];o[i]=t[0]*s+t[1]*p+t[2],o[i+a]=t[3]*s+t[4]*p+t[5]}return o}function bF(e,t){if(void 0===t&&(t="face"),"face"==t){if(5==e)return[0,1];if(19==e)return[6,11];if(21==e)return[17,20];if(51==e)return[19,28];if(68==e)return[36,45];if(16==e)return[6,9]}return"eye"==t?[0,1]:6==e&&"RIGHT_FOOT"==t?[3,5]:6==e&&"LEFT_FOOT"==t?[0,2]:18!=e||"RIGHT_FOOT"!=t&&"LEFT_FOOT"!=t?13!=e||"RIGHT_FOOT"!=t&&"LEFT_FOOT"!=t?593!=e||"RIGHT_FOOT"!=t&&"LEFT_FOOT"!=t?200!=e||"RIGHT_FOOT"!=t&&"LEFT_FOOT"!=t?(console.error("no type or number of feature match"),[0,1]):[115,167]:[210,78]:[0,6]:[0,9]}function _F(e,t){var r=e.length/2,n=bF(r,t),o=n[0],a=n[1],i=[e[o],e[o+r]],s=[e[a],e[a+r]],p=[(i[0]+s[0])/2,(i[1]+s[1])/2],l=-Math.atan2(i[1]-s[1],s[0]-i[0]);return[p[0],p[1],l]}function vF(e,t,r){for(var n=r[0],o=r[1],a=r[2],i=r[3],s=r[4],p=r[5],l=e.width,u=e.height,d=4*e.width,c=t.width,g=t.height,h=4*t.width,f=0;f<g;f++)for(var m=o*f+a,y=s*f+p,b=f*h,_=0;_<c;_++){var v=4*_,w=Math.floor(m),k=Math.floor(y),T=m-w,O=y-k,x=void 0,S=void 0;if(w>0&&w<l-1&&k>0&&k<u-1){for(var E=k*d+4*w,F=0;F<3;F++,E++){var M=e.data[E];x=M+T*(e.data[E+4]-M),S=e.data[E+d]+T*(e.data[E+d+4]-e.data[E+d]),t.data[b+v+F]=x+O*(S-x)}t.data[b+v+3]=255}else{for(F=0;F<3;F++)t.data[b+v+F]=0;t.data[b+v+3]=255}m+=n,y+=i}return t}function wF(e,t,r,n,o,a){var i,s,p=e.length/2,l=0,u=0,d=0;6==p?(u=(i=_F(e,a))[0],l=i[1],d=i[2],rF("RIGHT_FOOT"==a?[e[3],e[4],e[5],e[3+p],e[4+p],e[5+p]]:[e[0],e[1],e[2],e[0+p],e[1+p],e[2+p]],3)):(u=(s=_F(e,a))[0],l=s[1],d=s[2],nF(e,t,p));var c=Math.cos(d),g=Math.sin(d),h=bF(p,a),f=h[0],m=h[1],y=[e[f],e[f+p]],b=[e[m],e[m+p]],_=Math.sqrt((y[0]-b[0])*(y[0]-b[0])+(y[1]-b[1])*(y[1]-b[1])),v=(_+=.5*_)/Math.max(n,r),w=(r-1)/2,k=(n-1)/2,T=u-(c*v*w-g*v*k),O=l-(g*v*w+c*v*k);if(null!=o){var x=Math.sqrt((T-o[2])*(T-o[2])+(O-o[5])*(O-o[5])),S=1;x>20&&(S=.1),x>=10&&x<=20&&(S=1-.09*(x-5)),T=(1-S)*T+S*o[2],O=(1-S)*O+S*o[5],d=Math.abs(d-o[6])>1?(1-S)*d-S*o[6]:(1-S)*d+S*o[6],v=(1-S)*v+S*o[7],c=Math.cos(d),g=Math.sin(d)}return[c*v,-g*v,T,g*v,c*v,O,d,v]}function kF(e,t){var r=t.length,n=e._malloc(4*r),o=n/4;return e.HEAPF32.subarray(o,o+r).set(t),n}function TF(e,t){var r=e._malloc(4*t.length);return e.HEAPF32.set(t,r/4),r}function OF(e,t,r){var n=new Float32Array(r),o=t/4;return n.set(e.HEAPF32.subarray(o,o+r)),n.slice()}function xF(e,t,r){var n=new Uint32Array(t.data.buffer),o=n.length,a=r/4;e.HEAPU32.subarray(a,a+o).set(n)}function SF(e,t,r,n){var o=e._malloc(28);return e.setValue(o,r,"i32"),e.setValue(o+4,n,"i32"),e.setValue(o+8,t,"i32"),e.setValue(o+12,0,"i32"),e.setValue(o+16,4,"i32"),e.setValue(o+20,0,"i32"),e.setValue(o+24,0,"i32"),o}function EF(e,t,r,n,o){var a=e.cwrap("xzimgMatchRecKeyps","number",["number","number","number","number","number"]),i=n.length/2;xF(e,t,r);for(var s=SF(e,r,t.width,t.height),p=TF(e,n),l=TF(e,n.slice()),u=e._malloc(4*i),d=0;d<i;d++)e.setValue(u+4*d,1,"float"),o.length>d&&0==o[d]&&e.setValue(u+4*d,-1,"float");var c=e._malloc(16);a(s,p,l,i,u,c);var g=OF(e,u,i),h=OF(e,l,n.length),f=OF(e,c,4);for(d=0;d<i;d++)0==g[d]&&(h[d]=n[d],h[d+i]=n[d+i]);return e._free(s),e._free(p),e._free(l),e._free(u),e._free(c),[h,f,g]}function FF(e,t,r,n){var o=TF(e,t),a=TF(e,r),i=e._malloc(16);e.cwrap("xzimgEstimateGetSimilarity","number",["number","number","number","number"])(o,a,t.length/2,i);var s=OF(e,i,4);return e._free(o),e._free(a),e._free(i),s}function MF(e,t,r){void 0===r&&(r=null);for(var n=new Float32Array(2),o=e.length/2,a=0,i=0;i<o;i++)(null==r||r[i]>0)&&(n[0]+=t[i]-e[i],n[1]+=t[i+o]-e[i+o],a+=1);return a>0&&(n[0]/=a,n[1]/=a),n}function RF(e,t,r){var n,o,a,i,s;void 0===r&&(r=!0);var p=r?1:2;return n=function(e,t,r,n,o){void 0===o&&(o=1);var a=new Float32Array(n).fill(0),i=new Float32Array(2*n);if(1==o)for(var s=t*r,p=0;p<s;p++)for(var l=0;l<n;l++)(c=e[p*n+l])>a[l]&&(a[l]=c,i[l]=p%r,i[n+l]=Math.floor(p/r));else{var u=r*o;for(p=o;p<t;p+=o,u+=r*o)for(var d=o;d<r;d+=o)for(l=0;l<n;l++){var c;(c=e[(u+d)*n+l])>a[l]&&(a[l]=c,i[l]=d,i[n+l]=p)}}return[i,a]}(e,t[1],t[2],t[3],p),a=n[0],s=n[1],r?(o=function(e,t,r,n,o){for(var a=[-n*o-o,-n*o,-n*o+o,-o,0,o,n*o-o,n*o,n*o+o],i=new Float32Array(o),s=new Float32Array(2*o),p=0;p<o;p++){var l=t[p],u=t[o+p];s[p]=l,s[o+p]=u;var d=u*n*o+l*o+p,c=0;c=0;for(var g=0;g<9;g++)c+=e[d+a[g]];c/=9,i[p]=c;var h=Math.min(l+2,n-1),f=Math.max(l-2,0),m=Math.min(u+2,r-1),y=Math.max(u-2,0),b=0,_=0,v=u*n*o+f*o+p,w=u*n*o+h*o+p;for(g=0;g<9;g++)b+=e[v+a[g]],_+=e[w+a[g]];var k=2*(2*c-((b/=9)+(_/=9)));if(Math.abs(k)>1e-5){var T=2*(_-b)/k;s[p]+=T}var O=0,x=0,S=y*n*o+l*o+p,E=m*n*o+l*o+p;for(g=0;g<9;g++)O+=e[S+a[g]],x+=e[E+a[g]];k=2*(2*c-((O/=9)+(x/=9))),Math.abs(k)>1e-5&&(T=2*(x-O)/k,s[o+p]+=T)}return[s,i]}(e,a,t[1],t[2],t[3]),i=o[0],s=o[1]):i=a,[i,s]}function CF(e,t,r,n,o,a){var i=e.cwrap("xzimgGetHeatmapsLocations","number",["number","number","number","number","number","number","number","number"]),s=t[1]*t[2]*t[3],p=n/4;return e.HEAPF32.subarray(p,p+s).set(r),i(n,t[1],t[2],t[3],0,1,o,a),[new Float32Array(e.HEAPF32.buffer,o,2*t[3]),new Float32Array(e.HEAPF32.buffer,a,t[3])]}function IF(e,t){var r=new ue(0),n=r.asObservable();if("string"==typeof e)return{model$:o=Mk({url:e,method:"GET",responseType:"text",async:!0,progressSubscriber:new x((function(e){return r.next(e.loaded/e.total)}),(function(e){}),(function(){return r.next(1)}))}).pipe(de(2),q((function(e){return AF(e.response,t)}))),progress$:n};var o=we((function(){return r.next(1),X(AF(function(e){var t,r,n="",o=0,a=new Uint8Array(e);for(o=0;o<a.length;o++)if(a[o]<128)n+=String.fromCharCode(a[o]);else{a[o]<224?(t=(63&a[o])<<6,r=o+1):a[o]<240?(t=(31&a[o])<<12,r=o+2):a[o]<248?(t=(15&a[o])<<18,r=o+3):a[o]<252?(t=(7&a[o])<<24,r=o+4):(t=(3&a[o])<<30,r=o+5);do{t|=(127&a[++o])<<6*(r-o)}while(o!=r);n+=String.fromCharCode(t)}return n}(e),t))}));return{model$:o,progress$:n}}function AF(e,t){var r,n,o,a,i={vertices:new Float32Array,uvs:new Float32Array,faces:new Uint16Array},s=e.match(/^v\s+(-?\d+(?:\.\d+)?\s+){2}-?\d+(?:\.\d+)?$/gm);if(s){var p=s.map((function(e){var t=e.split(" ");return t.shift(),t.map((function(e){return+e}))})),l=(r=[]).concat.apply(r,p);i.vertices=new Float32Array(l)}var u=e.match(/^vt( -?\d+(\.\d+)?){2}$/gm);if(u){var d=u.map((function(e){var t=e.split(" ");return t.shift(),t.map((function(e){return+e}))})),c=(n=[]).concat.apply(n,d);i.uvs=new Float32Array(c)}var g=e.match(/^f( \d+\/\d*\/\d*){3}$/gm);if(g){var h=g.map((function(e){var t=e.split(" ");return t.shift(),[+t[0].split("/")[0]-1,+t[1].split("/")[0]-1,+t[2].split("/")[0]-1]})),f=(o=[]).concat.apply(o,h);if(i.faces=new Uint16Array(f),t){var m=g.map((function(e){var t=e.split(" ");return t.shift(),[+t[0].split("/")[1]-1,+t[1].split("/")[1]-1,+t[2].split("/")[1]-1]})),y=new Uint16Array((a=[]).concat.apply(a,m)),b=i.uvs;i.uvs=new Float32Array(b.length);for(var _=0;_<y.length;_++){var v=y[_],w=b[2*v],k=b[2*v+1],T=i.faces[_];i.uvs[2*T]=w,i.uvs[2*T+1]=k}}}if(t){for(_=0;_<i.faces.length;_+=3){var O=i.faces[_];i.faces[_]=i.faces[_+1],i.faces[_+1]=O}for(_=0;_<i.vertices.length;_+=3)i.vertices[_]=-i.vertices[_]}return i}!function(e){e.Detection="DETECTION",e.Detected="DETECTED",e.Tracking="TRACKING"}(uF||(uF={}));var BF,DF=function(){function e(e,t){this._trackingState=uF.Detection,this._type=0,this._R=Float32Array.from(e),this._t=Float32Array.from(t),this._trackingState=uF.Detection}return e.prototype.setTrackingState=function(e){this._trackingState=e},e.prototype.getTrackingState=function(){return this._trackingState},e.prototype.isDetected=function(){return this._trackingState==uF.Tracking},Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(e){this._type=e},enumerable:!1,configurable:!0}),e.prototype.setRt=function(e,t){this._R=e.slice(0),this._t=t.slice(0)},e.prototype.setR=function(e){this._R=e.slice(0)},e.prototype.R=function(){return this._R},e.prototype.t=function(){return this._t},e.prototype.getPosition=function(){return[this._t[0],this._t[1],this._t[2]]},e.prototype.getRotation=function(){return[[this._R[0],this._R[1],this._R[2]],[this._R[3],this._R[4],this._R[5]],[this._R[6],this._R[7],this._R[8]]]},e.prototype.getRot=function(){return this._R},e.prototype.updateRotation=function(e){this._R=Float32Array.from(e)},e.prototype.translate=function(e,t,r){this._t[0]+=e,this._t[1]+=t,this._t[2]+=r},e.prototype.reset=function(){this._R=new Float32Array([1,0,0,0,-1,0,0,0,-1]),this._t=new Float32Array([0,0,0])},e.prototype.det=function(){return this._R[0]*(this._R[4]*this._R[8]-this._R[7]*this._R[5])-this._R[3]*(this._R[1]*this._R[8]-this._R[7]*this._R[2])+this._R[6]*(this._R[1]*this._R[5]-this._R[4]*this._R[2])},e.convert3x3Mat=function(e){return new Float32Array([e[0][0],e[0][1],e[0][2],e[1][0],e[1][1],e[1][2],e[2][0],e[2][1],e[2][2]])},e.convert3x3Mat_t=function(e){return new Float32Array([e[0][0],e[1][0],e[2][0],e[0][1],e[1][1],e[2][1],e[0][2],e[1][3],e[2][2]])},e.getQuatFromRotMat=function(e){var t=new Float32Array(4);return t[0]=Math.sqrt(Math.max(0,1+e[0]+e[4]+e[8]))/2,t[1]=Math.sqrt(Math.max(0,1+e[0]-e[4]-e[8]))/2,t[2]=Math.sqrt(Math.max(0,1-e[0]+e[4]-e[8]))/2,t[3]=Math.sqrt(Math.max(0,1-e[0]-e[4]+e[8]))/2,t[1]=e[7]-e[5]<0?-Math.abs(t[1]):Math.abs(t[1]),t[2]=e[2]-e[6]<0?-Math.abs(t[2]):Math.abs(t[2]),t[3]=e[3]-e[1]<0?-Math.abs(t[3]):Math.abs(t[3]),t},e.getRotMatFromQuat=function(e){var t=new Float32Array(9);return t[0]=1-2*e[2]*e[2]-2*e[3]*e[3],t[1]=2*e[1]*e[2]-2*e[3]*e[0],t[2]=2*e[1]*e[3]+2*e[2]*e[0],t[3]=2*e[1]*e[2]+2*e[3]*e[0],t[4]=1-2*e[1]*e[1]-2*e[3]*e[3],t[5]=2*e[2]*e[3]-2*e[1]*e[0],t[6]=2*e[1]*e[3]-2*e[2]*e[0],t[7]=2*e[2]*e[3]+2*e[1]*e[0],t[8]=1-2*e[1]*e[1]-2*e[2]*e[2],t},e.slerp=function(e,t,r){var n,o,a=new Float32Array(4),i=e[1]*t[1]+e[2]*t[2]+e[3]*t[3]+e[0]*t[0],s=Math.abs(i);if(s>=.99999)n=1-r,o=r;else{var p=Math.acos(s),l=Math.sin(p);n=Math.sin((1-r)*p)/l,o=Math.sin(r*p)/l}return i<0&&(o=-o),a[1]=n*e[1]+o*t[1],a[2]=n*e[2]+o*t[2],a[3]=n*e[3]+o*t[3],a[0]=n*e[0]+o*t[0],a},e.getCameraMat=function(e,t,r){var n=r/2/Math.tan(e*Math.PI/180/2),o=n,a=(t-1)/2,i=(r-1)/2,s=new Float32Array(9);return s[0]=o,s[2]=a,s[4]=n,s[5]=i,s[8]=1,s},e.getCameraParams=function(e,t,r){var n=r/2/Math.tan(e*Math.PI/180/2);return[n,n,(t-1)/2,(r-1)/2]},e.MatMultVec=function(e,t){var r=new Float32Array(3);return r[0]=e[0]*t[0]+e[1]*t[1]+e[2]*t[2],r[1]=e[3]*t[0]+e[4]*t[1]+e[5]*t[2],r[2]=e[6]*t[0]+e[7]*t[1]+e[8]*t[2],r},e.MatMult=function(e,t){var r=new Float32Array(9);return r[0]=e[0]*t[0]+e[1]*t[3]+e[2]*t[6],r[1]=e[0]*t[1]+e[1]*t[4]+e[2]*t[7],r[2]=e[0]*t[2]+e[1]*t[5]+e[2]*t[8],r[3]=e[3]*t[0]+e[4]*t[3]+e[5]*t[6],r[4]=e[3]*t[1]+e[4]*t[4]+e[5]*t[7],r[5]=e[3]*t[2]+e[4]*t[5]+e[5]*t[8],r[6]=e[6]*t[0]+e[7]*t[3]+e[8]*t[6],r[7]=e[6]*t[1]+e[7]*t[4]+e[8]*t[7],r[8]=e[6]*t[2]+e[7]*t[5]+e[8]*t[8],r},e.prototype.project=function(t,r){for(var n=new Float32Array(t.length/3*2),o=0;o<t.length/3;o++){var a=e.MatMultVec(this._R,new Float32Array([t[3*o],t[3*o+1],t[3*o+2]])),i=new Float32Array(3);i[0]=a[0]+this._t[0],i[1]=a[1]+this._t[1],i[2]=a[2]+this._t[2];var s=r[6]*i[0]+r[7]*i[1]+r[8]*i[2];n[2*o]=(r[0]*i[0]+r[1]*i[1]+r[2]*i[2])/s,n[2*o+1]=(r[3]*i[0]+r[4]*i[1]+r[5]*i[2])/s}return n},e.prototype.transform=function(t,r){for(var n=new Float32Array(t.length/3*2),o=0;o<t.length/3;o++){var a=e.MatMultVec(this._R,new Float32Array([t[3*o],t[3*o+1],t[3*o+2]]));n[3*o+0]=a[0]+this._t[0],n[3*o+1]=a[1]+this._t[1],n[3*o+2]=a[2]+this._t[2]}return n},e}(),LF=function(){function e(e){this.NB_BUFFERS=6,this._poses=[],this._nbFramesDelay=0,this._interpolation=0,this._filteringLevel=2,this._filterThreshold=-1,e>=0&&e<this.NB_BUFFERS?this._nbFramesDelay=this._nbFramesDelay:console.error("Invalid frames delay, delay must be less than ",this.NB_BUFFERS)}return e.prototype.setNbFramesDelay=function(e){this._nbFramesDelay=e},e.prototype.setInterpolation=function(e){this._interpolation=e},e.prototype.setFilteringLevel=function(e){this._filteringLevel=e},e.prototype.setFilterThreshold=function(e){this._filterThreshold=e},e.prototype.reset=function(){this._poses=[]},e.prototype.setPose=function(e){this._poses.length===this.NB_BUFFERS&&(this._poses=this._poses.slice(0,-1)),this._poses=l([e],this._poses,!0)},e.prototype.getPose=function(){return this._poses.length>0?this._nbFramesDelay<this._poses.length?this._poses[this._nbFramesDelay]:this._poses[this._poses.length-1]:null},e.prototype.getInterpolatedPoseAtDelay=function(e){if(e>0&&e+1<this._poses.length){var t=this._poses[e-1],r=this._poses[e],n=this._poses[e+1];if(t.getTrackingState()!==uF.Tracking||n.getTrackingState()!==uF.Tracking)return r;for(var o=DF.getQuatFromRotMat(t.R()),a=DF.getQuatFromRotMat(n.R()),i=DF.slerp(o,a,.5),s=DF.getRotMatFromQuat(i),p=t.t(),l=n.t(),u=new Float32Array(3),d=0;d<3;d++)u[d]=.5*p[d]+.5*l[d];var c=new DF(s,u);return c.setTrackingState(r.getTrackingState()),c.type=r.type,c}return this._poses.length>0?this.getPose():this.getLastPose()},e.prototype.dst=function(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])+(e[2]-t[2])*(e[2]-t[2]))},e.prototype.mvts=function(e,t,r){return(this.dst(e,t)+this.dst(t,r))/2},e.prototype.getInterpolatedPose=function(){if(1==this._filteringLevel)return this.getInterpolatedPoseAtDelay(this._nbFramesDelay);if(2==this._filteringLevel){var e=this.getInterpolatedPoseAtDelay(this._nbFramesDelay-1),t=this.getInterpolatedPoseAtDelay(this._nbFramesDelay+1);if(null==e||null==t)return this.getInterpolatedPoseAtDelay(this._nbFramesDelay);if(e.getTrackingState()!==uF.Tracking||t.getTrackingState()!==uF.Tracking)return this.getInterpolatedPoseAtDelay(this._nbFramesDelay);var r=this._poses[this._nbFramesDelay],n=e.t(),o=t.t();if(this._filterThreshold>0){var a=this.dst(n,r.t()),i=this.dst(o,r.t());if(a>this._filterThreshold||i>this._filterThreshold)return r}for(var s=DF.getQuatFromRotMat(e.R()),p=DF.getQuatFromRotMat(t.R()),l=DF.slerp(s,p,this._interpolation),u=DF.getRotMatFromQuat(l),d=new Float32Array(3),c=0;c<3;c++)d[c]=(1-this._interpolation)*n[c]+this._interpolation*o[c];var g=new DF(u,d);return g.setTrackingState(r.getTrackingState()),g.type=r.type,g}return this.getLastPose()},e.prototype.updateDelay=function(e){e!=this._nbFramesDelay&&(e>=0&&e<this.NB_BUFFERS?this._nbFramesDelay=e:console.error("Invalid frames delay, delay must be less than ",this.NB_BUFFERS))},e.prototype.getLastPose=function(){return this._poses.length>0?this._poses[0]:null},e}();!function(e){e.Left="LEFT_FOOT",e.Right="RIGHT_FOOT",e.Both="BOTH_FOOT",e.Single="SINGLE_FOOT"}(BF||(BF={}));var NF,PF="config.bin",jF=function(){function e(){this._initialized=!1,this._currentWidth=0,this._currentHeight=0,this._trackingState=uF.Detection,this._useWasmForHeatmaps=!1,this._float_size=4,this._bufferHeatmaps=null,this._bufferKeypsDet=null,this._bufferFeatureScores=null,this._bufKeyps3D_R=null,this._bufKeyps3D_L=null,this._footToDetect=BF.Right,this._leftFootState=uF.Detection,this._rightFootState=uF.Detection,this._bufferKeypsTrack_L=null,this._bufferKeypsTrack_R=null,this._bufferHeatmaps_L=null,this._bufferHeatmaps_R=null,this._fastMovements_L=!1,this._fastMovements_R=!1,this._cnnOutputDataInvMask=null,this._trackHasHeatmaps=!0,this._debug=!1,this._debugInitialized=!1,this._reproj_t=15,this._reproj_fast_t=30,this._isDetected=!1}return e.prototype.getDebugImage=function(){return this._debugInitialized?this._debugImage:null},e.prototype.isDetected=function(){return this._isDetected},e.prototype.getPosition=function(e){void 0===e&&(e=BF.Right);var t=null;return(t=e==BF.Right?this._poseManager_R.getInterpolatedPose():this._poseManager_L.getInterpolatedPose())?t.getPosition():null},e.prototype.getRotation=function(e){void 0===e&&(e=BF.Right);var t=null;return(t=e==BF.Right?this._poseManager_R.getInterpolatedPose():this._poseManager_L.getInterpolatedPose())?t.getRotation():null},e.prototype.getPose=function(e){return void 0===e&&(e=BF.Right),e==BF.Right?this._pose_L:this._pose_R},e.prototype.getInterpolatedPose=function(e){return void 0===e&&(e=BF.Right),e==BF.Right?this._poseManager_R.getInterpolatedPose():this._poseManager_L.getInterpolatedPose()},e.prototype.isInitialized=function(){return this._initialized},e.prototype.initialize=function(e,t,r){var n,o,a,l;return s(this,void 0,void 0,(function(){var s,u,d,c,g,h,f,m,y,b,_,v,w=this;return p(this,(function(p){switch(p.label){case 0:if(null==e)throw"Invalid parameter";return(null===(n=null==t?void 0:t.wasmBackend)||void 0===n?void 0:n.enable)?(JE({"tfjs-backend-wasm.wasm":null===(o=t.wasmBackend)||void 0===o?void 0:o.tfjsBackendWasmPath,"tfjs-backend-wasm-simd.wasm":null===(a=t.wasmBackend)||void 0===a?void 0:a.tfjsBackendWasmSimdPath,"tfjs-backend-wasm-threaded-simd.wasm":null===(l=t.wasmBackend)||void 0===l?void 0:l.tfjsBackendWasmThreadedPath}),[4,Fs("wasm")]):[3,2];case 1:p.sent(),p.label=2;case 2:return this.release(),this._videoManager=e,this._config=t?i(i({},eF),t):eF,"BOTH"!==this._config.footToDetect&&"BOTH_FEET"!==this._config.footToDetect||(this._footToDetect=BF.Both),this._poseManager_R=new LF(this._videoManager.getNbFramesDelay()),this._poseManager_R.setInterpolation(this._config.filteringShift),this._poseManager_R.setFilteringLevel(this._config.filteringLevel),this._poseManager_R.setFilterThreshold(.1),this._poseManager_L=new LF(this._videoManager.getNbFramesDelay()),this._poseManager_L.setInterpolation(this._config.filteringShift),this._poseManager_L.setFilteringLevel(this._config.filteringLevel),this._poseManager_L.setFilterThreshold(.1),s=new ue(0),u=Y(vO({locateFile:function(e,t){return w._config.poseEstimationWasmFilename||t+e}})).pipe(be((function(){return s.next(1)}))),d=dO(this._config.modelFilename,PF),c=d.model$,g=d.progress$,h=dO(this._config.featuresFilename,PF),f=h.model$,m=h.progress$,y=IF(this._config.objFilename,!1),b=y.model$,_=y.progress$,v=H([s,g,m,_]).pipe(q((function(e){return e.reduce((function(t,r){return t+r/e.length}),0)})),q((function(e){return r&&r(e)}))).subscribe(),[4,dk({poseModule:u,model:c,features:f,footObjModel:b}).pipe(q((function(e){var t;w._poseModule=e.poseModule,w._footObjModel=e.footObjModel,w._tfFootDetector=e.model.graphModel,w._footDetectorConfig=e.model.config,w._tfFootFeatures=e.features.graphModel,w._footFeaturesConfig=e.features.config,w._activeIds=w._config.activeIds,console.log(w._footFeaturesConfig),console.log(e.model.config),console.log(e.features.config),console.log("(DEBUG) XZIMG BACKEND",Ms());var r=Cu([1,w._footDetectorConfig.inHeight,w._footDetectorConfig.inWidth,3]),n=w._tfFootDetector.predict(r);w._footDetectorShape=n.shape,n.dataSync(),n.dispose(),r.dispose();var o=w._footDetectorConfig.outChannels;r=Cu([1,w._footFeaturesConfig.inHeight,w._footFeaturesConfig.inWidth,3]),(n=w._tfFootFeatures.predict(r))instanceof Array?n.forEach((function(e){return e.dispose()})):n.dispose(),r.dispose(),r=Cu([2,w._footFeaturesConfig.inHeight,w._footFeaturesConfig.inWidth,3]),(n=w._tfFootFeatures.predict(r))instanceof Array?n.forEach((function(e){return e.dispose()})):n.dispose(),r.dispose();var a=w._footFeaturesConfig.outChannels;if(w._footFeaturesConfig.outputNames&&w._footFeaturesConfig.numOutputs&&w._footFeaturesConfig.numOutputs>1)for(var i=0,s=0,p=w._footFeaturesConfig.outputNames;s<p.length;s++){var l=p[s];"heatmaps"==l?a=w._footFeaturesConfig.outputDims[3*i+2]:"coordinates"==l&&(a=w._footFeaturesConfig.outputDims[3*i+2]/2),i+=1}if(t=function(e,t){var r=Array.from(Array(t).keys());13==t&&(r=[54,210,295,415,416,425,463,582,644,721,726,730,813]),18==t&&(r=[54,210,295,406,415,416,417,423,425,463,518,582,644,657,721,726,730,813]);for(var n=r.length,o=new Float32Array(3*n),a=0;a<n;a++){var i=r[a];o[3*a]=e[3*i],o[3*a+1]=e[3*i+1],o[3*a+2]=e[3*i+2]}var s=new Float32Array(3*n);for(a=0;a<n;a++)s[3*a]=-o[3*a],s[3*a+1]=o[3*a+1],s[3*a+2]=o[3*a+2];return[o,s]}(w._footObjModel.vertices,a),w._rightKeyps3D=t[0],w._leftKeyps3D=t[1],w._bufKeyps3D_R=w._poseModule._malloc(w._rightKeyps3D.length*w._float_size),w._poseModule.HEAPF32.set(w._rightKeyps3D,w._bufKeyps3D_R/4),w._bufKeyps3D_L=w._poseModule._malloc(w._leftKeyps3D.length*w._float_size),w._poseModule.HEAPF32.set(w._leftKeyps3D,w._bufKeyps3D_L/4),w._footDetectorConfig.outWidth>1&&w._footDetectorConfig.outHeight>1){var u=o*w._footDetectorConfig.outWidth*w._footDetectorConfig.outHeight;w._bufferHeatmaps=w._poseModule._malloc(u*w._float_size)}w._footFeaturesConfig.outWidth>1&&w._footFeaturesConfig.outHeight>1&&(u=a*w._footFeaturesConfig.outWidth*w._footFeaturesConfig.outHeight,w._bufferHeatmaps_L=w._poseModule._malloc(u*w._float_size),w._bufferHeatmaps_R=w._poseModule._malloc(u*w._float_size)),w._bufferKeypsDet=w._poseModule._malloc(2*o*w._float_size),w._bufferKeypsTrack_L=w._poseModule._malloc(2*a*w._float_size),w._bufferKeypsTrack_R=w._poseModule._malloc(2*a*w._float_size),w._bufferFeatureScores=w._poseModule._malloc(a*w._float_size),w._pose_R=new DF(new Float32Array([1,0,0,0,-1,0,0,0,-1]),new Float32Array([0,0,0])),w._pose_L=new DF(new Float32Array([1,0,0,0,-1,0,0,0,-1]),new Float32Array([0,0,0])),w._trackHasHeatmaps=tF(w._footFeaturesConfig),w._initialized=!0})),re((function(){return v.unsubscribe()}))).toPromise()];case 3:return p.sent(),[2]}}))}))},e.prototype.release=function(){this._initialized&&(this._poseModule._free(this._bufferHeatmaps),this._bufferHeatmaps_L&&this._poseModule._free(this._bufferHeatmaps_L),this._bufferHeatmaps_R&&this._poseModule._free(this._bufferHeatmaps_R),this._bufferKeypsDet&&this._poseModule._free(this._bufferKeypsDet),this._poseModule._free(this._bufferKeypsTrack_L),this._poseModule._free(this._bufferKeypsTrack_R),this._poseModule._free(this._bufferFeatureScores),this._poseModule._free(this._bufKeyps3D_R),this._poseModule._free(this._bufKeyps3D_L),this._hptrImageBuffer&&this._poseModule._free(this._hptrImageBuffer))},e.prototype.trackSync=function(e){var t;if(this._initialized){var r=this._videoManager.getVideoCanvas();r.width===this._currentWidth&&r.height===this._currentHeight||(this._currentWidth=r.width,this._currentHeight=r.height,t=DF.getCameraParams(this._config.fovY,this._currentWidth,this._currentHeight),this._fx=t[0],this._fy=t[1],this._cx=t[2],this._cy=t[3],this._poseModule.cwrap("xzimgInitializeCamera","number",["number","number","number"])(this._config.fovY,this._currentWidth,this._currentHeight)),this._poseManager_L.setNbFramesDelay(this._videoManager.getNbFramesDelay()),this._poseManager_R.setNbFramesDelay(this._videoManager.getNbFramesDelay());var n=e;null==e&&(n=this._videoManager.getLastBuffer()),null!=n?this.trackBothFeetSync(n):console.error("No video frame to process")}else console.error("Foot must be initialized to track")},e.prototype.trackBothFeetSync=function(e){var t=-1;if(this._rightFootState!=uF.Detection&&this._leftFootState!=uF.Detection){var r=this.trackBothFeetFeaturesSync(e,this._leftFootState,this._rightFootState,this._leftFootState==uF.Detected?this._initShape:this._leftFootRecShape,this._rightFootState==uF.Detected?this._initShape:this._rightFootRecShape,this._leftFootVis,this._rightFootVis,this._leftFootOcclusions,this._rightFootOcclusions),n=mF(r.scores_R,"RIGHT_FOOT",this._config.validTrackedKeypThs);this._rightFootRecShape=r.refinedFeatures_R,this._rightFootOcclusions=r.occlusions_R,this._rightFootVis=n.visibilty;var o=mF(r.scores_L,"LEFT_FOOT",this._config.validTrackedKeypThs);this._leftFootRecShape=r.refinedFeatures_L,this._leftFootOcclusions=r.occlusions_L,this._leftFootVis=o.visibilty;var a=this._config.trackScoreThs,i=this._reproj_t;this._fastMovements_R&&(i=this._reproj_fast_t);var s=this._rightFootRecShape.length/2,p=bF(s,"RIGHT_FOOT"),l=new gF(0,0,e.width,e.height),u=new dF((this._rightFootRecShape[p[0]]+this._rightFootRecShape[p[1]])/2,(this._rightFootRecShape[p[0]+s]+this._rightFootRecShape[p[1]+s])/2);l.isPointInside(u)&&this._rightFootVis[p[0]]&&this._rightFootVis[p[1]]&&n.globalScore>=a&&n.totalVisible>=this._config.trackedNumKeypsThs?(t=this.computePoseSync(this._rightFootState,"RIGHT_FOOT"),this._rightFootState=uF.Tracking,t>i&&(this._rightFootState=uF.Detection)):this._rightFootState=uF.Detection,a=this._config.trackScoreThs,this._fastMovements_L&&(a=.1),i=this._reproj_t,this._fastMovements_L&&(i=this._reproj_fast_t),p=bF(s,"LEFT_FOOT");var d=new dF((this._leftFootRecShape[p[0]]+this._leftFootRecShape[p[1]])/2,(this._leftFootRecShape[p[0]+s]+this._leftFootRecShape[p[1]+s])/2);l.isPointInside(d)&&this._leftFootVis[p[0]]&&this._leftFootVis[p[1]]&&o.globalScore>=a&&o.totalVisible>=this._config.trackedNumKeypsThs?(t=this.computePoseSync(this._leftFootState,"LEFT_FOOT"),this._leftFootState=uF.Tracking,t>i&&(this._leftFootState=uF.Detection)):this._leftFootState=uF.Detection,this._leftFootState==uF.Tracking&&this._rightFootState==uF.Tracking&&this.bothFeetSamePlace()&&(this._leftFootState=uF.Detection,this._rightFootState=uF.Detection)}else if(this._rightFootState!==uF.Detection&&this._leftFootState===uF.Detection){var c=this.trackFootFeaturesSync(e,this._rightFootState,this._rightFootState==uF.Detected?this._initShape:this._rightFootRecShape,this._rightFootVis,this._rightFootOcclusions,"RIGHT_FOOT");this._rightFootRecShape=c.refinedFeatures,this._rightFootOcclusions=c.occlusions,n=mF(c.scores,"RIGHT_FOOT",this._config.validTrackedKeypThs),this._rightFootVis=n.visibilty,a=this._config.trackScoreThs,i=this._reproj_t,this._fastMovements_R&&(i=this._reproj_fast_t),p=bF(this._rightFootRecShape.length/2,"RIGHT_FOOT"),this._rightFootVis[p[0]]&&this._rightFootVis[p[1]]&&n.globalScore>=a&&n.totalVisible>=this._config.trackedNumKeypsThs?(t=this.computePoseSync(this._rightFootState,"RIGHT_FOOT"),this._rightFootState=uF.Tracking,t>i&&(this._rightFootState=uF.Detection)):this._rightFootState=uF.Detection;var g=this.detectFeetSync(e);this._initShape=g.refinedFeatures,o=mF(g.scores,"LEFT_FOOT",this._config.detectScoreThs),n=mF(g.scores,"RIGHT_FOOT",this._config.detectScoreThs);var h=!1;if(!this._fastMovements_R&&null!=this._cnnOutputDataInvMask){var f=RF(this._cnnOutputDataInvMask,this._footDetectorShape,!1);f[0];var m=mF(_=f[1],"LEFT_FOOT",this._config.detectScoreThs),y=mF(_,"RIGHT_FOOT",this._config.detectScoreThs);n.globalScore>o.globalScore&&n.globalScore>y.globalScore+.1&&m.globalScore>y.globalScore&&(h=!0)}h&&n.globalScore>this._config.detectScoreThs?(this.invertFoot(),this._rightFootRecShape=g.refinedFeatures,this._rightFootState=uF.Detected):o.globalScore>=this._config.detectScoreThs&&(this._leftFootRecShape=g.refinedFeatures,this._leftFootState=uF.Detected)}else if(this._leftFootState!==uF.Detection&&this._rightFootState===uF.Detection){var b=this.trackFootFeaturesSync(e,this._leftFootState,this._leftFootState==uF.Detected?this._initShape:this._leftFootRecShape,this._leftFootVis,this._leftFootOcclusions,"LEFT_FOOT");if(this._leftFootRecShape=b.refinedFeatures,this._leftFootOcclusions=b.occlusions,o=mF(b.scores,"LEFT_FOOT",this._config.validTrackedKeypThs),this._leftFootVis=o.visibilty,a=this._config.trackScoreThs,i=this._reproj_t,this._fastMovements_L&&(i=this._reproj_fast_t),p=bF(this._leftFootRecShape.length/2,"LEFT_FOOT"),this._leftFootVis[p[0]]&&this._leftFootVis[p[1]]&&o.globalScore>=a&&o.totalVisible>=this._config.trackedNumKeypsThs?(t=this.computePoseSync(this._leftFootState,"LEFT_FOOT"),this._leftFootState=uF.Tracking,t>i&&(this._leftFootState=uF.Detection)):this._leftFootState=uF.Detection,g=this.detectFeetSync(e),this._initShape=g.refinedFeatures,n=mF(g.scores,"RIGHT_FOOT",this._config.detectScoreThs),o=mF(g.scores,"LEFT_FOOT",this._config.detectScoreThs),h=!1,!this._fastMovements_L&&null!=this._cnnOutputDataInvMask){var _,v=RF(this._cnnOutputDataInvMask,this._footDetectorShape,!1);v[0],m=mF(_=v[1],"LEFT_FOOT",this._config.detectScoreThs),y=mF(_,"RIGHT_FOOT",this._config.detectScoreThs),o.globalScore>n.globalScore&&o.globalScore>m.globalScore+.1&&y.globalScore>m.globalScore&&(h=!0)}h&&o.globalScore>this._config.detectScoreThs?(this.invertFoot(),this._leftFootRecShape=g.refinedFeatures,this._leftFootState=uF.Detected):n.globalScore>=this._config.detectScoreThs&&(this._rightFootRecShape=g.refinedFeatures,this._rightFootState=uF.Detected)}else if(this._leftFootState===uF.Detection||this._rightFootState===uF.Detection){var w=this.detectFeetSync(e);if(this._initShape=w.refinedFeatures,o=mF(w.scores,"LEFT_FOOT",this._config.detectScoreThs),n=mF(w.scores,"RIGHT_FOOT",this._config.detectScoreThs),o.globalScore>=this._config.detectScoreThs&&(this._leftFootState=uF.Detected),n.globalScore>=this._config.detectScoreThs&&(this._rightFootState=uF.Detected),this._rightFootState!=uF.Detection&&this._leftFootState!=uF.Detection&&this.bothFeetSamePlaceInit()&&(this._rightFootState==uF.Detected?this._rightFootState=uF.Detection:this._leftFootState=uF.Detection),this._leftFootState==uF.Detected||this._rightFootState==uF.Detected){this._fastMovements_L=!0,this._fastMovements_R=!0;var k=this._poseModule.cwrap("xzimgMatchRecKeypsInit","number",["number"]);null==this._hptrImageBuffer&&(this._hptrImageBuffer=this._poseModule._malloc(e.width*e.height*4)),xF(this._poseModule,e,this._hptrImageBuffer);var T=SF(this._poseModule,this._hptrImageBuffer,e.width,e.height);k(T),this._poseModule._free(T)}}this._leftFootState===uF.Detection&&(this._pose_L=new DF(new Float32Array([1,0,0,0,-1,0,0,0,-1]),new Float32Array([0,0,0]))),this._rightFootState==uF.Detection&&(this._pose_R=new DF(new Float32Array([1,0,0,0,-1,0,0,0,-1]),new Float32Array([0,0,0]))),this._pose_R.setTrackingState(this._rightFootState),this._pose_R.type=0,this._poseManager_R.setPose(this._pose_R),this._pose_L.setTrackingState(this._leftFootState),this._pose_L.type=1,this._poseManager_L.setPose(this._pose_L)},e.prototype.detectFeetSync=function(e){var t,r,n,o,a=function(e,t){var r,n;return{crop:e>t?[(n=0)/t,(r=(e-t)/2)/e,1,(e-r)/e]:[(n=(t-e)/2)/t,(r=0)/e,(t-n)/t,1],deltaY:n,deltaX:r}}(this._currentWidth,this._currentHeight),i=a.crop,s=a.deltaY,p=a.deltaX,l=Gs(e),u=ws(l,"float32"),d=Np(u,[1,this._currentHeight,this._currentWidth,3]),c=hg.cropAndResize(d,[i],[0],[this._footDetectorConfig.inHeight,this._footDetectorConfig.inWidth]),g=Ul(255),h=lp(c,g),f=null;if(this._footToDetect==BF.Both&&(this._leftFootState===uF.Tracking||this._rightFootState===uF.Tracking)){var m=function(e,t,r,n,o,a,i,s){for(var p=e.length/2,l=new Float32Array(2*p),u=0;u<p;u++)l[u]=(e[u]-o)/i,l[u+p]=(e[u+p]-n)/a;for(var d=fF(l,s),c=d[0],g=d[1],h=d[2]-c,f=d[3]-g,m=d[6]-c,y=d[7]-g,b=h*h+f*f,_=m*m+y*y,v=new Float32Array(r*t),w=0;w<t;w++)for(var k=0;k<r;k++){var T=k-c,O=w-g,x=T*h+O*f,S=T*m+O*y;x>0&&S>0&&x<b&&S<_||(v[w*r+k]=1)}return v}(this._leftFootState===uF.Tracking?this._leftFootRecShape:this._rightFootRecShape,this._footDetectorConfig.inHeight,this._footDetectorConfig.inWidth,s,p,(this._currentHeight-2*s)/this._footDetectorConfig.inWidth,(this._currentWidth-2*p)/this._footDetectorConfig.inHeight,this._leftFootState===uF.Tracking?"LEFT_FOOT":"RIGHT_FOOT"),y=Qd(m,"float32");f=Np(y,[1,this._footDetectorConfig.inHeight,this._footDetectorConfig.inWidth,1]),y.dispose()}var b=this._tfFootDetector.predict(h);if(null!=f){var _=yu(1,f),v=up(b,_);this._cnnOutputDataInvMask=v.dataSync(),_.dispose(),v.dispose();var w=up(b,f);b.dispose(),b=w,f.dispose()}var k,T,O=null!==(r=null==b?void 0:b.shape[3])&&void 0!==r?r:this._footDetectorConfig.outChannels,x=null!==(n=null==b?void 0:b.shape[1])&&void 0!==n?n:this._footDetectorConfig.outHeight,S=null!==(o=null==b?void 0:b.shape[2])&&void 0!==o?o:this._footDetectorConfig.outWidth;k=(t=RF(b.dataSync(),[1,x,S,O],!1))[0],T=t[1];var E=this._bufferKeypsDet/4;this._poseModule.HEAPF32.subarray(E,E+2*O).set(k),l.dispose(),u.dispose(),g.dispose(),c.dispose(),h.dispose(),d.dispose(),b.dispose();var F=Math.min(this._currentWidth,this._currentHeight),M=F/this._footDetectorConfig.inWidth,R=F/this._footDetectorConfig.inHeight;return this._simToImage_Det=function(e,t,r,n){var o=new Float32Array(6);return o[0]=n,o[1]=0,o[2]=t,o[3]=0,o[4]=r,o[5]=e,o}(s,p,R,M),{refinedFeatures:yF(k,this._simToImage_Det,!1,b.shape[1]),scores:T}},e.prototype.trackFootFeaturesSync=function(e,t,r,n,o,a){var i,s,p,l,u="LEFT_FOOT"==a?this._simToImage_L:this._simToImage_R;if(t!=uF.Detected){var d=Int32Array.from(n);this._activeIds.length>0&&(d.forEach((function(e,t){d[t]=0})),this._activeIds.forEach((function(e){d[e]=1})),n.forEach((function(e,t){0==e&&(d[t]=0)})),o&&o.forEach((function(e,t){e>0&&(n[t]=0)}))),s=(i=EF(this._poseModule,e,this._hptrImageBuffer,r,d))[0],p=i[1],l=i[2],Math.sqrt(p[2]*p[2]+p[3]*p[3])>10?"LEFT_FOOT"==a?this._fastMovements_L=!0:this._fastMovements_R=!0:"LEFT_FOOT"==a?this._fastMovements_L=!1:this._fastMovements_R=!1;var c=MF(r,s,l);"LEFT_FOOT"==a?this._pose_L.translate(c[0]*this._pose_L.t()[2]/this._fx,c[1]*this._pose_L.t()[2]/this._fy,0):"RIGHT_FOOT"==a&&this._pose_R.translate(c[0]*this._pose_R.t()[2]/this._fx,c[1]*this._pose_R.t()[2]/this._fy,0);for(var g=s.length/2,h=0;h<g;h++)s[h]=r[h]+c[0],s[h+g]=r[h+g]+c[1]}else s=r;u=wF(s,n,this._footFeaturesConfig.inWidth,this._footFeaturesConfig.inHeight,null,a);var f=new ImageData(this._footFeaturesConfig.inWidth,this._footFeaturesConfig.inHeight);f=vF(e,f,u),this._debug&&(this._debugInitialized=!0,this._debugImage=f,iF(this._footFeaturesConfig.inHeight,this._footFeaturesConfig.inWidth,4,f));var m=this.detectKeypointsSync([f],[a]),y=yF(m.coordinates[0],u,"LEFT_FOOT"==a,this._footFeaturesConfig.outHeight);return"LEFT_FOOT"==a?this._simToImage_L=u:this._simToImage_R=u,{refinedFeatures:y,scores:m.scores[0],occlusions:m.occlusions[0]}},e.prototype.detectKeypointsSync=function(e,t){for(var r=[],n=[],o=[],a=[],i=0,s=null,p=0,l=e;p<l.length;p++){var u=l[p],d=Gs(u);a.push(d);var c=ws(d,"float32");a.push(c);var g=Np(c,[1,this._footFeaturesConfig.inHeight,this._footFeaturesConfig.inWidth,3]);a.push(g);var h=Ul(255),f=lp(g,h);a.push(f),"LEFT_FOOT"==t[i]&&(f=Od(f,1),a.push(f)),s?(s=Wp([s,f]),a.push(s)):s=f,i+=1}if(null!=s){var m=[];if(this._footFeaturesConfig.numOutputs&&1!=this._footFeaturesConfig.numOutputs)for(var y=0,b=m=this._tfFootFeatures.predict(s);y<b.length;y++){var _=b[y];a.push(_)}else{var v=this._tfFootFeatures.predict(s);a.push(v),m.push(v)}for(var w=0,k=0,T=m;k<T.length;k++){v=T[k];for(var O=[],x=[],S=0,E=oc(v,0);S<E.length;S++){var F=E[S];a.push(F);var M=Jl(F,0);a.push(M),O.push(F.dataSync()),x.push(M.shape)}if(this._footFeaturesConfig.outputNames&&"heatmaps"!=this._footFeaturesConfig.outputNames[w]){if(this._footFeaturesConfig.outputNames&&"coordinates"==this._footFeaturesConfig.outputNames[w])for(P=0;P<O.length;P++){for(var R=x[P][1]/2,C=new Float32Array(2*R),I=this._footFeaturesConfig.inHeight/2,A=this._footFeaturesConfig.inWidth/2,B=0;B<R;B++)C[B]=(O[P][B]+1)*A,C[B+R]=(O[P][B+R]+1)*I;r.push(C)}else if(this._footFeaturesConfig.outputNames&&"scores"==this._footFeaturesConfig.outputNames[w])for(P=0;P<O.length;P++){var D=x[P][1],L=new Float32Array(D);for(B=0;B<D;B++)L[B]=1/(1+Math.exp(-O[P][B]));n.push(L)}else if(this._footFeaturesConfig.outputNames&&"occlusions"==this._footFeaturesConfig.outputNames[w])for(P=0;P<O.length;P++){D=x[P][1];var N=new Float32Array(D);for(B=0;B<D;B++)N[B]=1/(1+Math.exp(-O[P][B]));o.push(N)}}else for(var P=0;P<O.length;P++){var j;j=this._useWasmForHeatmaps?CF(this._poseModule,x[P],O[P],"LEFT_FOOT"==t[P]?this._bufferHeatmaps_L:this._bufferHeatmaps_R,"LEFT_FOOT"==t[P]?this._bufferKeypsTrack_L:this._bufferKeypsTrack_R,this._bufferFeatureScores):RF(O[P],x[P],!1),r.push(j[0]),n.push(j[1]);var G=x[P][1]*x[P][2]*x[P][3],W="LEFT_FOOT"==t[P]?this._bufferHeatmaps_L/4:this._bufferHeatmaps_R/4;this._poseModule.HEAPF32.subarray(W,W+G).set(O[P])}w+=1}for(P=0;P<r.length;P++)R=r[P].length,W="LEFT_FOOT"==t[P]?this._bufferKeypsTrack_L/4:this._bufferKeypsTrack_R/4,this._poseModule.HEAPF32.subarray(W,W+2*R).set(r[P])}return a.forEach((function(e){return e.dispose()})),{coordinates:r,scores:n,occlusions:o}},e.prototype.trackBothFeetFeaturesSync=function(e,t,r,n,o,a,i,s,p){var l,u,d;if(t!=uF.Detected&&r!=uF.Detected){var c=n.length/2,g=new Int32Array(2*c);g.set(a),g.set(i,c);var h=null;s&&p&&((h=new Float32Array(2*c)).set(s),h.set(p,c));var f=Int32Array.from(g);this._activeIds.length>0&&(f.forEach((function(e,t){f[t]=0})),this._activeIds.forEach((function(e){f[e]=1,f[e+c]=1})),g.forEach((function(e,t){0==e&&(f[t]=0)})),h&&h.forEach((function(e,t){e>0&&(g[t]=0)})));var m=EF(this._poseModule,e,this._hptrImageBuffer,function(e,t){for(var r=e.length/2,n=t.length/2,o=r+n,a=new Float32Array(e.length+t.length),i=0;i<r;i++)a[i]=e[i],a[i+o]=e[i+r];for(i=0;i<n;i++)a[i+r]=t[i],a[i+o+r]=t[i+n];return a}(n,o),f),y=m[0];m[1];var b=m[2];l=function(e,t,r){var n=new Float32Array(2*t),o=new Float32Array(2*r),a=e.length/2;t+r!=a&&console.log("ERROR (separateShapes): shapes not correct dims");for(var i=0;i<t;i++)n[i]=e[i],n[i+t]=e[i+a];for(i=0;i<r;i++)o[i]=e[i+t],o[i+r]=e[i+a+t];return[n,o]}(y,c,c),u=l[0],d=l[1];var _=b.slice(0,c),v=b.slice(c,2*c),w=FF(this._poseModule,n,u),k=FF(this._poseModule,o,d);Math.sqrt(w[2]*w[2]+w[3]*w[3])>10?this._fastMovements_L=!0:this._fastMovements_L=!1,Math.sqrt(k[2]*k[2]+k[3]*k[3])>10?this._fastMovements_R=!0:this._fastMovements_R=!1;var T=MF(n,u,_);this._pose_L.translate(T[0]*this._pose_L.t()[2]/this._fx,T[1]*this._pose_L.t()[2]/this._fy,0);var O=MF(o,d,v);this._pose_R.translate(O[0]*this._pose_R.t()[2]/this._fx,O[1]*this._pose_R.t()[2]/this._fy,0);for(var x=d.length/2,S=0;S<x;S++)d[S]=o[S]+O[0],d[S+x]=o[S+x]+O[1],u[S]=n[S]+T[0],u[S+x]=n[S+x]+T[1]}else u=n,d=o;this._simToImage_L=wF(u,a,this._footFeaturesConfig.inWidth,this._footFeaturesConfig.inHeight,null,"LEFT_FOOT");var E=new ImageData(this._footFeaturesConfig.inWidth,this._footFeaturesConfig.inHeight);E=vF(e,E,this._simToImage_L),this._simToImage_R=wF(d,i,this._footFeaturesConfig.inWidth,this._footFeaturesConfig.inHeight,null,"RIGHT_FOOT");var F=new ImageData(this._footFeaturesConfig.inWidth,this._footFeaturesConfig.inHeight);F=vF(e,F,this._simToImage_R);var M=this.detectKeypointsSync([E,F],["LEFT_FOOT","RIGHT_FOOT"]),R=yF(M.coordinates[0],this._simToImage_L,!0,this._footFeaturesConfig.outHeight),C=yF(M.coordinates[1],this._simToImage_R,!1,this._footFeaturesConfig.outHeight);return t!=uF.Detected&&(R=hF(R,aF(M.scores[0],this._config.validTrackedKeypThs),u,a,.2)),r!=uF.Detected&&(C=hF(C,aF(M.scores[1],this._config.validTrackedKeypThs),d,i,.2)),{refinedFeatures_L:R,refinedFeatures_R:C,scores_L:M.scores[0],scores_R:M.scores[1],occlusions_L:M.occlusions[0],occlusions_R:M.occlusions[1]}},e.prototype.computePoseSync=function(e,t){var r=this,n=-1,o=this._poseModule.cwrap("xzimgEstimateRigidPose","number",["number","number","number","number","number","number","number","number","number","number","number","number"]);if(e==uF.Detected||e==uF.Tracking){var a=1;e==uF.Detected&&(a=0);var i=1;this._trackHasHeatmaps&&(i=3);var s=3;"LEFT_FOOT"!=t||this._fastMovements_L||(s=1),"RIGHT_FOOT"!=t||this._fastMovements_R||(s=1);var p=new Float32Array(18);"LEFT_FOOT"==t?(p.set(this._pose_L.R()),p.set(this._pose_L.t(),9)):(p.set(this._pose_R.R()),p.set(this._pose_R.t(),9));var l=kF(this._poseModule,p),u="LEFT_FOOT"==t?this._simToImage_L:this._simToImage_R,d=Float32Array.from([1,0,0,0,1,0]);this._trackHasHeatmaps&&(d=Float32Array.from(u.slice(0,6)),"LEFT_FOOT"==t&&(d[2]+=d[1]*(this._footFeaturesConfig.outWidth-1),d[5]+=d[4]*(this._footFeaturesConfig.outHeight-1),d[1]=-d[1],d[4]=-d[4]));var c=kF(this._poseModule,d),g=null,h=null,f=new Float32Array(2*this._activeIds.length),m=new Float32Array(3*this._activeIds.length),y="LEFT_FOOT"==t?this._leftFootRecShape:this._rightFootRecShape,b="LEFT_FOOT"==t?this._leftKeyps3D:this._rightKeyps3D,_=y.length/2;this._activeIds.length>0?(this._activeIds.forEach((function(e,t){f[t]=y[e],f[t+r._activeIds.length]=y[e+_]})),g=kF(this._poseModule,f),this._activeIds.forEach((function(e,t){m[3*t]=b[3*e],m[3*t+1]=b[3*e+1],m[3*t+2]=b[3*e+2]})),h=kF(this._poseModule,m),_=this._activeIds.length):(g=this._trackHasHeatmaps?"LEFT_FOOT"==t?this._bufferKeypsTrack_L:this._bufferKeypsTrack_R:kF(this._poseModule,y),h=kF(this._poseModule,"LEFT_FOOT"==t?this._leftKeyps3D:this._rightKeyps3D)),-1==(n=o("LEFT_FOOT"==t?this._bufferHeatmaps_L:this._bufferHeatmaps_R,this._footFeaturesConfig.outHeight,this._footFeaturesConfig.outWidth,_,0,c,g,h,a,i,s,l))&&(n=1e4),"LEFT_FOOT"==t?this._pose_L=new DF(new Float32Array(this._poseModule.HEAPF32.buffer,l,9),new Float32Array(this._poseModule.HEAPF32.buffer,l+9*this._float_size,3)):this._pose_R=new DF(new Float32Array(this._poseModule.HEAPF32.buffer,l,9),new Float32Array(this._poseModule.HEAPF32.buffer,l+9*this._float_size,3)),c&&this._poseModule._free(c),g&&!this._trackHasHeatmaps&&this._poseModule._free(g),h&&this._activeIds.length>0&&this._poseModule._free(h)}return n},e.prototype.invertFoot=function(){var e,t,r,n,o,a,i;e=[this._rightFootRecShape,this._leftFootRecShape],this._rightFootRecShape=e[0],this._rightFootRecShape=e[1],t=[this._pose_L,this._pose_R],this._pose_R=t[0],this._pose_L=t[1],r=[this._poseManager_L,this._poseManager_R],this._poseManager_R=r[0],this._poseManager_L=r[1],n=[this._simToImage_R,this._simToImage_L],this._simToImage_L=n[0],this._simToImage_R=n[1],o=[this._rightFootState,this._leftFootState],this._leftFootState=o[0],this._rightFootState=o[1],a=[this._rightFootVis,this._leftFootVis],this._leftFootVis=a[0],this._rightFootVis=a[1],i=[this._bufferHeatmaps_L,this._bufferHeatmaps_R],this._bufferHeatmaps_R=i[0],this._bufferHeatmaps_L=i[1]},e.prototype.dst=function(e,t,r,n){return Math.sqrt((e-r)*(e-r)+(t-n)*(t-n))},e.prototype.bothFeetSamePlaceInit=function(){var e=this._initShape.length/2,t=0;return t+=this.dst(this._initShape[0],this._initShape[e],this._initShape[4],this._initShape[4+e]),t+=this.dst(this._initShape[1],this._initShape[1+e],this._initShape[3],this._initShape[3+e]),(t+=this.dst(this._initShape[2],this._initShape[2+e],this._initShape[5],this._initShape[5+e]))/3<this.dst(this._initShape[0],this._initShape[e],this._initShape[2],this._initShape[2+e])/5},e.prototype.bothFeetSamePlace=function(){var e=fF(this._leftFootRecShape,"LEFT_FOOT"),t=e[0],r=e[1],n=e[2],o=e[3],a=e[4],i=e[5],s=e[6],p=e[7],l=fF(this._rightFootRecShape,"RIGHT_FOOT"),u=l[0],d=l[1],c=l[2],g=l[3],h=l[4],f=l[5],m=l[6],y=l[7],b=this.dst(t,r,s,p)/8;return this.dst(t,r,u,d)<b&&this.dst(n,o,c,g)<b&&this.dst(a,i,h,f)<b&&this.dst(s,p,m,y)<b},e.prototype.getKeypoints_L=function(){return this._leftFootRecShape},e.prototype.getKeypoints_R=function(){return this._rightFootRecShape},e.prototype.getScores_L=function(){return this._leftFootVis},e.prototype.getScores_R=function(){return this._rightFootVis},e.prototype.getOcclusion_L=function(){return this._leftFootOcclusions},e.prototype.getOcclusion_R=function(){return this._rightFootOcclusions},e}(),GF={modelFilename:"",featuresFilename:"",objFilename:"",fovY:50,detectScoreThs:.2,trackScoreThs:.4,geometryToDetect:"LAMBORGHINI",filteringLevel:2,filteringShift:.5,validDetectedKeypThs:.2,validTrackedKeypThs:.2,detectNumKeypsThs:3,trackedNumKeypsThs:3,normMode:"",reprojThs:25,activeIds:new Int32Array,computePose:!0,useWasm:!0},WF=function(){function e(e,t){this.x=e,this.y=t}return e.prototype.Dist=function(e){return Math.sqrt((e.x-this.x)*(e.x-this.x)+(e.y-this.y)*(e.y-this.y))},e}();function zF(e){return e==NF.UpperBody||e==NF.FullBody}!function(e){e.Lamborghini="LAMBORGHINI",e.Horse="HORSE",e.WatsonCan="WATSON-CAN",e.MartellBottle="MARTELL-BOTTLE",e.Necklace="NECKLACE",e.Wrist="WRIST",e.Hand="HAND",e.UpperBody="UPPER-BODY",e.FullBody="FULL-BODY",e.CanKivisense="CAN-KIVISENSE",e.ToyTruck="TOY-TRUCK",e.Chivas="CHIVAS",e.ChivasLarge="CHIVAS-LARGE",e.Lion="LION",e.Bartender="BARTENDER",e.Wcbottle="WCBOTTLE",e.EQA="EQA",e.Face="FACE"}(NF||(NF={}));var UF="config.json",$F=function(){function e(){this._initialized=!1,this._nonRigidInitialized=!1,this._currentWidth=0,this._currentHeight=0,this._trackingState=uF.Detection,this._denseVertices=new Float32Array(0),this._geometryType=NF.Lamborghini,this._resetPose=!1,this._float_size=4,this._int_size=4,this._bufferHeatmaps=null,this._bufferKeypsDet=null,this._bufferFeatureScores=null,this._bufInOutPose=null,this._bufKeyps3D=null,this._bufMirroredKeyps3D=null,this._bufferKeypsTrack=null,this._bufferPdmModel=null,this._bufDenseVertices3D=null,this._reprojError=0,this._hptrImageBuffer=null,this._fastMvt=!1,this._mirrored=!1,this._debug=!1,this._debugInitialized=!1}return e.prototype.getDebugImage=function(){return this._debugInitialized?this._debugImage:null},e.prototype.isDetected=function(){return this._trackingState===uF.Tracking},e.prototype.getStatus=function(){return this._trackingState},e.prototype.getPosition=function(){var e=this._poseManager.getInterpolatedPose();return e?e.getPosition():null},e.prototype.getRotation=function(){var e=this._poseManager.getInterpolatedPose();return e?e.getRotation():null},e.prototype.getPose=function(){return this._pose},e.prototype.getVisibility=function(){return this._visibility},e.prototype.getKeypoints=function(){return this._keyps2D},e.prototype.getReprojKeypoints=function(){return this._reprojKeyps2D},e.prototype.getKeypoints3D=function(){return this._keyps3D},e.prototype.getDenseKeypoints3D=function(){return this._denseVertices},e.prototype.getInterpolatedPose=function(){return this._poseManager.getInterpolatedPose()},e.prototype.isInitialized=function(){return this._initialized},e.prototype.isMirrored=function(){return this._mirrored},e.prototype.getReprojError=function(){return this._reprojError},e.prototype.initialize=function(e,t,r){var n,o,a,l,u;return s(this,void 0,void 0,(function(){var s,d,c,g,h,f,m,y,b,_,v,w,k,T,O,S,E,F=this;return p(this,(function(p){switch(p.label){case 0:if(null==e)throw"Invalid parameter";return this._config=t?i(i({},GF),t):GF,(null===(n=null==t?void 0:t.wasmBackend)||void 0===n?void 0:n.enable)?(JE({"tfjs-backend-wasm.wasm":null===(o=t.wasmBackend)||void 0===o?void 0:o.tfjsBackendWasmPath,"tfjs-backend-wasm-simd.wasm":null===(a=t.wasmBackend)||void 0===a?void 0:a.tfjsBackendWasmSimdPath,"tfjs-backend-wasm-threaded-simd.wasm":null===(l=t.wasmBackend)||void 0===l?void 0:l.tfjsBackendWasmThreadedPath}),[4,Fs("wasm")]):[3,2];case 1:p.sent(),p.label=2;case 2:return this.release(),this._videoManager=e,this._poseManager=new LF(this._videoManager.getNbFramesDelay()),this._poseManager.setInterpolation(this._config.filteringShift),this._poseManager.setFilteringLevel(this._config.filteringLevel),this._geometryType=function(e){if(e){if("LAMBORGHINI"===e)return NF.Lamborghini;if("HORSE"===e)return NF.Horse;if("WATSON-CAN"===e)return NF.WatsonCan;if("MARTELL-BOTTLE"===e)return NF.MartellBottle;if("NECKLACE"===e)return NF.Necklace;if("WRIST"===e)return NF.Wrist;if("HAND"===e)return NF.Hand;if("UPPER-BODY"===e)return NF.UpperBody;if("FULL-BODY"===e)return NF.FullBody;if("CAN-KIVISENSE"===e)return NF.CanKivisense;if("TOY-TRUCK"===e)return NF.ToyTruck;if("CHIVAS"===e)return NF.Chivas;if("CHIVAS-LARGE"===e)return NF.ChivasLarge;if("LION"===e)return NF.Lion;if("BARTENDER"===e)return NF.Bartender;if("WCBOTTLE"===e)return NF.Wcbottle;if("EQA"===e)return NF.EQA;if("FACE"===e)return NF.Face}return NF.Lamborghini}(this._config.geometryToDetect),s=new ue(0),d=Y(vO({locateFile:function(e,t){return F._config.poseEstimationWasmFilename||t+e}})).pipe(be((function(){return s.next(1)}))),c=dO(this._config.modelFilename,UF),g=c.model$,h=c.progress$,f=dO(this._config.featuresFilename,UF),m=f.model$,y=f.progress$,b=IF(this._config.objFilename,!1),_=b.model$,v=b.progress$,w=new ue(0),T="upper-body-pdm",this._config.pdmContainer?(O=this._config.pdmContainer,"string"==typeof this._config.pdmContainer&&(S=null===(u=this._config.pdmContainer)||void 0===u?void 0:u.replace(/\\/g,"/"),T=null==S?void 0:S.substring(S.lastIndexOf("/")+1,S.lastIndexOf("."))),k=function(e,t,r){return"string"==typeof e?Mk({url:e,method:"GET",responseType:"arraybuffer",async:!0,progressSubscriber:new x((function(e){return r.next(.5*e.loaded/e.total)}),(function(e){}),(function(){return r.next(.5)}))}).pipe(de(2),he((function(e){return X(dT(new Uint8Array(e.response)))})),he((function(n){return n[t]?(r.next(1),X(n[t])):ee("File ".concat(t," not found in ").concat(e))}))):X(dT(new Uint8Array(e))).pipe(he((function(e){return e[t]?(r.next(1),X(e[t])):ee("File ".concat(t," not found"))})))}(O,this._config.pdmName?this._config.pdmName:T+".bin",w)):(w.next(1),k=X(null)),E=H([s,h,w,y,v]).pipe(q((function(e){return e.reduce((function(t,r){return t+r/e.length}),0)})),q((function(e){return r&&r(e)}))).subscribe(),[4,dk({poseModule:d,detectorModel:g,pdmModel:k,trackerModel:m,geometryObjModel:_}).pipe(q((function(e){var t;F._poseModule=e.poseModule,F._geometryObjModel=e.geometryObjModel,F._tfKeypointsDetector=e.detectorModel.graphModel,F._detectorConfig=e.detectorModel.config,F._tfKeypointsTracker=e.trackerModel.graphModel,F._trackerConfig=e.trackerModel.config;var r=Cu([1,F._detectorConfig.inHeight,F._detectorConfig.inWidth,3]),n=F._tfKeypointsDetector.predict(r);F._detectorOutDims=n.shape,n.dispose(),F._detectorConfig.inHeight===F._trackerConfig.inHeight&&F._detectorConfig.inWidth===F._trackerConfig.inWidth||(r.dispose(),r=Cu([1,F._trackerConfig.inHeight,F._trackerConfig.inWidth,3])),(n=F._tfKeypointsTracker.predict(r))instanceof Array?(n.forEach((function(e){return e.dispose()})),F._trackerOutDims=[1,F._trackerConfig.outHeight,F._trackerConfig.outWidth,F._trackerConfig.outChannels]):(F._trackerOutDims=n.shape,n.dispose()),r.dispose(),F._debug&&(console.log(F._detectorConfig),console.log(F._trackerConfig),console.log("(DEBUG) XZIMG BACKEND",Ms()),console.log("_trackerOutDims",F._trackerOutDims)),F._activeIds=F._config.activeIds,F._trackHasHeatmaps=tF(F._trackerConfig),t=function(e,t){if("NECKLACE"==t)return[r=new Float32Array([-1.982586,1.762905,-1.256474,-1.4803,.73489,-.059477,-.863695,.091572,.505433,-179e-6,-.518833,.632376,.863894,.089272,.503284,1.479377,.729931,-.063135,1.981941,1.7644,-1.255762]),new Float32Array([-1.982586,1.762905,-1.256474,1.981941,1.7644,-1.255762])];if("CAN-KIVISENSE"==t)return[r=new Float32Array([.11749199777841568,.3616040050983429,-.5216580033302307,.3387719988822937,.1726129949092865,-.5216580033302307,.059477999806404114,-.37553098797798157,-.5216580033302307,-.1752689927816391,-.3439840078353882,.5761319994926453,.3802120089530945,-0,-.3024890124797821,.3387719988822937,-.1726129949092865,-.3024890124797821,-.1726129949092865,-.3387719988822937,-.3024890124797821,-.3616029918193817,-.11749199777841568,-.3024890124797821,-.11749199777841568,.3616040050983429,-.3024890124797821,.3802120089530945,-0,-.08331900089979172,.22348299622535706,-.3075979948043823,-.08331900089979172,-.3075979948043823,-.22348299622535706,-.08331900089979172,.37553098797798157,-.059477999806404114,.1358499974012375,-0,-.3802120089530945,.1358499974012375,-.37553098797798157,-.059477999806404114,.1358499974012375,.059477999806404114,.37553098797798157,.1358499974012375,.3616040050983429,.11749199777841568,.3550190031528473,-.3616029918193817,-.11749199777841568,.3550190031528473,-.3616029918193817,.11749199777841568,.3550190031528473,-.11749199777841568,.3616029918193817,.3550190031528473]),new Float32Array([0,0,-.5991089940071106,0,-0,.6023629903793335])];if("TOY-TRUCK"==t)return[r=new Float32Array([-.11474676430225372,.06819115579128265,.12616248428821564,-3.9706208099232754e-7,-.14720511436462402,.28020843863487244,5.515660461696825e-8,-.3098587989807129,.08606547862291336,-.18071073293685913,-.27267926931381226,-.012890318408608437,3.1216436013892235e-7,.39625027775764465,.03189631924033165,.23052667081356049,.24702677130699158,.002463694429025054,.1103515625,.2759860157966614,.15902937948703766,.18071091175079346,-.27267909049987793,-.012890467420220375,-.23046159744262695,-.11318685114383698,.0017448731232434511,.23046180605888367,-.1131867840886116,.0017446735873818398,-.1103513240814209,.275985985994339,.15902943909168243,.22978469729423523,.383583128452301,-.09141343832015991,-.22978472709655762,.38358309864997864,-.09141325950622559,-.23052656650543213,.247026726603508,.002463878598064184,.11429085582494736,.06870604306459427,.12790152430534363,.11895161867141724,-.05556913837790489,.37969091534614563,.11927806586027145,.1806230992078781,.373945027589798,-.1189512312412262,-.05556917190551758,.3796910345554352,-.11927773058414459,.18062305450439453,.3739452064037323]),new Float32Array([5.515660461696825e-8,-.3098587989807129,.08606547862291336,3.1216436013892235e-7,.39625027775764465,.03189631924033165])];if("CHIVAS"==t)return[r=new Float32Array([-3.1930644239785977e-10,-15140265077207005e-22,5.86190128326416,0,-.9621832966804504,1.9865937232971191,1.1873104572296143,-.9285097718238831,.9833493232727051,1.1932897567749023,-.9253148436546326,-1.3412771224975586,0,.9153332114219666,2.9489502906799316,-1.5160919427871704,.8744217157363892,.3604915142059326,-3.4059355336069075e-9,.9318456053733826,.3808324337005615,0,.9403911828994751,1.5472331047058105,.8038088083267212,-.9315917491912842,-.4920954704284668,1.5160919427871704,.8744216561317444,.3604915142059326,-2.058072090148926,-.06387438625097275,-2.1172304153442383,2.0580718517303467,-.06387437880039215,-2.1172304153442383,1.1926252841949463,.9239217042922974,-.5218658447265625,-4.4702903601034905e-9,-.9262475371360779,2.8632278442382812,-.02674211747944355,-1.5987444257348216e-8,-3.3316898345947266,-1.3472687005996704,-.9158325791358948,.9859023094177246,1.6359063386917114,-.8202042579650879,-2.4852395057678223,-1.6359063386917114,-.8202041983604431,-2.4852395057678223,-1.2821598052978516,-.9170172810554504,-1.34637451171875,-1.2809302806854248,-.9167184233665466,-.529242992401123,-2.0578272342681885,-.06386483460664749,1.5451469421386719,1.6359063386917114,.8202039003372192,-2.485239267349243,-1.5809047222137451,.8463804721832275,-2.4669992923736572,.7743757367134094,-.04055686667561531,3.7609105110168457,-1.099993348121643,.9303679466247559,-1.3362138271331787,1.0999937057495117,.9303681254386902,-1.3362138271331787,-1.2809303998947144,.9167175889015198,-.529242753982544,-.7743757367134094,-.040556877851486206,3.760910987854004,2.0578272342681885,-.06386483460664749,1.5451469421386719]),new Float32Array([-.02674211747944355,-1.5987444257348216e-8,-3.3316898345947266,-3.1930644239785977e-10,-15140265077207005e-22,5.86190128326416])];if("CHIVAS-LARGE"==t)return[r=new Float32Array([-.7353339195251465,-9.039938504429301e-7,2.8790359497070312,.7353339195251465,-9.039938504429301e-7,2.8790359497070312,-1.0241641998291016,-1.0241650342941284,2.1618540287017822,1.1196224689483643,-.9188478589057922,2.1618540287017822,.14197710156440735,-1.4414118528366089,2.1618540287017822,-.14197710156440735,1.4414103031158447,2.1618545055389404,-.5879112482070923,.057907234877347946,4.713740348815918,.5879112482070923,.057907234877347946,4.713740348815918,.06999345868825912,.0023226356133818626,-2.3130407333374023,0,-.07499408721923828,6.051614284515381,.0008376236073672771,1.707755446434021,-1.6613836288452148,-1.3236799240112305,1.0878145694732666,-.10835576057434082,-1.086346983909607,-1.323068618774414,-.10257232189178467,1.3245174884796143,1.0878145694732666,-.10835576057434082,1.2116090059280396,-1.2100292444229126,-.10835611820220947,.8094201683998108,1.5145108699798584,.6681584119796753,-.953505277633667,1.427893042564392,.6681584119796753,-1.0888724327087402,-1.3264672756195068,.6710498332977295,1.2140388488769531,-1.2132492065429688,.6681579351425171,.49678289890289307,-1.6338136196136475,-.8848701119422913,.00010470295092090964,1.7187724113464355,1.0564154386520386,1.0838285684585571,-1.3177416324615479,-1.2731270790100098,1.0838285684585571,1.3218059539794922,-1.2731266021728516,-1.0823626518249512,1.3218059539794922,-1.2731266021728516,-.9479852914810181,-1.4177916049957275,-1.2630056142807007,.3440423905849457,-.6436600685119629,3.901371479034424,-.46299880743026733,-.5641732215881348,3.901371479034424]),new Float32Array([.06999345868825912,.0023226356133818626,-2.3130407333374023,0,-.07499408721923828,6.051614284515381])];if("LION"==t)return[r=new Float32Array([-.0022359604481607676,-.951945424079895,2.026939868927002,-.448139488697052,-.6012729406356812,-1.6381982564926147,-.5041450262069702,.4640916585922241,-1.7428531646728516,.5572898387908936,.4562094509601593,-1.7489975690841675,.4558115005493164,-.6014943718910217,-1.639726161956787,-.5527711510658264,-.9193709492683411,3.0056838989257812,.5723921656608582,-.9076480865478516,3.0084033012390137,.5884838104248047,.0083160400390625,1.280758261680603,-.6188563108444214,-.009009452536702156,1.2967206239700317,.030467068776488304,.4174400866031647,-.521793007850647,-1.5193467140197754,.0034290971234440804,-.37409281730651855,1.5193467140197754,.0034290971234440804,-.37409281730651855,.012890640646219254,-.8310151696205139,2.4351325035095215,1.5662710666656494,.9279237985610962,3.319540500640869,-1.5894092321395874,.8687598705291748,3.289144515991211,.3409583568572998,-.5160142183303833,1.274591088294983,-.3600188195705414,-.5107225775718689,1.2790225744247437,-1.097593903541565,.11527538299560547,-1.0057109594345093,1.1363357305526733,-.5465875864028931,-.971623957157135,.8704371452331543,.5547775626182556,.3597971200942993,3.982757734721787e-10,.5748654007911682,.7409988641738892,1.0960721969604492,.12153985351324081,-.9948496222496033,-1.1377226114273071,-.5433639287948608,-.9926916360855103,-.8704371452331543,.5547775626182556,.3597968816757202,0,-.5633412003517151,-.9722840189933777,0,-.5655208826065063,.37440025806427]),new Float32Array([.012890640646219254,-.8310151696205139,2.4351325035095215,0,-.5633412003517151,-.9722840189933777])];if("BARTENDER"==t)return[r=new Float32Array([-.20026133954524994,-.9737697839736938,2.17860746383667,.19603070616722107,-.9857503771781921,2.1616086959838867,.3260974586009979,.7099164128303528,.10108458995819092,-.37390175461769104,-.42527586221694946,1.0039399862289429,.3709491193294525,-.42527586221694946,1.0039399862289429,8438758959528059e-20,-1.101210594177246,1.7955349683761597,2949934116831766e-31,-.04326578229665756,-.5318827629089355,.4412812888622284,-.2815903127193451,-1.3385579586029053,.45793405175209045,.37141913175582886,-1.6536355018615723,-.4412812888622284,-.2815903127193451,-1.3385579586029053,-.45793405175209045,.37141913175582886,-1.6536355018615723,6788047923913078e-31,-.8192819952964783,.4206336736679077,-.9793461561203003,-.015334106981754303,1.7865675687789917,.9793461561203003,-.015334106981754303,1.7865675687789917,1.4873708486557007,.04833114147186279,-.3768104314804077,.4768085777759552,.1994880586862564,.9495226144790649,.7653667330741882,-.3627835810184479,.15018165111541748,.308129221200943,-.6489158868789673,.557608962059021,-.0002116243413183838,.49473923444747925,1.0336977243423462,-.5404940247535706,.19043265283107758,.8128713369369507,-.7657899260520935,-.3627835810184479,.15018165111541748,1.4484371035905497e-7,.3663712441921234,3.387472629547119,-1.2087160348892212,-.6443189978599548,3.0043344497680664,1.2087161540985107,-.6443195343017578,3.0043344497680664,6141737432960813e-31,-.8464082479476929,.10243535041809082,-.3249528408050537,.7104986310005188,.10016584396362305,-.303207665681839,-.9462416172027588,.5075775384902954,-.37667226791381836,-1.0658020973205566,.9869986772537231]),new Float32Array([2949934116831766e-31,-.04326578229665756,-.5318827629089355,1.4484371035905497e-7,.3663712441921234,3.387472629547119])];if("WCBOTTLE"==t)return[r=new Float32Array([-.013366899453103542,-2.9939471346551727e-7,-2.511009931564331,.6493963599205017,-.7673797011375427,-2.4501447677612305,.7540126442909241,.6627629399299622,-2.4501450061798096,-.9611459970474243,-.36033540964126587,-2.4501450061798096,.1477278769016266,.9964179992675781,1.9307010173797607,-.9568377137184143,-.35869666934013367,1.9307011365890503,-.01336702425032854,3.722930728145002e-7,2.314748764038086,.9344120025634766,.3603347837924957,.22589847445487976,-.027811311185359955,1.0138630867004395,1.6714674234390259,-.9710267186164856,.3331884741783142,1.0331839323043823,.627266526222229,.7859488129615784,1.035000205039978,-.6761305332183838,.7673797011375427,.22936050593852997,-.02781102992594242,1.0138623714447021,-1.587138056755066,-.027811311185359955,1.0138630867004395,.45858100056648254,-.9372201561927795,-.4008185565471649,-.006537972949445248,.5878132581710815,-.8109326958656311,-.27440735697746277,-.3465554714202881,-.9576587677001953,1.3840690851211548,.34696754813194275,-.9477792978286743,-.5884990096092224,-.8841753602027893,-.519440233707428,-.5891181230545044,-.346555233001709,-.9576594829559326,.418072372674942]),new Float32Array([-.013366899453103542,-2.9939471346551727e-7,-2.511009931564331,-.01336702425032854,3.722930728145002e-7,2.314748764038086])];if("EQA"==t)return[r=new Float32Array([-3.7749502658843994,-.9271571040153503,.04594746232032776,-3.777569055557251,.92264324426651,.04048970341682434,-3.7703702449798584,-1.2227396965026855,-.9106809496879578,-3.7990496158599854,1.1855655908584595,-.9073726534843445,3.811656951904297,1.3718937635421753,-.7763562798500061,3.8001205921173096,-1.3779062032699585,-.7809855341911316,-.4568534791469574,-1.0891674757003784,1.2122516632080078,-.4568534791469574,1.08638596534729,1.2122514247894287,2.6531293392181396,-.925976037979126,1.2379950284957886,2.648271083831787,.9270637631416321,1.2376376390457153,3.459774971008301,-1.3973642587661743,.466232568025589,3.459774971008301,1.3945828676223755,.46623218059539795,-.9480692744255066,.0011375703616067767,1.0669147968292236,-4.019203186035156,-.0013908070977777243,-.24615326523780823,3.3231399059295654,-.0013906551757827401,1.151373267173767,3.907538652420044,-.0012724152766168118,.11990431696176529,.35528019070625305,-1.5870187282562256,.2603841722011566,.5474950671195984,-1.151407241821289,1.2155274152755737,-1.341339349746704,-1.5719798803329468,-.9050094485282898,-1.420742154121399,-1.4566854238510132,.4212491512298584,.35528019070625305,1.5842370986938477,.2603837251663208,.5482162833213806,1.1495895385742188,1.2244428396224976,-1.341339349746704,1.5691980123519897,-.9050098657608032,-1.420742154121399,1.4539037942886353,.42124876379966736,2.0402863025665283,-1.592824101448059,.3434940576553345,1.582544207572937,-1.5713834762573242,-.836898148059845,2.047945737838745,1.584236979484558,.3409099578857422,1.582544207572937,1.5686016082763672,-.8368985652923584]),new Float32Array([-4.019203186035156,-.0013908070977777243,-.24615326523780823,3.907538652420044,-.0012724152766168118,.11990431696176529])];if("FACE"==t)return[r=new Float32Array([-9.037608623504639,2.355806514620781,-8.28516685962677,-8.81279444694519,-.11831151321530342,-7.542072296142578,-8.38990831375122,-2.418052017688751,-7.253487825393677,8.400188446044922,-2.424757957458496,-7.240226984024048,8.831642150878906,-.11823836714029312,-7.535887956619263,9.061289668083191,2.362936556339264,-8.284585356712341,-1.901270106434822,6.1033472418785095,1.311941035091877,1.9072290509939194,6.117302238941193,1.3117250353097916,-.0015033446252346039,4.03810042142868,1.5223239958286285,.0047621168196201324,2.571689784526825,2.513868987560272,.004333397373557091,1.2499050498008728,3.5467670559883118,-.0007506050169467926,-.2351544015109539,4.379635065793991,-1.5987120568752289,-1.6273340582847595,1.7652730643749237,.013800747692584991,-1.9495649933815002,2.5874924659729004,1.6161270439624786,-1.629391998052597,1.7741851210594177,-5.2972798347473145,3.732409954071045,-.8603600263595581,-2.2803800106048584,3.479170083999634,-.39132800698280334,2.189579963684082,3.4696600437164307,-.3517009913921356,5.284249782562256,3.7591500282287598,-.8421319723129272]),new Float32Array([])];if("HAND"==t){for(var r,n=((r=new Float32Array([3.57,6.02,0,6.68,8.76,.75,8.51,9.69,.75,10.68,6.14,0,13.29,5.55,.01,10.19,4.74,0,12.84,4.16,.01,9.27,3.56,0,11.75,2.81,.01,8.04,2.58,0,9.9,1.71,.01]))[21]+r[24])/2,o=(r[22]+r[25])/2,a=(r[23]+r[26])/2,i=0;i<r.length/3;i++)r[3*i]-=n,r[3*i+1]-=o,r[3*i+2]-=a;return[r,new Float32Array([9.27,3.56,0,11.75,2.81,-.01])]}var s=[],p=[];"LAMBORGHINI"==t?s=[85,131,198,203,320,391,401,404,791,886,891,1008,1075,1085]:"HORSE"==t?s=[12,15,264,352,360,845,1119,1316,1498,1872,2065,3146,4269,4273,4590,4593,7671,8034,8756,9119]:"WATSON-CAN"==t?(s=[335,1290,1330,2591,2669,2700,2822,3488,3613,5569,5574,5613,5639,5679,5685],p=[871,482]):"MARTELL-BOTTLE"==t?(s=[11,24,38,83,85,151,182,200,207,222,893,1646,1971,2013,2221,2229,2271,2309,2376,2444,2459,2725,2787,2792],p=[24,893]):"NECKLACE"==t?(s=[670,42,48,551,160,155,762],p=[640,762]):"CAN-KIVISENSE"==t?(s=[38,53,89,981,1006,1009,1019,1024,1034,1046,1052,1062,1087,1096,1105,1117,1124,1144,1148,1154],p=[1914,2725]):"TOY-TRUCK"==t?(s=[],p=[]):"WRIST"==t&&(s=[2,15,24,33,42,56,65,74,83,92,213,321,338,360,393,416,472,481,487,576,622,746,804,838,896,905,913,922,931,940,949,958,977,986,996,1005,1010,1019,1028,1037,1046,1055,1077,1086,1092,1101,1164,1173,1182,1267,1311,1321,1323,1346,1354,1372,1428,1451,1460,1468,1478,1503,1513,1554,1588,1597,1605,1641,1649,1692,1709,1735,1738,1762,1772,1789,1793,1819,1840,1850,1876,1894,1899,1921,1926,1935,1948,1953,1962,1971,1980,1989,2002,2007,2016,2025,2038,2056,2061,2083,2170,2435,2459,2513,2530,2594,2674,2718,2745,2748,2753,2772,2775,2791,2797,2803,2899,2905,2947,3003,3034,3084,3093,3109,3112,3128,3129,3136,3168,3175,3205,3208,3305,3323,3324,3331,3365,3368,3371,3374,3378,3386,3389,3392,3395,3398,3414,3418,3434,3437,3440,3443,3446,3462,3496,3509,3512,3689,3690,3691,3692,3693,3747,3748,3760,3764,3777,3778,3782,3783,3784,3787,3788,3792,3793,3797,3799,3800,3804,3805,3809],p=[]);var l=s.length,u=new Float32Array(3*l);s.forEach((function(t,r){u[3*r]=e[3*t],u[3*r+1]=e[3*t+1],u[3*r+2]=e[3*t+2]}));var d=new Float32Array(3*p.length);return p.forEach((function(t,r){d[3*r]=e[3*t],d[3*r+1]=e[3*t+1],d[3*r+2]=e[3*t+2]})),[u,d]}(F._geometryObjModel.vertices,F._geometryType),F._keypsVts=t[0],F._refKeypsVts=t[1];var o=Math.max(F._detectorOutDims[1]*F._detectorOutDims[2]*F._detectorOutDims[3]);F._trackHasHeatmaps&&(o=Math.max(F._detectorOutDims[1]*F._detectorOutDims[2]*F._detectorOutDims[3],F._trackerOutDims[1]*F._trackerOutDims[2]*F._trackerOutDims[3]));var a=Math.max(F._detectorOutDims[3],F._trackerOutDims[3]);if(F._bufferHeatmaps=F._poseModule._malloc(o*F._float_size),F._bufferKeypsDet=F._poseModule._malloc(2*F._detectorOutDims[3]*F._float_size),F._bufferKeypsTrack=F._poseModule._malloc(2*F._trackerOutDims[3]*F._float_size),F._bufferFeatureScores=F._poseModule._malloc(a*F._float_size),F._bufInOutPose=F._poseModule._malloc(21*F._float_size),e.pdmModel){var i=new Uint8Array(e.pdmModel);F._bufferPdmModel=F._poseModule._malloc(i.byteLength),F._poseModule.HEAPU8.set(i,F._bufferPdmModel);var s={rigid_pose:0,num_iterations:1,filter_strength:5,reg_w:10,fovy_d:50,width:640,height:480,num_features:F._geometryType==NF.Face?F._trackerOutDims[3]:-1,modelContent:F._bufferPdmModel,modelContentSize:i.byteLength,modelEncoding:F._geometryType==NF.Face?2:1},p=F._poseModule._malloc(44);F._poseModule.setValue(p+0,s.rigid_pose,"i32"),F._poseModule.setValue(p+4,s.num_iterations,"i32"),F._poseModule.setValue(p+8,s.filter_strength,"i32"),F._poseModule.setValue(p+12,s.reg_w,"float"),F._poseModule.setValue(p+16,s.fovy_d,"float"),F._poseModule.setValue(p+20,s.width,"i32"),F._poseModule.setValue(p+24,s.height,"i32"),F._poseModule.setValue(p+28,s.num_features,"i32"),F._poseModule.setValue(p+32,s.modelContent,"*"),F._poseModule.setValue(p+36,s.modelContentSize,"i32"),F._poseModule.setValue(p+40,s.modelEncoding,"i32");var l=F._poseModule.cwrap("xzimgPoseEstimationInitialize","number",["number"])(p);F._debug&&console.log("PDM initialisation: ",l),F._poseModule._free(p),F._poseModule._free(F._bufferPdmModel),F._nonRigidInitialized=!0}else if(null==F._bufKeyps3D){F._bufKeyps3D=F._poseModule._malloc(F._keypsVts.length*F._float_size),F._poseModule.HEAPF32.set(F._keypsVts,F._bufKeyps3D/4);var u=Array.from(F._keypsVts);u.forEach((function(e,t){t%3==0&&(u[t]=-u[t])})),F._bufMirroredKeyps3D=F._poseModule._malloc(u.length*F._float_size),F._poseModule.HEAPF32.set(F._keypsVts,F._bufMirroredKeyps3D/4)}F._initialized=!0})),re((function(){return E.unsubscribe()}))).toPromise()];case 3:return p.sent(),[2]}}))}))},e.prototype.release=function(){this._initialized&&(this._tfKeypointsDetector.dispose(),this._tfKeypointsTracker.dispose(),null!=this._bufferHeatmaps&&this._poseModule._free(this._bufferHeatmaps),this._bufferHeatmaps=null,null!=this._bufferKeypsDet&&this._poseModule._free(this._bufferKeypsDet),this._bufferKeypsDet=null,null!=this._bufferKeypsTrack&&this._poseModule._free(this._bufferKeypsTrack),this._bufferKeypsTrack=null,null!=this._bufferFeatureScores&&this._poseModule._free(this._bufferFeatureScores),this._bufferFeatureScores=null,null!=this._bufInOutPose&&this._poseModule._free(this._bufInOutPose),this._bufInOutPose=null,null!=this._bufKeyps3D&&this._poseModule._free(this._bufKeyps3D),this._bufKeyps3D=null,null!=this._bufMirroredKeyps3D&&this._poseModule._free(this._bufMirroredKeyps3D),this._bufMirroredKeyps3D=null,null!=this._hptrImageBuffer&&this._poseModule._free(this._hptrImageBuffer),this._hptrImageBuffer=null,this._bufDenseVertices3D&&this._poseModule._free(this._bufDenseVertices3D),this._bufDenseVertices3D=null,this._poseModule.cwrap("xzimgPoseEstimationRelease")(),this._currentWidth=0,this._currentHeight=0,this._initialized=!1,this._nonRigidInitialized=!1,this._trackingState=uF.Detection)},e.prototype.trackSync=function(e){var t;if(this._initialized){var r=this._videoManager.getVideoCanvas();r.width===this._currentWidth&&r.height===this._currentHeight||(this._currentWidth=r.width,this._currentHeight=r.height,t=DF.getCameraParams(this._config.fovY,this._currentWidth,this._currentHeight),this._fx=t[0],this._fy=t[1],this._cx=t[2],this._cy=t[3],this._poseModule.cwrap("xzimgInitializeCamera","number",["number","number","number"])(this._config.fovY,this._currentWidth,this._currentHeight)),this._poseManager.setNbFramesDelay(this._videoManager.getNbFramesDelay());var n=e;null==e&&(n=this._videoManager.getLastBuffer()),null!=n?this.trackGeometrySync(n):console.error("No video frame to process")}else console.error("Geometry must be initialized to track")},e.prototype.trackGeometrySync=function(e){var t,r,n=zF(this._geometryType)||this._geometryType==NF.Wrist||this._geometryType==NF.Hand||this._geometryType==NF.Face;if(this._trackingState===uF.Detection){var o=this._poseModule.cwrap("xzimgMatchRecKeypsInit","number",["number"]);null==this._hptrImageBuffer&&(this._hptrImageBuffer=this._poseModule._malloc(e.width*e.height*4)),xF(this._poseModule,e,this._hptrImageBuffer);var a=SF(this._poseModule,this._hptrImageBuffer,e.width,e.height);o(a),this._poseModule._free(a);var i=this.detectGeometrySync(e),s=i.refinedFeatures,p=i.scores;this._keyps2D=s;var l=oF(p,this._config.validDetectedKeypThs);if(this._visibility=l.visibilty,this._trackingState=uF.Detection,l.totalVisible>=this._config.detectNumKeypsThs&&l.globalScore>=this._config.detectScoreThs){if(this._geometryType==NF.Wrist){this._mirrored=!1;var u=(t=this._keyps2D,r=l.visibilty,(9==t.length/2?r[0]&&r[1]?cF.CreateFromPoints(new dF(t[0],t[9]),new dF(t[1],t[10])):cF.CreateFromPoints(new dF(t[1],t[10]),new dF(t[6],t[15])):cF.CreateFromPoints(new dF(t[30],t[211]),new dF(t[163],t[344]))).x>0?"left":"right");this._mirrored="left"==u}n?this._trackingState=uF.Detected:(this._reprojError=this.computePoseSync(this._trackingState,this._geometryType),this._reprojError>0&&this._reprojError<this._config.reprojThs&&(this._trackingState=uF.Detected))}}else{var d=this.trackGeometryFeaturesSync(e,this._trackingState,this._keyps2D,this._visibility,this._geometryType);this._keyps2D=d.imageFilteredKeyps,this._cropKeyps2D=d.cropKeyps,l=oF(d.scores,this._config.validTrackedKeypThs),this._visibility=l.visibilty;var c=pF(this._geometryType,this._keyps2D.length/2);this._visibility[c[0]]&&this._visibility[c[1]]&&l.totalVisible>=this._config.trackedNumKeypsThs&&l.globalScore>=this._config.trackScoreThs?this._config.computePose?(this._reprojError=this.computePoseSync(this._trackingState,this._geometryType),this._reprojError<=0||this._reprojError>this._config.reprojThs?this._trackingState=uF.Detection:this._trackingState=uF.Tracking):this._trackingState=uF.Tracking:this._trackingState=uF.Detection}(this._trackingState===uF.Detection||this._trackingState===uF.Detected&&n)&&(this._pose=new DF(new Float32Array([1,0,0,0,-1,0,0,0,-1]),new Float32Array([0,0,0])),this._pose.setTrackingState(uF.Detection)),this._pose.setTrackingState(this._trackingState),this._poseManager.setPose(this._pose)},e.prototype.detectGeometrySync=function(e){var t,r,n,o=function(e,t){var r,n;return{crop:e>t?[(n=0)/t,(r=(e-t)/2)/e,1,(e-r)/e]:[(n=(t-e)/2)/t,(r=0)/e,(t-n)/t,1],deltaY:n,deltaX:r}}(this._currentWidth,this._currentHeight),a=o.crop,i=o.deltaY,s=o.deltaX,p=Gs(e),l=ws(p,"float32"),u=Np(l,[1,this._currentHeight,this._currentWidth,3]),d=hg.cropAndResize(u,[a],[0],[this._detectorConfig.inHeight,this._detectorConfig.inWidth]),c=Ul(255),g=lp(d,c),h=this._tfKeypointsDetector.predict(g),f=h.dataSync(),m=this._poseModule.cwrap("xzimgGetHeatmapsLocations","number",["number","number","number","number","number","number","number","number"]),y=null!==(t=null==h?void 0:h.shape[3])&&void 0!==t?t:this._detectorConfig.outChannels,b=null!==(r=null==h?void 0:h.shape[1])&&void 0!==r?r:this._detectorConfig.outHeight,_=null!==(n=null==h?void 0:h.shape[2])&&void 0!==n?n:this._detectorConfig.outWidth,v=y*b*_,w=this._bufferHeatmaps/4;this._poseModule.HEAPF32.subarray(w,w+v).set(f),m(this._bufferHeatmaps,b,_,y,0,1,this._bufferKeypsDet,this._bufferFeatureScores);var k=new Float32Array(this._poseModule.HEAPF32.buffer,this._bufferKeypsDet,2*y),T=new Float32Array(this._poseModule.HEAPF32.buffer,this._bufferFeatureScores,y);p.dispose(),l.dispose(),c.dispose(),d.dispose(),g.dispose(),u.dispose(),h.dispose();var O=Math.min(this._currentWidth,this._currentHeight),x=O/this._detectorConfig.inWidth,S=O/this._detectorConfig.inHeight;return this._simCropToImage=function(e,t,r,n){var o=new Float32Array(6);return o[0]=n,o[1]=0,o[2]=t,o[3]=0,o[4]=r,o[5]=e,o}(i,s,S,x),{refinedFeatures:sF(k,this._simCropToImage,!1,h.shape[1]),scores:T}},e.prototype.trackGeometryFeaturesSync=function(e,t,r,n,o){var a,i,s,p,l=Int32Array.from(n);this._activeIds.length>0&&(l.forEach((function(e,t){l[t]=0})),this._activeIds.forEach((function(e){l[e]=1})),n.forEach((function(e,t){0==e&&(l[t]=0)})));var u,d,c=new Float32Array([0,0]);if(t!=uF.Detected){if(i=(a=EF(this._poseModule,e,this._hptrImageBuffer,r,l))[0],s=a[1],p=a[2],Math.sqrt(s[2]*s[2]+s[3]*s[3])>10?this._fastMvt=!0:this._fastMvt=!1,o==NF.FullBody?[7,8,9,10,13,14,15,16].forEach((function(e){p[e]=0})):o==NF.UpperBody?[7,8,9,10].forEach((function(e){p[e]=0})):o==NF.Necklace?[1,2,3,4,5].forEach((function(e){p[e]=0})):this._activeIds.length>0&&this._activeIds.forEach((function(e){p[e]=0})),c=function(e,t,r,n,o,a,i){void 0===o&&(o=null);for(var s=new Float32Array(2),p=r.length/2,l=0,u=0;u<p;u++)(null==o||o[u]>0)&&(s[0]+=n[u]-r[u],s[1]+=n[u+p]-r[u+p],l+=1);l>0&&(s[0]/=l,s[1]/=l);var d=t/4,c=new Float32Array(18);return c.set(e.HEAPF32.subarray(d,d+18)),c[9]+=s[0]*c[11]/a,c[10]+=s[1]*c[11]/i,e.HEAPF32.set(c,t/4),s}(this._poseModule,this._bufInOutPose,r,i,p,this._fx,this._fy),o==NF.Necklace)for(var g=i.length/2,h=0;h<g;h++)i[h]=r[h]+c[0],i[h+g]=r[h+g]+c[1]}else i=r;if("WATSON-CAN"==o||"CAN-KIVISENSE"==o||"TOY-TRUCK"==o||"CHIVAS"==o||"CHIVAS-LARGE"==o||"LION"==o||"BARTENDER"==o||"WCBOTTLE"==o||"EQA"==o||"MARTELL-BOTTLE"==o){var f=this._pose.project(this._refKeypsVts,DF.getCameraMat(this._config.fovY,this._currentWidth,this._currentHeight));u=-Math.atan2(f[1]-f[3],f[2]-f[0]),"EQA"==o&&(u=0);var m=this._pose.project(this._keypsVts,DF.getCameraMat(this._config.fovY,this._currentWidth,this._currentHeight));for(d=new Float32Array(m.length),h=0;h<d.length/2;h++)d[h]=m[2*h],d[h+d.length/2]=m[2*h+1]}var y=Float32Array.from(r),b=i.length/2;for(h=0;h<b;h++)y[h]+=c[0],y[h+b]+=c[1];zF(o)?this._simCropToImage=function(e,t,r,n,o){var a,i,s,p=t.length/2,l=Array(5),u=new Array(5);if(7==p)l[0]=r[0]>0?1:0,u[0]=new WF(t[0],t[p]),l[1]=r[3]>0&&r[4]>0?1:0,u[1]=new WF((t[3]+t[4])/2,(t[3+p]+t[4+p])/2),l[2]=r[5]>0&&r[6]>0?1:0,u[2]=new WF((t[5]+t[6])/2,(t[5+p]+t[6+p])/2),l[3]=r[1]>0?1:0,u[3]=new WF(t[1],t[1+p]),l[4]=r[2]>0?1:0,u[4]=new WF(t[2],t[2+p]);else{var d=15==p?13:17,c=15==p?14:18;l[0]=r[0]>0?1:0,u[0]=new WF(t[0],t[p]),l[1]=r[d]>=0?1:0,u[1]=new WF(t[d],t[d+p]),l[2]=r[c]>=0?1:0,u[2]=new WF(t[c],t[c+p]),l[3]=r[1]>0?1:0,u[3]=new WF(t[1],t[1+p]),l[4]=r[2]>0?1:0,u[4]=new WF(t[2],t[2+p])}if("FULL-BODY"==e)if(l[1]>0&&l[2]>0)a=u[2],i=-Math.atan2(u[2].y-u[1].y,u[1].x-u[2].x),i+=Math.PI/2,s=2*u[2].Dist(u[1])*2.35;else if(l[0]>0&&l[1]>0)(a=u[1]).y+=2.24*(u[1].y-u[0].y),i=-Math.atan2(u[1].y-u[0].y,u[0].x-u[1].x),i+=Math.PI/2,s=2*u[0].Dist(u[1])*5.3;else if(l[0]>0&&l[2]>0)a=u[2],i=-Math.atan2(u[2].y-u[0].y,u[0].x-u[2].x),i+=Math.PI/2,s=2*u[0].Dist(u[2])*1.64;else{if(!(l[0]>0&&l[3]>0&&l[4]>0))return 0;var g=u[3].Dist(u[4]);(a=u[0]).y+=3*g,i=-Math.atan2(u[4].y-u[3].y,u[3].x-u[4].x),s=2*g*14}else if(console.log(l),l[1]>0&&l[2]>0)a=u[1],i=-Math.atan2(u[2].y-u[1].y,u[1].x-u[2].x),i+=Math.PI/2,s=2*u[2].Dist(u[1])*1.2;else if(l[0]>0&&l[1]>0)a=u[1],i=-Math.atan2(u[1].y-u[0].y,u[0].x-u[1].x),i+=Math.PI/2,s=2*u[0].Dist(u[1])*2.6;else if(l[0]>0&&l[2]>0)a=new WF(u[2].x+.75*(u[0].x-u[2].x),u[2].y+.75*(u[0].y-u[2].y)),i=-Math.atan2(u[2].y-u[0].y,u[0].x-u[2].x),i+=Math.PI/2,s=2*u[0].Dist(u[2])*.8;else{if(!(l[0]>0&&l[3]>0&&l[4]>0))return 0;g=u[3].Dist(u[4]),(a=u[0]).y+=5.5*g,i=-Math.atan2(u[4].y-u[3].y,u[3].x-u[4].x),s=2*g*11}for(var h=0,f=0;f<p;f++){var m=new WF(t[f],t[f+p]).Dist(a);r[f]>0&&m>h&&(h=m)}s=Math.max(s,2*h);var y=Math.cos(i),b=Math.sin(i),_=(s+.1*s)/Math.max(n[0],n[1]),v=(n[1]-1)/2,w=(n[0]-1)/2,k=a.x-(y*_*v-b*_*w),T=a.y-(b*_*v+y*_*w);if(null!=o){var O=.8;_=(1-O)*_+O*o[7],k=(1-O)*k+O*o[2],T=(1-O)*T+O*o[5],i=(1-O)*i+O*o[6],y=Math.cos(i),b=Math.sin(i)}return[y*_,-b*_,k,b*_,y*_,T,i,_]}(o,void 0===d?i:d,n,[this._trackerConfig.inWidth,this._trackerConfig.inHeight],t==uF.Detected||this._fastMvt?null:this._simCropToImage):o==NF.Face?this._simCropToImage=function(e,t,r,n,o){var a=e.length/2,i=nF(e,t,a),s=new dF((i[0]+i[1])/2,(i[2]+i[3])/2),p=0,l=0,u=.35;if(19==a||21==a){var d=[15,16,17,18];21==a&&(d=[17,18,19,20]),0!=t[17]&&0!=t[20]||(d=[18,19]),0!=t[18]&&0!=t[19]||(d=[17,20]),s=new dF(0,0),d.forEach((function(t){s.x+=e[t],s.y+=e[t+a]})),s.x/=d.length,s.y/=d.length;var c=new dF(e[8],e[8+a]),g=new dF(e[13],e[13+a]);21==a&&(c=new dF(e[10],e[10+a]),g=new dF(e[15],e[15+a])),l=1.57075-Math.atan2(g.y-c.y,c.x-g.x);for(var h=0;h<a;h++){var f=new dF(e[h],e[h+a]).Dist(s);t[h]>0&&f>p&&(p=f)}p*=2,u=.2}else{var m=27,y=62,b=66;22==a&&(m=9,y=18,b=20),24==a&&(m=9,y=20,b=22);var _=void 0;5==a?(_=new dF(.5*(e[0]+e[1]),.5*(e[0+a]+e[1+a])),y=3,b=4):_=new dF(e[m],e[m+a]);var v=new dF(.5*(e[y]+e[b]),.5*(e[y+a]+e[b+a]));if(l=1.57075-Math.atan2(v.y-_.y,_.x-v.x),p=i[1]-i[0],o&&"face_center"==o){s=new dF((_.x+v.x)/2,(_.y+v.y)/2);var w=0;for(h=0;h<a;h++)f=new dF(e[h],e[h+a]).Dist(s),t[h]>0&&f>w&&(w=f);p=2*w}5==a&&(p=2*(i[1]-i[0])),22==a&&(u=.15)}var k=new gF(s.x-p/2,s.y-p/2,p,p),T=Math.cos(l),O=Math.sin(l),x=(k.w+u*k.w)/Math.max(r[0],r[1]),S=r[1]/2,E=r[0]/2,F=s.x-(T*x*S-O*x*E),M=s.y-(O*x*S+T*x*E);if(null!=n){var R=.8;F=R*F+(1-R)*n[2],M=R*M+(1-R)*n[5],x=.3*x+.7*n[7],Math.abs(l-n[6])<1&&(l=.3*l+.7*n[6]),T=Math.cos(l),O=Math.sin(l)}return[T*x,-O*x,F,O*x,T*x,M,l,x]}(void 0===d?y:d,n,[this._trackerConfig.inWidth,this._trackerConfig.inHeight],t==uF.Detected||this._fastMvt?null:this._simCropToImage,this._config.normMode):o==NF.Wrist?this._simCropToImage=function(e,t,r,n,o){var a=e.length/2,i=nF(e,t,a),s=lF("WRIST",e),p=s[0],l=s[1],u=s[2],d=Math.max(i[1]-i[0],i[3]-i[2]);p=(i[1]+i[0])/2,l=(i[3]+i[2])/2,9==a&&!t[0]&&t[1]&&t[6]&&(p=e[1],l=e[10],d=2*Math.sqrt(Math.pow(e[6]-p,2)+Math.pow(e[15]-p,2)));var c=Math.cos(u),g=Math.sin(u),h=(d+=.7*d)/Math.max(r[0],r[1]),f=r[1]/2,m=r[0]/2,y=p-(c*h*f-g*h*m),b=l-(g*h*f+c*h*m);return null!=n&&(y=.5*y+.5*n[2],b=.5*b+.5*n[5],h=.5*h+.5*n[7],c=Math.cos(u),g=Math.sin(u)),[c*h,-g*h,y,g*h,c*h,b,u,h]}(void 0===d?i:d,n,[this._trackerConfig.inWidth,this._trackerConfig.inHeight],t==uF.Detected||this._fastMvt?null:this._simCropToImage,this._config.normMode):o==NF.Hand?this._simCropToImage=function(e,t,r,n,o){var a=e.length/2,i=nF(e,t,a),s=Math.max(i[1]-i[0],i[3]-i[2]),p=lF("HAND",e),l=p[0],u=p[1],d=p[2];if(9==a)t[3]&&t[6]&&(l=.5*(e[3]+e[6]),u=.5*(e[3+a]+e[6+a]),t[1]&&(s=2*Math.sqrt(Math.pow(e[1]-l,2)+Math.pow(e[1+a]-l,2))));else{var c=pF("HAND",a),g=c[0],h=c[1],f=new dF(e[g],e[g+a]),m=new dF(e[h],e[h+a]);if(s=5*f.Dist(m),t[0]){var y=new dF(e[0],e[0+a]),b=2*f.Dist(y);s=Math.max(s,b)}l=f.x,u=f.y}var _=Math.cos(d),v=Math.sin(d),w=(s+=.2*s)/Math.max(r[0],r[1]),k=r[1]/2,T=r[0]/2,O=l-(_*w*k-v*w*T),x=u-(v*w*k+_*w*T);if(null!=n){var S=.9;O=S*O+(1-S)*n[2],x=S*x+(1-S)*n[5],w=.3*w+.7*n[7],Math.abs(d-n[6])<1&&(d=.3*d+.7*n[6]),_=Math.cos(d),v=Math.sin(d)}return[_*w,-v*w,O,v*w,_*w,x,d,w]}(void 0===d?i:d,n,[this._trackerConfig.inWidth,this._trackerConfig.inHeight],t==uF.Detected||this._fastMvt?null:this._simCropToImage,this._config.normMode):this._simCropToImage=function(e,t,r,n,o,a){var i,s,p=e.length/2;void 0===a&&((i=lF(o,e))[0],i[1],a=i[2]),s=rF(e,p);var l=Math.cos(a),u=Math.sin(a),d=Math.sqrt((s[1]-s[0])*(s[1]-s[0])+(s[3]-s[2])*(s[3]-s[2])),c=.3;"NECKLACE"==o&&(c=.5),"MARTEL-BOTTLE"==o&&(c=.2),"EQA"==o&&(c=.2),"BARTENDER"==o&&(c=.2);var g=(d+=c*d)/Math.max(r,t),h=(t-1)/2,f=(r-1)/2,m=(s[0]+s[1])/2-(l*g*h-u*g*f),y=(s[2]+s[3])/2-(u*g*h+l*g*f);if(null!=n){if("NECKLACE"==o){var b=.9;m=b*m+(1-b)*n[2],y=b*y+(1-b)*n[5],g=.3*g+.7*n[7],Math.abs(a-n[6])<1&&(a=.3*a+.7*n[6])}else{var _=Math.sqrt((m-n[2])*(m-n[2])+(y-n[5])*(y-n[5])),v=1;_>20&&(v=.1),_>=10&&_<=20&&(v=1-.09*(_-5)),m=(1-v)*m+v*n[2],y=(1-v)*y+v*n[5],a=Math.abs(a-n[6])>1?(1-v)*a-v*n[6]:(1-v)*a+v*n[6],g=(1-v)*g+v*n[7]}l=Math.cos(a),u=Math.sin(a)}return[l*g,-u*g,m,u*g,l*g,y,a,g]}(void 0===d?i:d,this._trackerConfig.inWidth,this._trackerConfig.inHeight,t==uF.Detected||this._fastMvt?null:this._simCropToImage,o,u);var _=new ImageData(this._trackerConfig.inWidth,this._trackerConfig.inHeight);_=function(e,t,r){for(var n=r[0],o=r[1],a=r[2],i=r[3],s=r[4],p=r[5],l=e.width,u=e.height,d=4*e.width,c=t.width,g=t.height,h=4*t.width,f=0;f<g;f++)for(var m=o*f+a,y=s*f+p,b=f*h,_=0;_<c;_++){var v=4*_,w=Math.floor(m),k=Math.floor(y),T=m-w,O=y-k,x=void 0,S=void 0;if(w>0&&w<l-1&&k>0&&k<u-1){for(var E=k*d+4*w,F=0;F<3;F++,E++){var M=e.data[E];x=M+T*(e.data[E+4]-M),S=e.data[E+d]+T*(e.data[E+d+4]-e.data[E+d]),t.data[b+v+F]=x+O*(S-x)}t.data[b+v+3]=255}else{for(F=0;F<3;F++)t.data[b+v+F]=0;t.data[b+v+3]=255}m+=n,y+=i}return t}(e,_,this._simCropToImage),this._debug&&(this._debugInitialized=!0,this._debugImage=_,iF(this._trackerConfig.inHeight,this._trackerConfig.inWidth,4,_));var v=function(e,t,r,n,o,a,i,s){for(var p=[],l=[],u=[],d=[],c=0,g=null,h=0,f=i;h<f.length;h++){var m=Gs(f[h]);d.push(m);var y=ws(m,"float32");d.push(y);var b=Np(y,[1,t.inHeight,t.inWidth,3]);d.push(b);var _=Ul(255),v=lp(b,_);d.push(v),s[c]&&(v=Od(v,1),d.push(v)),g?(g=Wp([g,v]),d.push(g)):g=v,c+=1}if(null!=g){var w=[];if(t.numOutputs&&1!=t.numOutputs)for(var k=0,T=w=e.predict(g);k<T.length;k++){var O=T[k];d.push(O)}else{var x=e.predict(g);d.push(x),w.push(x)}for(var S=0,E=0,F=w;E<F.length;E++){x=F[E];for(var M=[],R=[],C=0,I=oc(x,0);C<I.length;C++){var A=I[C];d.push(A);var B=Jl(A,0);d.push(B),M.push(A.dataSync()),R.push(B.shape)}if(t.outputNames&&"heatmaps"!=t.outputNames[S]){if(t.outputNames&&"coordinates"==t.outputNames[S])for(U=0;U<M.length;U++){for(var D=R[U][1]/2,L=new Float32Array(2*D),N=t.inHeight/2,P=t.inWidth/2,j=0;j<D;j++)L[j]=(M[U][j]+1)*P,L[j+D]=(M[U][j+D]+1)*N;p.push(L)}else if(t.outputNames&&"scores"==t.outputNames[S])for(U=0;U<M.length;U++){var G=R[U][1],W=new Float32Array(G);for(j=0;j<G;j++)W[j]=1/(1+Math.exp(-M[U][j]));l.push(W)}else if(t.outputNames&&"occlusions"==t.outputNames[S])for(U=0;U<M.length;U++){G=R[U][1];var z=new Float32Array(G);for(j=0;j<G;j++)z[j]=1/(1+Math.exp(-M[U][j]));u.push(z)}}else for(var U=0;U<M.length;U++){var $;$=r?CF(r,R[U],M[U],n[U],o[U],a[U]):RF(M[U],R[U],!0),p.push($[0]),l.push($[1])}S+=1}}return d.forEach((function(e){return e.dispose()})),{coordinates:p,scores:l,occlusions:u}}(this._tfKeypointsTracker,this._trackerConfig,this._poseModule,[this._bufferHeatmaps],[this._bufferKeypsTrack],[this._bufferFeatureScores],[_],[this._mirrored]),w=sF(v.coordinates[0],this._simCropToImage,this._mirrored,this._trackerConfig.outHeight);if(t!=uF.Detected){var k=aF(v.scores[0],this._config.validTrackedKeypThs);if(o==NF.Face&&!this._nonRigidInitialized){var T=this._pose.project(this._keypsVts,DF.getCameraMat(this._config.fovY,this._currentWidth,this._currentHeight)),O=w.length/2;for(h=0;h<O;h++)0==k[h]&&(k[h]=1,w[h]=T[2*h],w[h+O]=T[2*h+1])}w=hF(w,k,i,n,.1)}return{imageFilteredKeyps:w,cropKeyps:v.coordinates[0],scores:v.scores[0]}},e.prototype.computePoseSync=function(e,t){return this._nonRigidInitialized&&(zF(t)||t==NF.Wrist||t==NF.Face)?this.computeNonRigidPoseSync(e,t):this.computeRigidPoseSync(e,t)},e.prototype.computeRigidPoseSync=function(e,t){var r=this,n=-1,o=this._poseModule.cwrap("xzimgEstimateRigidPose","number",["number","number","number","number","number","number","number","number","number","number","number","number"]);if(e==uF.Detection){var a=0,i=0,s=t==NF.Necklace?3:0,p=1,l=[1,0,0,0,1,0],u=(c=this._poseModule._malloc(6*this._float_size))/4,d=this._poseModule.HEAPF32.subarray(u,u+6);return this._trackHasHeatmaps?d.set(this._simCropToImage.slice(0,6)):d.set(l),n=o(this._bufferHeatmaps,this._detectorOutDims[1],this._detectorOutDims[2],this._detectorOutDims[3],a,c,this._bufferKeypsDet,this._mirrored?this._bufMirroredKeyps3D:this._bufKeyps3D,i,s,p,this._bufInOutPose),this._pose=new DF(new Float32Array(this._poseModule.HEAPF32.buffer,this._bufInOutPose,9),new Float32Array(this._poseModule.HEAPF32.buffer,this._bufInOutPose+9*this._float_size,3)),n}if(e==uF.Detected||e==uF.Tracking){a=0,i=e!=uF.Tracking||this._resetPose?0:1,this._resetPose=!1,s=t==NF.Hand||t==NF.Necklace||t==NF.Lamborghini?3:1,p=t==NF.Hand||t==NF.Necklace||t==NF.Lamborghini?3:1,u=(c=this._poseModule._malloc(6*this._float_size))/4;var c,g=this._poseModule.HEAPF32.subarray(u,u+6);this._trackHasHeatmaps&&3==s?g.set(this._simCropToImage.slice(0,6)):(l=[1,0,0,0,1,0],g.set(l));var h=null,f=null,m=new Float32Array(2*this._activeIds.length),y=new Float32Array(3*this._activeIds.length),b=this._keyps2D.length/2;this._activeIds.length>0?(this._activeIds.forEach((function(e,t){m[t]=r._keyps2D[e],m[t+r._activeIds.length]=r._keyps2D[e+b]})),u=(h=this._poseModule._malloc(this._activeIds.length*this._float_size*2))/4,(g=this._poseModule.HEAPF32.subarray(u,u+2*this._activeIds.length)).set(m),this._activeIds.forEach((function(e,t){y[3*t]=r._keypsVts[3*e],r._mirrored&&(y[3*t]=-y[3*t]),y[3*t+1]=r._keypsVts[3*e+1],y[3*t+2]=r._keypsVts[3*e+2]})),u=(f=this._poseModule._malloc(this._activeIds.length*this._float_size*3))/4,(g=this._poseModule.HEAPF32.subarray(u,u+3*this._activeIds.length)).set(y),b=this._activeIds.length):(u=(h=this._poseModule._malloc(this._keyps2D.length*this._float_size))/4,(g=this._poseModule.HEAPF32.subarray(u,u+this._keyps2D.length)).set(this._keyps2D),2!=s&&3!=s||g.set(this._cropKeyps2D),f=this._mirrored?this._bufMirroredKeyps3D:this._bufKeyps3D),n=o(2==s||3==s?this._bufferHeatmaps:null,this._trackerOutDims[1],this._trackerOutDims[2],b,a,c,h,f,i,s,p,this._bufInOutPose);var _=new Float32Array(this._poseModule.HEAPF32.buffer,this._bufInOutPose,9),v=new Float32Array(this._poseModule.HEAPF32.buffer,this._bufInOutPose+9*this._float_size,3);this._pose=new DF(_,v);var w=this._pose.project(this._keypsVts,DF.getCameraMat(this._config.fovY,this._currentWidth,this._currentHeight));this._reprojKeyps2D=new Float32Array(w.length);for(var k=0;k<w.length/2;k++)this._reprojKeyps2D[k]=w[2*k],this._reprojKeyps2D[k+this._reprojKeyps2D.length/2]=w[2*k+1];if(t==NF.Necklace){var T=this._pose.getRot();T[5]>.35&&(console.log(T[2],T[5],T[8]),T[2]=0,T[5]=0,T[8]=-1,this._pose.updateRotation(T))}return this._keyps3D=this._pose.transform(this._keypsVts),h&&this._poseModule._free(h),f&&this._activeIds.length>0&&this._poseModule._free(f),c&&this._poseModule._free(c),n}return-1},e.prototype.computeNonRigidPoseSync=function(e,t){var r;r=zF(t)?this._poseModule.cwrap("xzimgEstimateBodyNonRigidPose","number",["number","number","number","number","number","number","number","number","number","number","number"]):this._poseModule.cwrap("xzimgEstimateNonRigidPoseBase","number",["number","number","number","number","number","number","number","number","number","number","number"]);var n,o=e==uF.Detected?1:0,a=this._trackerOutDims[3],i=(n=this._poseModule._malloc(this._keyps2D.length*this._float_size))/4;this._poseModule.HEAPF32.subarray(i,i+this._keyps2D.length).set(this._keyps2D);var s=this._poseModule._malloc(a*this._int_size),p=s/4;this._poseModule.HEAPF32.subarray(p,p+a).set(this._visibility),null==this._bufKeyps3D&&(this._bufKeyps3D=this._poseModule._malloc(a*this._float_size*3));var l=1e3;t==NF.Face&&(l=10),t==NF.Wrist&&(l=100);var u=r(o,n,a,s,1,l,this._config.reprojThs,.5,.75,.95,this._bufInOutPose,this._bufKeyps3D),d=new Float32Array(this._poseModule.HEAPF32.buffer,this._bufInOutPose,9),c=new Float32Array(this._poseModule.HEAPF32.buffer,this._bufInOutPose+9*this._float_size,3);this._pose=new DF(d,c),this._keyps3D=new Float32Array(this._poseModule.HEAPF32.buffer,this._bufKeyps3D,3*a),this._poseModule._free(n),this._poseModule._free(s);var g=this._poseModule.cwrap("xzimgEstimateGetNumVertices","number"),h=this._poseModule.cwrap("xzimgEstimateGetDenseVertices","number"),f=g();return f>0&&(null==this._bufDenseVertices3D&&(this._bufDenseVertices3D=this._poseModule._malloc(f*this._float_size*3)),h(this._bufDenseVertices3D),this._denseVertices=new Float32Array(this._poseModule.HEAPF32.buffer,this._bufDenseVertices3D,3*f)),u},e}(),HF=__webpack_require__(92),VF=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{p(n.next(e))}catch(e){a(e)}}function s(e){try{p(n.throw(e))}catch(e){a(e)}}function p(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}p((n=n.apply(e,t||[])).next())}))},KF=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(p){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,p])}}},YF={isRecording:!1,muxer:null,videoEncoder:null,audioEncoder:null,audioTrack:null};function XF(e,t,r){return VF(this,void 0,void 0,(function(){var n,o,a,i,s,p,l,u,d,c,g,h,f;return KF(this,(function(m){switch(m.label){case 0:if(!("VideoEncoder"in window))throw new Error("VideoEncoder API not available in this browser.");if("undefined"==typeof AudioEncoder&&r.audioTrack)throw new Error("Audio can't be recorded because AudioEncoder is not supported. Turn off audio recording and try again.");return n=e.width,o=e.height,a=960,n>o?(i=1,n>a&&(i=a/n,n=a,o=Math.round(o*i))):o>n&&(i=1,o>a&&(i=a/o,o=a,n=Math.round(n*i))),n=n%2==0?n:n-1,o=o%2==0?o:o-1,YF.audioTrack=r.audioTrack,YF.muxer=new HF.Muxer({target:new HF.ArrayBufferTarget,video:{codec:"avc",width:n,height:o},audio:YF.audioTrack?{codec:"aac",sampleRate:r.audioSampleRate,numberOfChannels:1}:void 0,firstTimestampBehavior:"offset"}),YF.audioTrack&&(YF.audioEncoder=new AudioEncoder({output:function(e,t){return YF.muxer.addAudioChunk(e,t)},error:function(e){return console.error(e)}}),s={codec:"mp4a.40.2",numberOfChannels:1,sampleRate:r.audioSampleRate,bitrate:r.audioBitRate},YF.audioEncoder.configure(s),p=new MediaStreamTrackProcessor({track:YF.audioTrack}),l=new WritableStream({write:function(e){YF.isRecording&&(YF.audioEncoder.encode(e),e.close())}}),p.readable.pipeTo(l)),u={error:function(e){console.error(e)},output:function(e,t){YF.muxer.addVideoChunk(e,t)}},d={codec:"avc1.4d002a",width:n,height:o,bitrate:r.videoBitRate,framerate:r.videoFrameRate},[4,VideoEncoder.isConfigSupported(d)];case 1:if(!m.sent().supported)throw console.log("config:"),console.log(d),new Error("Encoder config not supported.");return YF.videoEncoder=new VideoEncoder(u),YF.videoEncoder.configure(d),console.log("Video resolution will be ".concat(n,"x").concat(o,".")),c=performance.now(),g=e,h=0,f=0,YF.isRecording=!0,t.__deeparRendered2=function(){var e=performance.now(),t=e-c;if(c=e,YF.isRecording){var r=f+1e3*t,n=new VideoFrame(g,{timestamp:r});h++,f=r;var o=h%300==0;YF.videoEncoder.encode(n,{keyFrame:o}),n.close()}},[2]}}))}))}function qF(e){var t;return VF(this,void 0,void 0,(function(){var r;return KF(this,(function(n){switch(n.label){case 0:if(!YF.isRecording)throw new Error("Cannot finish video recording because recording was not started!");return YF.isRecording=!1,null===(t=YF.audioTrack)||void 0===t||t.stop(),[4,YF.videoEncoder.flush()];case 1:return n.sent(),YF.audioEncoder?[4,YF.audioEncoder.flush()]:[3,3];case 2:n.sent(),n.label=3;case 3:return YF.muxer.finalize(),e.__deeparRendered2=void 0,r=new Blob([YF.muxer.target.buffer],{type:"video/mp4"}),YF.muxer=null,YF.videoEncoder=null,YF.audioEncoder=null,YF.audioTrack=null,[2,r]}}))}))}var JF={isRecording:!1,mediaRecorder:null,chunks:[],mimeType:""};function QF(){if(!JF.isRecording)throw new Error("Video recording not started!");return new Promise((function(e){JF.mediaRecorder.onstop=function(t){e(new Blob(JF.chunks,{type:JF.mimeType})),JF.chunks=[],JF.isRecording=!1},JF.mediaRecorder.stop()}))}var ZF,eM,tM=__webpack_require__(795),rM=(ZF=function(e,t){return ZF=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},ZF(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}ZF(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),nM=function(e){function t(t){var r=e.call(this,t)||this;return r.name="SwitchEffectCanceled",r}return rM(t,e),t}(Error);!function(e){e[e.Bool=0]="Bool",e[e.Int=1]="Int",e[e.Double=2]="Double",e[e.String=3]="String"}(eM||(eM={}));var oM,aM=function(){function e(e){this.module=e}return e.prototype.hasVar=function(e,t){return this.module.hasVar(e,t)},e.prototype.getVarType=function(e,t){return this.module.getVarType(e,t)},e.prototype.getBoolVar=function(e,t){return this.module.getBoolVar(e,t)},e.prototype.getIntVar=function(e,t){return this.module.getIntVar(e,t)},e.prototype.getDoubleVar=function(e,t){return this.module.getDoubleVar(e,t)},e.prototype.getStringVar=function(e,t){return void 0===t&&(t=0),this.module.getStringVar(e,t)},e.prototype.setBoolVar=function(e,t,r){return this.module.setBoolVar(e,t,r)},e.prototype.setIntVar=function(e,t,r){return this.module.setIntVar(e,t,r)},e.prototype.setDoubleVar=function(e,t,r){return this.module.setDoubleVar(e,t,r)},e.prototype.setStringVar=function(e,t,r){return this.module.setStringVar(e,t,r)},e.prototype.deleteVar=function(e,t){return this.module.deleteVar(e,t)},e.prototype.clearVars=function(e){return this.module.clearVars(e)},e}(),iM=__webpack_require__(203);function sM(e,t,r,n){e.width=t*n,e.height=r*n}var pM,lM=function(){var e=parseFloat(oM.computedStyle.width||"0"),t=parseFloat(oM.computedStyle.height||"0"),r=window.devicePixelRatio;e===oM.cssWidth&&t===oM.cssHeight&&r===oM.devicePixelRatio||(oM.cssWidth=e,oM.cssHeight=t,oM.devicePixelRatio=r,sM(oM.canvas,e,t,r))},uM=function(){oM.canvas.style.width="100%",oM.canvas.style.height="100%"};!function(e){e[e.Start=0]="Start",e[e.Move=1]="Move",e[e.End=2]="End"}(pM||(pM={}));var dM,cM=function(){function e(e,t){var r=this;this.canvasListeners=[],this.touchOccurring=!1,this.touchListeners=[],this.canvas=e,this.touchListeners.push(t),this.registerCanvasListener("mousedown",(function(e){r.touchOccurring||(r.touchOccurred(r.touchInfo(e,pM.Start)),r.touchOccurring=!0)})),this.registerCanvasListener("touchstart",(function(e){r.touchOccurring||(r.touchOccurred(r.touchInfo(e,pM.Start)),r.touchOccurring=!0)})),this.registerCanvasListener("mousemove",(function(e){r.touchOccurring&&r.touchOccurred(r.touchInfo(e,pM.Move))})),this.registerCanvasListener("touchmove",(function(e){r.touchOccurring&&(e.preventDefault(),r.touchOccurred(r.touchInfo(e,pM.Move)))})),this.registerCanvasListener("mouseup",(function(e){r.touchOccurring&&(r.touchOccurred(r.touchInfo(e,pM.End)),r.touchOccurring=!1)})),this.registerCanvasListener("mouseout",(function(e){r.touchOccurring&&(r.touchOccurred(r.touchInfo(e,pM.End)),r.touchOccurring=!1)})),this.registerCanvasListener("touchend",(function(e){r.touchOccurring&&(r.touchOccurred(r.touchInfo(e,pM.End)),r.touchOccurring=!1)}))}return e.prototype.cleanUpCanvasListeners=function(){var e=this;this.canvasListeners.forEach((function(t){var r=t.type,n=t.listener;e.canvas.removeEventListener(r,n)})),this.canvasListeners=[]},e.prototype.addTouchListener=function(e){this.touchListeners.push(e)},e.prototype.touchOccurred=function(e){for(var t=0,r=this.touchListeners;t<r.length;t++)(0,r[t])(e)},e.prototype.registerCanvasListener=function(e,t){this.canvas.addEventListener(e,t),this.canvasListeners.push({type:e,listener:t})},e.prototype.touchInfo=function(e,t){var r=this.canvas.getBoundingClientRect(),n=this.canvas.width/r.width,o=this.canvas.height/r.height;return e instanceof MouseEvent?{x:(e.clientX-r.left)*n,y:(e.clientY-r.top)*o,touchType:t}:{x:(e.touches[0].clientX-r.left)*n,y:(e.touches[0].clientY-r.top)*o,touchType:t}},e}(),gM=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{p(n.next(e))}catch(e){a(e)}}function s(e){try{p(n.throw(e))}catch(e){a(e)}}function p(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}p((n=n.apply(e,t||[])).next())}))},hM=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(p){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,p])}}},fM="https://cdn.jsdelivr.net/npm/deepar@".concat(r,"/"),mM={video:{facingMode:"user",frameRate:{ideal:30},width:{ideal:640},height:{ideal:360}}},yM="DEFAULT_SLOT";function bM(e){var t,r,n,o,a,i,s,p,l;return l={modelPath:null,mediaPipeConfig:{wasmBasePath:null,modelPath:null}},e.rootPath&&(l.modelPath=e.rootPath+"models/segmentation/segmentation-160x160-opt.bin",l.mediaPipeConfig.modelPath=e.rootPath+"mediaPipe/segmentation/models/selfie_segmenter.tflite",l.mediaPipeConfig.wasmBasePath=e.rootPath+"mediaPipe/segmentation/wasm"),(null===(r=null===(t=null==e?void 0:e.additionalOptions)||void 0===t?void 0:t.segmentationConfig)||void 0===r?void 0:r.modelPath)&&(l.modelPath=e.additionalOptions.segmentationConfig.modelPath),(null===(a=null===(o=null===(n=null==e?void 0:e.additionalOptions)||void 0===n?void 0:n.segmentationConfig)||void 0===o?void 0:o.mediaPipeConfig)||void 0===a?void 0:a.modelPath)&&(l.mediaPipeConfig.modelPath=e.additionalOptions.segmentationConfig.mediaPipeConfig.modelPath),(null===(p=null===(s=null===(i=null==e?void 0:e.additionalOptions)||void 0===i?void 0:i.segmentationConfig)||void 0===s?void 0:s.mediaPipeConfig)||void 0===p?void 0:p.wasmBasePath)&&(l.mediaPipeConfig.wasmBasePath=e.additionalOptions.segmentationConfig.mediaPipeConfig.wasmBasePath),l}function _M(e){return e.additionalOptions&&e.additionalOptions.faceTrackingConfig&&e.additionalOptions.faceTrackingConfig.modelPath?e.additionalOptions.faceTrackingConfig.modelPath:e.rootPath?e.rootPath+"models/face/models-68-extreme.bin":null}function vM(e){var t={poseEstimationWasmPath:"",detectorPath:"",trackerPath:"",tfjsBackendWasmPath:"",tfjsBackendWasmSimdPath:"",tfjsBackendWasmThreadedSimdPath:""};return e.rootPath&&(t.poseEstimationWasmPath=e.rootPath+"wasm/libxzimgPoseEstimation.wasm",t.detectorPath=e.rootPath+"models/face-cnn/face-det.bin",t.trackerPath=e.rootPath+"models/face-cnn/face-track-19.bin",t.tfjsBackendWasmPath=e.rootPath+"wasm/tfjs-backend-wasm.wasm",t.tfjsBackendWasmSimdPath=e.rootPath+"wasm/tfjs-backend-wasm-simd.wasm",t.tfjsBackendWasmThreadedSimdPath=e.rootPath+"wasm/tfjs-backend-wasm-threaded-simd.wasm"),e.additionalOptions&&e.additionalOptions.rigidFaceTrackingConfig&&(e.additionalOptions.rigidFaceTrackingConfig.poseEstimationWasmPath&&(t.poseEstimationWasmPath=e.additionalOptions.rigidFaceTrackingConfig.poseEstimationWasmPath),e.additionalOptions.rigidFaceTrackingConfig.detectorPath&&(t.detectorPath=e.additionalOptions.rigidFaceTrackingConfig.detectorPath),e.additionalOptions.rigidFaceTrackingConfig.trackerPath&&(t.trackerPath=e.additionalOptions.rigidFaceTrackingConfig.trackerPath),e.additionalOptions.rigidFaceTrackingConfig.tfjsBackendWasmPath&&(t.tfjsBackendWasmPath=e.additionalOptions.rigidFaceTrackingConfig.tfjsBackendWasmPath),e.additionalOptions.rigidFaceTrackingConfig.tfjsBackendWasmSimdPath&&(t.tfjsBackendWasmSimdPath=e.additionalOptions.rigidFaceTrackingConfig.tfjsBackendWasmSimdPath),e.additionalOptions.rigidFaceTrackingConfig.tfjsBackendWasmThreadedSimdPath&&(t.tfjsBackendWasmThreadedSimdPath=e.additionalOptions.rigidFaceTrackingConfig.tfjsBackendWasmThreadedSimdPath)),t}function wM(e){var t={poseEstimationWasmPath:"",detectorPath:"",trackerPath:"",objPath:"",tfjsBackendWasmPath:"",tfjsBackendWasmSimdPath:"",tfjsBackendWasmThreadedSimdPath:""};return e.rootPath&&(t.poseEstimationWasmPath=e.rootPath+"wasm/libxzimgPoseEstimation.wasm",t.objPath=e.rootPath+"models/foot/foot-model.obj",t.detectorPath=e.rootPath+"models/foot/foot-detection-96x96x6.bin",t.trackerPath=e.rootPath+"models/foot/foot-tracker-96x96x18-test.bin",t.tfjsBackendWasmPath=e.rootPath+"wasm/tfjs-backend-wasm.wasm",t.tfjsBackendWasmSimdPath=e.rootPath+"wasm/tfjs-backend-wasm-simd.wasm",t.tfjsBackendWasmThreadedSimdPath=e.rootPath+"wasm/tfjs-backend-wasm-threaded-simd.wasm"),e.additionalOptions&&e.additionalOptions.footTrackingConfig&&(e.additionalOptions.footTrackingConfig.poseEstimationWasmPath&&(t.poseEstimationWasmPath=e.additionalOptions.footTrackingConfig.poseEstimationWasmPath),e.additionalOptions.footTrackingConfig.detectorPath&&(t.detectorPath=e.additionalOptions.footTrackingConfig.detectorPath),e.additionalOptions.footTrackingConfig.trackerPath&&(t.trackerPath=e.additionalOptions.footTrackingConfig.trackerPath),e.additionalOptions.footTrackingConfig.objPath&&(t.objPath=e.additionalOptions.footTrackingConfig.objPath),e.additionalOptions.footTrackingConfig.tfjsBackendWasmPath&&(t.tfjsBackendWasmPath=e.additionalOptions.footTrackingConfig.tfjsBackendWasmPath),e.additionalOptions.footTrackingConfig.tfjsBackendWasmSimdPath&&(t.tfjsBackendWasmSimdPath=e.additionalOptions.footTrackingConfig.tfjsBackendWasmSimdPath),e.additionalOptions.footTrackingConfig.tfjsBackendWasmThreadedSimdPath&&(t.tfjsBackendWasmThreadedSimdPath=e.additionalOptions.footTrackingConfig.tfjsBackendWasmThreadedSimdPath)),t}function kM(e){var t={poseEstimationWasmPath:"",detectorPath:"",trackerPath:"",objPath:"",tfjsBackendWasmPath:"",tfjsBackendWasmSimdPath:"",tfjsBackendWasmThreadedSimdPath:""};return e.rootPath&&(t.poseEstimationWasmPath=e.rootPath+"wasm/libxzimgPoseEstimation.wasm",t.objPath=e.rootPath+"models/wrist/wrist-base-2.obj",t.detectorPath=e.rootPath+"models/wrist/wrist-det-9.bin",t.trackerPath=e.rootPath+"models/wrist/wrist-track.bin",t.tfjsBackendWasmPath=e.rootPath+"wasm/tfjs-backend-wasm.wasm",t.tfjsBackendWasmSimdPath=e.rootPath+"wasm/tfjs-backend-wasm-simd.wasm",t.tfjsBackendWasmThreadedSimdPath=e.rootPath+"wasm/tfjs-backend-wasm-threaded-simd.wasm"),e.additionalOptions&&e.additionalOptions.wristTrackingConfig&&(e.additionalOptions.footTrackingConfig.poseEstimationWasmPath&&(t.poseEstimationWasmPath=e.additionalOptions.footTrackingConfig.poseEstimationWasmPath),e.additionalOptions.wristTrackingConfig.poseEstimationWasmPath&&(t.poseEstimationWasmPath=e.additionalOptions.wristTrackingConfig.poseEstimationWasmPath),e.additionalOptions.wristTrackingConfig.detectorPath&&(t.detectorPath=e.additionalOptions.wristTrackingConfig.detectorPath),e.additionalOptions.wristTrackingConfig.trackerPath&&(t.trackerPath=e.additionalOptions.wristTrackingConfig.trackerPath),e.additionalOptions.wristTrackingConfig.objPath&&(t.objPath=e.additionalOptions.wristTrackingConfig.objPath),e.additionalOptions.footTrackingConfig.tfjsBackendWasmPath&&(t.tfjsBackendWasmPath=e.additionalOptions.footTrackingConfig.tfjsBackendWasmPath),e.additionalOptions.wristTrackingConfig.tfjsBackendWasmPath&&(t.tfjsBackendWasmPath=e.additionalOptions.wristTrackingConfig.tfjsBackendWasmPath),e.additionalOptions.footTrackingConfig.tfjsBackendWasmSimdPath&&(t.tfjsBackendWasmSimdPath=e.additionalOptions.footTrackingConfig.tfjsBackendWasmSimdPath),e.additionalOptions.wristTrackingConfig.tfjsBackendWasmSimdPath&&(t.tfjsBackendWasmSimdPath=e.additionalOptions.wristTrackingConfig.tfjsBackendWasmSimdPath),e.additionalOptions.footTrackingConfig.tfjsBackendWasmThreadedSimdPath&&(t.tfjsBackendWasmThreadedSimdPath=e.additionalOptions.footTrackingConfig.tfjsBackendWasmThreadedSimdPath),e.additionalOptions.wristTrackingConfig.tfjsBackendWasmThreadedSimdPath&&(t.tfjsBackendWasmThreadedSimdPath=e.additionalOptions.wristTrackingConfig.tfjsBackendWasmThreadedSimdPath)),t}function TM(e){var t={backgroundBlurPath:"",backgroundReplacementPath:""};return e.rootPath&&(t.backgroundBlurPath=e.rootPath+"effects/background_blur.deepar",t.backgroundReplacementPath=e.rootPath+"effects/background_replacement.deepar"),t}function OM(e,t){return!(!e.additionalOptions||!e.additionalOptions.hint)&&("string"==typeof e.additionalOptions.hint?e.additionalOptions.hint===t:!!Array.isArray(e.additionalOptions.hint)&&e.additionalOptions.hint.some((function(e){return e===t})))}function xM(){return"mediaDevices"in navigator&&"getUserMedia"in navigator.mediaDevices}var SM=!1;function EM(t){var r,n,a;return gM(this,void 0,void 0,(function(){var i,s,p,l,d,c,g,h,f,m,y,b=this;return hM(this,(function(_){switch(_.label){case 0:if(SM)throw new Error("DeepAR is already initialized. You cannot have multiple instances of DeepAR object. Call DeepAR.shutdown() first.");if(t.licenseKey){if("string"!=typeof t.licenseKey)throw new Error("Given licenseKey parameter is not a string.")}else{if(!t.licenceKey)throw new Error("No licenseKey parameter is passed in. You need to se the licenseKey string.");if("string"!=typeof t.licenceKey)throw new Error("Given licenseKey parameter is not a string.");t.licenseKey=t.licenceKey}if(!t.canvas&&!t.previewElement)throw new Error("No previewElement or canvas provided.");if(t.canvas&&t.previewElement)throw new Error("previewElement and canvas cannot be both provided at the same time. Use one or the other. previewElement is preferred.");if(t.canvas){if(!(t.canvas instanceof HTMLCanvasElement))throw new Error("The provided previewElement parameter is not a valid HTMLElement object. Please ensure you're passing an instance of an HTMLElement, such as a <div>, <span>, <p>, <a>, etc.")}else{if(!(t.previewElement instanceof HTMLElement))throw new Error("The given previewElement parameter is not an HTMLElement object.");t.canvas=function(e){if(oM)throw new Error("Canvas is already created. Call invalidate() first.");var t=document.createElement("canvas");t.style.display="block",t.style.maxWidth="100%",t.style.maxHeight="100%";var r=getComputedStyle(e);return sM(t,(oM={computedStyle:r,cssWidth:parseFloat(r.width||"0"),cssHeight:parseFloat(r.height||"0"),devicePixelRatio:window.devicePixelRatio||1,previewElement:e,canvas:t}).cssWidth,oM.cssHeight,oM.devicePixelRatio),e.append(t),t}(t.previewElement)}if(t.rootPath=(v=t.rootPath)?v.endsWith("/")?v:v+"/":fM,t.rootPath!=fM&&console.warn("Using non-default root path (".concat(t.rootPath,"). Root path is used to fetch additional DeepAR files like ML models for face tracking. Root path must be the root directory of a DeepAR SDK downloaded from the https://developer.deepar.ai/downloads. The file structure must not be changed! It is also important that the version of the root path SDK and version of the running DeepAR SDK are the same.")),i={licenseKey:t.licenseKey,canvasWidth:t.canvas.width,canvasHeight:t.canvas.height,canvas:t.canvas,faceTrackingModelPath:_M(t),segmentationConfig:bM(t),rigidFaceTrackingConfig:vM(t),footTrackingConfig:wM(t),wristTrackingConfig:kM(t),embeddedEffectConfig:TM(t),apiObject:{onInitialize:function(){}},initializeML:{faceModelsPredownload:OM(t,"faceModelsPredownload"),segmentationModelsPredownload:OM(t,"segmentationModelsPredownload"),footModelsPredownload:OM(t,"footModelsPredownload"),segmentationInit:OM(t,"segmentationInit"),footInit:OM(t,"footInit"),rigidFaceInit:OM(t,"rigidFaceTrackingInit"),useXzimgWebSegmentation:OM(t,"useXzimgWebSegmentation")},xzimg:{Segmentation:_O,VideoManager:u,Foot:jF,Geometry:$F},mediaPipe:{FilesetResolver:iM.n,ImageSegmenter:iM.cW},customErrors:e,locateFile:function(e,r){return t.additionalOptions&&t.additionalOptions.deeparWasmPath?t.additionalOptions.deeparWasmPath:t.rootPath?t.rootPath+"wasm/deepar.wasm":r+e}},s=!0,p=mM,l=!0,t.additionalOptions&&t.additionalOptions.cameraConfig&&(t.additionalOptions.cameraConfig.disableDefaultCamera&&(l=!1),t.additionalOptions.cameraConfig.facingMode&&"environment"==t.additionalOptions.cameraConfig.facingMode&&(p.video.facingMode="environment",s=!1)),l){if(!xM())throw new Error("No camera available!");null===(a=null===(n=null===(r=null==t?void 0:t.additionalOptions)||void 0===r?void 0:r.cameraConfig)||void 0===n?void 0:n.cameraPermissionAsked)||void 0===a||a.call(n),d=navigator.mediaDevices.getUserMedia(p)}return c=!1,t.effect&&(c=!0,g=fetch(t.effect)),[4,o(i)];case 1:if((h=_.sent()).initializeDeepAR(),SM=!0,h.startLoop(),t.previewElement&&(h.addPreRenderListener(lM),h.addPostRenderListener(uM)),f=new FM(h),m=[],l&&m.push(gM(b,void 0,void 0,(function(){var e,r,n,o;return hM(this,(function(a){switch(a.label){case 0:return(dM=document.createElement("video")).setAttribute("playsinline","playsinline"),e=dM,[4,d];case 1:return e.srcObject=a.sent(),null===(o=null===(n=null===(r=null==t?void 0:t.additionalOptions)||void 0===r?void 0:r.cameraConfig)||void 0===n?void 0:n.cameraPermissionGranted)||void 0===o||o.call(n),[2,new Promise((function(e){dM.onloadedmetadata=function(){dM.play().then((function(){h.setVideoElement(dM,s),e()}))}}))]}}))}))),c&&m.push(gM(b,void 0,void 0,(function(){var e,r,n;return hM(this,(function(o){switch(o.label){case 0:return[4,g];case 1:if((e=o.sent()).ok)return[3,2];throw new Error("Failed to fetch ".concat(t.effect,". HTTP status: ").concat(e.status," (").concat(e.statusText,")."));case 2:return n=(r=f).switchEffect,[4,e.arrayBuffer()];case 3:return[4,n.apply(r,[o.sent()])];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))),!(m.length>0))return[3,5];_.label=2;case 2:return _.trys.push([2,4,,5]),[4,Promise.all(m)];case 3:return _.sent(),[3,5];case 4:throw y=_.sent(),f.shutdown(),y;case 5:return[2,f]}var v}))}))}var FM=function(){function e(e){var t=this;this.module=null,this.callbacks={},e.apiObject=this.callbacks,this.module=e,this.ScriptingAPI=new aM(e),this.canvasTouchHelper=new cM(e.canvas,(function(e){return t.touchOccurred(e)}))}return e.prototype.switchEffect=function(e,t){return gM(this,void 0,void 0,(function(){var r,n,o,a,i,s,p=this;return hM(this,(function(l){switch(l.label){case 0:if(t&&(r="face"in t&&"number"==typeof t.face,n="slot"in t&&"string"==typeof t.slot,r&&!n))throw new Error("Slot is not defined. When using switchEffect with a face parameter, you need to specify the slot also.");if(o=(null==t?void 0:t.face)?t.face:0,a=(null==t?void 0:t.slot)?t.slot:yM,o<0||o>3)throw new Error("Face value is ".concat(o," but should be 0, 1, 2 or 3"));return"string"!=typeof e?[3,3]:[4,fetch(e)];case 1:if(!(s=l.sent()).ok)throw new Error("Failed to fetch ".concat(e,". HTTP status: ").concat(s.status," (").concat(s.statusText,")."));return[4,s.arrayBuffer()];case 2:return i=l.sent(),[3,4];case 3:if(!(e instanceof ArrayBuffer))throw new Error("The first parameter in switchEffect is not string or ArrayBuffer.");i=e,l.label=4;case 4:return[2,new Promise((function(e,t){p.module.switchEffectByteArray(o,a,new Uint8Array(i),e,t)}))]}}))}))},e.prototype.clearEffect=function(e){this.module.clearEffect(e||yM)},e.prototype.takeScreenshot=function(){return gM(this,void 0,void 0,(function(){var e=this;return hM(this,(function(t){return[2,new Promise((function(t){e.module.takeScreenshot(t)}))]}))}))},e.prototype.startVideoRecording=function(e){var t,r,n,o,a,i;return gM(this,void 0,void 0,(function(){var s,p,l;return hM(this,(function(u){switch(u.label){case 0:return s=tM.name.toLowerCase(),(p={recordAudio:null!==(t=null==e?void 0:e.recordAudio)&&void 0!==t&&t,audioTrack:null!==(r=null==e?void 0:e.audioTrack)&&void 0!==r?r:void 0,audioSampleRate:48e3,audioBitRate:null!==(n=null==e?void 0:e.audioBitRate)&&void 0!==n?n:128e3,videoBitRate:null!==(o=null==e?void 0:e.videoBitRate)&&void 0!==o?o:4e6,videoFrameRate:null!==(a=null==e?void 0:e.videoFrameRate)&&void 0!==a?a:30,mimeType:"firefox"===s?"video/webm":"video/mp4"}).audioTrack||!p.recordAudio?[3,2]:[4,navigator.mediaDevices.getUserMedia({video:!1,audio:!0})];case 1:l=u.sent(),p.audioTrack=l.getAudioTracks()[0],u.label=2;case 2:return"firefox"!==s&&(p.audioTrack?p.audioSampleRate=null!==(i=null==e?void 0:e.audioSampleRate)&&void 0!==i?i:p.audioTrack.getCapabilities().sampleRate.max:p.audioSampleRate=void 0),"safari"!==s&&"firefox"!==s&&"iOS"!==tM.os.family?[3,3]:(function(e,t){if(JF.isRecording)throw new Error("Video recording already started!");JF.isRecording=!0,JF.mimeType=t.mimeType;var r={videoBitsPerSecond:t.videoBitRate,mimeType:t.mimeType},n=e.captureStream();t.audioTrack&&(n.addTrack(t.audioTrack),r.audioBitsPerSecond=t.audioBitRate),JF.mediaRecorder=new MediaRecorder(n,r),JF.mediaRecorder.ondataavailable=function(e){JF.chunks.push(e.data)},JF.mediaRecorder.start()}(this.module.canvas,p),[3,5]);case 3:return"Android"===tM.os.family&&p.audioTrack&&console.warn("Sound recording is currently not supported on Android"),[4,XF(this.module.canvas,this.callbacks,p)];case 4:u.sent(),u.label=5;case 5:return[2]}}))}))},e.prototype.finishVideoRecording=function(){return gM(this,void 0,void 0,(function(){var e,t;return hM(this,(function(r){switch(r.label){case 0:return"safari"!==(t=tM.name.toLowerCase())&&"firefox"!==t&&"iOS"!==tM.os.family?[3,2]:[4,QF()];case 1:return e=r.sent(),[3,4];case 2:return[4,qF(this.callbacks)];case 3:e=r.sent(),r.label=4;case 4:return[2,e]}}))}))},e.prototype.backgroundBlur=function(e,t){return gM(this,void 0,void 0,(function(){var r=this;return hM(this,(function(n){if(e&&!t)throw new Error("backgroundBlur expected second argument: blur strength, a integer number in range 1-10");return[2,new Promise((function(n,o){r.module.backgroundBlur(e,t,n,o)}))]}))}))},e.prototype.backgroundReplacement=function(e,t){return gM(this,void 0,void 0,(function(){var r=this;return hM(this,(function(n){if(e&&!t)throw new Error("backgroundReplacement expected second argument: url of the image to be used as the background");return[2,new Promise((function(n,o){r.module.backgroundReplacement(e,t,n,o)}))]}))}))},e.prototype.startCamera=function(e){return gM(this,void 0,void 0,(function(){var t=this;return hM(this,(function(r){if(!xM())throw new Error("No camera available!");return[2,new Promise((function(r,n){var o,a;t.module.startCamera(null===(o=null==e?void 0:e.mirror)||void 0===o||o,null!==(a=null==e?void 0:e.mediaStreamConstraints)&&void 0!==a?a:mM,r,n,null==e?void 0:e.cameraPermissionAsked,null==e?void 0:e.cameraPermissionGranted),t.module.startLoop()}))]}))}))},e.prototype.stopCamera=function(){this.stopVideo()},e.prototype.stopVideo=function(){dM&&(dM.srcObject.getTracks().forEach((function(e){e.stop()})),dM=null),this.module.stopVideo()},e.prototype.setVideoElement=function(e,t){if(!e)throw new Error("No video element provided.");this.stopVideo(),this.module.setVideoElement(e,t),this.module.startLoop()},e.prototype.shutdown=function(){this.canvasTouchHelper.cleanUpCanvasListeners(),this.module.shutdown(),oM&&(oM.canvas.remove(),oM=null),SM=!1,this.module=void 0},e.prototype.muteSound=function(e){null==e?(console.warn("muteSound called without arguments, assuming you meant to say muteSound(true)"),console.trace(),this.module.muteSound(!0)):this.module.muteSound(e)},e.prototype.processFrame=function(e,t,r,n){this.module.processFrameRawPixels(e,t,r,n)},e.prototype.processImage=function(e){var t=document.createElement("canvas"),r=t.getContext("2d",{willReadFrequently:!0});t.width=e.width,t.height=e.height,r.drawImage(e,0,0);var n=r.getImageData(0,0,t.width,t.height),o=new Uint8Array(n.data.buffer);this.processFrame(o,e.width,e.height,!1)},e.prototype.setPaused=function(e){e?this.module.endLoop():this.module.startLoop()},e.prototype.changeParameterFloat=function(e,t,r,n){this.module.changeParameterFloat(e,null==t?"":t,r,n)},e.prototype.changeParameterBool=function(e,t,r,n){this.module.changeParameterBool(e,null==t?"":t,r,n)},e.prototype.changeParameterVector=function(e,t,r,n,o,a,i){this.module.changeParameterVector(e,null==t?"":t,r,n,o,a,i)},e.prototype.changeParameterTexture=function(e,t,r,n){var o=this,a=new Image;a.onload=function(){var n=document.createElement("canvas"),i=n.getContext("2d",{willReadFrequently:!0});n.width=a.width,n.height=a.height,i.drawImage(a,0,0);var s=i.getImageData(0,0,n.width,n.height),p=new Uint8Array(s.data.buffer),l=o.module._malloc(p.length);o.module.HEAPU8.set(p,l),o.module.changeParameterTexture(e,null==t?"":t,r,l,p.length,n.width,n.height)},a.src=n},e.prototype.fireTrigger=function(e){this.module.fireTrigger(e)},e.prototype.setFaceDetectionSensitivity=function(e){this.module.setFaceDetectionSensitivity(e)},e.prototype.setOffscreenRenderingEnabled=function(e){this.module.setOffscreenRenderingEnabled(e)},e.prototype.getCanvas=function(){return this.module.canvas},e.prototype.setFps=function(e){this.module.setFps(e)},e.prototype.initializeFootTracking=function(){this.module.initializeFootTracking()},e.prototype.isFootTrackingInitialized=function(){return this.module.isFootTrackingInitialized()},e.prototype.initializeSegmentation=function(){this.module.initializeSegmentation()},e.prototype.isSegmentationInitialized=function(){return this.module.isSegmentationInitialized()},e.prototype.isWristTrackingInitialized=function(){return this.module.isWristTrackingInitialized()},e.prototype.showStats=function(e){this.module.showStats(e)},e.prototype.simulatePhysics=function(e){this.module.simulatePhysics(e)},e.prototype.moveGameObject=function(e,t){this.module.moveGameObject(e,t)},e.prototype.touchOccurred=function(e){e.x/=this.module.canvasWidth,e.y/=this.module.canvasHeight,this.module.touchOccurred(e)},e.prototype.enableAutoframing=function(e){this.module._enableAutoframing(e)},e.prototype.getConsoleLogs=function(){return this.module.getConsoleLogs()},e.prototype.pushConsoleLog=function(e,t){return this.module.pushConsoleLog(e,t)},e.prototype.showColliders=function(e){this.module.showColliders(e)},e.prototype.setZoom=function(e){this.module._setZoom(e)},e}()})();var __webpack_exports__ARTouchType=__webpack_exports__.Ao,__webpack_exports__DeepAR=__webpack_exports__.Gv,__webpack_exports__ScriptingAPI=__webpack_exports__.rQ,__webpack_exports__VarType=__webpack_exports__.o,__webpack_exports__errors=__webpack_exports__.R0,__webpack_exports__initialize=__webpack_exports__.j2,__webpack_exports__version=__webpack_exports__.i8;export{__webpack_exports__ARTouchType as ARTouchType,__webpack_exports__DeepAR as DeepAR,__webpack_exports__ScriptingAPI as ScriptingAPI,__webpack_exports__VarType as VarType,__webpack_exports__errors as errors,__webpack_exports__initialize as initialize,__webpack_exports__version as version};
